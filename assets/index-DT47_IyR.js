function iG(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function sG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var FP={exports:{}},zg={},HP={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh=Symbol.for("react.element"),rG=Symbol.for("react.portal"),oG=Symbol.for("react.fragment"),aG=Symbol.for("react.strict_mode"),lG=Symbol.for("react.profiler"),cG=Symbol.for("react.provider"),uG=Symbol.for("react.context"),dG=Symbol.for("react.forward_ref"),hG=Symbol.for("react.suspense"),pG=Symbol.for("react.memo"),fG=Symbol.for("react.lazy"),JE=Symbol.iterator;function mG(t){return t===null||typeof t!="object"?null:(t=JE&&t[JE]||t["@@iterator"],typeof t=="function"?t:null)}var NP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zP=Object.assign,WP={};function ou(t,e,n){this.props=t,this.context=e,this.refs=WP,this.updater=n||NP}ou.prototype.isReactComponent={};ou.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ou.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GP(){}GP.prototype=ou.prototype;function px(t,e,n){this.props=t,this.context=e,this.refs=WP,this.updater=n||NP}var fx=px.prototype=new GP;fx.constructor=px;zP(fx,ou.prototype);fx.isPureReactComponent=!0;var eT=Array.isArray,UP=Object.prototype.hasOwnProperty,mx={current:null},KP={key:!0,ref:!0,__self:!0,__source:!0};function jP(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)UP.call(e,i)&&!KP.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Mh,type:t,key:r,ref:o,props:s,_owner:mx.current}}function gG(t,e){return{$$typeof:Mh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mh}function _G(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tT=/\/+/g;function Fy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_G(""+t.key):e.toString(36)}function Hf(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mh:case rG:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+Fy(o,0):i,eT(s)?(n="",t!=null&&(n=t.replace(tT,"$&/")+"/"),Hf(s,e,n,"",function(c){return c})):s!=null&&(gx(s)&&(s=gG(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",eT(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+Fy(r,a);o+=Hf(r,e,n,l,s)}else if(l=mG(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+Fy(r,a++),o+=Hf(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lp(t,e,n){if(t==null)return t;var i=[],s=0;return Hf(t,i,"","",function(r){return e.call(n,r,s++)}),i}function yG(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var oi={current:null},Nf={transition:null},vG={ReactCurrentDispatcher:oi,ReactCurrentBatchConfig:Nf,ReactCurrentOwner:mx};function qP(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Lp,forEach:function(t,e,n){Lp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lp(t,function(){e++}),e},toArray:function(t){return Lp(t,function(e){return e})||[]},only:function(t){if(!gx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=ou;Fe.Fragment=oG;Fe.Profiler=lG;Fe.PureComponent=px;Fe.StrictMode=aG;Fe.Suspense=hG;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vG;Fe.act=qP;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=zP({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=mx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)UP.call(e,l)&&!KP.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Mh,type:t.type,key:s,ref:r,props:i,_owner:o}};Fe.createContext=function(t){return t={$$typeof:uG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cG,_context:t},t.Consumer=t};Fe.createElement=jP;Fe.createFactory=function(t){var e=jP.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:dG,render:t}};Fe.isValidElement=gx;Fe.lazy=function(t){return{$$typeof:fG,_payload:{_status:-1,_result:t},_init:yG}};Fe.memo=function(t,e){return{$$typeof:pG,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=Nf.transition;Nf.transition={};try{t()}finally{Nf.transition=e}};Fe.unstable_act=qP;Fe.useCallback=function(t,e){return oi.current.useCallback(t,e)};Fe.useContext=function(t){return oi.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return oi.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return oi.current.useEffect(t,e)};Fe.useId=function(){return oi.current.useId()};Fe.useImperativeHandle=function(t,e,n){return oi.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return oi.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return oi.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return oi.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return oi.current.useReducer(t,e,n)};Fe.useRef=function(t){return oi.current.useRef(t)};Fe.useState=function(t){return oi.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return oi.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return oi.current.useTransition()};Fe.version="18.3.1";HP.exports=Fe;var G=HP.exports;const CG=sG(G),DG=iG({__proto__:null,default:CG},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xG=G,wG=Symbol.for("react.element"),SG=Symbol.for("react.fragment"),bG=Object.prototype.hasOwnProperty,EG=xG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TG={key:!0,ref:!0,__self:!0,__source:!0};function YP(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)bG.call(e,i)&&!TG.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:wG,type:t,key:r,ref:o,props:s,_owner:EG.current}}zg.Fragment=SG;zg.jsx=YP;zg.jsxs=YP;FP.exports=zg;var ka=FP.exports,ZP={exports:{}},Hi={},QP={exports:{}},XP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,_e){var we=ne.length;ne.push(_e);e:for(;0<we;){var ft=we-1>>>1,Je=ne[ft];if(0<s(Je,_e))ne[ft]=_e,ne[we]=Je,we=ft;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var _e=ne[0],we=ne.pop();if(we!==_e){ne[0]=we;e:for(var ft=0,Je=ne.length,pt=Je>>>1;ft<pt;){var wi=2*(ft+1)-1,Si=ne[wi],be=wi+1,Oe=ne[be];if(0>s(Si,we))be<Je&&0>s(Oe,Si)?(ne[ft]=Oe,ne[be]=we,ft=be):(ne[ft]=Si,ne[wi]=we,ft=wi);else if(be<Je&&0>s(Oe,we))ne[ft]=Oe,ne[be]=we,ft=be;else break e}}return _e}function s(ne,_e){var we=ne.sortIndex-_e.sortIndex;return we!==0?we:ne.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,f=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(ne){for(var _e=n(c);_e!==null;){if(_e.callback===null)i(c);else if(_e.startTime<=ne)i(c),_e.sortIndex=_e.expirationTime,e(l,_e);else break;_e=n(c)}}function O(ne){if(y=!1,S(ne),!g)if(n(l)!==null)g=!0,Qt(H);else{var _e=n(c);_e!==null&&an(O,_e.startTime-ne)}}function H(ne,_e){g=!1,y&&(y=!1,C(w),w=-1),f=!0;var we=p;try{for(S(_e),d=n(l);d!==null&&(!(d.expirationTime>_e)||ne&&!P());){var ft=d.callback;if(typeof ft=="function"){d.callback=null,p=d.priorityLevel;var Je=ft(d.expirationTime<=_e);_e=t.unstable_now(),typeof Je=="function"?d.callback=Je:d===n(l)&&i(l),S(_e)}else i(l);d=n(l)}if(d!==null)var pt=!0;else{var wi=n(c);wi!==null&&an(O,wi.startTime-_e),pt=!1}return pt}finally{d=null,p=we,f=!1}}var F=!1,I=null,w=-1,A=5,k=-1;function P(){return!(t.unstable_now()-k<A)}function $(){if(I!==null){var ne=t.unstable_now();k=ne;var _e=!0;try{_e=I(!0,ne)}finally{_e?R():(F=!1,I=null)}}else F=!1}var R;if(typeof x=="function")R=function(){x($)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,vt=Ae.port2;Ae.port1.onmessage=$,R=function(){vt.postMessage(null)}}else R=function(){v($,0)};function Qt(ne){I=ne,F||(F=!0,R())}function an(ne,_e){w=v(function(){ne(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,Qt(H))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ne){switch(p){case 1:case 2:case 3:var _e=3;break;default:_e=p}var we=p;p=_e;try{return ne()}finally{p=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,_e){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=p;p=ne;try{return _e()}finally{p=we}},t.unstable_scheduleCallback=function(ne,_e,we){var ft=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?ft+we:ft):we=ft,ne){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=we+Je,ne={id:u++,callback:_e,priorityLevel:ne,startTime:we,expirationTime:Je,sortIndex:-1},we>ft?(ne.sortIndex=we,e(c,ne),n(l)===null&&ne===n(c)&&(y?(C(w),w=-1):y=!0,an(O,we-ft))):(ne.sortIndex=Je,e(l,ne),g||f||(g=!0,Qt(H))),ne},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(ne){var _e=p;return function(){var we=p;p=_e;try{return ne.apply(this,arguments)}finally{p=we}}}})(XP);QP.exports=XP;var IG=QP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AG=G,Vi=IG;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JP=new Set,$d={};function hl(t,e){Lc(t,e),Lc(t+"Capture",e)}function Lc(t,e){for($d[t]=e,t=0;t<e.length;t++)JP.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IC=Object.prototype.hasOwnProperty,kG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nT={},iT={};function RG(t){return IC.call(iT,t)?!0:IC.call(nT,t)?!1:kG.test(t)?iT[t]=!0:(nT[t]=!0,!1)}function OG(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PG(t,e,n,i){if(e===null||typeof e>"u"||OG(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ai(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){In[t]=new ai(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];In[e]=new ai(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){In[t]=new ai(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){In[t]=new ai(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){In[t]=new ai(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){In[t]=new ai(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){In[t]=new ai(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){In[t]=new ai(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){In[t]=new ai(t,5,!1,t.toLowerCase(),null,!1,!1)});var _x=/[\-:]([a-z])/g;function yx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_x,yx);In[e]=new ai(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_x,yx);In[e]=new ai(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_x,yx);In[e]=new ai(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){In[t]=new ai(t,1,!1,t.toLowerCase(),null,!1,!1)});In.xlinkHref=new ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){In[t]=new ai(t,1,!1,t.toLowerCase(),null,!0,!0)});function vx(t,e,n,i){var s=In.hasOwnProperty(e)?In[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PG(e,n,s,i)&&(n=null),i||s===null?RG(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Qr=AG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$p=Symbol.for("react.element"),sc=Symbol.for("react.portal"),rc=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),AC=Symbol.for("react.profiler"),eM=Symbol.for("react.provider"),tM=Symbol.for("react.context"),Dx=Symbol.for("react.forward_ref"),kC=Symbol.for("react.suspense"),RC=Symbol.for("react.suspense_list"),xx=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),nM=Symbol.for("react.offscreen"),sT=Symbol.iterator;function Pu(t){return t===null||typeof t!="object"?null:(t=sT&&t[sT]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,Hy;function rd(t){if(Hy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hy=e&&e[1]||""}return`
`+Hy+t}var Ny=!1;function zy(t,e){if(!t||Ny)return"";Ny=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ny=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rd(t):""}function MG(t){switch(t.tag){case 5:return rd(t.type);case 16:return rd("Lazy");case 13:return rd("Suspense");case 19:return rd("SuspenseList");case 0:case 2:case 15:return t=zy(t.type,!1),t;case 11:return t=zy(t.type.render,!1),t;case 1:return t=zy(t.type,!0),t;default:return""}}function OC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rc:return"Fragment";case sc:return"Portal";case AC:return"Profiler";case Cx:return"StrictMode";case kC:return"Suspense";case RC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tM:return(t.displayName||"Context")+".Consumer";case eM:return(t._context.displayName||"Context")+".Provider";case Dx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xx:return e=t.displayName||null,e!==null?e:OC(t.type)||"Memo";case lo:e=t._payload,t=t._init;try{return OC(t(e))}catch{}}return null}function VG(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OC(e);case 8:return e===Cx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iM(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BG(t){var e=iM(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fp(t){t._valueTracker||(t._valueTracker=BG(t))}function sM(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=iM(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function wm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function PC(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rT(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=zo(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rM(t,e){e=e.checked,e!=null&&vx(t,"checked",e,!1)}function MC(t,e){rM(t,e);var n=zo(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?VC(t,e.type,n):e.hasOwnProperty("defaultValue")&&VC(t,e.type,zo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function VC(t,e,n){(e!=="number"||wm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var od=Array.isArray;function xc(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+zo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function BC(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(od(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zo(n)}}function oM(t,e){var n=zo(e.value),i=zo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function lT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function LC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hp,lM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hp=Hp||document.createElement("div"),Hp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LG=["Webkit","ms","Moz","O"];Object.keys(gd).forEach(function(t){LG.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gd[e]=gd[t]})});function cM(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gd.hasOwnProperty(t)&&gd[t]?(""+e).trim():e+"px"}function uM(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=cM(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var $G=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $C(t,e){if(e){if($G[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function FC(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HC=null;function wx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var NC=null,wc=null,Sc=null;function cT(t){if(t=Lh(t)){if(typeof NC!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=jg(e),NC(t.stateNode,t.type,e))}}function dM(t){wc?Sc?Sc.push(t):Sc=[t]:wc=t}function hM(){if(wc){var t=wc,e=Sc;if(Sc=wc=null,cT(t),e)for(t=0;t<e.length;t++)cT(e[t])}}function pM(t,e){return t(e)}function fM(){}var Wy=!1;function mM(t,e,n){if(Wy)return t(e,n);Wy=!0;try{return pM(t,e,n)}finally{Wy=!1,(wc!==null||Sc!==null)&&(fM(),hM())}}function Hd(t,e){var n=t.stateNode;if(n===null)return null;var i=jg(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var zC=!1;if($r)try{var Mu={};Object.defineProperty(Mu,"passive",{get:function(){zC=!0}}),window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{zC=!1}function FG(t,e,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var _d=!1,Sm=null,bm=!1,WC=null,HG={onError:function(t){_d=!0,Sm=t}};function NG(t,e,n,i,s,r,o,a,l){_d=!1,Sm=null,FG.apply(HG,arguments)}function zG(t,e,n,i,s,r,o,a,l){if(NG.apply(this,arguments),_d){if(_d){var c=Sm;_d=!1,Sm=null}else throw Error(Q(198));bm||(bm=!0,WC=c)}}function pl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uT(t){if(pl(t)!==t)throw Error(Q(188))}function WG(t){var e=t.alternate;if(!e){if(e=pl(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return uT(s),t;if(r===i)return uT(s),e;r=r.sibling}throw Error(Q(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function _M(t){return t=WG(t),t!==null?yM(t):null}function yM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yM(t);if(e!==null)return e;t=t.sibling}return null}var vM=Vi.unstable_scheduleCallback,dT=Vi.unstable_cancelCallback,GG=Vi.unstable_shouldYield,UG=Vi.unstable_requestPaint,Ut=Vi.unstable_now,KG=Vi.unstable_getCurrentPriorityLevel,Sx=Vi.unstable_ImmediatePriority,CM=Vi.unstable_UserBlockingPriority,Em=Vi.unstable_NormalPriority,jG=Vi.unstable_LowPriority,DM=Vi.unstable_IdlePriority,Wg=null,js=null;function qG(t){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(Wg,t,void 0,(t.current.flags&128)===128)}catch{}}var Ss=Math.clz32?Math.clz32:QG,YG=Math.log,ZG=Math.LN2;function QG(t){return t>>>=0,t===0?32:31-(YG(t)/ZG|0)|0}var Np=64,zp=4194304;function ad(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tm(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=ad(a):(r&=o,r!==0&&(i=ad(r)))}else o=n&~s,o!==0?i=ad(o):r!==0&&(i=ad(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ss(e),s=1<<n,i|=t[n],e&=~s;return i}function XG(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JG(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-Ss(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=XG(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function GC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xM(){var t=Np;return Np<<=1,!(Np&4194240)&&(Np=64),t}function Gy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ss(e),t[e]=n}function e4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ss(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function bx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ss(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var dt=0;function wM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SM,Ex,bM,EM,TM,UC=!1,Wp=[],bo=null,Eo=null,To=null,Nd=new Map,zd=new Map,ho=[],t4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hT(t,e){switch(t){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(e.pointerId)}}function Vu(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Lh(e),e!==null&&Ex(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function n4(t,e,n,i,s){switch(e){case"focusin":return bo=Vu(bo,t,e,n,i,s),!0;case"dragenter":return Eo=Vu(Eo,t,e,n,i,s),!0;case"mouseover":return To=Vu(To,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Nd.set(r,Vu(Nd.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,zd.set(r,Vu(zd.get(r)||null,t,e,n,i,s)),!0}return!1}function IM(t){var e=Ra(t.target);if(e!==null){var n=pl(e);if(n!==null){if(e=n.tag,e===13){if(e=gM(n),e!==null){t.blockedOn=e,TM(t.priority,function(){bM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=KC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);HC=i,n.target.dispatchEvent(i),HC=null}else return e=Lh(n),e!==null&&Ex(e),t.blockedOn=n,!1;e.shift()}return!0}function pT(t,e,n){zf(t)&&n.delete(e)}function i4(){UC=!1,bo!==null&&zf(bo)&&(bo=null),Eo!==null&&zf(Eo)&&(Eo=null),To!==null&&zf(To)&&(To=null),Nd.forEach(pT),zd.forEach(pT)}function Bu(t,e){t.blockedOn===e&&(t.blockedOn=null,UC||(UC=!0,Vi.unstable_scheduleCallback(Vi.unstable_NormalPriority,i4)))}function Wd(t){function e(s){return Bu(s,t)}if(0<Wp.length){Bu(Wp[0],t);for(var n=1;n<Wp.length;n++){var i=Wp[n];i.blockedOn===t&&(i.blockedOn=null)}}for(bo!==null&&Bu(bo,t),Eo!==null&&Bu(Eo,t),To!==null&&Bu(To,t),Nd.forEach(e),zd.forEach(e),n=0;n<ho.length;n++)i=ho[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ho.length&&(n=ho[0],n.blockedOn===null);)IM(n),n.blockedOn===null&&ho.shift()}var bc=Qr.ReactCurrentBatchConfig,Im=!0;function s4(t,e,n,i){var s=dt,r=bc.transition;bc.transition=null;try{dt=1,Tx(t,e,n,i)}finally{dt=s,bc.transition=r}}function r4(t,e,n,i){var s=dt,r=bc.transition;bc.transition=null;try{dt=4,Tx(t,e,n,i)}finally{dt=s,bc.transition=r}}function Tx(t,e,n,i){if(Im){var s=KC(t,e,n,i);if(s===null)ev(t,e,i,Am,n),hT(t,i);else if(n4(s,t,e,n,i))i.stopPropagation();else if(hT(t,i),e&4&&-1<t4.indexOf(t)){for(;s!==null;){var r=Lh(s);if(r!==null&&SM(r),r=KC(t,e,n,i),r===null&&ev(t,e,i,Am,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else ev(t,e,i,null,n)}}var Am=null;function KC(t,e,n,i){if(Am=null,t=wx(i),t=Ra(t),t!==null)if(e=pl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Am=t,null}function AM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KG()){case Sx:return 1;case CM:return 4;case Em:case jG:return 16;case DM:return 536870912;default:return 16}default:return 16}}var _o=null,Ix=null,Wf=null;function kM(){if(Wf)return Wf;var t,e=Ix,n=e.length,i,s="value"in _o?_o.value:_o.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return Wf=s.slice(t,1<i?1-i:void 0)}function Gf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gp(){return!0}function fT(){return!1}function Ni(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Gp:fT,this.isPropagationStopped=fT,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gp)},persist:function(){},isPersistent:Gp}),e}var au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ax=Ni(au),Bh=Pt({},au,{view:0,detail:0}),o4=Ni(Bh),Uy,Ky,Lu,Gg=Pt({},Bh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lu&&(Lu&&t.type==="mousemove"?(Uy=t.screenX-Lu.screenX,Ky=t.screenY-Lu.screenY):Ky=Uy=0,Lu=t),Uy)},movementY:function(t){return"movementY"in t?t.movementY:Ky}}),mT=Ni(Gg),a4=Pt({},Gg,{dataTransfer:0}),l4=Ni(a4),c4=Pt({},Bh,{relatedTarget:0}),jy=Ni(c4),u4=Pt({},au,{animationName:0,elapsedTime:0,pseudoElement:0}),d4=Ni(u4),h4=Pt({},au,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),p4=Ni(h4),f4=Pt({},au,{data:0}),gT=Ni(f4),m4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_4[t])?!!e[t]:!1}function kx(){return y4}var v4=Pt({},Bh,{key:function(t){if(t.key){var e=m4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?g4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kx,charCode:function(t){return t.type==="keypress"?Gf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C4=Ni(v4),D4=Pt({},Gg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_T=Ni(D4),x4=Pt({},Bh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kx}),w4=Ni(x4),S4=Pt({},au,{propertyName:0,elapsedTime:0,pseudoElement:0}),b4=Ni(S4),E4=Pt({},Gg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),T4=Ni(E4),I4=[9,13,27,32],Rx=$r&&"CompositionEvent"in window,yd=null;$r&&"documentMode"in document&&(yd=document.documentMode);var A4=$r&&"TextEvent"in window&&!yd,RM=$r&&(!Rx||yd&&8<yd&&11>=yd),yT=" ",vT=!1;function OM(t,e){switch(t){case"keyup":return I4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oc=!1;function k4(t,e){switch(t){case"compositionend":return PM(e);case"keypress":return e.which!==32?null:(vT=!0,yT);case"textInput":return t=e.data,t===yT&&vT?null:t;default:return null}}function R4(t,e){if(oc)return t==="compositionend"||!Rx&&OM(t,e)?(t=kM(),Wf=Ix=_o=null,oc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RM&&e.locale!=="ko"?null:e.data;default:return null}}var O4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!O4[t.type]:e==="textarea"}function MM(t,e,n,i){dM(i),e=km(e,"onChange"),0<e.length&&(n=new Ax("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var vd=null,Gd=null;function P4(t){UM(t,0)}function Ug(t){var e=cc(t);if(sM(e))return t}function M4(t,e){if(t==="change")return e}var VM=!1;if($r){var qy;if($r){var Yy="oninput"in document;if(!Yy){var DT=document.createElement("div");DT.setAttribute("oninput","return;"),Yy=typeof DT.oninput=="function"}qy=Yy}else qy=!1;VM=qy&&(!document.documentMode||9<document.documentMode)}function xT(){vd&&(vd.detachEvent("onpropertychange",BM),Gd=vd=null)}function BM(t){if(t.propertyName==="value"&&Ug(Gd)){var e=[];MM(e,Gd,t,wx(t)),mM(P4,e)}}function V4(t,e,n){t==="focusin"?(xT(),vd=e,Gd=n,vd.attachEvent("onpropertychange",BM)):t==="focusout"&&xT()}function B4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ug(Gd)}function L4(t,e){if(t==="click")return Ug(e)}function $4(t,e){if(t==="input"||t==="change")return Ug(e)}function F4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ts=typeof Object.is=="function"?Object.is:F4;function Ud(t,e){if(Ts(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!IC.call(e,s)||!Ts(t[s],e[s]))return!1}return!0}function wT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ST(t,e){var n=wT(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wT(n)}}function LM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $M(){for(var t=window,e=wm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wm(t.document)}return e}function Ox(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H4(t){var e=$M(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LM(n.ownerDocument.documentElement,n)){if(i!==null&&Ox(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=ST(n,r);var o=ST(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N4=$r&&"documentMode"in document&&11>=document.documentMode,ac=null,jC=null,Cd=null,qC=!1;function bT(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qC||ac==null||ac!==wm(i)||(i=ac,"selectionStart"in i&&Ox(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Cd&&Ud(Cd,i)||(Cd=i,i=km(jC,"onSelect"),0<i.length&&(e=new Ax("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ac)))}function Up(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lc={animationend:Up("Animation","AnimationEnd"),animationiteration:Up("Animation","AnimationIteration"),animationstart:Up("Animation","AnimationStart"),transitionend:Up("Transition","TransitionEnd")},Zy={},FM={};$r&&(FM=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function Kg(t){if(Zy[t])return Zy[t];if(!lc[t])return t;var e=lc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FM)return Zy[t]=e[n];return t}var HM=Kg("animationend"),NM=Kg("animationiteration"),zM=Kg("animationstart"),WM=Kg("transitionend"),GM=new Map,ET="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zo(t,e){GM.set(t,e),hl(e,[t])}for(var Qy=0;Qy<ET.length;Qy++){var Xy=ET[Qy],z4=Xy.toLowerCase(),W4=Xy[0].toUpperCase()+Xy.slice(1);Zo(z4,"on"+W4)}Zo(HM,"onAnimationEnd");Zo(NM,"onAnimationIteration");Zo(zM,"onAnimationStart");Zo("dblclick","onDoubleClick");Zo("focusin","onFocus");Zo("focusout","onBlur");Zo(WM,"onTransitionEnd");Lc("onMouseEnter",["mouseout","mouseover"]);Lc("onMouseLeave",["mouseout","mouseover"]);Lc("onPointerEnter",["pointerout","pointerover"]);Lc("onPointerLeave",["pointerout","pointerover"]);hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hl("onBeforeInput",["compositionend","keypress","textInput","paste"]);hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ld="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G4=new Set("cancel close invalid load scroll toggle".split(" ").concat(ld));function TT(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,zG(i,e,void 0,t),t.currentTarget=null}function UM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;TT(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;TT(s,a,c),r=l}}}if(bm)throw t=WC,bm=!1,WC=null,t}function wt(t,e){var n=e[JC];n===void 0&&(n=e[JC]=new Set);var i=t+"__bubble";n.has(i)||(KM(e,t,2,!1),n.add(i))}function Jy(t,e,n){var i=0;e&&(i|=4),KM(n,t,i,e)}var Kp="_reactListening"+Math.random().toString(36).slice(2);function Kd(t){if(!t[Kp]){t[Kp]=!0,JP.forEach(function(n){n!=="selectionchange"&&(G4.has(n)||Jy(n,!1,t),Jy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kp]||(e[Kp]=!0,Jy("selectionchange",!1,e))}}function KM(t,e,n,i){switch(AM(e)){case 1:var s=s4;break;case 4:s=r4;break;default:s=Tx}n=s.bind(null,e,n,t),s=void 0,!zC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ev(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ra(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}mM(function(){var c=r,u=wx(n),d=[];e:{var p=GM.get(t);if(p!==void 0){var f=Ax,g=t;switch(t){case"keypress":if(Gf(n)===0)break e;case"keydown":case"keyup":f=C4;break;case"focusin":g="focus",f=jy;break;case"focusout":g="blur",f=jy;break;case"beforeblur":case"afterblur":f=jy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=mT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=l4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=w4;break;case HM:case NM:case zM:f=d4;break;case WM:f=b4;break;case"scroll":f=o4;break;case"wheel":f=T4;break;case"copy":case"cut":case"paste":f=p4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=_T}var y=(e&4)!==0,v=!y&&t==="scroll",C=y?p!==null?p+"Capture":null:p;y=[];for(var x=c,S;x!==null;){S=x;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,C!==null&&(O=Hd(x,C),O!=null&&y.push(jd(x,O,S)))),v)break;x=x.return}0<y.length&&(p=new f(p,g,null,n,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==HC&&(g=n.relatedTarget||n.fromElement)&&(Ra(g)||g[Fr]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=c,g=g?Ra(g):null,g!==null&&(v=pl(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(y=mT,O="onMouseLeave",C="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=_T,O="onPointerLeave",C="onPointerEnter",x="pointer"),v=f==null?p:cc(f),S=g==null?p:cc(g),p=new y(O,x+"leave",f,n,u),p.target=v,p.relatedTarget=S,O=null,Ra(u)===c&&(y=new y(C,x+"enter",g,n,u),y.target=S,y.relatedTarget=v,O=y),v=O,f&&g)t:{for(y=f,C=g,x=0,S=y;S;S=Ml(S))x++;for(S=0,O=C;O;O=Ml(O))S++;for(;0<x-S;)y=Ml(y),x--;for(;0<S-x;)C=Ml(C),S--;for(;x--;){if(y===C||C!==null&&y===C.alternate)break t;y=Ml(y),C=Ml(C)}y=null}else y=null;f!==null&&IT(d,p,f,y,!1),g!==null&&v!==null&&IT(d,v,g,y,!0)}}e:{if(p=c?cc(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var H=M4;else if(CT(p))if(VM)H=$4;else{H=B4;var F=V4}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(H=L4);if(H&&(H=H(t,c))){MM(d,H,n,u);break e}F&&F(t,p,c),t==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&VC(p,"number",p.value)}switch(F=c?cc(c):window,t){case"focusin":(CT(F)||F.contentEditable==="true")&&(ac=F,jC=c,Cd=null);break;case"focusout":Cd=jC=ac=null;break;case"mousedown":qC=!0;break;case"contextmenu":case"mouseup":case"dragend":qC=!1,bT(d,n,u);break;case"selectionchange":if(N4)break;case"keydown":case"keyup":bT(d,n,u)}var I;if(Rx)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else oc?OM(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(RM&&n.locale!=="ko"&&(oc||w!=="onCompositionStart"?w==="onCompositionEnd"&&oc&&(I=kM()):(_o=u,Ix="value"in _o?_o.value:_o.textContent,oc=!0)),F=km(c,w),0<F.length&&(w=new gT(w,t,null,n,u),d.push({event:w,listeners:F}),I?w.data=I:(I=PM(n),I!==null&&(w.data=I)))),(I=A4?k4(t,n):R4(t,n))&&(c=km(c,"onBeforeInput"),0<c.length&&(u=new gT("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=I))}UM(d,e)})}function jd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function km(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Hd(t,n),r!=null&&i.unshift(jd(t,r,s)),r=Hd(t,e),r!=null&&i.push(jd(t,r,s))),t=t.return}return i}function Ml(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IT(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=Hd(n,r),l!=null&&o.unshift(jd(n,l,a))):s||(l=Hd(n,r),l!=null&&o.push(jd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var U4=/\r\n?/g,K4=/\u0000|\uFFFD/g;function AT(t){return(typeof t=="string"?t:""+t).replace(U4,`
`).replace(K4,"")}function jp(t,e,n){if(e=AT(e),AT(t)!==e&&n)throw Error(Q(425))}function Rm(){}var YC=null,ZC=null;function QC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var XC=typeof setTimeout=="function"?setTimeout:void 0,j4=typeof clearTimeout=="function"?clearTimeout:void 0,kT=typeof Promise=="function"?Promise:void 0,q4=typeof queueMicrotask=="function"?queueMicrotask:typeof kT<"u"?function(t){return kT.resolve(null).then(t).catch(Y4)}:XC;function Y4(t){setTimeout(function(){throw t})}function tv(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Wd(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Wd(e)}function Io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function RT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lu=Math.random().toString(36).slice(2),zs="__reactFiber$"+lu,qd="__reactProps$"+lu,Fr="__reactContainer$"+lu,JC="__reactEvents$"+lu,Z4="__reactListeners$"+lu,Q4="__reactHandles$"+lu;function Ra(t){var e=t[zs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[zs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=RT(t);t!==null;){if(n=t[zs])return n;t=RT(t)}return e}t=n,n=t.parentNode}return null}function Lh(t){return t=t[zs]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function jg(t){return t[qd]||null}var eD=[],uc=-1;function Qo(t){return{current:t}}function St(t){0>uc||(t.current=eD[uc],eD[uc]=null,uc--)}function Ct(t,e){uc++,eD[uc]=t.current,t.current=e}var Wo={},jn=Qo(Wo),gi=Qo(!1),Xa=Wo;function $c(t,e){var n=t.type.contextTypes;if(!n)return Wo;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _i(t){return t=t.childContextTypes,t!=null}function Om(){St(gi),St(jn)}function OT(t,e,n){if(jn.current!==Wo)throw Error(Q(168));Ct(jn,e),Ct(gi,n)}function jM(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Q(108,VG(t)||"Unknown",s));return Pt({},n,i)}function Pm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wo,Xa=jn.current,Ct(jn,t),Ct(gi,gi.current),!0}function PT(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=jM(t,e,Xa),i.__reactInternalMemoizedMergedChildContext=t,St(gi),St(jn),Ct(jn,t)):St(gi),Ct(gi,n)}var wr=null,qg=!1,nv=!1;function qM(t){wr===null?wr=[t]:wr.push(t)}function X4(t){qg=!0,qM(t)}function Xo(){if(!nv&&wr!==null){nv=!0;var t=0,e=dt;try{var n=wr;for(dt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}wr=null,qg=!1}catch(s){throw wr!==null&&(wr=wr.slice(t+1)),vM(Sx,Xo),s}finally{dt=e,nv=!1}}return null}var dc=[],hc=0,Mm=null,Vm=0,qi=[],Yi=0,Ja=null,Tr=1,Ir="";function wa(t,e){dc[hc++]=Vm,dc[hc++]=Mm,Mm=t,Vm=e}function YM(t,e,n){qi[Yi++]=Tr,qi[Yi++]=Ir,qi[Yi++]=Ja,Ja=t;var i=Tr;t=Ir;var s=32-Ss(i)-1;i&=~(1<<s),n+=1;var r=32-Ss(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Tr=1<<32-Ss(e)+s|n<<s|i,Ir=r+t}else Tr=1<<r|n<<s|i,Ir=t}function Px(t){t.return!==null&&(wa(t,1),YM(t,1,0))}function Mx(t){for(;t===Mm;)Mm=dc[--hc],dc[hc]=null,Vm=dc[--hc],dc[hc]=null;for(;t===Ja;)Ja=qi[--Yi],qi[Yi]=null,Ir=qi[--Yi],qi[Yi]=null,Tr=qi[--Yi],qi[Yi]=null}var Pi=null,Ii=null,It=!1,xs=null;function ZM(t,e){var n=es(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function MT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pi=t,Ii=Io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pi=t,Ii=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ja!==null?{id:Tr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=es(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pi=t,Ii=null,!0):!1;default:return!1}}function tD(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nD(t){if(It){var e=Ii;if(e){var n=e;if(!MT(t,e)){if(tD(t))throw Error(Q(418));e=Io(n.nextSibling);var i=Pi;e&&MT(t,e)?ZM(i,n):(t.flags=t.flags&-4097|2,It=!1,Pi=t)}}else{if(tD(t))throw Error(Q(418));t.flags=t.flags&-4097|2,It=!1,Pi=t}}}function VT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pi=t}function qp(t){if(t!==Pi)return!1;if(!It)return VT(t),It=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!QC(t.type,t.memoizedProps)),e&&(e=Ii)){if(tD(t))throw QM(),Error(Q(418));for(;e;)ZM(t,e),e=Io(e.nextSibling)}if(VT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ii=Io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ii=null}}else Ii=Pi?Io(t.stateNode.nextSibling):null;return!0}function QM(){for(var t=Ii;t;)t=Io(t.nextSibling)}function Fc(){Ii=Pi=null,It=!1}function Vx(t){xs===null?xs=[t]:xs.push(t)}var J4=Qr.ReactCurrentBatchConfig;function $u(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Yp(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function BT(t){var e=t._init;return e(t._payload)}function XM(t){function e(C,x){if(t){var S=C.deletions;S===null?(C.deletions=[x],C.flags|=16):S.push(x)}}function n(C,x){if(!t)return null;for(;x!==null;)e(C,x),x=x.sibling;return null}function i(C,x){for(C=new Map;x!==null;)x.key!==null?C.set(x.key,x):C.set(x.index,x),x=x.sibling;return C}function s(C,x){return C=Oo(C,x),C.index=0,C.sibling=null,C}function r(C,x,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<x?(C.flags|=2,x):S):(C.flags|=2,x)):(C.flags|=1048576,x)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,x,S,O){return x===null||x.tag!==6?(x=cv(S,C.mode,O),x.return=C,x):(x=s(x,S),x.return=C,x)}function l(C,x,S,O){var H=S.type;return H===rc?u(C,x,S.props.children,O,S.key):x!==null&&(x.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===lo&&BT(H)===x.type)?(O=s(x,S.props),O.ref=$u(C,x,S),O.return=C,O):(O=Qf(S.type,S.key,S.props,null,C.mode,O),O.ref=$u(C,x,S),O.return=C,O)}function c(C,x,S,O){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=uv(S,C.mode,O),x.return=C,x):(x=s(x,S.children||[]),x.return=C,x)}function u(C,x,S,O,H){return x===null||x.tag!==7?(x=za(S,C.mode,O,H),x.return=C,x):(x=s(x,S),x.return=C,x)}function d(C,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=cv(""+x,C.mode,S),x.return=C,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $p:return S=Qf(x.type,x.key,x.props,null,C.mode,S),S.ref=$u(C,null,x),S.return=C,S;case sc:return x=uv(x,C.mode,S),x.return=C,x;case lo:var O=x._init;return d(C,O(x._payload),S)}if(od(x)||Pu(x))return x=za(x,C.mode,S,null),x.return=C,x;Yp(C,x)}return null}function p(C,x,S,O){var H=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return H!==null?null:a(C,x,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $p:return S.key===H?l(C,x,S,O):null;case sc:return S.key===H?c(C,x,S,O):null;case lo:return H=S._init,p(C,x,H(S._payload),O)}if(od(S)||Pu(S))return H!==null?null:u(C,x,S,O,null);Yp(C,S)}return null}function f(C,x,S,O,H){if(typeof O=="string"&&O!==""||typeof O=="number")return C=C.get(S)||null,a(x,C,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case $p:return C=C.get(O.key===null?S:O.key)||null,l(x,C,O,H);case sc:return C=C.get(O.key===null?S:O.key)||null,c(x,C,O,H);case lo:var F=O._init;return f(C,x,S,F(O._payload),H)}if(od(O)||Pu(O))return C=C.get(S)||null,u(x,C,O,H,null);Yp(x,O)}return null}function g(C,x,S,O){for(var H=null,F=null,I=x,w=x=0,A=null;I!==null&&w<S.length;w++){I.index>w?(A=I,I=null):A=I.sibling;var k=p(C,I,S[w],O);if(k===null){I===null&&(I=A);break}t&&I&&k.alternate===null&&e(C,I),x=r(k,x,w),F===null?H=k:F.sibling=k,F=k,I=A}if(w===S.length)return n(C,I),It&&wa(C,w),H;if(I===null){for(;w<S.length;w++)I=d(C,S[w],O),I!==null&&(x=r(I,x,w),F===null?H=I:F.sibling=I,F=I);return It&&wa(C,w),H}for(I=i(C,I);w<S.length;w++)A=f(I,C,w,S[w],O),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?w:A.key),x=r(A,x,w),F===null?H=A:F.sibling=A,F=A);return t&&I.forEach(function(P){return e(C,P)}),It&&wa(C,w),H}function y(C,x,S,O){var H=Pu(S);if(typeof H!="function")throw Error(Q(150));if(S=H.call(S),S==null)throw Error(Q(151));for(var F=H=null,I=x,w=x=0,A=null,k=S.next();I!==null&&!k.done;w++,k=S.next()){I.index>w?(A=I,I=null):A=I.sibling;var P=p(C,I,k.value,O);if(P===null){I===null&&(I=A);break}t&&I&&P.alternate===null&&e(C,I),x=r(P,x,w),F===null?H=P:F.sibling=P,F=P,I=A}if(k.done)return n(C,I),It&&wa(C,w),H;if(I===null){for(;!k.done;w++,k=S.next())k=d(C,k.value,O),k!==null&&(x=r(k,x,w),F===null?H=k:F.sibling=k,F=k);return It&&wa(C,w),H}for(I=i(C,I);!k.done;w++,k=S.next())k=f(I,C,w,k.value,O),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?w:k.key),x=r(k,x,w),F===null?H=k:F.sibling=k,F=k);return t&&I.forEach(function($){return e(C,$)}),It&&wa(C,w),H}function v(C,x,S,O){if(typeof S=="object"&&S!==null&&S.type===rc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $p:e:{for(var H=S.key,F=x;F!==null;){if(F.key===H){if(H=S.type,H===rc){if(F.tag===7){n(C,F.sibling),x=s(F,S.props.children),x.return=C,C=x;break e}}else if(F.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===lo&&BT(H)===F.type){n(C,F.sibling),x=s(F,S.props),x.ref=$u(C,F,S),x.return=C,C=x;break e}n(C,F);break}else e(C,F);F=F.sibling}S.type===rc?(x=za(S.props.children,C.mode,O,S.key),x.return=C,C=x):(O=Qf(S.type,S.key,S.props,null,C.mode,O),O.ref=$u(C,x,S),O.return=C,C=O)}return o(C);case sc:e:{for(F=S.key;x!==null;){if(x.key===F)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(C,x.sibling),x=s(x,S.children||[]),x.return=C,C=x;break e}else{n(C,x);break}else e(C,x);x=x.sibling}x=uv(S,C.mode,O),x.return=C,C=x}return o(C);case lo:return F=S._init,v(C,x,F(S._payload),O)}if(od(S))return g(C,x,S,O);if(Pu(S))return y(C,x,S,O);Yp(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(C,x.sibling),x=s(x,S),x.return=C,C=x):(n(C,x),x=cv(S,C.mode,O),x.return=C,C=x),o(C)):n(C,x)}return v}var Hc=XM(!0),JM=XM(!1),Bm=Qo(null),Lm=null,pc=null,Bx=null;function Lx(){Bx=pc=Lm=null}function $x(t){var e=Bm.current;St(Bm),t._currentValue=e}function iD(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ec(t,e){Lm=t,Bx=pc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pi=!0),t.firstContext=null)}function rs(t){var e=t._currentValue;if(Bx!==t)if(t={context:t,memoizedValue:e,next:null},pc===null){if(Lm===null)throw Error(Q(308));pc=t,Lm.dependencies={lanes:0,firstContext:t}}else pc=pc.next=t;return e}var Oa=null;function Fx(t){Oa===null?Oa=[t]:Oa.push(t)}function e1(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Fx(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hr(t,i)}function Hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var co=!1;function Hx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ao(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ke&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Hr(t,n)}return s=i.interleaved,s===null?(e.next=e,Fx(i)):(e.next=s.next,s.next=e),i.interleaved=e,Hr(t,n)}function Uf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bx(t,n)}}function LT(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $m(t,e,n,i){var s=t.updateQueue;co=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;o=0,u=c=l=null,a=r;do{var p=a.lane,f=a.eventTime;if((i&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(p=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(f,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(f,d,p):g,p==null)break e;d=Pt({},d,p);break e;case 2:co=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);tl|=o,t.lanes=o,t.memoizedState=d}}function $T(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Q(191,s));s.call(i)}}}var $h={},qs=Qo($h),Yd=Qo($h),Zd=Qo($h);function Pa(t){if(t===$h)throw Error(Q(174));return t}function Nx(t,e){switch(Ct(Zd,e),Ct(Yd,t),Ct(qs,$h),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:LC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=LC(e,t)}St(qs),Ct(qs,e)}function Nc(){St(qs),St(Yd),St(Zd)}function n1(t){Pa(Zd.current);var e=Pa(qs.current),n=LC(e,t.type);e!==n&&(Ct(Yd,t),Ct(qs,n))}function zx(t){Yd.current===t&&(St(qs),St(Yd))}var Rt=Qo(0);function Fm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var iv=[];function Wx(){for(var t=0;t<iv.length;t++)iv[t]._workInProgressVersionPrimary=null;iv.length=0}var Kf=Qr.ReactCurrentDispatcher,sv=Qr.ReactCurrentBatchConfig,el=0,Ot=null,Xt=null,dn=null,Hm=!1,Dd=!1,Qd=0,e2=0;function Pn(){throw Error(Q(321))}function Gx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ts(t[n],e[n]))return!1;return!0}function Ux(t,e,n,i,s,r){if(el=r,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kf.current=t===null||t.memoizedState===null?s2:r2,t=n(i,s),Dd){r=0;do{if(Dd=!1,Qd=0,25<=r)throw Error(Q(301));r+=1,dn=Xt=null,e.updateQueue=null,Kf.current=o2,t=n(i,s)}while(Dd)}if(Kf.current=Nm,e=Xt!==null&&Xt.next!==null,el=0,dn=Xt=Ot=null,Hm=!1,e)throw Error(Q(300));return t}function Kx(){var t=Qd!==0;return Qd=0,t}function $s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ot.memoizedState=dn=t:dn=dn.next=t,dn}function os(){if(Xt===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=dn===null?Ot.memoizedState:dn.next;if(e!==null)dn=e,Xt=t;else{if(t===null)throw Error(Q(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},dn===null?Ot.memoizedState=dn=t:dn=dn.next=t}return dn}function Xd(t,e){return typeof e=="function"?e(t):e}function rv(t){var e=os(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=Xt,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((el&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Ot.lanes|=u,tl|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Ts(i,e.memoizedState)||(pi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,Ot.lanes|=r,tl|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ov(t){var e=os(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);Ts(r,e.memoizedState)||(pi=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function i1(){}function s1(t,e){var n=Ot,i=os(),s=e(),r=!Ts(i.memoizedState,s);if(r&&(i.memoizedState=s,pi=!0),i=i.queue,jx(a1.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,Jd(9,o1.bind(null,n,i,s,e),void 0,null),fn===null)throw Error(Q(349));el&30||r1(n,e,s)}return s}function r1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o1(t,e,n,i){e.value=n,e.getSnapshot=i,l1(e)&&c1(t)}function a1(t,e,n){return n(function(){l1(e)&&c1(t)})}function l1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ts(t,n)}catch{return!0}}function c1(t){var e=Hr(t,1);e!==null&&bs(e,t,1,-1)}function FT(t){var e=$s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:t},e.queue=t,t=t.dispatch=i2.bind(null,Ot,t),[e.memoizedState,t]}function Jd(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function u1(){return os().memoizedState}function jf(t,e,n,i){var s=$s();Ot.flags|=t,s.memoizedState=Jd(1|e,n,void 0,i===void 0?null:i)}function Yg(t,e,n,i){var s=os();i=i===void 0?null:i;var r=void 0;if(Xt!==null){var o=Xt.memoizedState;if(r=o.destroy,i!==null&&Gx(i,o.deps)){s.memoizedState=Jd(e,n,r,i);return}}Ot.flags|=t,s.memoizedState=Jd(1|e,n,r,i)}function HT(t,e){return jf(8390656,8,t,e)}function jx(t,e){return Yg(2048,8,t,e)}function d1(t,e){return Yg(4,2,t,e)}function h1(t,e){return Yg(4,4,t,e)}function p1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function f1(t,e,n){return n=n!=null?n.concat([t]):null,Yg(4,4,p1.bind(null,e,t),n)}function qx(){}function m1(t,e){var n=os();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Gx(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function g1(t,e){var n=os();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Gx(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function _1(t,e,n){return el&21?(Ts(n,e)||(n=xM(),Ot.lanes|=n,tl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pi=!0),t.memoizedState=n)}function t2(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var i=sv.transition;sv.transition={};try{t(!1),e()}finally{dt=n,sv.transition=i}}function y1(){return os().memoizedState}function n2(t,e,n){var i=Ro(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},v1(t))C1(e,n);else if(n=e1(t,e,n,i),n!==null){var s=ni();bs(n,t,i,s),D1(n,e,i)}}function i2(t,e,n){var i=Ro(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(v1(t))C1(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ts(a,o)){var l=e.interleaved;l===null?(s.next=s,Fx(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=e1(t,e,s,i),n!==null&&(s=ni(),bs(n,t,i,s),D1(n,e,i))}}function v1(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function C1(t,e){Dd=Hm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function D1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bx(t,n)}}var Nm={readContext:rs,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},s2={readContext:rs,useCallback:function(t,e){return $s().memoizedState=[t,e===void 0?null:e],t},useContext:rs,useEffect:HT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jf(4194308,4,p1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jf(4194308,4,t,e)},useInsertionEffect:function(t,e){return jf(4,2,t,e)},useMemo:function(t,e){var n=$s();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=$s();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=n2.bind(null,Ot,t),[i.memoizedState,t]},useRef:function(t){var e=$s();return t={current:t},e.memoizedState=t},useState:FT,useDebugValue:qx,useDeferredValue:function(t){return $s().memoizedState=t},useTransition:function(){var t=FT(!1),e=t[0];return t=t2.bind(null,t[1]),$s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ot,s=$s();if(It){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),fn===null)throw Error(Q(349));el&30||r1(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,HT(a1.bind(null,i,r,t),[t]),i.flags|=2048,Jd(9,o1.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=$s(),e=fn.identifierPrefix;if(It){var n=Ir,i=Tr;n=(i&~(1<<32-Ss(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=e2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r2={readContext:rs,useCallback:m1,useContext:rs,useEffect:jx,useImperativeHandle:f1,useInsertionEffect:d1,useLayoutEffect:h1,useMemo:g1,useReducer:rv,useRef:u1,useState:function(){return rv(Xd)},useDebugValue:qx,useDeferredValue:function(t){var e=os();return _1(e,Xt.memoizedState,t)},useTransition:function(){var t=rv(Xd)[0],e=os().memoizedState;return[t,e]},useMutableSource:i1,useSyncExternalStore:s1,useId:y1,unstable_isNewReconciler:!1},o2={readContext:rs,useCallback:m1,useContext:rs,useEffect:jx,useImperativeHandle:f1,useInsertionEffect:d1,useLayoutEffect:h1,useMemo:g1,useReducer:ov,useRef:u1,useState:function(){return ov(Xd)},useDebugValue:qx,useDeferredValue:function(t){var e=os();return Xt===null?e.memoizedState=t:_1(e,Xt.memoizedState,t)},useTransition:function(){var t=ov(Xd)[0],e=os().memoizedState;return[t,e]},useMutableSource:i1,useSyncExternalStore:s1,useId:y1,unstable_isNewReconciler:!1};function vs(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sD(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zg={isMounted:function(t){return(t=t._reactInternals)?pl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ni(),s=Ro(t),r=Ar(i,s);r.payload=e,n!=null&&(r.callback=n),e=Ao(t,r,s),e!==null&&(bs(e,t,s,i),Uf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ni(),s=Ro(t),r=Ar(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ao(t,r,s),e!==null&&(bs(e,t,s,i),Uf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ni(),i=Ro(t),s=Ar(n,i);s.tag=2,e!=null&&(s.callback=e),e=Ao(t,s,i),e!==null&&(bs(e,t,i,n),Uf(e,t,i))}};function NT(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Ud(n,i)||!Ud(s,r):!0}function x1(t,e,n){var i=!1,s=Wo,r=e.contextType;return typeof r=="object"&&r!==null?r=rs(r):(s=_i(e)?Xa:jn.current,i=e.contextTypes,r=(i=i!=null)?$c(t,s):Wo),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zg,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function zT(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Zg.enqueueReplaceState(e,e.state,null)}function rD(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hx(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=rs(r):(r=_i(e)?Xa:jn.current,s.context=$c(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(sD(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Zg.enqueueReplaceState(s,s.state,null),$m(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zc(t,e){try{var n="",i=e;do n+=MG(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function av(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oD(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var a2=typeof WeakMap=="function"?WeakMap:Map;function w1(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wm||(Wm=!0,gD=i),oD(t,e)},n}function S1(t,e,n){n=Ar(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){oD(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){oD(t,e),typeof i!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function WT(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new a2;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=D2.bind(null,t,e,n),e.then(t,t))}function GT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function UT(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,Ao(n,e,1))),n.lanes|=1),t)}var l2=Qr.ReactCurrentOwner,pi=!1;function Jn(t,e,n,i){e.child=t===null?JM(e,null,n,i):Hc(e,t.child,n,i)}function KT(t,e,n,i,s){n=n.render;var r=e.ref;return Ec(e,s),i=Ux(t,e,n,i,r,s),n=Kx(),t!==null&&!pi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nr(t,e,s)):(It&&n&&Px(e),e.flags|=1,Jn(t,e,i,s),e.child)}function jT(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!nw(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,b1(t,e,r,i,s)):(t=Qf(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ud,n(o,i)&&t.ref===e.ref)return Nr(t,e,s)}return e.flags|=1,t=Oo(r,i),t.ref=e.ref,t.return=e,e.child=t}function b1(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Ud(r,i)&&t.ref===e.ref)if(pi=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(pi=!0);else return e.lanes=t.lanes,Nr(t,e,s)}return aD(t,e,n,i,s)}function E1(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(mc,Ti),Ti|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ct(mc,Ti),Ti|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,Ct(mc,Ti),Ti|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,Ct(mc,Ti),Ti|=i;return Jn(t,e,s,n),e.child}function T1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function aD(t,e,n,i,s){var r=_i(n)?Xa:jn.current;return r=$c(e,r),Ec(e,s),n=Ux(t,e,n,i,r,s),i=Kx(),t!==null&&!pi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nr(t,e,s)):(It&&i&&Px(e),e.flags|=1,Jn(t,e,n,s),e.child)}function qT(t,e,n,i,s){if(_i(n)){var r=!0;Pm(e)}else r=!1;if(Ec(e,s),e.stateNode===null)qf(t,e),x1(e,n,i),rD(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=rs(c):(c=_i(n)?Xa:jn.current,c=$c(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&zT(e,o,i,c),co=!1;var p=e.memoizedState;o.state=p,$m(e,i,o,s),l=e.memoizedState,a!==i||p!==l||gi.current||co?(typeof u=="function"&&(sD(e,n,u,i),l=e.memoizedState),(a=co||NT(e,n,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,t1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vs(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=rs(l):(l=_i(n)?Xa:jn.current,l=$c(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&zT(e,o,i,l),co=!1,p=e.memoizedState,o.state=p,$m(e,i,o,s);var g=e.memoizedState;a!==d||p!==g||gi.current||co?(typeof f=="function"&&(sD(e,n,f,i),g=e.memoizedState),(c=co||NT(e,n,c,i,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return lD(t,e,n,i,r,s)}function lD(t,e,n,i,s,r){T1(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&PT(e,n,!1),Nr(t,e,r);i=e.stateNode,l2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Hc(e,t.child,null,r),e.child=Hc(e,null,a,r)):Jn(t,e,a,r),e.memoizedState=i.state,s&&PT(e,n,!0),e.child}function I1(t){var e=t.stateNode;e.pendingContext?OT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&OT(t,e.context,!1),Nx(t,e.containerInfo)}function YT(t,e,n,i,s){return Fc(),Vx(s),e.flags|=256,Jn(t,e,n,i),e.child}var cD={dehydrated:null,treeContext:null,retryLane:0};function uD(t){return{baseLanes:t,cachePool:null,transitions:null}}function A1(t,e,n){var i=e.pendingProps,s=Rt.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ct(Rt,s&1),t===null)return nD(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Jg(o,i,0,null),t=za(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=uD(n),e.memoizedState=cD,t):Yx(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return c2(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Oo(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Oo(a,r):(r=za(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?uD(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=cD,i}return r=t.child,t=r.sibling,i=Oo(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Yx(t,e){return e=Jg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zp(t,e,n,i){return i!==null&&Vx(i),Hc(e,t.child,null,n),t=Yx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function c2(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=av(Error(Q(422))),Zp(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Jg({mode:"visible",children:i.children},s,0,null),r=za(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Hc(e,t.child,null,o),e.child.memoizedState=uD(o),e.memoizedState=cD,r);if(!(e.mode&1))return Zp(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(Q(419)),i=av(r,i,void 0),Zp(t,e,o,i)}if(a=(o&t.childLanes)!==0,pi||a){if(i=fn,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Hr(t,s),bs(i,t,s,-1))}return tw(),i=av(Error(Q(421))),Zp(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=x2.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,Ii=Io(s.nextSibling),Pi=e,It=!0,xs=null,t!==null&&(qi[Yi++]=Tr,qi[Yi++]=Ir,qi[Yi++]=Ja,Tr=t.id,Ir=t.overflow,Ja=e),e=Yx(e,i.children),e.flags|=4096,e)}function ZT(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),iD(t.return,e,n)}function lv(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function k1(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Jn(t,e,i.children,n),i=Rt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ZT(t,n,e);else if(t.tag===19)ZT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ct(Rt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Fm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lv(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Fm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lv(e,!0,n,null,r);break;case"together":lv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Oo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function u2(t,e,n){switch(e.tag){case 3:I1(e),Fc();break;case 5:n1(e);break;case 1:_i(e.type)&&Pm(e);break;case 4:Nx(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ct(Bm,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ct(Rt,Rt.current&1),e.flags|=128,null):n&e.child.childLanes?A1(t,e,n):(Ct(Rt,Rt.current&1),t=Nr(t,e,n),t!==null?t.sibling:null);Ct(Rt,Rt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return k1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ct(Rt,Rt.current),i)break;return null;case 22:case 23:return e.lanes=0,E1(t,e,n)}return Nr(t,e,n)}var R1,dD,O1,P1;R1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dD=function(){};O1=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Pa(qs.current);var r=null;switch(n){case"input":s=PC(t,s),i=PC(t,i),r=[];break;case"select":s=Pt({},s,{value:void 0}),i=Pt({},i,{value:void 0}),r=[];break;case"textarea":s=BC(t,s),i=BC(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Rm)}$C(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($d.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($d.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&wt("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};P1=function(t,e,n,i){n!==i&&(e.flags|=4)};function Fu(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Mn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function d2(t,e,n){var i=e.pendingProps;switch(Mx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(e),null;case 1:return _i(e.type)&&Om(),Mn(e),null;case 3:return i=e.stateNode,Nc(),St(gi),St(jn),Wx(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(qp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(vD(xs),xs=null))),dD(t,e),Mn(e),null;case 5:zx(e);var s=Pa(Zd.current);if(n=e.type,t!==null&&e.stateNode!=null)O1(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return Mn(e),null}if(t=Pa(qs.current),qp(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[zs]=e,i[qd]=r,t=(e.mode&1)!==0,n){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(s=0;s<ld.length;s++)wt(ld[s],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":rT(i,r),wt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},wt("invalid",i);break;case"textarea":aT(i,r),wt("invalid",i)}$C(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&jp(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&jp(i.textContent,a,t),s=["children",""+a]):$d.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&wt("scroll",i)}switch(n){case"input":Fp(i),oT(i,r,!0);break;case"textarea":Fp(i),lT(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Rm)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aM(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[zs]=e,t[qd]=i,R1(t,e,!1,!1),e.stateNode=t;e:{switch(o=FC(n,i),n){case"dialog":wt("cancel",t),wt("close",t),s=i;break;case"iframe":case"object":case"embed":wt("load",t),s=i;break;case"video":case"audio":for(s=0;s<ld.length;s++)wt(ld[s],t);s=i;break;case"source":wt("error",t),s=i;break;case"img":case"image":case"link":wt("error",t),wt("load",t),s=i;break;case"details":wt("toggle",t),s=i;break;case"input":rT(t,i),s=PC(t,i),wt("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Pt({},i,{value:void 0}),wt("invalid",t);break;case"textarea":aT(t,i),s=BC(t,i),wt("invalid",t);break;default:s=i}$C(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?uM(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lM(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fd(t,l):typeof l=="number"&&Fd(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&($d.hasOwnProperty(r)?l!=null&&r==="onScroll"&&wt("scroll",t):l!=null&&vx(t,r,l,o))}switch(n){case"input":Fp(t),oT(t,i,!1);break;case"textarea":Fp(t),lT(t);break;case"option":i.value!=null&&t.setAttribute("value",""+zo(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?xc(t,!!i.multiple,r,!1):i.defaultValue!=null&&xc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Rm)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mn(e),null;case 6:if(t&&e.stateNode!=null)P1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Pa(Zd.current),Pa(qs.current),qp(e)){if(i=e.stateNode,n=e.memoizedProps,i[zs]=e,(r=i.nodeValue!==n)&&(t=Pi,t!==null))switch(t.tag){case 3:jp(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jp(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[zs]=e,e.stateNode=i}return Mn(e),null;case 13:if(St(Rt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(It&&Ii!==null&&e.mode&1&&!(e.flags&128))QM(),Fc(),e.flags|=98560,r=!1;else if(r=qp(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(Q(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Q(317));r[zs]=e}else Fc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mn(e),r=!1}else xs!==null&&(vD(xs),xs=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Rt.current&1?en===0&&(en=3):tw())),e.updateQueue!==null&&(e.flags|=4),Mn(e),null);case 4:return Nc(),dD(t,e),t===null&&Kd(e.stateNode.containerInfo),Mn(e),null;case 10:return $x(e.type._context),Mn(e),null;case 17:return _i(e.type)&&Om(),Mn(e),null;case 19:if(St(Rt),r=e.memoizedState,r===null)return Mn(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)Fu(r,!1);else{if(en!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fm(t),o!==null){for(e.flags|=128,Fu(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ct(Rt,Rt.current&1|2),e.child}t=t.sibling}r.tail!==null&&Ut()>Wc&&(e.flags|=128,i=!0,Fu(r,!1),e.lanes=4194304)}else{if(!i)if(t=Fm(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!It)return Mn(e),null}else 2*Ut()-r.renderingStartTime>Wc&&n!==1073741824&&(e.flags|=128,i=!0,Fu(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ut(),e.sibling=null,n=Rt.current,Ct(Rt,i?n&1|2:n&1),e):(Mn(e),null);case 22:case 23:return ew(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ti&1073741824&&(Mn(e),e.subtreeFlags&6&&(e.flags|=8192)):Mn(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function h2(t,e){switch(Mx(e),e.tag){case 1:return _i(e.type)&&Om(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nc(),St(gi),St(jn),Wx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zx(e),null;case 13:if(St(Rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Fc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(Rt),null;case 4:return Nc(),null;case 10:return $x(e.type._context),null;case 22:case 23:return ew(),null;case 24:return null;default:return null}}var Qp=!1,Hn=!1,p2=typeof WeakSet=="function"?WeakSet:Set,oe=null;function fc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){$t(t,e,i)}else n.current=null}function hD(t,e,n){try{n()}catch(i){$t(t,e,i)}}var QT=!1;function f2(t,e){if(YC=Im,t=$M(),Ox(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===n&&++c===s&&(a=o),p===r&&++u===i&&(l=o),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ZC={focusedElem:t,selectionRange:n},Im=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,C=e.stateNode,x=C.getSnapshotBeforeUpdate(e.elementType===e.type?y:vs(e.type,y),v);C.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(O){$t(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return g=QT,QT=!1,g}function xd(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&hD(e,n,r)}s=s.next}while(s!==i)}}function Qg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function pD(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function M1(t){var e=t.alternate;e!==null&&(t.alternate=null,M1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zs],delete e[qd],delete e[JC],delete e[Z4],delete e[Q4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V1(t){return t.tag===5||t.tag===3||t.tag===4}function XT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fD(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rm));else if(i!==4&&(t=t.child,t!==null))for(fD(t,e,n),t=t.sibling;t!==null;)fD(t,e,n),t=t.sibling}function mD(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(mD(t,e,n),t=t.sibling;t!==null;)mD(t,e,n),t=t.sibling}var Dn=null,Cs=!1;function ro(t,e,n){for(n=n.child;n!==null;)B1(t,e,n),n=n.sibling}function B1(t,e,n){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(Wg,n)}catch{}switch(n.tag){case 5:Hn||fc(n,e);case 6:var i=Dn,s=Cs;Dn=null,ro(t,e,n),Dn=i,Cs=s,Dn!==null&&(Cs?(t=Dn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dn.removeChild(n.stateNode));break;case 18:Dn!==null&&(Cs?(t=Dn,n=n.stateNode,t.nodeType===8?tv(t.parentNode,n):t.nodeType===1&&tv(t,n),Wd(t)):tv(Dn,n.stateNode));break;case 4:i=Dn,s=Cs,Dn=n.stateNode.containerInfo,Cs=!0,ro(t,e,n),Dn=i,Cs=s;break;case 0:case 11:case 14:case 15:if(!Hn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&hD(n,e,o),s=s.next}while(s!==i)}ro(t,e,n);break;case 1:if(!Hn&&(fc(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){$t(n,e,a)}ro(t,e,n);break;case 21:ro(t,e,n);break;case 22:n.mode&1?(Hn=(i=Hn)||n.memoizedState!==null,ro(t,e,n),Hn=i):ro(t,e,n);break;default:ro(t,e,n)}}function JT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new p2),e.forEach(function(i){var s=w2.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function fs(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dn=a.stateNode,Cs=!1;break e;case 3:Dn=a.stateNode.containerInfo,Cs=!0;break e;case 4:Dn=a.stateNode.containerInfo,Cs=!0;break e}a=a.return}if(Dn===null)throw Error(Q(160));B1(r,o,s),Dn=null,Cs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){$t(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)L1(e,t),e=e.sibling}function L1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fs(e,t),Ps(t),i&4){try{xd(3,t,t.return),Qg(3,t)}catch(y){$t(t,t.return,y)}try{xd(5,t,t.return)}catch(y){$t(t,t.return,y)}}break;case 1:fs(e,t),Ps(t),i&512&&n!==null&&fc(n,n.return);break;case 5:if(fs(e,t),Ps(t),i&512&&n!==null&&fc(n,n.return),t.flags&32){var s=t.stateNode;try{Fd(s,"")}catch(y){$t(t,t.return,y)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&rM(s,r),FC(a,o);var c=FC(a,r);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?uM(s,d):u==="dangerouslySetInnerHTML"?lM(s,d):u==="children"?Fd(s,d):vx(s,u,d,c)}switch(a){case"input":MC(s,r);break;case"textarea":oM(s,r);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?xc(s,!!r.multiple,f,!1):p!==!!r.multiple&&(r.defaultValue!=null?xc(s,!!r.multiple,r.defaultValue,!0):xc(s,!!r.multiple,r.multiple?[]:"",!1))}s[qd]=r}catch(y){$t(t,t.return,y)}}break;case 6:if(fs(e,t),Ps(t),i&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(y){$t(t,t.return,y)}}break;case 3:if(fs(e,t),Ps(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Wd(e.containerInfo)}catch(y){$t(t,t.return,y)}break;case 4:fs(e,t),Ps(t);break;case 13:fs(e,t),Ps(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Xx=Ut())),i&4&&JT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Hn=(c=Hn)||u,fs(e,t),Hn=c):fs(e,t),Ps(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(oe=t,u=t.child;u!==null;){for(d=oe=u;oe!==null;){switch(p=oe,f=p.child,p.tag){case 0:case 11:case 14:case 15:xd(4,p,p.return);break;case 1:fc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){$t(i,n,y)}}break;case 5:fc(p,p.return);break;case 22:if(p.memoizedState!==null){tI(d);continue}}f!==null?(f.return=p,oe=f):tI(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cM("display",o))}catch(y){$t(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){$t(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fs(e,t),Ps(t),i&4&&JT(t);break;case 21:break;default:fs(e,t),Ps(t)}}function Ps(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(V1(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Fd(s,""),i.flags&=-33);var r=XT(t);mD(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=XT(t);fD(t,a,o);break;default:throw Error(Q(161))}}catch(l){$t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function m2(t,e,n){oe=t,$1(t)}function $1(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var s=oe,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Qp;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Hn;a=Qp;var c=Hn;if(Qp=o,(Hn=l)&&!c)for(oe=s;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?nI(s):l!==null?(l.return=o,oe=l):nI(s);for(;r!==null;)oe=r,$1(r),r=r.sibling;oe=s,Qp=a,Hn=c}eI(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,oe=r):eI(t)}}function eI(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||Qg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Hn)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:vs(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&$T(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$T(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Wd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Hn||e.flags&512&&pD(e)}catch(p){$t(e,e.return,p)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function tI(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function nI(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qg(4,e)}catch(l){$t(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){$t(e,s,l)}}var r=e.return;try{pD(e)}catch(l){$t(e,r,l)}break;case 5:var o=e.return;try{pD(e)}catch(l){$t(e,o,l)}}}catch(l){$t(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var g2=Math.ceil,zm=Qr.ReactCurrentDispatcher,Zx=Qr.ReactCurrentOwner,ns=Qr.ReactCurrentBatchConfig,Ke=0,fn=null,Zt=null,En=0,Ti=0,mc=Qo(0),en=0,eh=null,tl=0,Xg=0,Qx=0,wd=null,di=null,Xx=0,Wc=1/0,Cr=null,Wm=!1,gD=null,ko=null,Xp=!1,yo=null,Gm=0,Sd=0,_D=null,Yf=-1,Zf=0;function ni(){return Ke&6?Ut():Yf!==-1?Yf:Yf=Ut()}function Ro(t){return t.mode&1?Ke&2&&En!==0?En&-En:J4.transition!==null?(Zf===0&&(Zf=xM()),Zf):(t=dt,t!==0||(t=window.event,t=t===void 0?16:AM(t.type)),t):1}function bs(t,e,n,i){if(50<Sd)throw Sd=0,_D=null,Error(Q(185));Vh(t,n,i),(!(Ke&2)||t!==fn)&&(t===fn&&(!(Ke&2)&&(Xg|=n),en===4&&po(t,En)),yi(t,i),n===1&&Ke===0&&!(e.mode&1)&&(Wc=Ut()+500,qg&&Xo()))}function yi(t,e){var n=t.callbackNode;JG(t,e);var i=Tm(t,t===fn?En:0);if(i===0)n!==null&&dT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&dT(n),e===1)t.tag===0?X4(iI.bind(null,t)):qM(iI.bind(null,t)),q4(function(){!(Ke&6)&&Xo()}),n=null;else{switch(wM(i)){case 1:n=Sx;break;case 4:n=CM;break;case 16:n=Em;break;case 536870912:n=DM;break;default:n=Em}n=K1(n,F1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F1(t,e){if(Yf=-1,Zf=0,Ke&6)throw Error(Q(327));var n=t.callbackNode;if(Tc()&&t.callbackNode!==n)return null;var i=Tm(t,t===fn?En:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Um(t,i);else{e=i;var s=Ke;Ke|=2;var r=N1();(fn!==t||En!==e)&&(Cr=null,Wc=Ut()+500,Na(t,e));do try{v2();break}catch(a){H1(t,a)}while(!0);Lx(),zm.current=r,Ke=s,Zt!==null?e=0:(fn=null,En=0,e=en)}if(e!==0){if(e===2&&(s=GC(t),s!==0&&(i=s,e=yD(t,s))),e===1)throw n=eh,Na(t,0),po(t,i),yi(t,Ut()),n;if(e===6)po(t,i);else{if(s=t.current.alternate,!(i&30)&&!_2(s)&&(e=Um(t,i),e===2&&(r=GC(t),r!==0&&(i=r,e=yD(t,r))),e===1))throw n=eh,Na(t,0),po(t,i),yi(t,Ut()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:Sa(t,di,Cr);break;case 3:if(po(t,i),(i&130023424)===i&&(e=Xx+500-Ut(),10<e)){if(Tm(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){ni(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=XC(Sa.bind(null,t,di,Cr),e);break}Sa(t,di,Cr);break;case 4:if(po(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Ss(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Ut()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*g2(i/1960))-i,10<i){t.timeoutHandle=XC(Sa.bind(null,t,di,Cr),i);break}Sa(t,di,Cr);break;case 5:Sa(t,di,Cr);break;default:throw Error(Q(329))}}}return yi(t,Ut()),t.callbackNode===n?F1.bind(null,t):null}function yD(t,e){var n=wd;return t.current.memoizedState.isDehydrated&&(Na(t,e).flags|=256),t=Um(t,e),t!==2&&(e=di,di=n,e!==null&&vD(e)),t}function vD(t){di===null?di=t:di.push.apply(di,t)}function _2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Ts(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function po(t,e){for(e&=~Qx,e&=~Xg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ss(e),i=1<<n;t[n]=-1,e&=~i}}function iI(t){if(Ke&6)throw Error(Q(327));Tc();var e=Tm(t,0);if(!(e&1))return yi(t,Ut()),null;var n=Um(t,e);if(t.tag!==0&&n===2){var i=GC(t);i!==0&&(e=i,n=yD(t,i))}if(n===1)throw n=eh,Na(t,0),po(t,e),yi(t,Ut()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sa(t,di,Cr),yi(t,Ut()),null}function Jx(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(Wc=Ut()+500,qg&&Xo())}}function nl(t){yo!==null&&yo.tag===0&&!(Ke&6)&&Tc();var e=Ke;Ke|=1;var n=ns.transition,i=dt;try{if(ns.transition=null,dt=1,t)return t()}finally{dt=i,ns.transition=n,Ke=e,!(Ke&6)&&Xo()}}function ew(){Ti=mc.current,St(mc)}function Na(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,j4(n)),Zt!==null)for(n=Zt.return;n!==null;){var i=n;switch(Mx(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Om();break;case 3:Nc(),St(gi),St(jn),Wx();break;case 5:zx(i);break;case 4:Nc();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:$x(i.type._context);break;case 22:case 23:ew()}n=n.return}if(fn=t,Zt=t=Oo(t.current,null),En=Ti=e,en=0,eh=null,Qx=Xg=tl=0,di=wd=null,Oa!==null){for(e=0;e<Oa.length;e++)if(n=Oa[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}Oa=null}return t}function H1(t,e){do{var n=Zt;try{if(Lx(),Kf.current=Nm,Hm){for(var i=Ot.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Hm=!1}if(el=0,dn=Xt=Ot=null,Dd=!1,Qd=0,Zx.current=null,n===null||n.return===null){en=1,eh=e,Zt=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=En,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=GT(o);if(f!==null){f.flags&=-257,UT(f,o,a,r,e),f.mode&1&&WT(r,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){WT(r,c,e),tw();break e}l=Error(Q(426))}}else if(It&&a.mode&1){var v=GT(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),UT(v,o,a,r,e),Vx(zc(l,a));break e}}r=l=zc(l,a),en!==4&&(en=2),wd===null?wd=[r]:wd.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var C=w1(r,l,e);LT(r,C);break e;case 1:a=l;var x=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ko===null||!ko.has(S)))){r.flags|=65536,e&=-e,r.lanes|=e;var O=S1(r,a,e);LT(r,O);break e}}r=r.return}while(r!==null)}W1(n)}catch(H){e=H,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function N1(){var t=zm.current;return zm.current=Nm,t===null?Nm:t}function tw(){(en===0||en===3||en===2)&&(en=4),fn===null||!(tl&268435455)&&!(Xg&268435455)||po(fn,En)}function Um(t,e){var n=Ke;Ke|=2;var i=N1();(fn!==t||En!==e)&&(Cr=null,Na(t,e));do try{y2();break}catch(s){H1(t,s)}while(!0);if(Lx(),Ke=n,zm.current=i,Zt!==null)throw Error(Q(261));return fn=null,En=0,en}function y2(){for(;Zt!==null;)z1(Zt)}function v2(){for(;Zt!==null&&!GG();)z1(Zt)}function z1(t){var e=U1(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,e===null?W1(t):Zt=e,Zx.current=null}function W1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=h2(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{en=6,Zt=null;return}}else if(n=d2(n,e,Ti),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);en===0&&(en=5)}function Sa(t,e,n){var i=dt,s=ns.transition;try{ns.transition=null,dt=1,C2(t,e,n,i)}finally{ns.transition=s,dt=i}return null}function C2(t,e,n,i){do Tc();while(yo!==null);if(Ke&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(e4(t,r),t===fn&&(Zt=fn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xp||(Xp=!0,K1(Em,function(){return Tc(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=ns.transition,ns.transition=null;var o=dt;dt=1;var a=Ke;Ke|=4,Zx.current=null,f2(t,n),L1(n,t),H4(ZC),Im=!!YC,ZC=YC=null,t.current=n,m2(n),UG(),Ke=a,dt=o,ns.transition=r}else t.current=n;if(Xp&&(Xp=!1,yo=t,Gm=s),r=t.pendingLanes,r===0&&(ko=null),qG(n.stateNode),yi(t,Ut()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Wm)throw Wm=!1,t=gD,gD=null,t;return Gm&1&&t.tag!==0&&Tc(),r=t.pendingLanes,r&1?t===_D?Sd++:(Sd=0,_D=t):Sd=0,Xo(),null}function Tc(){if(yo!==null){var t=wM(Gm),e=ns.transition,n=dt;try{if(ns.transition=null,dt=16>t?16:t,yo===null)var i=!1;else{if(t=yo,yo=null,Gm=0,Ke&6)throw Error(Q(331));var s=Ke;for(Ke|=4,oe=t.current;oe!==null;){var r=oe,o=r.child;if(oe.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var u=oe;switch(u.tag){case 0:case 11:case 15:xd(8,u,r)}var d=u.child;if(d!==null)d.return=u,oe=d;else for(;oe!==null;){u=oe;var p=u.sibling,f=u.return;if(M1(u),u===c){oe=null;break}if(p!==null){p.return=f,oe=p;break}oe=f}}}var g=r.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}oe=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,oe=o;else e:for(;oe!==null;){if(r=oe,r.flags&2048)switch(r.tag){case 0:case 11:case 15:xd(9,r,r.return)}var C=r.sibling;if(C!==null){C.return=r.return,oe=C;break e}oe=r.return}}var x=t.current;for(oe=x;oe!==null;){o=oe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,oe=S;else e:for(o=x;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qg(9,a)}}catch(H){$t(a,a.return,H)}if(a===o){oe=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,oe=O;break e}oe=a.return}}if(Ke=s,Xo(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(Wg,t)}catch{}i=!0}return i}finally{dt=n,ns.transition=e}}return!1}function sI(t,e,n){e=zc(n,e),e=w1(t,e,1),t=Ao(t,e,1),e=ni(),t!==null&&(Vh(t,1,e),yi(t,e))}function $t(t,e,n){if(t.tag===3)sI(t,t,n);else for(;e!==null;){if(e.tag===3){sI(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ko===null||!ko.has(i))){t=zc(n,t),t=S1(e,t,1),e=Ao(e,t,1),t=ni(),e!==null&&(Vh(e,1,t),yi(e,t));break}}e=e.return}}function D2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ni(),t.pingedLanes|=t.suspendedLanes&n,fn===t&&(En&n)===n&&(en===4||en===3&&(En&130023424)===En&&500>Ut()-Xx?Na(t,0):Qx|=n),yi(t,e)}function G1(t,e){e===0&&(t.mode&1?(e=zp,zp<<=1,!(zp&130023424)&&(zp=4194304)):e=1);var n=ni();t=Hr(t,e),t!==null&&(Vh(t,e,n),yi(t,n))}function x2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G1(t,n)}function w2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),G1(t,n)}var U1;U1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gi.current)pi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pi=!1,u2(t,e,n);pi=!!(t.flags&131072)}else pi=!1,It&&e.flags&1048576&&YM(e,Vm,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;qf(t,e),t=e.pendingProps;var s=$c(e,jn.current);Ec(e,n),s=Ux(null,e,i,t,s,n);var r=Kx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(i)?(r=!0,Pm(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hx(e),s.updater=Zg,e.stateNode=s,s._reactInternals=e,rD(e,i,t,n),e=lD(null,e,i,!0,r,n)):(e.tag=0,It&&r&&Px(e),Jn(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(qf(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=b2(i),t=vs(i,t),s){case 0:e=aD(null,e,i,t,n);break e;case 1:e=qT(null,e,i,t,n);break e;case 11:e=KT(null,e,i,t,n);break e;case 14:e=jT(null,e,i,vs(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vs(i,s),aD(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vs(i,s),qT(t,e,i,s,n);case 3:e:{if(I1(e),t===null)throw Error(Q(387));i=e.pendingProps,r=e.memoizedState,s=r.element,t1(t,e),$m(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=zc(Error(Q(423)),e),e=YT(t,e,i,n,s);break e}else if(i!==s){s=zc(Error(Q(424)),e),e=YT(t,e,i,n,s);break e}else for(Ii=Io(e.stateNode.containerInfo.firstChild),Pi=e,It=!0,xs=null,n=JM(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fc(),i===s){e=Nr(t,e,n);break e}Jn(t,e,i,n)}e=e.child}return e;case 5:return n1(e),t===null&&nD(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,QC(i,s)?o=null:r!==null&&QC(i,r)&&(e.flags|=32),T1(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&nD(e),null;case 13:return A1(t,e,n);case 4:return Nx(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Hc(e,null,i,n):Jn(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vs(i,s),KT(t,e,i,s,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,Ct(Bm,i._currentValue),i._currentValue=o,r!==null)if(Ts(r.value,o)){if(r.children===s.children&&!gi.current){e=Nr(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Ar(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),iD(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iD(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Jn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Ec(e,n),s=rs(s),i=i(s),e.flags|=1,Jn(t,e,i,n),e.child;case 14:return i=e.type,s=vs(i,e.pendingProps),s=vs(i.type,s),jT(t,e,i,s,n);case 15:return b1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:vs(i,s),qf(t,e),e.tag=1,_i(i)?(t=!0,Pm(e)):t=!1,Ec(e,n),x1(e,i,s),rD(e,i,s,n),lD(null,e,i,!0,t,n);case 19:return k1(t,e,n);case 22:return E1(t,e,n)}throw Error(Q(156,e.tag))};function K1(t,e){return vM(t,e)}function S2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(t,e,n,i){return new S2(t,e,n,i)}function nw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b2(t){if(typeof t=="function")return nw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dx)return 11;if(t===xx)return 14}return 2}function Oo(t,e){var n=t.alternate;return n===null?(n=es(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qf(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")nw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case rc:return za(n.children,s,r,e);case Cx:o=8,s|=8;break;case AC:return t=es(12,n,e,s|2),t.elementType=AC,t.lanes=r,t;case kC:return t=es(13,n,e,s),t.elementType=kC,t.lanes=r,t;case RC:return t=es(19,n,e,s),t.elementType=RC,t.lanes=r,t;case nM:return Jg(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eM:o=10;break e;case tM:o=9;break e;case Dx:o=11;break e;case xx:o=14;break e;case lo:o=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=es(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function za(t,e,n,i){return t=es(7,t,i,e),t.lanes=n,t}function Jg(t,e,n,i){return t=es(22,t,i,e),t.elementType=nM,t.lanes=n,t.stateNode={isHidden:!1},t}function cv(t,e,n){return t=es(6,t,null,e),t.lanes=n,t}function uv(t,e,n){return e=es(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function E2(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gy(0),this.expirationTimes=Gy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gy(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function iw(t,e,n,i,s,r,o,a,l){return t=new E2(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=es(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hx(r),t}function T2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function j1(t){if(!t)return Wo;t=t._reactInternals;e:{if(pl(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(_i(n))return jM(t,n,e)}return e}function q1(t,e,n,i,s,r,o,a,l){return t=iw(n,i,!0,t,s,r,o,a,l),t.context=j1(null),n=t.current,i=ni(),s=Ro(n),r=Ar(i,s),r.callback=e??null,Ao(n,r,s),t.current.lanes=s,Vh(t,s,i),yi(t,i),t}function e_(t,e,n,i){var s=e.current,r=ni(),o=Ro(s);return n=j1(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ao(s,e,o),t!==null&&(bs(t,s,o,r),Uf(t,s,o)),o}function Km(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sw(t,e){rI(t,e),(t=t.alternate)&&rI(t,e)}function I2(){return null}var Y1=typeof reportError=="function"?reportError:function(t){console.error(t)};function rw(t){this._internalRoot=t}t_.prototype.render=rw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));e_(t,e,null,null)};t_.prototype.unmount=rw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nl(function(){e_(null,t,null,null)}),e[Fr]=null}};function t_(t){this._internalRoot=t}t_.prototype.unstable_scheduleHydration=function(t){if(t){var e=EM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ho.length&&e!==0&&e<ho[n].priority;n++);ho.splice(n,0,t),n===0&&IM(t)}};function ow(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function n_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oI(){}function A2(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Km(o);r.call(c)}}var o=q1(e,i,t,0,null,!1,!1,"",oI);return t._reactRootContainer=o,t[Fr]=o.current,Kd(t.nodeType===8?t.parentNode:t),nl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Km(l);a.call(c)}}var l=iw(t,0,!1,null,null,!1,!1,"",oI);return t._reactRootContainer=l,t[Fr]=l.current,Kd(t.nodeType===8?t.parentNode:t),nl(function(){e_(e,l,n,i)}),l}function i_(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Km(o);a.call(l)}}e_(e,o,t,s)}else o=A2(n,e,t,s,i);return Km(o)}SM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ad(e.pendingLanes);n!==0&&(bx(e,n|1),yi(e,Ut()),!(Ke&6)&&(Wc=Ut()+500,Xo()))}break;case 13:nl(function(){var i=Hr(t,1);if(i!==null){var s=ni();bs(i,t,1,s)}}),sw(t,1)}};Ex=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var n=ni();bs(e,t,134217728,n)}sw(t,134217728)}};bM=function(t){if(t.tag===13){var e=Ro(t),n=Hr(t,e);if(n!==null){var i=ni();bs(n,t,e,i)}sw(t,e)}};EM=function(){return dt};TM=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};NC=function(t,e,n){switch(e){case"input":if(MC(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=jg(i);if(!s)throw Error(Q(90));sM(i),MC(i,s)}}}break;case"textarea":oM(t,n);break;case"select":e=n.value,e!=null&&xc(t,!!n.multiple,e,!1)}};pM=Jx;fM=nl;var k2={usingClientEntryPoint:!1,Events:[Lh,cc,jg,dM,hM,Jx]},Hu={findFiberByHostInstance:Ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R2={bundleType:Hu.bundleType,version:Hu.version,rendererPackageName:Hu.rendererPackageName,rendererConfig:Hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_M(t),t===null?null:t.stateNode},findFiberByHostInstance:Hu.findFiberByHostInstance||I2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{Wg=Jp.inject(R2),js=Jp}catch{}}Hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k2;Hi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ow(e))throw Error(Q(200));return T2(t,e,null,n)};Hi.createRoot=function(t,e){if(!ow(t))throw Error(Q(299));var n=!1,i="",s=Y1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=iw(t,1,!1,null,null,n,!1,i,s),t[Fr]=e.current,Kd(t.nodeType===8?t.parentNode:t),new rw(e)};Hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=_M(e),t=t===null?null:t.stateNode,t};Hi.flushSync=function(t){return nl(t)};Hi.hydrate=function(t,e,n){if(!n_(e))throw Error(Q(200));return i_(null,t,e,!0,n)};Hi.hydrateRoot=function(t,e,n){if(!ow(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=Y1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=q1(e,null,t,1,n??null,s,!1,r,o),t[Fr]=e.current,Kd(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new t_(e)};Hi.render=function(t,e,n){if(!n_(e))throw Error(Q(200));return i_(null,t,e,!1,n)};Hi.unmountComponentAtNode=function(t){if(!n_(t))throw Error(Q(40));return t._reactRootContainer?(nl(function(){i_(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};Hi.unstable_batchedUpdates=Jx;Hi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!n_(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return i_(t,e,n,!1,i)};Hi.version="18.3.1-next-f1338f8080-20240426";function Z1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z1)}catch(t){console.error(t)}}Z1(),ZP.exports=Hi;var aw=ZP.exports,Q1,aI=aw;Q1=aI.createRoot,aI.hydrateRoot;function L(){return L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},L.apply(null,arguments)}const O2={"[object Array]":"array","[object Date]":"date","[object Object]":"object","[object String]":"string"},as=function(t){if(t===null)return"null";const e=Object.prototype.toString.call(t);return typeof t=="object"?O2[e]||"object":typeof t},CD=function(t){return typeof t=="boolean"},lI=function(t){return ut(t)&&t.toString().indexOf("e")!==-1},er=function(t){return as(t)==="date"},M=function(t){return t!=null},ie=function(t){return typeof t=="function"},ve=function(t){return typeof t=="string"},ut=function(t){return typeof t=="number"&&isFinite(t)||!isNaN(t-parseFloat(t))},ue=function(t){return as(t)==="object"},ti=function(t){let e;for(e in t)return!1;return!0},Ce=function(t){if(!t||as(t)!=="object")return!1;const e=Object.getPrototypeOf(t);if(!e)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&Object.toString.call(n)===Object.toString.call(Object)},P2=function(t){return["object","array","function"].indexOf(as(t))===-1},bt=function(t){return t!=null&&t===t.window},Is=function(t){return!!t&&!!(t.jquery||t.dxRenderer)},fl=function(t){return!!t&&ie(t.then)},Fh=function(t){return!!t&&ie(t.done)&&ie(t.fail)},M2=function(t){return!!(t&&t.preventDefault)},V2=function(t,e,n){t=t||{};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];(!(i in t)||n)&&(t[i]=s)}return t},T=function(t){t=t||{};let e=1,n=!1;for(typeof t=="boolean"&&(n=t,t=arguments[1]||{},e++);e<arguments.length;e++){const i=arguments[e];if(i!=null)for(const s in i){const r=t[s],o=i[s];let a=!1,l;s==="__proto__"||s==="constructor"||t===o||(n&&o&&(Ce(o)||(a=Array.isArray(o)))?(a?l=r&&Array.isArray(r)?r:[]:l=r&&Ce(r)?r:{},t[s]=T(n,l,o)):o!==void 0&&(t[s]=o))}}return t},Yn=(t,e)=>{if(Array.isArray(t))return t.map(e);const n=[];for(const i in t)n.push(e(t[i],i));return n},N=(t,e)=>{if(t){if("length"in t)for(let n=0;n<t.length&&e.call(t[n],n,t[n])!==!1;n++);else for(const n in t)if(e.call(t[n],n,t[n])===!1)break;return t}},B2=function(){},ef=function(t){return typeof console>"u"||!ie(console[t])?B2:console[t].bind(console)},lw={log:ef("log"),info:ef("info"),warn:ef("warn"),error:ef("error")},L2=function(){const t=[new RegExp("&","g"),new RegExp('"',"g"),new RegExp("'","g"),new RegExp("<","g"),new RegExp(">","g")];return function(e){return String(e).replace(t[0],"&amp;").replace(t[1],"&quot;").replace(t[2],"&#39;").replace(t[3],"&lt;").replace(t[4],"&gt;")}}(),$2=function(t){switch(typeof t){case"string":return t.split(/\s+/,4);case"object":return[t.x||t.h||t.left,t.y||t.v||t.top,t.x||t.h||t.right,t.y||t.v||t.bottom];case"number":return[t];default:return t}},F2=function(t){const e=$2(t);let n=parseInt(e&&e[0],10),i=parseInt(e&&e[1],10),s=parseInt(e&&e[2],10),r=parseInt(e&&e[3],10);return isFinite(n)||(n=0),isFinite(i)||(i=n),isFinite(s)||(s=n),isFinite(r)||(r=i),{top:i,right:s,bottom:r,left:n}};function jm(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ie(t)?t(...n):(n.forEach((s,r)=>{ve(s)&&(s=s.replace(/\$/g,"$$$$"));const o=new RegExp("\\{"+r+"\\}","gm");t=t.replace(o,s)}),t)}const dv=function(){const t=/\s/g;return function(e){return!e||!e.replace(t,"")}}(),H2="24.1.5",cI="24.1.5",N2="https://js.devexpress.com/error/"+H2.split(".").slice(0,2).join("_")+"/";function cw(t,e){const n={ERROR_MESSAGES:T(e,t),Error:function(){return function(o){const a=o[0];o=o.slice(1);const l=i(a,o),c=r(a),u=s(a,l);return T(new Error(u),{__id:a,__details:l,url:c})}([].slice.call(arguments))},log:function(o){let a="log";/^E\d+$/.test(o)?a="error":/^W\d+$/.test(o)&&(a="warn"),lw[a](a==="log"?o:function(l){const c=l[0];return l=l.slice(1),s(c,i(c,l))}([].slice.call(arguments)))}};function i(o,a){return a=[n.ERROR_MESSAGES[o]].concat(a),jm.apply(this,a).replace(/\.*\s*?$/,"")}function s(o,a){const l=o!=null&&o.startsWith("W")?"warning":"error";return jm.apply(this,[`{0} - {1}.

For additional information on this {2} message, see: {3}`,o,a,l,r(o)])}function r(o){return N2+o}return n}const Te=cw({E0001:"Method is not implemented",E0002:"Member name collision: {0}",E0003:"A class must be instantiated using the 'new' keyword",E0004:"The NAME property of the component is not specified",E0005:"Unknown device",E0006:"Unknown endpoint key is requested",E0007:"'Invalidate' method is called outside the update transaction",E0008:"Type of the option name is not appropriate to create an action",E0009:"Component '{0}' has not been initialized for an element",E0010:"Animation configuration with the '{0}' type requires '{1}' configuration as {2}",E0011:"Unknown animation type '{0}'",E0012:"jQuery version is too old. Please upgrade jQuery to 1.10.0 or later",E0013:"KnockoutJS version is too old. Please upgrade KnockoutJS to 2.3.0 or later",E0014:"The 'release' method shouldn't be called for an unlocked Lock object",E0015:"Queued task returned an unexpected result",E0017:"Event namespace is not defined",E0018:"DevExpress.ui.DevExpressPopup widget is required",E0020:"Template engine '{0}' is not supported",E0021:"Unknown theme is set: {0}",E0022:"LINK[rel=DevExpress-theme] tags must go before DevExpress included scripts",E0023:"Template name is not specified",E0024:"DevExtreme bundle already included",E0025:"Unexpected argument type",E0100:"Unknown validation type is detected",E0101:"Misconfigured range validation rule is detected",E0102:"Misconfigured comparison validation rule is detected",E0103:"validationCallback of an asynchronous rule should return a jQuery or a native promise",E0110:"Unknown validation group is detected",E0120:"Adapter for a DevExpressValidator component cannot be configured",E0121:"The 'customItem' parameter of the 'onCustomItemCreating' function is empty or contains invalid data. Assign a custom object or a Promise that is resolved after the item is created.",W0000:"'{0}' is deprecated in {1}. {2}",W0001:"{0} - '{1}' option is deprecated in {2}. {3}",W0002:"{0} - '{1}' method is deprecated in {2}. {3}",W0003:"{0} - '{1}' property is deprecated in {2}. {3}",W0004:"Timeout for theme loading is over: {0}",W0005:"'{0}' event is deprecated in {1}. {2}",W0006:"Invalid recurrence rule: '{0}'",W0007:"'{0}' Globalize culture is not defined",W0008:"Invalid view name: '{0}'",W0009:"Invalid time zone name: '{0}'",W0010:"{0} is deprecated in {1}. {2}",W0011:"Number parsing is invoked while the parser is not defined",W0012:"Date parsing is invoked while the parser is not defined",W0013:"'{0}' file is deprecated in {1}. {2}",W0014:"{0} - '{1}' type is deprecated in {2}. {3}",W0015:"Instead of returning a value from the '{0}' function, write it into the '{1}' field of the function's parameter.",W0016:'The "{0}" option does not accept the "{1}" value since v{2}. {3}.',W0017:'Setting the "{0}" property with a function is deprecated since v21.2',W0018:'Setting the "position" property with a function is deprecated since v21.2',W0019:`DevExtreme: Unable to Locate a Valid License Key.

If you are using a 30-day trial version of DevExtreme, you must uninstall all copies of DevExtreme once your 30-day trial period expires. For terms and conditions that govern use of DevExtreme UI components/libraries, please refer to the DevExtreme End User License Agreement: https://js.devexpress.com/EULAs/DevExtremeComplete.

To use DevExtreme in a commercial project, you must purchase a license. For pricing/licensing options, please visit: https://js.devexpress.com/Buy.

If you have licensing-related questions or need help with a purchase, please email clientservices@devexpress.com.

`,W0020:`DevExtreme: License Key Has Expired.

A mismatch exists between the license key used and the DevExtreme version referenced in this project.

To proceed, you can:
• use a version of DevExtreme linked to your license key: https://www.devexpress.com/ClientCenter/DownloadManager
• renew your DevExpress Subscription: https://www.devexpress.com/buy/renew (once you renew your subscription, you will be entitled to product updates and support service as defined in the DevExtreme End User License Agreement)

If you have licensing-related questions or need help with a renewal, please email clientservices@devexpress.com.

`,W0021:`DevExtreme: License Key Verification Has Failed.

To verify your DevExtreme license, make certain to specify a correct key in the GlobalConfig. If you continue to encounter this error, please visit https://www.devexpress.com/ClientCenter/DownloadManager to obtain a valid license key.

If you have a valid license and this problem persists, please submit a support ticket via the DevExpress Support Center. We will be happy to follow-up: https://supportcenter.devexpress.com/ticket/create.

`,W0022:`DevExtreme: Pre-release software. Not suitable for commercial use.

Pre-release software may contain deficiencies and as such, should not be considered for use or integrated in any mission critical application.

`,W0023:`DevExtreme: the following 'devextreme' package version does not match versions of other DevExpress products used in this application:

{0}

Interoperability between different versions of the products listed herein cannot be guaranteed.

`}),z2=function(t,e,n){return function(){const i=this.callBase;this.callBase=t[e];try{return n.apply(this,arguments)}finally{this.callBase=i}}},W2=function(t){const e=function(){};return e.prototype=t.prototype,new e},G2=function(t){const e=this;let n,i,s;if(!t)return e;for(i in t)s=t[i],n=typeof e.prototype[i]=="function"&&typeof s=="function",e.prototype[i]=n?z2(e.parent.prototype,i,s):s;return e},U2=function(){const t=this;let e,n,i;const s=Object.prototype.hasOwnProperty.bind(t);for(!s("_includedCtors")&&!s("_includedPostCtors")&&(t._includedCtors=t._includedCtors.slice(0),t._includedPostCtors=t._includedPostCtors.slice(0)),i=0;i<arguments.length;i++){e=arguments[i],e.ctor&&t._includedCtors.push(e.ctor),e.postCtor&&t._includedPostCtors.push(e.postCtor);for(n in e)n==="ctor"||n==="postCtor"||n==="default"||(t.prototype[n]=e[n])}return t},K2=function(t){if(!Object.prototype.hasOwnProperty.bind(this)("parent")&&this.parent){const i=Object.getPrototypeOf(this);return i===t||i.subclassOf(t)}else return this.parent===t?!0:!this.parent||!this.parent.subclassOf?!1:this.parent.subclassOf(t)},X1=function(){throw Te.Error("E0001")},j2=function(){const t=Object.prototype.hasOwnProperty;return function(e,n){for(const i in e){if(!t.call(e,i))return;n[i]=e[i]}}}(),ze=function(){};ze.inherit=function(t){const e=function(){if(!this||bt(this)||typeof this.constructor!="function")throw Te.Error("E0003");const n=this,i=n.ctor,s=n.constructor._includedCtors,r=n.constructor._includedPostCtors;let o;for(o=0;o<s.length;o++)s[o].call(n);for(i&&i.apply(n,arguments),o=0;o<r.length;o++)r[o].call(n)};return e.prototype=W2(this),j2(this,e),e.inherit=this.inherit,e.abstract=X1,e.redefine=G2,e.include=U2,e.subclassOf=K2,e.parent=this,e._includedCtors=this._includedCtors?this._includedCtors.slice(0):[],e._includedPostCtors=this._includedPostCtors?this._includedPostCtors.slice(0):[],e.prototype.constructor=e,e.redefine(t),e};ze.abstract=X1;function Rs(t){const e=ze.inherit(t);let n=e,i=new n(t);const s={},r=function(o,a){N(o,function(l){ie(i[l])?(a||!t[l])&&(t[l]=function(){return i[l].apply(t,arguments)}):(a&&(s[l]=t[l]),t[l]=i[l])})};return r(t,!0),t.inject=function(o){n=n.inherit(o),i=new n,r(o)},t.resetInjection=function(){T(t,s),n=e,i=new e},t}const uI={rtlEnabled:!1,defaultCurrency:"USD",defaultUseCurrencyAccountingStyle:!0,oDataFilterToLower:!0,serverDecimalSeparator:".",decimalSeparator:".",thousandsSeparator:",",forceIsoDateParsing:!0,wrapActionsBeforeExecute:!0,useLegacyStoreResult:!1,useJQuery:void 0,editorStylingMode:void 0,useLegacyVisibleIndex:!1,floatingActionButtonConfig:{icon:"add",closeIcon:"close",label:"",position:{at:"right bottom",my:"right bottom",offset:{x:-16,y:-16}},maxSpeedDialActionCount:5,shading:!1,direction:"auto"},optionsParser:t=>{t.trim().charAt(0)!=="{"&&(t="{"+t+"}");try{return JSON.parse(t)}catch(e){try{return JSON.parse(q2(t))}catch{throw Te.Error("E3018",e,t)}}}},q2=t=>t.replace(/'/g,'"').replace(/,\s*([\]}])/g,"$1").replace(/([{,])\s*([^":\s]+)\s*:/g,'$1"$2":'),Y2=["decimalSeparator","thousandsSeparator"],Me=function(){if(!arguments.length)return uI;const t=arguments.length<=0?void 0:arguments[0];Y2.forEach(e=>{if(t[e]){const n=`Now, the ${e} is selected based on the specified locale.`;Te.log("W0003","config",e,"19.2",n)}}),T(uI,t)};typeof DevExpress<"u"&&DevExpress.config&&Me(DevExpress.config);const Et=ze.inherit({ctor:function(t){t&&(t=String(t)),this._value=this._normalize(t||this._generate())},_normalize:function(t){for(t=t.replace(/[^a-f0-9]/gi,"").toLowerCase();t.length<32;)t+="0";return[t.substr(0,8),t.substr(8,4),t.substr(12,4),t.substr(16,4),t.substr(20,12)].join("-")},_generate:function(){let t="";for(let e=0;e<32;e++)t+=Math.round(15*Math.random()).toString(16);return t},toString:function(){return this._value},valueOf:function(){return this._value},toJSON:function(){return this._value}}),Xr=function(t){this._options=t||{},this._list=[],this._queue=[],this._firing=!1,this._fired=!1,this._firingIndexes=[]};Xr.prototype._fireCore=function(t,e){const n=this._firingIndexes,i=this._list,s=this._options.stopOnFalse,r=n.length;for(n[r]=0;n[r]<i.length&&!(i[n[r]].apply(t,e)===!1&&s);n[r]++);n.pop()};Xr.prototype.add=function(t){return typeof t=="function"&&(!this._options.unique||!this.has(t))&&this._list.push(t),this};Xr.prototype.remove=function(t){const e=this._list,n=this._firingIndexes,i=e.indexOf(t);if(i>-1&&(e.splice(i,1),this._firing&&n.length))for(let s=0;s<n.length;s++)i<=n[s]&&n[s]--;return this};Xr.prototype.has=function(t){const e=this._list;return t?e.indexOf(t)>-1:!!e.length};Xr.prototype.empty=function(t){return this._list=[],this};Xr.prototype.fireWith=function(t,e){const n=this._queue;if(e=e||[],e=e.slice?e.slice():e,this._options.syncStrategy)this._firing=!0,this._fireCore(t,e);else{if(n.push([t,e]),this._firing)return;for(this._firing=!0;n.length;){const i=n.shift();this._fireCore(i[0],i[1])}}return this._firing=!1,this._fired=!0,this};Xr.prototype.fire=function(){this.fireWith(this,arguments)};Xr.prototype.fired=function(){return this._fired};const at=function(t){return new Xr(t)},J1=[{method:"resolve",handler:"done",state:"resolved"},{method:"reject",handler:"fail",state:"rejected"},{method:"notify",handler:"progress"}];let Gc=function(){const t=this;this._state="pending",this._promise={},J1.forEach((function(e){const n=e.method;this[n+"Callbacks"]=at(),this[n]=(function(){return this[n+"With"](this._promise,arguments)}).bind(this),this._promise[e.handler]=function(i){if(!i)return this;const s=t[n+"Callbacks"];return s.fired()?i.apply(t[n+"Context"],t[n+"Args"]):s.add((function(r,o){i.apply(r,o)}).bind(this)),this}}).bind(this)),this._promise.always=function(e){return this.done(e).fail(e)},this._promise.catch=function(e){return this.then(null,e)},this._promise.then=function(e,n){const i=new Gc;return["done","fail"].forEach((function(s){const r=s==="done"?e:n;this[s](function(){if(!r){i[s==="done"?"resolve":"reject"].apply(this,arguments);return}const o=r&&r.apply(this,arguments);Fh(o)?o.done(i.resolve).fail(i.reject):fl(o)?o.then(i.resolve,i.reject):i.resolve.apply(this,M(o)?[o]:arguments)})}).bind(this)),i.promise()},this._promise.state=function(){return t._state},this._promise.promise=function(e){return e?T(e,t._promise):t._promise},this._promise.promise(this)};J1.forEach(function(t){const e=t.method,n=t.state;Gc.prototype[e+"With"]=function(i,s){const r=this[e+"Callbacks"];return this.state()==="pending"&&(this[e+"Args"]=s,this[e+"Context"]=i,n&&(this._state=n),r.fire(i,s),n!=="pending"&&(this.resolveCallbacks.empty(),this.rejectCallbacks.empty())),this}});function vi(t,e){if(Fh(t))return t;if(fl(t)){const n=new Gc;return t.then(function(){n.resolveWith.apply(n,[e].concat([[].slice.call(arguments)]))},function(){n.rejectWith.apply(n,[e].concat([[].slice.call(arguments)]))}),n}return new Gc().resolveWith(e,[t])}let Z2=function(){if(arguments.length===1)return vi(arguments[0]);const t=[].slice.call(arguments),e=[];let n=0;const i=new Gc,s=function(r){return function(o){e[r]=this,t[r]=arguments.length>1?[].slice.call(arguments):o,n++,n===t.length&&i.resolveWith(e,t)}};for(let r=0;r<t.length;r++)Fh(t[r])?t[r].promise().done(s(r)).fail(i.reject):n++;return n===t.length&&i.resolveWith(e,t),i.promise()};function j(){return new Gc}function Ne(){return Z2.apply(this,arguments)}const Xi=Rs({isWrapped:function(){return!1},isWritableWrapped:function(){return!1},wrap:function(t){return t},unwrap:function(t){return t},assign:function(){lw.error("Method 'assign' should not be used for not wrapped variables. Use 'isWrapped' method for ensuring.")}}),Q2=function(t,e){const n=[];let i,s;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(i);for(n.sort(function(r,o){const a=ut(r),l=ut(o);return a&&l?r-o:a&&!l?-1:!a&&l?1:r<o?-1:r>o?1:0}),s=0;s<n.length;s++)i=n[s],e(i,t[i])},X2=function(t,e,n,i){!i&&Xi.isWrapped(t[e])?Xi.assign(t[e],n):t[e]=n},Jo=function(t,e,n,i){let s,r;for(const o in e)if(s=t[o],r=e[o],!(o==="__proto__"||o==="constructor"||t===r)){if(Ce(r)){const a=n?ue(s):Ce(s);r=Jo(a?s:{},r,n,i)}r!==void 0&&s!==r&&X2(t,o,r,i)}return t},J2=Xi.unwrap,eV=Xi.isWrapped,eU=Xi.assign,tU=function(t){return t.replace(/\[/g,".").replace(/\]/g,"")},ml=function(t){return tU(t).split(".")},nU=function(t,e,n){return n=n||{},th(e==="this"?t:t[e],n)},tV=function(t,e,n,i){if(e==="this")throw new Te.Error("E4016");const s=t[e];i.unwrapObservables&&eV(s)?eU(s,n):t[e]=n},nV=function(t){return t=t||{},t.unwrapObservables=t.unwrapObservables!==void 0?t.unwrapObservables:!0,t};function th(t,e){return e.unwrapObservables?J2(t):t}const lt=function(t){if(arguments.length>1&&(t=[].slice.call(arguments)),!t||t==="this")return function(e){return e};if(typeof t=="string"){const e=ml(t);return function(n,i){i=nV(i);const s=i.functionsAsIs,r="defaultValue"in i;let o=th(n,i);for(let a=0;a<e.length;a++){if(!o){if(o==null&&r)return i.defaultValue;break}const l=e[a];if(r&&ue(o)&&!(l in o))return i.defaultValue;let c=th(o[l],i);!s&&ie(c)&&(c=c.call(o)),o=c}return o}}if(Array.isArray(t))return iU(t);if(ie(t))return t};function iU(t){const e={};for(let n=0,i=t.length;n<i;n++){const s=t[n];e[s]=lt(s)}return function(n,i){let s;return N(e,function(r){const o=this(n,i);if(o===void 0)return;let a=s||(s={});const l=r.split("."),c=l.length-1;for(let u=0;u<c;u++){const d=l[u];d in a||(a[d]={}),a=a[d]}a[l[c]]=o}),s}}const dI=function(t,e,n,i){if(M(n))return n;const s={};return tV(t,e,s,i),s},uw=function(t){t=ml(t||"this");const e=t.length-1;return function(n,i,s){s=nV(s);let r=th(n,s);t.forEach(function(o,a){let l=nU(r,o,s);const c=!s.functionsAsIs&&ie(l)&&!eV(l);a===e?s.merge&&Ce(i)&&(!M(l)||Ce(l))?(l=dI(r,o,l,s),Jo(l,i,!1,!0)):c?r[o](i):tV(r,o,i,s):(l=dI(r,o,l,s),c&&(l=l.call(r)),r=l)})}},zr=function(t,e){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t instanceof Date)return t.getTime();if(t&&t instanceof ze&&t.valueOf)return t.valueOf();if(!((i==null||(n=i.collatorOptions)===null||n===void 0?void 0:n.sensitivity)==="case"||e)&&typeof t=="string"){var r;if((i==null||(r=i.collatorOptions)===null||r===void 0?void 0:r.sensitivity)==="base"){const o=/[\u0300-\u036f]/g;t=t.normalize("NFD").replace(o,"")}return i!=null&&i.locale?t.toLocaleLowerCase(i.locale):t.toLowerCase()}return t},rt=function(t,e){return M(t)?t:e},iV=function(t,e){const n=new j,i=e||this,s={promise:n.promise(),abort:function(){clearTimeout(r),n.rejectWith(i)}},r=(arguments[2]||setTimeout)(function(){const o=t.call(i);o&&o.done&&ie(o.done)?o.done(function(){n.resolveWith(i)}):n.resolveWith(i)},typeof e=="number"?e:0);return s},hv=[],hI=[],Nu=[];let Vl;const s_=function(t,e,n){if(Vl&&Vl!==t)return hv.push(e),hI.push(t),n=n||new j,Nu.push(n),n;{const i=Vl,s=Nu.length;Vl=t;let r=e();return r||(Nu.length>s?r=Ne.apply(this,Nu.slice(s)):n&&n.resolve()),Vl=i,n&&r&&r.done&&r.done(n.resolve).fail(n.reject),!Vl&&hv.length&&(hI.shift()==="render"?Wr:r_)(hv.shift(),Nu.shift()),r||Ne()}},Wr=function(t,e){return s_("render",t,e)},r_=function(t,e){return s_("update",t,e)},Ic=function(t){return function(){const e=this;return s_("render",function(){return t.call(e)})}},pI=function(t){return function(){const e=this;return s_("update",function(){return t.call(e)})}},sV=function(t,e,n){const i=[];let s=0;return N(e,(r,o)=>{let a=0;const l=n?n(o):o;N(t,(c,u)=>{const d=l[c];if(d!==void 0){if(sU(d,u)){a++;return}return a=-1,!1}}),!(a<s)&&(a>s&&(i.length=0,s=a),i.push(o))}),i},sU=function(t,e){if(Array.isArray(t)&&Array.isArray(e)){let n=!1;return N(t,(i,s)=>{if(s!==e[i])return n=!0,!1}),!n}return t===e},cu=function(t){switch(as(t)){case"string":return t.split(/\s+/,2);case"object":return[t.x??t.h,t.y??t.v];case"number":return[t];case"array":return t;default:return null}},fI=function(t){let e=ve(t)?t:t.toString();const n=e.match(/[^a-zA-Z0-9_]/g);return n&&N(n,(i,s)=>{e=e.replace(s,"__"+s.charCodeAt()+"__")}),e},dw=function(t,e){const n=cu(t);let i=e?parseFloat(n&&n[0]):parseInt(n&&n[0],10),s=e?parseFloat(n&&n[1]):parseInt(n&&n[1],10);return isFinite(i)||(i=0),isFinite(s)||(s=i),{h:i,v:s}},nh=function(t){if(t instanceof Et)return t.toString();if(ue(t)||Array.isArray(t))try{const e=JSON.stringify(t);return e==="{}"?t:e}catch{return t}return t},Po=function(t){return t.replace(/[[\]{}\-()*+?.\\^$|\s]/g,"\\$&")},rU=function(t){const e=Me().serverDecimalSeparator;return M(t)&&(t=t.toString().replace(".",e)),t},B=function(){},Ci=function(t,e,n){const i=[];let s;const r=!n;for(let o=0;o<t.length;o++)s=!!e(t[o],o),s===r&&i.push(t[o]);return i},oU=(t,e,n,i)=>t.length!==e.length?!1:!t.some((s,r)=>!hw(s,e[r],n+1,L({},i,{strict:!0}))),aU=(t,e,n,i)=>{const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;const o=new Set(r);return!s.some(a=>!o.has(a)||!hw(t[a],e[a],n+1,i))},mI={maxDepth:3,strict:!0},hw=(t,e,n,i)=>{const{strict:s,maxDepth:r}=i,o=zr(t,!0),a=zr(e,!0),l=s?o===a:o==a;switch(!0){case l:case n>=r:return!0;case(ue(o)&&ue(a)):return aU(o,a,n,i);case(Array.isArray(o)&&Array.isArray(a)):return oU(o,a,n,i);default:return!1}},Bi=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mI;const i=L({},mI,n);return hw(t,e,0,i)},pv="dx-";let tf=null;function gI(t){try{return new CSSStyleSheet}catch{const n=t.ownerDocument.createElement("style");return t.appendChild(n),n.sheet}}function _I(t,e,n){for(let i=0;i<e.length;i++){const s=e[i];try{for(let r=0;r<s.cssRules.length;r++)lU(t,s.cssRules[r],n)}catch{}}}function lU(t,e,n){var i,s,r,o;(n||((i=e.selectorText)===null||i===void 0?void 0:i.includes(pv))||((s=e.cssRules)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.selectorText)===null||s===void 0?void 0:s.includes(pv))||((r=e.name)===null||r===void 0?void 0:r.startsWith(pv))||((o=e.style)===null||o===void 0?void 0:o.fontFamily)==="DXIcons")&&t.insertRule(e.cssText,t.cssRules.length)}function cU(t){var e;const n=t.get(0),i=(e=n.getRootNode)===null||e===void 0?void 0:e.call(n);if(!(i!=null&&i.host))return;tf||(tf=gI(i),_I(tf,n.ownerDocument.styleSheets,!1));const s=gI(i);_I(s,i.styleSheets,!0),i.adoptedStyleSheets=[tf,s]}function uU(t,e,n){const i=t.getBoundingClientRect();return i&&e>=i.left&&e<i.right&&n>=i.top&&n<i.bottom}function dU(){let t=0;const e=[];return{push(n){return e.push(n),this},shift(){return t++,e[t-1]},get length(){return e.length-t},get items(){return e}}}function hU(t,e,n){const i=dU().push(n);for(;i.length;){const r=i.shift();for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes[o];a.nodeType===Node.ELEMENT_NODE&&uU(a,t,e)&&getComputedStyle(a).pointerEvents!=="none"&&i.push(a)}}const s=i.items.reverse();return s.pop(),s}const pU={querySelectorAll:(t,e)=>t.querySelectorAll(e),elementMatches(t,e){return(t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||(i=>{const s=t.document||t.ownerDocument;if(!s)return!1;const r=this.querySelectorAll(s,i);for(let o=0;o<r.length;o++)if(r[o]===t)return!0})).call(t,e)},createElement(t,e){return e=e||this._document,e.createElement(t)},createElementNS(t,e,n){return n=n||this._document,n.createElementNS(t,e)},createTextNode(t,e){return e=e||this._document,e.createTextNode(t)},createAttribute(t,e){return e=e||this._document,e.createAttribute(t)},isNode:t=>t&&typeof t=="object"&&"nodeType"in t&&"nodeName"in t,isElementNode:t=>t&&t.nodeType===1,isTextNode:t=>t&&t.nodeType===3,isDocument:t=>t&&t.nodeType===9,isDocumentFragment:t=>t&&t.nodeType===11,removeElement(t){const e=t&&t.parentNode;e&&e.removeChild(t)},insertElement(t,e,n){t&&e&&t!==e&&(n?t.insertBefore(e,n):t.appendChild(e))},getAttribute:(t,e)=>t.getAttribute(e),setAttribute(t,e,n){e==="style"?t.style.cssText=n:t.setAttribute(e,n)},removeAttribute(t,e){t.removeAttribute(e)},setProperty(t,e,n){t[e]=n},setText(t,e){t&&(t.textContent=e)},setClass(t,e,n){t.nodeType===1&&e&&(n?t.classList.add(e):t.classList.remove(e))},setStyle(t,e,n){t.style[e]=n||""},_document:typeof document>"u"?void 0:document,getDocument(){return this._document},getActiveElement(t){return this.getRootNode(t).activeElement},getRootNode(t){var e;return(t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t))??this._document},getBody(){return this._document.body},createDocumentFragment(){return this._document.createDocumentFragment()},getDocumentElement(){return this._document.documentElement},getLocation(){return this._document.location},getSelection(){return this._document.selection},getReadyState(){return this._document.readyState},getHead(){return this._document.head},hasDocumentProperty(t){return t in this._document},listen(t,e,n,i){return!t||!("addEventListener"in t)?B:(t.addEventListener(e,n,i),()=>{t.removeEventListener(e,n)})},elementsFromPoint(t,e,n){const i=this.getRootNode(n);return i.host?hU(t,e,i):i.elementsFromPoint(t,e)}},W=Rs(pU);class pw{constructor(){this.memory=[],this.callbacks=at()}add(e){N(this.memory,(n,i)=>e.apply(e,i)),this.callbacks.add(e)}remove(e){this.callbacks.remove(e)}fire(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];this.memory.push(n),this.callbacks.fire.apply(this.callbacks,n)}}const fw=new pw,mw=t=>{var e,n;const i=t.originalEvent;if(!i)return t.target;if(!!!(!((e=i.target)===null||e===void 0)&&e.shadowRoot))return i.target;const r=i.path??((n=i.composedPath)===null||n===void 0?void 0:n.call(i));return(r==null?void 0:r[0])??t.target};let fU=typeof window<"u";const ae=()=>fU;let Ma=ae()?window:void 0;Ma||(Ma={},Ma.window=Ma);const pe=()=>Ma,rV=t=>ae()&&t in Ma,gw=t=>t<768?"xs":t<992?"sm":t<1200?"md":"lg",oV=t=>{const e=t||gw,n=W.getDocumentElement().clientWidth;return e(n)},Hh=()=>ae()?Ma.navigator:{userAgent:""},mU=["pageX","pageY","screenX","screenY","clientX","clientY"],gU=function(t,e){if(e[t]&&!e.touches||!e.touches)return e[t];const n=e.touches.length?e.touches:e.changedTouches;if(n.length)return n[0][t]};function _U(t){mU.forEach(function(e){t(e,function(n){return gU(e,n)})},this)}const Jr=function(t){let e,n=function(){return e=t.apply(this,arguments),n=function(){return e},e};return function(){return n.apply(this,arguments)}},_w=pe(),nf="dxEmptyEventType",yI={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},yU={focusin:"focus",focusout:"blur"},vU=["blur","focus","load"],aV=["touchmove","wheel","mousewheel","touchstart"],CU=["target","relatedTarget","delegateTarget","altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","offsetX","offsetY","pointerId","pointerType","targetTouches","toElement","touches"];function DU(t,e){return!bt(t)&&t.nodeName!=="#document"&&W.elementMatches(t,e)}const fv=new WeakMap;let lV=0,qm;const fo=function(){const t={};return fw.add(function(e,n){t[e]=n}),{getField:function(e,n){return t[e]&&t[e][n]},callMethod:function(e,n,i,s){return t[e]&&t[e][n]&&t[e][n].apply(i,s)}}}(),b=Rs({on:zu(DD(DI(function(t,e,n,i,s){Zl(t,e).addHandler(s,n,i)}))),one:zu(DD(function(t,e,n,i,s){const r=function(){b.off(t,e,n,r),s.apply(this,arguments)};b.on(t,e,n,i,r)})),off:zu(SU(DI(function(t,e,n,i){Zl(t,e).removeHandler(i,n)}))),trigger:zu(CI(function(t,e,n){const i=e.type,s=Zl(t,e.type);if(fo.callMethod(i,"trigger",t,[e,n]),s.callHandlers(e,n),!(fo.getField(i,"noBubble")||e.isPropagationStopped()||vU.indexOf(i)!==-1)){const o=[],a=function(c){const u=c.parentNode??(ue(c.host)?c.host:null);u&&(o.push(u),a(u))};a(t),o.push(_w);let l=0;for(;o[l]&&!e.isPropagationStopped();)Zl(o[l],e.type).callHandlers(T(e,{currentTarget:o[l]}),n),l++}(t.nodeType||bt(t))&&(fo.callMethod(i,"_default",t,[e,n]),EU(i,t))})),triggerHandler:zu(CI(function(t,e,n){Zl(t,e.type).callHandlers(e,n)}))});function yw(t,e){const n=t[0];if(n)if(W.isNode(n)||bt(n))e.apply(b,t);else if(!ve(n)&&"length"in n){const i=Array.prototype.slice.call(t,0);Array.prototype.forEach.call(n,function(s){i[0]=s,yw(i,e)})}else throw Te.Error("E0025")}function zu(t){return function(){yw(arguments,t)}}function xU(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){return t=!0,!0}});_w.addEventListener("test",null,e)}catch{}return t}const cV=Jr(xU),uV=(t,e)=>bt(t)?uV(t.document,e):t.contains?t.contains(e):!!(e.compareDocumentPosition(t)&e.DOCUMENT_POSITION_CONTAINS);function Zl(t,e){let n=fv.get(t);e=e||"";const i=e.split("."),s=i.slice(1),r=!!i[0];e=i[0]||nf,n||(n={},fv.set(t,n)),n[e]||(n[e]={handleObjects:[],nativeHandler:null});const o=n[e];return{addHandler:function(a,l,c){const u=function(y,v){const C=[y],x=y.currentTarget,S=y.relatedTarget;let O,H;e in yI&&(O=S&&x&&(S===x||uV(x,S))),v!==void 0&&C.push(v),fo.callMethod(e,"handle",t,[y,c]),O||(H=a.apply(x,C)),H===!1&&(y.preventDefault(),y.stopPropagation())},d={handler:a,wrappedHandler:function(y,v){if(!(qm&&y.type===qm))if(y.data=c,y.delegateTarget=t,l){let x=y.target;for(;x&&x!==t;)DU(x,l)&&(y.currentTarget=x,u(y,v)),x=x.parentNode}else{var C;if(y.currentTarget=y.delegateTarget||y.target,!!(!((C=y.target)===null||C===void 0)&&C.shadowRoot)){const S=mw(y);y.target=S}u(y,v)}},selector:l,type:e,data:c,namespace:s.join("."),namespaces:s,guid:++lV};o.handleObjects.push(d);let f=o.handleObjects.length===1&&r,g;f&&(f=!fo.callMethod(e,"setup",t,[c,s,a])),f&&(o.nativeHandler=wU(e),cV()&&aV.indexOf(e)>-1&&(g={passive:!1}),o.removeListener=W.listen(t,yI[e]||e,o.nativeHandler,g)),fo.callMethod(e,"add",t,[d])},removeHandler:function(a,l){const c=function(d){const p=n[d];if(!p.handleObjects.length){delete n[d];return}let f;p.handleObjects=p.handleObjects.filter(function(v){const C=s.length&&!vI(v.namespaces,s)||a&&v.handler!==a||l&&v.selector!==l;return C||(f=v.handler,fo.callMethod(d,"remove",t,[v])),C}),!p.handleObjects.length&&d!==nf&&(fo.callMethod(d,"teardown",t,[s,f]),p.nativeHandler&&p.removeListener(),delete n[d])};if(r)c(e);else for(const d in n)c(d);Object.keys(n).length===0&&fv.delete(t)},callHandlers:function(a,l){let c=!1;const u=function(d){c||(!s.length||vI(d.namespaces,s))&&(d.wrappedHandler(a,l),c=a.isImmediatePropagationStopped())};o.handleObjects.forEach(u),s.length&&n[nf]&&n[nf].handleObjects.forEach(u)}}}function wU(t){return function(e,n){const i=Zl(this,t);e=b.Event(e),i.callHandlers(e,n)}}function vI(t,e){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])<0)return!1;return!0}function DD(t){return function(e,n,i,s,r){r||(r=s,s=void 0),typeof i!="string"&&(s=i,i=void 0),!r&&typeof n=="string"&&(r=s||i,i=void 0,s=void 0),t(e,n,i,s,r)}}function SU(t){return function(e,n,i,s){typeof i=="function"&&(s=i,i=void 0),t(e,n,i,s)}}function CI(t){return function(e,n,i){typeof n=="string"&&(n={type:n}),n.target||(n.target=e),n.currentTarget=e,n.delegateTarget||(n.delegateTarget=e),!n.type&&n.originalEvent&&(n.type=n.originalEvent.type),t(e,n instanceof b.Event?n:b.Event(n),i)}}function bU(t){return b.Event=function(e,n){if(!(this instanceof b.Event))return new b.Event(e,n);e||(e={}),typeof e=="string"&&(e={type:e}),n||(n={}),t.call(this,e,n)},Object.assign(b.Event.prototype,{_propagationStopped:!1,_immediatePropagationStopped:!1,_defaultPrevented:!1,isPropagationStopped:function(){return!!(this._propagationStopped||this.originalEvent&&this.originalEvent.propagationStopped)},stopPropagation:function(){this._propagationStopped=!0,this.originalEvent&&this.originalEvent.stopPropagation()},isImmediatePropagationStopped:function(){return this._immediatePropagationStopped},stopImmediatePropagation:function(){this.stopPropagation(),this._immediatePropagationStopped=!0,this.originalEvent&&this.originalEvent.stopImmediatePropagation()},isDefaultPrevented:function(){return!!(this._defaultPrevented||this.originalEvent&&this.originalEvent.defaultPrevented)},preventDefault:function(){this._defaultPrevented=!0,this.originalEvent&&this.originalEvent.preventDefault()}}),b.Event}function DI(t){const e=function(n,i){if(i&&i.indexOf(" ")>-1){const s=Array.prototype.slice.call(arguments,0);i.split(" ").forEach(function(r){s[1]=r,t.apply(this,s)})}else t.apply(this,arguments)};return function(n,i){if(typeof i=="object"){const s=Array.prototype.slice.call(arguments,0);for(const r in i)s[1]=r,s[s.length-1]=i[r],e.apply(this,s)}else e.apply(this,arguments)}}function EU(t,e){const n=yU[t]||t;(function(i,s){return i==="click"&&s.localName==="a"})(t,e)||ie(e[n])&&(qm=t,e[n](),qm=void 0)}function TU(t){return function(e){return e.which==null&&e.type.indexOf("key")===0}(t)?t.charCode!=null?t.charCode:t.keyCode:function(e){return!e.which&&e.button!==void 0&&/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(e.type)}(t)?{1:1,2:3,3:1,4:2}[t.button]:t.which}function dV(t){t&&(b.Event=t,b.Event.prototype=t.prototype)}dV(bU(function(t,e){var n;t instanceof b.Event||ae()&&t instanceof _w.Event||((n=t.view)===null||n===void 0?void 0:n.Event)&&t instanceof t.view.Event?(this.originalEvent=t,this.type=t.type,this.currentTarget=void 0,Object.prototype.hasOwnProperty.call(t,"isTrusted")&&(this.isTrusted=t.isTrusted),this.timeStamp=t.timeStamp||Date.now()):Object.assign(this,t),vw("which",TU,this),t.type.indexOf("touch")===0&&(delete e.pageX,delete e.pageY),Object.assign(this,e),this.guid=++lV}));function vw(t,e,n){Object.defineProperty(n||b.Event.prototype,t,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent&&e(this.originalEvent)},set:function(i){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:i})}})}CU.forEach(t=>vw(t,e=>e[t]));_U(vw);const hV=at(),pV=at();b.set=function(t){hV.fire(),b.inject(t),dV(t.Event),pV.fire()};b.subscribeGlobal=function(){yw(arguments,DD(function(){const t=arguments;b.on.apply(this,t),hV.add(function(){const e=Array.prototype.slice.call(t,0);e.splice(3,1),b.off.apply(this,e)}),pV.add(function(){b.on.apply(this,t)})}))};b.forcePassiveFalseEventNames=aV;b.passiveEventHandlersSupported=cV;const Wu=new WeakMap;let Wa;const IU=new pw;let fV=function(){};const AU=function(t){IU.fire(t),Wa=t;const e=Wa.cleanData;Wa.cleanData=function(n){return fV(n),e.call(this,n)}};AU({data:function(){const t=arguments[0],e=arguments[1],n=arguments[2];if(!t)return;let i=Wu.get(t);return i||(i={},Wu.set(t,i)),e===void 0?i:arguments.length===2?i[e]:(i[e]=n,n)},removeData:function(t,e){if(t)if(e===void 0)Wu.delete(t);else{const n=Wu.get(t);n&&delete n[e]}},cleanData:function(t){for(let e=0;e<t.length;e++)b.off(t[e]),Wu.delete(t[e])}});function st(){return Wa.data.apply(this,arguments)}function kU(t){fV=t}function o_(t,e){return Wa.removeData.call(this,t,e)}function Nh(t,e){if(!W.isElementNode(t))return;const n=t.getElementsByTagName("*");Wa.cleanData(n),e&&Wa.cleanData([t])}const mV=function(t){return t==null?"":String(t)},Cw=function(t){return mV(t).charAt(0).toUpperCase()+t.substr(1)},Dw=function(t){return mV(t).replace(/([a-z\d])([A-Z])/g,"$1 $2").split(/[\s_-]+/)},xw=function(t){return Yn(Dw(t),function(e){return e.toLowerCase()}).join("-")},Uc=function(t,e){return Yn(Dw(t),function(n,i){return n=n.toLowerCase(),(e||i>0)&&(n=Cw(n)),n}).join("")},RU=function(t){return Cw(xw(t).replace(/-/g," "))},ih=function(t){return Yn(Dw(t),function(e){return Cw(e.toLowerCase())}).join(" ")},OU=["0","1","2","3","4","5","6","7","8","9"],gV=function(t){const e=[];let n,i,s=!1,r=!1;for(n=0;n<t.length;n++)i=t.charAt(n),r=i===i.toUpperCase()&&i!=="-"&&i!==")"&&i!=="/"||i in OU,i==="_"||i==="."?(i=" ",r=!0):n===0?(i=i.toUpperCase(),r=!0):!s&&r&&e.length>0&&e.push(" "),e.push(i),s=r;return e.join("")},Ym=["","Webkit","Moz","O","Ms"],PU={"":"",Webkit:"-webkit-",Moz:"-moz-",O:"-o-",ms:"-ms-"},xD=Jr(function(){return W.createElement("dx").style}),MU=function(t,e){t=Uc(t,!0);let n;for(let i=0,s=Ym.length;i<s;i++){const r=Ym[i],o=r+t,a=Uc(o);if(n=e(a,r),n===void 0&&(n=e(o,r)),n!==void 0)break}return n||""},gl=function(t){if(t in xD())return t;const e=t;t=t.charAt(0).toUpperCase()+t.substr(1);for(let n=1;n<Ym.length;n++){const i=Ym[n].toLowerCase()+t;if(i in xD())return i}return e},Xf=function(t){return MU(t,function(e,n){if(e in xD())return PU[n]})},VU=["fillOpacity","columnCount","flexGrow","flexShrink","fontWeight","lineHeight","opacity","zIndex","zoom"],sh=function(t,e){return ut(e)&&VU.indexOf(t)===-1&&(e+="px"),e},_V=function(t,e){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0)&&[].slice.call(t.style).forEach(s=>{t.style.removeProperty(s)}),e.split(";").forEach(i=>{const s=i.split(":").map(r=>r.trim());if(s.length===2){const[r,o]=s;t.style[r]=o}})},Zm=pe(),BU=["auto","none","inherit","initial"],mv=function(t,e){let n=0;return e.forEach(function(i){n+=parseFloat(t[i])||0}),n},ww=function(t,e){const n=t==="width"?"Left":"Top",i=t==="width"?"Right":"Bottom";return{padding:mv(e,["padding"+n,"padding"+i]),border:mv(e,["border"+n+"Width","border"+i+"Width"]),margin:mv(e,["margin"+n,"margin"+i])}},yV=function(t){var e;const n=(t==null||(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||Zm;return n.getComputedStyle&&n.getComputedStyle(t)},wD=function(t,e,n,i){var s;return(e==null?void 0:e[n])||((s=t.style)===null||s===void 0?void 0:s[n])||i},Bl={content:0,padding:1,border:2,margin:3,"content-box":0,"border-box":2},xI={width:["left","right"],height:["top","bottom"]};function Gu(t,e,n,i){const s=(o,a,l)=>parseFloat(wD(o,a,l,"0"))||0,r=n==="border"?"-width":"";return s(t,i,`${n}-${xI[e][0]}${r}`)+s(t,i,`${n}-${xI[e][1]}${r}`)}const LU=function(t,e,n){const i=e==="width"?"offsetWidth":"offsetHeight",s=yV(t);let r=wD(t,s,e);(r===""||r==="auto")&&(r=t[i]),r=parseFloat(r)||0;const o=wD(t,s,"boxSizing","content-box");let l=Bl[n||o],c=Bl[o];if(l===void 0||c===void 0)throw new Error;if(c===l)return r;const u=Math.sign(l-c);let d=!1,p=!1,f=!1,g=!1;u===1&&(l+=1,c+=1);for(let y=c;y!==l;y+=u)switch(y){case Bl.content:break;case Bl.padding:d=u*Gu(t,e,"padding",s);break;case Bl.border:p=u*Gu(t,e,"border",s);break;case Bl.margin:f=u*Gu(t,e,"margin",s)}if(d||p){const y=(d===!1?u*Gu(t,e,"padding",s):d)+(p===!1?u*Gu(t,e,"border",s):p);g=u*Math.max(0,Math.floor(t[i]-r-u*y))||0}return r+f+d+p+g},$U=function(t){return bt(t)?t.innerHeight:t.offsetHeight},vV=function(t,e,n){return t.indexOf("px")>0?t=parseInt(t.replace("px","")):t.indexOf("%")>0?t=parseInt(t.replace("%",""))*$U(e)/100:isNaN(t)?t.indexOf("vh")>0?t=Zm.innerHeight/100*parseInt(t.replace("vh","")):n&&t.indexOf("em")>0&&(t=parseFloat(t.replace("em",""))*parseFloat(Zm.getComputedStyle(n).fontSize)):t=parseInt(t),t},CV=function(t,e,n){if(!t)return null;if(BU.indexOf(t)>-1)return e?null:t;if(ve(t)&&(t=vV(t,n)),ut(t))return Math.max(0,t+e);const i=e<0?" - ":" ";return"calc("+t+i+Math.abs(e)+"px)"},FU=function(t,e,n){const i=CV(t,e,n);return i!==null?i:"none"},HU=function(t,e,n){const i=CV(t,e,n);return i!==null?i:0},Ac=function(t,e){if(!t)return 0;const n=ww("height",Zm.getComputedStyle(t));return n.padding+n.border+(e?n.margin:0)},wI=function(t){if(t){const e=t.getBoundingClientRect();if(e.height)return e.height}return 0},or={getWidth:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("width",...e)},setWidth:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("width",...e)},getHeight:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("height",...e)},setHeight:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("height",...e)},getOuterWidth:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("outerWidth",...e)},setOuterWidth:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("outerWidth",...e)},getOuterHeight:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("outerHeight",...e)},setOuterHeight:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("outerHeight",...e)},getInnerWidth:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("innerWidth",...e)},setInnerWidth:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("innerWidth",...e)},getInnerHeight:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("innerHeight",...e)},setInnerHeight:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Wi("innerHeight",...e)}};function Wi(t,e,n){return arguments.length===2?SD(e,t):SD(e,t,n)}const me=t=>or.getWidth(t),Ys=(t,e)=>or.setWidth(t,e),Re=t=>or.getHeight(t),Ai=(t,e)=>or.setHeight(t,e),et=(t,e)=>or.getOuterWidth(t,e||!1),NU=(t,e)=>or.setOuterWidth(t,e),tt=(t,e)=>or.getOuterHeight(t,e||!1),Sw=(t,e)=>or.setOuterHeight(t,e),SI=t=>or.getInnerWidth(t),bI=t=>or.getInnerHeight(t),SD=function(t,e,n){const i=e.toLowerCase().indexOf("width")>=0?"Width":"Height",s=i.toLowerCase(),r=e.indexOf("outer")===0,o=e.indexOf("inner")===0,a=arguments.length===2||typeof n=="boolean";if(Is(t)){if(t.length>1&&!a){for(let l=0;l<t.length;l++)SD(t[l],e,n);return}t=t[0]}if(t){if(bt(t))return r?t["inner"+i]:W.getDocumentElement()["client"+i];if(W.isDocument(t)){const l=W.getDocumentElement(),c=W.getBody();return Math.max(c["scroll"+i],c["offset"+i],l["scroll"+i],l["offset"+i],l["client"+i])}if(a){let l="content";return r&&(l=n?"margin":"border"),o&&(l="padding"),LU(t,s,l)}if(ut(n)){const l=yV(t),c=ww(s,l),u=l.boxSizing==="border-box";n=Number(n),r?n-=u?0:c.border+c.padding:o?n+=u?c.border:-c.padding:u&&(n+=c.border+c.padding)}return n+=ut(n)?"px":"",W.setStyle(t,s,n),null}},DV=t=>bt(t)?t:t.defaultView,bD=t=>{if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),n=DV(t.ownerDocument),i=t.ownerDocument.documentElement;return{top:e.top+n.pageYOffset-i.clientTop,left:e.left+n.pageXOffset-i.clientLeft}},xV=/<([a-z][^/\0>\x20\t\r\n\f]+)/i,Ws={default:{tagsCount:0,startTags:"",endTags:""},thead:{tagsCount:1,startTags:"<table>",endTags:"</table>"},td:{tagsCount:3,startTags:"<table><tbody><tr>",endTags:"</tr></tbody></table>"},col:{tagsCount:2,startTags:"<table><colgroup>",endTags:"</colgroup></table>"},tr:{tagsCount:2,startTags:"<table><tbody>",endTags:"</tbody></table>"}};Ws.tbody=Ws.colgroup=Ws.caption=Ws.tfoot=Ws.thead;Ws.th=Ws.td;const bw=function(t){if(typeof t!="string")return null;let n=W.createDocumentFragment().appendChild(W.createElement("div"));const i=xV.exec(t),s=i&&i[1].toLowerCase(),r=Ws[s]||Ws.default;n.innerHTML=r.startTags+t+r.endTags;for(let o=0;o<r.tagsCount;o++)n=n.lastChild;return[...n.childNodes]},zU=function(t){const e=xV.exec(t);return e&&e[1]in Ws},WU=pe();let Se;const ce=function(t,e){return t?typeof t=="string"?t==="body"?(this[0]=e?e.body:W.getBody(),this.length=1,this):(e=e||W.getDocument(),t[0]==="<"?(this[0]=W.createElement(t.slice(1,-1),e),this.length=1,this):([].push.apply(this,W.querySelectorAll(e,t)),this)):W.isNode(t)||bt(t)?(this[0]=t,this.length=1,this):Array.isArray(t)?([].push.apply(this,t),this):Se(t.toArray?t.toArray():[t]):(this.length=0,this)};Se=function(t,e){return new ce(t,e)};Se.fn={dxRenderer:!0};ce.prototype=Se.fn;const uu=function(t,e){for(let n=0;n<this.length;n++){const i=Se(this[n]);i[t].apply(i,e)}return this},ED=function(t,e,n){n!=null&&n!==!1?W.setAttribute(t,e,n):W.removeAttribute(t,e)};ce.prototype.show=function(){return this.toggle(!0)};ce.prototype.hide=function(){return this.toggle(!1)};ce.prototype.toggle=function(t){return this[0]&&this.toggleClass("dx-state-invisible",!t),this};ce.prototype.attr=function(t,e){if(this.length>1&&arguments.length>1)return uu.call(this,"attr",arguments);if(!this[0])return ue(t)||e!==void 0?this:void 0;if(!this[0].getAttribute)return this.prop(t,e);if(typeof t=="string"&&arguments.length===1){const n=this[0].getAttribute(t);return n??void 0}else if(Ce(t))for(const n in t)this.attr(n,t[n]);else ED(this[0],t,e);return this};ce.prototype.removeAttr=function(t){return this[0]&&W.removeAttribute(this[0],t),this};ce.prototype.prop=function(t,e){if(!this[0])return this;if(typeof t=="string"&&arguments.length===1)return this[0][t];if(Ce(t))for(const n in t)this.prop(n,t[n]);else W.setProperty(this[0],t,e);return this};ce.prototype.addClass=function(t){return this.toggleClass(t,!0)};ce.prototype.removeClass=function(t){return this.toggleClass(t,!1)};ce.prototype.hasClass=function(t){if(!this[0]||this[0].className===void 0)return!1;const e=t.split(" ");for(let n=0;n<e.length;n++)if(this[0].classList){if(this[0].classList.contains(e[n]))return!0}else if(((ve(this[0].className)?this[0].className:W.getAttribute(this[0],"class"))||"").split(" ").indexOf(e[n])>=0)return!0;return!1};ce.prototype.toggleClass=function(t,e){if(this.length>1)return uu.call(this,"toggleClass",arguments);if(!this[0]||!t)return this;e=e===void 0?!this.hasClass(t):e;const n=t.split(" ");for(let i=0;i<n.length;i++)W.setClass(this[0],n[i],e);return this};ce.prototype.html=function(t){return arguments.length?(this.empty(),typeof t=="string"&&!zU(t)||typeof t=="number"?(this[0].innerHTML=t,this):this.append(bw(t))):this[0].innerHTML};const wV=function(t,e){if(!(!this[0]||!t)){typeof t=="string"?t=bw(t):t.nodeType?t=[t]:ut(t)&&(t=[W.createTextNode(t)]);for(let n=0;n<t.length;n++){const i=t[n];let s=this[0];s.tagName==="TABLE"&&i.tagName==="TR"&&s.tBodies&&s.tBodies.length&&(s=s.tBodies[0]),W.insertElement(s,i.nodeType?i:i[0],e)}}},EI=function(t,e){if(!(!this[0]||!this[0].style)&&!(e===null||typeof e=="number"&&isNaN(e))){t=gl(t);for(let n=0;n<this.length;n++)this[n].style[t]=sh(t,e)}};ce.prototype.css=function(t,e){if(ve(t))if(arguments.length===2)EI.call(this,t,e);else{if(!this[0])return;t=gl(t);const n=WU.getComputedStyle(this[0])[t]||this[0].style[t];return ut(n)?n.toString():n}else if(Ce(t))for(const n in t)EI.call(this,n,t[n]);return this};ce.prototype.prepend=function(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.prepend(arguments[e]);return this}return wV.apply(this,[t,this[0].firstChild]),this};ce.prototype.append=function(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.append(arguments[e]);return this}return wV.apply(this,[t]),this};ce.prototype.prependTo=function(t){if(this.length>1){for(let e=this.length-1;e>=0;e--)Se(this[e]).prependTo(t);return this}return t=Se(t),t[0]&&W.insertElement(t[0],this[0],t[0].firstChild),this};ce.prototype.appendTo=function(t){return this.length>1?uu.call(this,"appendTo",arguments):(W.insertElement(Se(t)[0],this[0]),this)};ce.prototype.insertBefore=function(t){return t&&t[0]&&W.insertElement(t[0].parentNode,this[0],t[0]),this};ce.prototype.insertAfter=function(t){return t&&t[0]&&W.insertElement(t[0].parentNode,this[0],t[0].nextSibling),this};ce.prototype.before=function(t){return this[0]&&W.insertElement(this[0].parentNode,t[0],this[0]),this};ce.prototype.after=function(t){return this[0]&&W.insertElement(this[0].parentNode,t[0],this[0].nextSibling),this};ce.prototype.wrap=function(t){if(this[0]){const e=Se(t);e.insertBefore(this),e.append(this)}return this};ce.prototype.wrapInner=function(t){const e=this.contents();return e.length?e.wrap(t):this.append(t),this};ce.prototype.replaceWith=function(t){if(t&&t[0])return t.is(this)?this:(t.insertBefore(this),this.remove(),t)};ce.prototype.remove=function(){return this.length>1?uu.call(this,"remove",arguments):(Nh(this[0],!0),W.removeElement(this[0]),this)};ce.prototype.detach=function(){return this.length>1?uu.call(this,"detach",arguments):(W.removeElement(this[0]),this)};ce.prototype.empty=function(){return this.length>1?uu.call(this,"empty",arguments):(Nh(this[0]),W.setText(this[0],""),this)};ce.prototype.clone=function(){const t=[];for(let e=0;e<this.length;e++)t.push(this[e].cloneNode(!0));return Se(t)};ce.prototype.text=function(t){if(!arguments.length){let n="";for(let i=0;i<this.length;i++)n+=this[i]&&this[i].textContent||"";return n}const e=ie(t)?t():t;return Nh(this[0],!1),W.setText(this[0],M(e)?e:""),this};ce.prototype.val=function(t){return arguments.length===1?this.prop("value",M(t)?t:""):this.prop("value")};ce.prototype.contents=function(){if(!this[0])return Se();const t=[];return t.push.apply(t,this[0].childNodes),Se(t)};ce.prototype.find=function(t){const e=Se();if(!t)return e;const n=[];let i;if(typeof t=="string")for(t=t.trim(),i=0;i<this.length;i++){const s=this[i];if(W.isElementNode(s)){const r=s.getAttribute("id");let o=r||"dx-query-children";r||ED(s,"id",o),o="[id='"+o+"'] ";const a=o+t.replace(/([^\\])(,)/g,"$1, "+o);n.push.apply(n,W.querySelectorAll(s,a)),ED(s,"id",r)}else(W.isDocument(s)||W.isDocumentFragment(s))&&n.push.apply(n,W.querySelectorAll(s,t))}else for(i=0;i<this.length;i++)t=W.isNode(t)?t:t[0],this[i]!==t&&this[i].contains(t)&&n.push(t);return e.add(n)};const TI=function(t,e){return e=e.host??e,e.nodeType?!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length):!0};ce.prototype.filter=function(t){if(!t)return Se();if(t===":visible")return this.filter(TI);if(t===":hidden")return this.filter(function(n,i){return!TI(0,i)});const e=[];for(let n=0;n<this.length;n++){const i=this[n];if(W.isElementNode(i)&&as(t)==="string")W.elementMatches(i,t)&&e.push(i);else if(W.isNode(t)||bt(t))t===i&&e.push(i);else if(ie(t))t.call(i,n,i)&&e.push(i);else for(let s=0;s<t.length;s++)t[s]===i&&e.push(i)}return Se(e)};ce.prototype.not=function(t){const e=[],n=this.filter(t).toArray();for(let i=0;i<this.length;i++)n.indexOf(this[i])===-1&&e.push(this[i]);return Se(e)};ce.prototype.is=function(t){return!!this.filter(t).length};ce.prototype.children=function(t){let e=[];for(let n=0;n<this.length;n++){const i=this[n]?this[n].childNodes:[];for(let s=0;s<i.length;s++)W.isElementNode(i[s])&&e.push(i[s])}return e=Se(e),t?e.filter(t):e};ce.prototype.siblings=function(){const t=this[0];if(!t||!t.parentNode)return Se();const e=[],n=t.parentNode.childNodes||[];for(let i=0;i<n.length;i++){const s=n[i];W.isElementNode(s)&&s!==t&&e.push(s)}return Se(e)};ce.prototype.each=function(t){for(let e=0;e<this.length&&t.call(this[e],e,this[e])!==!1;e++);};ce.prototype.index=function(t){return t?(t=Se(t),this.toArray().indexOf(t[0])):this.parent().children().index(this)};ce.prototype.get=function(t){return this[t<0?this.length+t:t]};ce.prototype.eq=function(t){return t=t<0?this.length+t:t,Se(this[t])};ce.prototype.first=function(){return this.eq(0)};ce.prototype.last=function(){return this.eq(-1)};ce.prototype.select=function(){for(let t=0;t<this.length;t+=1)this[t].select&&this[t].select();return this};ce.prototype.parent=function(t){if(!this[0])return Se();const e=Se(this[0].parentNode);return!t||e.is(t)?e:Se()};ce.prototype.parents=function(t){const e=[];let n=this.parent();for(;n&&n[0]&&!W.isDocument(n[0]);)W.isElementNode(n[0])&&(!t||n.is(t))&&e.push(n.get(0)),n=n.parent();return Se(e)};ce.prototype.closest=function(t){if(this.is(t))return this;let e=this.parent();for(;e&&e.length;){if(e.is(t))return e;e=e.parent()}return Se()};ce.prototype.next=function(t){if(!this[0])return Se();let e=Se(this[0].nextSibling);if(!arguments.length)return e;for(;e&&e.length;){if(e.is(t))return e;e=e.next()}return Se()};ce.prototype.prev=function(){return this[0]?Se(this[0].previousSibling):Se()};ce.prototype.add=function(t){const e=Se(t),n=this.toArray();for(let i=0;i<e.length;i++){const s=e[i];n.indexOf(s)===-1&&n.push(s)}return Se(n)};const Ew=[];ce.prototype.splice=function(){return Se(Ew.splice.apply(this,arguments))};ce.prototype.slice=function(){return Se(Ew.slice.apply(this,arguments))};ce.prototype.toArray=function(){return Ew.slice.call(this)};ce.prototype.offset=function(){if(this[0])return bD(this[0])};ce.prototype.offsetParent=function(){if(!this[0])return Se();let t=Se(this[0].offsetParent);for(;t[0]&&t.css("position")==="static";)t=Se(t[0].offsetParent);return t=t[0]?t:Se(W.getDocumentElement()),t};ce.prototype.position=function(){if(!this[0])return;let t;const e=parseFloat(this.css("marginTop")),n=parseFloat(this.css("marginLeft"));if(this.css("position")==="fixed")return t=this[0].getBoundingClientRect(),{top:t.top-e,left:t.left-n};t=this.offset();const i=this.offsetParent();let s={top:0,left:0};return i[0].nodeName!=="HTML"&&(s=i.offset()),s={top:s.top+parseFloat(i.css("borderTopWidth")),left:s.left+parseFloat(i.css("borderLeftWidth"))},{top:t.top-s.top-e,left:t.left-s.left-n}};[{name:"scrollLeft",offsetProp:"pageXOffset",scrollWindow:function(t,e){t.scrollTo(e,t.pageYOffset)}},{name:"scrollTop",offsetProp:"pageYOffset",scrollWindow:function(t,e){t.scrollTo(t.pageXOffset,e)}}].forEach(function(t){const e=t.name;ce.prototype[e]=function(n){if(!this[0])return;const i=DV(this[0]);return n===void 0?i?i[t.offsetProp]:this[0][e]:(i?t.scrollWindow(i,n):this[0][e]=n,this)}});ce.prototype.data=function(t,e){if(this[0])return arguments.length<2?st.call(Se,this[0],t):(st.call(Se,this[0],t,e),this)};ce.prototype.removeData=function(t){return this[0]&&o_(this[0],t),this};const SV=function(){return Se.apply(this,arguments)};Object.defineProperty(SV,"fn",{enumerable:!0,configurable:!0,get:function(){return Se.fn},set:function(t){Se.fn=t}});const GU={set:function(t){Se=t},get:function(){return SV}},m=GU.get(),bV=new pw,cs=function(t,e){const n={};"noBubble"in e&&(n.noBubble=e.noBubble),"bindType"in e&&(n.bindType=e.bindType),"delegateType"in e&&(n.delegateType=e.delegateType),N(["setup","teardown","add","remove","trigger","handle","_default","dispose"],function(i,s){e[s]&&(n[s]=function(){const r=[].slice.call(arguments);return r.unshift(this),e[s].apply(e,r)})}),fw.fire(t,n)};cs.callbacks=fw;const _l="dxremove",TD="dxRemoveEvent";kU(function(t){t=[].slice.call(t);for(let e=0;e<t.length;e++){const n=m(t[e]);n.prop(TD)&&(n[0][TD]=null,b.triggerHandler(n,"dxremove"))}});cs("dxremove",{noBubble:!0,setup:function(t){m(t).prop(TD,!0)}});const sf=new WeakMap;let UU=0;const zh=function(t,e){if(M(e)){sf.set(t,e);return}if(!sf.has(t)){const n="dxPrivateComponent"+UU++;return sf.set(t,n),n}return sf.get(t)};function EV(t,e,n){const i=st(t.get(0)),s=zh(e.constructor);i[s]=e,n&&b.one(t,_l,function(){n.call(e)}),i.dxComponents||(i.dxComponents=[]),i.dxComponents.push(s)}function TV(t,e){const n=zh(e);return st(t.get(0),n)}const re=function(t,e,n){n?e[t]=n:n=e,zh(n,t),bV.fire(t,n)},KU=function(t,e){m.fn[t]=function(n){const i=typeof n=="string";let s;if(i){const r=n,o=[].slice.call(arguments).slice(1);this.each(function(){const a=e.getInstance(this);if(!a)throw Te.Error("E0009",t);const c=a[r].apply(a,o);s===void 0&&(s=c)})}else this.each(function(){const r=e.getInstance(this);r?r.option(n):new e(this,n)}),s=this;return s}};bV.add(KU);let gv=[];const jU=Jr(()=>{const t=W.listen(W.getDocument(),"DOMContentLoaded",()=>{IV.fire(),t()})}),IV={add:t=>{const e=ae();e&&W.getReadyState()!=="loading"?t():(gv.push(t),e&&jU())},fire:()=>{gv.forEach(t=>t()),gv=[]}},ar=Rs(IV),rh=function(){let t;const e=at(),n=e.add,i=e.remove;if(!ae())return e;const s=function(){const l=pe();return{width:l.innerWidth,height:l.innerHeight}},r=function(){const l=s();if(l.width===t.width&&l.height===t.height)return;let c;l.width===t.width&&(c="height"),l.height===t.height&&(c="width"),t=l,e.fire(c)},o=Jr(function(){t=s()});let a;return e.add=function(){const l=n.apply(e,arguments);return o(),ar.add(function(){!a&&e.has()&&(a=W.listen(pe(),"resize",r))}),l},e.remove=function(){const l=i.apply(e,arguments);return!e.has()&&a&&(a(),a=void 0),l},e}();class yl{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._events={},this._owner=e,this._options=n}static create(e,n){return n?ie(n)?n(e):n:new yl(e)}hasEvent(e){const n=this._events[e];return n?n.has():!1}fireEvent(e,n){const i=this._events[e];return i&&i.fireWith(this._owner,n),this._owner}on(e,n){if(Ce(e))N(e,(i,s)=>{this.on(i,s)});else{let i=this._events[e];i||(i=at({syncStrategy:this._options.syncStrategy}),this._events[e]=i),(i.originalAdd||i.add).call(i,n)}}off(e,n){const i=this._events[e];i&&(ie(n)?i.remove(n):i.empty())}dispose(){N(this._events,(e,n)=>{n.empty()})}}const qU=pe(),YU=function(){let t;try{t=qU.sessionStorage}catch{}return t},ZU=ar.add,a_=at();let AV=m();const tr=function(){let t;return function(e){if(!arguments.length)return t;const n=m(e);AV=n;const i=!!n.length,s=tr();t=i?n:m("body"),a_.fire(i?tr():m(),s)}}();ZU(function(){tr(".dx-viewport")});function kV(){return AV}const RV=pe(),QU={iPhone:"iPhone",iPhone5:"iPhone",iPhone6:"iPhone",iPhone6plus:"iPhone",iPad:"iPad",iPadMini:"iPad Mini",androidPhone:"Android Mobile",androidTablet:"Android",msSurface:"Windows ARM Tablet PC",desktop:"desktop"},II={deviceType:"desktop",platform:"generic",version:[],phone:!1,tablet:!1,android:!1,ios:!1,generic:!0,grade:"A",mac:!1},_v={generic(t){const e=/windows phone/i.test(t)||t.match(/WPDesktop/),n=!e&&/Windows(.*)arm(.*)Tablet PC/i.test(t),i=!e&&!n&&/msapphost/i.test(t),s=/((intel|ppc) mac os x)/.test(t.toLowerCase());return e||n||i||s?{deviceType:e?"phone":n?"tablet":"desktop",platform:"generic",version:[],grade:"A",mac:s}:null},appleTouchDevice(t){const e=Hh(),n=/Macintosh/i.test(t)&&(e==null?void 0:e.maxTouchPoints)>2;if(!/ip(hone|od|ad)/i.test(t)&&!n)return null;const s=/ip(hone|od)/i.test(t),r=t.match(/os\s{0,}X? (\d+)_(\d+)_?(\d+)?/i),o=r?[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3]||0,10)]:[],l=RV.screen.height===480?"B":"A";return{deviceType:s?"phone":"tablet",platform:"ios",version:o,grade:l}},android(t){const e=/android|htc_|silk/i.test(t),n=/windows phone/i.test(t);if(!e||n)return null;const i=/mobile/i.test(t),s=t.match(/android (\d+)\.?(\d+)?\.?(\d+)?/i),r=s?[parseInt(s[1],10),parseInt(s[2]||0,10),parseInt(s[3]||0,10)]:[],a=r.length>1&&(r[0]<4||r[0]===4&&r[1]<4)?"B":"A";return{deviceType:i?"phone":"tablet",platform:"android",version:r,grade:a}}},AI=[_v.appleTouchDevice,_v.android,_v.generic];class XU{constructor(e){this._window=(e==null?void 0:e.window)||RV,this._realDevice=this._getDevice(),this._currentDevice=void 0,this._currentOrientation=void 0,this._eventsStrategy=new yl(this),this.changed=at(),ae()&&(ar.add(this._recalculateOrientation.bind(this)),rh.add(this._recalculateOrientation.bind(this)))}current(e){if(e){this._currentDevice=this._getDevice(e),this._forced=!0,this.changed.fire();return}if(!this._currentDevice){e=void 0;try{e=this._getDeviceOrNameFromWindowScope()}catch{e=this._getDeviceNameFromSessionStorage()}finally{e||(e=this._getDeviceNameFromSessionStorage()),e&&(this._forced=!0)}this._currentDevice=this._getDevice(e)}return this._currentDevice}real(e){return T({},this._realDevice)}orientation(){return this._currentOrientation}isForced(){return this._forced}isRippleEmulator(){return!!this._window.tinyHippos}_getCssClasses(e){const n=[],i=this._realDevice;return e=e||this.current(),e.deviceType&&(n.push(`dx-device-${e.deviceType}`),e.deviceType!=="desktop"&&n.push("dx-device-mobile")),n.push(`dx-device-${i.platform}`),i.version&&i.version.length&&n.push(`dx-device-${i.platform}-${i.version[0]}`),this.isSimulator()&&n.push("dx-simulator"),Me().rtlEnabled&&n.push("dx-rtl"),n}attachCssClasses(e,n){this._deviceClasses=this._getCssClasses(n).join(" "),m(e).addClass(this._deviceClasses)}detachCssClasses(e){m(e).removeClass(this._deviceClasses)}isSimulator(){try{return this._isSimulator||ae()&&this._window.top!==this._window.self&&this._window.top["dx-force-device"]||this.isRippleEmulator()}catch{return!1}}forceSimulator(){this._isSimulator=!0}_getDevice(e){if(e==="genericPhone"&&(e={deviceType:"phone",platform:"generic",generic:!0}),Ce(e))return this._fromConfig(e);{let n;if(e){if(n=QU[e],!n)throw Te.Error("E0005")}else n=Hh().userAgent;return this._fromUA(n)}}_getDeviceOrNameFromWindowScope(){let e;return ae()&&(this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"])&&(e=this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"]),e}_getDeviceNameFromSessionStorage(){const e=YU();if(!e)return;const n=e.getItem("dx-force-device");try{return JSON.parse(n)}catch{return n}}_fromConfig(e){const n=T({},II,this._currentDevice,e),i={phone:n.deviceType==="phone",tablet:n.deviceType==="tablet",android:n.platform==="android",ios:n.platform==="ios",generic:n.platform==="generic"};return T(n,i)}_fromUA(e){for(let n=0;n<AI.length;n+=1){const i=AI[n],s=i(e);if(s)return this._fromConfig(s)}return II}_changeOrientation(){const e=m(this._window),n=Re(e)>me(e)?"portrait":"landscape";this._currentOrientation!==n&&(this._currentOrientation=n,this._eventsStrategy.fireEvent("orientationChanged",[{orientation:n}]))}_recalculateOrientation(){const e=me(this._window);this._currentWidth!==e&&(this._currentWidth=e,this._changeOrientation())}on(e,n){return this._eventsStrategy.on(e,n),this}off(e,n){return this._eventsStrategy.off(e,n),this}}const X=new XU,kI=tr();kI&&X.attachCssClasses(kI);a_.add((t,e)=>{X.detachCssClasses(e),X.attachCssClasses(t)});function JU(t){return t&&t.get?t.get(0):t}let eK=JU;function se(t){return eK(t)}const Tw=pe(),tK=t=>{if(!t.getRootNode)return;const e=t.getRootNode().host;if(!ve(e))return e},Wh=()=>{const t=W.getActiveElement();if(t&&t!==W.getBody()){var e;(e=t.blur)===null||e===void 0||e.call(t)}},nK=()=>{const t=Tw.getSelection();if(t&&t.type!=="Caret"){if(t.empty)t.empty();else if(t.removeAllRanges)try{t.removeAllRanges()}catch{}}},iK=(t,e)=>{const n=m(t),i=m(e);if(n[0]===i[0])return n[0];const s=n.parents(),r=i.parents(),o=Math.min(s.length,r.length);for(let a=-o;a<0;a++)if(s.get(a)===r.get(a))return s.get(a)},l_=t=>{let e=M(t)&&(t.nodeType||Is(t))?m(t):m("<div>").html(t).contents();return e.length===1&&(e.is("script")?e=l_(e.html().trim()):e.is("table")&&(e=e.children("tbody").contents())),e},ID=(t,e)=>{const n=t.originalEvent&&t.originalEvent.clipboardData||Tw.clipboardData;if(!e)return n&&n.getData("Text");n&&n.setData("Text",e)},kr=(t,e)=>e?bt(t)?kr(t.document,e):t.contains(e)||kr(t,tK(e)):!1,OV=(t,e,n)=>{const i=Tw.getComputedStyle(m(t).get(0)),s=n&&n.includePaddings;return m("<div>").text(e).css({fontStyle:i.fontStyle,fontVariant:i.fontVariant,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFamily:i.fontFamily,letterSpacing:i.letterSpacing,border:i.border,paddingTop:s?i.paddingTop:"",paddingRight:s?i.paddingRight:"",paddingBottom:s?i.paddingBottom:"",paddingLeft:s?i.paddingLeft:"",visibility:"hidden",whiteSpace:"pre",position:"absolute",float:"left"})},sK=(t,e)=>(e&&W.insertElement(t.parentNode,e,t),t),PV=(t,e)=>{if(e&&e[0])return e.is(t)?t:(N(e,(n,i)=>{sK(t[0],i)}),t.remove(),e)},rK=t=>{const e=t==null?void 0:t.get(0),n=e==null?void 0:e.getRootNode().host;return!!m(n||e).closest(pe().document).length},Iw=function(t){return function(e){const n=m(e||"body"),i=n.filter(".dx-visibility-change-handler").add(n.find(".dx-visibility-change-handler"));for(let s=0;s<i.length;s++)b.triggerHandler(i[s],t)}},Aw=Iw("dxshown"),oK=Iw("dxhiding"),Ji=Iw("dxresize"),aK=at({syncStrategy:!0});class vl{render(e){e=e||{};const n=e.onRendered;delete e.onRendered;let i;return e.renovated&&e.transclude&&this._element?i=m("<div>").append(this._element).contents():i=this._renderCore(e),this._ensureResultInContainer(i,e.container),aK.fire(i,e.container),n&&n(),i}_ensureResultInContainer(e,n){if(!n)return;const i=m(n),s=kr(i.get(0),e.get(0));i.append(e),!(s||!kr(W.getBody(),i.get(0)))&&Aw(e)}_renderCore(){throw Te.Error("E0001")}}const lK=function(t,e,n,i,s){let r;const o=((a,l,c)=>l(()=>a,c))(t,e,function(a){if(r&&r(),P2(a)){s(a);return}r=function(l,c,u,d,p){const f={},g=u.slice(),y=u.map(function(v){const C=d[v];return c(C?()=>C(l):()=>l[v],function(x){if(f[v]=x,g.length){const S=g.indexOf(v);S>=0&&g.splice(S,1)}g.length||p(f)})});return function(){y.forEach(v=>v())}}(a,e,n,i,s)});return function(){r&&r(),o&&o()}};class ea extends vl{constructor(e,n,i,s){super(),this._render=e,this._fields=n,this._fieldsMap=s||{},this._watchMethod=i}_renderCore(e){const n=m(e.container),i=lK(e.model,this._watchMethod,this._fields,this._fieldsMap,s=>{n.empty(),this._render(n,s,e.model)});return b.on(n,_l,i),n.contents()}}class Rr extends vl{_renderCore(){return m()}}const il=function(t){return t===0?0:t/Math.abs(t)},pn=function(t,e,n){const i=!e&&e!==0,s=!n&&n!==0;return i&&(e=s?t:Math.min(t,n)),s&&(n=i?t:Math.max(t,e)),Math.min(Math.max(t,e),n)},Or=function(t,e,n){return t>=e&&t<=n};function RI(t){return Math.abs(parseInt(t.toExponential().split("e")[1]))}function cK(t){const e=t.toExponential().split("e"),n=parseFloat(e[0]);return{exponent:parseInt(e[1]),mantissa:n}}function MV(t,e){const n=cK(t);return parseFloat(`${n.mantissa}e${n.exponent+e}`)}function uK(){return 3e-4.toPrecision(3)!=="0.000300"}function VV(t,e){let n=dK(e||0)+2;const i=t.toString().split("."),s=t,r=Math.abs(t);let o;const a=lI(t),l=r>1?10:0;return i.length===1?t:(a||(lI(e)&&(n=i[0].length+RI(e)),t=r,t=t-Math.floor(t)+l),n=uK()&&RI(t)>6||n>7?15:7,!a&&(o=parseFloat(t.toPrecision(n)).toString().split("."),o[0]===l.toString())?parseFloat(i[0]+"."+o[1]):parseFloat(s.toPrecision(n)))}function dK(t){const e=t.toString();if(e.indexOf(".")<0)return 0;const n=e.split("."),i=n[1].indexOf("e");return i>=0?i:n[1].length}function OI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return parseFloat(t.toFixed(e))}const hK={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function c_(t){return hK[t]}const oh=7,cd=["millisecond","second","minute","hour","day","week","month","quarter","year"],pK=function(t,e,n){const i=e.getTime()-t.getTime(),s=c_(n)||1;return Math.floor(i/s)},fK=function(t,e){switch(u_(t)){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return e?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},BV=function(t){let e,n,i;const s=["millisecond","second","minute","hour","day","month","year"],r={};for(e=s.length-1;e>=0;e--)i=s[e],n=Math.floor(t/c_(i)),n>0&&(r[i+"s"]=n,t-=Qm(i,n));return r},mK=function(t){let e=0;return ue(t)&&N(t,function(n,i){e+=Qm(n.substr(0,n.length-1),i)}),ve(t)&&(e=Qm(t,1)),e};function Qm(t,e){return c_(t)*e}function u_(t){let e=-1,n;return ve(t)?t:ue(t)?(N(t,function(i,s){for(n=0;n<cd.length;n++)s&&(i===cd[n]+"s"||i===cd[n])&&e<n&&(e=n)}),cd[e]):""}const gK={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"};function _K(t){return gK[u_(t)]||""}const LV=function(t){return Math.floor(t/3)},$V=function(t){return 3*LV(t)};function FV(t,e,n,i){t=new Date(t.getTime());const s=new Date(t.getTime());let r,o;const a=u_(e);switch(a){case"second":t=new Date(1e3*Math.floor(s.getTime()/1e3));break;case"minute":t=new Date(6e4*Math.floor(s.getTime()/6e4));break;case"hour":t=new Date(36e5*Math.floor(s.getTime()/36e5));break;case"year":t.setMonth(0);case"month":t.setDate(1);case"day":t.setHours(0,0,0,0);break;case"week":t=UV(t,i||0),t.setHours(0,0,0,0);break;case"quarter":r=$V(t.getMonth()),o=t.getMonth(),t.setDate(1),t.setHours(0,0,0,0),o!==r&&t.setMonth(r)}return n&&a!=="hour"&&a!=="minute"&&a!=="second"&&qV(s,t),t}function HV(t){return FV(t,"day")}const yK=function(t){const e=HV(t);return e.setDate(e.getDate()+1),new Date(e.getTime()-1)},vK=function(t,e){let n=0;const i={year:t.getFullYear()!==e.getFullYear(),month:t.getMonth()!==e.getMonth(),day:t.getDate()!==e.getDate(),hour:t.getHours()!==e.getHours(),minute:t.getMinutes()!==e.getMinutes(),second:t.getSeconds()!==e.getSeconds(),millisecond:t.getMilliseconds()!==e.getMilliseconds()};return N(i,function(s,r){r&&n++}),n===0&&YV(t,e)!==0&&(i.hour=!0,n++),i.count=n,i};function NV(t,e,n){const i=new Date(t.getTime()),s=ve(e)?WV(e.toLowerCase()):ut(e)?BV(e):e;return s.years&&i.setFullYear(i.getFullYear()+s.years*n),s.quarters&&i.setMonth(i.getMonth()+3*s.quarters*n),s.months&&i.setMonth(i.getMonth()+s.months*n),s.weeks&&i.setDate(i.getDate()+7*s.weeks*n),s.days&&i.setDate(i.getDate()+s.days*n),s.hours&&i.setTime(i.getTime()+36e5*s.hours*n),s.minutes&&i.setTime(i.getTime()+6e4*s.minutes*n),s.seconds&&i.setTime(i.getTime()+1e3*s.seconds*n),s.milliseconds&&i.setTime(i.getTime()+s.milliseconds*n),i}const zV=function(t,e,n){const i=n?-1:1;return er(t)?NV(t,e,i):VV(t+e*i,e)},CK=function(t,e,n){const i=[];let s;for(i.push(er(t)?new Date(t.getTime()):t),s=t;s<e;)s=zV(s,n),i.push(s);return i},DK=function(t,e){if(t==="month")return ki(e.getFullYear(),e.getMonth(),1);if(t==="year")return ki(e.getFullYear(),0,e.getDate());if(t==="decade")return ki(Uh(e),e.getMonth(),e.getDate());if(t==="century")return ki(Gh(e),e.getMonth(),e.getDate())},xK=function(t,e){if(t==="month")return ki(e.getFullYear(),e.getMonth(),Xm(e));if(t==="year")return ki(e.getFullYear(),11,e.getDate());if(t==="decade")return ki(Uh(e)+9,e.getMonth(),e.getDate());if(t==="century")return ki(Gh(e)+90,e.getMonth(),e.getDate())},wK=function(t,e){const n=ki(e.getFullYear(),e.getMonth(),1);return t==="month"||(n.setMonth(0),t==="year")||(t==="decade"&&n.setFullYear(Uh(e)),t==="century"&&n.setFullYear(Gh(e))),n},SK=function(t,e){const n=new Date(e);return n.setDate(Xm(e)),t==="month"||(n.setMonth(11),n.setDate(Xm(n)),t==="year")||(t==="decade"&&n.setFullYear(Uh(e)+9),t==="century"&&n.setFullYear(Gh(e)+99)),n};function Xm(t){return ki(t.getFullYear(),t.getMonth()+1,0).getDate()}const bK=function(t){switch(t){case"month":return"year";case"year":return"decade";case"decade":return"century"}},EK=function(t){switch(t){case"century":return"decade";case"decade":return"year";case"year":return"month"}},TK=function(t){let e=1;return t==="year"&&(e=12),t==="decade"&&(e=120),t==="century"&&(e=1200),e},IK=function(t){let e=1;return t==="decade"&&(e=12),t==="century"&&(e=120),e};function WV(t){const e={};switch(t){case"year":e.years=1;break;case"month":e.months=1;break;case"quarter":e.months=3;break;case"week":e.weeks=1;break;case"day":e.days=1;break;case"hour":e.hours=1;break;case"minute":e.minutes=1;break;case"second":e.seconds=1;break;case"millisecond":e.milliseconds=1}return e}function AK(t,e){return AD(t,e)&&t.getDate()===e.getDate()}function AD(t,e){return GV(t,e)&&t.getMonth()===e.getMonth()}function GV(t,e){return t&&e&&t.getFullYear()===e.getFullYear()}function kK(t,e){return t&&e&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes()}const RK=function(t,e){if(!M(t)||!M(e))return;const n=t.getFullYear()-t.getFullYear()%10,i=e.getFullYear()-e.getFullYear()%10;return t&&e&&n===i},OK=function(t,e){if(!M(t)||!M(e))return;const n=t.getFullYear()-t.getFullYear()%100,i=e.getFullYear()-e.getFullYear()%100;return t&&e&&n===i};function Gh(t){return t&&t.getFullYear()-t.getFullYear()%100}function Uh(t){return t&&t.getFullYear()-t.getFullYear()%10}const PK=function(){return"yyyy/MM/dd"},MK=function(t){if(M(t))return ki(t.getFullYear(),t.getMonth(),1)},VK=function(t){if(M(t))return ki(t.getFullYear(),t.getMonth()+1,0)};function UV(t,e){const n=(t.getDay()-e+oh)%oh,i=new Date(t);return i.setDate(t.getDate()-n),i}function PI(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())}function BK(t){const e=PI(t)-PI(KV(t.getFullYear()));return 1+Math.floor(e/c_("day"))}function KV(t){return new Date(t,0,1)}function yv(t){return new Date(t,11,31)}function MI(t,e){let n=t.getDay()-e+1;return n<=0&&(n+=oh),n}function kD(t,e,n){const i=MI(KV(t.getFullYear()),e),s=MI(yv(t.getFullYear()),e),r=oh-i+1;let o=Math.ceil((BK(t)-r)/7);switch(n){case"fullWeek":if(r===oh&&o++,o===0){const a=yv(t.getFullYear()-1);return kD(a,e,n)}return o;case"firstDay":{r>0&&o++;const a=i===7||s===7;return(o>52&&!a||o===54)&&(o=1),o}case"firstFourDays":{r>3&&o++;const a=i===4||s===4;if(o>52&&!a&&(o=1),o===0){const l=yv(t.getFullYear()-1);return kD(l,e,n)}return o}}}const LK=function(t,e){const n=V.getDatesInterval(t,e,"day");let i=new Date(t);return n>=6&&(i=new Date(i.setDate(i.getDate()+7))),i},$K=function(t,e,n,i){return i==="date"&&(e=e&&V.correctDateWithUnitBeginning(e,"day"),n=n&&V.correctDateWithUnitBeginning(n,"day"),t=t&&V.correctDateWithUnitBeginning(t,"day")),jV(t,e,n)===t},FK=function(t){const{firstMin:e,firstMax:n,secondMin:i,secondMax:s}=t;return e<=i&&i<=n||e>i&&e<s||e<s&&n>s},HK=function(t){const e=Math.floor(t),n=t%1*60;return{hours:e,minutes:n}},NK=function(t,e){const n=this.dateTimeFromDecimal(e),i=new Date(t);return(t.getHours()===n.hours&&t.getMinutes()<n.minutes||t.getHours()<n.hours)&&i.setHours(n.hours,n.minutes,0,0),i};function jV(t,e,n){let i=t;return M(t)?(M(e)&&t<e&&(i=e),M(n)&&t>n&&(i=n),i):t}function qV(t,e){if(!M(t))return;const n=e.getHours()-t.getHours();if(n===0)return;const i=n===1||n===-23?-1:1,s=new Date(e.getTime()+36e5*i);(i>0||s.getDate()===e.getDate())&&e.setTime(s.getTime())}const zK=function(t){const e=new Date(t.getTime());return e.setHours(e.getHours()+1),e.setMinutes(0),e};function YV(t,e){return 60*(e.getTimezoneOffset()-t.getTimezoneOffset())*1e3}const WK=function(t){return new Date(t)},GK=function(t,e,n){const i=[];let s=new Date(t.getTime());for(;s<e;)i.push(new Date(s.getTime())),s=this.addInterval(s,n);return i},ki=function(t){const e=new Date(...arguments);return e.setFullYear(t),e},UK=()=>typeof Intl<"u"?Intl.DateTimeFormat().resolvedOptions().timeZone:null,V={dateUnitIntervals:cd,convertMillisecondsToDateUnits:BV,dateToMilliseconds:mK,getNextDateUnit:fK,convertDateUnitToMilliseconds:Qm,getDateUnitInterval:u_,getDateFormatByTickInterval:_K,getDatesDifferences:vK,correctDateWithUnitBeginning:FV,trimTime:HV,setToDayEnd:yK,roundDateByStartDayHour:NK,dateTimeFromDecimal:HK,addDateInterval:NV,addInterval:zV,getSequenceByInterval:CK,getDateIntervalByString:WV,sameHoursAndMinutes:kK,sameDate:AK,sameMonthAndYear:AD,sameMonth:AD,sameYear:GV,sameDecade:RK,sameCentury:OK,getDifferenceInMonth:TK,getDifferenceInMonthForCells:IK,getFirstYearInDecade:Uh,getFirstDecadeInCentury:Gh,getShortDateFormat:PK,getViewFirstCellDate:DK,getViewLastCellDate:xK,getViewDown:EK,getViewUp:bK,getLastMonthDay:Xm,getLastMonthDate:VK,getFirstMonthDate:MK,getFirstWeekDate:UV,getWeekNumber:kD,normalizeDateByWeek:LK,getQuarter:LV,getFirstQuarterMonth:$V,dateInRange:$K,intervalsOverlap:FK,roundToHour:zK,normalizeDate:jV,getViewMinBoundaryDate:wK,getViewMaxBoundaryDate:SK,fixTimezoneGap:qV,getTimezonesDifference:YV,makeDate:WK,getDatesInterval:pK,getDatesOfInterval:GK,createDateWithFullYear:ki,getMachineTimezoneName:UK};V.sameView=function(t,e,n){return V[Uc("same "+t)](e,n)};function Gi(t,e){for(;t.length<e;)t="0"+t;return t}const Uu={3:"abbreviated",4:"wide",5:"narrow"},RD={y:function(t,e,n){let i=t[n?"getUTCFullYear":"getFullYear"]();return e===2&&(i%=100),Gi(i.toString(),e)},M:function(t,e,n,i){const s=t[n?"getUTCMonth":"getMonth"](),r=Uu[e];return r?i.getMonthNames(r,"format")[s]:Gi((s+1).toString(),Math.min(e,2))},L:function(t,e,n,i){const s=t[n?"getUTCMonth":"getMonth"](),r=Uu[e];return r?i.getMonthNames(r,"standalone")[s]:Gi((s+1).toString(),Math.min(e,2))},Q:function(t,e,n,i){const s=t[n?"getUTCMonth":"getMonth"](),r=Math.floor(s/3),o=Uu[e];return o?i.getQuarterNames(o)[r]:Gi((r+1).toString(),Math.min(e,2))},E:function(t,e,n,i){const s=t[n?"getUTCDay":"getDay"](),r=Uu[e<3?3:e];return i.getDayNames(r)[s]},a:function(t,e,n,i){const r=t[n?"getUTCHours":"getHours"]()<12?0:1,o=Uu[e];return i.getPeriodNames(o)[r]},d:function(t,e,n){return Gi(t[n?"getUTCDate":"getDate"]().toString(),Math.min(e,2))},H:function(t,e,n){return Gi(t[n?"getUTCHours":"getHours"]().toString(),Math.min(e,2))},h:function(t,e,n){const i=t[n?"getUTCHours":"getHours"]();return Gi((i%12||12).toString(),Math.min(e,2))},m:function(t,e,n){return Gi(t[n?"getUTCMinutes":"getMinutes"]().toString(),Math.min(e,2))},s:function(t,e,n){return Gi(t[n?"getUTCSeconds":"getSeconds"]().toString(),Math.min(e,2))},S:function(t,e,n){return Gi(t[n?"getUTCMilliseconds":"getMilliseconds"]().toString(),3).substr(0,e)},x:function(t,e,n){const i=n?0:t.getTimezoneOffset(),s=i>0?"-":"+",r=Math.abs(i),o=Math.floor(r/60),a=r%60,l=Gi(o.toString(),2),c=Gi(a.toString(),2);return s+l+(e>=3?":":"")+(e>1||a?c:"")},X:function(t,e,n){return n||!t.getTimezoneOffset()?"Z":RD.x(t,e,n)},Z:function(t,e,n){return RD.X(t,e>=5?3:2,n)}},ZV=function(t,e){return function(n){let i,s,r,o=0,a=!1,l,c="";if(!n)return null;if(!t)return n;const u=t[t.length-1]==="Z"||t.slice(-3)==="'Z'";for(i=0;i<t.length;i++)r=t[i],s=RD[r],l=r===t[i+1],o++,l||(s&&!a&&(c+=s(n,o,u,e)),o=0),r==="'"&&!l?a=!a:(a||!s)&&(c+=r),r==="'"&&l&&i++;return c}},KK=["January","February","March","April","May","June","July","August","September","October","November","December"],jK=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],qK=["AM","PM"],YK=["Q1","Q2","Q3","Q4"],VI=(t,e)=>{const n={abbreviated:3,short:2,narrow:1};return Yn(t,i=>i.substr(0,n[e]))},gc={getMonthNames:function(t){return VI(KK,t)},getDayNames:function(t){return VI(jK,t)},getQuarterNames:function(t){return YK},getPeriodNames:function(t){return qK}},QV=/^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/,XV=/^(\d{2}):(\d{2})(:(\d{2}))?$/,BI=["","yyyy","","MM","","dd","THH","","mm","","ss",".SSS"],ZK=/^(\d{4})\/(\d{2})\/(\d{2})$/,JV=function(t,e){let n;return ve(t)&&!e&&(n=XK(t)),n||QK(t)};function Bn(t){return+t||0}function QK(t){const e=eB(t)==="yyyy/MM/dd",n=!er(t)&&Date.parse(t);if(!n&&e){const i=t.match(ZK);if(i){const s=new Date(Bn(i[1]),Bn(i[2]),Bn(i[3]));return s.setFullYear(Bn(i[1])),s.setMonth(Bn(i[2])-1),s.setDate(Bn(i[3])),s}}return ut(n)?new Date(n):t}function XK(t){let e=t.match(QV);if(!e)return e=t.match(XV),e?new Date(0,0,0,Bn(e[1]),Bn(e[2]),Bn(e[4])):void 0;const n=Bn(e[1]),i=--e[3],s=e[5];let r=0,o=0;const a=p=>(n<100&&p.setFullYear(n),p);r=Bn(e[14]),o=Bn(e[16]),e[13]==="-"&&(r=-r,o=-o);const l=Bn(e[6])-r,c=Bn(e[8])-o,u=Bn(e[10]),d=function(p){return p=p||"",Bn(p)*Math.pow(10,3-p.length)}(e[11]);return e[12]?a(new Date(Date.UTC(n,i,s,l,c,u,d))):a(new Date(n,i,s,l,c,u,d))}const JK=function(t,e){let n=t.match(QV),i="";if(!n)return n=t.match(XV),n?n[3]?"HH:mm:ss":"HH:mm":void 0;for(let s=1;s<BI.length;s++)n[s]&&(i+=BI[s]||n[s]);return n[12]==="Z"&&(i+="'Z'"),n[14]&&(n[15]?i+="xxx":n[16]?i+="xx":i+="x"),i},ej=function(t){return typeof t=="number"?new Date(t):JV(t,!Me().forceIsoDateParsing)},tj=function(t,e){return e?er(t)?e==="number"?t&&t.valueOf?t.valueOf():null:ZV(e,gc)(t):null:t},eB=function(t){if(typeof t=="number")return"number";if(ve(t)){let e;return Me().forceIsoDateParsing&&(e=JK(t)),e||(t.indexOf(":")>=0?"yyyy/MM/dd HH:mm:ss":"yyyy/MM/dd")}else if(t)return null},je={dateParser:JV,deserializeDate:ej,serializeDate:tj,getDateSerializationFormat:eB},tB=t=>t??Me().rtlEnabled?"right":"left",ke=t=>bt(t)?{width:t.outerWidth,height:t.outerHeight}:t.getBoundingClientRect(),nj=ar.add,nB="DEVEXTREME_XHR_ERROR_UNLOAD",ij=function(t){return[t[0],t.length<3?"=":String(t[1]).toLowerCase(),t.length<2?!0:t[t.length-1]]},OD=function(t){return Array.isArray(t)||(t=[t]),Yn(t,function(e){const n={selector:ie(e)||typeof e=="string"?e:e.getter||e.field||e.selector,desc:!!(e.desc||String(e.dir).charAt(0).toLowerCase()==="d")};return e.compare&&(n.compare=e.compare),n})},sj=function(){const t={timeout:"Network connection timeout",error:"Unspecified network error",parsererror:"Unexpected server response"};let e;return nj(function(){const n=pe();W.listen(n,"beforeunload",function(){e=!0})}),function(n,i){return e?nB:n.status<400?function(s){let r=t[s];return r||s}(i):n.statusText}}(),rj={count:{seed:0,step:function(t){return 1+t}},sum:{seed:0,step:function(t,e){return t+e}},min:{step:function(t,e){return e<t?e:t}},max:{step:function(t,e){return e>t?e:t}},avg:{seed:[0,0],step:function(t,e){return[t[0]+e,t[1]+1]},finalize:function(t){return t[1]?t[0]/t[1]:NaN}}},oj=function(){let t=0,e;return{obtain:function(){t===0&&(e=new j),t++},release:function(){t--,t<1&&e.resolve()},promise:function(){return(t===0?new j().resolve():e).promise()},reset:function(){t=0,e&&e.resolve()}}}();function aj(t){return/^(and|&&|&)$/i.test(t)}const d_=function(t,e,n){if(Array.isArray(t)){const i=Yn(e,function(r,o){return o});let s;for(let r=0;r<i.length;r++)if(s=i[r],!Bi(e[s],n[s],{strict:!1}))return!1;return!0}return Bi(e,n,{strict:!1})},lj=function(t){return t[0]==="!"&&Array.isArray(t[1])},cj=function(t){return t==="and"||t==="or"},uj=function(t){if(t.length>2&&Array.isArray(t[0])&&t[1]==="or"&&typeof t[0][0]=="string"&&t[0][1]==="="){const[e]=t[0];return!t.find((n,i)=>i%2!==0?n!=="or":!Array.isArray(n)||n.length!==3||n[0]!==e||n[1]!=="=")}return!1},dj=function(t){const e=t[0],n=t[1];return!!(Array.isArray(e)||ie(e)&&(Array.isArray(n)||ie(n)||cj(n)))},kc=function(){const t=new j;return t.resolve.apply(t,arguments).promise()},iB=function(){const t=new j;return t.reject.apply(t,arguments).promise()};function hj(t,e){let n;return function(){return n||(n=setTimeout(()=>{n=void 0,t.call(this)},ie(e)?e():e)),n}}function pj(t,e){let n=[];const i=hj(function(){t.call(this,n),n=[]},e);return function(s){return Array.isArray(s)&&n.push(...s),i.call(this,n)}}const mn=cw(Te.ERROR_MESSAGES,{E4000:"[DevExpress.data]: {0}",E4001:"Unknown aggregating function is detected: '{0}'",E4002:"Unsupported OData protocol version is used",E4003:"Unknown filter operation is used: {0}",E4004:"The thenby() method is called before the sortby() method",E4005:"Store requires a key expression for this operation",E4006:"ArrayStore 'data' option must be an array",E4007:"Compound keys cannot be auto-generated",E4008:"Attempt to insert an item with a duplicated key",E4009:"Data item cannot be found",E4010:"CustomStore does not support creating queries",E4011:"Custom Store method is not implemented or is not a function: {0}",E4012:"Custom Store method returns an invalid value: {0}",E4013:"Local Store requires the 'name' configuration option is specified",E4014:"Unknown data type is specified for ODataStore: {0}",E4015:"Unknown entity name or alias is used: {0}",E4016:"The compileSetter(expr) method is called with 'self' passed as a parameter",E4017:"Keys cannot be modified",E4018:"The server has returned a non-numeric value in a response to an item count request",E4019:"Mixing of group operators inside a single group of filter expression is not allowed",E4020:"Unknown store type is detected: {0}",E4021:"The server response does not provide the totalCount value",E4022:"The server response does not provide the groupCount value",E4023:"Could not parse the following XML: {0}",E4024:"String function {0} cannot be used with the data field {1} of type {2}.",W4000:"Data returned from the server has an incorrect structure",W4001:'The {0} field is listed in both "keyType" and "fieldTypes". The value of "fieldTypes" is used.',W4002:"Data loading has failed for some cells due to the following error: {0}"});let fj=null;const kw=function(t){var e;(e=fj)===null||e===void 0||e(t)};function mj(t,e){let n;const i=typeof e=="string"?e.split():e.slice();for(;i.length;)if(n=i.shift(),n in t)return!0;return!1}function sB(t,e,n,i){let s,r;if(i){for(let o=0;o<e.length;o++)if(s=e[o].items||e[o].collapsedItems||[],r=sB(t,s||[],n,i-1),r)return r}else if(sl(t,e,n)>=0)return e}function gj(t,e,n,i){return i?sB(t,e,n,i)||[]:e}function _j(t,e){if(t.key()&&(!e._dataByKeyMap||e._dataByKeyMapLength!==e.length)){const n={},i=e.length;for(let s=0;s<i;s++)n[JSON.stringify(t.keyOf(e[s]))]=e[s];e._dataByKeyMap=n,e._dataByKeyMapLength=i}}function yj(t,e){if(t._dataByKeyMap)return t._dataByKeyMap[JSON.stringify(e)]}function vj(t,e){return t._dataByKeyMap?t._dataByKeyMap[JSON.stringify(e)]:!0}function rB(t,e,n){t._dataByKeyMap&&(t._dataByKeyMap[JSON.stringify(e)]=n,t._dataByKeyMapLength+=n?1:-1)}function oB(t,e,n){n=n||new WeakMap;const i=t?Object.create(Object.getPrototypeOf(t)):{};t&&n.set(t,i);const s=L({},t);Jo(i,s,!0,!0);for(const r in s){const o=s[r],a=e==null?void 0:e[r];ue(o)&&!Ce(o)&&ue(a)&&!n.has(o)&&(i[r]=oB(o,a,n))}for(const r in i){const o=i[r];ue(o)&&n.has(o)&&(i[r]=n.get(o))}return i}function Cj(t,e){const n=oB(t,e);return Jo(n,e,!0,!0)}function Rw(t){let{keyInfo:e,data:n,changes:i,groupCount:s,useInsertIndex:r,immutable:o,disableCache:a,logError:l,skipCopying:c}=t;const u=o===!0?[...n]:n;return i.forEach(d=>{const p=d.type==="insert"?u:gj(e,u,d.key,s);switch(!a&&_j(e,p),d.type){case"update":Ow(e,p,d.key,d.data,!0,o,l);break;case"insert":Pw(e,p,d.data,r&&M(d.index)?d.index:-1,!0,l,c);break;case"remove":aB(e,p,d.key,!0,l)}}),u}function Jm(t,e,n){return t?e&&mn.log(n):iB(mn.Error(n))}function Ow(t,e,n,i,s,r,o){let a;const l=t.key();if(l){if(mj(i,l)&&!d_(l,n,t.keyOf(i)))return Jm(s,o,"E4017");if(a=yj(e,n),!a){const c=sl(t,e,n);if(c<0)return Jm(s,o,"E4009");if(a=e[c],r===!0&&M(a)){const u=Cj(a,i);return e[c]=u,!s&&kc(u,n)}}}else a=n;if(Jo(a,i,!0),!s)return Me().useLegacyStoreResult?kc(n,i):kc(a,n)}function Pw(t,e,n,i,s,r,o){let a;const l=t.key(),c=Ce(n)&&!o?T({},n):n;if(l){if(a=t.keyOf(c),a===void 0||typeof a=="object"&&ti(a)){if(Array.isArray(l))throw mn.Error("E4007");a=c[l]=String(new Et)}else if(e[sl(t,e,a)]!==void 0)return Jm(s,r,"E4008")}else a=c;if(i>=0?e.splice(i,0,c):e.push(c),rB(e,a,c),!s)return kc(Me().useLegacyStoreResult?n:c,a)}function aB(t,e,n,i,s){const r=sl(t,e,n);if(r>-1&&(e.splice(r,1),rB(e,n,null)),i){if(r<0)return Jm(i,s,"E4009")}else return kc(n)}function sl(t,e,n){const i=t.key();if(!vj(e,n))return-1;for(let s=0,r=e.length;s<r;s++)if(d_(i,t.keyOf(e[s]),n))return s;return-1}const Kh=ze.inherit({toArray:function(){const t=[];for(this.reset();this.next();)t.push(this.current());return t},countable:function(){return!1}}),Mw=Kh.inherit({ctor:function(t){this.array=t,this.index=-1},next:function(){return this.index+1<this.array.length?(this.index++,!0):!1},current:function(){return this.array[this.index]},reset:function(){this.index=-1},toArray:function(){return this.array.slice(0)},countable:function(){return!0},count:function(){return this.array.length}}),h_=Kh.inherit({ctor:function(t){this.iter=t},next:function(){return this.iter.next()},current:function(){return this.iter.current()},reset:function(){return this.iter.reset()}}),vv=h_.inherit({ctor:function(t,e){this.callBase(t),this.index=-1,this.mapper=e},current:function(){return this.mapper(this.callBase(),this.index)},next:function(){const t=this.callBase();return t&&this.index++,t}}),Dj=function(t,e,n){return ve(t)&&ve(e)&&(n!=null&&n.locale||n!=null&&n.collatorOptions)?new Intl.Collator((n==null?void 0:n.locale)||void 0,(n==null?void 0:n.collatorOptions)||void 0).compare(t,e):(t=zr(t,!1,n),e=zr(e,!1,n),t===null&&e!==null?-1:t!==null&&e===null||t===void 0&&e!==void 0?1:t!==void 0&&e===void 0||t<e?-1:t>e?1:0)},PD=Kh.inherit({ctor:function(t,e,n,i){this.langParams=t.langParams,t instanceof vv||(t=new vv(t,this._wrap),t.langParams=this.langParams),this.iter=t,this.rules=[{getter:e,desc:n,compare:i,langParams:this.langParams}]},thenBy:function(t,e,n){const i=new PD(this.sortedIter||this.iter,t,e,n);return this.sortedIter||(i.rules=this.rules.concat(i.rules)),i},next:function(){return this._ensureSorted(),this.sortedIter.next()},current:function(){return this._ensureSorted(),this.sortedIter.current()},reset:function(){delete this.sortedIter},countable:function(){return this.sortedIter||this.iter.countable()},count:function(){return this.sortedIter?this.sortedIter.count():this.iter.count()},_ensureSorted:function(){const t=this;t.sortedIter||(N(t.rules,function(){this.getter=lt(this.getter)}),t.sortedIter=new vv(new Mw(this.iter.toArray().sort(function(e,n){return t._compare(e,n)})),t._unwrap))},_wrap:function(t,e){return{index:e,value:t}},_unwrap:function(t){return t.value},_getDefaultCompare:t=>(e,n)=>Dj(e,n,t),_compare:function(t,e){const n=t.index,i=e.index;if(t=t.value,e=e.value,t===e)return n-i;for(let s=0,r=this.rules.length;s<r;s++){const o=this.rules[s],a=o.getter(t),l=o.getter(e),u=(o.compare||this._getDefaultCompare(o.langParams))(a,l);if(u)return o.desc?-u:u}return n-i}}),MD=function(){let t={};const e=o=>zr(o,!1,t),n=function(o){if(uj(o))return(u=>{const d=lt(u[0][0]),p=u.reduce((f,g,y)=>(y%2===0&&f.push(e(g[2])),f),[]);return f=>{const g=e(d(f));return p.some(y=>r(y)?g===y:g==y)}})(o);const a=[];let l=!1,c=!1;return N(o,function(){if(Array.isArray(this)||ie(this)){if(a.length>1&&l!==c)throw new mn.Error("E4019");a.push(MD(this,t)),l=c,c=!0}else c=aj(this)}),function(u){let d=l;for(let p=0;p<a.length;p++)if(a[p](u)!==l){d=!l;break}return d}},i=function(o){var a;return M(o)?(a=t)!==null&&a!==void 0&&a.locale?o.toLocaleString(t.locale):o.toString():""};function s(o,a,l){return function(c){c=e(o(c));let u=r(a)?c===a:c==a;return l&&(u=!u),u}}function r(o){return o===""||o===0||o===!1}return function(o,a){return t=a||{},ie(o)?o:dj(o)?n(o):lj(o)?function(l){const c=l[0],u=MD(l[1],t);if(c==="!")return function(d){return!u(d)};throw mn.Error("E4003",c)}(o):function(l){l=ij(l);const c=lt(l[0]),u=l[1];let d=l[2];d=e(d);const p=(f,g)=>(f=e(c(f)),(d==null||f==null)&&d!==f?!1:g(f,d));switch(u.toLowerCase()){case"=":return s(c,d);case"<>":return s(c,d,!0);case">":return f=>p(f,(g,y)=>g>y);case"<":return f=>p(f,(g,y)=>g<y);case">=":return f=>p(f,(g,y)=>g>=y);case"<=":return f=>p(f,(g,y)=>g<=y);case"startswith":return function(f){return e(i(c(f))).indexOf(d)===0};case"endswith":return function(f){const g=e(i(c(f))),y=i(d);if(g.length<y.length)return!1;const v=g.lastIndexOf(d);return v!==-1&&v===g.length-d.length};case"contains":return function(f){return e(i(c(f))).indexOf(d)>-1};case"notcontains":return function(f){return e(i(c(f))).indexOf(d)===-1}}throw mn.Error("E4003",u)}(o)}}(),xj=h_.inherit({ctor:function(t,e){this.callBase(t),this.langParams=t.langParams,this.criteria=MD(e,this.langParams)},next:function(){for(;this.iter.next();)if(this.criteria(this.current()))return!0;return!1}}),wj=Kh.inherit({ctor:function(t,e){this.iter=t,this.getter=e},next:function(){return this._ensureGrouped(),this.groupedIter.next()},current:function(){return this._ensureGrouped(),this.groupedIter.current()},reset:function(){delete this.groupedIter},countable:function(){return!!this.groupedIter},count:function(){return this.groupedIter.count()},_ensureGrouped:function(){if(this.groupedIter)return;const t={},e=[],n=this.iter,i=lt(this.getter);for(n.reset();n.next();){const s=n.current(),r=i(s);r in t?t[r].push(s):(t[r]=[s],e.push(r))}this.groupedIter=new Mw(Yn(e,function(s){return{key:s,items:t[s]}}))}}),Sj=h_.inherit({ctor:function(t,e){this.callBase(t),this.getter=lt(e)},current:function(){return this.getter(this.callBase())},countable:function(){return this.iter.countable()},count:function(){return this.iter.count()}}),bj=h_.inherit({ctor:function(t,e,n){this.callBase(t),this.skip=Math.max(0,e),this.take=Math.max(0,n),this.pos=0},next:function(){if(this.pos>=this.skip+this.take)return!1;for(;this.pos<this.skip&&this.iter.next();)this.pos++;return this.pos++,this.iter.next()},reset:function(){this.callBase(),this.pos=0},countable:function(){return this.iter.countable()},count:function(){return Math.min(this.iter.count()-this.skip,this.take)}}),jh=function(t,e){e=e||{},t instanceof Kh||(t=new Mw(t)),e.langParams&&(t.langParams=e.langParams);const n=function(l){const c=e.errorHandler;c&&c(l),kw(l)},i=function(l){const c=new j().fail(n);let u;const d=l.step,p=l.finalize;try{t.reset(),"seed"in l?u=l.seed:u=t.next()?t.current():NaN;let f=u;for(;t.next();)f=d(f,t.current());c.resolve(p?p(f):f)}catch(f){c.reject(f)}return c.promise()},s=function(l){return i(rj[l])},r=function(l){return!ie(l)&&!Array.isArray(l)&&(l=[].slice.call(arguments)),a(new Sj(t,l))},o=function(l){return r(lt(l))};function a(l){return jh(l,e)}return{toArray:function(){return t.toArray()},enumerate:function(){const l=new j().fail(n);try{l.resolve(t.toArray())}catch(c){l.reject(c)}return l.promise()},setLangParams(l){t.langParams=l},sortBy:function(l,c,u){return a(new PD(t,l,c,u))},thenBy:function(l,c,u){if(t instanceof PD)return a(t.thenBy(l,c,u));throw mn.Error("E4004")},filter:function(l){return Array.isArray(l)||(l=[].slice.call(arguments)),a(new xj(t,l))},slice:function(l,c){return c===void 0&&(c=Number.MAX_VALUE),a(new bj(t,l,c))},select:r,groupBy:function(l){return a(new wj(t,l))},aggregate:function(l,c,u){return arguments.length<2?i({step:arguments[0]}):i({seed:l,step:c,finalize:u})},count:function(){if(t.countable()){const l=new j().fail(n);try{l.resolve(t.count())}catch(c){l.reject(c)}return l.promise()}return s("count")},sum:function(l){return l?o(l).sum():s("sum")},min:function(l){return l?o(l).min():s("min")},max:function(l){return l?o(l).max():s("max")},avg:function(l){return l?o(l).avg():s("avg")}}};function Vw(t,e){return t=t.groupBy(e[0].selector),e.length>1&&(t=t.select(function(n){return T({},n,{items:Vw(jh(n.items),e.slice(1)).toArray()})})),t}function lB(t,e){const n=[];return N(t,function(i,s){Ci(e,function(o){return s.selector===o.selector}).length<1&&n.push(s)}),n.concat(e)}function Ej(t,e,n){var i;e=e||{};const s=e.filter;if((i=e)!==null&&i!==void 0&&i.langParams){var r,o;(r=(o=t).setLangParams)===null||r===void 0||r.call(o,e.langParams)}if(s&&(t=t.filter(s)),n)return t;let a=e.sort;const l=e.select;let c=e.group;const u=e.skip,d=e.take;return c&&(c=OD(c),c.keepInitialKeyOrder=!!e.group.keepInitialKeyOrder),(a||c)&&(a=OD(a||[]),c&&!c.keepInitialKeyOrder&&(a=lB(c,a)),N(a,function(p){t=t[p?"thenBy":"sortBy"](this.selector,this.desc,this.compare)})),l&&(t=t.select(l)),c&&(t=Vw(t,c)),(d||u)&&(t=t.slice(u||0,d)),t}const eg={multiLevelGroup:Vw,arrangeSortingInfo:lB,queryByOptions:Ej},Ku=ze.abstract,LI=eg.queryByOptions,VD={},Pr=ze.inherit({_langParams:{},ctor:function(t){const e=this;t=t||{},this._eventsStrategy=new yl(this),N(["onLoaded","onLoading","onInserted","onInserting","onUpdated","onUpdating","onPush","onRemoved","onRemoving","onModified","onModifying"],function(n,i){i in t&&e.on(i.slice(2).toLowerCase(),t[i])}),this._key=t.key,this._errorHandler=t.errorHandler,this._useDefaultSearch=!0},_clearCache:B,_customLoadOptions:function(){return null},key:function(){return this._key},keyOf:function(t){return this._keyGetter||(this._keyGetter=lt(this.key())),this._keyGetter(t)},_requireKey:function(){if(!this.key())throw mn.Error("E4005")},load:function(t){const e=this;return t=t||{},this._eventsStrategy.fireEvent("loading",[t]),this._withLock(this._loadImpl(t)).done(function(n){e._eventsStrategy.fireEvent("loaded",[n,t])})},_loadImpl:function(t){return ti(this._langParams)||(t=t||{},t._langParams=L({},this._langParams,t._langParams)),LI(this.createQuery(t),t).enumerate()},_withLock:function(t){const e=new j;return t.done(function(){const n=this,i=arguments;oj.promise().done(function(){e.resolveWith(n,i)})}).fail(function(){e.rejectWith(this,arguments)}),e},createQuery:Ku,totalCount:function(t){return this._totalCountImpl(t)},_totalCountImpl:function(t){return LI(this.createQuery(t),t,!0).count()},byKey:function(t,e){return this._addFailHandlers(this._withLock(this._byKeyImpl(t,e)))},_byKeyImpl:Ku,insert:function(t){const e=this;return e._eventsStrategy.fireEvent("modifying"),e._eventsStrategy.fireEvent("inserting",[t]),e._addFailHandlers(e._insertImpl(t).done(function(n,i){e._eventsStrategy.fireEvent("inserted",[n,i]),e._eventsStrategy.fireEvent("modified")}))},_insertImpl:Ku,update:function(t,e){const n=this;return n._eventsStrategy.fireEvent("modifying"),n._eventsStrategy.fireEvent("updating",[t,e]),n._addFailHandlers(n._updateImpl(t,e).done(function(){n._eventsStrategy.fireEvent("updated",[t,e]),n._eventsStrategy.fireEvent("modified")}))},_updateImpl:Ku,push:function(t){const e={changes:t,waitFor:[]};this._eventsStrategy.fireEvent("beforePushAggregation",[e]),Ne(...e.waitFor).done(()=>{this._pushImpl(t),this._eventsStrategy.fireEvent("beforePush",[{changes:t}]),this._eventsStrategy.fireEvent("push",[t])})},_pushImpl:B,remove:function(t){const e=this;return e._eventsStrategy.fireEvent("modifying"),e._eventsStrategy.fireEvent("removing",[t]),e._addFailHandlers(e._removeImpl(t).done(function(n){e._eventsStrategy.fireEvent("removed",[n]),e._eventsStrategy.fireEvent("modified")}))},_removeImpl:Ku,_addFailHandlers:function(t){return t.fail(this._errorHandler).fail(kw)},on(t,e){return this._eventsStrategy.on(t,e),this},off(t,e){return this._eventsStrategy.off(t,e),this}});Pr.create=function(t,e){if(!(t in VD))throw mn.Error("E4020",t);return new VD[t](e)};Pr.registerClass=function(t,e){return e&&(VD[e]=t),t};Pr.inherit=function(t){return function(e,n){const i=t.apply(this,[e]);return Pr.registerClass(i,n),i}}(Pr.inherit);const cB="totalCount",BD="load",uB="byKey",$I="insert",FI="update",HI="remove";function Rc(t){return t&&ie(t.then)}function Ga(t){return new j().resolve(t).promise()}function bd(t,e){if(!ie(e))throw mn.Error("E4011",t)}function dB(t){throw mn.Error("E4012",t)}function ba(t){return function(e){let n;e instanceof Error?n=e:n=new Error(function(i){const s=i[0],r=i[1];return!s||!s.getResponseHeader?null:sj(s,r)}(arguments)||e&&String(e)||"Unknown error"),n.message!==nB&&t.reject(n)}}function hB(t,e){const n=t._loadFunc;let i;return bd(BD,n),i=n.apply(t,[e]),Array.isArray(i)?i=Ga(i):i==null?i=Ga([]):Rc(i)||dB(BD),vi(i)}function Tj(t,e){const n=t._totalCountFunc;let i;if(!ie(n))throw mn.Error("E4021");return i=n.apply(t,[e]),Rc(i)||(i=Number(i),isFinite(i)||dB(cB),i=Ga(i)),vi(i)}function Ij(t,e,n){const i=t._byKeyFunc;let s;return bd(uB,i),s=i.apply(t,[e,n]),Rc(s)||(s=Ga(s)),vi(s)}function pB(t,e,n,i){if(e.__rawData)i(e.__rawData);else{const s=e.__rawDataPromise||hB(e,n);e._cacheRawData&&(e.__rawDataPromise=s),s.always(function(){delete e.__rawDataPromise}).done(function(r){e._cacheRawData&&(e.__rawData=r),i(r)}).fail(r=>{var o;const a=ba(t);(o=e._errorHandler)===null||o===void 0||o.call(e,r),a(r)})}}function NI(t,e,n,i){n=n||{};const s={};"userData"in n&&(s.userData=n.userData),pB(t,e,s,function(r){const o=jh(r,{errorHandler:e._errorHandler});let a,l;const c=[];let u,d;i||(a=eg.queryByOptions(o,n),a===o?u=r.slice(0):c.push(a.enumerate().done(function(p){u=p}))),(n.requireTotalCount||i)&&(l=eg.queryByOptions(o,n,!0),l===o?d=r.length:c.push(l.count().done(function(p){d=p}))),Ne.apply(m,c).done(function(){i?t.resolve(d):n.requireTotalCount?t.resolve(u,{totalCount:d}):t.resolve(u)}).fail(function(p){t.reject(p)})})}function Aj(t,e,n){pB(t,e,{},function(i){const s=e.key();let r;for(let o=0,a=i.length;o<a;o++)if(r=i[o],d_(s,e.keyOf(i[o]),n)){t.resolve(r);return}t.reject(mn.Error("E4009"))})}const Bw=Pr.inherit({ctor:function(t){t=t||{},this.callBase(t),this._useDefaultSearch=!!t.useDefaultSearch||t.loadMode==="raw",this._loadMode=t.loadMode,this._cacheRawData=t.cacheRawData!==!1,this._loadFunc=t[BD],this._totalCountFunc=t[cB],this._byKeyFunc=t[uB],this._insertFunc=t[$I],this._updateFunc=t[FI],this._removeFunc=t[HI]},_clearCache(){delete this.__rawData},createQuery:function(){throw mn.Error("E4010")},clearRawDataCache:function(){this._clearCache()},_totalCountImpl:function(t){let e=new j;return this._loadMode==="raw"&&!this._totalCountFunc?NI(e,this,t,!0):(Tj(this,t).done(function(n){e.resolve(Number(n))}).fail(ba(e)),e=this._addFailHandlers(e)),e.promise()},_pushImpl:function(t){this.__rawData&&Rw({keyInfo:this,data:this.__rawData,changes:t})},_loadImpl:function(t){let e=new j;return this._loadMode==="raw"?NI(e,this,t,!1):(hB(this,t).done(function(n,i){e.resolve(n,i)}).fail(ba(e)),e=this._addFailHandlers(e)),e.promise()},_byKeyImpl:function(t,e){const n=new j;return this._byKeyViaLoad()?(this._requireKey(),Aj(n,this,t)):Ij(this,t,e).done(function(i){n.resolve(i)}).fail(ba(n)),n.promise()},_byKeyViaLoad:function(){return this._loadMode==="raw"&&!this._byKeyFunc},_insertImpl:function(t){const e=this,n=e._insertFunc;let i;const s=new j;return bd($I,n),i=n.apply(e,[t]),Rc(i)||(i=Ga(i)),vi(i).done(function(r){Me().useLegacyStoreResult?s.resolve(t,r):s.resolve(r||t,e.keyOf(r))}).fail(ba(s)),s.promise()},_updateImpl:function(t,e){const n=this._updateFunc;let i;const s=new j;return bd(FI,n),i=n.apply(this,[t,e]),Rc(i)||(i=Ga(i)),vi(i).done(function(r){Me().useLegacyStoreResult?s.resolve(t,e):s.resolve(r||e,t)}).fail(ba(s)),s.promise()},_removeImpl:function(t){const e=this._removeFunc;let n;const i=new j;return bd(HI,e),n=e.apply(this,[t]),Rc(n)||(n=Ga()),vi(n).done(function(){i.resolve(t)}).fail(ba(i)),i.promise()}});function kj(t){let e=[],n=!1;function i(){for(;e.length;){n=!0;const r=e.shift()();if(r!==void 0){if(r.then){Ne(r).always(i);return}throw Te.Error("E0015")}}n=!1}return{add:function(s,r){e.push(s),n||i()},busy:function(){return n}}}function Mt(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}const Rj=pe(),Oj={getXhr:function(){return new Rj.XMLHttpRequest}},Pj=Rs(Oj),fB=pe(),mB=function(t){const e=W.createElement("script");for(const n in t)e[n]=t[n];return e},gB=function(t){return W.getHead().appendChild(t)},_B=function(t){t.parentNode.removeChild(t)},zI=function(t){const e=mB({text:t});gB(e),_B(e)},Mj=function(t){const e=mB({src:t});return new Promise(function(n,i){const s={load:n,error:i},r=function(o){s[o.type](),_B(e)};for(const o in s)W.listen(e,o,r);gB(e)})};function Lw(t){return(t.method||"GET").toUpperCase()}const Vj=function(t){const e=[];for(const n in t){let i=t[n];i!==void 0&&(i===null&&(i=""),typeof i=="function"&&(i=i()),e.push(encodeURIComponent(n)+"="+encodeURIComponent(i)))}return e.join("&")},Bj=function(t){let e;return t.data&&!t.upload&&Lw(t)!=="GET"&&(e="application/x-www-form-urlencoded;charset=utf-8"),t.contentType||e},Lj=function(t){const e=t.dataType||"*",n="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",i={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",jsonp:n,script:n};return V2(i,t.accepts,!0),i[e]?i[e]+(e!=="*"?", */*; q=0.01":""):i["*"]},$j=function(t){const e=t.headers||{};return e["Content-Type"]=e["Content-Type"]||Bj(t),e.Accept=e.Accept||Lj(t),!t.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest"),e},Fj=function(t){if(t.dataType==="jsonp"){const e=Math.random().toString().replace(/\D/g,""),n=t.jsonpCallback||"dxCallback"+Date.now()+"_"+e,i=t.jsonp||"callback";return t.data=t.data||{},t.data[i]=n,n}},Hj=function(t,e){let n=t.data;const i=typeof n=="string";let s=t.url||fB.location.href;return!i&&!t.cache&&(n=n||{},n._=Date.now()),n&&!t.upload&&(i||(n=Vj(n)),Lw(t)==="GET"?(n!==""&&(s+=(s.indexOf("?")>-1?"&":"?")+n),n=null):e["Content-Type"]&&e["Content-Type"].indexOf("application/x-www-form-urlencoded")>-1&&(n=n.replace(/%20/g,"+"))),{url:s,parameters:n}},Nj=function(t){if(!ae())return!0;let e=!1;const n=W.createElement("a"),i=W.createElement("a");n.href=fB.location.href;try{i.href=t,i.href=i.href,e=n.protocol+"//"+n.host!=i.protocol+"//"+i.host}catch{e=!0}return e},zj=pe(),Ed="success",Cv="error",Wj="timeout",Gj="nocontent",Uj="parsererror",Kj=function(t){return 200<=t&&t<300},jj=function(t){return t!==204},qj=function(t){return t.responseType&&t.responseType!=="text"||typeof t.responseText!="string"?t.response:t.responseText},Yj=function(t,e,n){const i=qj(e);switch(n){case"jsonp":zI(i);break;case"script":zI(i),t.resolve(i,Ed,e);break;case"json":try{t.resolve(JSON.parse(i),Ed,e)}catch(s){t.reject(e,Uj,s)}break;default:t.resolve(i,Ed,e)}},Zj=function(t,e){return t&&setTimeout(function(){e.customStatus=Wj,e.abort()},t)},Qj=function(t){const e=Pj.getXhr(),n=new j,i=n.promise(),s=M(t.async)?t.async:!0,r=t.dataType,o=t.timeout||0;let a;t.crossDomain=Nj(t.url);const l=r==="jsonp"||r==="script";t.cache===void 0&&(t.cache=!l);const c=Fj(t),u=$j(t),d=Hj(t,u),p=d.url,f=d.parameters;if(c&&(zj[c]=function(g){n.resolve(g,Ed,e)}),t.crossDomain&&l){const g=function(){n.reject(e,Cv)},y=function(){r!=="jsonp"&&n.resolve(null,Ed,e)};return Mj(p).then(y,g),i}if(t.crossDomain&&!("withCredentials"in e))return n.reject(e,Cv),i;if(e.open(Lw(t),p,s,t.username,t.password),s&&(e.timeout=o,a=Zj(o,e)),e.onreadystatechange=function(g){e.readyState===4&&(clearTimeout(a),Kj(e.status)?jj(e.status)?Yj(n,e,r):n.resolve(null,Gj,e):n.reject(e,e.customStatus||Cv))},t.upload&&(e.upload.onprogress=t.upload.onprogress,e.upload.onloadstart=t.upload.onloadstart,e.upload.onabort=t.upload.onabort),t.xhrFields)for(const g in t.xhrFields)e[g]=t.xhrFields[g];t.responseType==="arraybuffer"&&(e.responseType=t.responseType);for(const g in u)Object.prototype.hasOwnProperty.call(u,g)&&M(u[g])&&e.setRequestHeader(g,u[g]);return t.beforeSend&&t.beforeSend(e),e.send(f),i.abort=function(){e.abort()},i},Xj=Rs({sendRequest:Qj}),Jj={},yB=function(t,e,n){n=n||[],e=e||{};const i=function(o,a){return{name:o,args:a}},s=function(o){const a=new j;let l,c,u,d,p;const f=function(y){const v=e.errorHandler;v&&v(y),kw(y),a.reject(y)};function g(y){switch(y.name){case"sortBy":return p=[y.args],!0;case"thenBy":if(!p)throw mn.Error("E4004");return p.push(y.args),!0}return!1}try{l=e.adapter,ie(l)||(l=Jj[l]),c=l(e),u=[].concat(n).concat(o);const y=c.optimize;for(y&&y(u);u.length;){if(d=u[0],!g(d)){if(p){u.unshift(i("multiSort",[p])),p=null;continue}if(String(d.name)!=="enumerate"&&(!c[d.name]||c[d.name].apply(c,d.args)===!1))break}u.shift()}(function(){const v=u[0],C=[];v&&v.name==="multiSort"&&(u.shift(),N(v.args[0],function(){C.push(i(C.length?"thenBy":"sortBy",this))})),u=C.concat(u)})(),c.exec(t).done(function(v,C){if(!u.length)a.resolve(v,C);else{let x=jh(v,{errorHandler:e.errorHandler});N(u,function(){x=x[this.name].apply(x,this.args)}),x.done(a.resolve).fail(a.reject)}}).fail(f)}catch(y){f(y)}return a.promise()},r={};return N(["sortBy","thenBy","filter","slice","select","groupBy"],function(){const o=String(this);r[o]=function(){return yB(t,e,n.concat(i(o,arguments)))}}),N(["count","min","max","sum","avg","aggregate","enumerate"],function(){const o=String(this);r[o]=function(){return s.call(this,i(o,arguments))}}),r},e3={array:jh,remote:yB},As=function(){const t=Array.isArray(arguments[0])?"array":"remote";return e3[t].apply(this,arguments)},$w=Pr.inherit({ctor:function(t){Array.isArray(t)?t={data:t}:t=t||{},this.callBase(t);const e=t.data;if(e&&!Array.isArray(e))throw mn.Error("E4006");this._array=e||[]},createQuery:function(){return As(this._array,{errorHandler:this._errorHandler})},_byKeyImpl:function(t){const e=sl(this,this._array,t);return e===-1?iB(mn.Error("E4009")):kc(this._array[e])},_insertImpl:function(t){return Pw(this,this._array,t)},_pushImpl:function(t){Rw({keyInfo:this,data:this._array,changes:t})},_updateImpl:function(t,e){return Ow(this,this._array,t,e)},_removeImpl:function(t){return aB(this,this._array,t)},clear:function(){this._eventsStrategy.fireEvent("modifying"),this._array=[],this._eventsStrategy.fireEvent("modified")}},"array"),t3=["items"],vB="canceled",WI=t=>t.state()==="pending",GI=t=>{switch(t.length){case 0:return;case 1:return t[0]}return[].slice.call(t)},n3=(t,e,n)=>Yn(t,i=>{const s=Mt(i,t3);return L({},s,{items:CB(i.items,e-1,n)})}),CB=(t,e,n)=>Array.isArray(t)?e?n3(t,e,n):Yn(t,n):t,i3=(t,e,n)=>{const i=n?OD(n).length:0;return CB(t,i,e)},Fw=(t,e)=>{var n;return(n=t)!==null&&n!==void 0&&n.data&&(e=t,t=t.data),Array.isArray(t)||(t=[t]),{data:t,extra:e}},s3=t=>{const e={};return N(["useDefaultSearch","key","load","loadMode","cacheRawData","byKey","lookup","totalCount","insert","update","remove"],function(){e[this]=t[this],delete t[this]}),new Bw(e)},r3=t=>{const e=t.type;return delete t.type,Pr.create(e,t)},o3=(t,e)=>new Bw({load:()=>Xj.sendRequest({url:t,dataType:"json"}),loadMode:e==null?void 0:e.fromUrlLoadMode}),p_=(t,e)=>{let n;return typeof t=="string"&&(t={paginate:!1,store:o3(t,e)}),t===void 0&&(t=[]),Array.isArray(t)||t instanceof Pr?t={store:t}:t=T({},t),t.store===void 0&&(t.store=[]),n=t.store,"load"in t?n=s3(t):Array.isArray(n)?n=new $w(n):Ce(n)&&(n=r3(T({},n))),t.store=n,t};class a3{constructor(){this._counter=-1,this._deferreds={}}add(e){return this._counter++,this._deferreds[this._counter]=e,this._counter}remove(e){return delete this._deferreds[e]}cancel(e){return e in this._deferreds?(this._deferreds[e].reject(vB),!0):!1}cancelAll(){for(;this._counter>-1;)this.cancel(this._counter),this._counter--}}const Zs=ze.inherit({ctor(t){if(t=p_(t),this._eventsStrategy=new yl(this,{syncStrategy:!0}),this._store=t.store,this._changedTime=0,t.pushAggregationTimeout!==0){const n=t.pushAggregationTimeout===void 0?()=>5*this._changedTime:t.pushAggregationTimeout;let i,s;const r=pj(o=>{i.resolve(),Ne(...s).done(()=>this._onPush(o)),s=void 0,i=void 0},n);this._onPushHandler=o=>{this._aggregationTimeoutId=r(o.changes),i||(i=new j),s=o.waitFor,o.waitFor.push(i.promise())},this._store.on("beforePushAggregation",this._onPushHandler)}else this._onPushHandler=n=>this._onPush(n),this._store.on("push",this._onPushHandler);this._storeLoadOptions=this._extractLoadOptions(t),this._mapFunc=t.map,this._postProcessFunc=t.postProcess,this._pageIndex=t.pageIndex!==void 0?t.pageIndex:0,this._pageSize=t.pageSize!==void 0?t.pageSize:20,this._loadingCount=0,this._loadQueue=this._createLoadQueue(),this._searchValue="searchValue"in t?t.searchValue:null,this._searchOperation=t.searchOperation||"contains",this._searchExpr=t.searchExpr,this._paginate=t.paginate,this._reshapeOnPush=t.reshapeOnPush??!1,N(["onChanged","onLoadError","onLoadingChanged","onCustomizeLoadResult","onCustomizeStoreLoadOptions"],(n,i)=>{i in t&&this.on(i.substr(2,1).toLowerCase()+i.substr(3),t[i])}),this._operationManager=new a3,this._init()},_init(){this._items=[],this._userData={},this._totalCount=-1,this._isLoaded=!1,M(this._paginate)||(this._paginate=!this.group()),this._isLastPage=!this._paginate},dispose(){var t;this._store.off("beforePushAggregation",this._onPushHandler),this._store.off("push",this._onPushHandler),this._eventsStrategy.dispose(),clearTimeout(this._aggregationTimeoutId),(t=this._delayedLoadTask)===null||t===void 0||t.abort(),this._operationManager.cancelAll(),delete this._store,delete this._items,delete this._delayedLoadTask,this._disposed=!0},_extractLoadOptions(t){const e={};let n=["sort","filter","langParams","select","group","requireTotalCount"];const i=this._store._customLoadOptions();return i&&(n=n.concat(i)),N(n,function(){e[this]=t[this]}),e},loadOptions(){return this._storeLoadOptions},items(){return this._items},pageIndex(t){if(!ut(t))return this._pageIndex;this._pageIndex=t,this._isLastPage=!this._paginate},paginate(t){if(!CD(t))return this._paginate;this._paginate!==t&&(this._paginate=t,this.pageIndex(0))},pageSize(t){if(!ut(t))return this._pageSize;this._pageSize=t},isLastPage(){return this._isLastPage},generateStoreLoadOptionAccessor(t){return e=>{const n=GI(e);if(n===void 0)return this._storeLoadOptions[t];this._storeLoadOptions[t]=n}},sort(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.generateStoreLoadOptionAccessor("sort")(e)},filter(){const t=GI(arguments);if(t===void 0)return this._storeLoadOptions.filter;this._storeLoadOptions.filter=t,this.pageIndex(0)},group(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.generateStoreLoadOptionAccessor("group")(e)},select(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.generateStoreLoadOptionAccessor("select")(e)},requireTotalCount(t){if(!CD(t))return this._storeLoadOptions.requireTotalCount;this._storeLoadOptions.requireTotalCount=t},searchValue(t){if(arguments.length<1)return this._searchValue;this._searchValue=t,this.pageIndex(0)},searchOperation(t){if(!ve(t))return this._searchOperation;this._searchOperation=t,this.pageIndex(0)},searchExpr(t){const e=arguments.length;if(e===0)return this._searchExpr;e>1&&(t=[].slice.call(arguments)),this._searchExpr=t,this.pageIndex(0)},store(){return this._store},key(){var t;return(t=this._store)===null||t===void 0?void 0:t.key()},totalCount(){return this._totalCount},isLoaded(){return this._isLoaded},isLoading(){return this._loadingCount>0},beginLoading(){this._changeLoadingCount(1)},endLoading(){this._changeLoadingCount(-1)},_createLoadQueue:()=>kj(),_changeLoadingCount(t){const e=this.isLoading();this._loadingCount+=t;const n=this.isLoading();e^n&&this._eventsStrategy.fireEvent("loadingChanged",[n])},_scheduleLoadCallbacks(t){this.beginLoading(),t.always(()=>{this.endLoading()})},_scheduleFailCallbacks(t){var e=this;t.fail(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];i[0]!==vB&&e._eventsStrategy.fireEvent("loadError",i)})},_fireChanged(t){const e=new Date;this._eventsStrategy.fireEvent("changed",t),this._changedTime=new Date-e},_scheduleChangedCallbacks(t){t.done(()=>this._fireChanged())},loadSingle(t,e){const n=new j,i=this.key(),s=this._store,r=this._createStoreLoadOptions();return this._scheduleFailCallbacks(n),arguments.length<2&&(e=t,t=i),delete r.skip,delete r.group,delete r.refresh,delete r.pageIndex,delete r.searchString,(t===i||s instanceof Bw&&!s._byKeyViaLoad()?s.byKey(e,r):(r.take=1,r.filter=r.filter?[r.filter,[t,e]]:[t,e],s.load(r))).fail(n.reject).done(o=>{const a=Array.isArray(o)&&!o.length;!M(o)||a?n.reject(new mn.Error("E4009")):(Array.isArray(o)||(o=[o]),n.resolve(this._applyMapFunction(o)[0]))}),n.promise()},load(){const t=new j,e=()=>{if(!this._disposed&&WI(t))return this._loadFromStore(n,t)};this._scheduleLoadCallbacks(t),this._scheduleFailCallbacks(t),this._scheduleChangedCallbacks(t);const n=this._createLoadOperation(t);return this._eventsStrategy.fireEvent("customizeStoreLoadOptions",[n]),this._loadQueue.add(()=>(typeof n.delay=="number"?this._delayedLoadTask=iV(e,n.delay):e(),t.promise())),t.promise({operationId:n.operationId})},_onPush(t){if(this._reshapeOnPush)this.load();else{const e={changes:t};this._eventsStrategy.fireEvent("changing",[e]);const n=this.group(),i=this.items();let s=0,r=this.paginate()||n?t.filter(o=>o.type==="update"):t;n&&(s=Array.isArray(n)?n.length:1),this._mapFunc&&r.forEach(o=>{o.type==="insert"&&(o.data=this._mapFunc(o.data))}),e.postProcessChanges&&(r=e.postProcessChanges(r)),Rw({keyInfo:this.store(),data:i,changes:r,groupCount:s,useInsertIndex:!0}),this._fireChanged([{changes:t}])}},_createLoadOperation(t){const e=this._operationManager.add(t),n=this._createStoreLoadOptions();return this._store&&!ti(n==null?void 0:n.langParams)&&(this._store._langParams=L({},this._store._langParams,n.langParams)),t.always(()=>this._operationManager.remove(e)),{operationId:e,storeLoadOptions:n}},reload(){return this.store()._clearCache(),this._init(),this.load()},cancel(t){return this._operationManager.cancel(t)},cancelAll(){return this._operationManager.cancelAll()},_addSearchOptions(t){this._disposed||(this.store()._useDefaultSearch?this._addSearchFilter(t):(t.searchOperation=this._searchOperation,t.searchValue=this._searchValue,t.searchExpr=this._searchExpr))},_createStoreLoadOptions(){const t=T({},this._storeLoadOptions);return this._addSearchOptions(t),this._paginate&&this._pageSize&&(t.skip=this._pageIndex*this._pageSize,t.take=this._pageSize),t.userData=this._userData,t},_addSearchFilter(t){const e=this._searchValue,n=this._searchOperation;let i=this._searchExpr;const s=[];e&&(i||(i="this"),Array.isArray(i)||(i=[i]),N(i,function(r,o){s.length&&s.push("or"),s.push([o,n,e])}),t.filter?t.filter=[s,t.filter]:t.filter=s)},_loadFromStore(t,e){const n=(i,s)=>{if(this._disposed||!WI(e))return;const r=T(Fw(i,s),t);this._eventsStrategy.fireEvent("customizeLoadResult",[r]),Ne(r.data).done(o=>{r.data=o,this._processStoreLoadResult(r,e)}).fail(e.reject)};return t.data?new j().resolve(t.data).done(n):this.store().load(t.storeLoadOptions).done(n).fail(e.reject)},_processStoreLoadResult(t,e){let n=t.data,i=t.extra;const s=t.storeLoadOptions,r=()=>(this._isLoaded=!0,this._totalCount=isFinite(i.totalCount)?i.totalCount:-1,e.resolve(n,i)),o=()=>{this.store().totalCount(s).done(function(a){i.totalCount=a,r()}).fail(e.reject)};this._disposed||(n=this._applyPostProcessFunction(this._applyMapFunction(n)),ue(i)||(i={}),this._items=n,(!n.length||!this._paginate||this._pageSize&&n.length<this._pageSize)&&(this._isLastPage=!0),s.requireTotalCount&&!isFinite(i.totalCount)?o():r())},_applyMapFunction(t){return this._mapFunc?i3(t,this._mapFunc,this.group()):t},_applyPostProcessFunction(t){return this._postProcessFunc?this._postProcessFunc(t):t},on(t,e){return this._eventsStrategy.on(t,e),this},off(t,e){return this._eventsStrategy.off(t,e),this}}),l3={load:()=>j().reject(),loadSingle:()=>j().reject(),loadFromStore:()=>j().reject(),loadNextPage:()=>j().reject(),loadOptions:B,userData:B,cancel:B,cancelAll:B,filter:B,addSearchFilter:B,group:B,paginate:B,pageSize:B,pageIndex:B,resetDataSourcePageIndex:B,totalCount:B,isLastPage:B,isLoading:B,isLoaded:B,searchValue:B,searchOperation:B,searchExpr:B,select:B,key:B,keyOf:B,store:B,items:B,applyMapFunction:B,getDataSource:B,reload:B,on:B,off:B};let c3=class{constructor(e){if(!e)return l3;this._dataSource=e}load(){return this._dataSource.load()}loadSingle(e,n){return arguments.length<2&&(n=e,e=this.key()),this._dataSource.loadSingle(e,n)}loadFromStore(e){return this.store().load(e)}loadNextPage(){return this.pageIndex(1+this.pageIndex()),this.load()}loadOptions(){return this._dataSource.loadOptions()}userData(){return this._dataSource._userData}cancel(e){this._dataSource.cancel(e)}cancelAll(){this._dataSource.cancelAll()}filter(e){return this._dataSource.filter(e)}addSearchFilter(e){this._dataSource._addSearchFilter(e)}group(e){return this._dataSource.group(e)}paginate(){return this._dataSource.paginate()}pageSize(){return this._dataSource._pageSize}pageIndex(e){return this._dataSource.pageIndex(e)}resetDataSourcePageIndex(){this.pageIndex()&&(this.pageIndex(0),this.load())}totalCount(){return this._dataSource.totalCount()}isLastPage(){return this._dataSource.isLastPage()||!this._dataSource._pageSize}isLoading(){return this._dataSource.isLoading()}isLoaded(){return this._dataSource.isLoaded()}searchValue(e){return arguments.length?this._dataSource.searchValue(e):this._dataSource.searchValue()}searchOperation(e){return this._dataSource.searchOperation(e)}searchExpr(e){return arguments.length?this._dataSource.searchExpr(e):this._dataSource.searchExpr()}select(){return this._dataSource.select(...arguments)}key(){return this._dataSource.key()}keyOf(e){return this.store().keyOf(e)}store(){return this._dataSource.store()}items(){return this._dataSource.items()}applyMapFunction(e){return this._dataSource._applyMapFunction(e)}getDataSource(){return this._dataSource||null}reload(){return this._dataSource.reload()}on(e,n){this._dataSource.on(e,n)}off(e,n){this._dataSource.off(e,n)}};const UI="_dataSourceChangedHandler",KI="_getSpecificDataSourceOption",jI="_normalizeDataSource",Hw={postCtor:function(){this.on("disposing",(function(){this._disposeDataSource()}).bind(this))},_refreshDataSource:function(){this._initDataSource(),this._loadDataSource()},_initDataSource:function(){let t=KI in this?this[KI]():this.option("dataSource"),e,n;this._disposeDataSource(),t&&(t instanceof Zs?(this._isSharedDataSource=!0,this._dataSource=t):(e="_dataSourceOptions"in this?this._dataSourceOptions():{},n=this._dataSourceType?this._dataSourceType():Zs,t=p_(t,{fromUrlLoadMode:"_dataSourceFromUrlLoadMode"in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new n(T(!0,{},e,t))),jI in this&&(this._dataSource=this[jI](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())},_initDataController:function(){var t;const e=(t=this.option)===null||t===void 0?void 0:t.call(this,"_dataController"),n=this._dataSource;e?this._dataController=e:this._dataController=new c3(n)},_addDataSourceHandlers:function(){UI in this&&this._addDataSourceChangeHandler(),"_dataSourceLoadErrorHandler"in this&&this._addDataSourceLoadErrorHandler(),"_dataSourceLoadingChangedHandler"in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()},_addReadyWatcher:function(){this.readyWatcher=(function(t){this._ready&&this._ready(!t)}).bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)},_addDataSourceChangeHandler:function(){const t=this._dataSource;this._proxiedDataSourceChangedHandler=(function(e){this[UI](t.items(),e)}).bind(this),t.on("changed",this._proxiedDataSourceChangedHandler)},_addDataSourceLoadErrorHandler:function(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)},_addDataSourceLoadingChangedHandler:function(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)},_loadDataSource:function(){const t=this._dataSource;t&&(t.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():t.load())},_loadSingle:function(t,e){return t=t==="this"?this._dataSource.key()||"this":t,this._dataSource.loadSingle(t,e)},_isLastPage:function(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize},_isDataSourceLoading:function(){return this._dataSource&&this._dataSource.isLoading()},_disposeDataSource:function(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)},getDataSource:function(){return this._dataSource||null}},u3=10;function d3(t){return il(t)*Math.round(Math.abs(t))}function h3(t,e){const n=Math.pow(u3,e),i=MV(t,e);return d3(i)/n}function DB(t,e){const n=e||0;return(n>0?h3(...arguments):t).toFixed(n)}const p3={thousandsSeparator:",",decimalSeparator:"."},qI="'";function f3(t){return t.split(",").slice(1).map(function(e){let n=0;return e.split("").filter(function(i,s){n+=i==="'";const r=i==="#"||i==="0",o=n%2;return r&&!o}).length})}function m3(t){const e=t.split(";");return e.length===1&&e.push("-"+e[0]),e}function Dv(t){return t.toString().split("").reverse().join("")}function g3(t){return t.indexOf("%")!==-1&&!t.match(/'[^']*%[^']*'/g)}function xB(t){return t.replace(/'.+'/g,"")}function YI(t){if(!t)return 0;const e=xB(t);return e.length-e.replace(/[#]/g,"").length}function ZI(t){if(!t)return 0;const e=xB(t);return e.length-e.replace(/[0]/g,"").length}function QI(t,e,n){if(!t)return"";for(t.length>n&&(t=t.substr(0,n));t.length>e&&t.slice(-1)==="0";)t=t.substr(0,t.length-1);for(;t.length<e;)t+="0";return t}function _3(t,e,n){if(!e.length)return t;const i=[];let s=0;for(;t;){const r=e[s];if(!r)break;i.push(t.slice(0,r)),t=t.slice(r),s<e.length-1&&s++}return i.join(n)}function XI(t,e){return t.split(qI).map(function(n,i){const s=i%2;return!n&&s?qI:s?n:n.replace(/[,#0]+/,e)}).join("")}function y3(t){let e=!1;for(let n=0;n<t.length;n++)if(t[n]==="'"&&(e=!e),t[n]==="."&&!e)return n;return t.length}function v3(t,e){return e=e||p3,function(n){if(typeof n!="number"||isNaN(n))return"";const i=m3(t),s=1/n===1/0,r=n>0||s,o=i[r?0:1],a=y3(o),l=[o.substr(0,a),o.substr(a+1)],c=ZI(l[1]),u=c+YI(l[1]);g3(o)&&(n=MV(n,2)),r||(n=-n);const d=ZI(l[0]),p=YI(l[0])||e.unlimitedIntegerDigits?void 0:d,f=Math.floor(n).toString().length,g=pn(u,0,15-f),y=f3(l[0]).reverse(),v=DB(n,g<0?0:g).split(".");let C=QI(Dv(v[0]),d,p);const x=QI(v[1],c,u);C=_3(C,y,e.thousandsSeparator);const S=Dv(XI(Dv(l[0]),C)),O=u?XI(l[1],x):"";return S+(O.match(/\d/)?e.decimalSeparator:"")+O}}function Td(t,e,n){const i=(e?.01:1)*parseFloat(t)||0;return n?-i:i}function JI(t,e,n,i){let s=t,r,o,a;do a&&(r=o.length===a.length?"0":"1",t=i?r+t:t+r),o=a||e(Td(s,n)),s=i?"1"+s:s+"1",a=e(Td(s,n));while(o!==a&&(i?o.length===a.length:o.length<=a.length));if(i&&a.length>o.length){const l=e(12345).indexOf("12345")===-1;do t="1"+t;while(l&&Td(t,n)<1e5)}return t}function eA(t,e,n,i){let s=e(Td(t,n,i));const r=t.split("."),o=r[0]+".3"+r[1].slice(1),a=Td(o,n,i),l=e(a).indexOf("3")-1;return s=s.replace(/(\d)\D(\d)/g,"$1,$2"),l>=0&&(s=s.slice(0,l)+"."+s.slice(l+1)),s=s.replace(/1+/,"1").replace(/1/g,"#"),n||(s=s.replace(/%/g,"'%'")),s}function C3(t){let e=".";const n=t(1).indexOf("100")>=0;e=JI(e,t,n,!0),e=JI(e,t,n,!1);const i=eA(e,t,n,!1),s=eA(e,t,n,!0);return s==="-"+i?i:i+";"+s}const D3={_formatNumberCore:function(t,e,n){if(e==="currency"){n.precision=n.precision||0;let i=this.format(t,T({},n,{type:"fixedpoint"}));const s=this.getCurrencySymbol().symbol.replace(/\$/g,"$$$$");return i=i.replace(/^(\D*)(\d.*)/,"$1"+s+"$2"),i}return this.callBase.apply(this,arguments)},getCurrencySymbol:function(){return{symbol:"$"}},getOpenXmlCurrencyFormat:function(){return"$#,##0{0}_);\\($#,##0{0}\\)"}},x3={"en-150":"en-001","en-AG":"en-001","en-AI":"en-001","en-AU":"en-001","en-BB":"en-001","en-BM":"en-001","en-BS":"en-001","en-BW":"en-001","en-BZ":"en-001","en-CC":"en-001","en-CK":"en-001","en-CM":"en-001","en-CX":"en-001","en-CY":"en-001","en-DG":"en-001","en-DM":"en-001","en-ER":"en-001","en-FJ":"en-001","en-FK":"en-001","en-FM":"en-001","en-GB":"en-001","en-GD":"en-001","en-GG":"en-001","en-GH":"en-001","en-GI":"en-001","en-GM":"en-001","en-GY":"en-001","en-HK":"en-001","en-IE":"en-001","en-IL":"en-001","en-IM":"en-001","en-IN":"en-001","en-IO":"en-001","en-JE":"en-001","en-JM":"en-001","en-KE":"en-001","en-KI":"en-001","en-KN":"en-001","en-KY":"en-001","en-LC":"en-001","en-LR":"en-001","en-LS":"en-001","en-MG":"en-001","en-MO":"en-001","en-MS":"en-001","en-MT":"en-001","en-MU":"en-001","en-MV":"en-001","en-MW":"en-001","en-MY":"en-001","en-NA":"en-001","en-NF":"en-001","en-NG":"en-001","en-NR":"en-001","en-NU":"en-001","en-NZ":"en-001","en-PG":"en-001","en-PK":"en-001","en-PN":"en-001","en-PW":"en-001","en-RW":"en-001","en-SB":"en-001","en-SC":"en-001","en-SD":"en-001","en-SG":"en-001","en-SH":"en-001","en-SL":"en-001","en-SS":"en-001","en-SX":"en-001","en-SZ":"en-001","en-TC":"en-001","en-TK":"en-001","en-TO":"en-001","en-TT":"en-001","en-TV":"en-001","en-TZ":"en-001","en-UG":"en-001","en-VC":"en-001","en-VG":"en-001","en-VU":"en-001","en-WS":"en-001","en-ZA":"en-001","en-ZM":"en-001","en-ZW":"en-001","en-AT":"en-150","en-BE":"en-150","en-CH":"en-150","en-DE":"en-150","en-DK":"en-150","en-FI":"en-150","en-NL":"en-150","en-SE":"en-150","en-SI":"en-150","hi-Latn":"en-IN","es-AR":"es-419","es-BO":"es-419","es-BR":"es-419","es-BZ":"es-419","es-CL":"es-419","es-CO":"es-419","es-CR":"es-419","es-CU":"es-419","es-DO":"es-419","es-EC":"es-419","es-GT":"es-419","es-HN":"es-419","es-MX":"es-419","es-NI":"es-419","es-PA":"es-419","es-PE":"es-419","es-PR":"es-419","es-PY":"es-419","es-SV":"es-419","es-US":"es-419","es-UY":"es-419","es-VE":"es-419",nb:"no",nn:"no","pt-AO":"pt-PT","pt-CH":"pt-PT","pt-CV":"pt-PT","pt-FR":"pt-PT","pt-GQ":"pt-PT","pt-GW":"pt-PT","pt-LU":"pt-PT","pt-MO":"pt-PT","pt-MZ":"pt-PT","pt-ST":"pt-PT","pt-TL":"pt-PT","az-Arab":"und","az-Cyrl":"und","bal-Latn":"und","blt-Latn":"und","bm-Nkoo":"und","bs-Cyrl":"und","byn-Latn":"und","cu-Glag":"und","dje-Arab":"und","dyo-Arab":"und","en-Dsrt":"und","en-Shaw":"und","ff-Adlm":"und","ff-Arab":"und","ha-Arab":"und","iu-Latn":"und","kk-Arab":"und","ks-Deva":"und","ku-Arab":"und","ky-Arab":"und","ky-Latn":"und","ml-Arab":"und","mn-Mong":"und","mni-Mtei":"und","ms-Arab":"und","pa-Arab":"und","sat-Deva":"und","sd-Deva":"und","sd-Khoj":"und","sd-Sind":"und","shi-Latn":"und","so-Arab":"und","sr-Latn":"und","sw-Arab":"und","tg-Arab":"und","ug-Cyrl":"und","uz-Arab":"und","uz-Cyrl":"und","vai-Latn":"und","wo-Arab":"und","yo-Arab":"und","yue-Hans":"und","zh-Hant":"und","zh-Hant-MO":"zh-Hant-HK"},w3=(t,e)=>{const n=t[e];return n?n!=="root"&&n:e.substr(0,e.lastIndexOf("-"))},Di=Rs({locale:(()=>{let t="en";return e=>{if(!e)return t;t=e}})(),getValueByClosestLocale:function(t){let e=this.locale(),n=t(e),i;for(;!n&&!i;)e=w3(x3,e),e?n=t(e):i=!0;return n===void 0&&e!=="en"?t("en"):n}}),S3=(t,e)=>{if(!e)return;let n=t;if(typeof t=="string"){n="";for(let r=0;r<t.length;r++)t[r]!=="$"&&(n+="\\"),n+=t[r]}const i={".00":"{0}","'":"\\'","\\(":"\\(","\\)":"\\)"," ":"\\ ",'"':"&quot;","\\¤":n},s=e.split(";");for(let r=0;r<s.length;r++)for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[r]=s[r].replace(new RegExp(o,"g"),i[o]));return s.length===2?s[0]+"_);"+s[1]:s[0]},b3={af:"¤#,##0.00;(¤#,##0.00)","af-NA":"¤#,##0.00;(¤#,##0.00)",agq:"#,##0.00¤",ak:"¤#,##0.00",am:"¤#,##0.00;(¤#,##0.00)",ar:"¤#,##0.00;(¤#,##0.00)","ar-AE":"¤#,##0.00;(¤#,##0.00)","ar-BH":"¤#,##0.00;(¤#,##0.00)","ar-DJ":"¤#,##0.00;(¤#,##0.00)","ar-DZ":"¤#,##0.00;(¤#,##0.00)","ar-EG":"¤#,##0.00;(¤#,##0.00)","ar-EH":"¤#,##0.00;(¤#,##0.00)","ar-ER":"¤#,##0.00;(¤#,##0.00)","ar-IL":"¤#,##0.00;(¤#,##0.00)","ar-IQ":"¤#,##0.00;(¤#,##0.00)","ar-JO":"¤#,##0.00;(¤#,##0.00)","ar-KM":"¤#,##0.00;(¤#,##0.00)","ar-KW":"¤#,##0.00;(¤#,##0.00)","ar-LB":"¤#,##0.00;(¤#,##0.00)","ar-LY":"¤#,##0.00;(¤#,##0.00)","ar-MA":"¤#,##0.00;(¤#,##0.00)","ar-MR":"¤#,##0.00;(¤#,##0.00)","ar-OM":"¤#,##0.00;(¤#,##0.00)","ar-PS":"¤#,##0.00;(¤#,##0.00)","ar-QA":"¤#,##0.00;(¤#,##0.00)","ar-SA":"¤#,##0.00;(¤#,##0.00)","ar-SD":"¤#,##0.00;(¤#,##0.00)","ar-SO":"¤#,##0.00;(¤#,##0.00)","ar-SS":"¤#,##0.00;(¤#,##0.00)","ar-SY":"¤#,##0.00;(¤#,##0.00)","ar-TD":"¤#,##0.00;(¤#,##0.00)","ar-TN":"¤#,##0.00;(¤#,##0.00)","ar-YE":"¤#,##0.00;(¤#,##0.00)",as:"¤ #,##,##0.00",asa:"#,##0.00 ¤",ast:"#,##0.00 ¤",az:"#,##0.00 ¤","az-Cyrl":"#,##0.00 ¤","az-Latn":"#,##0.00 ¤",bas:"#,##0.00 ¤",be:"#,##0.00 ¤","be-tarask":"#,##0.00 ¤",bem:"¤#,##0.00;(¤#,##0.00)",bez:"#,##0.00¤",bg:"0.00 ¤;(0.00 ¤)",bm:"¤#,##0.00;(¤#,##0.00)",bn:"#,##,##0.00¤;(#,##,##0.00¤)","bn-IN":"#,##,##0.00¤;(#,##,##0.00¤)",bo:"¤ #,##0.00","bo-IN":"¤ #,##0.00",br:"#,##0.00 ¤",brx:"¤ #,##,##0.00",bs:"#,##0.00 ¤","bs-Cyrl":"#,##0.00 ¤","bs-Latn":"#,##0.00 ¤",ca:"#,##0.00 ¤;(#,##0.00 ¤)","ca-AD":"#,##0.00 ¤;(#,##0.00 ¤)","ca-ES-valencia":"#,##0.00 ¤;(#,##0.00 ¤)","ca-FR":"#,##0.00 ¤;(#,##0.00 ¤)","ca-IT":"#,##0.00 ¤;(#,##0.00 ¤)",ccp:"#,##,##0.00¤;(#,##,##0.00¤)","ccp-IN":"#,##,##0.00¤;(#,##,##0.00¤)",ce:"#,##0.00 ¤",ceb:"¤#,##0.00;(¤#,##0.00)",cgg:"¤#,##0.00",chr:"¤#,##0.00;(¤#,##0.00)",ckb:"¤ #,##0.00","ckb-IR":"¤ #,##0.00",cs:"#,##0.00 ¤",cy:"¤#,##0.00;(¤#,##0.00)",da:"#,##0.00 ¤","da-GL":"#,##0.00 ¤",dav:"¤#,##0.00;(¤#,##0.00)",de:"#,##0.00 ¤","de-AT":"#,##0.00 ¤","de-BE":"#,##0.00 ¤","de-CH":"#,##0.00 ¤","de-IT":"#,##0.00 ¤","de-LI":"#,##0.00 ¤","de-LU":"#,##0.00 ¤",dje:"#,##0.00¤",doi:"¤#,##0.00",dsb:"#,##0.00 ¤",dua:"#,##0.00 ¤",dyo:"#,##0.00 ¤",dz:"¤#,##,##0.00",ebu:"¤#,##0.00;(¤#,##0.00)",ee:"¤#,##0.00;(¤#,##0.00)","ee-TG":"¤#,##0.00;(¤#,##0.00)",el:"#,##0.00 ¤","el-CY":"#,##0.00 ¤",en:"¤#,##0.00;(¤#,##0.00)","en-001":"¤#,##0.00;(¤#,##0.00)","en-150":"#,##0.00 ¤","en-AE":"¤#,##0.00;(¤#,##0.00)","en-AG":"¤#,##0.00;(¤#,##0.00)","en-AI":"¤#,##0.00;(¤#,##0.00)","en-AS":"¤#,##0.00;(¤#,##0.00)","en-AT":"¤ #,##0.00","en-AU":"¤#,##0.00;(¤#,##0.00)","en-BB":"¤#,##0.00;(¤#,##0.00)","en-BE":"#,##0.00 ¤","en-BI":"¤#,##0.00;(¤#,##0.00)","en-BM":"¤#,##0.00;(¤#,##0.00)","en-BS":"¤#,##0.00;(¤#,##0.00)","en-BW":"¤#,##0.00;(¤#,##0.00)","en-BZ":"¤#,##0.00;(¤#,##0.00)","en-CA":"¤#,##0.00;(¤#,##0.00)","en-CC":"¤#,##0.00;(¤#,##0.00)","en-CH":"¤ #,##0.00;¤-#,##0.00","en-CK":"¤#,##0.00;(¤#,##0.00)","en-CM":"¤#,##0.00;(¤#,##0.00)","en-CX":"¤#,##0.00;(¤#,##0.00)","en-CY":"¤#,##0.00;(¤#,##0.00)","en-DE":"#,##0.00 ¤","en-DG":"¤#,##0.00;(¤#,##0.00)","en-DK":"#,##0.00 ¤","en-DM":"¤#,##0.00;(¤#,##0.00)","en-ER":"¤#,##0.00;(¤#,##0.00)","en-FI":"#,##0.00 ¤","en-FJ":"¤#,##0.00;(¤#,##0.00)","en-FK":"¤#,##0.00;(¤#,##0.00)","en-FM":"¤#,##0.00;(¤#,##0.00)","en-GB":"¤#,##0.00;(¤#,##0.00)","en-GD":"¤#,##0.00;(¤#,##0.00)","en-GG":"¤#,##0.00;(¤#,##0.00)","en-GH":"¤#,##0.00;(¤#,##0.00)","en-GI":"¤#,##0.00;(¤#,##0.00)","en-GM":"¤#,##0.00;(¤#,##0.00)","en-GU":"¤#,##0.00;(¤#,##0.00)","en-GY":"¤#,##0.00;(¤#,##0.00)","en-HK":"¤#,##0.00;(¤#,##0.00)","en-IE":"¤#,##0.00;(¤#,##0.00)","en-IL":"¤#,##0.00;(¤#,##0.00)","en-IM":"¤#,##0.00;(¤#,##0.00)","en-IN":"¤#,##0.00;(¤#,##0.00)","en-IO":"¤#,##0.00;(¤#,##0.00)","en-JE":"¤#,##0.00;(¤#,##0.00)","en-JM":"¤#,##0.00;(¤#,##0.00)","en-KE":"¤#,##0.00;(¤#,##0.00)","en-KI":"¤#,##0.00;(¤#,##0.00)","en-KN":"¤#,##0.00;(¤#,##0.00)","en-KY":"¤#,##0.00;(¤#,##0.00)","en-LC":"¤#,##0.00;(¤#,##0.00)","en-LR":"¤#,##0.00;(¤#,##0.00)","en-LS":"¤#,##0.00;(¤#,##0.00)","en-MG":"¤#,##0.00;(¤#,##0.00)","en-MH":"¤#,##0.00;(¤#,##0.00)","en-MO":"¤#,##0.00;(¤#,##0.00)","en-MP":"¤#,##0.00;(¤#,##0.00)","en-MS":"¤#,##0.00;(¤#,##0.00)","en-MT":"¤#,##0.00;(¤#,##0.00)","en-MU":"¤#,##0.00;(¤#,##0.00)","en-MV":"¤ #,##0.00","en-MW":"¤#,##0.00;(¤#,##0.00)","en-MY":"¤#,##0.00;(¤#,##0.00)","en-NA":"¤#,##0.00;(¤#,##0.00)","en-NF":"¤#,##0.00;(¤#,##0.00)","en-NG":"¤#,##0.00;(¤#,##0.00)","en-NL":"¤ #,##0.00;(¤ #,##0.00)","en-NR":"¤#,##0.00;(¤#,##0.00)","en-NU":"¤#,##0.00;(¤#,##0.00)","en-NZ":"¤#,##0.00;(¤#,##0.00)","en-PG":"¤#,##0.00;(¤#,##0.00)","en-PH":"¤#,##0.00;(¤#,##0.00)","en-PK":"¤#,##0.00;(¤#,##0.00)","en-PN":"¤#,##0.00;(¤#,##0.00)","en-PR":"¤#,##0.00;(¤#,##0.00)","en-PW":"¤#,##0.00;(¤#,##0.00)","en-RW":"¤#,##0.00;(¤#,##0.00)","en-SB":"¤#,##0.00;(¤#,##0.00)","en-SC":"¤#,##0.00;(¤#,##0.00)","en-SD":"¤#,##0.00;(¤#,##0.00)","en-SE":"#,##0.00 ¤","en-SG":"¤#,##0.00;(¤#,##0.00)","en-SH":"¤#,##0.00;(¤#,##0.00)","en-SI":"#,##0.00 ¤;(#,##0.00 ¤)","en-SL":"¤#,##0.00;(¤#,##0.00)","en-SS":"¤#,##0.00;(¤#,##0.00)","en-SX":"¤#,##0.00;(¤#,##0.00)","en-SZ":"¤#,##0.00;(¤#,##0.00)","en-TC":"¤#,##0.00;(¤#,##0.00)","en-TK":"¤#,##0.00;(¤#,##0.00)","en-TO":"¤#,##0.00;(¤#,##0.00)","en-TT":"¤#,##0.00;(¤#,##0.00)","en-TV":"¤#,##0.00;(¤#,##0.00)","en-TZ":"¤#,##0.00;(¤#,##0.00)","en-UG":"¤#,##0.00;(¤#,##0.00)","en-UM":"¤#,##0.00;(¤#,##0.00)","en-VC":"¤#,##0.00;(¤#,##0.00)","en-VG":"¤#,##0.00;(¤#,##0.00)","en-VI":"¤#,##0.00;(¤#,##0.00)","en-VU":"¤#,##0.00;(¤#,##0.00)","en-WS":"¤#,##0.00;(¤#,##0.00)","en-ZA":"¤#,##0.00;(¤#,##0.00)","en-ZM":"¤#,##0.00;(¤#,##0.00)","en-ZW":"¤#,##0.00;(¤#,##0.00)",eo:"¤ #,##0.00",es:"#,##0.00 ¤","es-419":"¤#,##0.00","es-AR":"¤ #,##0.00;(¤ #,##0.00)","es-BO":"¤#,##0.00","es-BR":"¤#,##0.00","es-BZ":"¤#,##0.00","es-CL":"¤#,##0.00","es-CO":"¤#,##0.00","es-CR":"¤#,##0.00","es-CU":"¤#,##0.00","es-DO":"¤#,##0.00;(¤#,##0.00)","es-EA":"#,##0.00 ¤","es-EC":"¤#,##0.00","es-GQ":"#,##0.00 ¤","es-GT":"¤#,##0.00","es-HN":"¤#,##0.00","es-IC":"#,##0.00 ¤","es-MX":"¤#,##0.00","es-NI":"¤#,##0.00","es-PA":"¤#,##0.00","es-PE":"¤#,##0.00","es-PH":"#,##0.00 ¤","es-PR":"¤#,##0.00","es-PY":"¤#,##0.00","es-SV":"¤#,##0.00","es-US":"¤#,##0.00","es-UY":"¤ #,##0.00;(¤ #,##0.00)","es-VE":"¤#,##0.00",et:"#,##0.00 ¤;(#,##0.00 ¤)",eu:"#,##0.00 ¤;(#,##0.00 ¤)",ewo:"#,##0.00 ¤",fa:"‎¤ #,##0.00;‎(¤ #,##0.00)","fa-AF":"¤ #,##0.00;‎(¤ #,##0.00)",ff:"#,##0.00 ¤","ff-Adlm":"¤ #,##0.00","ff-Adlm-BF":"¤ #,##0.00","ff-Adlm-CM":"¤ #,##0.00","ff-Adlm-GH":"¤ #,##0.00","ff-Adlm-GM":"¤ #,##0.00","ff-Adlm-GW":"¤ #,##0.00","ff-Adlm-LR":"¤ #,##0.00","ff-Adlm-MR":"¤ #,##0.00","ff-Adlm-NE":"¤ #,##0.00","ff-Adlm-NG":"¤ #,##0.00","ff-Adlm-SL":"¤ #,##0.00","ff-Adlm-SN":"¤ #,##0.00","ff-Latn":"#,##0.00 ¤","ff-Latn-BF":"#,##0.00 ¤","ff-Latn-CM":"#,##0.00 ¤","ff-Latn-GH":"#,##0.00 ¤","ff-Latn-GM":"#,##0.00 ¤","ff-Latn-GN":"#,##0.00 ¤","ff-Latn-GW":"#,##0.00 ¤","ff-Latn-LR":"#,##0.00 ¤","ff-Latn-MR":"#,##0.00 ¤","ff-Latn-NE":"#,##0.00 ¤","ff-Latn-NG":"#,##0.00 ¤","ff-Latn-SL":"#,##0.00 ¤",fi:"#,##0.00 ¤",fil:"¤#,##0.00;(¤#,##0.00)",fo:"#,##0.00 ¤;(#,##0.00 ¤)","fo-DK":"#,##0.00 ¤;(#,##0.00 ¤)",fr:"#,##0.00 ¤;(#,##0.00 ¤)","fr-BE":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BI":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BJ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-BL":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CA":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CD":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CG":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CH":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CI":"#,##0.00 ¤;(#,##0.00 ¤)","fr-CM":"#,##0.00 ¤;(#,##0.00 ¤)","fr-DJ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-DZ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GA":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GN":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GP":"#,##0.00 ¤;(#,##0.00 ¤)","fr-GQ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-HT":"#,##0.00 ¤;(#,##0.00 ¤)","fr-KM":"#,##0.00 ¤;(#,##0.00 ¤)","fr-LU":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MA":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MC":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MG":"#,##0.00 ¤;(#,##0.00 ¤)","fr-ML":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MQ":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MR":"#,##0.00 ¤;(#,##0.00 ¤)","fr-MU":"#,##0.00 ¤;(#,##0.00 ¤)","fr-NC":"#,##0.00 ¤;(#,##0.00 ¤)","fr-NE":"#,##0.00 ¤;(#,##0.00 ¤)","fr-PF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-PM":"#,##0.00 ¤;(#,##0.00 ¤)","fr-RE":"#,##0.00 ¤;(#,##0.00 ¤)","fr-RW":"#,##0.00 ¤;(#,##0.00 ¤)","fr-SC":"#,##0.00 ¤;(#,##0.00 ¤)","fr-SN":"#,##0.00 ¤;(#,##0.00 ¤)","fr-SY":"#,##0.00 ¤;(#,##0.00 ¤)","fr-TD":"#,##0.00 ¤;(#,##0.00 ¤)","fr-TG":"#,##0.00 ¤;(#,##0.00 ¤)","fr-TN":"#,##0.00 ¤;(#,##0.00 ¤)","fr-VU":"#,##0.00 ¤;(#,##0.00 ¤)","fr-WF":"#,##0.00 ¤;(#,##0.00 ¤)","fr-YT":"#,##0.00 ¤;(#,##0.00 ¤)",fur:"¤ #,##0.00",fy:"¤ #,##0.00;(¤ #,##0.00)",ga:"¤#,##0.00;(¤#,##0.00)","ga-GB":"¤#,##0.00;(¤#,##0.00)",gd:"¤#,##0.00;(¤#,##0.00)",gl:"#,##0.00 ¤",gsw:"#,##0.00 ¤","gsw-FR":"#,##0.00 ¤","gsw-LI":"#,##0.00 ¤",gu:"¤#,##,##0.00;(¤#,##,##0.00)",guz:"¤#,##0.00;(¤#,##0.00)",gv:"¤#,##0.00",ha:"¤ #,##0.00","ha-GH":"¤ #,##0.00","ha-NE":"¤ #,##0.00",haw:"¤#,##0.00;(¤#,##0.00)",he:"#,##0.00 ¤",hi:"¤#,##,##0.00","hi-Latn":"¤#,##,##0.00",hr:"#,##0.00 ¤","hr-BA":"#,##0.00 ¤",hsb:"#,##0.00 ¤",hu:"#,##0.00 ¤",hy:"#,##0.00 ¤",ia:"¤ #,##0.00;(¤ #,##0.00)",id:"¤#,##0.00",ig:"¤#,##0.00;(¤#,##0.00)",ii:"¤ #,##0.00",is:"#,##0.00 ¤",it:"#,##0.00 ¤","it-CH":"#,##0.00 ¤","it-SM":"#,##0.00 ¤","it-VA":"#,##0.00 ¤",ja:"¤#,##0.00;(¤#,##0.00)",jgo:"¤ #,##0.00",jmc:"¤#,##0.00",jv:"¤ #,##0.00",ka:"#,##0.00 ¤",kab:"#,##0.00¤",kam:"¤#,##0.00;(¤#,##0.00)",kde:"¤#,##0.00;(¤#,##0.00)",kea:"#,##0.00 ¤;(#,##0.00 ¤)",kgp:"¤ #,##0.00",khq:"#,##0.00¤",ki:"¤#,##0.00;(¤#,##0.00)",kk:"#,##0.00 ¤",kkj:"¤ #,##0.00",kl:"¤#,##0.00;¤-#,##0.00",kln:"¤#,##0.00;(¤#,##0.00)",km:"#,##0.00¤;(#,##0.00¤)",kn:"¤#,##0.00;(¤#,##0.00)",ko:"¤#,##0.00;(¤#,##0.00)","ko-KP":"¤#,##0.00;(¤#,##0.00)",kok:"¤#,##0.00;(¤#,##0.00)",ks:"¤#,##0.00","ks-Arab":"¤#,##0.00","ks-Deva":"¤ #,##0.00",ksb:"#,##0.00¤",ksf:"#,##0.00 ¤",ksh:"#,##0.00 ¤",ku:"#,##0.00 ¤;(#,##0.00 ¤)",kw:"¤#,##0.00",ky:"#,##0.00 ¤",lag:"¤ #,##0.00",lb:"#,##0.00 ¤",lg:"#,##0.00¤",lkt:"¤ #,##0.00",ln:"#,##0.00 ¤","ln-AO":"#,##0.00 ¤","ln-CF":"#,##0.00 ¤","ln-CG":"#,##0.00 ¤",lo:"¤#,##0.00;¤-#,##0.00",lrc:"¤ #,##0.00","lrc-IQ":"¤ #,##0.00",lt:"#,##0.00 ¤",lu:"#,##0.00¤",luo:"#,##0.00¤",luy:"¤#,##0.00;¤- #,##0.00",lv:"#,##0.00 ¤",mai:"¤ #,##0.00",mas:"¤#,##0.00;(¤#,##0.00)","mas-TZ":"¤#,##0.00;(¤#,##0.00)",mer:"¤#,##0.00;(¤#,##0.00)",mfe:"¤ #,##0.00",mg:"¤#,##0.00",mgh:"¤ #,##0.00",mgo:"¤ #,##0.00",mi:"¤ #,##0.00",mk:"#,##0.00 ¤",ml:"¤#,##0.00;(¤#,##0.00)",mn:"¤ #,##0.00",mni:"¤ #,##0.00","mni-Beng":"¤ #,##0.00",mr:"¤#,##0.00;(¤#,##0.00)",ms:"¤#,##0.00;(¤#,##0.00)","ms-BN":"¤#,##0.00;(¤#,##0.00)","ms-ID":"¤#,##0.00","ms-SG":"¤#,##0.00;(¤#,##0.00)",mt:"¤#,##0.00",mua:"¤#,##0.00;(¤#,##0.00)",my:"¤ #,##0.00",mzn:"¤ #,##0.00",naq:"¤#,##0.00",nb:"¤ #,##0.00;(¤ #,##0.00)","nb-SJ":"¤ #,##0.00;(¤ #,##0.00)",nd:"¤#,##0.00;(¤#,##0.00)",nds:"¤ #,##0.00","nds-NL":"¤ #,##0.00",ne:"¤ #,##,##0.00","ne-IN":"¤ #,##,##0.00",nl:"¤ #,##0.00;(¤ #,##0.00)","nl-AW":"¤ #,##0.00;(¤ #,##0.00)","nl-BE":"¤ #,##0.00;(¤ #,##0.00)","nl-BQ":"¤ #,##0.00;(¤ #,##0.00)","nl-CW":"¤ #,##0.00;(¤ #,##0.00)","nl-SR":"¤ #,##0.00;(¤ #,##0.00)","nl-SX":"¤ #,##0.00;(¤ #,##0.00)",nmg:"#,##0.00 ¤",nn:"#,##0.00 ¤",nnh:"¤ #,##0.00",no:"¤ #,##0.00;(¤ #,##0.00)",nus:"¤#,##0.00;(¤#,##0.00)",nyn:"¤#,##0.00",om:"¤#,##0.00","om-KE":"¤#,##0.00",or:"¤#,##0.00;(¤#,##0.00)",os:"¤ #,##0.00","os-RU":"¤ #,##0.00",pa:"¤ #,##0.00","pa-Arab":"¤ #,##0.00","pa-Guru":"¤ #,##0.00",pcm:"¤#,##0.00",pl:"#,##0.00 ¤;(#,##0.00 ¤)",ps:"¤#,##0.00;(¤#,##0.00)","ps-PK":"¤#,##0.00;(¤#,##0.00)",pt:"¤ #,##0.00","pt-AO":"#,##0.00 ¤;(#,##0.00 ¤)","pt-CH":"#,##0.00 ¤;(#,##0.00 ¤)","pt-CV":"#,##0.00 ¤;(#,##0.00 ¤)","pt-GQ":"#,##0.00 ¤;(#,##0.00 ¤)","pt-GW":"#,##0.00 ¤;(#,##0.00 ¤)","pt-LU":"#,##0.00 ¤;(#,##0.00 ¤)","pt-MO":"#,##0.00 ¤;(#,##0.00 ¤)","pt-MZ":"#,##0.00 ¤;(#,##0.00 ¤)","pt-PT":"#,##0.00 ¤;(#,##0.00 ¤)","pt-ST":"#,##0.00 ¤;(#,##0.00 ¤)","pt-TL":"#,##0.00 ¤;(#,##0.00 ¤)",qu:"¤ #,##0.00","qu-BO":"¤ #,##0.00","qu-EC":"¤ #,##0.00",rm:"#,##0.00 ¤",rn:"#,##0.00¤",ro:"#,##0.00 ¤;(#,##0.00 ¤)","ro-MD":"#,##0.00 ¤;(#,##0.00 ¤)",rof:"¤#,##0.00",ru:"#,##0.00 ¤","ru-BY":"#,##0.00 ¤","ru-KG":"#,##0.00 ¤","ru-KZ":"#,##0.00 ¤","ru-MD":"#,##0.00 ¤","ru-UA":"#,##0.00 ¤",rw:"¤ #,##0.00",rwk:"#,##0.00¤",sa:"¤ #,##0.00",sah:"#,##0.00 ¤",saq:"¤#,##0.00;(¤#,##0.00)",sat:"¤ #,##0.00","sat-Olck":"¤ #,##0.00",sbp:"#,##0.00¤",sc:"#,##0.00 ¤",sd:"¤ #,##0.00","sd-Arab":"¤ #,##0.00","sd-Deva":"¤ #,##0.00",se:"#,##0.00 ¤","se-FI":"#,##0.00 ¤","se-SE":"#,##0.00 ¤",seh:"#,##0.00¤",ses:"#,##0.00¤",sg:"¤#,##0.00;¤-#,##0.00",shi:"#,##0.00¤","shi-Latn":"#,##0.00¤","shi-Tfng":"#,##0.00¤",si:"¤#,##0.00;(¤#,##0.00)",sk:"#,##0.00 ¤;(#,##0.00 ¤)",sl:"#,##0.00 ¤;(#,##0.00 ¤)",smn:"#,##0.00 ¤",sn:"¤#,##0.00;(¤#,##0.00)",so:"¤#,##0.00;(¤#,##0.00)","so-DJ":"¤#,##0.00;(¤#,##0.00)","so-ET":"¤#,##0.00;(¤#,##0.00)","so-KE":"¤#,##0.00;(¤#,##0.00)",sq:"#,##0.00 ¤;(#,##0.00 ¤)","sq-MK":"#,##0.00 ¤;(#,##0.00 ¤)","sq-XK":"#,##0.00 ¤;(#,##0.00 ¤)",sr:"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl-BA":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl-ME":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Cyrl-XK":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn-BA":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn-ME":"#,##0.00 ¤;(#,##0.00 ¤)","sr-Latn-XK":"#,##0.00 ¤;(#,##0.00 ¤)",su:"¤#,##0.00","su-Latn":"¤#,##0.00",sv:"#,##0.00 ¤","sv-AX":"#,##0.00 ¤","sv-FI":"#,##0.00 ¤",sw:"¤ #,##0.00","sw-CD":"¤ #,##0.00","sw-KE":"¤ #,##0.00","sw-UG":"¤ #,##0.00",ta:"¤#,##0.00;(¤#,##0.00)","ta-LK":"¤#,##0.00;(¤#,##0.00)","ta-MY":"¤#,##0.00;(¤#,##0.00)","ta-SG":"¤#,##0.00;(¤#,##0.00)",te:"¤#,##0.00;(¤#,##0.00)",teo:"¤#,##0.00;(¤#,##0.00)","teo-KE":"¤#,##0.00;(¤#,##0.00)",tg:"#,##0.00 ¤",th:"¤#,##0.00;(¤#,##0.00)",ti:"¤#,##0.00","ti-ER":"¤#,##0.00",tk:"#,##0.00 ¤",to:"¤ #,##0.00",tr:"¤#,##0.00;(¤#,##0.00)","tr-CY":"¤#,##0.00;(¤#,##0.00)",tt:"#,##0.00 ¤",twq:"#,##0.00¤",tzm:"#,##0.00 ¤",ug:"¤#,##0.00;(¤#,##0.00)",uk:"#,##0.00 ¤",und:"¤ #,##0.00",ur:"¤#,##0.00;(¤#,##0.00)","ur-IN":"¤#,##0.00;(¤#,##0.00)",uz:"#,##0.00 ¤","uz-Arab":"¤ #,##0.00","uz-Cyrl":"#,##0.00 ¤","uz-Latn":"#,##0.00 ¤",vai:"¤#,##0.00;(¤#,##0.00)","vai-Latn":"¤#,##0.00;(¤#,##0.00)","vai-Vaii":"¤#,##0.00;(¤#,##0.00)",vi:"#,##0.00 ¤",vun:"¤#,##0.00",wae:"¤ #,##0.00",wo:"¤ #,##0.00",xh:"¤#,##0.00",xog:"#,##0.00 ¤",yav:"#,##0.00 ¤;(#,##0.00 ¤)",yi:"¤ #,##0.00",yo:"¤#,##0.00;(¤#,##0.00)","yo-BJ":"¤#,##0.00;(¤#,##0.00)",yrl:"¤ #,##0.00","yrl-CO":"¤ #,##0.00","yrl-VE":"¤ #,##0.00",yue:"¤#,##0.00;(¤#,##0.00)","yue-Hans":"¤#,##0.00;(¤#,##0.00)","yue-Hant":"¤#,##0.00;(¤#,##0.00)",zgh:"#,##0.00¤",zh:"¤#,##0.00;(¤#,##0.00)","zh-Hans":"¤#,##0.00;(¤#,##0.00)","zh-Hans-HK":"¤#,##0.00;(¤#,##0.00)","zh-Hans-MO":"¤#,##0.00;(¤#,##0.00)","zh-Hans-SG":"¤#,##0.00;(¤#,##0.00)","zh-Hant":"¤#,##0.00;(¤#,##0.00)","zh-Hant-HK":"¤#,##0.00;(¤#,##0.00)","zh-Hant-MO":"¤#,##0.00;(¤#,##0.00)",zu:"¤#,##0.00;(¤#,##0.00)"},E3=["standard","accounting"],T3=/([^\s0]+)?(\s*)0*[.,]*0*(\s*)([^\s0]+)?/,xv={},tA=t=>{const e=Di.locale()+"/"+JSON.stringify(t);return xv[e]||(xv[e]=new Intl.NumberFormat(Di.locale(),t).format),xv[e]},I3=t=>new Intl.NumberFormat(Di.locale(),{style:"currency",currency:t}),A3={engine:function(){return"intl"},_formatNumberCore:function(t,e,n){return e==="exponential"?this.callBase.apply(this,arguments):tA(this._normalizeFormatConfig(e,n,t))(t)},_normalizeFormatConfig:function(t,e,n){let i;if(t==="decimal"){const s=String(n).split(".")[1];i={minimumIntegerDigits:e.precision||void 0,useGrouping:!1,maximumFractionDigits:s&&s.length,round:n<0?"ceil":"floor"}}else i=this._getPrecisionConfig(e.precision);if(t==="percent")i.style="percent";else if(t==="currency"){const s=e.useCurrencyAccountingStyle??Me().defaultUseCurrencyAccountingStyle;i.style="currency",i.currency=e.currency||Me().defaultCurrency,i.currencySign=E3[+s]}return i},_getPrecisionConfig:function(t){let e;return t===null?e={minimumFractionDigits:0,maximumFractionDigits:20}:e={minimumFractionDigits:t||0,maximumFractionDigits:t||0},e},format:function(t,e){return typeof t!="number"?t:(e=this._normalizeFormat(e),e.currency==="default"&&(e.currency=Me().defaultCurrency),!e||typeof e!="function"&&!e.type&&!e.formatter?tA(e)(t):this.callBase.apply(this,arguments))},_getCurrencySymbolInfo:function(t){const e=I3(t);return this._extractCurrencySymbolInfo(e.format(0))},_extractCurrencySymbolInfo:function(t){const e=T3.exec(t)||[],n=e[1]?"before":"after",i=e[1]||e[4]||"",s=e[2]||e[3]||"";return{position:n,symbol:i,delimiter:s}},getCurrencySymbol:function(t){return t||(t=Me().defaultCurrency),{symbol:this._getCurrencySymbolInfo(t).symbol}},getOpenXmlCurrencyFormat:function(t){const e=t||Me().defaultCurrency,n=this._getCurrencySymbolInfo(e).symbol,i=Di.getValueByClosestLocale(s=>b3[s]);return S3(n,i)}},k3=typeof Intl<"u",nA=["currency","fixedpoint","exponential","percent","decimal"],wv={1:"K",2:"M",3:"B",4:"T"},iA={largenumber:"auto",thousands:1,millions:2,billions:3,trillions:4},Ge=Rs({engine:function(){return"base"},numericFormats:nA,defaultLargeNumberFormatPostfixes:wv,_parseNumberFormatString:function(t){const e={};if(!t||typeof t!="string")return;const n=t.toLowerCase().split(" ");if(N(n,(i,s)=>{nA.includes(s)?e.formatType=s:s in iA&&(e.power=iA[s])}),e.power&&!e.formatType&&(e.formatType="fixedpoint"),e.formatType)return e},_calculateNumberPower:function(t,e,n,i){let s=Math.abs(t),r=0;if(s>1)for(;s&&s>=e&&(i===void 0||r<i);)r++,s/=e;else if(s>0&&s<1)for(;s<1&&(n===void 0||r>n);)r--,s*=e;return r},_getNumberByPower:function(t,e,n){let i=t;for(;e>0;)i/=n,e--;for(;e<0;)i*=n,e++;return i},_formatNumber:function(t,e,n){e.power==="auto"&&(e.power=this._calculateNumberPower(t,1e3,0,4)),e.power&&(t=this._getNumberByPower(t,e.power,1e3));const i=this.defaultLargeNumberFormatPostfixes[e.power]||"";let s=this._formatNumberCore(t,e.formatType,n);return s=s.replace(/(\d|.$)(\D*)$/,"$1"+i+"$2"),s},_formatNumberExponential:function(t,e){let n=this._calculateNumberPower(t,10),i=this._getNumberByPower(t,n,10);e.precision===void 0&&(e.precision=1),i.toFixed(e.precision||0)>=10&&(n++,i/=10);const s=(n>=0?"+":"")+n.toString();return this._formatNumberCore(i,"fixedpoint",e)+"E"+s},_addZeroes:function(t,e){const n=Math.pow(10,e),i=t<0?"-":"";t=(Math.abs(t)*n>>>0)/n;let s=t.toString();for(;s.length<e;)s="0"+s;return i+s},_addGroupSeparators:function(t){const e=t.toString().split(".");return e[0].replace(/\B(?=(\d{3})+(?!\d))/g,Me().thousandsSeparator)+(e[1]?Me().decimalSeparator+e[1]:"")},_formatNumberCore:function(t,e,n){return e==="exponential"?this._formatNumberExponential(t,n):(e!=="decimal"&&n.precision!==null&&(n.precision=n.precision||0),e==="percent"&&(t*=100),n.precision!==void 0&&(e==="decimal"?t=this._addZeroes(t,n.precision):t=n.precision===null?t.toPrecision():DB(t,n.precision)),e!=="decimal"?t=this._addGroupSeparators(t):t=t.toString().replace(".",Me().decimalSeparator),e==="percent"&&(t+="%"),t)},_normalizeFormat:function(t){return t?(typeof t=="function"||Ce(t)||(t={type:t}),t):{}},_getSeparators:function(){return{decimalSeparator:this.getDecimalSeparator(),thousandsSeparator:this.getThousandsSeparator()}},getThousandsSeparator:function(){return this.format(1e4,"fixedPoint")[2]},getDecimalSeparator:function(){return this.format(1.2,{type:"fixedPoint",precision:1})[1]},convertDigits:function(t,e){const n=this.format(90,"decimal");if(typeof t!="string"||n[1]==="0")return t;const i=e?n[1]:"0",s=e?"0":n[1],r=e?n[0]:"9",o=new RegExp("["+i+"-"+r+"]","g");return t.replace(o,a=>String.fromCharCode(a.charCodeAt(0)+(s.charCodeAt(0)-i.charCodeAt(0))))},getNegativeEtalonRegExp:function(t){const e=this._getSeparators(),n=new RegExp("[0-9"+Po(e.decimalSeparator+e.thousandsSeparator)+"]+","g");let i=this.format(-1,t).replace(n,"1");return["\\","(",")","[","]","*","+","$","^","?","|","{","}"].forEach(s=>{i=i.replace(new RegExp(`\\${s}`,"g"),`\\${s}`)}),i=i.replace(/ /g,"\\s"),i=i.replace(/1/g,".*"),new RegExp(i,"g")},getSign:function(t,e){if(!e)return t.replace(/[^0-9-]/g,"").charAt(0)==="-"?-1:1;const n=this.getNegativeEtalonRegExp(e);return t.match(n)?-1:1},format:function(t,e){if(typeof t!="number"||typeof e=="number")return t;if(e=e&&e.formatter||e,typeof e=="function")return e(t);e=this._normalizeFormat(e),e.type||(e.type="decimal");const n=this._parseNumberFormatString(e.type);if(!n){const i=this._getSeparators();return i.unlimitedIntegerDigits=e.unlimitedIntegerDigits,this.convertDigits(v3(e.type,i)(t))}return this._formatNumber(t,n,e)},parse:function(t,e){if(!t)return;if(e&&e.parser)return e.parser(t);t=this.convertDigits(t,!0),e&&typeof e!="string"&&Te.log("W0011");const n=this.getDecimalSeparator(),i=new RegExp("[^0-9"+Po(n)+"]","g"),s=t.replace(i,"").replace(n,".").replace(/\.$/g,"");if(s==="."||s==="")return null;if(this._calcSignificantDigits(s)>15)return NaN;let r=+s*this.getSign(t,e);e=this._normalizeFormat(e);const o=this._parseNumberFormatString(e.type);let a=o==null?void 0:o.power;if(a){if(a==="auto"){const l=t.match(/\d(K|M|B|T)/);l&&(a=Object.keys(wv).find(c=>wv[c]===l[1]))}r*=Math.pow(10,3*a)}return(o==null?void 0:o.formatType)==="percent"&&(r/=100),r},_calcSignificantDigits:function(t){const[e,n]=t.split("."),i=r=>{let o=-1;for(let a=0;a<r.length;a++)if(r[a]!=="0"){o=a;break}return o>-1?r.length-o:0};let s=0;return e&&(s+=i(e.split(""))),n&&(s+=i(n.split("").reverse())),s}});Ge.inject(D3);k3&&Ge.inject(A3);const wB=" .,:;/\\<>()-[]،",Mo=function(t){const e=t&&Ge.convertDigits(t,!1).charCodeAt(0),n=Ge.convertDigits("0",!1).charCodeAt(0);return n<=e&&e<n+10},R3=function(t,e,n,i){const s=t[n],r=t[n+1];if(!i&&(s==="."||s===" "&&t.slice(n-1,n+3)===". m."||s==="-"&&!Mo(r)))return!0;const o=i&&e.some(a=>t[n]!==a[n]);return wB.indexOf(s)<0&&i===Mo(s)&&(!i||o)},O3=function(t,e){if(!Mo(t[e]))for(;e>0&&!Mo(t[e-1])&&(t[e-1]==="."||wB.indexOf(t[e-1])<0);)e--;return e},P3=function(t,e,n,i){let s=0;const r=[],o=function(a){return t[s]!==a[s]&&(i===void 0||Mo(t[s])===i)};for(Array.isArray(e)||(e=[e]),s=0;s<t.length;s++)if(n.indexOf(s)<0&&e.filter(o).length){s=O3(t,s);do{if(i=Mo(t[s]),!r.length&&!i&&Mo(e[0][s]))break;r.push(s),n.unshift(s),s++}while(t[s]&&R3(t,e,s,i));break}return r.length===1&&(t[n[0]-1]==="0"||t[n[0]-1]==="٠")&&n.unshift(n[0]-1),r},M3=function(t,e,n,i){const s=e[0],r=s<i.length?i[s]:s;return e.forEach(function(o,a){t=t.substr(0,r+a)+(n.length>1?n[a]:n)+t.substr(r+a+1)}),e.length===1&&(t=t.replace("0"+n,n+n),t=t.replace("٠"+n,n+n)),t},V3=function(t,e,n,i){let s,r,o;if(!Mo(t[e[0]]||"0")){const a=Math.max(e.length<=3?3:4,n.length);for(;e.length>a;){for(r=e.pop(),o=i[r],i[r]=-1,s=r+1;s<i.length;s++)i[s]--;t=t.substr(0,o)+t.substr(o+1)}for(r=e[e.length-1]+1,o=r<i.length?i[r]:r;e.length<a;){for(e.push(e[e.length-1]+1),s=r;s<i.length;s++)i[s]++;t=t.substr(0,o)+" "+t.substr(o)}}return t=M3(t,e,n,i),t},sA=function(t,e){return Array.isArray(t)?t.map(function(n){return(e(n)||"").toString()}):(e(t)||"").toString()},B3=/[a-zA-Z]/g,L3=function(t,e,n,i){const s=e.split("").map(function(r,o){return n.indexOf(o)<0&&(r.match(B3)||r==="'")?i[o]:-1});return t=t.split("").map(function(r,o){let a=r;const l=s.indexOf(o)>=0,c=o>0&&s.indexOf(o-1)>=0,u=s.indexOf(o+1)>=0;return l&&(c||(a="'"+a),u||(a+="'")),a}).join(""),t},SB=function(t){const e=[],n=sA(new Date(2009,8,8,6,5,4),t),i=n.split("").map(function(a,l){return l});let s=n;const r={},o=[{date:new Date(2009,8,8,6,5,4,111),pattern:"S"},{date:new Date(2009,8,8,6,5,2),pattern:"s"},{date:new Date(2009,8,8,6,2,4),pattern:"m"},{date:new Date(2009,8,8,18,5,4),pattern:"H",isDigit:!0},{date:new Date(2009,8,8,2,5,4),pattern:"h",isDigit:!0},{date:new Date(2009,8,8,18,5,4),pattern:"a",isDigit:!1},{date:new Date(2009,8,1,6,5,4),pattern:"d"},{date:[new Date(2009,8,2,6,5,4),new Date(2009,8,3,6,5,4),new Date(2009,8,4,6,5,4)],pattern:"E"},{date:new Date(2009,9,6,6,5,4),pattern:"M"},{date:new Date(1998,8,8,6,5,4),pattern:"y"}];if(s&&(o.forEach(function(a){const l=P3(n,sA(a.date,t),e,a.isDigit),c=a.pattern==="M"&&!r.d?"L":a.pattern;s=V3(s,l,c,i),r[c]=l.length}),s=L3(s,n,e,i),e.length))return s},Mr={3:"abbreviated",4:"wide",5:"narrow"},rA=function(t,e){return t>2?Object.keys(Mr).map(function(n){return["format","standalone"].map(function(i){return e.getMonthNames(Mr[n],i).join("|")}).join("|")}).join("|"):t===2?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},$3={":":function(t,e){const n=t>1?`{${t}}`:"";let i=Po(e.getTimeSeparator());return i!==":"&&(i=`${i}|:`),`${i}${n}`},y:function(t){return t===2?`[0-9]{${t}}`:"[0-9]+?"},M:rA,L:rA,Q:function(t,e){return t>2?e.getQuarterNames(Mr[t],"format").join("|"):"0?[1-4]"},E:function(t,e){return"\\D*"},a:function(t,e){return e.getPeriodNames(Mr[t<3?3:t],"format").join("|")},d:function(t){return t===2?"3[01]|[12][0-9]|0?[1-9]":"0??[1-9]|[12][0-9]|3[01]"},H:function(t){return t===2?"2[0-3]|1[0-9]|0?[0-9]":"0??[0-9]|1[0-9]|2[0-3]"},h:function(t){return t===2?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},m:function(t){return t===2?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},s:function(t){return t===2?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},S:function(t){return`[0-9]{1,${t}}`},w:function(t){return t===2?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},x:function(t){return t===3?"[+-](?:2[0-3]|[01][0-9]):(?:[0-5][0-9])|Z":"[+-](?:2[0-3]|[01][0-9])(?:[0-5][0-9])|Z"}},yr=Number,LD=function(t,e){return t.map(n=>n.toLowerCase()).indexOf(e.toLowerCase())},oA=function(t,e,n){return e>2?["format","standalone"].map(function(i){return Object.keys(Mr).map(function(s){const r=n.getMonthNames(Mr[s],i);return LD(r,t)})}).reduce(function(i,s){return i.concat(s)}).filter(function(i){return i>=0})[0]:yr(t)-1},F3={y:function(t,e){const n=yr(t);return e===2?n<30?2e3+n:1900+n:n},M:oA,L:oA,Q:function(t,e,n){return e>2?n.getQuarterNames(Mr[e],"format").indexOf(t):yr(t)-1},E:function(t,e,n){const i=n.getDayNames(Mr[e<3?3:e],"format");return LD(i,t)},a:function(t,e,n){const i=n.getPeriodNames(Mr[e<3?3:e],"format");return LD(i,t)},d:yr,H:yr,h:yr,m:yr,s:yr,S:function(t,e){for(e=Math.max(e,3),t=t.slice(0,3);e<3;)t+="0",e++;return yr(t)}},tg=["y","M","d","h","m","s","S"],Nw={y:"setFullYear",M:"setMonth",L:"setMonth",a:function(t,e,n){let i=t.getHours();const s=n.h;s!==void 0&&s!==i&&i--,!e&&i===12?i=0:e&&i!==12&&(i+=12),t.setHours(i)},d:"setDate",H:"setHours",h:"setHours",m:"setMinutes",s:"setSeconds",S:"setMilliseconds"},H3=function(t,e){const n=t[e];if(!n)return 0;let i=0;do e++,i++;while(t[e]===n);return i},N3=function(t,e){let n="";for(let i=0;i<e;i++)n+=t;return n},bB=function(t,e){let n="",i="",s;const r=[],o=function(){i&&(r.push(`'${i}'`),n+=`${Po(i)})`,i="")};for(let a=0;a<t.length;a++){const l=t[a],c=l==="'",u=$3[l];if(!(c&&(s=!s,t[a-1]!=="'")))if(u&&!s){const d=H3(t,a),p=N3(l,d);o(),r.push(p),n+=`(${u(d,e)})`,a+=d-1}else i||(n+="("),i+=l}return o(),W3(r)||lw.warn(`The following format may be parsed incorrectly: ${t}.`),{patterns:r,regexp:new RegExp(`^${n}$`,"i")}},z3=["d","H","h","m","s","w","M","L","Q"],W3=function(t){const e=s=>{if(!s)return!1;const r=s[0];return["y","S"].includes(r)||z3.includes(r)&&s.length<3};let n=!0,i=0;return t.every((s,r,o)=>(e(s)&&((a=>a[0]!=="S"&&a.length!==2)(s)&&(n=++i<2),e(o[r+1])||(i=0)),n))},G3=function(){return Nw},U3=function(t,e,n,i,s){const r=e[0],o=Nw[r],a=F3[r];if(o&&a){const l=a(n,e.length,i);s[e]=l,t[o]?t[o](l):o(t,l,s)}},K3=function(t,e,n){const i=Nw[e],s="g"+i.substr(1),r=n[s]();t[i](r)},j3=function(t){return t.map(function(e){return e[0]==="'"?"":e[0]==="H"?"h":e[0]})},q3=function(t){const e=t.map(function(n){return tg.indexOf(n)});return Math.max.apply(Math,e)},Y3=function(t){const e=t.filter(function(n){return tg.indexOf(n)<0});return tg.concat(e)},Z3=function(t,e){const n=bB(t,e);return function(i){const s=n.regexp.exec(i);if(s){const r=new Date,o=new Date(r.getFullYear(),0,1),a=j3(n.patterns),l=q3(a),c=Y3(a),u={};return c.forEach(function(d,p){if(!d||p<tg.length&&p>l)return;const f=a.indexOf(d);if(f>=0){const g=n.patterns[f],y=s[f+1];U3(o,g,y,e,u)}else K3(o,d,r)}),o}return null}},Q3={"af-NA":1,agq:1,ak:1,ar:6,"ar-EH":1,"ar-ER":1,"ar-KM":1,"ar-LB":1,"ar-MA":1,"ar-MR":1,"ar-PS":1,"ar-SO":1,"ar-SS":1,"ar-TD":1,"ar-TN":1,asa:1,ast:1,az:1,"az-Cyrl":1,bas:1,be:1,bem:1,bez:1,bg:1,bm:1,br:1,bs:1,"bs-Cyrl":1,ca:1,ce:1,cgg:1,ckb:6,cs:1,cy:1,da:1,de:1,dje:1,dsb:1,dua:1,dyo:1,ee:1,el:1,"en-001":1,"en-AE":6,"en-BI":1,"en-MP":1,"en-MV":5,"en-SD":6,eo:1,es:1,et:1,eu:1,ewo:1,fa:6,ff:1,"ff-Adlm":1,fi:1,fo:1,fr:1,"fr-DJ":6,"fr-DZ":6,"fr-SY":6,fur:1,fy:1,ga:1,gd:1,gl:1,gsw:1,gv:1,ha:1,hr:1,hsb:1,hu:1,hy:1,ia:1,ig:1,is:1,it:1,jgo:1,jmc:1,ka:1,kab:6,kde:1,kea:1,khq:1,kk:1,kkj:1,kl:1,"ko-KP":1,ksb:1,ksf:1,ksh:1,ku:1,kw:1,ky:1,lag:1,lb:1,lg:1,ln:1,lrc:6,lt:1,lu:1,lv:1,"mas-TZ":1,mfe:1,mg:1,mgo:1,mi:1,mk:1,mn:1,ms:1,mua:1,mzn:6,naq:1,nds:1,nl:1,nmg:1,nnh:1,no:1,nus:1,nyn:1,os:1,pcm:1,pl:1,ps:6,"pt-AO":1,"pt-CH":1,"pt-CV":1,"pt-GQ":1,"pt-GW":1,"pt-LU":1,"pt-ST":1,"pt-TL":1,"qu-BO":1,"qu-EC":1,rm:1,rn:1,ro:1,rof:1,ru:1,rw:1,rwk:1,sah:1,sbp:1,sc:1,se:1,ses:1,sg:1,shi:1,"shi-Latn":1,si:1,sk:1,sl:1,smn:1,so:1,"so-DJ":6,sq:1,sr:1,"sr-Latn":1,sv:1,sw:1,"ta-LK":1,"ta-MY":1,teo:1,tg:1,"ti-ER":1,tk:1,to:1,tr:1,tt:1,twq:1,tzm:1,uk:1,uz:1,"uz-Arab":6,"uz-Cyrl":1,vai:1,"vai-Latn":1,vi:1,vun:1,wae:1,wo:1,xog:1,yav:1,yi:1,yo:1,zgh:1},X3=/[\u200E\u200F]/g,J3=/[\u202F]/g,Aa=t=>e=>{if(!t.timeZoneName){const n=e.getFullYear(),i=String(n).length<3,r=i?n+400:n,o=new Date(Date.UTC(r,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));i&&o.setFullYear(n);const a=T({timeZone:"UTC"},t);return $D(o,a)}return $D(e,t)},Sv={},e6=t=>{const e=Di.locale()+"/"+JSON.stringify(t);return Sv[e]||(Sv[e]=new Intl.DateTimeFormat(Di.locale(),t).format),Sv[e]};function $D(t,e){return e6(e)(t).replace(X3,"").replace(J3," ")}const FD=t=>new Intl.NumberFormat(Di.locale()).format(t),t6=(()=>{const t={};return e=>{if(!(e in t)){if(FD(0)==="0")return t[e]=!1,!1;t[e]={};for(let n=0;n<10;++n)t[e][FD(n)]=n}return t[e]}})(),rf=t=>{const e=t6(Di.locale());return e?t.split("").map(n=>n in e?String(e[n]):n).join(""):t},aA=t=>t.replace(/(\D)0+(\d)/g,"$1$2"),n6=(t,e)=>aA(t)===aA(e),HD=t=>t.replace("d’","de "),zw={day:{day:"numeric"},date:{year:"numeric",month:"long",day:"numeric"},dayofweek:{weekday:"long"},longdate:{weekday:"long",year:"numeric",month:"long",day:"numeric"},longdatelongtime:{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},longtime:{hour:"numeric",minute:"numeric",second:"numeric"},month:{month:"long"},monthandday:{month:"long",day:"numeric"},monthandyear:{year:"numeric",month:"long"},shortdate:{},shorttime:{hour:"numeric",minute:"numeric"},shortyear:{year:"2-digit"},year:{year:"numeric"}};Object.defineProperty(zw,"shortdateshorttime",{get:function(){const t=Intl.DateTimeFormat(Di.locale()).resolvedOptions();return{year:t.year,month:t.month,day:t.day,hour:"numeric",minute:"numeric"}}});const i6=t=>typeof t=="string"&&zw[t.toLowerCase()],EB={standalone:function(t,e){const n=new Date(1999,t,13,1);return Aa({month:e})(n)},format:function(t,e){const n=new Date(0,t,13,1),s=HD(Aa({day:"numeric",month:e})(n)).split(" ").filter(r=>r.indexOf("13")<0);return s.length===1?s[0]:s.length===2?s[0].length>s[1].length?s[0]:s[1]:EB.standalone(t,e)}},s6={engine:function(){return"intl"},getMonthNames:function(t,e){const n={wide:"long",abbreviated:"short",narrow:"narrow"}[t||"wide"];return e=e==="format"?e:"standalone",Array.apply(null,new Array(12)).map((i,s)=>EB[e](s,n))},getDayNames:function(t){return(n=>Array.apply(null,new Array(7)).map((i,s)=>Aa({weekday:n})(new Date(0,0,s))))({wide:"long",abbreviated:"short",short:"narrow",narrow:"narrow"}[t||"wide"])},getPeriodNames:function(){const t=Aa({hour:"numeric",hour12:!0});return[1,13].map(e=>{const n=FD(1),i=t(new Date(0,0,1,e)).split(n);return i.length!==2?"":(i[0].length>i[1].length?i[0]:i[1]).trim()})},format:function(t,e){if(!t)return;if(!e)return t;typeof e!="function"&&!e.formatter&&(e=e.type||e);const n=i6(e);if(n)return Aa(n)(t);const i=typeof e;return e.formatter||i==="function"||i==="string"?this.callBase.apply(this,arguments):Aa(e)(t)},parse:function(t,e){let n;return e&&!e.parser&&typeof t=="string"&&(t=HD(t),n=i=>HD(this.format(i,e))),this.callBase(t,n||e)},_parseDateBySimpleFormat:function(t,e){t=rf(t);const n=this.getFormatParts(e),i=t.split(/\D+/).filter(o=>o.length>0);if(n.length!==i.length)return;const s=this._generateDateArgs(n,i),r=o=>{const a=((l,c)=>{const u=c?12:0;return new Date(l.year,l.month,l.day,(l.hours+u)%24,l.minutes,l.seconds)})(s,o);if(n6(rf(this.format(a,e)),t))return a};return r(!1)||r(!0)},_generateDateArgs:function(t,e){const n=new Date,i={year:n.getFullYear(),month:n.getMonth(),day:n.getDate(),hours:0,minutes:0,seconds:0};return t.forEach((s,r)=>{const o=e[r];let a=parseInt(o,10);s==="month"&&(a-=1),i[s]=a}),i},formatUsesMonthName:function(t){return typeof t=="object"&&!(t.type||t.format)?t.month==="long":this.callBase.apply(this,arguments)},formatUsesDayName:function(t){return typeof t=="object"&&!(t.type||t.format)?t.weekday==="long":this.callBase.apply(this,arguments)},getTimeSeparator:function(){return rf($D(new Date(2001,1,1,11,11),{hour:"numeric",minute:"numeric",hour12:!1})).replace(/\d/g,"")},getFormatParts:function(t){if(typeof t=="string")return this.callBase(t);const e=T({},zw[t.toLowerCase()]),n=new Date(2001,2,4,5,6,7);let i=Aa(e)(n);return i=rf(i),[{name:"year",value:1},{name:"month",value:3},{name:"day",value:4},{name:"hours",value:5},{name:"minutes",value:6},{name:"seconds",value:7}].map(s=>({name:s.name,index:i.indexOf(s.value)})).filter(s=>s.index>-1).sort((s,r)=>s.index-r.index).map(s=>s.name)}},r6=typeof Intl<"u",bv={shortdate:"M/d/y",shorttime:"h:mm a",longdate:"EEEE, MMMM d, y",longtime:"h:mm:ss a",monthandday:"MMMM d",monthandyear:"MMMM y",quarterandyear:"QQQ y",day:"d",year:"y",shortdateshorttime:"M/d/y, h:mm a",longdatelongtime:"EEEE, MMMM d, y, h:mm:ss a",month:"LLLL",shortyear:"yy",dayofweek:"EEEE",quarter:"QQQ",hour:"HH",minute:"mm",second:"ss",millisecond:"SSS","datetime-local":"yyyy-MM-ddTHH':'mm':'ss"},o6={year:["y","yy","yyyy"],day:["d","dd"],month:["M","MM","MMM","MMMM"],hours:["H","HH","h","hh","ah"],minutes:["m","mm"],seconds:["s","ss"],milliseconds:["S","SS","SSS"]},ee=Rs({engine:function(){return"base"},_getPatternByFormat:function(t){return bv[t.toLowerCase()]},_expandPattern:function(t){return this._getPatternByFormat(t)||t},formatUsesMonthName:function(t){return this._expandPattern(t).indexOf("MMMM")!==-1},formatUsesDayName:function(t){return this._expandPattern(t).indexOf("EEEE")!==-1},getFormatParts:function(t){const e=this._getPatternByFormat(t)||t,n=[];return N(e.split(/\W+/),(i,s)=>{N(o6,(r,o)=>{o.includes(s)&&n.push(r)})}),n},getMonthNames:function(t){return gc.getMonthNames(t)},getDayNames:function(t){return gc.getDayNames(t)},getQuarterNames:function(t){return gc.getQuarterNames(t)},getPeriodNames:function(t){return gc.getPeriodNames(t)},getTimeSeparator:function(){return":"},is24HourFormat:function(t){const e=new Date(2017,0,20,11,0,0,0),n=new Date(2017,0,20,23,0,0,0),i=this.format(e,t),s=this.format(n,t);for(let r=0;r<i.length;r++)if(i[r]!==s[r])return!isNaN(parseInt(i[r]))},format:function(t,e){if(!t)return;if(!e)return t;let n;if(typeof e=="function")n=e;else if(e.formatter)n=e.formatter;else if(e=e.type||e,ve(e))return e=bv[e.toLowerCase()]||e,Ge.convertDigits(ZV(e,this)(t));if(n)return n(t)},parse:function(t,e){const n=this;let i,s;if(!t)return;if(!e)return this.parse(t,"shortdate");if(e.parser)return e.parser(t);if(typeof e=="string"&&!bv[e.toLowerCase()])i=e;else{s=o=>{const a=n.format(o,e);return Ge.convertDigits(a,!0)};try{i=SB(s)}catch{}}if(i)return t=Ge.convertDigits(t,!0),Z3(i,this)(t);Te.log("W0012");const r=new Date(t);if(!(!r||isNaN(r.getTime())))return r},firstDayOfWeekIndex:function(){const t=Di.getValueByClosestLocale(e=>Q3[e]);return t===void 0?0:t}});r6&&ee.inject(s6);const a6={en:{Yes:"Yes",No:"No",Cancel:"Cancel",Close:"Close",Clear:"Clear",Done:"Done",Loading:"Loading...",Select:"Select...",Search:"Search",Back:"Back",OK:"OK","dxCollectionWidget-noDataText":"No data to display","dxDropDownEditor-selectLabel":"Select","validation-required":"Required","validation-required-formatted":"{0} is required","validation-numeric":"Value must be a number","validation-numeric-formatted":"{0} must be a number","validation-range":"Value is out of range","validation-range-formatted":"{0} is out of range","validation-stringLength":"The length of the value is not correct","validation-stringLength-formatted":"The length of {0} is not correct","validation-custom":"Value is invalid","validation-custom-formatted":"{0} is invalid","validation-async":"Value is invalid","validation-async-formatted":"{0} is invalid","validation-compare":"Values do not match","validation-compare-formatted":"{0} does not match","validation-pattern":"Value does not match pattern","validation-pattern-formatted":"{0} does not match pattern","validation-email":"Email is invalid","validation-email-formatted":"{0} is invalid","validation-mask":"Value is invalid","dxLookup-searchPlaceholder":"Minimum character number: {0}","dxList-pullingDownText":"Pull down to refresh...","dxList-pulledDownText":"Release to refresh...","dxList-refreshingText":"Refreshing...","dxList-pageLoadingText":"Loading...","dxList-nextButtonText":"More","dxList-selectAll":"Select All","dxList-listAriaLabel":"Items","dxList-listAriaLabel-deletable":"Deletable items","dxListEditDecorator-delete":"Delete","dxListEditDecorator-more":"More","dxScrollView-pullingDownText":"Pull down to refresh...","dxScrollView-pulledDownText":"Release to refresh...","dxScrollView-refreshingText":"Refreshing...","dxScrollView-reachBottomText":"Loading...","dxDateBox-simulatedDataPickerTitleTime":"Select time","dxDateBox-simulatedDataPickerTitleDate":"Select date","dxDateBox-simulatedDataPickerTitleDateTime":"Select date and time","dxDateBox-validation-datetime":"Value must be a date or time","dxDateRangeBox-invalidStartDateMessage":"Start value must be a date","dxDateRangeBox-invalidEndDateMessage":"End value must be a date","dxDateRangeBox-startDateOutOfRangeMessage":"Start date is out of range","dxDateRangeBox-endDateOutOfRangeMessage":"End date is out of range","dxDateRangeBox-startDateLabel":"Start Date","dxDateRangeBox-endDateLabel":"End Date","dxFileUploader-selectFile":"Select a file","dxFileUploader-dropFile":"or Drop a file here","dxFileUploader-bytes":"bytes","dxFileUploader-kb":"KB","dxFileUploader-Mb":"MB","dxFileUploader-Gb":"GB","dxFileUploader-upload":"Upload","dxFileUploader-uploaded":"Uploaded","dxFileUploader-readyToUpload":"Ready to upload","dxFileUploader-uploadAbortedMessage":"Upload cancelled","dxFileUploader-uploadFailedMessage":"Upload failed","dxFileUploader-invalidFileExtension":"File type is not allowed","dxFileUploader-invalidMaxFileSize":"File is too large","dxFileUploader-invalidMinFileSize":"File is too small","dxRangeSlider-ariaFrom":"From","dxRangeSlider-ariaTill":"Till","dxSwitch-switchedOnText":"ON","dxSwitch-switchedOffText":"OFF","dxForm-optionalMark":"optional","dxForm-requiredMessage":"{0} is required","dxNumberBox-invalidValueMessage":"Value must be a number","dxNumberBox-noDataText":"No data","dxDataGrid-emptyHeaderWithColumnChooserText":"Use {0} to display columns","dxDataGrid-emptyHeaderWithGroupPanelText":"Drag a column from the group panel here","dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText":"Use {0} or drag a column from the group panel","dxDataGrid-emptyHeaderColumnChooserText":"column chooser","dxDataGrid-columnChooserTitle":"Column Chooser","dxDataGrid-columnChooserEmptyText":"Drag a column here to hide it","dxDataGrid-groupContinuesMessage":"Continues on the next page","dxDataGrid-groupContinuedMessage":"Continued from the previous page","dxDataGrid-groupHeaderText":"Group by This Column","dxDataGrid-ungroupHeaderText":"Ungroup","dxDataGrid-ungroupAllText":"Ungroup All","dxDataGrid-editingEditRow":"Edit","dxDataGrid-editingSaveRowChanges":"Save","dxDataGrid-editingCancelRowChanges":"Cancel","dxDataGrid-editingDeleteRow":"Delete","dxDataGrid-editingUndeleteRow":"Undelete","dxDataGrid-editingConfirmDeleteMessage":"Are you sure you want to delete this record?","dxDataGrid-validationCancelChanges":"Cancel changes","dxDataGrid-groupPanelEmptyText":"Drag a column header here to group by that column","dxDataGrid-noDataText":"No data","dxDataGrid-searchPanelPlaceholder":"Search...","dxDataGrid-filterRowShowAllText":"(All)","dxDataGrid-filterRowResetOperationText":"Reset","dxDataGrid-filterRowOperationEquals":"Equals","dxDataGrid-filterRowOperationNotEquals":"Does not equal","dxDataGrid-filterRowOperationLess":"Less than","dxDataGrid-filterRowOperationLessOrEquals":"Less than or equal to","dxDataGrid-filterRowOperationGreater":"Greater than","dxDataGrid-filterRowOperationGreaterOrEquals":"Greater than or equal to","dxDataGrid-filterRowOperationStartsWith":"Starts with","dxDataGrid-filterRowOperationContains":"Contains","dxDataGrid-filterRowOperationNotContains":"Does not contain","dxDataGrid-filterRowOperationEndsWith":"Ends with","dxDataGrid-filterRowOperationBetween":"Between","dxDataGrid-filterRowOperationBetweenStartText":"Start","dxDataGrid-filterRowOperationBetweenEndText":"End","dxDataGrid-ariaSearchBox":"Search box","dxDataGrid-applyFilterText":"Apply filter","dxDataGrid-trueText":"true","dxDataGrid-falseText":"false","dxDataGrid-sortingAscendingText":"Sort Ascending","dxDataGrid-sortingDescendingText":"Sort Descending","dxDataGrid-sortingClearText":"Clear Sorting","dxDataGrid-ariaNotSortedColumn":"Not sorted column","dxDataGrid-ariaSortedAscendingColumn":"Column sorted in ascending order","dxDataGrid-ariaSortedDescendingColumn":"Column sorted in descending order","dxDataGrid-ariaSortIndex":"Sort index {0}","dxDataGrid-editingSaveAllChanges":"Save changes","dxDataGrid-editingCancelAllChanges":"Discard changes","dxDataGrid-editingAddRow":"Add a row","dxDataGrid-summaryMin":"Min: {0}","dxDataGrid-summaryMinOtherColumn":"Min of {1} is {0}","dxDataGrid-summaryMax":"Max: {0}","dxDataGrid-summaryMaxOtherColumn":"Max of {1} is {0}","dxDataGrid-summaryAvg":"Avg: {0}","dxDataGrid-summaryAvgOtherColumn":"Avg of {1} is {0}","dxDataGrid-summarySum":"Sum: {0}","dxDataGrid-summarySumOtherColumn":"Sum of {1} is {0}","dxDataGrid-summaryCount":"Count: {0}","dxDataGrid-columnFixingFix":"Fix","dxDataGrid-columnFixingUnfix":"Unfix","dxDataGrid-columnFixingLeftPosition":"To the left","dxDataGrid-columnFixingRightPosition":"To the right","dxDataGrid-exportTo":"Export","dxDataGrid-exportToExcel":"Export to Excel file","dxDataGrid-exporting":"Exporting...","dxDataGrid-excelFormat":"Excel file","dxDataGrid-selectedRows":"Selected rows","dxDataGrid-exportSelectedRows":"Export selected rows to {0}","dxDataGrid-exportAll":"Export all data to {0}","dxDataGrid-headerFilterLabel":"Filter options","dxDataGrid-headerFilterIndicatorLabel":"Show filter options for column '{0}'","dxDataGrid-headerFilterEmptyValue":"(Blanks)","dxDataGrid-headerFilterOK":"OK","dxDataGrid-headerFilterCancel":"Cancel","dxDataGrid-ariaAdaptiveCollapse":"Hide additional data","dxDataGrid-ariaAdaptiveExpand":"Display additional data","dxDataGrid-ariaColumn":"Column","dxDataGrid-ariaColumnHeader":"Column header","dxDataGrid-ariaValue":"Value","dxDataGrid-ariaError":"Error","dxDataGrid-ariaRevertButton":"Press Escape to discard the changes","dxDataGrid-ariaFilterCell":"Filter cell","dxDataGrid-ariaCollapse":"Collapse","dxDataGrid-ariaModifiedCell":"Modified","dxDataGrid-ariaDeletedCell":"Deleted","dxDataGrid-ariaEditableCell":"Editable","dxDataGrid-ariaExpand":"Expand","dxDataGrid-ariaCollapsedRow":"Collapsed row","dxDataGrid-ariaExpandedRow":"Expanded row","dxDataGrid-ariaDataGrid":"Data grid with {0} rows and {1} columns","dxDataGrid-ariaSearchInGrid":"Search in the data grid","dxDataGrid-ariaSelectAll":"Select all","dxDataGrid-ariaSelectRow":"Select row","dxDataGrid-ariaToolbar":"Data grid toolbar","dxDataGrid-ariaEditForm":"Edit form","dxDataGrid-filterBuilderPopupTitle":"Filter Builder","dxDataGrid-filterPanelCreateFilter":"Create Filter","dxDataGrid-filterPanelClearFilter":"Clear","dxDataGrid-filterPanelFilterEnabledHint":"Enable the filter","dxDataGrid-masterDetail":"Cell with details","dxTreeList-ariaTreeList":"Tree list with {0} rows and {1} columns","dxTreeList-ariaSearchInGrid":"Search in the tree list","dxTreeList-ariaToolbar":"Tree list toolbar","dxTreeList-editingAddRowToNode":"Add","dxPager-infoText":"Page {0} of {1} ({2} items)","dxPager-pagesCountText":"of","dxPager-pageSize":"Items per page: {0}","dxPager-pageSizesAllText":"All","dxPager-page":"Page {0}","dxPager-prevPage":"Previous Page","dxPager-nextPage":"Next Page","dxPager-ariaLabel":"Page Navigation","dxPager-ariaPageSize":"Page size","dxPager-ariaPageNumber":"Page number","dxPivotGrid-grandTotal":"Grand Total","dxPivotGrid-total":"{0} Total","dxPivotGrid-fieldChooserTitle":"Field Chooser","dxPivotGrid-showFieldChooser":"Show Field Chooser","dxPivotGrid-expandAll":"Expand All","dxPivotGrid-collapseAll":"Collapse All","dxPivotGrid-sortColumnBySummary":'Sort "{0}" by This Column',"dxPivotGrid-sortRowBySummary":'Sort "{0}" by This Row',"dxPivotGrid-removeAllSorting":"Remove All Sorting","dxPivotGrid-dataNotAvailable":"N/A","dxPivotGrid-rowFields":"Row Fields","dxPivotGrid-columnFields":"Column Fields","dxPivotGrid-dataFields":"Data Fields","dxPivotGrid-filterFields":"Filter Fields","dxPivotGrid-allFields":"All Fields","dxPivotGrid-columnFieldArea":"Drop Column Fields Here","dxPivotGrid-dataFieldArea":"Drop Data Fields Here","dxPivotGrid-rowFieldArea":"Drop Row Fields Here","dxPivotGrid-filterFieldArea":"Drop Filter Fields Here","dxScheduler-editorLabelTitle":"Subject","dxScheduler-editorLabelStartDate":"Start Date","dxScheduler-editorLabelEndDate":"End Date","dxScheduler-editorLabelDescription":"Description","dxScheduler-editorLabelRecurrence":"Repeat","dxScheduler-openAppointment":"Open appointment","dxScheduler-recurrenceNever":"Never","dxScheduler-recurrenceMinutely":"Every minute","dxScheduler-recurrenceHourly":"Hourly","dxScheduler-recurrenceDaily":"Daily","dxScheduler-recurrenceWeekly":"Weekly","dxScheduler-recurrenceMonthly":"Monthly","dxScheduler-recurrenceYearly":"Yearly","dxScheduler-recurrenceRepeatEvery":"Repeat Every","dxScheduler-recurrenceRepeatOn":"Repeat On","dxScheduler-recurrenceEnd":"End repeat","dxScheduler-recurrenceAfter":"After","dxScheduler-recurrenceOn":"On","dxScheduler-recurrenceRepeatMinutely":"minute(s)","dxScheduler-recurrenceRepeatHourly":"hour(s)","dxScheduler-recurrenceRepeatDaily":"day(s)","dxScheduler-recurrenceRepeatWeekly":"week(s)","dxScheduler-recurrenceRepeatMonthly":"month(s)","dxScheduler-recurrenceRepeatYearly":"year(s)","dxScheduler-switcherDay":"Day","dxScheduler-switcherWeek":"Week","dxScheduler-switcherWorkWeek":"Work Week","dxScheduler-switcherMonth":"Month","dxScheduler-switcherAgenda":"Agenda","dxScheduler-switcherTimelineDay":"Timeline Day","dxScheduler-switcherTimelineWeek":"Timeline Week","dxScheduler-switcherTimelineWorkWeek":"Timeline Work Week","dxScheduler-switcherTimelineMonth":"Timeline Month","dxScheduler-recurrenceRepeatOnDate":"on date","dxScheduler-recurrenceRepeatCount":"occurrence(s)","dxScheduler-allDay":"All day","dxScheduler-confirmRecurrenceEditTitle":"Edit Recurring Appointment","dxScheduler-confirmRecurrenceDeleteTitle":"Delete Recurring Appointment","dxScheduler-confirmRecurrenceEditMessage":"Do you want to edit only this appointment or the whole series?","dxScheduler-confirmRecurrenceDeleteMessage":"Do you want to delete only this appointment or the whole series?","dxScheduler-confirmRecurrenceEditSeries":"Edit series","dxScheduler-confirmRecurrenceDeleteSeries":"Delete series","dxScheduler-confirmRecurrenceEditOccurrence":"Edit appointment","dxScheduler-confirmRecurrenceDeleteOccurrence":"Delete appointment","dxScheduler-noTimezoneTitle":"No timezone","dxScheduler-moreAppointments":"{0} more","dxCalendar-currentDay":"Today","dxCalendar-currentMonth":"Current month","dxCalendar-currentYear":"Current year","dxCalendar-currentYearRange":"Current year range","dxCalendar-todayButtonText":"Today","dxCalendar-ariaWidgetName":"Calendar","dxCalendar-previousMonthButtonLabel":"Previous month","dxCalendar-previousYearButtonLabel":"Previous year","dxCalendar-previousDecadeButtonLabel":"Previous decade","dxCalendar-previousCenturyButtonLabel":"Previous century","dxCalendar-nextMonthButtonLabel":"Next month","dxCalendar-nextYearButtonLabel":"Next year","dxCalendar-nextDecadeButtonLabel":"Next decade","dxCalendar-nextCenturyButtonLabel":"Next century","dxCalendar-captionMonthLabel":"Month selection","dxCalendar-captionYearLabel":"Year selection","dxCalendar-captionDecadeLabel":"Decade selection","dxCalendar-captionCenturyLabel":"Century selection","dxCalendar-selectedDate":"The selected date is {0}","dxCalendar-selectedDateRange":"The selected date range is from {0} to {1}","dxColorView-ariaRed":"Red","dxColorView-ariaGreen":"Green","dxColorView-ariaBlue":"Blue","dxColorView-ariaAlpha":"Transparency","dxColorView-ariaHex":"Color code","dxTagBox-selected":"{0} selected","dxTagBox-allSelected":"All selected ({0})","dxTagBox-moreSelected":"{0} more","dxTagBox-tagRoleDescription":"Tag. Press the delete button to remove this tag","vizExport-printingButtonText":"Print","vizExport-titleMenuText":"Exporting/Printing","vizExport-exportButtonText":"{0} file","dxFilterBuilder-and":"And","dxFilterBuilder-or":"Or","dxFilterBuilder-notAnd":"Not And","dxFilterBuilder-notOr":"Not Or","dxFilterBuilder-addCondition":"Add Condition","dxFilterBuilder-addGroup":"Add Group","dxFilterBuilder-enterValueText":"<enter a value>","dxFilterBuilder-filterOperationEquals":"Equals","dxFilterBuilder-filterOperationNotEquals":"Does not equal","dxFilterBuilder-filterOperationLess":"Is less than","dxFilterBuilder-filterOperationLessOrEquals":"Is less than or equal to","dxFilterBuilder-filterOperationGreater":"Is greater than","dxFilterBuilder-filterOperationGreaterOrEquals":"Is greater than or equal to","dxFilterBuilder-filterOperationStartsWith":"Starts with","dxFilterBuilder-filterOperationContains":"Contains","dxFilterBuilder-filterOperationNotContains":"Does not contain","dxFilterBuilder-filterOperationEndsWith":"Ends with","dxFilterBuilder-filterOperationIsBlank":"Is blank","dxFilterBuilder-filterOperationIsNotBlank":"Is not blank","dxFilterBuilder-filterOperationBetween":"Is between","dxFilterBuilder-filterOperationAnyOf":"Is any of","dxFilterBuilder-filterOperationNoneOf":"Is none of","dxHtmlEditor-dialogColorCaption":"Change Font Color","dxHtmlEditor-dialogBackgroundCaption":"Change Background Color","dxHtmlEditor-dialogLinkCaption":"Add Link","dxHtmlEditor-dialogLinkUrlField":"URL","dxHtmlEditor-dialogLinkTextField":"Text","dxHtmlEditor-dialogLinkTargetField":"Open link in new window","dxHtmlEditor-dialogImageCaption":"Add Image","dxHtmlEditor-dialogImageUrlField":"URL","dxHtmlEditor-dialogImageAltField":"Alternate text","dxHtmlEditor-dialogImageWidthField":"Width (px)","dxHtmlEditor-dialogImageHeightField":"Height (px)","dxHtmlEditor-dialogInsertTableRowsField":"Rows","dxHtmlEditor-dialogInsertTableColumnsField":"Columns","dxHtmlEditor-dialogInsertTableCaption":"Insert Table","dxHtmlEditor-dialogUpdateImageCaption":"Update Image","dxHtmlEditor-dialogImageUpdateButton":"Update","dxHtmlEditor-dialogImageAddButton":"Add","dxHtmlEditor-dialogImageSpecifyUrl":"From the Web","dxHtmlEditor-dialogImageSelectFile":"From This Device","dxHtmlEditor-dialogImageKeepAspectRatio":"Keep Aspect Ratio","dxHtmlEditor-dialogImageEncodeToBase64":"Encode to Base64","dxHtmlEditor-heading":"Heading","dxHtmlEditor-normalText":"Normal text","dxHtmlEditor-background":"Background Color","dxHtmlEditor-bold":"Bold","dxHtmlEditor-color":"Font Color","dxHtmlEditor-font":"Font","dxHtmlEditor-italic":"Italic","dxHtmlEditor-link":"Add Link","dxHtmlEditor-image":"Add Image","dxHtmlEditor-size":"Size","dxHtmlEditor-strike":"Strikethrough","dxHtmlEditor-subscript":"Subscript","dxHtmlEditor-superscript":"Superscript","dxHtmlEditor-underline":"Underline","dxHtmlEditor-blockquote":"Blockquote","dxHtmlEditor-header":"Header","dxHtmlEditor-increaseIndent":"Increase Indent","dxHtmlEditor-decreaseIndent":"Decrease Indent","dxHtmlEditor-orderedList":"Ordered List","dxHtmlEditor-bulletList":"Bullet List","dxHtmlEditor-alignLeft":"Align Left","dxHtmlEditor-alignCenter":"Align Center","dxHtmlEditor-alignRight":"Align Right","dxHtmlEditor-alignJustify":"Align Justify","dxHtmlEditor-codeBlock":"Code Block","dxHtmlEditor-variable":"Add Variable","dxHtmlEditor-undo":"Undo","dxHtmlEditor-redo":"Redo","dxHtmlEditor-clear":"Clear Formatting","dxHtmlEditor-insertTable":"Insert Table","dxHtmlEditor-insertHeaderRow":"Insert Header Row","dxHtmlEditor-insertRowAbove":"Insert Row Above","dxHtmlEditor-insertRowBelow":"Insert Row Below","dxHtmlEditor-insertColumnLeft":"Insert Column Left","dxHtmlEditor-insertColumnRight":"Insert Column Right","dxHtmlEditor-deleteColumn":"Delete Column","dxHtmlEditor-deleteRow":"Delete Row","dxHtmlEditor-deleteTable":"Delete Table","dxHtmlEditor-cellProperties":"Cell Properties","dxHtmlEditor-tableProperties":"Table Properties","dxHtmlEditor-insert":"Insert","dxHtmlEditor-delete":"Delete","dxHtmlEditor-border":"Border","dxHtmlEditor-style":"Style","dxHtmlEditor-width":"Width","dxHtmlEditor-height":"Height","dxHtmlEditor-borderColor":"Color","dxHtmlEditor-tableBackground":"Background","dxHtmlEditor-dimensions":"Dimensions","dxHtmlEditor-alignment":"Alignment","dxHtmlEditor-horizontal":"Horizontal","dxHtmlEditor-vertical":"Vertical","dxHtmlEditor-paddingVertical":"Vertical Padding","dxHtmlEditor-paddingHorizontal":"Horizontal Padding","dxHtmlEditor-pixels":"Pixels","dxHtmlEditor-list":"List","dxHtmlEditor-ordered":"Ordered","dxHtmlEditor-bullet":"Bullet","dxHtmlEditor-align":"Align","dxHtmlEditor-center":"Center","dxHtmlEditor-left":"Left","dxHtmlEditor-right":"Right","dxHtmlEditor-indent":"Indent","dxHtmlEditor-justify":"Justify","dxHtmlEditor-borderStyleNone":"none","dxHtmlEditor-borderStyleHidden":"hidden","dxHtmlEditor-borderStyleDotted":"dotted","dxHtmlEditor-borderStyleDashed":"dashed","dxHtmlEditor-borderStyleSolid":"solid","dxHtmlEditor-borderStyleDouble":"double","dxHtmlEditor-borderStyleGroove":"groove","dxHtmlEditor-borderStyleRidge":"ridge","dxHtmlEditor-borderStyleInset":"inset","dxHtmlEditor-borderStyleOutset":"outset","dxFileManager-newDirectoryName":"Untitled directory","dxFileManager-rootDirectoryName":"Files","dxFileManager-errorNoAccess":"Access Denied. Operation could not be completed.","dxFileManager-errorDirectoryExistsFormat":"Directory '{0}' already exists.","dxFileManager-errorFileExistsFormat":"File '{0}' already exists.","dxFileManager-errorFileNotFoundFormat":"File '{0}' not found.","dxFileManager-errorDirectoryNotFoundFormat":"Directory '{0}' not found.","dxFileManager-errorWrongFileExtension":"File extension is not allowed.","dxFileManager-errorMaxFileSizeExceeded":"File size exceeds the maximum allowed size.","dxFileManager-errorInvalidSymbols":"This name contains invalid characters.","dxFileManager-errorDefault":"Unspecified error.","dxFileManager-errorDirectoryOpenFailed":"The directory cannot be opened","dxFileManager-commandCreate":"New directory","dxFileManager-commandRename":"Rename","dxFileManager-commandMove":"Move to","dxFileManager-commandCopy":"Copy to","dxFileManager-commandDelete":"Delete","dxFileManager-commandDownload":"Download","dxFileManager-commandUpload":"Upload files","dxFileManager-commandRefresh":"Refresh","dxFileManager-commandThumbnails":"Thumbnails View","dxFileManager-commandDetails":"Details View","dxFileManager-commandClearSelection":"Clear selection","dxFileManager-commandShowNavPane":"Toggle navigation pane","dxFileManager-dialogDirectoryChooserMoveTitle":"Move to","dxFileManager-dialogDirectoryChooserMoveButtonText":"Move","dxFileManager-dialogDirectoryChooserCopyTitle":"Copy to","dxFileManager-dialogDirectoryChooserCopyButtonText":"Copy","dxFileManager-dialogRenameItemTitle":"Rename","dxFileManager-dialogRenameItemButtonText":"Save","dxFileManager-dialogCreateDirectoryTitle":"New directory","dxFileManager-dialogCreateDirectoryButtonText":"Create","dxFileManager-dialogDeleteItemTitle":"Delete","dxFileManager-dialogDeleteItemButtonText":"Delete","dxFileManager-dialogDeleteItemSingleItemConfirmation":"Are you sure you want to delete {0}?","dxFileManager-dialogDeleteItemMultipleItemsConfirmation":"Are you sure you want to delete {0} items?","dxFileManager-dialogButtonCancel":"Cancel","dxFileManager-editingCreateSingleItemProcessingMessage":"Creating a directory inside {0}","dxFileManager-editingCreateSingleItemSuccessMessage":"Created a directory inside {0}","dxFileManager-editingCreateSingleItemErrorMessage":"Directory was not created","dxFileManager-editingCreateCommonErrorMessage":"Directory was not created","dxFileManager-editingRenameSingleItemProcessingMessage":"Renaming an item inside {0}","dxFileManager-editingRenameSingleItemSuccessMessage":"Renamed an item inside {0}","dxFileManager-editingRenameSingleItemErrorMessage":"Item was not renamed","dxFileManager-editingRenameCommonErrorMessage":"Item was not renamed","dxFileManager-editingDeleteSingleItemProcessingMessage":"Deleting an item from {0}","dxFileManager-editingDeleteMultipleItemsProcessingMessage":"Deleting {0} items from {1}","dxFileManager-editingDeleteSingleItemSuccessMessage":"Deleted an item from {0}","dxFileManager-editingDeleteMultipleItemsSuccessMessage":"Deleted {0} items from {1}","dxFileManager-editingDeleteSingleItemErrorMessage":"Item was not deleted","dxFileManager-editingDeleteMultipleItemsErrorMessage":"{0} items were not deleted","dxFileManager-editingDeleteCommonErrorMessage":"Some items were not deleted","dxFileManager-editingMoveSingleItemProcessingMessage":"Moving an item to {0}","dxFileManager-editingMoveMultipleItemsProcessingMessage":"Moving {0} items to {1}","dxFileManager-editingMoveSingleItemSuccessMessage":"Moved an item to {0}","dxFileManager-editingMoveMultipleItemsSuccessMessage":"Moved {0} items to {1}","dxFileManager-editingMoveSingleItemErrorMessage":"Item was not moved","dxFileManager-editingMoveMultipleItemsErrorMessage":"{0} items were not moved","dxFileManager-editingMoveCommonErrorMessage":"Some items were not moved","dxFileManager-editingCopySingleItemProcessingMessage":"Copying an item to {0}","dxFileManager-editingCopyMultipleItemsProcessingMessage":"Copying {0} items to {1}","dxFileManager-editingCopySingleItemSuccessMessage":"Copied an item to {0}","dxFileManager-editingCopyMultipleItemsSuccessMessage":"Copied {0} items to {1}","dxFileManager-editingCopySingleItemErrorMessage":"Item was not copied","dxFileManager-editingCopyMultipleItemsErrorMessage":"{0} items were not copied","dxFileManager-editingCopyCommonErrorMessage":"Some items were not copied","dxFileManager-editingUploadSingleItemProcessingMessage":"Uploading an item to {0}","dxFileManager-editingUploadMultipleItemsProcessingMessage":"Uploading {0} items to {1}","dxFileManager-editingUploadSingleItemSuccessMessage":"Uploaded an item to {0}","dxFileManager-editingUploadMultipleItemsSuccessMessage":"Uploaded {0} items to {1}","dxFileManager-editingUploadSingleItemErrorMessage":"Item was not uploaded","dxFileManager-editingUploadMultipleItemsErrorMessage":"{0} items were not uploaded","dxFileManager-editingUploadCanceledMessage":"Canceled","dxFileManager-editingDownloadSingleItemErrorMessage":"Item was not downloaded","dxFileManager-editingDownloadMultipleItemsErrorMessage":"{0} items were not downloaded","dxFileManager-listDetailsColumnCaptionName":"Name","dxFileManager-listDetailsColumnCaptionDateModified":"Date Modified","dxFileManager-listDetailsColumnCaptionFileSize":"File Size","dxFileManager-listThumbnailsTooltipTextSize":"Size","dxFileManager-listThumbnailsTooltipTextDateModified":"Date Modified","dxFileManager-notificationProgressPanelTitle":"Progress","dxFileManager-notificationProgressPanelEmptyListText":"No operations","dxFileManager-notificationProgressPanelOperationCanceled":"Canceled","dxDiagram-categoryGeneral":"General","dxDiagram-categoryFlowchart":"Flowchart","dxDiagram-categoryOrgChart":"Org Chart","dxDiagram-categoryContainers":"Containers","dxDiagram-categoryCustom":"Custom","dxDiagram-commandExportToSvg":"Export to SVG","dxDiagram-commandExportToPng":"Export to PNG","dxDiagram-commandExportToJpg":"Export to JPEG","dxDiagram-commandUndo":"Undo","dxDiagram-commandRedo":"Redo","dxDiagram-commandFontName":"Font Name","dxDiagram-commandFontSize":"Font Size","dxDiagram-commandBold":"Bold","dxDiagram-commandItalic":"Italic","dxDiagram-commandUnderline":"Underline","dxDiagram-commandTextColor":"Font Color","dxDiagram-commandLineColor":"Line Color","dxDiagram-commandLineWidth":"Line Width","dxDiagram-commandLineStyle":"Line Style","dxDiagram-commandLineStyleSolid":"Solid","dxDiagram-commandLineStyleDotted":"Dotted","dxDiagram-commandLineStyleDashed":"Dashed","dxDiagram-commandFillColor":"Fill Color","dxDiagram-commandAlignLeft":"Align Left","dxDiagram-commandAlignCenter":"Align Center","dxDiagram-commandAlignRight":"Align Right","dxDiagram-commandConnectorLineType":"Connector Line Type","dxDiagram-commandConnectorLineStraight":"Straight","dxDiagram-commandConnectorLineOrthogonal":"Orthogonal","dxDiagram-commandConnectorLineStart":"Connector Line Start","dxDiagram-commandConnectorLineEnd":"Connector Line End","dxDiagram-commandConnectorLineNone":"None","dxDiagram-commandConnectorLineArrow":"Arrow","dxDiagram-commandFullscreen":"Full Screen","dxDiagram-commandUnits":"Units","dxDiagram-commandPageSize":"Page Size","dxDiagram-commandPageOrientation":"Page Orientation","dxDiagram-commandPageOrientationLandscape":"Landscape","dxDiagram-commandPageOrientationPortrait":"Portrait","dxDiagram-commandPageColor":"Page Color","dxDiagram-commandShowGrid":"Show Grid","dxDiagram-commandSnapToGrid":"Snap to Grid","dxDiagram-commandGridSize":"Grid Size","dxDiagram-commandZoomLevel":"Zoom Level","dxDiagram-commandAutoZoom":"Auto Zoom","dxDiagram-commandFitToContent":"Fit to Content","dxDiagram-commandFitToWidth":"Fit to Width","dxDiagram-commandAutoZoomByContent":"Auto Zoom by Content","dxDiagram-commandAutoZoomByWidth":"Auto Zoom by Width","dxDiagram-commandSimpleView":"Simple View","dxDiagram-commandCut":"Cut","dxDiagram-commandCopy":"Copy","dxDiagram-commandPaste":"Paste","dxDiagram-commandSelectAll":"Select All","dxDiagram-commandDelete":"Delete","dxDiagram-commandBringToFront":"Bring to Front","dxDiagram-commandSendToBack":"Send to Back","dxDiagram-commandLock":"Lock","dxDiagram-commandUnlock":"Unlock","dxDiagram-commandInsertShapeImage":"Insert Image...","dxDiagram-commandEditShapeImage":"Change Image...","dxDiagram-commandDeleteShapeImage":"Delete Image","dxDiagram-commandLayoutLeftToRight":"Left-to-right","dxDiagram-commandLayoutRightToLeft":"Right-to-left","dxDiagram-commandLayoutTopToBottom":"Top-to-bottom","dxDiagram-commandLayoutBottomToTop":"Bottom-to-top","dxDiagram-unitIn":"in","dxDiagram-unitCm":"cm","dxDiagram-unitPx":"px","dxDiagram-dialogButtonOK":"OK","dxDiagram-dialogButtonCancel":"Cancel","dxDiagram-dialogInsertShapeImageTitle":"Insert Image","dxDiagram-dialogEditShapeImageTitle":"Change Image","dxDiagram-dialogEditShapeImageSelectButton":"Select image","dxDiagram-dialogEditShapeImageLabelText":"or drop a file here","dxDiagram-uiExport":"Export","dxDiagram-uiProperties":"Properties","dxDiagram-uiSettings":"Settings","dxDiagram-uiShowToolbox":"Show Toolbox","dxDiagram-uiSearch":"Search","dxDiagram-uiStyle":"Style","dxDiagram-uiLayout":"Layout","dxDiagram-uiLayoutTree":"Tree","dxDiagram-uiLayoutLayered":"Layered","dxDiagram-uiDiagram":"Diagram","dxDiagram-uiText":"Text","dxDiagram-uiObject":"Object","dxDiagram-uiConnector":"Connector","dxDiagram-uiPage":"Page","dxDiagram-shapeText":"Text","dxDiagram-shapeRectangle":"Rectangle","dxDiagram-shapeEllipse":"Ellipse","dxDiagram-shapeCross":"Cross","dxDiagram-shapeTriangle":"Triangle","dxDiagram-shapeDiamond":"Diamond","dxDiagram-shapeHeart":"Heart","dxDiagram-shapePentagon":"Pentagon","dxDiagram-shapeHexagon":"Hexagon","dxDiagram-shapeOctagon":"Octagon","dxDiagram-shapeStar":"Star","dxDiagram-shapeArrowLeft":"Left Arrow","dxDiagram-shapeArrowUp":"Up Arrow","dxDiagram-shapeArrowRight":"Right Arrow","dxDiagram-shapeArrowDown":"Down Arrow","dxDiagram-shapeArrowUpDown":"Up Down Arrow","dxDiagram-shapeArrowLeftRight":"Left Right Arrow","dxDiagram-shapeProcess":"Process","dxDiagram-shapeDecision":"Decision","dxDiagram-shapeTerminator":"Terminator","dxDiagram-shapePredefinedProcess":"Predefined Process","dxDiagram-shapeDocument":"Document","dxDiagram-shapeMultipleDocuments":"Multiple Documents","dxDiagram-shapeManualInput":"Manual Input","dxDiagram-shapePreparation":"Preparation","dxDiagram-shapeData":"Data","dxDiagram-shapeDatabase":"Database","dxDiagram-shapeHardDisk":"Hard Disk","dxDiagram-shapeInternalStorage":"Internal Storage","dxDiagram-shapePaperTape":"Paper Tape","dxDiagram-shapeManualOperation":"Manual Operation","dxDiagram-shapeDelay":"Delay","dxDiagram-shapeStoredData":"Stored Data","dxDiagram-shapeDisplay":"Display","dxDiagram-shapeMerge":"Merge","dxDiagram-shapeConnector":"Connector","dxDiagram-shapeOr":"Or","dxDiagram-shapeSummingJunction":"Summing Junction","dxDiagram-shapeContainerDefaultText":"Container","dxDiagram-shapeVerticalContainer":"Vertical Container","dxDiagram-shapeHorizontalContainer":"Horizontal Container","dxDiagram-shapeCardDefaultText":"Person's Name","dxDiagram-shapeCardWithImageOnLeft":"Card with Image on the Left","dxDiagram-shapeCardWithImageOnTop":"Card with Image on the Top","dxDiagram-shapeCardWithImageOnRight":"Card with Image on the Right","dxGantt-dialogTitle":"Title","dxGantt-dialogStartTitle":"Start","dxGantt-dialogEndTitle":"End","dxGantt-dialogProgressTitle":"Progress","dxGantt-dialogResourcesTitle":"Resources","dxGantt-dialogResourceManagerTitle":"Resource Manager","dxGantt-dialogTaskDetailsTitle":"Task Details","dxGantt-dialogEditResourceListHint":"Edit Resource List","dxGantt-dialogEditNoResources":"No resources","dxGantt-dialogButtonAdd":"Add","dxGantt-contextMenuNewTask":"New Task","dxGantt-contextMenuNewSubtask":"New Subtask","dxGantt-contextMenuDeleteTask":"Delete Task","dxGantt-contextMenuDeleteDependency":"Delete Dependency","dxGantt-dialogTaskDeleteConfirmation":"Deleting a task also deletes all its dependencies and subtasks. Are you sure you want to delete this task?","dxGantt-dialogDependencyDeleteConfirmation":"Are you sure you want to delete the dependency from the task?","dxGantt-dialogResourcesDeleteConfirmation":"Deleting a resource also deletes it from tasks to which this resource is assigned. Are you sure you want to delete these resources? Resources: {0}","dxGantt-dialogConstraintCriticalViolationMessage":"The task you are attempting to move is linked to a second task by a dependency relation. This change would conflict with dependency rules. How would you like to proceed?","dxGantt-dialogConstraintViolationMessage":"The task you are attempting to move is linked to a second task by a dependency relation. How would you like to proceed?","dxGantt-dialogCancelOperationMessage":"Cancel the operation","dxGantt-dialogDeleteDependencyMessage":"Delete the dependency","dxGantt-dialogMoveTaskAndKeepDependencyMessage":"Move the task and keep the dependency","dxGantt-dialogConstraintCriticalViolationSeveralTasksMessage":"The task you are attempting to move is linked to another tasks by dependency relations. This change would conflict with dependency rules. How would you like to proceed?","dxGantt-dialogConstraintViolationSeveralTasksMessage":"The task you are attempting to move is linked to another tasks by dependency relations. How would you like to proceed?","dxGantt-dialogDeleteDependenciesMessage":"Delete the dependency relations","dxGantt-dialogMoveTaskAndKeepDependenciesMessage":"Move the task and keep the dependencies","dxGantt-undo":"Undo","dxGantt-redo":"Redo","dxGantt-expandAll":"Expand All","dxGantt-collapseAll":"Collapse All","dxGantt-addNewTask":"Add New Task","dxGantt-deleteSelectedTask":"Delete Selected Task","dxGantt-zoomIn":"Zoom In","dxGantt-zoomOut":"Zoom Out","dxGantt-fullScreen":"Full Screen","dxGantt-quarter":"Q{0}","dxGantt-sortingAscendingText":"Sort Ascending","dxGantt-sortingDescendingText":"Sort Descending","dxGantt-sortingClearText":"Clear Sorting","dxGantt-showResources":"Show Resources","dxGantt-showDependencies":"Show Dependencies","dxGantt-dialogStartDateValidation":"Start date must be after {0}","dxGantt-dialogEndDateValidation":"End date must be after {0}","dxGallery-itemName":"Gallery item","dxMultiView-elementAriaRoleDescription":"MultiView","dxMultiView-elementAriaLabel":"Use the arrow keys or swipe to navigate between views","dxMultiView-itemAriaRoleDescription":"View","dxMultiView-itemAriaLabel":"{0} of {1}","dxSplitter-resizeHandleAriaLabel":"Split bar"}},l6=T(!0,{},a6),c6=(t,e)=>{var n;return t[e]||(e==null?void 0:e.toLowerCase)&&((n=Object.entries(t).find(i=>{let[s]=i;return s.toLowerCase()===e.toLowerCase()}))===null||n===void 0?void 0:n[1])||{}},Ev={},q=Rs({engine:function(){return"base"},_dictionary:l6,load:function(t){T(!0,this._dictionary,t)},_localizablePrefix:"@",setup:function(t){this._localizablePrefix=t},localizeString:function(t){const e=this,n=new RegExp("(^|[^a-zA-Z_0-9"+e._localizablePrefix+"-]+)("+e._localizablePrefix+"{1,2})([a-zA-Z_0-9-]+)","g"),i=e._localizablePrefix+e._localizablePrefix;return t.replace(n,(s,r,o,a)=>{const l=e._localizablePrefix+a;let c;return o!==i&&(c=e.format(a)),c||(Ev[a]=RU(a)),r+(c||l)})},getMessagesByLocales:function(){return this._dictionary},getDictionary:function(t){return t?Ev:T({},Ev,this.getMessagesByLocales()[Di.locale()])},getFormatter:function(t){return this._getFormatterBase(t)||this._getFormatterBase(t,"en")},_getFormatterBase:function(t,e){const n=Di.getValueByClosestLocale(i=>c6(this._dictionary,i)[t]);if(n)return function(){const i=arguments.length===1&&Array.isArray(arguments[0])?arguments[0].slice(0):Array.prototype.slice.call(arguments,0);return i.unshift(n),jm.apply(this,i)}},format:function(t){const e=this.getFormatter(t),n=Array.prototype.slice.call(arguments,1);return e&&e.apply(this,n)||""}});let Vo=class Ql{constructor(e,n){n=n||{},this._action=e,this._context=n.context||pe(),this._beforeExecute=n.beforeExecute,this._afterExecute=n.afterExecute,this._component=n.component,this._validatingTargetName=n.validatingTargetName;const i=this._excludeValidators={};if(n.excludeValidators)for(let s=0;s<n.excludeValidators.length;s++)i[n.excludeValidators[s]]=!0}execute(){const e={action:this._action,args:Array.prototype.slice.call(arguments),context:this._context,component:this._component,validatingTargetName:this._validatingTargetName,cancel:!1,handled:!1},n=this._beforeExecute,i=this._afterExecute,s=e.args[0]||{};if(!this._validateAction(e)||(n==null||n.call(this._context,e),e.cancel))return;const r=this._executeAction(e);if(!s.cancel)return i==null||i.call(this._context,e),r}_validateAction(e){const n=this._excludeValidators,{executors:i}=Ql;for(const r in i)if(!n[r]){var s;const o=i[r];if((s=o.validate)===null||s===void 0||s.call(o,e),e.cancel)return!1}return!0}_executeAction(e){let n;const{executors:i}=Ql;for(const r in i){var s;const o=i[r];if((s=o.execute)===null||s===void 0||s.call(o,e),e.handled){n=e.result;break}}return n}static registerExecutor(e,n){if(Ce(e)){N(e,Ql.registerExecutor);return}Ql.executors[e]=n}static unregisterExecutor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];N(n,function(){delete Ql.executors[this]})}};Vo.executors={};const lA=t=>e=>{if(!e.args.length)return;const n=e.args[0],i=n[e.validatingTargetName]||n.element;i&&t(m(i))&&(e.cancel=!0)};Vo.registerExecutor({disabled:{validate:lA(t=>t.is(".dx-state-disabled, .dx-state-disabled *"))},readOnly:{validate:lA(t=>t.is(".dx-state-readonly, .dx-state-readonly *:not(.dx-state-independent)"))},undefined:{execute:t=>{t.action||(t.result=void 0,t.handled=!0)}},func:{execute:t=>{ie(t.action)&&(t.result=t.action.call(t.context,t.args[0]),t.handled=!0)}}});const u6=/matrix(3d)?\((.+?)\)/,d6=/translate(?:3d)?\((.+?)\)/,Gn=function(t){t=m(t);const e=ig(t);return{left:e.x,top:e.y}};function ng(t){return as(t)==="string"&&t[t.length-1]==="%"}function TB(t,e){t.length&&st(t.get(0),"dxTranslator",e)}const Ww=function(t){t.length&&o_(t.get(0),"dxTranslator")},qh=function(t){t.x=t.x||0,t.y=t.y||0;const e=ng(t.x)?t.x:t.x+"px",n=ng(t.y)?t.y:t.y+"px";return"translate("+e+", "+n+")"},ig=function(t){let e=t.length?st(t.get(0),"dxTranslator"):null;if(!e){let i=(t.css("transform")||qh({x:0,y:0})).match(u6);const s=i&&i[1];i?(i=i[2].split(","),s==="3d"?i=i.slice(12,15):(i.push(0),i=i.slice(4,7))):i=[0,0,0],e={x:parseFloat(i[0]),y:parseFloat(i[1]),z:parseFloat(i[2])},TB(t,e)}return e},Ft=function(t,e){t=m(t);const n=e.left,i=e.top;let s;n===void 0?(s=ig(t),s.y=i||0):i===void 0?(s=ig(t),s.x=n||0):(s={x:n||0,y:i||0,z:0},TB(t,s)),t.css({transform:qh(s)}),(ng(n)||ng(i))&&Ww(t)},Yh=function(t,e){t=m(t);let n;const i={left:0,top:0,transform:"none"};e&&(n=t.css("transition"),i.transition="none"),t.css(i),Ww(t),e&&(t.get(0).offsetHeight,t.css("transition",n))},h6=function(t){let e=t.match(d6);if(!(!e||!e[1]))return e=e[1].split(","),e={x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])},e},cA=/cubic-bezier\((\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\)/,uA={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)"},p6=function(t,e,n,i){const s=3*t,r=3*(n-t)-s,o=1-s-r,a=3*e,l=3*(i-e)-a,c=1-a-l,u=function(p){return p*(s+p*(r+p*o))},d=function(p){return s+p*(2*r+3*p*o)};return function(p){return function(f){return f*(a+f*(l+f*c))}(function(f){let g=f,y=0,v;for(;y<14&&(v=u(g)-f,!(Math.abs(v)<.001));)g-=v/d(g),y++;return g}(p))}};let ND={};const f6=function(t){t=uA[t]||t;let e=t.match(cA),n;e||(n="linear",e=uA[n].match(cA)),e=e.slice(1,5);for(let s=0;s<e.length;s++)e[s]=parseFloat(e[s]);const i=n||"cubicbezier_"+e.join("_").replace(/\./g,"p");return ie(ND[i])||(ND[i]=function(s,r,o,a,l){return a*p6(e[0],e[1],e[2],e[3])(r/l)+o}),i};function m6(t){return ND[t]}const ji=ae()?pe():{};let IB=function(t){return setTimeout(t,16.666666666666668)},AB=function(t){clearTimeout(t)};const kB=Jr(function(){const t=ji.requestAnimationFrame||ji.webkitRequestAnimationFrame||ji.mozRequestAnimationFrame||ji.oRequestAnimationFrame||ji.msRequestAnimationFrame,e=ji.cancelAnimationFrame||ji.webkitCancelAnimationFrame||ji.mozCancelAnimationFrame||ji.oCancelAnimationFrame||ji.msCancelAnimationFrame;t&&e&&(IB=t,AB=e)});function ah(){return kB(),IB.apply(ji,arguments)}function Sr(){kB(),AB.apply(ji,arguments)}const{maxTouchPoints:RB}=Hh(),g6={webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},Gw=function(t){return!!gl(t)},_6=function(){const{platform:t,mac:e}=X.real();return t==="ios"||t==="android"||e},f_=function(t){if(t==="text")return!0;const e=W.createElement("input");try{return e.setAttribute("type",t),e.value="wrongValue",!e.value}catch{return!1}},y6=function(t,e){return(t("ontouchstart")||!!e)&&!t("callPhantom")},v6=function(t){return t("PointerEvent")},OB=y6(rV,RB),PB=v6(rV),C6=!!RB,rl=OB||PB&&C6,zD=Jr(function(){return Gw("transition")}),MB=Jr(function(){return g6[gl("transition")]}),WD=Jr(function(){return Gw("animation")}),lh=_6(),D6=Object.freeze(Object.defineProperty({__proto__:null,animation:WD,inputType:f_,nativeScrolling:lh,pointerEvents:PB,styleProp:gl,stylePropPrefix:Xf,supportProp:Gw,touch:rl,touchEvents:OB,transition:zD,transitionEndEventName:MB},Symbol.toStringTag,{value:"Module"})),x6=Hh(),w6=/(webkit)[ /]([\w.]+)/,S6=/(mozilla)(?:.*? rv:([\w.]+))/,dA=t=>{t=t.toLowerCase();const e={},n=w6.exec(t)||t.indexOf("compatible")<0&&S6.exec(t)||[];let i=n[1],s=n[2];return i==="webkit"&&(e.webkit=!0,t.indexOf("chrome")>=0||t.indexOf("crios")>=0?(i="chrome",s=/(?:chrome|crios)\/(\d+\.\d+)/.exec(t),s=s&&s[1]):t.indexOf("fxios")>=0?(i="mozilla",s=/fxios\/(\d+\.\d+)/.exec(t),s=s&&s[1]):t.indexOf("safari")>=0&&/version|phantomjs/.test(t)?(i="safari",s=/(?:version|phantomjs)\/([0-9.]+)/.exec(t),s=s&&s[1]):(i="unknown",s=/applewebkit\/([0-9.]+)/.exec(t),s=s&&s[1])),i&&(e[i]=!0,e.version=s),e},is=T({_fromUA:dA},dA(x6.userAgent)),hA=pe(),b6=/left|right/,E6=/top|bottom/,pA=/fit|flip|none/,T6=/scale\(.+?\)/,I6=is.safari,GD=function(t){const e={h:"center",v:"center"},n=cu(t);return n&&N(n,function(){const i=String(this).toLowerCase();b6.test(i)?e.h=i:E6.test(i)&&(e.v=i)}),e},fA=function(t,e){return dw(t,e)},A6=function(t){const e=cu(t);let n=String(e&&e[0]).toLowerCase(),i=String(e&&e[1]).toLowerCase();return pA.test(n)||(n="none"),pA.test(i)||(i=n),{h:n,v:i}},mA=function(t){switch(t){case"center":return .5;case"right":case"bottom":return 1;default:return 0}},UD=function(t){switch(t){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return t}},KD=function(t,e){let n=0;return t.myLocation<e.min&&(n+=e.min-t.myLocation),t.myLocation>e.max&&(n+=t.myLocation-e.max),n},gA=function(t,e,n){return e.myLocation<n.min?t==="h"?"left":"top":e.myLocation>n.max?t==="h"?"right":"bottom":"none"},jD=function(t){t.myLocation=t.atLocation+mA(t.atAlign)*t.atSize-mA(t.myAlign)*t.mySize+t.offset},of={fit:function(t,e){let n=!1;t.myLocation>e.max&&(t.myLocation=e.max,n=!0),t.myLocation<e.min&&(t.myLocation=e.min,n=!0),t.fit=n},flip:function(t,e){if(t.flip=!1,!(t.myAlign==="center"&&t.atAlign==="center")&&(t.myLocation<e.min||t.myLocation>e.max)){const n=T({},t,{myAlign:UD(t.myAlign),atAlign:UD(t.atAlign),offset:-t.offset});jD(n),n.oversize=KD(n,e),(n.myLocation>=e.min&&n.myLocation<=e.max||t.oversize>n.oversize)&&(t.myLocation=n.myLocation,t.oversize=n.oversize,t.flip=!0)}},flipfit:function(t,e){this.flip(t,e),this.fit(t,e)},none:function(t){t.oversize=0}};let VB;const BB=function(){const t=m("<div>").css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(m("body")),e=t.get(0).offsetWidth-t.get(0).clientWidth;t.remove(),VB=e},k6={h:{location:0,flip:!1,fit:!1,oversize:0},v:{location:0,flip:!1,fit:!1,oversize:0}},LB=function(t,e){const n=m(t),i=n.offset(),s=T(!0,{},k6,{h:{location:i.left},v:{location:i.top}});if(!e)return s;const r=GD(e.my),o=GD(e.at);let a=m(e.of).length&&e.of||hA;const l=fA(e.offset,e.precise),c=A6(e.collision),u=e.boundary,d=fA(e.boundaryOffset,e.precise),p={mySize:et(n),myAlign:r.h,atAlign:o.h,offset:l.h,collision:c.h,boundaryOffset:d.h},f={mySize:tt(n),myAlign:r.v,atAlign:o.v,offset:l.v,collision:c.v,boundaryOffset:d.v};if(a.preventDefault)p.atLocation=a.pageX,f.atLocation=a.pageY,p.atSize=0,f.atSize=0;else if(a=m(a),bt(a[0]))p.atLocation=a.scrollLeft(),f.atLocation=a.scrollTop(),X.real().deviceType==="phone"&&a[0].visualViewport?(p.atLocation=Math.max(p.atLocation,a[0].visualViewport.offsetLeft),f.atLocation=Math.max(f.atLocation,a[0].visualViewport.offsetTop),p.atSize=a[0].visualViewport.width,f.atSize=a[0].visualViewport.height):(p.atSize=a[0].innerWidth>a[0].outerWidth?a[0].innerWidth:me(a),f.atSize=a[0].innerHeight>a[0].outerHeight||I6?a[0].innerHeight:Re(a));else if(a[0].nodeType===9)p.atLocation=0,f.atLocation=0,p.atSize=me(a),f.atSize=Re(a);else{const v=ke(a.get(0)),C=sg(a);p.atLocation=C.left,f.atLocation=C.top,p.atSize=Math.max(v.width,et(a)),f.atSize=Math.max(v.height,tt(a))}jD(p),jD(f);const g=function(){const v=m(hA),C=me(v),x=Re(v);let S=v.scrollLeft(),O=v.scrollTop();const H=W.getDocumentElement(),F=rl?H.clientWidth/C:1,I=rl?H.clientHeight/x:1;VB===void 0&&BB();let w=C,A=x;if(u&&!bt(u)){const k=m(u),P=k.offset();S=P.left,O=P.top,w=me(k),A=Re(k)}return{h:{min:S+p.boundaryOffset,max:S+w/F-p.mySize-p.boundaryOffset},v:{min:O+f.boundaryOffset,max:O+A/I-f.mySize-f.boundaryOffset}}}();p.oversize=KD(p,g.h),f.oversize=KD(f,g.v),p.collisionSide=gA("h",p,g.h),f.collisionSide=gA("v",f,g.v),of[p.collision]&&of[p.collision](p,g.h),of[f.collision]&&of[f.collision](f,g.v);const y=function(v){return e.precise?v:Math.round(v)};return T(!0,s,{h:{location:y(p.myLocation),oversize:y(p.oversize),fit:p.fit,flip:p.flip,collisionSide:p.collisionSide},v:{location:y(f.myLocation),oversize:y(f.oversize),fit:f.fit,flip:f.flip,collisionSide:f.collisionSide},precise:e.precise}),s},_A=function(t,e,n,i){const s=M(t.style)&&!W.isNode(t.style),r=i?n.replace(e,""):n;if(s)_V(t,r,!1);else{const o=W.createAttribute("style");o.value=r,t.setAttributeNode(o)}},sg=function(t){var e,n;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;const s=i.get(0);if(!s)return t.offset();const r=((e=s.getAttribute)===null||e===void 0?void 0:e.call(s,"style"))||"",o=(n=r.match(T6))===null||n===void 0?void 0:n[0];let a;return o?(_A(s,o,r,!0),a=sg(t,i.parent()),_A(s,o,r,!1)):a=sg(t,i.parent()),a},ch=function(t,e){const n=m(t);if(!e)return n.offset();Yh(n,!0);const i=sg(n),s=e.h&&e.v?e:LB(n,e),r=function(o){return e.precise?o:Math.round(o)};return Ft(n,{left:s.h.location-r(i.left),top:s.v.location-r(i.top)}),s},R6=function(t){return t=m(t).get(0),bt(t)?null:t&&"pageY"in t&&"pageX"in t?{top:t.pageY,left:t.pageX}:m(t).offset()};ch.inverseAlign||(ch.inverseAlign=UD);ch.normalizeAlign||(ch.normalizeAlign=GD);const fi={calculateScrollbarWidth:BB,calculate:LB,setup:ch,offset:R6},qD=(t,e)=>{if(!e)throw Te.Error("E0017");return Array.isArray(t)?t.map(n=>qD(n,e)).join(" "):t.indexOf(" ")!==-1?qD(t.split(/\s+/g),e):`${t}.${e}`},$B=function(t,e){if(!O6(t))return!1;const n=t.nodeName.toLowerCase(),i=!isNaN(e),s=t.disabled,r=/^(input|select|textarea|button|object|iframe)$/.test(n),o=n==="a";let a;const l=t.isContentEditable;return r||l?a=!s:o?a=t.href||i:a=i,a};function O6(t){const e=m(t);return e.is(":visible")&&e.css("visibility")!=="hidden"&&e.parents().css("visibility")!=="hidden"}const YD=function(t,e){return $B(e,m(e).attr("tabIndex"))},yA=function(t,e){const n=m(e).attr("tabIndex");return(isNaN(n)||n>=0)&&$B(e,n)},Kc=function(t){const e=m(t).get(0);return W.getActiveElement(e)===e},P6={backspace:"backspace",tab:"tab",enter:"enter",escape:"escape",pageup:"pageUp",pagedown:"pageDown",end:"end",home:"home",arrowleft:"leftArrow",arrowup:"upArrow",arrowright:"rightArrow",arrowdown:"downArrow",delete:"del"," ":"space",f:"F",a:"A","*":"asterisk","-":"minus",alt:"alt",control:"control",shift:"shift"},M6={8:"backspace",9:"tab",13:"enter",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",46:"del",32:"space",70:"F",65:"A",106:"asterisk",109:"minus",189:"minus",173:"minus",16:"shift",17:"control",18:"alt"},V6={dx:/^dx/i,mouse:/(mouse|wheel)/i,touch:/^touch/i,keyboard:/^key/i,pointer:/^(ms)?pointer/i};let B6=t=>t;const L6=t=>B6(b.Event(t,t)),Uw=t=>Zh(t)==="dx",$6=t=>Zh(t)==="mouse",FB=t=>Zh(t)==="touch",Zh=t=>{let{type:e}=t,n="other";return N(V6,function(i){if(this.test(e))return n=i,!1}),n},HB=t=>Zh(t)==="pointer",Gr=t=>$6(t)||(HB(t)||Uw(t))&&t.pointerType==="mouse",Wn=t=>t&&t.type==="dxmousewheel",m_=t=>FB(t)||(HB(t)||Uw(t))&&t.pointerType==="touch",F6=t=>{let{screenX:e,offsetX:n,pageX:i}=t;return e===0&&!n&&i===0},At=t=>{let{pageX:e,pageY:n,timeStamp:i}=t;return{x:e,y:n,time:i}},Va=(t,e)=>({x:e.x-t.x,y:e.y-t.y,time:e.time-t.time||1}),H6=t=>{const{originalEvent:e,pointers:n}=t;return FB(t)?(e.touches||[]).length:Uw(t)?(n||[]).length:0},NB=t=>{const{target:e}=t,n=m(e),i=(e==null?void 0:e.isContentEditable)||(e==null?void 0:e.hasAttribute("contenteditable")),s=n.is("input, textarea, select")||i;if(Wn(t))return n.is("textarea")&&n.hasClass("dx-texteditor-input")||i?!1:n.is("input[type='number'], textarea, select")&&n.is(":focus");if(Gr(t))return s||t.which>1;if(m_(t))return s&&Kc(n)},Kw=(t,e)=>{const n=L6(t);return e&&T(n,e),n},ta=t=>{const{originalEvent:e,delegateTarget:n}=t,i=Kw(e,t);return b.trigger(n||i.target,i),i},tn=t=>{let{key:e,which:n}=t;const i=P6[e==null?void 0:e.toLowerCase()]||e,s=M6[n];return s&&i===e?s:!i&&n?String.fromCharCode(n):i},ZD=t=>{let{key:e,which:n}=t;return e||String.fromCharCode(n)},K=qD,bn=t=>{let{ctrlKey:e,metaKey:n}=t;return e||n},zB=pe(),Id=K(_l,"dxFX"),N6=/^([+-])=(.*)/i,uh="dxAnimData",jw="dxAnimQueue",z6={initAnimation:function(t,e){t.css({transitionProperty:"none"}),typeof e.from=="string"?t.addClass(e.from):XD(t,e.from);const n=this,i=new j,s=e.cleanupWhen;e.transitionAnimation={deferred:i,finish:function(){n._finishTransition(t),s?Ne(i,s).always(function(){n._cleanup(t,e)}):n._cleanup(t,e),i.resolveWith(t,[e,t])}},this._completeAnimationCallback(t,e).done(function(){e.transitionAnimation.finish()}).fail(function(){i.rejectWith(t,[e,t])}),e.duration||e.transitionAnimation.finish(),t.css("transform")},animate:function(t,e){return this._startAnimation(t,e),e.transitionAnimation.deferred.promise()},_completeAnimationCallback:function(t,e){const n=this,i=Date.now()+e.delay,s=new j,r=new j,o=new j;let a;const l=MB()+".dxFX";e.transitionAnimation.cleanup=function(){clearTimeout(a),clearTimeout(c),b.off(t,l),b.off(t,Id)},b.one(t,l,function(){Date.now()-i>=e.duration&&r.reject()}),b.off(t,Id),b.on(t,Id,function(){n.stop(t,e),s.reject()});const c=setTimeout(function(){a=setTimeout(function(){o.reject()},e.duration+e.delay+Tt._simulatedTransitionEndDelay),Ne(r,o).fail((function(){s.resolve()}).bind(this))});return s.promise()},_startAnimation:function(t,e){t.css({transitionProperty:"all",transitionDelay:e.delay+"ms",transitionDuration:e.duration+"ms",transitionTimingFunction:e.easing}),typeof e.to=="string"?t[0].className+=" "+e.to:e.to&&XD(t,e.to)},_finishTransition:function(t){t.css("transition","none")},_cleanup:function(t,e){e.transitionAnimation.cleanup(),typeof e.from=="string"&&(t.removeClass(e.from),t.removeClass(e.to))},stop:function(t,e,n){e&&(n?e.transitionAnimation.finish():(Ce(e.to)&&N(e.to,function(i){t.css(i,t.css(i))}),this._finishTransition(t),this._cleanup(t,e)))}},vA={initAnimation:function(t,e){XD(t,e.from)},animate:function(t,e){const n=new j,i=this;return e?(N(e.to,function(s){e.from[s]===void 0&&(e.from[s]=i._normalizeValue(t.css(s)))}),e.to.transform&&(e.from.transform=i._parseTransform(e.from.transform),e.to.transform=i._parseTransform(e.to.transform)),e.frameAnimation={to:e.to,from:e.from,currentValue:e.from,easing:f6(e.easing),duration:e.duration,startTime:new Date().valueOf(),finish:function(){this.currentValue=this.to,this.draw(),Sr(e.frameAnimation.animationFrameId),n.resolve()},draw:function(){if(e.draw){e.draw(this.currentValue);return}const s=T({},this.currentValue);s.transform&&(s.transform=Yn(s.transform,function(r,o){if(o==="translate")return qh(r);if(o==="scale")return"scale("+r+")";if(o.substr(0,o.length-1)==="rotate")return o+"("+r+"deg)"}).join(" ")),t.css(s)}},e.delay?(e.frameAnimation.startTime+=e.delay,e.frameAnimation.delayTimeout=setTimeout(function(){i._startAnimation(t,e)},e.delay)):i._startAnimation(t,e),n.promise()):n.reject().promise()},_startAnimation:function(t,e){b.off(t,Id),b.on(t,Id,function(){e.frameAnimation&&Sr(e.frameAnimation.animationFrameId)}),this._animationStep(t,e)},_parseTransform:function(t){const e={};return N(t.match(/\w+\d*\w*\([^)]*\)\s*/g),function(n,i){const s=h6(i),r=i.match(/scale\((.+?)\)/),o=i.match(/(rotate.)\((.+)deg\)/);s&&(e.translate=s),r&&r[1]&&(e.scale=parseFloat(r[1])),o&&o[1]&&(e[o[1]]=parseFloat(o[2]))}),e},stop:function(t,e,n){const i=e&&e.frameAnimation;i&&(Sr(i.animationFrameId),clearTimeout(i.delayTimeout),n&&i.finish(),delete e.frameAnimation)},_animationStep:function(t,e){const n=e&&e.frameAnimation;if(!n)return;const i=new Date().valueOf();if(i>=n.startTime+n.duration){n.finish();return}n.currentValue=this._calcStepValue(n,i-n.startTime),n.draw();const s=this;n.animationFrameId=ah(function(){s._animationStep(t,e)})},_calcStepValue:function(t,e){const n=function(i,s){const r=Array.isArray(s)?[]:{};return N(s,function(o,a){if(typeof a=="string"&&parseFloat(a)===!1)return!0;r[o]=typeof a=="object"?n(i[o],a):function(l){const c=e/t.duration,u=e,d=1*i[l],p=s[l]-i[l],f=t.duration;return m6(t.easing)(c,u,d,p,f)}(o)}),r};return n(t.from,t.to)},_normalizeValue:function(t){const e=parseFloat(t);return e===!1?t:e}},W6={initAnimation:function(){},animate:function(){return new j().resolve().promise()},stop:B,isSynchronous:!0},G6=function(t){t=t||{};const e={transition:zD()?z6:vA,frame:vA,noAnimation:W6};let n=t.strategy||"transition";return t.type==="css"&&!zD()&&(n="noAnimation"),e[n]},WB=function(t,e,n,i){N(["from","to"],function(){if(!n(t[this]))throw Te.Error("E0010",e,this,i)})},GB=function(t,e){return WB(t,e,function(n){return Ce(n)},"a plain object")},U6=function(t,e){return WB(t,e,function(n){return typeof n=="string"},"a string")},K6={setup:function(){}},j6={validateConfig:function(t){U6(t,"css")},setup:function(){}},q6={top:{my:"bottom center",at:"top center"},bottom:{my:"top center",at:"bottom center"},right:{my:"left center",at:"right center"},left:{my:"right center",at:"left center"}},Tv={validateConfig:function(t){GB(t,"slide")},setup:function(t,e){const n=Gn(t);if(e.type!=="slide"){const i=e.type==="slideIn"?e.from:e.to;i.position=T({of:zB},q6[e.direction]),QD(t,i)}this._setUpConfig(n,e.from),this._setUpConfig(n,e.to),Ww(t)},_setUpConfig:function(t,e){e.left="left"in e?e.left:"+=0",e.top="top"in e?e.top:"+=0",this._initNewPosition(t,e)},_initNewPosition:function(t,e){const n={left:e.left,top:e.top};delete e.left,delete e.top;let i=this._getRelativeValue(n.left);i!==void 0?n.left=i+t.left:e.left=0,i=this._getRelativeValue(n.top),i!==void 0?n.top=i+t.top:e.top=0,e.transform=qh({x:n.left,y:n.top})},_getRelativeValue:function(t){let e;if(typeof t=="string"&&(e=N6.exec(t)))return parseInt(e[1]+"1")*e[2]}},Iv={setup:function(t,e){const n=e.from,i=e.to,s=e.type==="fadeOut"?1:0,r=e.type==="fadeOut"?0:1;let o=Ce(n)?String(n.opacity??s):String(n),a=Ce(i)?String(i.opacity??r):String(i);switch(e.skipElementInitialStyles||(o=t.css("opacity")),e.type){case"fadeIn":a=1;break;case"fadeOut":a=0}e.from={visibility:"visible",opacity:o},e.to={opacity:a}}},Y6={validateConfig:function(t){GB(t,"pop")},setup:function(t,e){const n=e.from,i=e.to,s="opacity"in n?n.opacity:t.css("opacity"),r="opacity"in i?i.opacity:1,o="scale"in n?n.scale:0,a="scale"in i?i.scale:1;e.from={opacity:s};const l=ig(t);e.from.transform=this._getCssTransform(l,o),e.to={opacity:r},e.to.transform=this._getCssTransform(l,a)},_getCssTransform:function(t,e){return qh(t)+"scale("+e+")"}},UB={custom:K6,slide:Tv,slideIn:Tv,slideOut:Tv,fade:Iv,fadeIn:Iv,fadeOut:Iv,pop:Y6,css:j6},Z6=function(t){const e=UB[t.type];if(!e)throw Te.Error("E0011",t.type);return e},Q6={type:"custom",from:{},to:{},duration:400,start:B,complete:B,easing:"ease",delay:0},X6={duration:400,easing:"ease",delay:0};function J6(){const t=this.element,e=this.config;if(QD(t,e.from),QD(t,e.to),this.configurator.setup(t,e),t.data(uh,this),this.strategy.initAnimation(t,e),e.start){const n=se(t);e.start.apply(this,[n,e])}}const e9=function(t){const e=t.element,n=t.config;if(e.removeData(uh),n.complete){const i=se(e);n.complete.apply(this,[i,n])}t.deferred.resolveWith(this,[e,n])},t9=function(){const t=this,e=t.element,n=t.config;return t.isStarted=!0,t.strategy.animate(e,n).done(function(){e9(t)}).fail(function(){t.deferred.rejectWith(this,[e,n])})},n9=function(t){const e=this,n=e.element,i=e.config;clearTimeout(e.startTimeout),e.isStarted||e.start(),e.strategy.stop(n,i,t)},Av=K(_l,"dxFXStartAnimation"),i9=function(t){b.off(t.element,Av),b.on(t.element,Av,function(){Tt.stop(t.element)}),t.deferred.always(function(){b.off(t.element,Av)})},KB=function(t,e){const n=e.type==="css"?X6:Q6,i=T(!0,{},n,e),s=Z6(i),r=G6(i),o={element:m(t),config:i,configurator:s,strategy:r,isSynchronous:r.isSynchronous,setup:J6,start:t9,stop:n9,deferred:new j};return ie(s.validateConfig)&&s.validateConfig(i),i9(o),o},s9=function(t,e){const n=m(t);if(!n.length)return new j().resolve().promise();const i=KB(n,e);return r9(n,i),i.deferred.promise()};function r9(t,e){const n=qw(t);o9(t,n),n.push(e),g_(t)||Yw(t,n)}function qw(t){return t.data(jw)||[]}function o9(t,e){t.data(jw,e)}const jB=function(t){t.removeData(jw)};function g_(t){return!!t.data(uh)}function Yw(t,e){if(e=qw(t),!e.length)return;const n=e.shift();e.length===0&&jB(t),a9(n).done(function(){g_(t)||Yw(t)})}function a9(t){return t.setup(),t.isSynchronous?t.start():t.startTimeout=setTimeout(function(){t.start()}),t.deferred.promise()}function QD(t,e){if(!e||!e.position)return;const n=m(zB);let i=0,s=0;const r=fi.calculate(t,e.position),o=t.offset(),a=t.position();a.top>o.top&&(s=n.scrollTop()),a.left>o.left&&(i=n.scrollLeft()),T(e,{left:r.h.location-o.left+a.left-i,top:r.v.location-o.top+a.top-s}),delete e.position}function XD(t,e){N(e,function(n,i){try{t.css(n,ie(i)?i():i)}catch{}})}const l9=function(t,e){const n=m(t),i=qw(n);N(i,function(r,o){o.config.delay=0,o.config.duration=0,o.isSynchronous=!0}),g_(n)||Yw(n,i);const s=n.data(uh);s&&s.stop(e),n.removeData(uh),jB(n)},Tt={off:!1,animationTypes:UB,animate:s9,createAnimation:KB,isAnimating:g_,stop:l9,_simulatedTransitionEndDelay:100},_c=at(),it=cw(Te.ERROR_MESSAGES,{E1001:"Module '{0}'. Controller '{1}' is already registered",E1002:"Module '{0}'. Controller '{1}' does not inherit from DevExpress.ui.dxDataGrid.Controller",E1003:"Module '{0}'. View '{1}' is already registered",E1004:"Module '{0}'. View '{1}' does not inherit from DevExpress.ui.dxDataGrid.View",E1005:"Public method '{0}' is already registered",E1006:"Public method '{0}.{1}' does not exist",E1007:"State storing cannot be provided due to the restrictions of the browser",E1010:"The template does not contain the TextBox widget",E1011:'Items cannot be deleted from the List. Implement the "remove" function in the data store',E1012:"Editing type '{0}' with the name '{1}' is unsupported",E1016:"Unexpected type of data source is provided for a lookup column",E1018:"The 'collapseAll' method cannot be called if you use a remote data source",E1019:"Search mode '{0}' is unavailable",E1020:"The type cannot be changed after initialization",E1021:"{0} '{1}' you are trying to remove does not exist",E1022:'The "markers" option is given an invalid value. Assign an array instead',E1023:'The "routes" option is given an invalid value. Assign an array instead',E1025:"This layout is too complex to render",E1026:'The "calculateCustomSummary" function is missing from a field whose "summaryType" option is set to "custom"',E1031:"Unknown subscription in the Scheduler widget: '{0}'",E1032:"Unknown start date in an appointment: '{0}'",E1033:"Unknown step in the date navigator: '{0}'",E1034:"The browser does not implement an API for saving files",E1035:"The editor cannot be created: {0}",E1037:"Invalid structure of grouped data",E1038:"The browser does not support local storages for local web pages",E1039:"A cell's position cannot be calculated",E1040:"The '{0}' key value is not unique within the data array",E1041:"The '{0}' script is referenced after the DevExtreme scripts or not referenced at all",E1042:"{0} requires the key field to be specified",E1043:"Changes cannot be processed due to the incorrectly set key",E1044:"The key field specified by the keyExpr option does not match the key field specified in the data store",E1045:"Editing requires the key field to be specified in the data store",E1046:"The '{0}' key field is not found in data objects",E1047:'The "{0}" field is not found in the fields array',E1048:'The "{0}" operation is not found in the filterOperations array',E1049:"Column '{0}': filtering is allowed but the 'dataField' or 'name' option is not specified",E1050:"The validationRules option does not apply to third-party editors defined in the editCellTemplate",E1051:`HtmlEditor's valueType is "{0}", but the {0} converter was not imported.`,E1052:'{0} should have the "dataSource" option specified',E1053:'The "buttons" option accepts an array that contains only objects or string values',E1054:"All text editor buttons must have names",E1055:'One or several text editor buttons have invalid or non-unique "name" values',E1056:'The {0} widget does not support buttons of the "{1}" type',E1058:'The "startDayHour" and "endDayHour" options must be integers in the [0, 24] range, with "endDayHour" being greater than "startDayHour".',E1059:"The following column names are not unique: {0}",E1060:"All editable columns must have names",E1061:'The "offset" option must be an integer in the [-1440, 1440] range, divisible by 5 without a remainder.',E1062:'The "cellDuration" must be a positive integer, evenly dividing the ("endDayHour" - "startDayHour") interval into minutes.',W1001:'The "key" option cannot be modified after initialization',W1002:"An item with the key '{0}' does not exist",W1003:"A group with the key '{0}' in which you are trying to select items does not exist",W1004:"The item '{0}' you are trying to select in the group '{1}' does not exist",W1005:"Due to column data types being unspecified, data has been loaded twice in order to apply initial filter settings. To resolve this issue, specify data types for all grid columns.",W1006:"The map service returned the following error: '{0}'",W1007:"No item with key {0} was found in the data source, but this key was used as the parent key for item {1}",W1008:"Cannot scroll to the '{0}' date because it does not exist on the current view",W1009:"Searching works only if data is specified using the dataSource option",W1010:"The capability to select all items works with source data of plain structure only",W1011:'The "keyExpr" option is not applied when dataSource is not an array',W1012:"The '{0}' key field is not found in data objects",W1013:'The "message" field in the dialog component was renamed to "messageHtml". Change your code correspondingly. In addition, if you used HTML code in the message, make sure that it is secure',W1014:"The Floating Action Button exceeds the recommended speed dial action count. If you need to display more speed dial actions, increase the maxSpeedDialActionCount option value in the global config.",W1016:"The '{0}' field in the HTML Editor toolbar item configuration was renamed to '{1}'. Please make a corresponding change in your code.",W1017:"The 'key' property is not specified for a lookup data source. Please specify it to prevent requests for the entire dataset when users filter data.",W1018:"Infinite scrolling may not work properly with multiple selection. To use these features together, set 'selection.deferred' to true or set 'selection.selectAllMode' to 'page'.",W1019:"Filter query string exceeds maximum length limit of {0} characters.",W1020:"hideEvent is ignored when the shading property is true",W1021:`The '{0}' is not rendered because none of the DOM elements match the value of the "container" property.`,W1022:"{0} JSON parsing error: '{1}'",W1023:"Appointments require unique keys. Otherwise, the agenda view may not work correctly.",W1024:"The client-side export is enabled. Implement the 'onExporting' function.",W1025:"'scrolling.mode' is set to 'virtual' or 'infinite'. Specify the height of the component."}),qB=pe(),c9=ar.add,u9=tr,d9=a_;let dh=new j;const YB="link[rel=dx-theme]",h9="data-theme",p9="data-active",CA="dx-hairlines",ZB="any";let Vr,JD,Br,Ei,mo,DA=15e3;const kv="dx.";function Zw(){if(!ae())return null;const t=m("<div>",Vr).addClass("dx-theme-marker").appendTo(Vr.documentElement);let e;try{return e=qB.getComputedStyle(t.get(0)).fontFamily,!e||(e=e.replace(/["']/g,""),e.substr(0,kv.length)!==kv)?null:e.substr(kv.length)}finally{t.remove()}}function xA(t){let e,n,i=!0;mo=t;function s(){mo=null,clearInterval(n),i=!0,_c.fire(),_c.empty(),dh.resolve()}if(wA()||!DA)s();else{if(!i){mo&&(mo=t);return}e=Date.now(),i=!1,n=setInterval(function(){const r=wA(),o=!r&&Date.now()-e>DA;o&&it.log("W0004",mo),(r||o)&&s()},10)}}function wA(){if(!mo)return!0;const t=mo===ZB;if(dh.state()==="resolved"&&t)return!0;const e=Zw();return e&&t?!0:e===mo}function f9(){const t=m(YB,Vr);t.length&&(Br={},JD=m(bw("<link rel=stylesheet>"),Vr),t.each(function(){const e=m(this,Vr),n=e.attr(h9),i=e.attr("href"),s=e.attr(p9)==="true";Br[n]={url:i,isActive:s}}),t.last().after(JD),t.remove())}function m9(t){const e=t?t.split("."):[];let n=null;if(Br){if(t in Br)return t;N(Br,function(i,s){const r=i.split(".");if(!(e[0]&&r[0]!==e[0])&&!(e[1]&&e[1]!==r[1])&&!(e[2]&&e[2]!==r[2])&&((!n||s.isActive)&&(n=i),s.isActive))return!1})}return n}function g9(t){try{t!==Vr&&(Br=null)}catch{Br=null}Vr=t}function QB(t){t=t||{},g9(t.context||W.getDocument()),Vr&&(f9(),Ei=void 0,xi(t))}function xi(t){if(!arguments.length)return Ei=Ei||Zw(),Ei;JB(u9()),t=t||{},typeof t=="string"&&(t={theme:t});const e=t._autoInit,n=t.loadCallback;let i;if(Ei=m9(t.theme||Ei),Ei&&(i=Br[Ei]),n&&_c.add(n),i)JD.attr("href",Br[Ei].url),(_c.has()||dh.state()!=="resolved"||t._forceTimeout)&&xA(Ei);else if(e)ae()&&xA(ZB),_c.fire(),_c.empty();else throw it.Error("E0021",Ei);dh.done(()=>XB(kV(),Ei))}function _9(t){t=t||xi();const e=[],n=t&&t.split(".");return n&&(e.push("dx-theme-"+n[0],"dx-theme-"+n[0]+"-typography"),n.length>1&&e.push("dx-color-scheme-"+n[1]+(ii(t)?"-"+n[2]:""))),e}let Jf;function XB(t,e){Jf=_9(e).join(" "),m(t).addClass(Jf),function(){const n=ae()&&qB.devicePixelRatio;if(!n||n<2)return;const i=m("<div>");i.css("border",".5px solid transparent"),m("body").append(i),tt(i)===1&&(m(t).addClass(CA),Jf+=" "+CA),i.remove()}()}function JB(t){m(t).removeClass(Jf)}function __(t,e){return e||(e=Ei||Zw()),new RegExp(t).test(e)}function ii(t){return Un(t)||qn(t)}function Un(t){return __("material",t)}function qn(t){return __("fluent",t)}function y9(t){return __("generic",t)}function v9(t){return __("compact",t)}function C9(t,e){const n=W.getDocument(),i=n.createElement("span");i.style.position="absolute",i.style.top="-9999px",i.style.left="-9999px",i.style.visibility="hidden",i.style.fontFamily="Arial",i.style.fontSize="250px",i.style.fontWeight=e,i.innerHTML=t,n.body.appendChild(i);const s=i.offsetWidth;i.style.fontFamily="Roboto, RobotoFallback, Arial";const r=i.offsetWidth;return i.parentNode.removeChild(i),s!==r}function D9(t,e){return new Promise(n=>{const i=()=>{clearInterval(s),clearTimeout(r),n()},s=setInterval(()=>{C9(t,e)&&i()},15),r=setTimeout(i,2e3)})}function SA(){if(QB({_autoInit:!0,_forceTimeout:!0}),m(YB,Vr).length)throw it.Error("E0022")}ae()?SA():c9(SA);d9.add(function(t,e){dh.done(function(){JB(e),XB(t)})});X.changed.add(function(){QB({_autoInit:!0})});class eL{constructor(e){this.options=e,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(e,n){this.options[e]=n}onSelectionChanged(){const{addedItemKeys:e}=this.options,{removedItemKeys:n}=this.options,{addedItems:i}=this.options,{removedItems:s}=this.options,{selectedItems:r}=this.options,{selectedItemKeys:o}=this.options,a=this.options.onSelectionChanged||B;this._clearItemKeys(),a({selectedItems:r,selectedItemKeys:o,addedItemKeys:e,removedItemKeys:n,addedItems:i,removedItems:s})}equalKeys(e,n){return this.options.equalByReference&&ue(e)&&ue(n)?e===n:Bi(e,n)}getSelectableItems(e){return e.filter(n=>!(n!=null&&n.disabled))}_clearSelection(e,n,i,s){return e=e||[],e=Array.isArray(e)?e:[e],this.validate(),this.selectedItemKeys(e,n,i,s)}_removeTemplateProperty(e){return Array.isArray(e)?e.map(n=>this._removeTemplateProperty(n)):(ue(e)&&delete e.template,e)}_loadFilteredData(e,n,i,s){const r=encodeURI(JSON.stringify(this._removeTemplateProperty(e))).length,o=this.options.maxFilterLengthInRequest&&r>this.options.maxFilterLengthInRequest,a=j(),l={filter:o?void 0:e,select:o?this.options.dataFields():i||this.options.dataFields()};return e&&e.length===0?a.resolve([]):this.options.load(l).done(c=>{let u=Ce(c)?c.data:c;n&&!s?u=u.filter(n):o&&(u=As(u).filter(e).toArray()),a.resolve(u)}).fail(a.reject.bind(a)),a}updateSelectedItemKeyHash(e){for(let n=0;n<e.length;n++){const i=nh(e[n]);ue(i)||(this.options.keyHashIndices[i]=this.options.keyHashIndices[i]||[],this.options.keyHashIndices[i].push(n))}}_isAnyItemSelected(e){for(let n=0;n<e.length;n++)if(this.options.isItemSelected(e[n]))return;return!1}_getFullSelectAllState(){const e=this.options.plainItems(),n=this.options.filter();let i=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter(o=>!(o!=null&&o.disabled));n&&(i=As(i).filter(n).toArray());const s=i.length,r=e.length-this.getSelectableItems(e).length;if(!s)return this._isAnyItemSelected(e);if(s>=this.options.totalCount()-r)return!0}_getVisibleSelectAllState(){const e=this.getSelectableItems(this.options.plainItems());let n=!1,i=!1;for(let s=0;s<e.length;s++){const r=e[s],o=this.options.getItemData(r),a=this.options.keyOf(o);this.options.isSelectableItem(r)&&(this.isItemKeySelected(a)?n=!0:i=!0)}return n?i?void 0:!0:!1}}class x9 extends eL{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){const e=j(),n=this,i=this.options.key(),s=ve(i)?[i]:i;return this._loadFilteredData(this.options.selectionFilter,null,s).done(r=>{const o=r.map(a=>n.options.keyOf(a));e.resolve(o)}).fail(e.reject),e.promise()}selectedItemKeys(e,n,i,s){if(s){const r=this.options.filter();!r||JSON.stringify(r)===JSON.stringify(this.options.selectionFilter)&&i?this._setOption("selectionFilter",i?[]:null):this._addSelectionFilter(i,r,s)}else{n||this._setOption("selectionFilter",[]);for(let r=0;r<e.length;r++)i?this.removeSelectedItem(e[r]):this.addSelectedItem(e[r],s,!n)}return this.onSelectionChanged(),j().resolve()}setSelectedItems(e){this._setOption("selectionFilter",null);for(let n=0;n<e.length;n++)this.addSelectedItem(e[n])}isItemDataSelected(e){return this.isItemKeySelected(e)}isItemKeySelected(e){const{selectionFilter:n}=this.options;return n?!!As([e]).filter(n).toArray().length:!0}_getKeyExpr(){const e=this.options.key();return Array.isArray(e)&&e.length===1?e[0]:e}_normalizeKey(e){const n=this.options.key();return Array.isArray(n)&&n.length===1?e[n[0]]:e}_getFilterByKey(e){const n=this._getKeyExpr();let i=[n,"=",this._normalizeKey(e)];if(Array.isArray(n)){i=[];for(let s=0;s<n.length;s++)i.push([n[s],"=",e[n[s]]]),s!==n.length-1&&i.push("and")}return i}addSelectedItem(e,n,i){const s=this._getFilterByKey(e);this._addSelectionFilter(!1,s,n,i)}removeSelectedItem(e){const n=this._getFilterByKey(e);this._addSelectionFilter(!0,n)}validate(){const{key:e}=this.options;if(e&&e()===void 0)throw it.Error("E1042","Deferred selection")}_findSubFilter(e,n){if(!e)return-1;const i=JSON.stringify(n);for(let s=0;s<e.length;s++){const r=e[s];if(r&&JSON.stringify(r)===i)return s}return-1}_isLastSubFilter(e,n){return e&&n?this._findSubFilter(e,n)===e.length-1||this._findSubFilter([e],n)===0:!1}_addFilterOperator(e,n){return e.length>1&&ve(e[1])&&e[1]!==n&&(e=[e]),e.length&&e.push(n),e}_denormalizeFilter(e){return e&&ve(e[0])&&(e=[e]),e}_isOnlyNegativeFiltersLeft(e){return e.every((n,i)=>i%2===0?Array.isArray(n)&&n[0]==="!":n==="and")}_addSelectionFilter(e,n,i,s){var r;const o=this,a=e?["!",n]:n,l=e?"and":"or";let c=!0,u=o.options.selectionFilter||[];if(u=o._denormalizeFilter(u),(r=u)!==null&&r!==void 0&&r.length&&!s){const d=o._removeSameFilter(u,n,e,i),p=o._removeSameFilter(u,n,!e);e&&(d!==-1||p!==-1)&&this._isOnlyNegativeFiltersLeft(u)&&(u=[]);const g=this._isKeyFilter(n)&&this._hasKeyFiltersOnlyStartingFromIndex(u,p);c=n.length&&!g}c&&(u=o._addFilterOperator(u,l),u.push(a)),u=o._normalizeFilter(u),o._setOption("selectionFilter",!e&&!u.length?null:u)}_normalizeFilter(e){return e&&e.length===1&&(e=e[0]),e}_removeFilterByIndex(e,n,i){const s=e[1];n>0?e.splice(n-1,2):e.splice(n,2),i&&s==="and"&&e.splice(0,e.length)}_isSimpleKeyFilter(e,n){return e.length===3&&e[0]===n&&e[1]==="="}_isKeyFilter(e){if(e.length===2&&e[0]==="!")return this._isKeyFilter(e[1]);const n=this._getKeyExpr();if(Array.isArray(n)){if(e.length!==2*n.length-1)return!1;for(let i=0;i<n.length;i++)if(i>0&&e[2*i-1]!=="and"||!this._isSimpleKeyFilter(e[2*i],n[i]))return!1;return!0}return this._isSimpleKeyFilter(e,n)}_hasKeyFiltersOnlyStartingFromIndex(e,n){if(n>=0){for(let i=n;i<e.length;i++)if(typeof e[i]!="string"&&!this._isKeyFilter(e[i]))return!1;return!0}return!1}_removeSameFilter(e,n,i,s){if(n=i?["!",n]:n,JSON.stringify(n)===JSON.stringify(e))return e.splice(0,e.length),0;const r=this._findSubFilter(e,n);if(r>=0)return this._removeFilterByIndex(e,r,s),r;for(let o=0;o<e.length;o++)if(Array.isArray(e[o])&&e[o].length>2){const a=this._removeSameFilter(e[o],n,!1,s);if(a>=0)return e[o].length?e[o].length===1&&(e[o]=e[o][0]):this._removeFilterByIndex(e,o,s),a}return-1}getSelectAllState(){const e=this.options.filter();let{selectionFilter:n}=this.options;if(!n)return!0;if(!n.length)return!1;if(!(!e||!e.length)){if(n=this._denormalizeFilter(n),this._isLastSubFilter(n,e))return!0;if(this._isLastSubFilter(n,["!",e]))return!1}}loadSelectedItemsWithFilter(){const e=this.options.filter(),{selectionFilter:n}=this.options,i=e?[e,"and",n]:n;return this._loadFilteredData(i)}}function tL(t){return t.reduce((e,n)=>{const i=(e.get(n)??0)+1;return e.set(n,i),e},new Map)}const na=function(t){return Array.isArray(t)?t:[t]},w9=function(t){return[...new Set(t)]},S9=function(t,e){const n=tL(e);return t.filter(i=>{const s=n.get(i);return s&&n.set(i,s-1),s})},e0=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=tL(e);return t.filter(i=>{const s=n.get(i);return s&&n.set(i,s-1),!s})},b9=function(t,e,n,i){const s={},{useLegacyVisibleIndex:r}=Me();let o=0;const a=l=>!M(l[e])&&!i;t.forEach(l=>{const c=l[e];c>=0?(s[c]=s[c]||[],l===n?s[c].unshift(l):s[c].push(l)):l[e]=void 0}),r||t.forEach(l=>{if(a(l)){for(;s[o];)o++;s[o]=[l],o++}}),o=0,Q2(s,function(l,c){c.forEach(u=>{l>=0&&(u[e]=o++)})}),r&&t.forEach(l=>{a(l)&&(l[e]=o++)})},E9=(t,e)=>t.reduce((n,i)=>{const s=e(i);return n[s]=n[s]??[],n[s].push(i),n},{}),em=function(t,e){const n=e(t);if(ue(n))try{return JSON.stringify(n)}catch{return n}return n},T9=function(t,e,n,i){const s=em(t,i);return e[n[s]]},I9=function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},A9=function(t,e,n,i){const s={},r={};let o=0,a=0;const l=[];t.forEach(function(u,d){const p=em(u,n);s[p]=d}),e.forEach(function(u,d){const p=em(u,n);r[p]=d});const c=Math.max(t.length,e.length);for(let u=0;u<c+o;u++){const d=e[u],p=u-o+a,f=t[p];if(!d||f&&!T9(f,e,r,n))f&&(l.push({type:"remove",key:n(f),index:u,oldItem:f}),a++,u--);else{const y=em(d,n),v=s[y],C=t[v];if(!C)o++,l.push({type:"insert",data:d,index:u});else if(v===p)i(C,d)||l.push({type:"update",data:d,key:n(d),index:u,oldItem:C});else return}}return l},t0=function(t,e){this.getLocalFilter=function(a,l,c,u){return l=l===void 0?Bi:l,r.bind(this,l,a,c,u)},this.getExpr=function(a){if(!a)return;let l;return t.forEach(function(c,u){l=l||[];let d;u>0&&l.push(e?"and":"or"),ve(a)?d=o(a,c):d=function(p,f){const g=[];for(let y=0,v=p.length;y<v;y++){const C=p[y],x=lt(C),S=f&&x(f),O=o(C,S);if(!O)break;y>0&&g.push(e?"or":"and"),g.push(O)}return g}(a,c),l.push(d)}),l&&l.length===1&&(l=l[0]),l},this.getCombinedFilter=function(a,l){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const u=this.getExpr(a);let d=u;return(c||e)&&l&&(u?(d=[],d.push(u),d.push(l)):d=l),d};let n;const i=function(a,l){if(!n){n={};const c=s(t,a,l);for(let u=0;u<c.length;u++)n[nh(c[u])]=!0}return n},s=function(a,l,c){return Array.isArray(c)?a.map(u=>l(u)):a};function r(a,l,c,u,d){const p=l(d);let f,g;if(!c&&(f=nh(p),!ue(f)))return i(l,u)[f]?!e:!!e;for(g=0;g<t.length;g++)if(a(t[g],p))return!e;return!!e}function o(a,l){if(l!==void 0)return[a,e?"<>":"=",l]}};class k9 extends eL{constructor(e){super(e),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(e,n){const{keyOf:i}=this.options;let s,r,o;if(!i)return;const a=n&&e.length>1&&!this.options.equalByReference;for(a&&(s={}),o=0;o<e.length;o++){const l=e[o],c=i(l);n?(r=this.removeSelectedItem(c,s,l==null?void 0:l.disabled),s&&r>=0&&(s[r]=!0)):this.addSelectedItem(c,l)}a&&this._batchRemoveSelectedItems(s)}_batchRemoveSelectedItems(e){const n=this.options.selectedItemKeys.slice(0),i=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(let s=0;s<n.length;s++)e[s]||(this.options.selectedItemKeys.push(n[s]),this.options.selectedItems.push(i[s]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(e,n,i,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,o=j();const a=this.options.key();if(!e.length&&!i)return o.resolve([]),o;if(i&&n&&!s)return o.resolve(this.getSelectedItems()),o;const l=new t0(e,i),c=l.getCombinedFilter(a,s,r);let u=[];if(n){const{selectedItems:f}=this.options;u=c&&e.length!==f.length?As(f).filter(c).toArray():f.slice(0)}let d=u.length?u:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData);const p=l.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,a);return d=d.filter(p),u.length||!i&&d.length===e.length?o.resolve(d):o=this._loadFilteredData(c,p,null,i),o}_replaceSelectionUpdate(e){const n=[],{keyOf:i}=this.options;if(i){for(let s=0;s<e.length;s++){const r=e[s],o=i(r);n.push(o)}this.setSelectedItems(n,e)}}_warnOnIncorrectKeys(e){const{allowNullValue:n}=this.options;for(let i=0;i<e.length;i++){const s=e[i];(!n||s!==null)&&!this.isItemKeySelected(s)&&it.log("W1002",s)}}_isMultiSelectEnabled(){const{mode:e}=this.options;return e==="all"||e==="multiple"}_requestInProgress(){var e;return((e=this._lastLoadDeferred)===null||e===void 0?void 0:e.state())==="pending"}_concatRequestsItems(e,n,i,s){let r;const o=n?e:[];return s?r=s:r=e0(e,this.options.selectedItemKeys),{addedItems:i.added.concat(r),removedItems:i.removed.concat(o),keys:e}}_collectLastRequestData(e,n,i,s){const r=n&&i,o={added:[],removed:[]},a=this._isMultiSelectEnabled();let l=a?this._lastRequestData:{};return a&&(this._shouldMergeWithLastRequest&&(r?(this._lastLoadDeferred.reject(),l={}):I9(e,this.options.selectedItemKeys)||(o.added=l.addedItems,o.removed=l.removedItems,n||this._lastLoadDeferred.reject())),l=this._concatRequestsItems(e,n,o,this._shouldMergeWithLastRequest?void 0:s)),l}_updateKeysByLastRequestData(e,n,i){let s=e;if(this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&!n&&!i){var r,o;s=e0(e.concat((r=this._lastRequestData)===null||r===void 0?void 0:r.addedItems),(o=this._lastRequestData)===null||o===void 0?void 0:o.removedItems),s=w9(s)}return s}_loadSelectedItems(e,n,i,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this,a=j(),l=o.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(e,n,i,s),Ne(o._lastLoadDeferred).always(()=>{const c=o._updateKeysByLastRequestData(e,n,i);o._shouldMergeWithLastRequest=!1,o._loadSelectedItemsCore(c,n,i,l,r).done(a.resolve).fail(a.reject)}),o._lastLoadDeferred=a,a}selectedItemKeys(e,n,i,s,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;const a=this,l=a._loadSelectedItems(e,i,s,r,o);return l.done(c=>{n?a._preserveSelectionUpdate(c,i):a._replaceSelectionUpdate(c),a.onSelectionChanged()}),l}addSelectedItem(e,n){if(M(n)&&!this.options.ignoreDisabledItems&&n.disabled){this.options.disabledItemKeys.indexOf(e)===-1&&this.options.disabledItemKeys.push(e);return}const i=this._getKeyHash(e);this._indexOfSelectedItemKey(i)===-1&&(!ue(i)&&this.options.keyHashIndices&&(this.options.keyHashIndices[i]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(e),this.options.addedItemKeys.push(e),this.options.addedItems.push(n),this.options.selectedItems.push(n))}_getSelectedIndexByKey(e,n){const{selectedItemKeys:i}=this.options;for(let s=0;s<i.length;s++)if((!n||!n[s])&&this.equalKeys(i[s],e))return s;return-1}_getSelectedIndexByHash(e,n){let i=this.options.keyHashIndices[e];return i&&i.length>1&&n&&(i=i.filter(s=>!n[s])),i&&i[0]>=0?i[0]:-1}_indexOfSelectedItemKey(e,n){let i;return this.options.equalByReference?i=this.options.selectedItemKeys.indexOf(e):ue(e)?i=this._getSelectedIndexByKey(e,n):i=this._getSelectedIndexByHash(e,n),i}_shiftSelectedKeyIndices(e){for(let n=e;n<this.options.selectedItemKeys.length;n++){const i=this.options.selectedItemKeys[n],s=nh(i),r=this.options.keyHashIndices[s];if(r)for(let o=0;o<r.length;o++)r[o]>e&&r[o]--}}removeSelectedItem(e,n,i){if(!this.options.ignoreDisabledItems&&i)return;const s=this._getKeyHash(e),r=!!n,o=this._indexOfSelectedItemKey(s,n);if(o<0||(this.options.removedItemKeys.push(e),this.options.removedItems.push(this.options.selectedItems[o]),r)||(this.options.selectedItemKeys.splice(o,1),this.options.selectedItems.splice(o,1),ue(s)||!this.options.keyHashIndices))return o;const a=this.options.keyHashIndices[s];return a&&(a.shift(),a.length||delete this.options.keyHashIndices[s],this._shiftSelectedKeyIndices(o)),o}_updateAddedItemKeys(e,n){for(let i=0;i<e.length;i++)this.isItemKeySelected(e[i])||(this.options.addedItemKeys.push(e[i]),this.options.addedItems.push(n[i]))}_updateRemovedItemKeys(e,n,i){for(let s=0;s<n.length;s++)this.isItemKeySelected(n[s])||(this.options.removedItemKeys.push(n[s]),this.options.removedItems.push(i[s]))}_isItemSelectionInProgress(e,n){return n&&this._lastRequestData&&this._requestInProgress()?(this._lastRequestData.addedItems??[]).includes(e):!1}_getKeyHash(e){return this.options.equalByReference?e:nh(e)}setSelectedItems(e,n){this._updateAddedItemKeys(e,n);const i=this.options.selectedItemKeys,s=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(e)),this._setOption("selectedItemKeys",e),this._setOption("selectedItems",n),this._updateRemovedItemKeys(e,i,s)}isItemDataSelected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.options.keyOf(e);return this.isItemKeySelected(i,n)}isItemKeySelected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this._isItemSelectionInProgress(e,n.checkPending);if(!i){const s=this._getKeyHash(e);i=this._indexOfSelectedItemKey(s)!==-1}return i}getSelectAllState(e){return e?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){const e=this.options.key(),n=this.getSelectedItemKeys(),i=this.options.filter();if(!n.length)return j().resolve([]);const r=new t0(n).getCombinedFilter(e,i,!0);return this._loadFilteredData(r)}}class R9{constructor(e){this.options=T(this._getDefaultOptions(),e,{selectedItemKeys:e.selectedKeys||[]}),this._selectionStrategy=this.options.deferred?new x9(this.options):new k9(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:B,key:B,keyOf:e=>e,load:()=>j().resolve([]),totalCount:()=>-1,isSelectableItem:()=>!0,isItemSelected:()=>!1,getItemData:e=>e,dataFields:B,filter:B}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(e){if(e===void 0)return this.options.selectionFilter;const n=this.options.selectionFilter!==e&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(e);this.options.selectionFilter=e,n&&this.onSelectionChanged()}setSelection(e,n){return this.selectedItemKeys(e,!1,!1,!1,n)}select(e){return this.selectedItemKeys(e,!0)}deselect(e){return this.selectedItemKeys(e,!0,!0)}selectedItemKeys(e,n,i,s,r){return e=e??[],e=Array.isArray(e)?e:[e],this.validate(),this._selectionStrategy.selectedItemKeys(e,n,i,s,r)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(e,n){this._selectionStrategy.addSelectedItem(n,e)}_removeSelectedItem(e){this._selectionStrategy.removeSelectedItem(e)}_setSelectedItems(e,n){this._selectionStrategy.setSelectedItems(e,n)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(e,n,i){var s,r;let o;const a=this.options.plainItems(),l=a[e];let c;const{isVirtualPaging:u}=this.options,d=(s=(r=this.options).allowLoadByRange)===null||s===void 0?void 0:s.call(r),{alwaysSelectByShift:p}=this.options;let f,g=!1,y=!1;const v=O=>O>=0&&!a.filter(H=>H.loadIndex===O).length;if(u&&M(l)&&(d&&(f=l.loadIndex-e,e=l.loadIndex),g=v(this._focusedItemIndex),M(this._shiftFocusedItemIndex)&&(y=v(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(l))return!1;const C=this.options.getItemData(l),x=this.options.keyOf(C);n=n||{};let S=n.shift;if(p===!1&&S&&(S=d!==!1||!g&&!y),S&&this.options.mode==="multiple"&&this._focusedItemIndex>=0)d&&(g||y)?(o=e!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex,o&&(c=this.changeItemSelectionWhenShiftKeyInVirtualPaging(e))):o=this.changeItemSelectionWhenShiftKeyPressed(e,a,f);else if(n.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!i){const O=this._selectionStrategy.isItemDataSelected(C);this.options.mode==="single"&&this.clearSelectedItems(),O?this._removeSelectedItem(x):this._addSelectedItem(C,x)}o=!0}else{this._resetItemSelectionWhenShiftKeyPressed();const O=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],x);(this.options.selectedItemKeys.length!==1||!O)&&(this._setSelectedItems([x],[C]),o=!0)}if(o)return Ne(c).done(()=>{this._focusedItemIndex=e,!i&&this.onSelectionChanged()}),!0}isDataItem(e){return this.options.isSelectableItem(e)}isSelectable(){return this.options.mode==="single"||this.options.mode==="multiple"}isItemDataSelected(e){return this._selectionStrategy.isItemDataSelected(e,{checkPending:!0})}isItemSelected(e,n){return this._selectionStrategy.isItemKeySelected(e,n)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(e){const n=this.options.getLoadOptions(e,this._focusedItemIndex,this._shiftFocusedItemIndex),i=j(),s=n.skip;return this.options.load(n).done(r=>{this.changeItemSelectionWhenShiftKeyPressed(e,r,s),i.resolve()}),i.promise()}changeItemSelectionWhenShiftKeyPressed(e,n,i){let s=!1,r;const o=M(i);let a=o?this._focusedItemIndex-i:this._focusedItemIndex;const{keyOf:l}=this.options,c=n[a],u=this.options.getItemData(c),d=l(u),p=c&&this.isItemDataSelected(u);M(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex);let f,g,y,v;if(this._shiftFocusedItemIndex!==this._focusedItemIndex)for(r=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,y=o?this._focusedItemIndex-i:this._focusedItemIndex,v=o?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,a=y;a!==v;a+=r)(o||this.isDataItem(n[a]))&&(g=l(this.options.getItemData(n[a])),this._removeSelectedItem(g),s=!0);if(e!==this._shiftFocusedItemIndex)for(r=e<this._shiftFocusedItemIndex?1:-1,y=o?e-i:e,v=o?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,a=y;a!==v;a+=r)(o||this.isDataItem(n[a]))&&(f=this.options.getItemData(n[a]),g=l(f),this._addSelectedItem(f,g),s=!0);return(o||this.isDataItem(c))&&!p&&(this._addSelectedItem(u,d),s=!0),s}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}_onePageSelectAll(e){const n=this._selectionStrategy.getSelectableItems(this.options.plainItems());for(let i=0;i<n.length;i++){const s=n[i];if(this.isDataItem(s)){const r=this.options.getItemData(s),o=this.options.keyOf(r),a=this.isItemSelected(o);!a&&!e&&this._addSelectedItem(r,o),a&&e&&this._removeSelectedItem(o)}}return this.onSelectionChanged(),j().resolve()}getSelectAllState(e){return this._selectionStrategy.getSelectAllState(e)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}class Qw extends vl{constructor(e){super(),this.name=e}}const nL={};let tm;function O9(t,e){nL[t]=e}function P9(t){if(ve(t)){if(tm=nL[t],!tm)throw Te.Error("E0020",t)}else tm=t}function bA(){return tm}O9("default",{compile:t=>l_(t),render:(t,e,n)=>t.clone()});P9("default");let M9=class extends vl{constructor(e){super(),this._element=e}_renderCore(e){const n=e.transclude;return!n&&!this._compiledTemplate&&(this._compiledTemplate=bA().compile(this._element)),m("<div>").append(n?this._element:bA().render(this._compiledTemplate,e.model,e.index)).contents()}source(){return m(this._element).clone()}};const iL=(t,e)=>{const n=m(t).contents().filter(`[data-options*="${e}"]`);return[].slice.call(n).map(i=>{const s=m(i).attr("data-options")||"";return{element:i,options:Me().optionsParser(s)[e]}}).filter(i=>!!i.options)},V9=t=>{const e=E9(t,i=>i.options.name);if(e[void 0])throw Te.Error("E0023");const n={};return Object.keys(e).forEach(i=>{var s;const r=(s=sV(X.current(),e[i],o=>o.options)[0])===null||s===void 0?void 0:s.element;r&&(n[i]=r)}),n},sL=t=>{const e=t.render.bind(t);return T({},t,{render(n){const i=e(n);return n&&n.onRendered&&n.onRendered(),i}})},B9=t=>{const e=t.render.bind(t);return T({},t,{render(n){const i=m(n.container);return e(L({},n,{container:se(i)}))}})},L9=t=>{const e=[];return"model"in t&&e.push(t.model),"index"in t&&e.push(t.index),e.push(t.container),e},$9=t=>typeof t=="string"?l_(t):t,EA=t=>Is(t)&&t[0]||t,F9=t=>new M9(t),H9=(t,e,n,i)=>{let s=null;return(!i||i.indexOf(t)===-1)&&(s=e[t],s&&!(s instanceof vl)&&(ie(s.render)&&(s=B9(s)),n||(s=sL(s)))),s},TA=(t,e,n,i,s,r)=>t==null?new Rr:t instanceof Qw?r[t.name]:t instanceof vl?t:ie(t.render)&&!Is(t)?i?t:sL(t):t.nodeType||Is(t)?e(m(t)):H9(t,n,i,s)||r[t]||e(t);function rL(t){return t&&[t.target,t.delegateTarget,t.relatedTarget,t.currentTarget].filter(e=>!!e)}const N9=(t,e)=>{b.one(rL(t),_l,e)},z9=(t,e)=>{b.off(rL(t),_l,e)},Xw=ze.inherit({ctor:function(t,e){this._eventName=t,this._originalEvents=K(e,"dxPointerEvents"),this._handlerCount=0,this.noBubble=this._isNoBubble()},_isNoBubble:function(){const t=this._eventName;return t==="dxpointerenter"||t==="dxpointerleave"},_handler:function(t){const e=this._getDelegateTarget(t),n={type:this._eventName,pointerType:t.pointerType||Zh(t),originalEvent:t,delegateTarget:e,timeStamp:is.mozilla?new Date().getTime():t.timeStamp},i=mw(t);return n.target=i,this._fireEvent(n)},_getDelegateTarget:function(t){let e;return this.noBubble&&(e=t.delegateTarget),e},_fireEvent:function(t){return ta(t)},_setSelector:function(t){this._selector=this.noBubble&&t?t.selector:null},_getSelector:function(){return this._selector},setup:function(){return!0},add:function(t,e){if(this._handlerCount<=0||this.noBubble){t=this.noBubble?t:W.getDocument(),this._setSelector(e);const n=this;b.on(t,this._originalEvents,this._getSelector(),function(i){n._handler(i)})}this.noBubble||this._handlerCount++},remove:function(t){this._setSelector(t),this.noBubble||this._handlerCount--},teardown:function(t){this._handlerCount&&!this.noBubble||(t=this.noBubble?t:W.getDocument(),this._originalEvents!==".dxPointerEvents"&&b.off(t,this._originalEvents,this._getSelector()))},dispose:function(t){t=this.noBubble?t:W.getDocument(),b.off(t,this._originalEvents)}}),W9={dxpointerdown:"touchstart",dxpointermove:"touchmove",dxpointerup:"touchend",dxpointercancel:"touchcancel",dxpointerover:"",dxpointerout:"",dxpointerenter:"",dxpointerleave:""},oL=function(t){const e=[];return N(t.touches,function(n,i){e.push(T({pointerId:i.identifier},i))}),{pointers:e,pointerId:t.changedTouches[0].identifier}},G9=function(t){return X.real().platform==="ios"&&(t==="dxpointerdown"||t==="dxpointerup")},Qh=Xw.inherit({ctor:function(){this.callBase.apply(this,arguments),this._pointerId=0},_handler:function(t){if(G9(this._eventName)){const e=t.changedTouches[0];if(this._pointerId===e.identifier&&this._pointerId!==0)return;this._pointerId=e.identifier}return this.callBase.apply(this,arguments)},_fireEvent:function(t){return this.callBase(T(oL(t.originalEvent),t))}});Qh.map=W9;Qh.normalize=oL;const af=function(t,e){ar.add(function(){t.split(" ").forEach(function(n){W.listen(W.getDocument(),n,e,!0)})})},U9=function(t,e,n){n=n||function(){};let i=[];const s=function(o){let a=-1;return N(i,function(l,c){return e(o,c)?(a=l,!1):!0}),a},r=function(o){const a=s(o);a>-1&&i.splice(a,1)};af(t.dxpointerdown,function(o){s(o)===-1&&(n(o),i.push(o))}),af(t.dxpointermove,function(o){i[s(o)]=o}),af(t.dxpointerup,r),af(t.dxpointercancel,r),this.pointers=function(){return i},this.reset=function(){i=[]}},aL={dxpointerdown:"mousedown",dxpointermove:"mousemove",dxpointerup:"mouseup",dxpointercancel:"",dxpointerover:"mouseover",dxpointerout:"mouseout",dxpointerenter:"mouseenter",dxpointerleave:"mouseleave"},lL=function(t){return t.pointerId=1,{pointers:Jw.pointers(),pointerId:1}};let Jw,IA=!1;const cL=function(){IA||(Jw=new U9(aL,function(){return!0}),IA=!0)},eo=Xw.inherit({ctor:function(){this.callBase.apply(this,arguments),cL()},_fireEvent:function(t){return this.callBase(T(lL(t.originalEvent),t))}});eo.map=aL;eo.normalize=lL;eo.activate=cL;eo.resetObserver=function(){Jw.reset()};const K9={dxpointerdown:"touchstart mousedown",dxpointermove:"touchmove mousemove",dxpointerup:"touchend mouseup",dxpointercancel:"touchcancel",dxpointerover:"mouseover",dxpointerout:"mouseout",dxpointerenter:"mouseenter",dxpointerleave:"mouseleave"};let AA=!1;const j9=function(){AA||(eo.activate(),AA=!0)},y_=Xw.inherit({EVENT_LOCK_TIMEOUT:100,ctor:function(){this.callBase.apply(this,arguments),j9()},_handler:function(t){const e=Gr(t);if(e||(this._skipNextEvents=!0),!(e&&this._mouseLocked)){if(e&&this._skipNextEvents){this._skipNextEvents=!1,this._mouseLocked=!0,clearTimeout(this._unlockMouseTimer);const n=this;this._unlockMouseTimer=setTimeout(function(){n._mouseLocked=!1},this.EVENT_LOCK_TIMEOUT);return}return this.callBase(t)}},_fireEvent:function(t){const e=Gr(t.originalEvent)?eo.normalize:Qh.normalize;return this.callBase(T(e(t.originalEvent),t))},dispose:function(){this.callBase(),this._skipNextEvents=!1,this._mouseLocked=!1,clearTimeout(this._unlockMouseTimer)}});y_.map=K9;y_.resetObserver=eo.resetObserver;const q9=(t,e)=>{let{tablet:n,phone:i}=e;const s=Y9();return s||(t.touch&&!(n||i)?y_:t.touch?Qh:eo)},kA=q9(D6,X.real());N(kA.map,(t,e)=>{cs(t,new kA(t,e))});const ot={down:"dxpointerdown",up:"dxpointerup",move:"dxpointermove",cancel:"dxpointercancel",enter:"dxpointerenter",leave:"dxpointerleave",over:"dxpointerover",out:"dxpointerout"};function Y9(){const t=Me().pointerEventStrategy;return{"mouse-and-touch":y_,touch:Qh,mouse:eo}[t]}const v_=ze.inherit({ctor:function(t){this._$element=m(t),this._cancelCallback=at(),this._acceptCallback=at()},getElement:function(){return this._$element},validate:function(t){return!Wn(t)},validatePointers:function(t){return H6(t)===1},allowInterruptionByMouseWheel:function(){return!0},configure:function(t){T(this,t)},addCancelCallback:function(t){this._cancelCallback.add(t)},removeCancelCallback:function(){this._cancelCallback.empty()},_cancel:function(t){this._cancelCallback.fire(this,t)},addAcceptCallback:function(t){this._acceptCallback.add(t)},removeAcceptCallback:function(){this._acceptCallback.empty()},_accept:function(t){this._acceptCallback.fire(this,t)},_requestAccept:function(t){this._acceptRequestEvent=t},_forgetAccept:function(){this._accept(this._acceptRequestEvent),this._acceptRequestEvent=null},start:B,move:B,end:B,cancel:B,reset:function(){this._acceptRequestEvent&&this._accept(this._acceptRequestEvent)},_fireEvent:function(t,e,n){const i=T({type:t,originalEvent:e,target:this._getEmitterTarget(e),delegateTarget:this.getElement().get(0)},n);return e=ta(i),e.cancel&&this._cancel(e),e},_getEmitterTarget:function(t){return(this.delegateSelector?m(t.target).closest(this.delegateSelector):this.getElement()).get(0)},dispose:B}),C_="dxmousewheel",n0={setup:function(t){const e=m(t);b.on(e,K("wheel","dxWheel"),n0._wheelHandler.bind(n0))},teardown:function(t){b.off(t,".dxWheel")},_wheelHandler:function(t){const{deltaMode:e,deltaY:n,deltaX:i,deltaZ:s}=t.originalEvent;ta({type:C_,originalEvent:t,delta:this._normalizeDelta(n,e),deltaX:i,deltaY:n,deltaZ:s,deltaMode:e,pointerType:"mouse"}),t.stopPropagation()},_normalizeDelta(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:0)===0?-t:-30*t}};cs(C_,n0);const lf="dxEventManager",Z9=ze.inherit({ctor:function(){this._attachHandlers(),this.reset(),this._proxiedCancelHandler=this._cancelHandler.bind(this),this._proxiedAcceptHandler=this._acceptHandler.bind(this)},_attachHandlers:function(){ar.add((function(){const t=W.getDocument();b.subscribeGlobal(t,K(ot.down,lf),this._pointerDownHandler.bind(this)),b.subscribeGlobal(t,K(ot.move,lf),this._pointerMoveHandler.bind(this)),b.subscribeGlobal(t,K([ot.up,ot.cancel].join(" "),lf),this._pointerUpHandler.bind(this)),b.subscribeGlobal(t,K(C_,lf),this._mouseWheelHandler.bind(this))}).bind(this))},_eachEmitter:function(t){const e=this._activeEmitters||[];let n=0;for(;e.length>n;){const i=e[n];if(t(i)===!1)break;e[n]===i&&n++}},_applyToEmitters:function(t,e){this._eachEmitter(function(n){n[t].call(n,e)})},reset:function(){this._eachEmitter(this._proxiedCancelHandler),this._activeEmitters=[]},resetEmitter:function(t){this._proxiedCancelHandler(t)},_pointerDownHandler:function(t){Gr(t)&&t.which>1||this._updateEmitters(t)},_updateEmitters:function(t){this._isSetChanged(t)&&(this._cleanEmitters(t),this._fetchEmitters(t))},_isSetChanged:function(t){const e=this._closestEmitter(t),n=this._emittersSet||[];let i=e.length!==n.length;return N(e,function(s,r){return i=i||n[s]!==r,!i}),this._emittersSet=e,i},_closestEmitter:function(t){const e=this,n=[];let i=m(t.target);function s(r,o){o&&o.validatePointers(t)&&o.validate(t)&&(o.addCancelCallback(e._proxiedCancelHandler),o.addAcceptCallback(e._proxiedAcceptHandler),n.push(o))}for(;i.length;){const r=st(i.get(0),"dxEmitter")||[];N(r,s),i=i.parent()}return n},_acceptHandler:function(t,e){const n=this;this._eachEmitter(function(i){i!==t&&n._cancelEmitter(i,e)})},_cancelHandler:function(t,e){this._cancelEmitter(t,e)},_cancelEmitter:function(t,e){const n=this._activeEmitters;e?t.cancel(e):t.reset(),t.removeCancelCallback(),t.removeAcceptCallback();const i=n.indexOf(t);i>-1&&n.splice(i,1)},_cleanEmitters:function(t){this._applyToEmitters("end",t),this.reset(t)},_fetchEmitters:function(t){this._activeEmitters=this._emittersSet.slice(),this._applyToEmitters("start",t)},_pointerMoveHandler:function(t){this._applyToEmitters("move",t)},_pointerUpHandler:function(t){this._updateEmitters(t)},_mouseWheelHandler:function(t){this._allowInterruptionByMouseWheel()&&(t.pointers=[null],this._pointerDownHandler(t),this._adjustWheelEvent(t),this._pointerMoveHandler(t),t.pointers=[],this._pointerUpHandler(t))},_allowInterruptionByMouseWheel:function(){let t=!0;return this._eachEmitter(function(e){return t=e.allowInterruptionByMouseWheel()&&t,t}),t},_adjustWheelEvent:function(t){let e=null;if(this._eachEmitter(function(r){if(!r.gesture)return;const o=r.getDirection(t);if(o!=="horizontal"&&!t.shiftKey||o!=="vertical"&&t.shiftKey)return e=r,!1}),!e)return;const n=e.getDirection(t),s=n==="both"&&!t.shiftKey||n==="vertical"?"pageY":"pageX";t[s]+=t.delta},isActive:function(t){let e=!1;return this._eachEmitter(function(n){e=e||n.getElement().is(t)}),e}}),RA=new Z9,du=function(t){const e=t.emitter,n=t.events[0],i=t.events;N(i,function(s,r){cs(r,{noBubble:!t.bubble,setup:function(o){const a=st(o,"dxEmitterSubscription")||{},l=st(o,"dxEmitter")||{},c=l[n]||new e(o);a[r]=!0,l[n]=c,st(o,"dxEmitter",l),st(o,"dxEmitterSubscription",a)},add:function(o,a){st(o,"dxEmitter")[n].configure(T({delegateSelector:a.selector},a.data),a.type)},teardown:function(o){const a=st(o,"dxEmitterSubscription"),l=st(o,"dxEmitter"),c=l[n];delete a[r];let u=!0;N(i,function(d,p){return u=u&&!a[p],u}),u&&(RA.isActive(o)&&RA.resetEmitter(c),c&&c.dispose(),delete l[n])}})})},_n="dxclick";let i0=null,ud=null;const OA=()=>{ud=null},PA=function(t){const e=t.originalEvent,n=ud===e||e&&e.DXCLICK_FIRED;(!t.which||t.which===1)&&!i0&&!n&&(e&&(e.DXCLICK_FIRED=!0),z9(ud,OA),ud=e,N9(ud,OA),ta({type:"dxclick",originalEvent:t}))},Q9=v_.inherit({ctor:function(t){this.callBase(t),b.on(this.getElement(),"click",PA)},start:function(t){i0=null},cancel:function(){i0=!0},dispose:function(){b.off(this.getElement(),"click",PA)}});(function(){if(!X.real().generic){let e=null,n=!1;const i=function(c){return m(c).is("input, textarea, select, button ,:focus, :focus *")},s=function(c){e=c.target,n=c.isDefaultPrevented()},r=function(c){const u=mw(c);return m(u)},o=function(c){const u=r(c);!n&&e&&!u.is(e)&&!m(e).is("label")&&i(u)&&Wh(),e=null,n=!1},a="NATIVE_CLICK_FIXER",l=W.getDocument();b.subscribeGlobal(l,K(ot.down,a),s),b.subscribeGlobal(l,K("click",a),o)}})();du({emitter:Q9,bubble:!0,events:["dxclick"]});const MA=Math.abs,X9=v_.inherit({start:function(t){this._startEventData=At(t),this._startTimer(t)},_startTimer:function(t){const e="timeout"in this?this.timeout:750;this._holdTimer=setTimeout((function(){this._requestAccept(t),this._fireEvent("dxhold",t,{target:t.target}),this._forgetAccept()}).bind(this),e)},move:function(t){this._touchWasMoved(t)&&this._cancel(t)},_touchWasMoved:function(t){const e=Va(this._startEventData,At(t));return MA(e.x)>5||MA(e.y)>5},end:function(){this._stopTimer()},_stopTimer:function(){clearTimeout(this._holdTimer)},cancel:function(){this._stopTimer()},dispose:function(){this._stopTimer()}});du({emitter:X9,bubble:!0,events:["dxhold"]});const hh={name:"dxhold"},J9=K("contextmenu","dxContexMenu"),e5=K(hh.name,"dxContexMenu"),t5=ze.inherit({setup:function(t){const e=m(t);b.on(e,J9,this._contextMenuHandler.bind(this)),(rl||X.isSimulator())&&b.on(e,e5,this._holdHandler.bind(this))},_holdHandler:function(t){Gr(t)&&!X.isSimulator()||this._fireContextMenu(t)},_contextMenuHandler:function(t){this._fireContextMenu(t)},_fireContextMenu:function(t){return ta({type:"dxcontextmenu",originalEvent:t})},teardown:function(t){b.off(t,".dxContexMenu")}});cs("dxcontextmenu",new t5);const uL="dxcontextmenu",n5=function(t,e){return 1/t===1/e},i5=function(t,e){return t=zr(t,!0),e=zr(e,!0),t&&e&&Is(t)&&Is(e)?e.is(t):t!==t&&e!==e?!0:t===0&&e===0?n5(t,e):t===null||typeof t!="object"||W.isElementNode(t)?t===e:!1},Rv={},jc=t=>{const e=X.current();return t.reduce((n,i)=>{let{device:s,options:r}=i;const o=s||{};return(ie(o)?o(e):r5(e,o))&&T(!0,n,r),n},{})},s5=(t,e)=>typeof t!="string"?t:{[t]:e},r5=(t,e)=>ti(e)||sV(t,[e]).length>0,VA=t=>t.substr(t.lastIndexOf(".")+1),BA=t=>t.substr(0,t.lastIndexOf(".")),o5=function(t,e){return Rv[e]=Rv[e]||lt(e),Rv[e](t,{functionsAsIs:!0})},a5=function(){return arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]},Ov={},Pv={};class l5{constructor(e,n){this._options=e,this._optionsByReference=n,this._changingCallback,this._changedCallback,this._namePreparedCallbacks}_setByReference(e,n){T(!0,e,n);for(const i in this._optionsByReference)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}_setPreparedValue(e,n,i,s){const r=this.get(this._options,e,!1);if(!i5(r,n)){const o=ml(e);!s&&this._changingCallback(e,r,n),Pv[e]=Pv[e]||uw(e),Pv[e](this._options,n,{functionsAsIs:!0,merge:M(i)?i:!this._optionsByReference[e],unwrapObservables:o.length>1&&!!this._optionsByReference[o[0]]}),!s&&this._changedCallback(e,n,r)}}_prepareRelevantNames(e,n,i,s){if(Ce(i))for(const r in i)this._prepareRelevantNames(e,`${n}.${r}`,i[r]);this._namePreparedCallbacks(e,n,i,s)}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._options,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return Ov[n]=Ov[n]||lt(n),Ov[n](e,{functionsAsIs:!0,unwrapObservables:i})}set(e,n,i,s){e=s5(e,n);for(const r in e)this._prepareRelevantNames(e,r,e[r],s);for(const r in e)this._setPreparedValue(r,e[r],i,s)}onRelevantNamesPrepared(e){this._namePreparedCallbacks=e}onChanging(e){this._changingCallback=e}onChanged(e){this._changedCallback=e}dispose(){this._changingCallback=B,this._changedCallback=B}}class c5{constructor(e,n,i,s){this._deprecatedCallback,this._startChangeCallback,this._endChangeCallback,this._default=n,this._deprecated=s,this._deprecatedNames=[],this._initDeprecatedNames(),this._optionManager=new l5(e,i),this._optionManager.onRelevantNamesPrepared((r,o,a,l)=>this._setRelevantNames(r,o,a,l)),this._cachedOptions={},this._rules=[]}set _initial(e){this._initialOptions=e}get _initial(){if(!this._initialOptions){const e=this._getByRules(this.silent("defaultOptionsRules"));this._initialOptions=this._default,this._optionManager._setByReference(this._initialOptions,e)}return this._initialOptions}_initDeprecatedNames(){for(const e in this._deprecated)this._deprecatedNames.push(e)}_getByRules(e){return e=Array.isArray(e)?this._rules.concat(e):this._rules,jc(e)}_notifyDeprecated(e){const n=this._deprecated[e];n&&this._deprecatedCallback(e,n)}_setRelevantNames(e,n,i,s){if(n){const r=this._normalizeName(n,s);r&&r!==n&&(this._setField(e,r,i),this._clearField(e,n))}}_setField(e,n,i){let s="",r=null;do s=s?`.${s}`:"",s=VA(n)+s,n=BA(n),r=n?this._optionManager.get(e,n,!1):e;while(!r);r[s]=i}_clearField(e,n){delete e[n];const i=BA(n),s=i?this._optionManager.get(e,i,!1):e;s&&delete s[VA(n)]}_normalizeName(e,n){if(this._deprecatedNames.length&&e){for(let i=0;i<this._deprecatedNames.length;i++)if(this._deprecatedNames[i]===e){const s=this._deprecated[e];if(s)return!n&&this._notifyDeprecated(e),s.alias||e}}return e}addRules(e){this._rules=e.concat(this._rules)}applyRules(e){const n=this._getByRules(e);this.silent(n)}dispose(){this._deprecatedCallback=B,this._startChangeCallback=B,this._endChangeCallback=B,this._optionManager.dispose()}onChanging(e){this._optionManager.onChanging(e)}onChanged(e){this._optionManager.onChanged(e)}onDeprecated(e){this._deprecatedCallback=e}onStartChange(e){this._startChangeCallback=e}onEndChange(e){this._endChangeCallback=e}isInitial(e){const n=this.silent(e),i=this.initial(e);return ie(n)&&ie(i)?n.toString()===i.toString():Bi(n,i)}initial(e){return o5(this._initial,e)}option(e,n){if(arguments.length<2&&as(e)!=="object")return this._optionManager.get(void 0,this._normalizeName(e));this._startChangeCallback();try{this._optionManager.set(e,n)}finally{this._endChangeCallback()}}silent(e,n){if(arguments.length<2&&as(e)!=="object")return this._optionManager.get(void 0,e,void 0,!0);this._optionManager.set(e,n,void 0,!0)}reset(e){if(e){const i=ml(e).reduce((r,o)=>r?r[o]:this.initial(o),null),s=ue(i)?L({},i):i;this._optionManager.set(e,s,!1)}}getAliasesByName(e){return Object.keys(this._deprecated).filter(n=>e===this._deprecated[n].alias)}isDeprecated(e){return Object.prototype.hasOwnProperty.call(this._deprecated,e)}cache(e,n){if(arguments.length<2)return this._cachedOptions[e];this._cachedOptions[e]=T(this._cachedOptions[e],n)}}class u5{constructor(){this._postponedOperations={}}add(e,n,i){if(e in this._postponedOperations)i&&this._postponedOperations[e].promises.push(i);else{const s=new j;this._postponedOperations[e]={fn:n,completePromise:s,promises:i?[i]:[]}}return this._postponedOperations[e].completePromise.promise()}callPostponedOperations(){for(const e in this._postponedOperations){const n=this._postponedOperations[e];M(n)&&(n.promises&&n.promises.length?Ne(...n.promises).done(n.fn).then(n.completePromise.resolve):n.fn().done(n.completePromise.resolve))}this._postponedOperations={}}}const LA=t=>t.charAt(2).toLowerCase()+t.substr(3),d5=t=>t.indexOf("_",0)===0,dL=ze.inherit({_setDeprecatedOptions(){this._deprecatedOptions={}},_getDeprecatedOptions(){return this._deprecatedOptions},_getDefaultOptions:()=>({onInitialized:null,onOptionChanged:null,onDisposing:null,defaultOptionsRules:null}),_defaultOptionsRules:()=>[],_setOptionsByDevice(t){this._options.applyRules(t)},_convertRulesToOptions:t=>jc(t),_isInitialOptionValue(t){return this._options.isInitial(t)},_setOptionsByReference(){this._optionsByReference={}},_getOptionsByReference(){return this._optionsByReference},ctor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_optionChangedCallbacks:e,_disposingCallbacks:n}=t;this.NAME=zh(this.constructor),this._eventsStrategy=yl.create(this,t.eventsStrategy),this._updateLockCount=0,this._optionChangedCallbacks=e||at(),this._disposingCallbacks=n||at(),this.postponedOperations=new u5,this._createOptions(t)},_createOptions(t){this.beginUpdate();try{this._setOptionsByReference(),this._setDeprecatedOptions(),this._options=new c5(this._getDefaultOptions(),this._getDefaultOptions(),this._getOptionsByReference(),this._getDeprecatedOptions()),this._options.onChanging((e,n,i)=>this._initialized&&this._optionChanging(e,n,i)),this._options.onDeprecated((e,n)=>this._logDeprecatedOptionWarning(e,n)),this._options.onChanged((e,n,i)=>this._notifyOptionChanged(e,n,i)),this._options.onStartChange(()=>this.beginUpdate()),this._options.onEndChange(()=>this.endUpdate()),this._options.addRules(this._defaultOptionsRules()),t&&t.onInitializing&&t.onInitializing.apply(this,[t]),this._setOptionsByDevice(t.defaultOptionsRules),this._initOptions(t)}finally{this.endUpdate()}},_initOptions(t){this.option(t)},_init(){this._createOptionChangedAction(),this.on("disposing",t=>{this._disposingCallbacks.fireWith(this,[t])})},_logDeprecatedOptionWarning(t,e){const n=e.message||`Use the '${e.alias}' option instead`;Te.log("W0001",this.NAME,t,e.since,n)},_logDeprecatedComponentWarning(t,e){Te.log("W0000",this.NAME,t,`Use the '${e}' widget instead`)},_createOptionChangedAction(){this._optionChangedAction=this._createActionByOption("onOptionChanged",{excludeValidators:["disabled","readOnly"]})},_createDisposingAction(){this._disposingAction=this._createActionByOption("onDisposing",{excludeValidators:["disabled","readOnly"]})},_optionChanged(t){switch(t.name){case"onDisposing":case"onInitialized":case"defaultOptionsRules":break;case"onOptionChanged":this._createOptionChangedAction()}},_dispose(){this._optionChangedCallbacks.empty(),this._createDisposingAction(),this._disposingAction(),this._eventsStrategy.dispose(),this._options.dispose(),this._disposed=!0},_lockUpdate(){this._updateLockCount++},_unlockUpdate(){this._updateLockCount=Math.max(this._updateLockCount-1,0)},_isUpdateAllowed(){return this._updateLockCount===0},_isInitializingRequired(){return!this._initializing&&!this._initialized},isInitialized(){return this._initialized},_commitUpdate(){this.postponedOperations.callPostponedOperations(),this._isInitializingRequired()&&this._initializeComponent()},_initializeComponent(){this._initializing=!0;try{this._init()}finally{this._initializing=!1,this._lockUpdate(),this._createActionByOption("onInitialized",{excludeValidators:["disabled","readOnly"]})(),this._unlockUpdate(),this._initialized=!0}},instance(){return this},beginUpdate:function(){this._lockUpdate()},endUpdate:function(){this._unlockUpdate(),this._isUpdateAllowed()&&this._commitUpdate()},_optionChanging:B,_notifyOptionChanged(t,e,n){if(this._initialized){const i=[t].concat(this._options.getAliasesByName(t));for(let s=0;s<i.length;s++){const r=i[s],o={name:ml(r)[0],fullName:r,value:e,previousValue:n};d5(r)||(this._optionChangedCallbacks.fireWith(this,[T(this._defaultActionArgs(),o)]),this._optionChangedAction(T({},o))),!this._disposed&&this._cancelOptionChange!==r&&this._optionChanged(o)}}},initialOption(t){return this._options.initial(t)},_defaultActionConfig(){return{context:this,component:this}},_defaultActionArgs(){return{component:this}},_createAction(t,e){let n;return i=>(M(i)||(i={}),Ce(i)||(i={actionValue:i}),n=n||new Vo(t,T({},e,this._defaultActionConfig())),n.execute.call(n,T(i,this._defaultActionArgs())))},_createActionByOption(t,e){var n=this;let i,s,r;e=T({},e);const o=function(){if(!s){if(e=e||{},typeof t!="string")throw Te.Error("E0008");t.indexOf("on")===0&&(s=LA(t)),r=n.option(t)}if(!(!i&&!r&&!e.beforeExecute&&!e.afterExecute&&!n._eventsStrategy.hasEvent(s))){if(!i){const d=e.beforeExecute;e.beforeExecute=function(){for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];d&&d.apply(n,f),n._eventsStrategy.fireEvent(s,f[0].args)},i=n._createAction(r,e)}for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return Me().wrapActionsBeforeExecute?((n.option("beforeActionExecute")||B)(n,i,e)||i).apply(n,c):i.apply(n,c)}};return Me().wrapActionsBeforeExecute?o:(this.option("onActionCreated")||B)(this,o,e)||o},on(t,e){return this._eventsStrategy.on(t,e),this},off(t,e){return this._eventsStrategy.off(t,e),this},hasActionSubscription:function(t){return!!this._options.silent(t)||this._eventsStrategy.hasEvent(LA(t))},isOptionDeprecated(t){return this._options.isDeprecated(t)},_setOptionWithoutOptionChange(t,e){this._cancelOptionChange=t,this.option(t,e),this._cancelOptionChange=!1},_getOptionValue(t,e){const n=this.option(t);return ie(n)?n.bind(e)():n},option(){return this._options.option(...arguments)},resetOption(t){this.beginUpdate(),this._options.reset(t),this.endUpdate()}});class nr extends vl{constructor(e){super(),this._render=e}_renderCore(e){return l_(this._render(e))}}const h5=new nr(t=>{let{model:e,parent:n}=t;const i=e.widget;if(!i)return m();const s=m("<div>"),r=e.options||{};return n?n._createComponent(s,i,r):s[i](r),s});let $A=class{constructor(e,n){this._tempTemplates=[],this._defaultTemplates={},this._anonymousTemplateName=n||"template",this._createElement=e||F9,this._createTemplateIfNeeded=this._createTemplateIfNeeded.bind(this)}static createDefaultOptions(){return{integrationOptions:{watchMethod:function(e,n){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).skipImmediate||n(e()),B},templates:{"dx-polymorph-widget":h5},useDeferUpdateForTemplates:!0}}}get anonymousTemplateName(){return this._anonymousTemplateName}addDefaultTemplates(e){this._defaultTemplates=T({},this._defaultTemplates,e)}dispose(){this._tempTemplates.forEach(e=>{e.template.dispose&&e.template.dispose()}),this._tempTemplates=[]}extractTemplates(e){const n=this._extractTemplates(e),i=this._extractAnonymousTemplate(e);return{templates:n,anonymousTemplateMeta:i}}_extractTemplates(e){const n=iL(e,"dxTemplate"),i=V9(n);return n.forEach(s=>{let{element:r,options:{name:o}}=s;r===i[o]?m(r).addClass("dx-template-wrapper").detach():m(r).remove()}),Object.keys(i).map(s=>({name:s,template:this._createTemplate(i[s])}))}_extractAnonymousTemplate(e){const n=e.contents().detach();return n.filter((s,r)=>{const o=r.nodeType===3,a=m(r).text().trim().length<1;return!(o&&a)}).length>0?{template:this._createTemplate(n),name:this._anonymousTemplateName}:{}}_createTemplateIfNeeded(e){const n=this._tempTemplates.filter(s=>s.source===EA(e))[0];if(n)return n.template;const i=this._createTemplate(e);return this._tempTemplates.push({template:i,source:EA(e)}),i}_createTemplate(e){return this._createElement($9(e))}getTemplate(e,n,i,s){let{isAsyncTemplate:r,skipTemplates:o}=i;return ie(e)?new nr(a=>{const l=e.apply(s,L9(a));if(!M(l))return new Rr;let c=!1;const u=TA(l,p=>p.nodeType||Is(p)&&!m(p).is("script")?new nr(()=>p):(c=!0,this._createTemplate(p)),n,r,o,this._defaultTemplates),d=u.render(a);return c&&u.dispose&&u.dispose(),d}):TA(e,this._createTemplateIfNeeded,n,r,o,this._defaultTemplates)}};const Mv="KeyboardProcessor",hL=t=>({keyName:tn(t),key:t.key,code:t.code,ctrl:t.ctrlKey,location:t.location,metaKey:t.metaKey,shift:t.shiftKey,alt:t.altKey,which:t.which,originalEvent:t}),D_=ze.inherit({_keydown:K("keydown",Mv),_compositionStart:K("compositionstart",Mv),_compositionEnd:K("compositionend",Mv),ctor:function(t){t=t||{},t.element&&(this._element=m(t.element)),t.focusTarget&&(this._focusTarget=t.focusTarget),this._handler=t.handler,this._element&&(this._processFunction=e=>{const n=m(this._focusTarget).toArray(),i=this._focusTarget&&this._focusTarget!==e.target&&!n.includes(e.target),s=this._isComposingJustFinished&&e.which===229||this._isComposing||i;this._isComposingJustFinished=!1,s||this.process(e)},this._toggleProcessingWithContext=this.toggleProcessing.bind(this),b.on(this._element,this._keydown,this._processFunction),b.on(this._element,this._compositionStart,this._toggleProcessingWithContext),b.on(this._element,this._compositionEnd,this._toggleProcessingWithContext))},dispose:function(){this._element&&(b.off(this._element,this._keydown,this._processFunction),b.off(this._element,this._compositionStart,this._toggleProcessingWithContext),b.off(this._element,this._compositionEnd,this._toggleProcessingWithContext)),this._element=void 0,this._handler=void 0},process:function(t){this._handler(hL(t))},toggleProcessing:function(t){let{type:e}=t;this._isComposing=e==="compositionstart",this._isComposingJustFinished=!this._isComposing}});D_.createKeyDownOptions=hL;function Ht(t,e){return e?K(t,e):t}function s0(t,e){return typeof t=="function"?t(e):t.execute(e)}const FA={on:(t,e,n,i)=>{const{selector:s,showTimeout:r,hideTimeout:o,namespace:a}=i;b.on(t,Ht("dxactive",a),s,{timeout:r},l=>s0(e,{event:l,element:l.currentTarget})),b.on(t,Ht("dxinactive",a),s,{timeout:o},l=>s0(n,{event:l,element:l.currentTarget}))},off:(t,e)=>{let{namespace:n,selector:i}=e;b.off(t,Ht("dxactive",n),i),b.off(t,Ht("dxinactive",n),i)}},rg={on:function(t,e){let{namespace:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.on(t,Ht("dxresize",n),e)},off:function(t){let{namespace:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.off(t,Ht("dxresize",e))}},HA={on:(t,e,n,i)=>{let{selector:s,namespace:r}=i;b.on(t,Ht("dxhoverend",r),s,o=>n(o)),b.on(t,Ht("dxhoverstart",r),s,o=>s0(e,{element:o.target,event:o}))},off:(t,e)=>{let{selector:n,namespace:i}=e;b.off(t,Ht("dxhoverstart",i),n),b.off(t,Ht("dxhoverend",i),n)}},og={on:(t,e,n,i)=>{let{namespace:s}=i;b.on(t,Ht("dxhiding",s),n),b.on(t,Ht("dxshown",s),e)},off:(t,e)=>{let{namespace:n}=e;b.off(t,Ht("dxhiding",n)),b.off(t,Ht("dxshown",n))}},nm={on:(t,e,n,i)=>{let{namespace:s}=i;b.on(t,Ht("focusin",s),e),b.on(t,Ht("focusout",s),n)},off:(t,e)=>{let{namespace:n}=e;b.off(t,Ht("focusin",n)),b.off(t,Ht("focusout",n))},trigger:t=>b.trigger(t,"focus")},NA={on:function(t,e){let{namespace:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.on(t,Ht("dxclick",n),e)},off:function(t){let{namespace:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.off(t,Ht("dxclick",e))}},zA={on:function(t,e){let{namespace:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.on(t,Ht("click",n),e)},off:function(t){let{namespace:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b.off(t,Ht("click",e))}};let p5=0;const ju={},f5=()=>"keyboardProcessorId"+p5++,ph={on:(t,e,n)=>{const i=f5();return ju[i]=new D_({element:t,focusTarget:e,handler:n}),i},off:t=>{t&&ju[t]&&(ju[t].dispose(),delete ju[t])},_getProcessor:t=>ju[t]},m5=[],g5=".";function _5(t){const{major:e,minor:n,patch:i}=t;return[e,n,i].join(g5)}function pL(t){const[e,n,i]=t.split(".").map(Number);return{major:e,minor:n,patch:i}}function y5(t){return t.map(e=>`${e.packageName}: ${e.version}`).join(`
`)}function v5(t,e){return t.major===e.major&&t.minor===e.minor&&t.patch===e.patch}function C5(t){let{major:e,minor:n,patch:i}=t;return n===1?{major:e-1,minor:2,patch:i}:{major:e,minor:n-1,patch:i}}function D5(t){const e=m5.filter(n=>!v5(pL(n.version),t));return e.length?(Te.log("W0023",y5([{packageName:"devextreme",version:_5(t)},...e])),!1):!0}function x5(t){return new Uint8Array(atob(t).split("").map(e=>e.charCodeAt(0)))}function w5(t){var e;return new Uint8Array(((e=t.match(/.{1,2}/g))===null||e===void 0?void 0:e.map(n=>parseInt(n,16)))??[])}function S5(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n+=1)e[n]=255&t.charCodeAt(n);return e}function b5(t){const e=new Uint8Array(4*t.length);for(let n=0;n<e.length;n+=1)e[n]=t[n>>2]>>>8*(3-n%4);return e}function E5(t){const e=new Uint32Array(1+(t.length-1>>2));for(let n=0;n<t.length;n+=1)e[n>>2]|=t[n]<<8*(3-n%4);return e}function WA(t,e){return(t<<e|t>>>32-e)>>>0}function GA(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}const fL={e:65537,n:new Uint8Array([200,219,153,203,140,7,228,253,193,243,62,137,139,60,68,242,48,142,113,88,185,235,253,105,80,74,32,170,96,74,111,250,7,205,154,3,146,115,153,53,45,132,123,56,61,208,184,201,63,24,109,223,0,179,169,102,139,224,73,233,45,173,138,66,98,88,69,76,177,111,113,218,192,33,101,152,25,134,34,173,32,82,230,44,247,200,253,170,192,246,30,12,96,205,100,249,181,93,0,231])},T5="kZidfQgNWkeKeYsJB8XjWg",I5="3021300906052b0e03021a05000414";function A5(t){const e=(8*fL.n.length+6)/8,n=GA(w5(I5),t);if(n.length+10>e)throw Error("Key is too short for SHA1 signing algorithm");const i=new Uint8Array(e-n.length);return i.fill(255,0,i.length-1),i[0]=0,i[1]=1,i[i.length-1]=0,GA(i,n)}function k5(t){try{const e=BigInt(0),n=BigInt(1),i=BigInt(8),s=(d,p,f)=>{let g=n,y=d,v=p;for(;v;)v&n&&(g=g*y%f),y=y*y%f,v>>=n;return g},r=d=>d.reduce((p,f)=>(p<<i)+BigInt(f),e),o=r(t.actual),a=r(t.signature),l=BigInt(t.key.e),c=r(t.key.n);return s(a,l,c)===o}catch{return!0}}function R5(t){const e=new Uint8Array(t.length+1);e.set(S5(t)),e[e.length-1]=128;const n=E5(new Uint8Array(e)),i=new Uint32Array(16*Math.ceil((n.length+2)/16));return i.set(n,0),i[i.length-1]=8*(e.length-1),i}function O5(t){const e=R5(t),n=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]);for(let i=0;i<e.length;i+=16){const s=new Uint32Array(80);for(let u=0;u<16;u+=1)s[u]=e[i+u];for(let u=16;u<80;u+=1){const d=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=d<<1|d>>>31}let r=n[0],o=n[1],a=n[2],l=n[3],c=n[4];for(let u=0;u<80;u+=1){const[d,p]=u<20?[o&a|~o&l,1518500249]:u<40?[o^a^l,1859775393]:u<60?[o&a|o&l|a&l,2400959708]:[o^a^l,3395469782],f=WA(r,5)+d+c+p+s[u];c=l,l=a,a=WA(o,30),o=r,r=f}n[0]+=r,n[1]+=o,n[2]+=a,n[3]+=l,n[4]+=c}return b5(n)}const mL=()=>typeof HTMLElement<"u",gL=mL()?HTMLElement:class{},Ua={trigger:"dx-license-trigger",panel:"dx-license"},vo={buyNow:"buy-now",version:"version"},_L={opacity:"1",visibility:"visible","clip-path":"none",filter:"none"},yL=L({},_L,{width:"100%",height:"auto","line-height":"normal",display:"block","z-index":"1500",position:"static",transform:"translate(0px, 0px)","background-color":"#FF7200",border:"none",margin:"auto","box-sizing":"border-box","text-align":"center"}),P5=L({},yL,{display:"flex","align-items":"center","flex-direction":"row",position:"relative",top:"0px",left:"0px",padding:"0.5rem"}),M5={width:"1rem",cursor:"pointer",height:"1rem"},UA=L({},_L,{display:"inline",position:"static",padding:"0px",margin:"0px",color:"white","font-family":"'Segoe UI','Open Sans Condensed',-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,Cantarell,Ubuntu,roboto,noto,arial,sans-serif","font-size":"0.875rem","font-wight":"600"});function vr(t,e){const n=e?L({},t,e):t;return Object.keys(n).reduce((i,s)=>`${i}${[s,`${n[s]} !important;`].join(": ")}`,"")}class br extends gL{constructor(){var e,n,i,s,r;super(),this._observer=null,this._inReassign=!1,this._hidden=!1,this._spanStyles=vr(UA,(e=br.customStyles)===null||e===void 0?void 0:e.textStyles),this._linkStyles=vr(UA,(n=br.customStyles)===null||n===void 0?void 0:n.linkStyles),this._containerStyles=vr(P5,(i=br.customStyles)===null||i===void 0?void 0:i.containerStyles),this._contentStyles=vr(yL,(s=br.customStyles)===null||s===void 0?void 0:s.contentStyles),this._buttonStyles=vr(M5,(r=br.customStyles)===null||r===void 0?void 0:r.contentStyles)}_createSpan(e){const n=document.createElement("span");return n.innerText=e,n.style.cssText=this._spanStyles,n}_createLink(e,n){const i=document.createElement("a");return i.innerText=e,i.style.cssText=this._linkStyles,i.href=n,i.target="_blank",i}_createButton(){const e=document.createElement("div");e.style.cssText=this._buttonStyles;const n=document.createElementNS("http://www.w3.org/2000/svg","polygon"),i=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("points","13.4 12.7 8.7 8 13.4 3.4 12.6 2.6 8 7.3 3.4 2.6 2.6 3.4 7.3 8 2.6 12.6 3.4 13.4 8 8.7 12.7 13.4 13.4 12.7"),n.style.cssText=vr({fill:"#fff",opacity:".5","stroke-width":"0px"}),i.setAttribute("id","Layer_1"),i.setAttribute("data-name","Layer 1"),i.setAttribute("version","1.1"),i.setAttribute("viewBox","0 0 16 16"),i.style.cssText=vr({"vertical-align":"baseline"}),i.appendChild(n),e.appendChild(i),e.onclick=()=>{this._hidden=!0,this.style.cssText=vr({display:"none"})},e}_createContentContainer(){const e=document.createElement("div");return e.style.cssText=this._contentStyles,e.append(this._createSpan("For evaluation purposes only. Redistribution not authorized. Please "),this._createLink("purchase a license",this.getAttribute(vo.buyNow)),this._createSpan(` to continue use of DevExpress product libraries (v${this.getAttribute(vo.version)}).`)),e}_reassignComponent(){this.innerHTML="",this.style.cssText=this._containerStyles,this.append(this._createContentContainer(),this._createButton())}connectedCallback(){this._reassignComponent(),this._observer||(this._observer=new MutationObserver(()=>{if(this._hidden){var e;(e=this._observer)===null||e===void 0||e.disconnect();return}this._inReassign?this._inReassign=!1:(this._inReassign=!0,this._reassignComponent())}),this._observer.observe(this,{childList:!0,attributes:!0,subtree:!0}))}disconnectedCallback(){setTimeout(()=>{document.getElementsByTagName(Ua.panel).length||document.body.prepend(this)},100)}}br.customStyles=void 0;class V5 extends gL{connectedCallback(){if(this.style.cssText=vr({display:"none"}),!document.getElementsByTagName(Ua.panel).length){const n=document.createElement(Ua.panel);n.setAttribute(vo.version,this.getAttribute(vo.version)),n.setAttribute(vo.buyNow,this.getAttribute(vo.buyNow)),n.setAttribute("data-permanent","true"),document.body.prepend(n)}}}function B5(t){customElements.get(Ua.trigger)||(br.customStyles=t,customElements.define(Ua.trigger,V5),customElements.define(Ua.panel,br))}function L5(t,e,n){B5(n);const i=document.createElement(Ua.trigger);i.setAttribute(vo.buyNow,t),i.setAttribute(vo.version,e),document.body.appendChild(i)}function $5(t,e,n){mL()&&L5(t,e,n)}var ls;(function(t){t.corrupted="corrupted",t.verified="verified",t.internal="internal"})(ls||(ls={}));const F5=["customerId","maxVersionAllowed","format","internalUsageId"],H5=1,N5=3,z5=".",W5="https://go.devexpress.com/Licensing_Installer_Watermark_DevExtremeJQuery.aspx",KA={kind:ls.corrupted,error:"general"},G5={kind:ls.corrupted,error:"verification"},U5={kind:ls.corrupted,error:"decoding"},K5={kind:ls.corrupted,error:"deserialization"},j5={kind:ls.corrupted,error:"payload"},q5={kind:ls.corrupted,error:"version"};let r0=!1;function Y5(t){let{text:e,signature:n}=t;return k5({key:fL,signature:x5(n),actual:A5(O5(e))})}function Z5(t){if(t===void 0)return KA;const e=t.split(z5);if(e.length!==2||e[0].length===0||e[1].length===0)return KA;if(!Y5({text:e[0],signature:e[1]}))return G5;let n="";try{n=atob(e[0])}catch{return U5}let i={};try{i=JSON.parse(n)}catch{return K5}const{customerId:s,maxVersionAllowed:r,format:o,internalUsageId:a}=i,l=Mt(i,F5);return a!==void 0?{kind:ls.internal,internalUsageId:a}:s===void 0||r===void 0||o===void 0?j5:o!==H5?q5:{kind:ls.verified,payload:L({customerId:s,maxVersionAllowed:r},l)}}function vL(t){return isNaN(t)||t<N5}function Q5(t){let{licenseKey:e,version:n}=t,i=!1;try{i=vL(n.patch);const{major:s,minor:r}=i?C5(n):n;if(!e)return{preview:i,error:"W0019"};const o=Z5(e);return o.kind===ls.corrupted?{preview:i,error:"W0021"}:o.kind===ls.internal?{preview:i,internal:!0,error:o.internalUsageId===T5?void 0:"W0020"}:s&&r?10*s+r>o.payload.maxVersionAllowed?{preview:i,error:"W0020"}:{preview:i,error:void 0}:{preview:i,error:"W0021"}}catch{return{preview:i,error:"W0021"}}}function X5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cI;if(r0)return;r0=!0;const n=pL(e),i=D5(n),{internal:s,error:r}=Q5({licenseKey:t,version:n});if(!i&&s)return;r&&!s&&$5(Me().buyNowLink??W5,cI);const o=vL(n.patch);if(r){Te.log(o?"W0022":r);return}o&&!s&&Te.log("W0022")}function jA(){return r0}const J5={validateLicense:X5},{abstract:cf}=dL,us=dL.inherit({_getDefaultOptions(){return T(this.callBase(),{width:void 0,height:void 0,rtlEnabled:Me().rtlEnabled,elementAttr:{},disabled:!1,integrationOptions:{}},this._useTemplates()?$A.createDefaultOptions():{})},ctor(t,e){this._customClass=null,this._createElement(t),EV(this._$element,this,this._dispose),this.callBase(e);const n=jA();J5.validateLicense(Me().licenseKey),!n&&jA()&&Me({licenseKey:""})},_createElement(t){this._$element=m(t)},_getSynchronizableOptionsForCreateComponent:()=>["rtlEnabled","disabled","templatesRenderAsynchronously"],_checkFunctionValueDeprecation:function(t){this.option("_ignoreFunctionValueDeprecation")||t.forEach(e=>{ie(this.option(e))&&Te.log("W0017",e)})},_visibilityChanged:cf,_dimensionChanged:cf,_init(){this.callBase(),this._checkFunctionValueDeprecation(["width","height","maxHeight","maxWidth","minHeight","minWidth","popupHeight","popupWidth"]),this._attachWindowResizeCallback(),this._initTemplateManager()},_setOptionsByDevice(t){this.callBase([].concat(this.constructor._classCustomRules||[],t||[]))},_isInitialOptionValue(t){return!(this.constructor._classCustomRules&&Object.prototype.hasOwnProperty.call(this._convertRulesToOptions(this.constructor._classCustomRules),t))&&this.callBase(t)},_attachWindowResizeCallback(){if(this._isDimensionChangeSupported()){const t=this._windowResizeCallBack=this._dimensionChanged.bind(this);rh.add(t)}},_isDimensionChangeSupported(){return this._dimensionChanged!==cf},_renderComponent(){cU(this.$element()),this._initMarkup(),ae()&&this._render()},_initMarkup(){const{rtlEnabled:t}=this.option()||{};this._renderElementAttributes(),this._toggleRTLDirection(t),this._renderVisibilityChange(),this._renderDimensions()},_render(){this._attachVisibilityChangeHandlers()},_renderElementAttributes(){const{elementAttr:t}=this.option()||{},e=T({},t),n=e.class;delete e.class,this.$element().attr(e).removeClass(this._customClass).addClass(n),this._customClass=n},_renderVisibilityChange(){this._isDimensionChangeSupported()&&this._attachDimensionChangeHandlers(),this._isVisibilityChangeSupported()&&this.$element().addClass("dx-visibility-change-handler")},_renderDimensions(){const t=this.$element(),e=t.get(0),n=this._getOptionValue("width",e),i=this._getOptionValue("height",e);this._isCssUpdateRequired(e,i,n)&&t.css({width:n===null?"":n,height:i===null?"":i})},_isCssUpdateRequired:(t,e,n)=>!!(M(n)||M(e)||t.style.width||t.style.height),_attachDimensionChangeHandlers(){const t=this.$element(),e=`${this.NAME}VisibilityChange`;rg.off(t,{namespace:e}),rg.on(t,()=>this._dimensionChanged(),{namespace:e})},_attachVisibilityChangeHandlers(){if(this._isVisibilityChangeSupported()){const t=this.$element(),e=`${this.NAME}VisibilityChange`;this._isHidden=!this._isVisible(),og.off(t,{namespace:e}),og.on(t,()=>this._checkVisibilityChanged("shown"),()=>this._checkVisibilityChanged("hiding"),{namespace:e})}},_isVisible(){return this.$element().is(":visible")},_checkVisibilityChanged(t){this._isVisible()&&(t==="hiding"&&!this._isHidden?(this._visibilityChanged(!1),this._isHidden=!0):t==="shown"&&this._isHidden&&(this._isHidden=!1,this._visibilityChanged(!0)))},_isVisibilityChangeSupported(){return this._visibilityChanged!==cf&&ae()},_clean:B,_modelByElement(){const{modelByElement:t}=this.option(),e=this.$element();return t?t(e):void 0},_invalidate(){if(this._isUpdateAllowed())throw Te.Error("E0007");this._requireRefresh=!0},_refresh(){this._clean(),this._renderComponent()},_dispose(){this._templateManager&&this._templateManager.dispose(),this.callBase(),this._clean(),this._detachWindowResizeCallback()},_detachWindowResizeCallback(){this._isDimensionChangeSupported()&&rh.remove(this._windowResizeCallBack)},_toggleRTLDirection(t){this.$element().toggleClass("dx-rtl",t)},_createComponent(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=Ci(this._getSynchronizableOptionsForCreateComponent(),l=>!(l in n)),{integrationOptions:s}=this.option();let{nestedComponentOptions:r}=this.option();r=r||B;const o=T({integrationOptions:s},r(this));i.forEach(l=>o[l]=this.option(l)),this._extendConfig(n,o);let a;if(ve(e)?a=m(t)[e](n)[e]("instance"):t&&(a=e.getInstance(t),a?a.option(n):a=new e(t,n)),a){const l=c=>{let{name:u,value:d}=c;i.includes(u)&&a.option(u,d)};this.on("optionChanged",l),a.on("disposing",()=>this.off("optionChanged",l))}return a},_extendConfig(t,e){N(e,(n,i)=>{!Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=i)})},_defaultActionConfig(){const t=this.$element(),e=this._modelByElement(t);return T(this.callBase(),{context:e})},_defaultActionArgs(){const t=this.$element(),e=this._modelByElement(t),n=this.element();return T(this.callBase(),{element:n,model:e})},_optionChanged(t){switch(t.name){case"width":case"height":this._renderDimensions();break;case"rtlEnabled":this._invalidate();break;case"elementAttr":this._renderElementAttributes();break;case"disabled":case"integrationOptions":break;default:this.callBase(t)}},_removeAttributes(t){const e=t.attributes;for(let n=e.length-1;n>=0;n--){const i=e[n];if(i){const{name:s}=i;(!s.indexOf("aria-")||s.indexOf("dx-")!==-1||s==="role"||s==="style"||s==="tabindex")&&t.removeAttribute(s)}}},_removeClasses(t){t.className=t.className.split(" ").filter(e=>e.lastIndexOf("dx-",0)!==0).join(" ")},_updateDOMComponent(t){t?this._renderComponent():this._requireRefresh&&(this._requireRefresh=!1,this._refresh())},endUpdate(){const t=this._isInitializingRequired();this.callBase(),this._isUpdateAllowed()&&this._updateDOMComponent(t)},$element(){return this._$element},element(){const t=this.$element();return se(t)},dispose(){const t=this.$element().get(0);Nh(t,!0),t.textContent="",this._removeAttributes(t),this._removeClasses(t)},resetOption(t){if(this.callBase(t),t==="width"||t==="height"){const e=this.initialOption(t);!M(e)&&this.$element().css(t,"")}},_getAnonymousTemplateName(){},_initTemplateManager(){if(this._templateManager||!this._useTemplates())return;const{integrationOptions:t={}}=this.option(),{createTemplate:e}=t;this._templateManager=new $A(e,this._getAnonymousTemplateName()),this._initTemplates()},_initTemplates(){const{templates:t,anonymousTemplateMeta:e}=this._templateManager.extractTemplates(this.$element()),n=this.option(`integrationOptions.templates.${e.name}`);t.forEach(i=>{let{name:s,template:r}=i;this._options.silent(`integrationOptions.templates.${s}`,r)}),e.name&&!n&&(this._options.silent(`integrationOptions.templates.${e.name}`,e.template),this._options.silent("_hasAnonymousTemplateContent",!0))},_getTemplateByOption(t){return this._getTemplate(this.option(t))},_getTemplate(t){const e=this.option("integrationOptions.templates"),n=this.option("templatesRenderAsynchronously"),i=this.option("integrationOptions.skipTemplates");return this._templateManager.getTemplate(t,e,{isAsyncTemplate:n,skipTemplates:i},this)},_saveTemplate(t,e){this._setOptionWithoutOptionChange("integrationOptions.templates."+t,this._templateManager._createTemplate(e))},_useTemplates:()=>!0});us.getInstance=function(t){return TV(m(t),this)};us.defaultOptions=function(t){this._classCustomRules=this._classCustomRules||[],this._classCustomRules.push(t)};function CL(t,e,n){function i(r){return typeof r=="string"?r.split("."):typeof r=="number"?[r]:r}t=i(t),e=i(e);let s=Math.max(t.length,e.length);isFinite(n)&&(s=Math.min(s,n));for(let r=0;r<s;r++){const o=parseInt(t[r]||0,10),a=parseInt(e[r]||0,10);if(o<a)return-1;if(o>a)return 1}return 0}const eq="dxactive",uf=ze.inherit({ctor:function(t,e){this._timeout=t,this._fire=e},start:function(){const t=this;this._schedule(function(){t.force()})},_schedule:function(t){this.stop(),this._timer=setTimeout(t,this._timeout)},stop:function(){clearTimeout(this._timer)},force:function(){this._fired||(this.stop(),this._fire(),this._fired=!0)},fired:function(){return this._fired}});let _s;const eS=v_.inherit({ctor:function(){this.callBase.apply(this,arguments),this._active=new uf(0,B),this._inactive=new uf(0,B)},configure:function(t,e){switch(e){case"dxactive":t.activeTimeout=t.timeout;break;case"dxinactive":t.inactiveTimeout=t.timeout}this.callBase(t)},start:function(t){if(_s){const e=kr(this.getElement().get(0),_s.getElement().get(0)),n=!_s._active.fired();if(e&&n){this._cancel();return}_s._inactive.force()}_s=this,this._initEvents(t),this._active.start()},_initEvents:function(t){const e=this,n=this._getEmitterTarget(t),i=Gr(t),r=X.isSimulator()||!i,o=rt(this.activeTimeout,30),a=rt(this.inactiveTimeout,400);this._active=new uf(r?o:0,function(){e._fireEvent("dxactive",t,{target:n})}),this._inactive=new uf(r?a:0,function(){e._fireEvent("dxinactive",t,{target:n}),_s=null})},cancel:function(t){this.end(t)},end:function(t){const e=t.type!==ot.up;e?this._active.stop():this._active.force(),this._inactive.start(),e&&this._inactive.force()},dispose:function(){this._active.stop(),this._inactive.stop(),_s===this&&(_s=null),this.callBase()},lockInactive:function(){return this._active.force(),this._inactive.stop(),_s=null,this._cancel(),this._inactive.force.bind(this._inactive)}});eS.lock=function(t){const e=_s?_s.lockInactive():B;t.done(e)};du({emitter:eS,events:["dxactive","dxinactive"]});const DL=eS.lock,Xh="dxhoverstart",tq=K(ot.enter,"dxHoverStart"),x_="dxhoverend",nq=K(ot.leave,"dxHoverEnd"),xL=ze.inherit({noBubble:!0,ctor:function(){this._handlerArrayKeyPath=this._eventNamespace+"_HandlerStore"},setup:function(t){st(t,this._handlerArrayKeyPath,{})},add:function(t,e){const n=this,i=function(s){n._handler(s)};b.on(t,this._originalEventName,e.selector,i),st(t,this._handlerArrayKeyPath)[e.guid]=i},_handler:function(t){m_(t)||X.isSimulator()||ta({type:this._eventName,originalEvent:t,delegateTarget:t.delegateTarget})},remove:function(t,e){const n=st(t,this._handlerArrayKeyPath)[e.guid];b.off(t,this._originalEventName,e.selector,n)},teardown:function(t){o_(t,this._handlerArrayKeyPath)}}),iq=xL.inherit({ctor:function(){this._eventNamespace="dxHoverStart",this._eventName=Xh,this._originalEventName=tq,this.callBase()},_handler:function(t){(t.pointers||[]).length||this.callBase(t)}}),sq=xL.inherit({ctor:function(){this._eventNamespace="dxHoverEnd",this._eventName=x_,this._originalEventName=nq,this.callBase()}});cs(Xh,new iq);cs(x_,new sq);function qA(t,e,n){t=t==="role"||t==="id"?t:`aria-${t}`,e=M(e)?e.toString():null,n.attr(t,e)}const Kt=us.inherit({_feedbackHideTimeout:400,_feedbackShowTimeout:30,_supportedKeys:()=>({}),_getDefaultOptions(){return T(this.callBase(),{hoveredElement:null,isActive:!1,disabled:!1,visible:!0,hint:void 0,activeStateEnabled:!1,onContentReady:null,hoverStateEnabled:!1,focusStateEnabled:!1,tabIndex:0,accessKey:void 0,onFocusIn:null,onFocusOut:null,onKeyboardHandled:null,ignoreParentReadOnly:!1,useResizeObserver:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){const t=X.real(),e=t.platform,n=t.version;return e==="ios"&&CL(n,"13.3")<=0},options:{useResizeObserver:!1}}])},_init(){this.callBase(),this._initContentReadyAction()},_innerWidgetOptionChanged:function(t,e){const n=Kt.getOptionsFromContainer(e);t&&t.option(n),this._options.cache(e.name,n)},_bindInnerWidgetOptions(t,e){const n=()=>this._options.silent(e,T({},t.option()));n(),t.on("optionChanged",n)},_getAriaTarget(){return this._focusTarget()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){const{disabled:t,visible:e}=this.option();this.$element().addClass("dx-widget"),this._toggleDisabledState(t),this._toggleVisibility(e),this._renderHint(),this._isFocusable()&&this._renderFocusTarget(),this.callBase()},_render(){this.callBase(),this._renderContent(),this._renderFocusState(),this._attachFeedbackEvents(),this._attachHoverEvents(),this._toggleIndependentState()},_renderHint(){const{hint:t}=this.option();this.$element().attr("title",t||null)},_renderContent(){Wr(()=>this._disposed?void 0:this._renderContentImpl()).done(()=>this._disposed?void 0:this._fireContentReadyAction())},_renderContentImpl:B,_fireContentReadyAction:Ic(function(){return this._contentReadyAction()}),_dispose(){this._contentReadyAction=null,this._detachKeyboardEvents(),this.callBase()},_resetActiveState(){this._toggleActiveState(this._eventBindingTarget(),!1)},_clean(){this._cleanFocusState(),this._resetActiveState(),this.callBase(),this.$element().empty()},_toggleVisibility(t){this.$element().toggleClass("dx-state-invisible",!t)},_renderFocusState(){this._attachKeyboardEvents(),this._isFocusable()&&(this._renderFocusTarget(),this._attachFocusEvents(),this._renderAccessKey())},_renderAccessKey(){const t=this._focusTarget(),{accessKey:e}=this.option();t.attr("accesskey",e)},_isFocusable(){const{focusStateEnabled:t,disabled:e}=this.option();return t&&!e},_eventBindingTarget(){return this.$element()},_focusTarget(){return this._getActiveElement()},_isFocusTarget:function(t){return m(this._focusTarget()).toArray().includes(t)},_findActiveTarget(t){return t.find(this._activeStateUnit).not(".dx-state-disabled")},_getActiveElement(){const t=this._eventBindingTarget();return this._activeStateUnit?this._findActiveTarget(t):t},_renderFocusTarget(){const{tabIndex:t}=this.option();this._focusTarget().attr("tabIndex",t)},_keyboardEventBindingTarget(){return this._eventBindingTarget()},_refreshFocusEvent(){this._detachFocusEvents(),this._attachFocusEvents()},_focusEventTarget(){return this._focusTarget()},_focusInHandler(t){t.isDefaultPrevented()||this._createActionByOption("onFocusIn",{beforeExecute:()=>this._updateFocusState(t,!0),excludeValidators:["readOnly"]})({event:t})},_focusOutHandler(t){t.isDefaultPrevented()||this._createActionByOption("onFocusOut",{beforeExecute:()=>this._updateFocusState(t,!1),excludeValidators:["readOnly","disabled"]})({event:t})},_updateFocusState(t,e){let{target:n}=t;this._isFocusTarget(n)&&this._toggleFocusClass(e,m(n))},_toggleFocusClass(t,e){(e&&e.length?e:this._focusTarget()).toggleClass("dx-state-focused",t)},_hasFocusClass(t){return m(t||this._focusTarget()).hasClass("dx-state-focused")},_isFocused(){return this._hasFocusClass()},_getKeyboardListeners:()=>[],_attachKeyboardEvents(){this._detachKeyboardEvents();const{focusStateEnabled:t,onKeyboardHandled:e}=this.option(),n=this._getKeyboardListeners().length;(t||n||!!e)&&(this._keyboardListenerId=ph.on(this._keyboardEventBindingTarget(),this._focusTarget(),r=>this._keyboardHandler(r)))},_keyboardHandler(t,e){if(!e){const{originalEvent:s,keyName:r,which:o}=t,a=this._supportedKeys(s),l=a[r]||a[o];if(l!==void 0&&!l.bind(this)(s,t))return!1}const n=this._getKeyboardListeners(),{onKeyboardHandled:i}=this.option();return n.forEach(s=>s&&s._keyboardHandler(t)),i&&i(t),!0},_refreshFocusState(){this._cleanFocusState(),this._renderFocusState()},_cleanFocusState(){this._focusTarget().removeAttr("tabIndex"),this._toggleFocusClass(!1),this._detachFocusEvents(),this._detachKeyboardEvents()},_detachKeyboardEvents(){ph.off(this._keyboardListenerId),this._keyboardListenerId=null},_attachHoverEvents(){const{hoverStateEnabled:t}=this.option(),e=this._activeStateUnit,n=this._eventBindingTarget();HA.off(n,{selector:e,namespace:"UIFeedback"}),t&&HA.on(n,new Vo(i=>{let{event:s,element:r}=i;this._hoverStartHandler(s),this.option("hoveredElement",m(r))},{excludeValidators:["readOnly"]}),i=>{this.option("hoveredElement",null),this._hoverEndHandler(i)},{selector:e,namespace:"UIFeedback"})},_attachFeedbackEvents(){const{activeStateEnabled:t}=this.option(),e=this._activeStateUnit,n=this._eventBindingTarget();FA.off(n,{namespace:"UIFeedback",selector:e}),t&&FA.on(n,new Vo(i=>{let{event:s,element:r}=i;return this._toggleActiveState(m(r),!0,s)}),new Vo(i=>{let{event:s,element:r}=i;return this._toggleActiveState(m(r),!1,s)},{excludeValidators:["disabled","readOnly"]}),{showTimeout:this._feedbackShowTimeout,hideTimeout:this._feedbackHideTimeout,selector:e,namespace:"UIFeedback"})},_detachFocusEvents(){const t=this._focusEventTarget();nm.off(t,{namespace:`${this.NAME}Focus`})},_attachFocusEvents(){const t=this._focusEventTarget();nm.on(t,e=>this._focusInHandler(e),e=>this._focusOutHandler(e),{namespace:`${this.NAME}Focus`,isFocusable:(e,n)=>m(n).is(YD)})},_hoverStartHandler:B,_hoverEndHandler:B,_toggleActiveState(t,e){this.option("isActive",e),t.toggleClass("dx-state-active",e)},_updatedHover(){const t=this._options.silent("hoveredElement");this._hover(t,t)},_findHoverTarget(t){return t&&t.closest(this._activeStateUnit||this._eventBindingTarget())},_hover(t,e){const{hoverStateEnabled:n,disabled:i,isActive:s}=this.option();if(e=this._findHoverTarget(e),e&&e.toggleClass("dx-state-hover",!1),t&&n&&!i&&!s){const r=this._findHoverTarget(t);r&&r.toggleClass("dx-state-hover",!0)}},_toggleDisabledState(t){this.$element().toggleClass("dx-state-disabled",!!t),this.setAria("disabled",t||void 0)},_toggleIndependentState(){this.$element().toggleClass("dx-state-independent",this.option("ignoreParentReadOnly"))},_setWidgetOption(t,e){if(!this[t])return;if(Ce(e[0])){N(e[0],(r,o)=>this._setWidgetOption(t,[r,o]));return}const n=e[0];let i=e[1];e.length===1&&(i=this.option(n));const s=this[`${t}OptionMap`];this[t].option(s?s(n):n,i)},_optionChanged(t){const{name:e,value:n,previousValue:i}=t;switch(e){case"disabled":this._toggleDisabledState(n),this._updatedHover(),this._refreshFocusState();break;case"hint":this._renderHint();break;case"ignoreParentReadOnly":this._toggleIndependentState();break;case"activeStateEnabled":this._attachFeedbackEvents();break;case"hoverStateEnabled":this._attachHoverEvents(),this._updatedHover();break;case"tabIndex":case"focusStateEnabled":this._refreshFocusState();break;case"onFocusIn":case"onFocusOut":case"useResizeObserver":break;case"accessKey":this._renderAccessKey();break;case"hoveredElement":this._hover(n,i);break;case"isActive":this._updatedHover();break;case"visible":this._toggleVisibility(n),this._isVisibilityChangeSupported()&&this._checkVisibilityChanged(n?"shown":"hiding");break;case"onKeyboardHandled":this._attachKeyboardEvents();break;case"onContentReady":this._initContentReadyAction();break;default:this.callBase(t)}},_isVisible(){const{visible:t}=this.option();return this.callBase()&&t},beginUpdate(){this._ready(!1),this.callBase()},endUpdate(){this.callBase(),this._initialized&&this._ready(!0)},_ready(t){if(arguments.length===0)return this._isReady;this._isReady=t},setAria(){if(!Ce(arguments.length<=0?void 0:arguments[0]))qA(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],(arguments.length<=2?void 0:arguments[2])||this._getAriaTarget());else{const t=(arguments.length<=1?void 0:arguments[1])||this._getAriaTarget();N(arguments.length<=0?void 0:arguments[0],(e,n)=>qA(e,n,t))}},isReady(){return this._ready()},repaint(){this._refresh()},focus(){nm.trigger(this._focusTarget())},registerKeyHandler(t,e){const n=this._supportedKeys();this._supportedKeys=()=>T(n,{[t]:e})}});Kt.getOptionsFromContainer=t=>{let{name:e,fullName:n,value:i}=t,s={};if(e===n)s=i;else{const r=n.split(".").pop();s[r]=i}return s};const rq=function(t,e,n){const i=function(){let s;return function(r){s!==r&&(n(r,s),s=r)}}();return{dispose:t(e,i),force(){i(e())}}},hu=ze.inherit({ctor(t,e,n){this._$element=t,this._options=e,this._rawData=n,EV(t,this,this._dispose),this._render()},_render(){const t=m("<div>").addClass("dx-item-content-placeholder");this._$element.append(t),this._watchers=[],this._renderWatchers()},_renderWatchers(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher(t,e){const n=this._rawData,i=this._options.fieldGetter(t),s=rq(this._options.watchMethod(),()=>i(n),(r,o)=>{this._dirty=!0,e(r,o)});this._watchers.push(s)},setDataField(){if(this._dirty=!1,N(this._watchers,(t,e)=>{e.force()}),this._dirty)return!0},_renderDisabled(t,e){this._$element.toggleClass("dx-state-disabled",!!t),this._$element.attr("aria-disabled",!!t),this._updateOwnerFocus(t)},_updateOwnerFocus(t){const e=this._options.owner;e&&t&&e._resetItemFocus(this._$element)},_renderVisible(t,e){this._$element.toggleClass("dx-state-invisible",t!==void 0&&!t)},_dispose(){N(this._watchers,(t,e)=>{e.dispose()})}});hu.getInstance=function(t){return TV(t,this)};const df="dx-item",oq="dx-empty-collection",aq=/^([^.]+\[\d+\]\.)+([\w.]+)$/,wL=Kt.inherit({_activeStateUnit:`.${df}`,_supportedKeys(){const t=function(e,n){bn(n)||(n.preventDefault(),n.stopPropagation(),this._moveFocus(e,n))};return T(this.callBase(),{space:function(e){e.preventDefault(),this._enterKeyHandler(e)},enter:this._enterKeyHandler,leftArrow:t.bind(this,"left"),rightArrow:t.bind(this,"right"),upArrow:t.bind(this,"up"),downArrow:t.bind(this,"down"),pageUp:t.bind(this,"up"),pageDown:t.bind(this,"down"),home:t.bind(this,"first"),end:t.bind(this,"last")})},_enterKeyHandler(t){const e=m(this.option("focusedElement"));if(!e.length)return;const n=this._getItemData(e);n!=null&&n.onClick&&this._itemEventHandlerByHandler(e,n.onClick,{event:t}),this._itemClickHandler(T({},t,{target:e.get(0),currentTarget:e.get(0)}))},_getDefaultOptions(){return T(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:q.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:t=>t?t.disabled:void 0,visibleExpr:t=>t?t.visible:void 0})},_init(){this._compileDisplayGetter(),this._initDataController(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter(){const t=this.option("displayExpr");this._displayGetter=t?lt(this.option("displayExpr")):void 0},_initTemplates(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:()=>"item",_initDefaultItemTemplate(){const t=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new ea((e,n)=>{Ce(n)?this._prepareDefaultItemTemplate(n,e):(t&&ie(t.text)&&(n=t.text(n)),e.text(String(rt(n,""))))},this._getBindableFields(),this.option("integrationOptions.watchMethod"),t)})},_getBindableFields:()=>["text","html"],_getFieldsMap(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate(t,e){M(t.text)&&e.text(t.text),M(t.html)&&e.html(t.html)},_initItemsFromMarkup(){const t=iL(this.$element(),"dxItem");if(!t.length||this.option("items").length)return;const e=t.map(n=>{let{element:i,options:s}=n;return/\S/.test(i.innerHTML)&&!s.template?s.template=this._prepareItemTemplate(i):m(i).remove(),s});this.option("items",e)},_prepareItemTemplate(t){const e="tmpl-"+new Et,n=m(t).detach().clone().removeAttr("data-options").addClass("dx-template-wrapper");return this._saveTemplate(e,n),e},_dataSourceOptions:()=>({paginate:!1}),_cleanRenderedItems(){this._renderedItemsCount=0},_focusTarget(){return this.$element()},_focusInHandler(t){if(this.callBase.apply(this,arguments),!this._isFocusTarget(t.target))return;const e=m(this.option("focusedElement"));if(e.length)this._setFocusedItem(e);else{const n=this._getActiveItem();n.length&&this.option("focusedElement",se(n))}},_focusOutHandler(){this.callBase.apply(this,arguments);const t=m(this.option("focusedElement"));this._updateFocusedItemState(t,!1)},_findActiveTarget(t){return t.find(this._activeStateUnit)},_getActiveItem(t){const e=m(this.option("focusedElement"));if(e.length)return e;let n=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0;const i=this._getActiveElement(),s=i.length-1;return n<0&&(n=t?s:0),i.eq(n)},_moveFocus(t){const e=this._getAvailableItems();let n;switch(t){case"pageup":case"up":n=this._prevItem(e);break;case"pagedown":case"down":n=this._nextItem(e);break;case"right":n=this.option("rtlEnabled")?this._prevItem(e):this._nextItem(e);break;case"left":n=this.option("rtlEnabled")?this._nextItem(e):this._prevItem(e);break;case"first":n=e.first();break;case"last":n=e.last();break;default:return!1}n.length!==0&&this.option("focusedElement",se(n))},_getVisibleItems(t){return t=t||this._itemElements(),t.filter(":visible")},_getAvailableItems(t){return this._getVisibleItems(t)},_prevItem(t){const e=this._getActiveItem(),n=t.index(e),i=t.last();let s=m(t[n-1]);const r=this.option("loopItemFocus");return s.length===0&&r&&(s=i),s},_nextItem(t){const e=this._getActiveItem(!0),n=t.index(e),i=t.first();let s=m(t[n+1]);const r=this.option("loopItemFocus");return s.length===0&&r&&(s=i),s},_selectFocusedItem(t){this.selectItem(t)},_updateFocusedItemState(t,e,n){const i=m(t);i.length&&(this._refreshActiveDescendant(),this._refreshItemId(i,n),this._toggleFocusClass(e,i)),this._updateParentActiveDescendant()},_refreshActiveDescendant(t){this.setAria("activedescendant",M(this.option("focusedElement"))?this.getFocusedItemId():null,t)},_refreshItemId(t,e){!e&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),t):this.setAria("id",null,t)},_isDisabled:t=>t&&m(t).attr("aria-disabled")==="true",_setFocusedItem(t){if(!t||!t.length)return;this._updateFocusedItemState(t,!0),this.onFocusedItemChanged(this.getFocusedItemId());const{selectOnFocus:e}=this.option(),n=this._isDisabled(t);e&&!n&&this._selectFocusedItem(t)},_findItemElementByItem(t){let e=m();const n=this;return this.itemElements().each(function(){const i=m(this);if(i.data(n._itemDataKey())===t)return e=i,!1}),e},_getIndexByItem(t){return this.option("items").indexOf(t)},_itemOptionChanged(t,e,n,i){const s=this._findItemElementByItem(t);if(!s.length)return;this.constructor.ItemClass.getInstance(s).setDataField(e,n)||this._refreshItem(s,t),e==="disabled"&&n&&this._resetItemFocus(s)},_resetItemFocus(t){t.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem(t){const e=this._getItemData(t),n=t.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+n,e,null,t)},_updateParentActiveDescendant:B,_optionChanged(t){if(t.name==="items"){const e=t.fullName.match(aq);if(e&&e.length){const n=e[e.length-1],i=t.fullName.replace(`.${n}`,""),s=this.option(i);this._itemOptionChanged(s,n,t.value,t.previousValue);return}}switch(t.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(t.previousValue,!1,!0),this._setFocusedItem(m(t.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:this.callBase(t)}},_invalidate(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage(){return this._expectNextPageLoading(),this._dataController.loadNextPage()},_expectNextPageLoading(){this._startIndexForAppendedItems=0},_expectLastItemLoading(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler(t){const e=this.option("items");this._initialized&&e&&this._shouldAppendItems()?(this._renderedItemsCount=e.length,(!this._isLastPage()||this._startIndexForAppendedItems!==-1)&&(this.option().items=e.concat(t.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",t.slice())},_refreshContent(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems(){return this._startIndexForAppendedItems!=null&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:()=>!1,_clean(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()},_cleanItemContainer(){m(this._itemContainer()).empty()},_dispose(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer(){return this.$element()},_itemClass:()=>df,_itemContentClass(){return this._itemClass()+"-content"},_selectedItemClass:()=>"dx-item-selected",_itemResponseWaitClass:()=>"dx-item-response-wait",_itemSelector(){return`.${this._itemClass()}`},_itemDataKey:()=>"dxItemData",_itemIndexKey:()=>"dxItemIndex",_itemElements(){return this._itemContainer().find(this._itemSelector())},_initMarkup(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:Ic(function(){this._renderContentImpl()}),_renderContent(){this._fireContentReadyAction()},_render(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_getPointerEvent:()=>ot.down,_attachClickEvent(){const t=this._itemSelector(),e=this._getPointerEvent(),n=K(_n,this.NAME),i=K(e,this.NAME),s=new Vo(r=>{const{event:o}=r;this._itemPointerDownHandler(o)});b.off(this._itemContainer(),n,t),b.off(this._itemContainer(),i,t),b.on(this._itemContainer(),n,t,r=>this._itemClickHandler(r)),b.on(this._itemContainer(),i,t,r=>{s.execute({element:m(r.target),event:r})})},_itemClickHandler(t,e,n){this._itemDXEventHandler(t,"onItemClick",e,n)},_itemPointerDownHandler(t){this.option("focusStateEnabled")&&(this._itemFocusHandler=(function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,t.isDefaultPrevented())return;const e=m(t.target),n=e.closest(this._itemElements()),i=this._closestFocusable(e);n.length&&this._isFocusTarget(i==null?void 0:i.get(0))&&this.option("focusedElement",se(n))}).bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable(t){if(t.is(YD))return t;for(t=t.parent();t.length&&!W.isDocument(t.get(0))&&!W.isDocumentFragment(t.get(0));){if(t.is(YD))return t;t=t.parent()}},_forcePointerDownFocus(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent(){const t=this._itemContainer(),e=this._itemSelector(),n=K(hh.name,this.NAME);b.off(t,n,e),b.on(t,n,e,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler(t){this._shouldFireHoldEvent()?this._itemDXEventHandler(t,"onItemHold"):t.cancel=!0},_attachContextMenuEvent(){const t=this._itemContainer(),e=this._itemSelector(),n=K(uL,this.NAME);b.off(t,n,e),b.on(t,n,e,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler(t){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(t,"onItemContextMenu"):t.cancel=!0},_renderContentImpl(){const t=this.option("items")||[];this._renderedItemsCount?this._renderItems(t.slice(this._renderedItemsCount)):this._renderItems(t)},_renderItems(t){t.length&&N(t,(e,n)=>{this._renderItem(this._renderedItemsCount+e,n)}),this._renderEmptyMessage()},_getItemsContainer(){return this._itemContainer()},_setAttributes(t){const e=L({},this.option("_itemAttributes")),{class:n}=e;if(n){const i=t.get(0).className;e.class=[i,n].join(" ")}t.attr(e)},_renderItem(t,e,n,i){const s=(t==null?void 0:t.item)??t;n=n||this._getItemsContainer();const r=this._renderItemFrame(s,e,n,i);this._setElementData(r,e,s),this._setAttributes(r),this._attachItemClickEvent(e,r);const o=this._getItemContent(r),a=this._renderItemContent({index:s,itemData:e,container:se(o),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),l=this;return Ne(a).done(c=>{l._postprocessRenderItem({itemElement:r,itemContent:c,itemData:e,itemIndex:s}),l._executeItemRenderAction(t,e,se(r))}),r},_getItemContent(t){const e=t.find(".dx-item-content-placeholder");return e.removeClass("dx-item-content-placeholder"),e},_attachItemClickEvent(t,e){!t||!t.onClick||b.on(e,_n,n=>{this._itemEventHandlerByHandler(e,t.onClick,{event:n})})},_renderItemContent(t){const e=this._getItemTemplateName(t),n=this._getTemplate(e);this._addItemContentClasses(t);const i=m(this._createItemByTemplate(n,t));return i.hasClass("dx-template-wrapper")?this._renderItemContentByNode(t,i):t.container},_renderItemContentByNode(t,e){return m(t.container).replaceWith(e),t.container=se(e),this._addItemContentClasses(t),e},_addItemContentClasses(t){const e=[df+"-content",t.contentClass];m(t.container).addClass(e.join(" "))},_appendItemToContainer(t,e,n){e.appendTo(t)},_renderItemFrame(t,e,n,i){const s=m("<div>");if(new this.constructor.ItemClass(s,this._itemOptions(),e||{}),i&&i.length?i.replaceWith(s):this._appendItemToContainer.call(this,n,s,t),this.option("useItemTextAsTitle")){const r=this._displayGetter?this._displayGetter(e):e;s.attr("title",r)}return s},_itemOptions(){const t=this;return{watchMethod:()=>t.option("integrationOptions.watchMethod"),owner:t,fieldGetter(e){const n=t.option(`${e}Expr`);return lt(n)}}},_postprocessRenderItem:B,_executeItemRenderAction(t,e,n){this._getItemRenderAction()({itemElement:n,itemIndex:t,itemData:e})},_setElementData(t,e,n){t.addClass([df,this._itemClass()].join(" ")).data(this._itemDataKey(),e).data(this._itemIndexKey(),n)},_createItemRenderAction(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName(t){const e=t.itemData,n=t.templateProperty||this.option("itemTemplateProperty");return e&&e[n]||t.defaultTemplateName},_createItemByTemplate(t,e){return t.render({model:e.itemData,container:e.container,index:e.index,onRendered:this._onItemTemplateRendered(t,e)})},_onItemTemplateRendered:()=>B,_emptyMessageContainer(){return this._itemContainer()},_renderEmptyMessage(t){t=t||this.option("items");const e=this.option("noDataText"),n=!e||t&&t.length||this._dataController.isLoading();n&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),n||(this._$noData=this._$noData||m("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()),this.option("encodeNoDataText")?this._$noData.text(e):this._$noData.html(e)),this.$element().toggleClass(oq,!n)},_itemDXEventHandler(t,e,n,i){this._itemEventHandler(t.target,e,T(n,{event:t}),i)},_itemEventHandler(t,e,n,i){const s=this._createActionByOption(e,T({validatingTargetName:"itemElement"},i));return this._itemEventHandlerImpl(t,s,n)},_itemEventHandlerByHandler(t,e,n,i){const s=this._createAction(e,T({validatingTargetName:"itemElement"},i));return this._itemEventHandlerImpl(t,s,n)},_itemEventHandlerImpl(t,e,n){const i=this._closestItemElement(m(t)),s=T({},n);return e(T(n,this._extendActionArgs(i),s))},_extendActionArgs(t){return{itemElement:se(t),itemIndex:this._itemElements().index(t),itemData:this._getItemData(t)}},_closestItemElement(t){return m(t).closest(this._itemSelector())},_getItemData(t){return m(t).data(this._itemDataKey())},_getSummaryItemsSize(t,e,n){let i=0;return e&&N(e,(s,r)=>{t==="width"?i+=et(r,n||!1):t==="height"&&(i+=tt(r,n||!1))}),i},getFocusedItemId(){return this._focusedItemId||(this._focusedItemId=`dx-${new Et}`),this._focusedItemId},itemElements(){return this._itemElements()},itemsContainer(){return this._itemContainer()}}).include(Hw);wL.ItemClass=hu;const{abstract:ci}=ze,lq=ze.inherit({ctor(t){this._collectionWidget=t},getIndexByItemData:ci,getItemDataByIndex:ci,getKeysByItems:ci,getItemsByKeys:ci,itemsGetter:ci,getKeyByIndex(t){const e=this._denormalizeItemIndex(t);return this.getKeysByItems([this.getItemDataByIndex(e)])[0]},_equalKeys(t,e){return this._collectionWidget._isKeySpecified()?Bi(t,e):t===e},beginCache(){this._cache={}},endCache(){this._cache=null},getIndexByKey:ci,getNormalizedIndex(t){return this._isNormalizedItemIndex(t)?t:this._isItemIndex(t)?this._normalizeItemIndex(t):this._isNode(t)?this._getNormalizedItemIndex(t):this._normalizeItemIndex(this.getIndexByItemData(t))},getIndex(t){return this._isNormalizedItemIndex(t)?this._denormalizeItemIndex(t):this._isItemIndex(t)?t:this._isNode(t)?this._denormalizeItemIndex(this._getNormalizedItemIndex(t)):this.getIndexByItemData(t)},getItemElement(t){if(this._isNormalizedItemIndex(t))return this._getItemByNormalizedIndex(t);if(this._isItemIndex(t))return this._getItemByNormalizedIndex(this._normalizeItemIndex(t));if(this._isNode(t))return m(t);const e=this._normalizeItemIndex(this.getIndexByItemData(t));return this._getItemByNormalizedIndex(e)},_isNode:t=>W.isNode(t&&Is(t)?t.get(0):t),deleteItemAtIndex:ci,itemPlacementFunc(t,e){return this._itemsFromSameParent(t,e)&&t<e?"after":"before"},moveItemAtIndexToIndex:ci,_isNormalizedItemIndex:t=>typeof t=="number"&&Math.round(t)===t,_isItemIndex:ci,_getNormalizedItemIndex:ci,_normalizeItemIndex:ci,_denormalizeItemIndex:ci,_getItemByNormalizedIndex:ci,_itemsFromSameParent:ci}),SL=lq.inherit({_getPlainItems(){return this._collectionWidget.option("items")||[]},getIndexByItemData(t){const e=this._collectionWidget.keyOf.bind(this._collectionWidget);return e?this.getIndexByKey(e(t)):this._getPlainItems().indexOf(t)},getItemDataByIndex(t){return this._getPlainItems()[t]},deleteItemAtIndex(t){this._getPlainItems().splice(t,1)},itemsGetter(){return this._getPlainItems()},getKeysByItems(t){const e=this._collectionWidget.keyOf.bind(this._collectionWidget);let n=t;if(e){n=[];for(let i=0;i<t.length;i++)n.push(e(t[i]))}return n},getIndexByKey(t){const e=this._cache,n=e&&e.keys||this.getKeysByItems(this._getPlainItems());if(e&&!e.keys&&(e.keys=n),typeof t=="object"){for(let i=0,{length:s}=n;i<s;i++)if(this._equalKeys(t,n[i]))return i}else return n.indexOf(t);return-1},getItemsByKeys:(t,e)=>(e||t).slice(),moveItemAtIndexToIndex(t,e){const n=this._getPlainItems(),i=n[t];n.splice(t,1),n.splice(e,0,i)},_isItemIndex:t=>typeof t=="number"&&Math.round(t)===t,_getNormalizedItemIndex(t){return this._collectionWidget._itemElements().index(t)},_normalizeItemIndex:t=>t,_denormalizeItemIndex:t=>t,_getItemByNormalizedIndex(t){return t>-1?this._collectionWidget._itemElements().eq(t):null},_itemsFromSameParent:()=>!0}),ms=function(t){return t!==-1},ia=wL.inherit({_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions(){return T(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor(t,e){this._userOptions=e||{},this.callBase(t,e)},_init(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule()},_initKeyGetter(){this._keyGetter=lt(this.option("keyExpr"))},_getKeysByItems(t){return this._editStrategy.getKeysByItems(t)},_getItemsByKeys(t,e){return this._editStrategy.getItemsByKeys(t,e)},_getKeyByIndex(t){return this._editStrategy.getKeyByIndex(t)},_getIndexByKey(t){return this._editStrategy.getIndexByKey(t)},_getIndexByItemData(t){return this._editStrategy.getIndexByItemData(t)},_isKeySpecified(){return!!this._dataController.key()},_getCombinedFilter(){return this._dataController.filter()},key(){return this.option("keyExpr")?this.option("keyExpr"):this._dataController.key()},keyOf(t){let e=t;return this.option("keyExpr")?e=this._keyGetter(t):this._dataController.store()&&(e=this._dataController.keyOf(t)),e},_nullValueSelectionSupported:()=>!1,_initSelectionModule(){const t=this,{itemsGetter:e}=t._editStrategy;this._selection=new R9({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged(n){(n.addedItemKeys.length||n.removedItemKeys.length)&&(t.option("selectedItems",t._getItemsByKeys(n.selectedItemKeys,n.selectedItems)),t._updateSelectedItems(n))},filter:t._getCombinedFilter.bind(t),totalCount(){const n=t.option("items"),i=t._dataController.totalCount();return i>=0?i:t._getItemsCount(n)},key:t.key.bind(t),keyOf:t.keyOf.bind(t),load(n){var i;const s=t._dataController;return n.customQueryParams=(i=s.loadOptions())===null||i===void 0?void 0:i.customQueryParams,n.userData=s.userData(),s.store()?s.loadFromStore(n).done(r=>{if(t._disposed)return;const o=Fw(r).data;s.applyMapFunction(o)}):j().resolve(this.plainItems())},dataFields:()=>t._dataController.select(),plainItems:e.bind(t._editStrategy)})},_getItemsCount(t){return t.reduce((e,n)=>e+(n.items?this._getItemsCount(n.items):1),0)},_initEditStrategy(){const t=SL;this._editStrategy=new t(this)},_getSelectedItemIndices(t){const e=this,n=[];return t=t||this._selection.getSelectedItemKeys(),e._editStrategy.beginCache(),N(t,(i,s)=>{const r=e._getIndexByKey(s);ms(r)&&n.push(r)}),e._editStrategy.endCache(),n},_initMarkup(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done(()=>this._normalizeSelectedItems()),this.callBase()},_render(){this.callBase(),this._rendering=!1},_fireContentReadyAction(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions(t){t=t||this._chooseSelectOption();let e,n,i,s;switch(t){case"selectedIndex":e=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),M(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedItem",e),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(s=this.option("selectedItems")||[],n=s.length?this._editStrategy.getIndexByItemData(s[0]):-1,this.option("selectionRequired")&&!ms(n))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",s[0]),this._setOptionWithoutOptionChange("selectedIndex",n),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(s));break;case"selectedItem":if(e=this.option("selectedItem"),n=this._editStrategy.getIndexByItemData(e),this.option("selectionRequired")&&!ms(n))return this._syncSelectionOptions("selectedIndex");M(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedIndex",n),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(i=this.option("selectedItemKeys"),this.option("selectionRequired")){const r=this._getIndexByKey(i[0]);if(!ms(r))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(i)}return j().resolve().promise()},_chooseSelectOption(){let t="selectedIndex";const e=(function(n){const i=this.option(n);return M(i)&&i.length||n in this._userOptions}).bind(this);return e("selectedItems")?t="selectedItems":e("selectedItem")?t="selectedItem":e("selectedItemKeys")&&(t="selectedItemKeys"),t},_compareKeys(t,e){if(t.length!==e.length)return!1;for(let n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},_normalizeSelectedItems(){if(this.option("selectionMode")==="none")this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if(this.option("selectionMode")==="single"){const t=this.option("selectedItems");if(t.length>1||!t.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){const e=this._selection.getSelectedItems();let n=t[0]===void 0?e[0]:t[0];return n===void 0&&(n=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&n&&n.items&&(n.items=[n.items[0]]),this._selection.setSelection(this._getKeysByItems([n])),this._setOptionWithoutOptionChange("selectedItems",[n]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(t))}else{const t=this._getKeysByItems(this.option("selectedItems")),e=this._selection.getSelectedItemKeys();this._compareKeys(e,t)||this._selection.setSelection(t)}return j().resolve().promise()},_itemClickHandler(t){let e=j().resolve();const{callBase:n}=this;this._createAction(i=>{e=this._itemSelectHandler(i.event)??e},{validatingTargetName:"itemElement"})({itemElement:m(t.currentTarget),event:t}),e.always(()=>{n.apply(this,arguments)})},_itemSelectHandler(t){var e;let n;if(!this.option("selectByClick"))return;const i=t.currentTarget;return this.isItemSelected(i)?this.unselectItem(t.currentTarget):n=this.selectItem(t.currentTarget),(e=n)===null||e===void 0?void 0:e.promise()},_selectedItemElement(t){return this._itemElements().eq(t)},_postprocessRenderItem(t){if(this.option("selectionMode")!=="none"){const e=m(t.itemElement),n=this._editStrategy.getNormalizedIndex(e),i=this._isItemSelected(n);this._processSelectableItem(e,i)}},_processSelectableItem(t,e){t.toggleClass(this._selectedItemClass(),e),this._setAriaSelectionAttribute(t,String(e))},_updateSelectedItems(t){const e=this,{addedItemKeys:n}=t,{removedItemKeys:i}=t;if(e._rendered&&(n.length||i.length)){const s=e._selectionChangePromise;if(!e._rendering){const r=[];let o;const a=[];e._editStrategy.beginCache();for(let l=0;l<n.length;l++)o=e._getIndexByKey(n[l]),r.push(o),e._addSelection(o);for(let l=0;l<i.length;l++)o=e._getIndexByKey(i[l]),a.push(o),e._removeSelection(o);e._editStrategy.endCache(),e._updateSelection(r,a)}Ne(s).done(()=>{e._fireSelectionChangeEvent(t.addedItems,t.removedItems)})}},_fireSelectionChangeEvent(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_updateSelection:B,_setAriaSelectionAttribute(t,e){this.setAria("selected",e,t)},_removeSelection(t){const e=this._editStrategy.getItemElement(t);ms(t)&&(this._processSelectableItem(e,!1),b.triggerHandler(e,"stateChanged",!1))},_addSelection(t){const e=this._editStrategy.getItemElement(t);ms(t)&&(this._processSelectableItem(e,!0),b.triggerHandler(e,"stateChanged",!0))},_isItemSelected(t){const e=this._getKeyByIndex(t);return this._selection.isItemSelected(e,{checkPending:!0})},_optionChanged(t){switch(t.name){case"selectionMode":this._invalidate();break;case"dataSource":(!t.value||Array.isArray(t.value)&&!t.value.length)&&this.option("selectedItemKeys",[]),this.callBase(t);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(t.name).done(()=>this._normalizeSelectedItems());break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(t)}},_clearSelectedItems(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare(t){if(t.data("dxItemDeleting"))return j().resolve().promise();t.data("dxItemDeleting",!0);const e=j(),n={cancel:!1},i=this._itemEventHandler(t,"onItemDeleting",n,{excludeValidators:["disabled","readOnly"]});return Ne(i).always(function(s){const r=!i,o=!r&&i.state()==="resolved",a=!!arguments.length,l=r||o&&!a||o&&s;Ne(vi(n.cancel)).always(()=>{t.data("dxItemDeleting",!1)}).done(c=>{l&&!c?e.resolve():e.reject()}).fail(e.reject)}),e.promise()},_deleteItemFromDS(t){const e=this._dataController,n=j(),i=this.option("disabled"),s=e.store();if(!s)return j().resolve().promise();if(!s.remove)throw it.Error("E1011");return this.option("disabled",!0),s.remove(e.keyOf(this._getItemData(t))).done(r=>{r!==void 0?n.resolve():n.reject()}).fail(()=>{n.reject()}),n.always(()=>{this.option("disabled",i)}),n},_tryRefreshLastPage(){const t=j();return this._isLastPage()||this.option("grouped")?t.resolve():this._refreshLastPage().done(()=>{t.resolve()}),t.promise()},_refreshLastPage(){return this._expectLastItemLoading(),this._dataController.load()},_updateSelectionAfterDelete(t){const e=this._getKeyByIndex(t);this._selection.deselect([e])},_updateIndicesAfterIndex(t){const e=this._itemElements();for(let n=t+1;n<e.length;n++)m(e[n]).data(this._itemIndexKey(),n-1)},_simulateOptionChange(t){const e=this.option(t);e instanceof Zs||this._optionChangedAction({name:t,fullName:t,value:e})},isItemSelected(t){return this._isItemSelected(this._editStrategy.getNormalizedIndex(t))},selectItem(t){if(this.option("selectionMode")==="none")return;const e=this._editStrategy.getNormalizedIndex(t);if(!ms(e))return;const n=this._getKeyByIndex(e);if(this._selection.isItemSelected(n))return;if(this.option("selectionMode")==="single")return this._selection.setSelection([n]);const i=this.option("selectedItemKeys")||[];return this._selection.setSelection([...i,n],[n])},unselectItem(t){const e=this._editStrategy.getNormalizedIndex(t);if(!ms(e))return;const n=this._selection.getSelectedItemKeys();if(this.option("selectionRequired")&&n.length<=1)return;const i=this._getKeyByIndex(e);this._selection.isItemSelected(i,{checkPending:!0})&&this._selection.deselect([i])},_deleteItemElementByIndex(t){this._updateSelectionAfterDelete(t),this._updateIndicesAfterIndex(t),this._editStrategy.deleteItemAtIndex(t)},_afterItemElementDeleted(t,e){const n=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(n),this._itemEventHandler(t,"onItemDeleted",e,{beforeExecute(){t.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem(t){const e=this,n=j(),i=this._editStrategy.getItemElement(t),s=this._editStrategy.getNormalizedIndex(t),r=this._itemResponseWaitClass();return ms(s)?this._waitDeletingPrepare(i).done(()=>{i.addClass(r);const o=e._extendActionArgs(i);e._deleteItemFromDS(i).done(()=>{e._deleteItemElementByIndex(s),e._afterItemElementDeleted(i,o),e._tryRefreshLastPage().done(()=>{n.resolveWith(e)})}).fail(()=>{i.removeClass(r),n.rejectWith(e)})}).fail(()=>{n.rejectWith(e)}):n.rejectWith(e),n.promise()},reorderItem(t,e){const n=j(),i=this,s=this._editStrategy,r=s.getItemElement(t),o=s.getItemElement(e),a=s.getNormalizedIndex(t),l=s.getNormalizedIndex(e),c=this._dataController.getDataSource()?"dataSource":"items";return ms(a)&&ms(l)&&a!==l?n.resolveWith(this):n.rejectWith(this),n.promise().done(function(){o[s.itemPlacementFunc(a,l)](r),s.moveItemAtIndexToIndex(a,l),this._updateIndicesAfterIndex(a),i.option("selectedItems",i._getItemsByKeys(i._selection.getSelectedItemKeys(),i._selection.getSelectedItems())),c==="items"&&i._simulateOptionChange(c),i._itemEventHandler(r,"onItemReordered",{fromIndex:s.getIndex(a),toIndex:s.getIndex(l)},{excludeValidators:["disabled","readOnly"]})})}}),cq=ia.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(t){const e=j(),n=j();this._deferredItems[t.index]=n;const i=this.callBase.call(this,t);return n.done(()=>{e.resolve(i)}),e.promise()},_onItemTemplateRendered(t,e){return()=>{this._deferredItems[e.index].resolve()}},_postProcessRenderItems:B,_renderItemsAsync(){const t=j();return Ne.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),t.resolve()}),t.promise()},_clean(){this.callBase(),this._deferredItems=[]}}),bL=Kt,uq=ia,dq=cq,EL="dx-toolbar",hq="dxToolbarItemDataKey";class TL extends dq{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(e=>e!=="disabled")}_initTemplates(){super._initTemplates();const e=new ea((n,i,s)=>{if(Ce(i)){const{text:r,html:o,widget:a}=i;r&&n.text(r).wrapInner("<div>"),o&&n.html(o),a==="dxDropDownButton"&&(i.options=i.options??{},M(i.options.stylingMode)||(i.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),a==="dxButton"&&(this.option("useFlatButtons")&&(i.options=i.options??{},i.options.stylingMode=i.options.stylingMode??"text"),this.option("useDefaultButtons")&&(i.options=i.options??{},i.options.type=i.options.type??"default"))}else n.text(String(i));this._getTemplate("dx-polymorph-widget").render({container:n,model:s,parent:this})},["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return L({},super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>ii(),options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return hq}_dimensionChanged(e){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(EL),this._$toolbarItemsContainer=m("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){const e=this._$toolbarItemsContainer;N(["before","center","after"],(n,i)=>{const s=`dx-toolbar-${i}`;e.find(`.${s}`).length||(this[`_$${i}Section`]=m("<div>").addClass(s).attr("role","presentation").appendTo(e))})}_arrangeItems(e){var n,i;const s=e??me(this.$element());this._$centerSection.css({margin:"0 auto",float:"none"});const r=ke((n=this._$beforeSection)===null||n===void 0?void 0:n.get(0)),o=ke((i=this._$afterSection)===null||i===void 0?void 0:i.get(0));this._alignCenterSection(r,o,s);const a=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),l=a.parent();if(!a.length)return;const c=r.width?r.width:a.position().left,u=l.hasClass("dx-toolbar-before")?0:c,d=l.hasClass("dx-toolbar-after")?0:o.width;let p=0;l.children().not(".dx-toolbar-label").each((y,v)=>{p+=et(v)});const f=s-p,g=Math.max(f-u-d,0);if(l.hasClass("dx-toolbar-before"))this._alignSection(this._$beforeSection,g);else{const y=et(a)-me(a);a.css("maxWidth",g-y)}}_alignCenterSection(e,n,i){var s;this._alignSection(this._$centerSection,i-e.width-n.width);const r=this.option("rtlEnabled"),o=r?n:e,a=r?e:n,l=ke((s=this._$centerSection)===null||s===void 0?void 0:s.get(0));(o.right>l.left||l.right>a.left)&&this._$centerSection.css({marginLeft:o.width,marginRight:a.width,float:o.width>a.width?"none":"right"})}_alignSection(e,n){let s=e.find(".dx-toolbar-label").toArray();n-=this._getCurrentLabelsPaddings(s);const r=this._getCurrentLabelsWidth(s),o=Math.abs(r-n);n<r?(s=s.reverse(),this._alignSectionLabels(s,o,!1)):this._alignSectionLabels(s,o,!0)}_alignSectionLabels(e,n,i){const s=function(r){return ke(r).width};for(let r=0;r<e.length;r++){const o=m(e[r]),a=Math.ceil(s(e[r]));let l;i&&o.css("maxWidth","inherit");const c=Math.ceil(i?s(e[r]):a);if(c<n)l=i?c:0,n-=c;else{l=i?a+n:a-n,o.css("maxWidth",l);break}o.css("maxWidth",l)}}_applyCompactMode(){const e=m(this.element());e.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsSize("width",this._itemElements(),!0)>me(e)&&e.addClass("dx-toolbar-compact")}_getCurrentLabelsWidth(e){let n=0;return e.forEach(i=>{n+=et(i)}),n}_getCurrentLabelsPaddings(e){let n=0;return e.forEach(i=>{n+=et(i)-me(i)}),n}_renderItem(e,n,i,s){const r=n.location??"center",o=i??this[`_$${r}Section`],a=!!(n.text??n.html),l=super._renderItem(e,n,o,s);return l.toggleClass("dx-toolbar-button",!a).toggleClass("dx-toolbar-label",a).addClass(n.cssClass),l}_renderGroupedItems(){N(this.option("items"),(e,n)=>{const i=n.items,s=m("<div>").addClass("dx-toolbar-group"),r=n.location??"center";!i||!i.length||(N(i,(o,a)=>{this._renderItem(o,a,s,null)}),this._$toolbarItemsContainer.find(`.dx-toolbar-${r}`).append(s))})}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){return this.option("items")??[]}_renderContentImpl(){const e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",e.length===0),this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return me(this.$element())>0&&Re(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,n,i,s){super._itemOptionChanged(e,n,i,s),this._arrangeItems()}_optionChanged(e){const{name:n}=e;switch(n){case"width":super._optionChanged(e),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged(e)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){if(Un()){const e=()=>new Promise(i=>{const s=()=>{let o=!0;return this.$element().parents().each((a,l)=>{if(Tt.isAnimating(m(l)))return o=!1,!1}),o&&i(),o},r=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>s()||r(),15)};r()}),n=()=>{const i=this.$element().find(".dx-toolbar-label"),s=[];return i.each((r,o)=>{const a=m(o).text(),l=m(o).css("fontWeight");s.push(D9(a,l))}),Promise.all(s)};Promise.all([e(),n()]).then(()=>{this._dimensionChanged()})}}}re("dxToolbarBase",TL);const YA=pe(),pq={observe:B,unobserve:B,disconnect:B};class fq{constructor(){if(!ae()||!YA.ResizeObserver)return pq;this._callbacksMap=new Map,this._observer=new YA.ResizeObserver(e=>{e.forEach(n=>{var i;(i=this._callbacksMap.get(n.target))===null||i===void 0||i(n)})})}observe(e,n){this._callbacksMap.set(e,n),this._observer.observe(e)}unobserve(e){this._callbacksMap.delete(e),this._observer.unobserve(e)}disconnect(){this._callbacksMap.clear(),this._observer.disconnect()}}const Ka=new fq,mq=/^[\d\w.+_-]+@[\d\w._-]+\.[\w]+$/i,Lt={valid:"valid",invalid:"invalid",pending:"pending"};class sa{constructor(){this.NAME="base"}defaultMessage(e){return q.getFormatter(`validation-${this.NAME}`)(e)}defaultFormattedMessage(e){return q.getFormatter(`validation-${this.NAME}-formatted`)(e)}_isValueEmpty(e){return!Jh.required.validate(e,{})}validate(e,n){const i=Array.isArray(e)?e:[e];let s=!0;return i.length?i.every(r=>(s=this._validate(r,n),s)):s=this._validate(null,n),s}}class gq extends sa{constructor(){super(),this.NAME="required"}_validate(e,n){return!M(e)||e===!1?!1:(e=String(e),(n.trim||!M(n.trim))&&(e=e.trim()),e!=="")}}class _q extends sa{constructor(){super(),this.NAME="numeric"}_validate(e,n){return n.ignoreEmptyValue!==!1&&this._isValueEmpty(e)?!0:n.useCultureSettings&&ve(e)?!isNaN(Ge.parse(e)):ut(e)}}class yq extends sa{constructor(){super(),this.NAME="range"}_validate(e,n){if(n.ignoreEmptyValue!==!1&&this._isValueEmpty(e))return!0;const i=Jh.numeric.validate(e,n),s=M(e)&&e!=="",r=i?parseFloat(e):s&&e.valueOf(),{min:o}=n,{max:a}=n;if(!(i||er(e))&&!s)return!1;if(M(o))return M(a)?r>=o&&r<=a:r>=o;if(M(a))return r<=a;throw Te.Error("E0101")}}class vq extends sa{constructor(){super(),this.NAME="stringLength"}_validate(e,n){return e=String(e??""),(n.trim||!M(n.trim))&&(e=e.trim()),n.ignoreEmptyValue&&this._isValueEmpty(e)?!0:Jh.range.validate(e.length,T({},n))}}class IL extends sa{constructor(){super(),this.NAME="custom"}validate(e,n){if(n.ignoreEmptyValue&&this._isValueEmpty(e))return!0;const{validator:i}=n,s=i&&ie(i.option)&&i.option("dataGetter"),r=ie(s)&&s(),o={value:e,validator:i,rule:n};return r&&T(o,r),n.validationCallback(o)}}class Cq extends IL{constructor(){super(),this.NAME="async"}validate(e,n){if(M(n.reevaluate)||T(n,{reevaluate:!0}),n.ignoreEmptyValue&&this._isValueEmpty(e))return!0;const{validator:i}=n,s=i&&ie(i.option)&&i.option("dataGetter"),r=ie(s)&&s(),o={value:e,validator:i,rule:n};r&&T(o,r);const a=n.validationCallback(o);if(!fl(a))throw Te.Error("E0103");return this._getWrappedPromise(vi(a).promise())}_getWrappedPromise(e){const n=j();return e.then(i=>{n.resolve(i)},i=>{const s={isValid:!1};M(i)&&(ve(i)?s.message=i:ue(i)&&M(i.message)&&ve(i.message)&&(s.message=i.message)),n.resolve(s)}),n.promise()}}class Dq extends sa{constructor(){super(),this.NAME="compare"}_validate(e,n){if(!n.comparisonTarget)throw Te.Error("E0102");if(n.ignoreEmptyValue&&this._isValueEmpty(e))return!0;T(n,{reevaluate:!0});const i=n.comparisonTarget();switch(n.comparisonType||"=="){case"==":return e==i;case"!=":return e!=i;case"===":return e===i;case"!==":return e!==i;case">":return e>i;case">=":return e>=i;case"<":return e<i;case"<=":return e<=i}}}class xq extends sa{constructor(){super(),this.NAME="pattern"}_validate(e,n){if(n.ignoreEmptyValue!==!1&&this._isValueEmpty(e))return!0;let{pattern:i}=n;return ve(i)&&(i=new RegExp(i)),i.test(e)}}class wq extends sa{constructor(){super(),this.NAME="email"}_validate(e,n){return n.ignoreEmptyValue!==!1&&this._isValueEmpty(e)?!0:Jh.pattern.validate(e,T({},n,{pattern:mq}))}}const Jh={required:new gq,numeric:new _q,range:new yq,stringLength:new vq,custom:new IL,async:new Cq,compare:new Dq,pattern:new xq,email:new wq},Sq=ze.inherit({ctor(t,e){this.group=t,this.validators=[],this._isRemovable=e,this._pendingValidators=[],this._onValidatorStatusChanged=this._onValidatorStatusChanged.bind(this),this._resetValidationInfo(),this._eventsStrategy=new yl(this)},validate(){const t={isValid:!0,brokenRules:[],validators:[],status:Lt.valid,complete:null};return this._unsubscribeFromAllChangeEvents(),this._pendingValidators=[],this._resetValidationInfo(),N(this.validators,(e,n)=>{const i=n.validate();t.isValid=t.isValid&&i.isValid,i.brokenRules&&(t.brokenRules=t.brokenRules.concat(i.brokenRules)),t.validators.push(n),i.status===Lt.pending&&this._addPendingValidator(n),this._subscribeToChangeEvents(n)}),this._pendingValidators.length?t.status=Lt.pending:(t.status=t.isValid?Lt.valid:Lt.invalid,this._unsubscribeFromAllChangeEvents(),this._raiseValidatedEvent(t)),this._updateValidationInfo(t),T({},this._validationInfo.result)},_subscribeToChangeEvents(t){t.on("validating",this._onValidatorStatusChanged),t.on("validated",this._onValidatorStatusChanged)},_unsubscribeFromChangeEvents(t){t.off("validating",this._onValidatorStatusChanged),t.off("validated",this._onValidatorStatusChanged)},_unsubscribeFromAllChangeEvents(){N(this.validators,(t,e)=>{this._unsubscribeFromChangeEvents(e)})},_updateValidationInfo(t){this._validationInfo.result=t,t.status===Lt.pending&&(this._validationInfo.deferred||(this._validationInfo.deferred=j(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()))},_addPendingValidator(t){Ci(this._pendingValidators,n=>n===t)[0]||this._pendingValidators.push(t)},_removePendingValidator(t){const e=this._pendingValidators.indexOf(t);e>=0&&this._pendingValidators.splice(e,1)},_orderBrokenRules(t){let e=[];return N(this.validators,(n,i)=>{const s=Ci(t,r=>r.validator===i);s.length&&(e=e.concat(s))}),e},_updateBrokenRules(t){if(!this._validationInfo.result)return;let{brokenRules:e}=this._validationInfo.result;const n=Ci(e,i=>i.validator!==t.validator);t.brokenRules&&(e=n.concat(t.brokenRules)),this._validationInfo.result.brokenRules=this._orderBrokenRules(e)},_onValidatorStatusChanged(t){if(t.status===Lt.pending){this._addPendingValidator(t.validator);return}this._resolveIfComplete(t)},_resolveIfComplete(t){if(this._removePendingValidator(t.validator),this._updateBrokenRules(t),!this._pendingValidators.length){if(this._unsubscribeFromAllChangeEvents(),!this._validationInfo.result)return;this._validationInfo.result.status=this._validationInfo.result.brokenRules.length===0?Lt.valid:Lt.invalid,this._validationInfo.result.isValid=this._validationInfo.result.status===Lt.valid;const e=T({},this._validationInfo.result,{complete:null}),{deferred:n}=this._validationInfo;this._validationInfo.deferred=null,this._raiseValidatedEvent(e),n&&setTimeout(()=>{n.resolve(e)})}},_raiseValidatedEvent(t){this._eventsStrategy.fireEvent("validated",[t])},_resetValidationInfo(){this._validationInfo={result:null,deferred:null}},_synchronizeValidationInfo(){this._validationInfo.result&&(this._validationInfo.result.validators=this.validators)},removeRegisteredValidator(t){const e=this.validators.indexOf(t);e>-1&&(this.validators.splice(e,1),this._synchronizeValidationInfo(),this._resolveIfComplete({validator:t}))},registerValidator(t){this.validators.includes(t)||(this.validators.push(t),this._synchronizeValidationInfo())},reset(){N(this.validators,(t,e)=>{e.reset()}),this._pendingValidators=[],this._resetValidationInfo()},on(t,e){return this._eventsStrategy.on(t,e),this},off(t,e){return this._eventsStrategy.off(t,e),this}}),Qe={groups:[],getGroupConfig(t){const e=Ci(this.groups,n=>n.group===t);if(e.length)return e[0]},findGroup(t,e){var n;const s=((n=t.data())===null||n===void 0||(n=n.dxComponents)===null||n===void 0?void 0:n.includes("dxValidationGroup"))&&t.dxValidationGroup("instance");if(s)return s;const r=t.parents(".dx-validationgroup").first();return r.length?r.dxValidationGroup("instance"):e},initGroups(){this.groups=[],this.addGroup(void 0,!1)},addGroup(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this.getGroupConfig(t);return n||(n=new Sq(t,e),this.groups.push(n)),n},removeGroup(t){const e=this.getGroupConfig(t),n=this.groups.indexOf(e);return n>-1&&this.groups.splice(n,1),e},_setDefaultMessage(t){const{rule:e,validator:n,name:i}=t;M(e.message)||(n.defaultFormattedMessage&&M(i)?e.message=n.defaultFormattedMessage(i):e.message=n.defaultMessage())},_addBrokenRule(t){const{result:e,rule:n}=t;e.brokenRule||(e.brokenRule=n),e.brokenRules||(e.brokenRules=[]),e.brokenRules.push(n)},validate(t,e,n){var i;let s={name:n,value:t,brokenRule:null,brokenRules:null,isValid:!0,validationRules:e,pendingRules:null,status:Lt.valid,complete:null};const r=e==null||(i=e[0])===null||i===void 0?void 0:i.validator,o=[];return N(e||[],(a,l)=>{const c=Jh[l.type];let u;if(c){if(M(l.isValid)&&l.value===t&&!l.reevaluate)return l.isValid?!0:(s.isValid=!1,this._addBrokenRule({result:s,rule:l}),!1);if(l.value=t,l.type==="async")return o.push({rule:l,ruleValidator:c}),!0;if(u=c.validate(t,l),l.isValid=u,u||(s.isValid=!1,this._setDefaultMessage({rule:l,validator:c,name:n}),this._addBrokenRule({result:s,rule:l})),!l.isValid)return!1}else throw Te.Error("E0100")}),s.isValid&&!s.brokenRules&&o.length&&(s=this._validateAsyncRules({value:t,items:o,result:s,name:n})),this._synchronizeGroupValidationInfo(r,s),s.status=s.pendingRules?Lt.pending:s.isValid?Lt.valid:Lt.invalid,s},_synchronizeGroupValidationInfo(t,e){if(!t)return;const n=Qe.getGroupConfig(t._validationGroup);n._updateBrokenRules.call(n,{validator:t,brokenRules:e.brokenRules??[]})},_validateAsyncRules(t){let{result:e,value:n,items:i,name:s}=t;const r=[];return N(i,(o,a)=>{const l=a.ruleValidator.validate(n,a.rule);if(!fl(l))this._updateRuleConfig({rule:a.rule,ruleResult:this._getPatchedRuleResult(l),validator:a.ruleValidator,name:s});else{e.pendingRules||(e.pendingRules=[]),e.pendingRules.push(a.rule);const c=l.then(u=>{const d=this._getPatchedRuleResult(u);return this._updateRuleConfig({rule:a.rule,ruleResult:d,validator:a.ruleValidator,name:s}),d});r.push(c)}}),r.length&&(e.complete=Promise.all(r).then(o=>this._getAsyncRulesResult({result:e,values:o}))),e},_updateRuleConfig(t){let{rule:e,ruleResult:n,validator:i,name:s}=t;e.isValid=n.isValid,n.isValid||(M(n.message)&&ve(n.message)&&n.message.length?e.message=n.message:this._setDefaultMessage({rule:e,validator:i,name:s}))},_getPatchedRuleResult(t){let e;return ue(t)?(e=T({},t),M(e.isValid)||(e.isValid=!0)):e={isValid:CD(t)?t:!0},e},_getAsyncRulesResult(t){let{values:e,result:n}=t;return N(e,(i,s)=>{if(s.isValid===!1){n.isValid=s.isValid;const r=n.pendingRules[i];this._addBrokenRule({result:n,rule:r})}}),n.pendingRules=null,n.complete=null,n.status=n.isValid?Lt.valid:Lt.invalid,n},registerValidatorInGroup(t,e){const n=Qe.addGroup(t);n.registerValidator.call(n,e)},removeRegisteredValidator(t,e){const n=Qe.getGroupConfig(t);if(n){n.removeRegisteredValidator.call(n,e);const i=n.validators,s=n._isRemovable;i.length===0&&s&&this.removeGroup(t)}},initValidationOptions(t){const e={};return t&&["isValid","validationStatus","validationError","validationErrors"].forEach(i=>{i in t&&T(e,this.synchronizeValidationOptions({name:i,value:t[i]},t))}),e},synchronizeValidationOptions(t,e){let{name:n,value:i}=t;switch(n){case"validationStatus":{const s=i===Lt.valid||i===Lt.pending;return e.isValid!==s?{isValid:s}:{}}case"isValid":{const{validationStatus:s}=e;let r=s;return i&&s===Lt.invalid?r=Lt.valid:!i&&s!==Lt.invalid&&(r=Lt.invalid),r!==s?{validationStatus:r}:{}}case"validationErrors":{const s=!i||!i.length?null:i[0];return e.validationError!==s?{validationError:s}:{}}case"validationError":{const{validationErrors:s}=e;if(!i&&s)return{validationErrors:null};if(i&&!s)return{validationErrors:[i]};if(i&&s&&i!==s[0])return s[0]=i,{validationErrors:s.slice()}}}return{}},validateGroup(t){const e=Qe.getGroupConfig(t);if(!e)throw Te.Error("E0110");return e.validate()},resetGroup(t){const e=Qe.getGroupConfig(t);if(!e)throw Te.Error("E0110");return e.reset()}};Qe.initGroups();var fh=Array.isArray;function ag(t){var e=typeof t;return e==="string"||e==="number"}function $e(t){return t==null}function mh(t){return t===null||t===!1||t===!0||t===void 0}function Dt(t){return typeof t=="function"}function gh(t){return typeof t=="string"}function bq(t){return typeof t=="number"}function si(t){return t===null}function Eq(t){return t===void 0}function ra(t,e){var n={};if(t)for(var i in t)n[i]=t[i];if(e)for(var s in e)n[s]=e[s];return n}function tS(t){return!si(t)&&typeof t=="object"}var nn={},Tq="$F";function nS(t){return t.substr(2).toLowerCase()}function AL(t,e){t.appendChild(e)}function iS(t,e,n){si(n)?AL(t,e):t.insertBefore(e,n)}function Iq(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t)}function Aq(t,e,n){t.replaceChild(e,n)}function kL(t,e){t.removeChild(e)}function RL(t){for(var e=0;e<t.length;e++)t[e]()}function kq(t,e,n){var i=t.children;return n&4?i.$LI:n&8192?t.childFlags===2?i:i[e?0:i.length-1]:i}function Mi(t,e){for(var n;t;){if(n=t.flags,n&2033)return t.dom;t=kq(t,e,n)}return null}function ep(t,e){do{var n=t.flags;if(n&2033){kL(e,t.dom);return}var i=t.children;if(n&4&&(t=i.$LI),n&8&&(t=i),n&8192)if(t.childFlags===2)t=i;else{for(var s=0,r=i.length;s<r;++s)ep(i[s],e);return}}while(t)}function OL(t,e,n){do{var i=t.flags;if(i&2033){iS(e,t.dom,n);return}var s=t.children;if(i&4&&(t=s.$LI),i&8&&(t=s),i&8192)if(t.childFlags===2)t=s;else{for(var r=0,o=s.length;r<o;++r)OL(s[r],e,n);return}}while(t)}function PL(t,e,n){return t.constructor.getDerivedStateFromProps?ra(n,t.constructor.getDerivedStateFromProps(e,n)):n}var _h={v:!1},ZA={componentComparator:null,createVNode:null,renderComplete:null};function Ad(t,e){t.textContent=e}function ML(t,e){return tS(t)&&t.event===e.event&&t.data===e.data}function VL(t,e){for(var n in e)Eq(t[n])&&(t[n]=e[n]);return t}function sS(t,e){return!!Dt(t)&&(t(e),!0)}var kd="$";function w_(t,e,n,i,s,r,o,a){this.childFlags=t,this.children=e,this.className=n,this.dom=null,this.flags=i,this.key=s===void 0?null:s,this.props=r===void 0?null:r,this.ref=o===void 0?null:o,this.type=a}function Ve(t,e,n,i,s,r,o,a){var l=s===void 0?1:s,c=new w_(l,i,n,t,o,r,a,e);return l===0&&LL(c,c.children),c}function Rq(t,e,n){if(t&4)return n;var i=(t&32768?e.render:e).defaultHooks;return $e(i)?n:$e(n)?i:VL(n,i)}function Oq(t,e,n){var i=(t&32768?e.render:e).defaultProps;return $e(i)?n:$e(n)?ra(i,null):VL(n,i)}function Pq(t,e){return t&12?t:e.prototype&&e.prototype.render?4:e.render?32776:8}function fe(t,e,n,i,s){t=Pq(t,e);var r=new w_(1,null,null,t,i,Oq(t,e,n),Rq(t,e,s),e);return r}function tp(t,e){return new w_(1,$e(t)||t===!0||t===!1?"":t,null,16,e,null,null,null)}function ri(t,e,n){var i=Ve(8192,8192,null,t,e,null,n,null);switch(i.childFlags){case 1:i.children=S_(),i.childFlags=2;break;case 16:i.children=[tp(t)],i.childFlags=4;break}return i}function Li(t){var e=t.props;if(e){var n=t.flags;n&481&&(e.children!==void 0&&$e(t.children)&&LL(t,e.children),e.className!==void 0&&($e(t.className)&&(t.className=e.className||null),e.className=void 0)),e.key!==void 0&&(t.key=e.key,e.key=void 0),e.ref!==void 0&&(n&8?t.ref=ra(t.ref,e.ref):t.ref=e.ref,e.ref=void 0)}return t}function Mq(t){var e=t.children,n=t.childFlags;return ri(n===2?sn(e):e.map(sn),n,t.key)}function sn(t){var e=t.flags&-16385,n=t.props;if(e&14&&!si(n)){var i=n;n={};for(var s in i)n[s]=i[s]}return e&8192?Mq(t):new w_(t.childFlags,t.children,t.className,e,t.key,n,t.ref,t.type)}function S_(){return tp("",null)}function BL(t,e,n,i){for(var s=t.length;n<s;n++){var r=t[n];if(!mh(r)){var o=i+kd+n;if(fh(r))BL(r,e,0,o);else{if(ag(r))r=tp(r,o);else{var a=r.key,l=gh(a)&&a[0]===kd;(r.flags&81920||l)&&(r=sn(r)),r.flags|=65536,l?a.substring(0,i.length)!==i&&(r.key=i+a):si(a)?r.key=o:r.key=i+a}e.push(r)}}}}function Vq(t){switch(t){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case Tq:return 8192;default:return 1}}function LL(t,e){var n,i=1;if(mh(e))n=e;else if(ag(e))i=16,n=e;else if(fh(e)){for(var s=e.length,r=0;r<s;++r){var o=e[r];if(mh(o)||fh(o)){n=n||e.slice(0,r),BL(e,n,r,"");break}else if(ag(o))n=n||e.slice(0,r),n.push(tp(o,kd+r));else{var a=o.key,l=(o.flags&81920)>0,c=si(a),u=gh(a)&&a[0]===kd;l||c||u?(n=n||e.slice(0,r),(l||u)&&(o=sn(o)),(c||u)&&(o.key=kd+r),n.push(o)):n&&n.push(o),o.flags|=65536}}n=n||e,n.length===0?i=1:i=8}else n=e,n.flags|=65536,e.flags&81920&&(n=sn(e)),i=2;return t.children=n,t.childFlags=i,t}function b_(t){return mh(t)||ag(t)?tp(t,null):fh(t)?ri(t,0,null):t.flags&16384?sn(t):t}var ga="http://www.w3.org/1999/xlink",Vv="http://www.w3.org/XML/1998/namespace",QA={"xlink:actuate":ga,"xlink:arcrole":ga,"xlink:href":ga,"xlink:role":ga,"xlink:show":ga,"xlink:title":ga,"xlink:type":ga,"xml:base":Vv,"xml:lang":Vv,"xml:space":Vv};function E_(t){return{onClick:t,onDblClick:t,onFocusIn:t,onFocusOut:t,onKeyDown:t,onKeyPress:t,onKeyUp:t,onMouseDown:t,onMouseMove:t,onMouseUp:t,onTouchEnd:t,onTouchMove:t,onTouchStart:t}}var $L=E_(0),o0=E_(null),FL=E_(!0);function XA(t,e){var n=e.$EV;return n||(n=e.$EV=E_(null)),n[t]||++$L[t]===1&&(o0[t]=Wq(t)),n}function HL(t,e){var n=e.$EV;n&&n[t]&&(--$L[t]===0&&(document.removeEventListener(nS(t),o0[t]),o0[t]=null),n[t]=null)}function Bq(t,e,n,i){if(Dt(n))XA(t,i)[t]=n;else if(tS(n)){if(ML(e,n))return;XA(t,i)[t]=n}else HL(t,i)}function Lq(t){return Dt(t.composedPath)?t.composedPath()[0]:t.target}function NL(t,e,n,i){var s=Lq(t);do{if(e&&s.disabled)return;var r=s.$EV;if(r){var o=r[n];if(o&&(i.dom=s,o.event?o.event(o.data,t):o(t),t.cancelBubble))return}s=s.parentNode}while(!si(s))}function $q(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function Fq(){return this.defaultPrevented}function Hq(){return this.cancelBubble}function zL(t){var e={dom:document};return t.isDefaultPrevented=Fq,t.isPropagationStopped=Hq,t.stopPropagation=$q,Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return e.dom}}),e}function Nq(t){return function(e){if(e.button!==0){e.stopPropagation();return}NL(e,!0,t,zL(e))}}function zq(t){return function(e){NL(e,!1,t,zL(e))}}function Wq(t){var e=t==="onClick"||t==="onDblClick"?Nq(t):zq(t);return document.addEventListener(nS(t),e),e}function Gq(t,e){var n=document.createElement("i");return n.innerHTML=e,n.innerHTML===t.innerHTML}function JA(t,e,n){if(t[e]){var i=t[e];i.event?i.event(i.data,n):i(n)}else{var s=e.toLowerCase();t[s]&&t[s](n)}}function np(t,e){var n=function(i){var s=this.$V;if(s){var r=s.props||nn,o=s.dom;if(gh(t))JA(r,t,i);else for(var a=0;a<t.length;++a)JA(r,t[a],i);if(Dt(e)){var l=this.$V,c=l.props||nn;e(c,o,!1,l)}}};return Object.defineProperty(n,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),n}function ja(t,e,n){var i="$"+e,s=t[i];if(s){if(s[1].wrapped)return;t.removeEventListener(s[0],s[1]),t[i]=null}Dt(n)&&(t.addEventListener(e,n),t[i]=[e,n])}function rS(t){return t==="checkbox"||t==="radio"}var Uq=np("onInput",oS),Kq=np(["onClick","onChange"],oS);function WL(t){t.stopPropagation()}WL.wrapped=!0;function jq(t,e){rS(e.type)?(ja(t,"change",Kq),ja(t,"click",WL)):ja(t,"input",Uq)}function oS(t,e){var n=t.type,i=t.value,s=t.checked,r=t.multiple,o=t.defaultValue,a=!$e(i);n&&n!==e.type&&e.setAttribute("type",n),!$e(r)&&r!==e.multiple&&(e.multiple=r),!$e(o)&&!a&&(e.defaultValue=o+""),rS(n)?(a&&(e.value=i),$e(s)||(e.checked=s)):a&&e.value!==i?(e.defaultValue=i,e.value=i):$e(s)||(e.checked=s)}function dd(t,e){if(t.type==="option")qq(t,e);else{var n=t.children,i=t.flags;if(i&4)dd(n.$LI,e);else if(i&8)dd(n,e);else if(t.childFlags===2)dd(n,e);else if(t.childFlags&12)for(var s=0,r=n.length;s<r;++s)dd(n[s],e)}}function qq(t,e){var n=t.props||nn,i=t.dom;i.value=n.value,n.value===e||fh(e)&&e.indexOf(n.value)!==-1?i.selected=!0:(!$e(e)||!$e(n.selected))&&(i.selected=n.selected||!1)}var Yq=np("onChange",GL);function Zq(t){ja(t,"change",Yq)}function GL(t,e,n,i){var s=!!t.multiple;!$e(t.multiple)&&s!==e.multiple&&(e.multiple=s);var r=t.selectedIndex;r===-1&&(e.selectedIndex=-1);var o=i.childFlags;if(o!==1){var a=t.value;bq(r)&&r>-1&&e.options[r]&&(a=e.options[r].value),n&&$e(a)&&(a=t.defaultValue),dd(i,a)}}var Qq=np("onInput",UL),Xq=np("onChange");function Jq(t,e){ja(t,"input",Qq),e.onChange&&ja(t,"change",Xq)}function UL(t,e,n){var i=t.value,s=e.value;if($e(i)){if(n){var r=t.defaultValue;!$e(r)&&r!==s&&(e.defaultValue=r,e.value=r)}}else s!==i&&(e.defaultValue=i,e.value=i)}function KL(t,e,n,i,s,r){t&64?oS(i,n):t&256?GL(i,n,s,e):t&128&&UL(i,n,s),r&&(n.$V=e)}function eY(t,e,n){t&64?jq(e,n):t&256?Zq(e):t&128&&Jq(e,n)}function jL(t){return t.type&&rS(t.type)?!$e(t.checked):!$e(t.value)}function ts(){return{current:null}}function lg(t){t&&!sS(t,null)&&t.current&&(t.current=null)}function ip(t,e,n){t&&(Dt(t)||t.current!==void 0)&&n.push(function(){!sS(t,e)&&t.current!==void 0&&(t.current=e)})}function ws(t,e){Lr(t),ep(t,e)}function Lr(t){var e=t.flags,n=t.children,i;if(e&481){i=t.ref;var s=t.props;lg(i);var r=t.childFlags;if(!si(s))for(var o=Object.keys(s),a=0,l=o.length;a<l;a++){var c=o[a];FL[c]&&HL(c,t.dom)}r&12?yh(n):r===2&&Lr(n)}else n&&(e&4?(Dt(n.componentWillUnmount)&&n.componentWillUnmount(),lg(t.ref),n.$UN=!0,Lr(n.$LI)):e&8?(i=t.ref,!$e(i)&&Dt(i.onComponentWillUnmount)&&i.onComponentWillUnmount(Mi(t,!0),t.props||nn),Lr(n)):e&1024?ws(n,t.ref):e&8192&&t.childFlags&12&&yh(n))}function yh(t){for(var e=0,n=t.length;e<n;++e)Lr(t[e])}function im(t){t.textContent=""}function sm(t,e,n){yh(n),e.flags&8192?ep(e,t):im(t)}function tY(t){var e=t.event;return function(n){e(t.data,n)}}function nY(t,e,n,i){if(tS(n)){if(ML(e,n))return;n=tY(n)}ja(i,nS(t),n)}function iY(t,e,n){if($e(e)){n.removeAttribute("style");return}var i=n.style,s,r;if(gh(e)){i.cssText=e;return}if(!$e(t)&&!gh(t)){for(s in e)r=e[s],r!==t[s]&&i.setProperty(s,r);for(s in t)$e(e[s])&&i.removeProperty(s)}else for(s in e)r=e[s],i.setProperty(s,r)}function sY(t,e,n,i){var s=t&&t.__html||"",r=e&&e.__html||"";s!==r&&!$e(r)&&!Gq(i,r)&&(si(n)||(n.childFlags&12?yh(n.children):n.childFlags===2&&Lr(n.children),n.children=null,n.childFlags=1),i.innerHTML=r)}function a0(t,e,n,i,s,r,o){switch(t){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":i.autofocus=!!n;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[t]=!!n;break;case"defaultChecked":case"value":case"volume":if(r&&t==="value")break;var a=$e(n)?"":n;i[t]!==a&&(i[t]=a);break;case"style":iY(e,n,i);break;case"dangerouslySetInnerHTML":sY(e,n,o,i);break;default:FL[t]?Bq(t,e,n,i):t.charCodeAt(0)===111&&t.charCodeAt(1)===110?nY(t,e,n,i):$e(n)?i.removeAttribute(t):s&&QA[t]?i.setAttributeNS(QA[t],t,n):i.setAttribute(t,n);break}}function qL(t,e,n,i,s){var r=!1,o=(e&448)>0;o&&(r=jL(n),r&&eY(e,i,n));for(var a in n)a0(a,null,n[a],i,s,r,null);o&&KL(e,t,i,n,!0,r)}function YL(t,e,n){var i=b_(t.render(e,t.state,n)),s=n;return Dt(t.getChildContext)&&(s=ra(n,t.getChildContext())),t.$CX=s,i}function ZL(t,e,n,i,s,r){var o=new e(n,i),a=o.$N=!!(e.getDerivedStateFromProps||o.getSnapshotBeforeUpdate);if(o.$SVG=s,o.$L=r,t.children=o,o.$BS=!1,o.context=i,o.props===nn&&(o.props=n),a)o.state=PL(o,n,o.state);else if(Dt(o.componentWillMount)){o.$BR=!0,o.componentWillMount();var l=o.$PS;if(!si(l)){var c=o.state;if(si(c))o.state=l;else for(var u in l)c[u]=l[u];o.$PS=null}o.$BR=!1}return o.$LI=YL(o,n,i),o}function aS(t,e){var n=t.props||nn;return t.flags&32768?t.type.render(n,t.ref,e):t.type(n,e)}function rn(t,e,n,i,s,r){var o=t.flags|=16384;o&481?XL(t,e,n,i,s,r):o&4?aY(t,e,n,i,s,r):o&8?(lY(t,e,n,i,s,r),e$(t,r)):o&512||o&16?QL(t,e,s):o&8192?oY(t,n,e,i,s,r):o&1024&&rY(t,n,e,s,r)}function rY(t,e,n,i,s){rn(t.children,t.ref,e,!1,null,s);var r=S_();QL(r,n,i),t.dom=r.dom}function oY(t,e,n,i,s,r){var o=t.children,a=t.childFlags;a&12&&o.length===0&&(a=t.childFlags=2,o=t.children=S_()),a===2?rn(o,n,e,i,s,r):qa(o,n,e,i,s,r)}function QL(t,e,n){var i=t.dom=document.createTextNode(t.children);si(e)||iS(e,i,n)}function XL(t,e,n,i,s,r){var o=t.flags,a=t.props,l=t.className,c=t.childFlags,u=t.dom=Iq(t.type,i=i||(o&32)>0),d=t.children;if(!$e(l)&&l!==""&&(i?u.setAttribute("class",l):u.className=l),c===16)Ad(u,d);else if(c!==1){var p=i&&t.type!=="foreignObject";c===2?(d.flags&16384&&(t.children=d=sn(d)),rn(d,u,n,p,null,r)):(c===8||c===4)&&qa(d,u,n,p,null,r)}si(e)||iS(e,u,s),si(a)||qL(t,o,a,u,i),ip(t.ref,u,r)}function qa(t,e,n,i,s,r){for(var o=0;o<t.length;++o){var a=t[o];a.flags&16384&&(t[o]=a=sn(a)),rn(a,e,n,i,s,r)}}function aY(t,e,n,i,s,r){var o=ZL(t,t.type,t.props||nn,n,i,r);rn(o.$LI,e,o.$CX,i,s,r),JL(t.ref,o,r)}function lY(t,e,n,i,s,r){rn(t.children=b_(aS(t,n)),e,n,i,s,r)}function cY(t){return function(){t.componentDidMount()}}function JL(t,e,n){ip(t,e,n),Dt(e.componentDidMount)&&n.push(cY(e))}function uY(t,e){return function(){t.onComponentDidMount(Mi(e,!0),e.props||nn)}}function e$(t,e){var n=t.ref;$e(n)||(sS(n.onComponentWillMount,t.props||nn),Dt(n.onComponentDidMount)&&e.push(uY(n,t)))}function dY(t,e,n,i,s,r){Lr(t),e.flags&t.flags&2033?(rn(e,null,i,s,null,r),Aq(n,e.dom,t.dom)):(rn(e,n,i,s,Mi(t,!0),r),ep(t,n))}function Ur(t,e,n,i,s,r,o){var a=e.flags|=16384;t.flags!==a||t.type!==e.type||t.key!==e.key||a&2048?t.flags&16384?dY(t,e,n,i,s,o):rn(e,n,i,s,r,o):a&481?gY(t,e,i,s,a,o):a&4?vY(t,e,n,i,s,r,o):a&8?CY(t,e,n,i,s,r,o):a&16?DY(t,e):a&512?e.dom=t.dom:a&8192?fY(t,e,n,i,s,o):mY(t,e,i,o)}function hY(t,e,n){t!==e&&(t!==""?n.firstChild.nodeValue=e:Ad(n,e))}function pY(t,e){t.textContent!==e&&(t.textContent=e)}function fY(t,e,n,i,s,r){var o=t.children,a=e.children,l=t.childFlags,c=e.childFlags,u=null;c&12&&a.length===0&&(c=e.childFlags=2,a=e.children=S_());var d=(c&2)!==0;if(l&12){var p=o.length;(l&8&&c&8||d||!d&&a.length>p)&&(u=Mi(o[p-1],!1).nextSibling)}lS(l,c,o,a,n,i,s,u,t,r)}function mY(t,e,n,i){var s=t.ref,r=e.ref,o=e.children;if(lS(t.childFlags,e.childFlags,t.children,o,s,n,!1,null,t,i),e.dom=t.dom,s!==r&&!mh(o)){var a=o.dom;kL(s,a),AL(r,a)}}function gY(t,e,n,i,s,r){var o=e.dom=t.dom,a=t.props,l=e.props,c=!1,u=!1,d;if(i=i||(s&32)>0,a!==l){var p=a||nn;if(d=l||nn,d!==nn){c=(s&448)>0,c&&(u=jL(d));for(var f in d){var g=p[f],y=d[f];g!==y&&a0(f,g,y,o,i,u,t)}}if(p!==nn)for(var v in p)$e(d[v])&&!$e(p[v])&&a0(v,p[v],null,o,i,u,t)}var C=e.children,x=e.className;t.className!==x&&($e(x)?o.removeAttribute("class"):i?o.setAttribute("class",x):o.className=x),s&4096?pY(o,C):lS(t.childFlags,e.childFlags,t.children,C,o,n,i&&e.type!=="foreignObject",null,t,r),c&&KL(s,e,o,d,!1,u);var S=e.ref,O=t.ref;O!==S&&(lg(O),ip(S,o,r))}function _Y(t,e,n,i,s,r){Lr(t),qa(e,n,i,s,Mi(t,!0),r),ep(t,n)}function lS(t,e,n,i,s,r,o,a,l,c){switch(t){case 2:switch(e){case 2:Ur(n,i,s,r,o,a,c);break;case 1:ws(n,s);break;case 16:Lr(n),Ad(s,i);break;default:_Y(n,i,s,r,o,c);break}break;case 1:switch(e){case 2:rn(i,s,r,o,a,c);break;case 1:break;case 16:Ad(s,i);break;default:qa(i,s,r,o,a,c);break}break;case 16:switch(e){case 16:hY(n,i,s);break;case 2:im(s),rn(i,s,r,o,a,c);break;case 1:im(s);break;default:im(s),qa(i,s,r,o,a,c);break}break;default:switch(e){case 16:yh(n),Ad(s,i);break;case 2:sm(s,l,n),rn(i,s,r,o,a,c);break;case 1:sm(s,l,n);break;default:var u=n.length|0,d=i.length|0;u===0?d>0&&qa(i,s,r,o,a,c):d===0?sm(s,l,n):e===8&&t===8?wY(n,i,s,r,o,u,d,a,l,c):xY(n,i,s,r,o,u,d,a,c);break}break}}function yY(t,e,n,i,s){s.push(function(){t.componentDidUpdate(e,n,i)})}function t$(t,e,n,i,s,r,o,a,l){var c=t.state,u=t.props,d=!!t.$N,p=Dt(t.shouldComponentUpdate);if(d&&(e=PL(t,n,e!==c?ra(c,e):e)),o||!p||p&&t.shouldComponentUpdate(n,e,s)){!d&&Dt(t.componentWillUpdate)&&t.componentWillUpdate(n,e,s),t.props=n,t.state=e,t.context=s;var f=null,g=YL(t,n,s);d&&Dt(t.getSnapshotBeforeUpdate)&&(f=t.getSnapshotBeforeUpdate(u,c)),Ur(t.$LI,g,i,t.$CX,r,a,l),t.$LI=g,Dt(t.componentDidUpdate)&&yY(t,u,c,f,l)}else t.props=n,t.state=e,t.context=s}function vY(t,e,n,i,s,r,o){var a=e.children=t.children;if(!si(a)){a.$L=o;var l=e.props||nn,c=e.ref,u=t.ref,d=a.state;if(!a.$N){if(Dt(a.componentWillReceiveProps)){if(a.$BR=!0,a.componentWillReceiveProps(l,i),a.$UN)return;a.$BR=!1}si(a.$PS)||(d=ra(d,a.$PS),a.$PS=null)}t$(a,d,l,n,i,s,!1,r,o),u!==c&&(lg(u),ip(c,a,o))}}function CY(t,e,n,i,s,r,o){var a=!0,l=e.props||nn,c=e.ref,u=t.props,d=!$e(c),p=t.children;if(d&&Dt(c.onComponentShouldUpdate)&&(a=c.onComponentShouldUpdate(u,l)),a!==!1){d&&Dt(c.onComponentWillUpdate)&&c.onComponentWillUpdate(u,l);var f=b_(aS(e,i));Ur(p,f,n,i,s,r,o),e.children=f,d&&Dt(c.onComponentDidUpdate)&&c.onComponentDidUpdate(u,l)}else e.children=p}function DY(t,e){var n=e.children,i=e.dom=t.dom;n!==t.children&&(i.nodeValue=n)}function xY(t,e,n,i,s,r,o,a,l){for(var c=r>o?o:r,u=0,d,p;u<c;++u)d=e[u],p=t[u],d.flags&16384&&(d=e[u]=sn(d)),Ur(p,d,n,i,s,a,l),t[u]=d;if(r<o)for(u=c;u<o;++u)d=e[u],d.flags&16384&&(d=e[u]=sn(d)),rn(d,n,i,s,a,l);else if(r>o)for(u=c;u<r;++u)ws(t[u],n)}function wY(t,e,n,i,s,r,o,a,l,c){var u=r-1,d=o-1,p=0,f=t[p],g=e[p],y,v;e:{for(;f.key===g.key;){if(g.flags&16384&&(e[p]=g=sn(g)),Ur(f,g,n,i,s,a,c),t[p]=g,++p,p>u||p>d)break e;f=t[p],g=e[p]}for(f=t[u],g=e[d];f.key===g.key;){if(g.flags&16384&&(e[d]=g=sn(g)),Ur(f,g,n,i,s,a,c),t[u]=g,u--,d--,p>u||p>d)break e;f=t[u],g=e[d]}}if(p>u){if(p<=d)for(y=d+1,v=y<o?Mi(e[y],!0):a;p<=d;)g=e[p],g.flags&16384&&(e[p]=g=sn(g)),++p,rn(g,n,i,s,v,c)}else if(p>d)for(;p<=u;)ws(t[p++],n);else SY(t,e,i,r,o,u,d,p,n,s,a,l,c)}function SY(t,e,n,i,s,r,o,a,l,c,u,d,p){var f,g,y,v=0,C=a,x=a,S=r-a+1,O=o-a+1,H=new Int32Array(O+1),F=S===i,I=!1,w=0,A=0;if(s<4||(S|O)<32)for(v=C;v<=r;++v)if(f=t[v],A<O){for(a=x;a<=o;a++)if(g=e[a],f.key===g.key){if(H[a-x]=v+1,F)for(F=!1;C<v;)ws(t[C++],l);w>a?I=!0:w=a,g.flags&16384&&(e[a]=g=sn(g)),Ur(f,g,l,n,c,u,p),++A;break}!F&&a>o&&ws(f,l)}else F||ws(f,l);else{var k={};for(v=x;v<=o;++v)k[e[v].key]=v;for(v=C;v<=r;++v)if(f=t[v],A<O)if(a=k[f.key],a!==void 0){if(F)for(F=!1;v>C;)ws(t[C++],l);H[a-x]=v+1,w>a?I=!0:w=a,g=e[a],g.flags&16384&&(e[a]=g=sn(g)),Ur(f,g,l,n,c,u,p),++A}else F||ws(f,l);else F||ws(f,l)}if(F)sm(l,d,t),qa(e,l,n,c,u,p);else if(I){var P=bY(H);for(a=P.length-1,v=O-1;v>=0;v--)H[v]===0?(w=v+x,g=e[w],g.flags&16384&&(e[w]=g=sn(g)),y=w+1,rn(g,l,n,c,y<s?Mi(e[y],!0):u,p)):a<0||v!==P[a]?(w=v+x,g=e[w],y=w+1,OL(g,l,y<s?Mi(e[y],!0):u)):a--}else if(A!==O)for(v=O-1;v>=0;v--)H[v]===0&&(w=v+x,g=e[w],g.flags&16384&&(e[w]=g=sn(g)),y=w+1,rn(g,l,n,c,y<s?Mi(e[y],!0):u,p))}var dr,hf,ek=0;function bY(t){var e=0,n=0,i=0,s=0,r=0,o=0,a=0,l=t.length;for(l>ek&&(ek=l,dr=new Int32Array(l),hf=new Int32Array(l));n<l;++n)if(e=t[n],e!==0){if(i=dr[s],t[i]<e){hf[n]=i,dr[++s]=n;continue}for(r=0,o=s;r<o;)a=r+o>>1,t[dr[a]]<e?r=a+1:o=a;e<t[dr[r]]&&(r>0&&(hf[n]=dr[r-1]),dr[r]=n)}r=s+1;var c=new Int32Array(r);for(o=dr[r-1];r-- >0;)c[r]=o,o=hf[o],dr[r]=0;return c}var EY=typeof document<"u";EY&&window.Node&&(Node.prototype.$EV=null,Node.prototype.$V=null);function TY(t,e,n,i){var s=[],r=e.$V;_h.v=!0,$e(r)?$e(t)||(t.flags&16384&&(t=sn(t)),rn(t,e,i,!1,null,s),e.$V=t,r=t):$e(t)?(ws(r,e),e.$V=null):(t.flags&16384&&(t=sn(t)),Ur(r,t,e,i,!1,null,s),r=e.$V=t),RL(s),_h.v=!1,Dt(n)&&n(),Dt(ZA.renderComplete)&&ZA.renderComplete(r,e)}function T_(t,e,n,i){n===void 0&&(n=null),i===void 0&&(i=nn),TY(t,e,n,i)}var rm=[],IY=typeof Promise<"u"?Promise.resolve().then.bind(Promise.resolve()):function(t){window.setTimeout(t,0)},l0=!1;function n$(t,e,n,i){var s=t.$PS;if(Dt(e)&&(e=e(s?ra(t.state,s):t.state,t.props,t.context)),$e(s))t.$PS=e;else for(var r in e)s[r]=e[r];if(t.$BR)Dt(n)&&t.$L.push(n.bind(t));else{if(!_h.v&&rm.length===0){s$(t,i),Dt(n)&&n.call(t);return}if(rm.indexOf(t)===-1&&rm.push(t),i&&(t.$F=!0),l0||(l0=!0,IY(i$)),Dt(n)){var o=t.$QU;o||(o=t.$QU=[]),o.push(n)}}}function AY(t){for(var e=t.$QU,n=0;n<e.length;++n)e[n].call(t);t.$QU=null}function i$(){var t;for(l0=!1;t=rm.shift();)if(!t.$UN){var e=t.$F;t.$F=!1,s$(t,e),t.$QU&&AY(t)}}function s$(t,e){if(e||!t.$BR){var n=t.$PS;t.$PS=null;var i=[];_h.v=!0,t$(t,ra(t.state,n),t.props,Mi(t.$LI,!0).parentNode,t.context,t.$SVG,e,null,i),RL(i),_h.v=!1}else t.state=t.$PS,t.$PS=null}var sp=function(e,n){this.state=null,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=e||nn,this.context=n||nn};sp.prototype.forceUpdate=function(e){this.$UN||n$(this,{},e,!0)};sp.prototype.setState=function(e,n){this.$UN||this.$BS||n$(this,e,n,!1)};sp.prototype.render=function(e,n,i){return null};const uo={lockCount:0,lock(){this.lockCount++},callbacks:[],callEffects(){if(this.lockCount--,this.lockCount<0)throw new Error("Unexpected Effect Call");if(this.lockCount===0){const t=this.callbacks;this.callbacks=[],t.forEach(e=>e())}}},Bv=(t,e)=>{if(!(t instanceof Object&&e instanceof Object))return t===e;const i=Object.keys(t),s=Object.keys(e);return i.length!==s.length?!1:!i.some(o=>t[o]!==e[o])};class ht extends sp{constructor(){super(...arguments),this._pendingContext=this.context}componentWillReceiveProps(e,n){this._pendingContext=n??{}}shouldComponentUpdate(e,n){return!Bv(this.props,e)||!Bv(this.state,n)||!Bv(this.context,this._pendingContext)}}class I_ extends ht{constructor(){super(...arguments),this._effects=[]}createEffects(){return[]}updateEffects(){}componentWillMount(){uo.lock()}componentWillUpdate(e,n,i){uo.lock()}componentDidMount(){uo.callbacks.push(()=>{this._effects=this.createEffects()}),uo.callEffects()}componentDidUpdate(){uo.callbacks.push(()=>this.updateEffects()),uo.callEffects()}destroyEffects(){this._effects.forEach(e=>e.dispose())}componentWillUnmount(){this.destroyEffects()}}class ds extends I_{constructor(){super(...arguments),this.vDomElement=null}vDomUpdateClasses(){const e=this.vDomElement,n=e.className.length?e.className.split(" "):[],i=n.filter(r=>e.dxClasses.previous.indexOf(r)<0),s=e.dxClasses.previous.filter(r=>n.indexOf(r)<0);i.forEach(r=>{const o=e.dxClasses.removed.indexOf(r);o>-1?e.dxClasses.removed.splice(o,1):e.dxClasses.added.includes(r)||e.dxClasses.added.push(r)}),s.forEach(r=>{const o=e.dxClasses.added.indexOf(r);o>-1?e.dxClasses.added.splice(o,1):e.dxClasses.removed.includes(r)||e.dxClasses.removed.push(r)})}componentDidMount(){const e=Mi(this.$LI,!0);this.vDomElement=e,super.componentDidMount(),e.dxClasses=e.dxClasses||{removed:[],added:[],previous:[]},e.dxClasses.previous=e!=null&&e.className.length?e.className.split(" "):[]}componentDidUpdate(){super.componentDidUpdate();const e=this.vDomElement;e!==null&&(e.dxClasses.added.forEach(n=>e.classList.add(n)),e.dxClasses.removed.forEach(n=>e.classList.remove(n)),e.dxClasses.previous=e.className.length?e.className.split(" "):[])}shouldComponentUpdate(e,n){const i=super.shouldComponentUpdate(e,n);return i&&this.vDomUpdateClasses(),i}}let kY=0;const RY=function(t){const e=kY++;return{id:e,defaultValue:t,Provider:class extends sp{getChildContext(){return Object.assign(Object.assign({},this.context),{[e]:this.props.value||t})}render(){return this.props.children}}}};class Wt{constructor(e,n){this.dependency=n,this.effect=e,this.destroy=e()}update(e){const n=this.dependency;e&&(this.dependency=e),(!e||e.some((i,s)=>n[s]!==i))&&(this.dispose(),this.destroy=this.effect())}dispose(){this.destroy&&this.destroy()}}const hs=()=>new Wt(()=>{i$()},[]),OY="a runtime error occured! Use Inferno in development environment to find the error.";function PY(t){return t==null}function MY(t){return t===null||t===!1||t===!0||t===void 0}function yc(t){return t===null}function VY(t){throw t||(t=OY),new Error(`Inferno Error: ${t}`)}function BY(t,e){const n=document.createElement("i");return n.innerHTML=e,n.innerHTML===t.innerHTML}function LY(t){let e,n;for(;t;){if(e=t.flags,e&2033)return t.dom;n=t.children,e&8192?t=t.childFlags===2?n:n[n.length-1]:e&4?t=n.$LI:t=n}return null}function $Y(t,e){return!!(e&&e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html&&BY(t,e.dangerouslySetInnerHTML.__html))}function FY(t,e,n,i,s,r,o){const a=t.type,l=t.ref,c=t.props||nn;let u;if(r){const d=ZL(t,a,c,i,s,o),p=d.$LI;u=vh(p,e,n,d.$CX,s,o),JL(l,d,o)}else{const d=b_(aS(t,i));u=vh(d,e,n,i,s,o),t.children=d,e$(t,o)}return u}function r$(t,e,n,i,s,r){const o=t.childFlags,a=t.children,l=t.props,c=t.flags;if(o!==1){if(o===2)yc(n)?rn(a,e,i,s,null,r):(n=vh(a,e,n,i,s,r),n=n?n.nextSibling:null);else if(o===16)yc(n)?e.appendChild(document.createTextNode(a)):e.childNodes.length!==1||n.nodeType!==3?e.textContent=a:n.nodeValue!==a&&(n.nodeValue=a),n=null;else if(o&12){let u=!1;for(let d=0,p=a.length;d<p;++d){const f=a[d];yc(n)||u&&(f.flags&16)>0?rn(f,e,i,s,n,r):(n=vh(f,e,n,i,s,r),n=n?n.nextSibling:null),u=(f.flags&16)>0}}if(!(c&8192)){let u=null;for(;n;)u=n.nextSibling,e.removeChild(n),n=u}}else!yc(e.firstChild)&&!$Y(e,l)&&(e.textContent="",c&448&&(e.defaultValue=""))}function HY(t,e,n,i,s,r){const o=t.props,a=t.className,l=t.flags,c=t.ref;return s=s||(l&32)>0,n.nodeType!==1?(XL(t,null,i,s,null,r),e.replaceChild(t.dom,n)):(t.dom=n,r$(t,n,n.firstChild,i,s,r),yc(o)||qL(t,l,o,n,s),PY(a)?n.className!==""&&n.removeAttribute("class"):s?n.setAttribute("class",a):n.className=a,ip(c,n,r)),t.dom}function o$(t,e,n){if(n.nodeType!==3)e.replaceChild(t.dom=document.createTextNode(t.children),n);else{const i=t.children;n.nodeValue!==i&&(n.nodeValue=i),t.dom=n}return t.dom}function NY(t,e,n,i,s,r){const o=t.children;return t.childFlags===2?(o$(o,e,n),o.dom):(r$(t,e,n,i,s,r),LY(o[o.length-1]))}function vh(t,e,n,i,s,r){const o=t.flags|=16384;return o&14?FY(t,e,n,i,s,(o&4)>0,r):o&481?HY(t,e,n,i,s,r):o&16?o$(t,e,n):o&512?t.dom=n:o&8192?NY(t,e,n,i,s,r):(VY(),null)}function zY(t,e,n){let i=e.firstChild;if(yc(i))T_(t,e,n);else{const s=[];for(MY(t)||(i=vh(t,e,i,{},!1,s));i&&(i=i.nextSibling);)e.removeChild(i);if(s.length>0){let r;for(;(r=s.shift())!==void 0;)r()}}e.$V=t}function tk(t){return t==null}function WY(t){return typeof t=="string"}function nk(t){return t===void 0}var GY={onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function om(t,e,n){var i=arguments,s,r=null,o=null,a=null,l=0,c,u=arguments.length-2;if(u===1)s=n;else if(u>1)for(s=[];u-- >0;)s[u]=i[u+2];if(WY(t)){if(l=Vq(t),!tk(e)){c={};for(var d in e)d==="className"||d==="class"?a=e[d]:d==="key"?o=e.key:d==="children"&&nk(s)?s=e.children:d==="ref"?r=e.ref:(d==="contenteditable"&&(l|=4096),c[d]=e[d])}}else{if(l=2,nk(s)||(e||(e={}),e.children=s),!tk(e)){c={};for(var p in e)p==="key"?o=e.key:p==="ref"?r=e.ref:GY[p]===1?(r||(r={}),r[p]=e[p]):c[p]=e[p]}return fe(l,t,c,o,r)}return l&8192?ri(u===1?[s]:s,0,o):Ve(l,t,a,s,0,c,o,r)}const UY=t=>{var e,n;return((e=t.container)===null||e===void 0?void 0:e.get(0))||((n=t.item)===null||n===void 0?void 0:n.get(0))};function KY(t,e,n){setTimeout(()=>{T_(om(t,e),UY(e))},0)}const jY=(t,e,n)=>{const i=e[t];return!!i&&typeof i!="string"},qY=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","border-imageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","fillOpacity","flex","flexGrow","flexNegative","flexOrder","flexPositive","flexShrink","floodOpacity","fontWeight","gridColumn","gridRow","lineClamp","lineHeight","opacity","order","orphans","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","zIndex","zoom"]),YY=t=>typeof t=="number"?!0:!Number.isNaN(Number(t)),ZY=(t,e)=>qY.has(t)?e:`${e}px`,QY=/[A-Z]/g,XY=t=>t.replace(QY,"-$&").toLowerCase();function Cl(t){if(t instanceof Object)return Object.entries(t).reduce((e,[n,i])=>(e[XY(n)]=YY(i)?ZY(n,i):i,e),{})}const ik=t=>{const{parentNode:e}=t;if(e){const n=t.nextSibling;Nh(t),e.$V=t.$V,T_(null,e),e.insertBefore(t,n),t.innerHTML="",delete e.$V}delete t.$V},Zi=Rs({createElement:(t,e)=>om(t,e),remove:ik,onAfterRender:()=>{uo.callEffects()},onPreRender:()=>{uo.lock()},render:(t,e,n,i)=>{if(i)T_(om(t,e),n);else{const{parentNode:s}=n,r=n==null?void 0:n.nextSibling,o=W.createElement("div");o.appendChild(n);const a=W.createDocumentFragment().appendChild(o);!!n.$V&&ik(n),zY(om(t,e),a),n.$V=a.$V,s&&s.insertBefore(n,r)}}}),JY=(t,e)=>Object.keys(t).length!==Object.keys(e).length?!1:Object.keys(t).every(n=>t[n]===e[n]),e8=["isEqual"];function t8(t){return!!t.toArray}function n8(t,e){const n={template:e,model:L({},t)},i=t.data??{},{isEqual:s}=i,r=Mt(i,e8);return s&&(n.model.data=r,n.isEqual=s),n}function i8(t,e){const{data:n,index:i}=t.model??{data:{}};n&&Object.keys(n).forEach(r=>{n[r]&&W.isNode(n[r])&&(n[r]=se(m(n[r])))});const s=t.template.render(L({container:e,transclude:t.transclude},{renovated:t.renovated},t.transclude?{}:{model:n},!t.transclude&&Number.isFinite(i)?{index:i}:{}));return s===void 0?[]:t8(s)?s.toArray():[m(s).get(0)]}function s8(t,e){e.forEach(n=>{!!!t.find(s=>n===s)&&n.parentNode&&m(n).remove()})}let sk=class extends I_{constructor(e){super(e),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const e=Mi(this.$LI,!0);if(!(e!=null&&e.parentNode))return()=>{};const n=e.parentNode,i=m(n),s=i.contents().toArray(),r=i8(this.props,se(i));return PV(m(e),m(r)),()=>{const o=m(n).contents().toArray();s8(s,o),n.appendChild(e)}}shouldComponentUpdate(e){const{model:n,template:i}=this.props,{isEqual:s,model:r,template:o}=e,a=s??JY;if(i!==o)return!0;if(!M(n)||!M(r))return n!==r;const{data:l,index:c}=n,{data:u,index:d}=r;return c!==d?!0:!a(l,u)}createEffects(){return[new Wt(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}};function Lv(t){return Array.isArray(t)?[...t]:L({},t)}function a$(t,e,n){const i=n.length>0&&e&&t!==e?Lv(e):Lv(t),s=n[0];return n.length>1?i[s]=a$(t[s],e==null?void 0:e[s],n.slice(1)):s&&(Ce(t[s])?i[s]=Lv(t[s]):i[s]=t[s]),i}function r8(t,e,n,i){const s=e[n],r=t[n],o=t;Ce(s)||n!==i&&Array.isArray(s)?o[n]=a$(s,r,ml(i).slice(1)):o[n]=s}const $v=(t,e)=>n=>{Object.prototype.hasOwnProperty.call(t,n)&&t[n]===void 0&&(t[n]=e(n))};let A_=class extends us{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(e,n){super(e,n),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){const n=this.getSupportedKeyNames().length>0,i=typeof this._viewComponent.prototype.keyDown=="function";if(n&&!i)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var e;return(e=this._viewRef)===null||e===void 0?void 0:e.current}_checkContentReadyOption(e){const n=this._getContentReadyOptions().reduce((i,s)=>(i[s]=!0,i),{});return this._checkContentReadyOption=i=>!!n[i],this._checkContentReadyOption(e)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const e=this._getViewComponentDefaultProps();return T(!0,super._getDefaultOptions(),e,this._propsInfo.twoWay.reduce((n,i)=>{let[s,r,o]=i;return L({},n,{[s]:e[r],[o]:a=>this.option(s,a)})},{}),this._propsInfo.templates.reduce((n,i)=>L({},n,{[i]:null}),{}))}_getUnwrappedOption(){const e={};return Object.keys(this.option()).forEach(n=>{e[n]=this.option(n)}),e}_initializeComponent(){var e;super._initializeComponent(),(e=this._templateManager)===null||e===void 0||e.addDefaultTemplates(this.getDefaultTemplates());const n=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(n),this._propsInfo.templates.forEach(i=>{this._componentTemplates[i]=this._createTemplateComponent(this._props[i])}),Object.keys(this._getActionConfigsFull()).forEach(i=>this._addAction(i)),this._viewRef=ts(),this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const e=this.getProps();this._renderWrapper(e)}_renderWrapper(e){const n=this.$element()[0];this._isNodeReplaced||Zi.onPreRender(),Zi.render(this._viewComponent,e,n,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,Zi.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(e,n){this._options.silent(e,n)}_render(){}_removeWidget(){Zi.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const e=this.$element()[0];if(!this._elementAttr){const{attributes:s}=e,r=Array.from(s).filter(o=>{var a;return!this._propsInfo.templates.includes(o.name)&&((a=s[o.name])===null||a===void 0?void 0:a.specified)}).reduce((o,a)=>{let{name:l,value:c}=a;const u=o,d=l in e;return u[l]=c===""&&d?e[l]:c,u},{});this._elementAttr=r,this._storedClasses=e.getAttribute("class")||""}const n=e.style,i={};for(let s=0;s<n.length;s+=1)i[n[s]]=n.getPropertyValue(n[s]);return this._elementAttr.style=i,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(e){const{allowNull:n,elements:i,props:s,twoWay:r}=this._propsInfo,o=this._getViewComponentDefaultProps(),a=Object.keys(o),l=this._getDefaultOptions(),{children:c,onKeyboardHandled:u,ref:d}=e,f={ref:d,children:c,onKeyDown:u?(g,y)=>{u(y)}:void 0};return[...s,...this._getAdditionalProps()].forEach(g=>{Object.prototype.hasOwnProperty.call(e,g)&&(f[g]=e[g])}),n.forEach($v(f,()=>null)),a.forEach($v(f,g=>l[g])),r.forEach(g=>{let[y,v]=g;$v(f,()=>l[v])(y)}),i.forEach(g=>{if(g in f){const y=f[g];Is(y)&&(f[g]=this._patchElementParam(y))}}),f}getSupportedKeyNames(){return[]}prepareStyleProp(e){return typeof e.style=="string"?L({},e,{style:{},cssText:e.style}):e}getProps(){const{elementAttr:e}=this.option(),n=this._patchOptionValues(L({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach(i=>{n[i]=this._componentTemplates[i]}),this.prepareStyleProp(L({},n,this.elementAttr,e,{className:[...(this.elementAttr.class??"").split(" "),...((e==null?void 0:e.class)??"").split(" ")].filter((i,s,r)=>i&&r.indexOf(i)===s).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return L({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const e=Object.values(this._templatesInfo),n={};return e.forEach(i=>{n[i]="dx-renovation-template-mock"}),n}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(e){const n=Object.entries(this._templatesInfo).reduce((i,s)=>{let[r,o]=s;return L({},i,{[r]:e[r]??o})},{});return L({},e,n)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const e={};return this.getSupportedKeyNames().forEach(i=>{e[i]=s=>this.viewRef.keyDown(D_.createKeyDownOptions(s))}),e}_addAction(e,n){let i=n;if(!i){const s=this._createActionByOption(e,this._getActionConfigsFull()[e]);i=r=>(Object.keys(r).forEach(o=>{M(r[o])&&W.isNode(r[o])&&(r[o]=se(m(r[o])))}),s(r))}this._actionsMap[e]=i}_optionChanged(e){const{fullName:n,name:i,previousValue:s,value:r}=e;r8(this._props,this.option(),i,n),this._propsInfo.templates.includes(i)&&r!==s&&(this._componentTemplates[i]=this._createTemplateComponent(r)),i&&this._getActionConfigsFull()[i]&&this._addAction(i),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(n),super._optionChanged(e),this._invalidate()}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?Zi.createElement(sk,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(e){if(!e)return;const n=this._getTemplate(e);if(!(ve(n)&&n==="dx-renovation-template-mock"))return i=>Zi.createElement(sk,n8(i,n))}_wrapKeyDownHandler(e){return n=>{const{keyName:i,originalEvent:s,which:r}=n,o=this.customKeyHandlers,a=o[i]||o[r];return a!==void 0&&!a.bind(this)(s,n)?(s.cancel=!0,s):e==null?void 0:e(s,n)}}_toPublicElement(e){return se(m(e))}_patchElementParam(e){try{const n=m(e),i=n==null?void 0:n.get(0);return i!=null&&i.nodeType?i:e}catch{return e}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return L({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(e,n){this.customKeyHandlers[e]=n}setAria(e,n){this._aria[e]=n,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}};A_.IS_RENOVATED_WIDGET=!1;A_.IS_RENOVATED_WIDGET=!0;const k_=t=>!t||typeof t!="string"?!1:/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(t)?"svg":/data:.*base64|\.|[^<\s]\/{1,1}/.test(t)?"image":/^[\w-_]+$/.test(t)?"dxIcon":/^\s?([\w-_:]\s?)+$/.test(t)?"fontIcon":!1,Ch=t=>{switch(k_(t)){case"image":return m("<img>").attr("src",t).addClass("dx-icon");case"fontIcon":return m("<i>").addClass(`dx-icon ${t}`);case"dxIcon":return m("<i>").addClass(`dx-icon dx-icon-${t}`);case"svg":return m("<i>").addClass("dx-icon dx-svg-icon").append(t);default:return null}};class o8 extends A_{get _validationGroupConfig(){return Qe.getGroupConfig(this._findGroup())}getDefaultTemplateNames(){return["content"]}getSupportedKeyNames(){return["space","enter"]}getProps(){const e=super.getProps();return e.onClick=i=>{let{event:s}=i;this._clickAction({event:s,validationGroup:this._validationGroupConfig})},k_(e.icon)==="svg"&&(e.iconTemplate=this._createTemplateComponent(()=>e.icon)),e}get _templatesInfo(){return{template:"content"}}_toggleActiveState(e,n){const i=this.viewRef;n?i.activate():i.deactivate()}_getSubmitAction(){let e=!0,n="valid";return this._createAction(i=>{let{event:s,submitInput:r}=i;if(e){const o=this._validationGroupConfig;if(o!==void 0&&o!==""){const a=o.validate();n=a.status,a.status==="pending"&&(e=!1,this.option("disabled",!0),a.complete.then(l=>{let{status:c}=l;this.option("disabled",!1),n=c,n==="valid"&&r.click(),e=!0}))}}n!=="valid"&&s.preventDefault(),s.stopPropagation()})}_initializeComponent(){super._initializeComponent(),this._addAction("onSubmit",this._getSubmitAction()),this._clickAction=this._createClickAction()}_initMarkup(){super._initMarkup();const e=this.$element().find(".dx-button-content").first(),n=e.children().filter(".dx-template-wrapper"),i=e.children().filter(".dx-button-submit-input");n.length&&(n.addClass("dx-button-content"),n.append(i),e.replaceWith(n))}_patchOptionValues(e){return super._patchOptionValues(L({},e,{templateData:e._templateData}))}_findGroup(){const e=this.$element(),n=this.option("validationGroup");return n!==void 0&&n!==""?n:Qe.findGroup(e,this._modelByElement(e))}_createClickAction(){return this._createActionByOption("onClick",{excludeValidators:["readOnly"]})}_optionChanged(e){e.name==="onClick"&&(this._clickAction=this._createClickAction()),super._optionChanged(e)}}function Co(t){return Object.keys(t).filter(e=>t[e]).join(" ")}const a8=["iconTemplate","position","source"],l8=t=>{let{iconClassName:e,props:{iconTemplate:n,source:i},sourceType:s}=t;return ri([s==="dxIcon"&&Ve(1,"i",e),s==="fontIcon"&&Ve(1,"i",e),s==="image"&&Ve(1,"img",e,null,1,{alt:"",src:i}),n&&Ve(1,"i",e,n({}),0)],0)},c8={position:"left",source:""},u8=t=>t&&(t.defaultProps?e=>Li(fe(2,t,L({},e))):t);class l$ extends ht{constructor(e){super(e),this.state={}}get sourceType(){return k_(this.props.source)}get cssClass(){return this.props.position!=="left"?"dx-icon-right":""}get iconClassName(){const e={"dx-icon":!0,[this.cssClass]:!!this.cssClass},{source:n}=this.props;return this.sourceType==="dxIcon"?Co(L({},e,{[`dx-icon-${n}`]:!0})):this.sourceType==="fontIcon"?Co(L({},e,{[String(n)]:!!n})):this.sourceType==="image"?Co(e):this.sourceType==="svg"?Co(L({},e,{"dx-svg-icon":!0})):""}get restAttributes(){const e=this.props;return Mt(e,a8)}render(){const e=this.props;return l8({props:L({},e,{iconTemplate:u8(e.iconTemplate)}),sourceType:this.sourceType,cssClass:this.cssClass,iconClassName:this.iconClassName,restAttributes:this.restAttributes})}}l$.defaultProps=c8;const c$="dx-inkripple-showing",u$="dx-inkripple-hiding",d$=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{useHoldAnimation:e,waveSizeCoefficient:n,isCentered:i,wavesNumber:s}=t;return{waveSizeCoefficient:n||2,isCentered:i||!1,wavesNumber:s||1,durations:f8(e??!0)}},h$=function(t){const e=d$(t);return{showWave:f$.bind(this,e),hideWave:g$.bind(this,e)}},d8=function(t){let e=t.children(".dx-inkripple");return e.length===0&&(e=m("<div>").addClass("dx-inkripple").appendTo(t)),e},p$=function(t,e){const n=d8(m(t)),i=n.children(".dx-inkripple-wave").toArray();for(let s=i.length;s<e;s++){const r=m("<div>").appendTo(n).addClass("dx-inkripple-wave");i.push(r[0])}return m(i)},h8=function(t,e){const n=m(e.element),i=et(n),s=tt(n),r=parseInt(Math.sqrt(i*i+s*s)),o=Math.min(4e3,parseInt(r*t.waveSizeCoefficient));let a,l;if(t.isCentered)a=(i-o)/2,l=(s-o)/2;else{const c=e.event,u=n.offset(),d=c.pageX-u.left,p=c.pageY-u.top;a=d-o/2,l=p-o/2}return{left:a,top:l,height:o,width:o}};function f$(t,e){const n=p$(e.element,t.wavesNumber).eq(e.wave||0);t.hidingTimeout&&clearTimeout(t.hidingTimeout),m$(n),n.css(h8(t,e)),t.showingTimeout=setTimeout(p8.bind(this,t,n),0)}function p8(t,e){const n=t.durations.showingScale+"ms";e.addClass(c$).css("transitionDuration",n)}function f8(t){return{showingScale:t?1e3:300,hidingScale:300,hidingOpacity:300}}function m$(t){t.removeClass(u$).css("transitionDuration","")}function g$(t,e){t.showingTimeout&&clearTimeout(t.showingTimeout);const n=p$(e.element,e.wavesNumber).eq(e.wave||0),i=t.durations,s=i.hidingScale+"ms, "+i.hidingOpacity+"ms";n.addClass(u$).removeClass(c$).css("transitionDuration",s);const r=Math.max(i.hidingScale,i.hidingOpacity);t.hidingTimeout=setTimeout(m$.bind(this,n),r)}const m8=["config"],g8=t=>Li(Ve(1,"div","dx-inkripple",null,1,L({},t.restAttributes))),_8={config:Object.freeze({})};class _$ extends ht{constructor(e){super(e),this.state={},this.__getterCache={},this.hideWave=this.hideWave.bind(this),this.showWave=this.showWave.bind(this)}get getConfig(){return this.__getterCache.getConfig!==void 0?this.__getterCache.getConfig:this.__getterCache.getConfig=(()=>{const{config:e}=this.props;return d$(e)})()}get restAttributes(){const e=this.props;return Mt(e,m8)}hideWave(e){g$(this.getConfig,e)}showWave(e){f$(this.getConfig,e)}componentWillUpdate(e,n,i){this.props.config!==e.config&&(this.__getterCache.getConfig=void 0)}render(){const e=this.props;return g8({props:L({},e),getConfig:this.getConfig,restAttributes:this.restAttributes})}}_$.defaultProps=_8;const y8=ar.add,rk=Math.abs;let cg=10;const v8=function(){return gl("pointer-events")},C8=Jr(function(){const t=X.real().deviceType==="desktop";if(!v8()||!t)return B;const e=m("<div>").addClass("dx-gesture-cover").css("pointerEvents","none");return b.subscribeGlobal(e,"dxmousewheel",function(n){n.preventDefault()}),y8(function(){e.appendTo("body")}),function(n,i){e.css("pointerEvents",n?"all":"none"),n&&e.css("cursor",i)}}),D8=function(t,e){C8()(t,e)},rp=v_.inherit({gesture:!0,configure:function(t){this.getElement().css("msTouchAction",t.immediate?"pinch-zoom":""),this.callBase(t)},allowInterruptionByMouseWheel:function(){return this._stage!==2},getDirection:function(){return this.direction},_cancel:function(){this.callBase.apply(this,arguments),this._toggleGestureCover(!1),this._stage=0},start:function(t){if(t._needSkipEvent||NB(t)){this._cancel(t);return}this._startEvent=Kw(t),this._startEventData=At(t),this._stage=1,this._init(t),this._setupImmediateTimer()},_setupImmediateTimer:function(){if(clearTimeout(this._immediateTimer),this._immediateAccepted=!1,!!this.immediate){if(this.immediateTimeout===0){this._immediateAccepted=!0;return}this._immediateTimer=setTimeout((function(){this._immediateAccepted=!0}).bind(this),this.immediateTimeout??180)}},move:function(t){if(this._stage===1&&this._directionConfirmed(t)){if(this._stage=2,this._resetActiveElement(),this._toggleGestureCover(!0),this._clearSelection(t),this._adjustStartEvent(t),this._start(this._startEvent),this._stage===0)return;this._requestAccept(t),this._move(t),this._forgetAccept()}else this._stage===2&&(this._clearSelection(t),this._move(t))},_directionConfirmed:function(t){const e=this._getTouchBoundary(t),n=Va(this._startEventData,At(t)),i=rk(n.x),s=rk(n.y),r=this._validateMove(e,i,s),o=this._validateMove(e,s,i),a=this.getDirection(t);return a==="both"&&(r||o)||a==="horizontal"&&r||a==="vertical"&&o||this._immediateAccepted},_validateMove:function(t,e,n){return e&&e>=t&&(this.immediate?e>=n:!0)},_getTouchBoundary:function(t){return this.immediate||Wn(t)?0:cg},_adjustStartEvent:function(t){const e=this._getTouchBoundary(t),n=Va(this._startEventData,At(t));this._startEvent.pageX+=il(n.x)*e,this._startEvent.pageY+=il(n.y)*e},_resetActiveElement:function(){X.real().platform==="ios"&&this.getElement().find(":focus").length&&Wh()},_toggleGestureCover:function(t){this._toggleGestureCoverImpl(t)},_toggleGestureCoverImpl:function(t){this._stage===2&&D8(t,this.getElement().css("cursor"))},_clearSelection:function(t){Wn(t)||m_(t)||nK()},end:function(t){this._toggleGestureCover(!1),this._stage===2?this._end(t):this._stage===1&&this._stop(t),this._stage=0},dispose:function(){clearTimeout(this._immediateTimer),this.callBase.apply(this,arguments),this._toggleGestureCover(!1)},_init:B,_start:B,_move:B,_stop:B,_end:B});rp.initialTouchBoundary=cg;rp.touchBoundary=function(t){if(M(t)){cg=t;return}return cg};const x8=ze.abstract,w8=X.real(),y$=ze.inherit(function(){const t=K("scroll","dxScrollEmitter");return{ctor:function(e){this._element=e,this._locked=!1,this._proxiedScroll=n=>{this._disposed||this._scroll(n)},b.on(this._element,t,this._proxiedScroll)},_scroll:x8,check:function(e,n){this._locked&&n()},dispose:function(){this._disposed=!0,b.off(this._element,t,this._proxiedScroll)}}}()),v$=y$.inherit({ctor:function(t,e){this.callBase(t),this._timeout=e},_scroll:function(){this._prepare(),this._forget()},_prepare:function(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer:function(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget:function(){const t=this;this._timer=setTimeout(function(){t._clearTimer()},this._timeout)},dispose:function(){this.callBase(),this._clearTimer()}}),ok=v$.inherit({ctor:function(t){this.callBase(t,400),this._lastWheelDirection=null},check:function(t,e){this._checkDirectionChanged(t),this.callBase(t,e)},_checkDirectionChanged:function(t){if(!Wn(t)){this._lastWheelDirection=null;return}const e=t.shiftKey||!1,n=this._lastWheelDirection!==null&&e!==this._lastWheelDirection;this._lastWheelDirection=e,this._locked=this._locked&&!n}});let c0=v$.inherit({ctor:function(t){this.callBase(t,400)}});(function(){const{ios:t,android:e}=w8;(t||e)&&(c0=y$.inherit({_scroll:function(){this._locked=!0;const n=this;Sr(this._scrollFrame),this._scrollFrame=ah(function(){n._locked=!1})},check:function(n,i){Sr(this._scrollFrame),Sr(this._checkFrame);const s=this,r=this.callBase;this._checkFrame=ah(function(){r.call(s,n,i),s._locked=!1})},dispose:function(){this.callBase(),Sr(this._scrollFrame),Sr(this._checkFrame)}}))})();const S8=rp.inherit(function(){const t=Math.round(16.666666666666668);return{ctor:function(e){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new c0(e),this._wheelLocker=new ok(e)},validate:function(){return!0},configure:function(e){e.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new c0(e.scrollTarget),this._wheelLocker=new ok(e.scrollTarget)),this.callBase(e)},_init:function(e){this._wheelLocker.check(e,(function(){Wn(e)&&this._accept(e)}).bind(this)),this._pointerLocker.check(e,(function(){const n=this.isNative&&Gr(e);!Wn(e)&&!n&&this._accept(e)}).bind(this)),this._fireEvent("dxscrollinit",e),this._prevEventData=At(e)},move:function(e){this.callBase.apply(this,arguments),e.isScrollingEvent=this.isNative||e.isScrollingEvent},_start:function(e){this._savedEventData=At(e),this._fireEvent("dxscrollstart",e),this._prevEventData=At(e)},_move:function(e){const n=At(e);this._fireEvent("dxscroll",e,{delta:Va(this._prevEventData,n)}),Va(this._savedEventData,n).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=At(e)},_end:function(e){const n=Va(this._prevEventData,At(e));let i={x:0,y:0};if(!Wn(e)&&n.time<100){const s=Va(this._savedEventData,this._prevEventData),r=t/s.time;i={x:s.x*r,y:s.y*r}}this._fireEvent("dxscrollend",e,{velocity:i})},_stop:function(e){this._fireEvent("dxscrollstop",e)},cancel:function(e){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",e)},dispose:function(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection:function(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover:function(){if(!this.isNative)return this.callBase.apply(this,arguments)}}}());du({emitter:S8,events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]});const Ea={init:"dxscrollinit",start:"dxscrollstart",move:"dxscroll",end:"dxscrollend",stop:"dxscrollstop",cancel:"dxscrollcancel",scroll:"scroll"};function pu(t){return(e,n,i,s)=>{const r=s?K(t,s):t;if(n)return b.on(e,r,i,n),()=>{b.off(e,r,n)}}}const b8=pu("dxactive"),E8=pu("dxinactive"),T8=pu("dxhoverstart"),I8=pu("dxhoverend"),A8=pu("focusin"),k8=pu("focusout"),R_={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0},Bo=RY(void 0),R8=["children","rtlEnabled"],O8=t=>t.props.children,P8={};class C$ extends ht{constructor(e){super(e),this.state={},this.__getterCache={}}getChildContext(){return L({},this.context,{[Bo.id]:this.config||Bo.defaultValue})}get config(){return this.__getterCache.config!==void 0?this.__getterCache.config:this.__getterCache.config={rtlEnabled:this.props.rtlEnabled}}get restAttributes(){const e=this.props;return Mt(e,R8)}componentWillUpdate(e,n,i){this.props.rtlEnabled!==e.rtlEnabled&&(this.__getterCache.config=void 0)}render(){const e=this.props;return O8({props:L({},e),config:this.config,restAttributes:this.restAttributes})}}C$.defaultProps=P8;function M8(t,e){return t!==void 0?t:(e==null?void 0:e.rtlEnabled)!==void 0?e.rtlEnabled:Me().rtlEnabled}function V8(t,e){const n=M(t),i=M(Me().rtlEnabled)&&!n&&!M(e==null?void 0:e.rtlEnabled);return n&&t!==(e==null?void 0:e.rtlEnabled)||i}const B8=["_feedbackHideTimeout","_feedbackShowTimeout","accessKey","activeStateEnabled","activeStateUnit","addWidgetClass","aria","children","className","classes","cssText","disabled","focusStateEnabled","height","hint","hoverStateEnabled","name","onActive","onClick","onDimensionChanged","onFocusIn","onFocusOut","onHoverEnd","onHoverStart","onInactive","onKeyDown","onRootElementRendered","onVisibilityChange","rootElementRef","rtlEnabled","tabIndex","visible","width"],L8=t=>Object.keys(t).reduce((e,n)=>t[n]?L({},e,{[n==="role"||n==="id"?n:`aria-${n}`]:String(t[n])}):e,{}),$8=t=>{const e=Li(Ve(1,"div",t.cssClasses,t.props.children,0,L({},t.attributes,{tabIndex:t.tabIndex,title:t.props.hint,style:Cl(t.styles)}),null,t.widgetElementRef));return t.shouldRenderConfigProvider?fe(2,C$,{rtlEnabled:t.rtlEnabled,children:e}):e},ug=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(R_),Object.getOwnPropertyDescriptors({_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:Object.freeze({}),classes:"",name:"",addWidgetClass:!0})));class cS extends ds{get config(){return this.context[Bo.id]?this.context[Bo.id]:Bo.defaultValue}constructor(e){super(e),this.widgetElementRef=ts(),this.state={active:!1,focused:!1,hovered:!1},this.setRootElementRef=this.setRootElementRef.bind(this),this.activeEffect=this.activeEffect.bind(this),this.inactiveEffect=this.inactiveEffect.bind(this),this.clickEffect=this.clickEffect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.focusInEffect=this.focusInEffect.bind(this),this.focusOutEffect=this.focusOutEffect.bind(this),this.hoverStartEffect=this.hoverStartEffect.bind(this),this.hoverEndEffect=this.hoverEndEffect.bind(this),this.keyboardEffect=this.keyboardEffect.bind(this),this.resizeEffect=this.resizeEffect.bind(this),this.windowResizeEffect=this.windowResizeEffect.bind(this),this.visibilityEffect=this.visibilityEffect.bind(this),this.checkDeprecation=this.checkDeprecation.bind(this),this.applyCssTextEffect=this.applyCssTextEffect.bind(this)}createEffects(){return[new Wt(this.setRootElementRef,[]),new Wt(this.activeEffect,[this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),new Wt(this.inactiveEffect,[this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),new Wt(this.clickEffect,[this.props.disabled,this.props.name,this.props.onClick]),new Wt(this.focusInEffect,[this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),new Wt(this.focusOutEffect,[this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),new Wt(this.hoverStartEffect,[this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),new Wt(this.hoverEndEffect,[this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),new Wt(this.keyboardEffect,[this.props.focusStateEnabled,this.props.onKeyDown]),new Wt(this.resizeEffect,[this.props.name,this.props.onDimensionChanged]),new Wt(this.windowResizeEffect,[this.props.onDimensionChanged]),new Wt(this.visibilityEffect,[this.props.name,this.props.onVisibilityChange]),new Wt(this.checkDeprecation,[this.props.height,this.props.width]),new Wt(this.applyCssTextEffect,[this.props.cssText]),hs()]}updateEffects(){var e,n,i,s,r,o,a,l,c,u,d,p,f;(e=this._effects[1])===null||e===void 0||e.update([this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),(n=this._effects[2])===null||n===void 0||n.update([this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),(i=this._effects[3])===null||i===void 0||i.update([this.props.disabled,this.props.name,this.props.onClick]),(s=this._effects[4])===null||s===void 0||s.update([this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),(r=this._effects[5])===null||r===void 0||r.update([this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),(o=this._effects[6])===null||o===void 0||o.update([this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),(a=this._effects[7])===null||a===void 0||a.update([this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),(l=this._effects[8])===null||l===void 0||l.update([this.props.focusStateEnabled,this.props.onKeyDown]),(c=this._effects[9])===null||c===void 0||c.update([this.props.name,this.props.onDimensionChanged]),(u=this._effects[10])===null||u===void 0||u.update([this.props.onDimensionChanged]),(d=this._effects[11])===null||d===void 0||d.update([this.props.name,this.props.onVisibilityChange]),(p=this._effects[12])===null||p===void 0||p.update([this.props.height,this.props.width]),(f=this._effects[13])===null||f===void 0||f.update([this.props.cssText])}setRootElementRef(){const{onRootElementRendered:e,rootElementRef:n}=this.props;n&&(n.current=this.widgetElementRef.current),e==null||e(this.widgetElementRef.current)}activeEffect(){const{_feedbackShowTimeout:e,activeStateEnabled:n,activeStateUnit:i,disabled:s,onActive:r}=this.props,o=i;if(n&&!s)return b8(this.widgetElementRef.current,a=>{this.setState(l=>({active:!0})),r==null||r(a)},{timeout:e,selector:o},"UIFeedback")}inactiveEffect(){const{_feedbackHideTimeout:e,activeStateEnabled:n,activeStateUnit:i,onInactive:s}=this.props,r=i;if(n)return E8(this.widgetElementRef.current,o=>{this.state.active&&(this.setState(a=>({active:!1})),s==null||s(o))},{timeout:e,selector:r},"UIFeedback")}clickEffect(){const{disabled:e,name:n,onClick:i}=this.props,s=n;if(i&&!e)return NA.on(this.widgetElementRef.current,i,{namespace:s}),()=>NA.off(this.widgetElementRef.current,{namespace:s})}focusInEffect(){const{disabled:e,focusStateEnabled:n,name:i,onFocusIn:s}=this.props,r=`${i}Focus`;if(n&&!e)return A8(this.widgetElementRef.current,o=>{o.isDefaultPrevented()||(this.setState(a=>({focused:!0})),s==null||s(o))},null,r)}focusOutEffect(){const{focusStateEnabled:e,name:n,onFocusOut:i}=this.props,s=`${n}Focus`;if(e)return k8(this.widgetElementRef.current,r=>{!r.isDefaultPrevented()&&this.state.focused&&(this.setState(o=>({focused:!1})),i==null||i(r))},null,s)}hoverStartEffect(){const{activeStateUnit:e,disabled:n,hoverStateEnabled:i,onHoverStart:s}=this.props,r=e;if(i&&!n)return T8(this.widgetElementRef.current,o=>{!this.state.active&&this.setState(a=>({hovered:!0})),s==null||s(o)},{selector:r},"UIFeedback")}hoverEndEffect(){const{activeStateUnit:e,hoverStateEnabled:n,onHoverEnd:i}=this.props,s=e;if(n)return I8(this.widgetElementRef.current,r=>{this.state.hovered&&(this.setState(o=>({hovered:!1})),i==null||i(r))},{selector:s},"UIFeedback")}keyboardEffect(){const{focusStateEnabled:e,onKeyDown:n}=this.props;if(e&&n){const i=ph.on(this.widgetElementRef.current,this.widgetElementRef.current,s=>n(s));return()=>ph.off(i)}}resizeEffect(){const e=`${this.props.name}VisibilityChange`,{onDimensionChanged:n}=this.props;if(n)return rg.on(this.widgetElementRef.current,n,{namespace:e}),()=>rg.off(this.widgetElementRef.current,{namespace:e})}windowResizeEffect(){const{onDimensionChanged:e}=this.props;if(e)return rh.add(e),()=>{rh.remove(e)}}visibilityEffect(){const{name:e,onVisibilityChange:n}=this.props,i=`${e}VisibilityChange`;if(n)return og.on(this.widgetElementRef.current,()=>n(!0),()=>n(!1),{namespace:i}),()=>og.off(this.widgetElementRef.current,{namespace:i})}checkDeprecation(){const{height:e,width:n}=this.props;ie(n)&&Te.log("W0017","width"),ie(e)&&Te.log("W0017","height")}applyCssTextEffect(){const{cssText:e}=this.props;e!==""&&(this.widgetElementRef.current.style.cssText=e)}get shouldRenderConfigProvider(){const{rtlEnabled:e}=this.props;return V8(e,this.config)}get rtlEnabled(){const{rtlEnabled:e}=this.props;return M8(e,this.config)}get attributes(){const{aria:e,disabled:n,focusStateEnabled:i,visible:s}=this.props,r=i&&!n&&this.props.accessKey;return L({},T({},r&&{accessKey:r}),L8(L({},e,{disabled:n,hidden:!s})),T({},this.restAttributes))}get styles(){const{height:e,width:n}=this.props,i=this.restAttributes.style||{},s=sh("width",ie(n)?n():n),r=sh("height",ie(e)?e():e);return L({},i,{height:r??i.height,width:s??i.width})}get cssClasses(){const{activeStateEnabled:e,addWidgetClass:n,className:i,classes:s,disabled:r,focusStateEnabled:o,hoverStateEnabled:a,onVisibilityChange:l,visible:c}=this.props,u=!!o&&!r,d=!!a&&!r,p=!!e&&!r,f={"dx-widget":!!n,[String(s)]:!!s,[String(i)]:!!i,"dx-state-disabled":!!r,"dx-state-invisible":!c,"dx-state-focused":!!this.state.focused&&u,"dx-state-active":!!this.state.active&&p,"dx-state-hover":!!this.state.hovered&&d&&!this.state.active,"dx-rtl":!!this.rtlEnabled,"dx-visibility-change-handler":!!l};return Co(f)}get tabIndex(){const{disabled:e,focusStateEnabled:n,tabIndex:i}=this.props;return n&&!e?i:void 0}get restAttributes(){const e=this.props;return Mt(e,B8)}focus(){nm.trigger(this.widgetElementRef.current)}blur(){const e=W.getActiveElement(this.widgetElementRef.current);this.widgetElementRef.current===e&&e.blur()}activate(){this.setState(e=>({active:!0}))}deactivate(){this.setState(e=>({active:!1}))}render(){const e=this.props;return $8({props:L({},e),active:this.state.active,focused:this.state.focused,hovered:this.state.hovered,widgetElementRef:this.widgetElementRef,config:this.config,shouldRenderConfigProvider:this.shouldRenderConfigProvider,rtlEnabled:this.rtlEnabled,attributes:this.attributes,styles:this.styles,cssClasses:this.cssClasses,tabIndex:this.tabIndex,restAttributes:this.restAttributes})}}cS.defaultProps=ug;const F8=["accessKey","activeStateEnabled","children","className","disabled","focusStateEnabled","height","hint","hoverStateEnabled","icon","iconPosition","iconTemplate","onClick","onKeyDown","onSubmit","pressed","rtlEnabled","stylingMode","tabIndex","template","templateData","text","type","useInkRipple","useSubmitBehavior","visible","width"],H8=["outlined","text","contained"],N8=t=>{const{icon:e,iconPosition:n,stylingMode:i,text:s,type:r}=t,a={"dx-button":!0,[`dx-button-mode-${i&&H8.includes(i)?i:"contained"}`]:!0,[`dx-button-${r??"normal"}`]:!0,"dx-button-has-text":!!s,"dx-button-has-icon":!!e,"dx-button-icon-right":n!=="left"};return Co(a)},z8=t=>{const{children:e,iconPosition:n,iconTemplate:i,template:s,text:r}=t.props,o=!t.props.template&&!e&&r!=="",a=n==="left",l=!t.props.template&&!e&&(t.iconSource||t.props.iconTemplate)&&fe(2,l$,{source:t.iconSource,position:n,iconTemplate:i});return Li(fe(2,cS,L({accessKey:t.props.accessKey,activeStateEnabled:t.props.activeStateEnabled,aria:t.aria,className:t.props.className,classes:t.cssClasses,disabled:t.props.disabled,focusStateEnabled:t.props.focusStateEnabled,height:t.props.height,hint:t.props.hint,hoverStateEnabled:t.props.hoverStateEnabled,onActive:t.onActive,onClick:t.onWidgetClick,onInactive:t.onInactive,onKeyDown:t.keyDown,rtlEnabled:t.props.rtlEnabled,tabIndex:t.props.tabIndex,visible:t.props.visible,width:t.props.width},t.restAttributes,{children:Ve(1,"div","dx-button-content",[t.props.template&&s({data:t.buttonTemplateData}),!t.props.template&&e,a&&l,o&&Ve(1,"span","dx-button-text",r,0),!a&&l,t.props.useSubmitBehavior&&Ve(64,"input","dx-button-submit-input",null,1,{type:"submit",tabIndex:-1},null,t.submitInputRef),t.props.useInkRipple&&fe(2,_$,{config:t.inkRippleConfig},null,t.inkRippleRef)],0,null,null,t.contentRef)}),null,t.widgetRef))},W8=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(R_),Object.getOwnPropertyDescriptors({activeStateEnabled:!0,hoverStateEnabled:!0,icon:"",iconPosition:"left",stylingMode:"contained",text:"",type:"normal",useInkRipple:!1,useSubmitBehavior:!1,templateData:Object.freeze({})}))),D$=a5([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>Un(xi()),options:{useInkRipple:!0}}]),ak=t=>t&&(t.defaultProps?e=>Li(fe(2,t,L({},e))):t);let dg=class extends ds{constructor(e){super(e),this.state={},this.contentRef=ts(),this.inkRippleRef=ts(),this.submitInputRef=ts(),this.widgetRef=ts(),this.__getterCache={},this.focus=this.focus.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.submitEffect=this.submitEffect.bind(this),this.onActive=this.onActive.bind(this),this.onInactive=this.onInactive.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this),this.emitClickEvent=this.emitClickEvent.bind(this)}createEffects(){return[new Wt(this.submitEffect,[this.props.onSubmit,this.props.useSubmitBehavior]),hs()]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.props.onSubmit,this.props.useSubmitBehavior])}submitEffect(){const{onSubmit:e,useSubmitBehavior:n}=this.props;if(n&&e)return zA.on(this.submitInputRef.current,i=>e({event:i,submitInput:this.submitInputRef.current}),{namespace:"UIFeedback"}),()=>zA.off(this.submitInputRef.current,{namespace:"UIFeedback"})}onActive(e){const{useInkRipple:n}=this.props;n&&this.inkRippleRef.current.showWave({element:this.contentRef.current,event:e})}onInactive(e){const{useInkRipple:n}=this.props;n&&this.inkRippleRef.current.hideWave({element:this.contentRef.current,event:e})}onWidgetClick(e){const{onClick:n,useSubmitBehavior:i}=this.props;n==null||n({event:e}),i&&this.submitInputRef.current.click()}keyDown(e){const{onKeyDown:n}=this.props,{keyName:i,originalEvent:s,which:r}=e,o=n==null?void 0:n(e);if(o!=null&&o.cancel)return o;(i==="space"||r==="space"||i==="enter"||r==="enter")&&(s.preventDefault(),this.emitClickEvent())}emitClickEvent(){this.contentRef.current.click()}get aria(){const{icon:e,text:n}=this.props;let i=n??"";if(!n&&e)switch(k_(e)){case"image":{const o=/^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/;i=!e.includes("base64")&&o.test(e)?e.replace(/.+\/([^.]+)\..+$/,"$1"):"";break}case"dxIcon":i=q.format(Uc(e,!0))||e;break;case"fontIcon":i=e;break;case"svg":{var s;i=((s=/<title>(.*?)<\/title>/.exec(e))===null||s===void 0?void 0:s[1])??"";break}}return L({role:"button"},i?{label:i}:{})}get cssClasses(){return N8(this.props)}get iconSource(){const{icon:e}=this.props;return e??""}get inkRippleConfig(){return this.__getterCache.inkRippleConfig!==void 0?this.__getterCache.inkRippleConfig:this.__getterCache.inkRippleConfig=(()=>{const{icon:e,text:n}=this.props;return!n&&e?{isCentered:!0,useHoldAnimation:!1,waveSizeCoefficient:1}:{}})()}get buttonTemplateData(){const{icon:e,templateData:n,text:i}=this.props;return L({icon:e,text:i},n)}get restAttributes(){const e=this.props;return Mt(e,F8)}focus(){this.widgetRef.current.focus()}activate(){this.widgetRef.current.activate()}deactivate(){this.widgetRef.current.deactivate()}componentWillUpdate(e,n,i){super.componentWillUpdate(),(this.props.icon!==e.icon||this.props.text!==e.text)&&(this.__getterCache.inkRippleConfig=void 0)}render(){const e=this.props;return z8({props:L({},e,{template:ak(e.template),iconTemplate:ak(e.iconTemplate)}),contentRef:this.contentRef,submitInputRef:this.submitInputRef,inkRippleRef:this.inkRippleRef,widgetRef:this.widgetRef,onActive:this.onActive,onInactive:this.onInactive,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,emitClickEvent:this.emitClickEvent,aria:this.aria,cssClasses:this.cssClasses,iconSource:this.iconSource,inkRippleConfig:this.inkRippleConfig,buttonTemplateData:this.buttonTemplateData,restAttributes:this.restAttributes})}};dg.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(W8),Object.getOwnPropertyDescriptors(L({},jc(D$)))));const lk=[];function G8(t){lk.push(t),dg.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(dg.defaultProps),Object.getOwnPropertyDescriptors(jc(D$)),Object.getOwnPropertyDescriptors(jc(lk))))}class Kn extends o8{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.focus(...arguments)}activate(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.activate(...arguments)}deactivate(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.deactivate(...arguments)}_getActionConfigs(){return{onClick:{excludeValidators:["readOnly"]},onSubmit:{}}}get _propsInfo(){return{twoWay:[],allowNull:[],elements:["onSubmit"],templates:["template","iconTemplate"],props:["activeStateEnabled","hoverStateEnabled","icon","iconPosition","onClick","onSubmit","pressed","stylingMode","template","iconTemplate","text","type","useInkRipple","useSubmitBehavior","templateData","className","accessKey","disabled","focusStateEnabled","height","hint","onKeyDown","rtlEnabled","tabIndex","visible","width"]}}get _viewComponent(){return dg}}re("dxButton",Kn);Kn.defaultOptions=G8;const uS="dxdragstart",O_="dxdrag",dS="dxdragend",op="dxdragenter",ap="dxdragleave",P_="dxdrop",Er=[],vc=[],u0=[],hS={setup:function(t,e){Er.includes(t)||(Er.push(t),vc.push([]),u0.push(e||{}))},add:function(t,e){const n=Er.indexOf(t);this.updateEventsCounter(t,e.type,1);const i=e.selector;vc[n].includes(i)||vc[n].push(i)},updateEventsCounter:function(t,e,n){if([op,ap,P_].indexOf(e)>-1){const i=st(t,"dxDragEventsCount")||0;st(t,"dxDragEventsCount",Math.max(0,i+n))}},remove:function(t,e){this.updateEventsCounter(t,e.type,-1)},teardown:function(t){if(!st(t,"dxDragEventsCount")){const n=Er.indexOf(t);Er.splice(n,1),vc.splice(n,1),u0.splice(n,1),o_(t,"dxDragEventsCount")}}};cs(op,hS);cs(ap,hS);cs(P_,hS);const U8=function(t){const e=Er.indexOf(t.get(0)),n=vc[e].filter(s=>s);let i=t.find(n.join(", "));return vc[e].includes(void 0)&&(i=i.add(t)),i},K8=function(t){const e=Er.indexOf(t.get(0));return u0[e]},j8=function(t,e){return t.itemPositionFunc?t.itemPositionFunc(e):e.offset()},q8=function(t,e){return t.itemSizeFunc?t.itemSizeFunc(e):{width:e.get(0).getBoundingClientRect().width,height:e.get(0).getBoundingClientRect().height}},Y8=rp.inherit({ctor:function(t){this.callBase(t),this.direction="both"},_init:function(t){this._initEvent=t},_start:function(t){if(t=this._fireEvent("dxdragstart",this._initEvent),this._maxLeftOffset=t.maxLeftOffset,this._maxRightOffset=t.maxRightOffset,this._maxTopOffset=t.maxTopOffset,this._maxBottomOffset=t.maxBottomOffset,t.targetElements||t.targetElements===null){const e=na(t.targetElements||[]);this._dropTargets=Yn(e,function(n){return m(n).get(0)})}else this._dropTargets=Er},_move:function(t){const e=At(t),n=this._calculateOffset(e);t=this._fireEvent("dxdrag",t,{offset:n}),this._processDropTargets(t),t._cancelPreventDefault||t.preventDefault()},_calculateOffset:function(t){return{x:this._calculateXOffset(t),y:this._calculateYOffset(t)}},_calculateXOffset:function(t){if(this.direction!=="vertical"){const e=t.x-this._startEventData.x;return this._fitOffset(e,this._maxLeftOffset,this._maxRightOffset)}return 0},_calculateYOffset:function(t){if(this.direction!=="horizontal"){const e=t.y-this._startEventData.y;return this._fitOffset(e,this._maxTopOffset,this._maxBottomOffset)}return 0},_fitOffset:function(t,e,n){return e!=null&&(t=Math.max(t,-e)),n!=null&&(t=Math.min(t,n)),t},_processDropTargets:function(t){const e=this._findDropTarget(t);e===this._currentDropTarget||(this._fireDropTargetEvent(t,ap),this._currentDropTarget=e,this._fireDropTargetEvent(t,op))},_fireDropTargetEvent:function(t,e){if(!this._currentDropTarget)return;const n={type:e,originalEvent:t,draggingElement:this._$element.get(0),target:this._currentDropTarget};ta(n)},_findDropTarget:function(t){const e=this;let n;return N(Er,function(i,s){if(!e._checkDropTargetActive(s))return;const r=m(s);N(U8(r),function(o,a){const l=m(a);e._checkDropTarget(K8(r),l,m(n),t)&&(n=a)})}),n},_checkDropTargetActive:function(t){let e=!1;return N(this._dropTargets,function(n,i){return e=e||i===t||kr(i,t),!e}),e},_checkDropTarget:function(t,e,n,i){if(e.get(0)===m(i.target).get(0))return!1;const r=j8(t,e);if(i.pageX<r.left||i.pageY<r.top)return!1;const o=q8(t,e);return i.pageX>r.left+o.width||i.pageY>r.top+o.height||n.length&&n.closest(e).length||t.checkDropTarget&&!t.checkDropTarget(e,i)?!1:e},_end:function(t){const e=At(t);this._fireEvent("dxdragend",t,{offset:this._calculateOffset(e)}),this._fireDropTargetEvent(t,P_),delete this._currentDropTarget}});du({emitter:Y8,events:["dxdragstart","dxdrag","dxdragend"]});const ck=function(){let t=[];return{add:function(e){t.includes(e)||t.push(e)},remove:function(e){const n=t.indexOf(e);n!==-1&&t.splice(n,1)},fire:function(){const e=t.pop(),n=!!e;return n&&e(),n},hasCallback:function(){return t.length>0}}}(),Z8=t=>{const n=m(t).closest('[class^="dx-swatch-"], [class*=" dx-swatch-"]'),i=tr();if(!n.length)return i;const s=new RegExp("(\\s|^)(dx-swatch-.*?)(\\s|$)"),r=n[0].className.match(s)[2];let o=i.children("."+r);return o.length||(o=m("<div>").addClass(r).appendTo(i)),o},Q8={getSwatchContainer:Z8},X8=pe(),x$={top:{my:"top center",at:"top center"},bottom:{my:"bottom center",at:"bottom center"},right:{my:"right center",at:"right center"},left:{my:"left center",at:"left center"},center:{my:"center",at:"center"},"right bottom":{my:"right bottom",at:"right bottom"},"right top":{my:"right top",at:"right top"},"left bottom":{my:"left bottom",at:"left bottom"},"left top":{my:"left top",at:"left top"}},uk={h:0,v:0};class pS{constructor(e){let{position:n,container:i,visualContainer:s,$root:r,$content:o,$wrapper:a,onPositioned:l,onVisualPositionChanged:c,restorePosition:u,_fixWrapperPosition:d,_skipContentPositioning:p}=e;this._props={position:n,container:i,visualContainer:s,restorePosition:u,onPositioned:l,onVisualPositionChanged:c,_fixWrapperPosition:d,_skipContentPositioning:p},this._$root=r,this._$content=o,this._$wrapper=a,this._$markupContainer=void 0,this._$visualContainer=void 0,this._shouldRenderContentInitialPosition=!0,this._visualPosition=void 0,this._initialPosition=void 0,this._previousVisualPosition=void 0,this.updateContainer(i),this.updatePosition(n),this.updateVisualContainer(s)}get $container(){return this.updateContainer(),this._$markupContainer}get $visualContainer(){return this._$visualContainer}get position(){return this._position}set fixWrapperPosition(e){this._props._fixWrapperPosition=e,this.styleWrapperPosition()}set restorePosition(e){this._props.restorePosition=e}restorePositionOnNextRender(e){this._shouldRenderContentInitialPosition=e||!this._visualPosition}openingHandled(){const e=this._props.restorePosition;this.restorePositionOnNextRender(e)}updatePosition(e){this._props.position=e,this._position=this._normalizePosition(e),this.updateVisualContainer()}updateContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._props.container;this._props.container=e,this._$markupContainer=e?m(e):Q8.getSwatchContainer(this._$root),this.updateVisualContainer(this._props.visualContainer)}updateVisualContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._props.visualContainer;this._props.visualContainer=e,this._$visualContainer=this._getVisualContainer()}detectVisualPositionChange(e){this._updateVisualPositionValue(),this._raisePositionedEvents(e)}positionContent(){this._shouldRenderContentInitialPosition?this._renderContentInitialPosition():(Ft(this._$content,this._visualPosition),this.detectVisualPositionChange())}positionWrapper(){this._$visualContainer&&fi.setup(this._$wrapper,{my:"top left",at:"top left",of:this._$visualContainer})}styleWrapperPosition(){const n=bt(this.$visualContainer.get(0))||this._props._fixWrapperPosition?"fixed":"absolute";this._$wrapper.css("position",n)}_updateVisualPositionValue(){this._previousVisualPosition=this._visualPosition,this._visualPosition=Gn(this._$content)}_renderContentInitialPosition(){this._renderBoundaryOffset(),Yh(this._$content);const e=this._$wrapper.css("overflow");if(this._$wrapper.css("overflow","hidden"),!this._props._skipContentPositioning){const n=fi.setup(this._$content,this._position);this._initialPosition=n}this._$wrapper.css("overflow",e),this.detectVisualPositionChange()}_raisePositionedEvents(e){const n=this._previousVisualPosition,i=this._visualPosition;((n==null?void 0:n.top)!==i.top||(n==null?void 0:n.left)!==i.left)&&this._props.onVisualPositionChanged({previousPosition:n,position:i,event:e}),this._props.onPositioned({position:this._initialPosition})}_renderBoundaryOffset(){const e=this._position??{boundaryOffset:uk};this._$content.css("margin",`${e.v}px ${e.h}px`)}_getVisualContainer(){var e,n;const i=this._props.container,s=this._props.visualContainer,r=M2((e=this._props.position)===null||e===void 0?void 0:e.of)?this._props.position.of.target:(n=this._props.position)===null||n===void 0?void 0:n.of;return m(s||i||r||X8)}_normalizePosition(e){const n={boundaryOffset:uk};return M(e)?T(!0,{},n,this._positionToObject(e)):n}_positionToObject(e){return ve(e)?T({},x$[e]):e}}let am=1500,Lo=[];const J8=t=>(am=rt(t,am),am),w$=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:am;const{length:e}=Lo,n=(e?Lo[e-1]:t)+1;return Lo.push(n),n},d0=t=>{const e=Lo.indexOf(t);e>=0&&Lo.splice(e,1)},e7=t=>Lo.length&&Lo[Lo.length-1]===t,t7=ar.add,Ll=pe(),dk=a_,h0=[];t7(()=>{b.subscribeGlobal(W.getDocument(),ot.down,t=>{for(let e=h0.length-1;e>=0;e--)if(!h0[e]._proxiedDocumentDownHandler(t))return})});const Dl=Kt.inherit({_supportedKeys(){return T(this.callBase(),{escape(){this.hide()}})},_getDefaultOptions(){return T(this.callBase(),{activeStateEnabled:!1,visible:!1,deferRendering:!0,shading:!0,shadingColor:"",wrapperAttr:{},position:T({},x$.center),width:"80vw",minWidth:null,maxWidth:null,height:"80vh",minHeight:null,maxHeight:null,animation:{show:{type:"pop",duration:300,from:{scale:.55}},hide:{type:"pop",duration:300,from:{opacity:1,scale:1},to:{opacity:0,scale:.55}}},closeOnOutsideClick:!1,hideOnOutsideClick:!1,_ignorePreventScrollEventsDeprecation:!1,onShowing:null,onShown:null,onHiding:null,onHidden:null,contentTemplate:"content",innerOverlay:!1,restorePosition:!0,container:void 0,visualContainer:void 0,hideTopOverlayHandler:()=>{this.hide()},hideOnParentScroll:!1,preventScrollEvents:!0,onPositioned:null,propagateOutsideClick:!1,ignoreChildEvents:!0,_checkParentVisibility:!0,_hideOnParentScrollTarget:void 0,_fixWrapperPosition:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>!ae(),options:{width:null,height:null,animation:null,_checkParentVisibility:!1}}])},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{animation:!0})},$wrapper(){return this._$wrapper},_eventBindingTarget(){return this._$content},_setDeprecatedOptions(){this.callBase(),T(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.1",alias:"hideOnOutsideClick"}})},ctor(t,e){this.callBase(t,e),e&&"preventScrollEvents"in e&&!e._ignorePreventScrollEventsDeprecation&&this._logDeprecatedPreventScrollEventsInfo()},_logDeprecatedPreventScrollEventsInfo(){this._logDeprecatedOptionWarning("preventScrollEvents",{since:"23.1",message:"If you enable this option, end-users may experience scrolling issues."})},_init(){this.callBase(),this._initActions(),this._initHideOnOutsideClickHandler(),this._initTabTerminatorHandler(),this._customWrapperClass=null,this._$wrapper=m("<div>").addClass("dx-overlay-wrapper"),this._$content=m("<div>").addClass("dx-overlay-content"),this._initInnerOverlayClass(),this.$element().addClass("dx-overlay"),this._$wrapper.attr("data-bind","dxControlsDescendantBindings: true"),this._toggleViewPortSubscription(!0),this._initHideTopOverlayHandler(this.option("hideTopOverlayHandler")),this._parentsScrollSubscriptionInfo={handler:e=>{this._hideOnParentsScrollHandler(e)}},this.warnPositionAsFunction()},warnPositionAsFunction(){ie(this.option("position"))&&Te.log("W0018")},_initInnerOverlayClass(){this._$content.toggleClass("dx-inner-overlay",this.option("innerOverlay"))},_initHideTopOverlayHandler(t){this._hideTopOverlayHandler=t},_getActionsList:()=>["onShowing","onShown","onHiding","onHidden","onPositioned","onVisualPositionChanged"],_initActions(){this._actions={};const t=this._getActionsList();N(t,(e,n)=>{this._actions[n]=this._createActionByOption(n,{excludeValidators:["disabled","readOnly"]})||B})},_initHideOnOutsideClickHandler(){var t=this;this._proxiedDocumentDownHandler=function(){return t._documentDownHandler(...arguments)}},_initMarkup(){this.callBase(),this._renderWrapperAttributes(),this._initPositionController()},_documentDownHandler(t){this._showAnimationProcessing&&this._stopAnimation();const e=m(Ll.document).is(t.target)||kr(Ll.document,t.target),n=m(t.target).closest(".dx-inner-overlay").length;return e&&!n&&!(this._$content.is(t.target)||kr(this._$content.get(0),t.target))&&this._shouldHideOnOutsideClick(t)&&this._outsideClickHandler(t),this.option("propagateOutsideClick")},_shouldHideOnOutsideClick(t){const{hideOnOutsideClick:e}=this.option();return ie(e)?e(t):e},_outsideClickHandler(t){this.option("shading")&&t.preventDefault(),this.hide()},_getAnonymousTemplateName:()=>"content",_initTemplates(){this._templateManager.addDefaultTemplates({content:new Rr}),this.callBase()},_isTopOverlay(){const t=this._overlayStack();for(let e=t.length-1;e>=0;e--){const n=t[e]._findTabbableBounds();if(n.first||n.last)return t[e]===this}return!1},_overlayStack:()=>h0,_zIndexInitValue:()=>Dl.baseZIndex(),_toggleViewPortSubscription(t){var e=this;dk.remove(this._viewPortChangeHandle),t&&(this._viewPortChangeHandle=function(){e._viewPortChangeHandler(...arguments)},dk.add(this._viewPortChangeHandle))},_viewPortChangeHandler(){this._positionController.updateContainer(this.option("container")),this._refresh()},_renderWrapperAttributes(){const{wrapperAttr:t}=this.option(),e=T({},t),n=e.class;delete e.class,this.$wrapper().attr(e).removeClass(this._customWrapperClass).addClass(n),this._customWrapperClass=n},_renderVisibilityAnimate(t){return this._stopAnimation(),t?this._show():this._hide()},_getAnimationConfig(){return this._getOptionValue("animation",this)},_toggleBodyScroll:B,_animateShowing(){var t=this;const e=this._getAnimationConfig()??{},n=this._normalizeAnimation(e.show,"to"),i=(n==null?void 0:n.start)??B,s=(n==null?void 0:n.complete)??B;this._animate(n,function(){if(!t._isAnimationPaused){t.option("focusStateEnabled")&&b.trigger(t._focusTarget(),"focus");for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];s.call(t,...o),t._showAnimationProcessing=!1,t._isHidden=!1,t._actions.onShown(),t._toggleSafariScrolling(),t._showingDeferred.resolve()}},function(){if(!t._isAnimationPaused){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];i.call(t,...o),t._showAnimationProcessing=!0}})},_processShowingHidingCancel(t,e,n){fl(t)?t.then(i=>{i?n():e()}).catch(()=>e()):t?n():e()},_show(){if(this._showingDeferred=j(),this._parentHidden=this._isParentHidden(),this._showingDeferred.done(()=>{delete this._parentHidden}),this._parentHidden)return this._isHidden=!0,this._showingDeferred.resolve();if(this._currentVisible)return j().resolve().promise();if(this._currentVisible=!0,this._isHidingActionCanceled)delete this._isHidingActionCanceled,this._showingDeferred.reject();else{const t=()=>{this._stopAnimation(),this._toggleBodyScroll(this.option("enableBodyScroll")),this._toggleVisibility(!0),this._$content.css("visibility","hidden"),this._$content.toggleClass("dx-state-invisible",!1),this._updateZIndexStackPosition(!0),this._positionController.openingHandled(),this._renderContent();const e={cancel:!1};this._actions.onShowing(e),this._processShowingHidingCancel(e.cancel,()=>{this._$content.css("visibility",""),this._renderVisibility(!0),this._animateShowing()},()=>{this._toggleVisibility(!1),this._$content.css("visibility",""),this._$content.toggleClass("dx-state-invisible",!0),this._isShowingActionCanceled=!0,this._moveFromContainer(),this._toggleBodyScroll(!0),this.option("visible",!1),this._showingDeferred.resolve()})};this.option("templatesRenderAsynchronously")?(this._stopShowTimer(),this._asyncShowTimeout=setTimeout(t)):t()}return this._showingDeferred.promise()},_normalizeAnimation(t,e){return t&&(t=T({type:"slide",skipElementInitialStyles:!0},t),ue(t[e])&&T(t[e],{position:this._positionController.position})),t},_animateHiding(){var t=this;const e=this._getAnimationConfig()??{},n=this._normalizeAnimation(e.hide,"from"),i=(n==null?void 0:n.start)??B,s=(n==null?void 0:n.complete)??B;this._animate(n,function(){var r;t._$content.css("pointerEvents",""),t._renderVisibility(!1);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];s.call(t,...a),t._hideAnimationProcessing=!1,(r=t._actions)===null||r===void 0||r.onHidden(),t._hidingDeferred.resolve()},function(){t._$content.css("pointerEvents","none");for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];i.call(t,...o),t._hideAnimationProcessing=!0})},_hide(){if(!this._currentVisible)return j().resolve().promise();this._currentVisible=!1,this._hidingDeferred=j();const t={cancel:!1};if(this._isShowingActionCanceled)delete this._isShowingActionCanceled,this._hidingDeferred.reject();else{this._actions.onHiding(t),this._toggleSafariScrolling(),this._toggleBodyScroll(!0);const e=()=>{this._isHidingActionCanceled=!0,this._toggleBodyScroll(this.option("enableBodyScroll")),this.option("visible",!0),this._hidingDeferred.resolve()},n=()=>{this._forceFocusLost(),this._toggleShading(!1),this._toggleSubscriptions(!1),this._stopShowTimer(),this._animateHiding()};this._processShowingHidingCancel(t.cancel,n,e)}return this._hidingDeferred.promise()},_forceFocusLost(){const t=W.getActiveElement();!!this._$content.find(t).length&&Wh()},_animate(t,e,n){t?(n=n||t.start||B,Tt.animate(this._$content,T({},t,{start:n,complete:e}))):e()},_stopAnimation(){Tt.stop(this._$content,!0)},_renderVisibility(t){t&&this._isParentHidden()||(this._currentVisible=t,this._stopAnimation(),t||oK(this._$content),t?(this._checkContainerExists(),this._moveToContainer(),this._renderGeometry(),Aw(this._$content),Ji(this._$content)):(this._toggleVisibility(t),this._$content.toggleClass("dx-state-invisible",!t),this._updateZIndexStackPosition(t),this._moveFromContainer()),this._toggleShading(t),this._toggleSubscriptions(t))},_updateZIndexStackPosition(t){const e=this._overlayStack(),n=e.indexOf(this);t?(n===-1&&(this._zIndex=w$(this._zIndexInitValue()),e.push(this)),this._$wrapper.css("zIndex",this._zIndex),this._$content.css("zIndex",this._zIndex)):n!==-1&&(e.splice(n,1),d0(this._zIndex))},_toggleShading(t){this._$wrapper.toggleClass("dx-overlay-shader",t&&this.option("shading")),this._$wrapper.css("backgroundColor",this.option("shading")?this.option("shadingColor"):""),this._toggleTabTerminator(t&&this.option("shading"))},_initTabTerminatorHandler(){var t=this;this._proxiedTabTerminatorHandler=function(){t._tabKeyHandler(...arguments)}},_toggleTabTerminator(t){const e=K("keydown",this.NAME);t?b.on(W.getDocument(),e,this._proxiedTabTerminatorHandler):b.off(W.getDocument(),e,this._proxiedTabTerminatorHandler)},_findTabbableBounds(){const t=this._$wrapper.find("*"),e=t.length-1,n={first:null,last:null};for(let i=0;i<=e&&(!n.first&&t.eq(i).is(yA)&&(n.first=t.eq(i)),!n.last&&t.eq(e-i).is(yA)&&(n.last=t.eq(e-i)),!(n.first&&n.last));i++);return n},_tabKeyHandler(t){if(tn(t)!=="tab"||!this._isTopOverlay())return;const e=this._findTabbableBounds(),n=e.first,i=e.last,s=!t.shiftKey&&t.target===i.get(0),r=t.shiftKey&&t.target===n.get(0),o=e.length===0,a=!kr(this._$wrapper.get(0),t.target);if(s||r||o||a){t.preventDefault();const l=t.shiftKey?i:n;b.trigger(l,"focusin"),b.trigger(l,"focus")}},_toggleSubscriptions(t){ae()&&(this._toggleHideTopOverlayCallback(t),this._toggleHideOnParentsScrollSubscription(t))},_toggleHideTopOverlayCallback(t){this._hideTopOverlayHandler&&(t?ck.add(this._hideTopOverlayHandler):ck.remove(this._hideTopOverlayHandler))},_toggleHideOnParentsScrollSubscription(t){const e=K("scroll",this.NAME),{prevTargets:n,handler:i}=this._parentsScrollSubscriptionInfo??{};b.off(n,e,i);const s=this.option("hideOnParentScroll");if(t&&s){let r=this._getHideOnParentScrollTarget().parents();X.real().deviceType==="desktop"&&(r=r.add(Ll)),b.on(r,e,i),this._parentsScrollSubscriptionInfo.prevTargets=r}},_hideOnParentsScrollHandler(t){let e=!1;const n=this.option("hideOnParentScroll");ie(n)&&(e=n(t)),!e&&!this._showAnimationProcessing&&this.hide()},_getHideOnParentScrollTarget(){const t=m(this.option("_hideOnParentScrollTarget"));return t.length?t:this._$wrapper},_render(){this.callBase(),this._appendContentToElement(),this._renderVisibilityAnimate(this.option("visible"))},_appendContentToElement(){this._$content.parent().is(this.$element())||this._$content.appendTo(this.$element())},_renderContent(){const t=!this._currentVisible&&this.option("deferRendering");if(this.option("visible")&&this._isParentHidden()){this._isHidden=!0;return}this._contentAlreadyRendered||t||(this._contentAlreadyRendered=!0,this._appendContentToElement(),this.callBase())},_isParentHidden(){if(!this.option("_checkParentVisibility"))return!1;if(this._parentHidden!==void 0)return this._parentHidden;const t=this.$element().parent();if(t.is(":visible"))return!1;let e=!1;return t.add(t.parents()).each((n,i)=>{if(m(i).css("display")==="none")return e=!0,!1}),e||!W.getBody().contains(t.get(0))},_renderContentImpl(){const t=j(),e=this.option("contentTemplate"),n=this._getTemplate(e),i=this._templateManager.anonymousTemplateName===e;return n&&n.render({container:se(this.$content()),noModel:!0,transclude:i,onRendered:()=>{t.resolve(),this.option("templatesRenderAsynchronously")&&this._dimensionChanged()}}),this._toggleWrapperScrollEventsSubscription(this.option("preventScrollEvents")),t.done(()=>{this.option("visible")&&this._moveToContainer()}),t.promise()},_getPositionControllerConfig(){const{container:t,visualContainer:e,_fixWrapperPosition:n,restorePosition:i,_skipContentPositioning:s}=this.option();return{container:t,visualContainer:e,$root:this.$element(),$content:this._$content,$wrapper:this._$wrapper,onPositioned:this._actions.onPositioned,onVisualPositionChanged:this._actions.onVisualPositionChanged,restorePosition:i,_fixWrapperPosition:n,_skipContentPositioning:s}},_initPositionController(){this._positionController=new pS(this._getPositionControllerConfig())},_toggleWrapperScrollEventsSubscription(t){const e=K(O_,this.NAME);b.off(this._$wrapper,e),t&&b.on(this._$wrapper,e,{validate:()=>!0,getDirection:()=>"both",_toggleGestureCover(n){n||this._toggleGestureCoverImpl(n)},_clearSelection:B,isNative:!0},n=>{const{originalEvent:i}=n.originalEvent,{type:s}=i||{},r=s==="wheel",o=s==="mousemove",a=r&&!bn(n);n._cancelPreventDefault=!0,i&&n.cancelable!==!1&&(!o&&!r||a)&&n.preventDefault()})},_moveFromContainer(){this._$content.appendTo(this.$element()),this._$wrapper.detach()},_checkContainerExists(){const t=this._positionController.$container;if(t===void 0)return;t.length>0||it.log("W1021",this.NAME)},_moveToContainer(){const t=this._positionController.$container;this._$wrapper.appendTo(t),this._$content.appendTo(this._$wrapper)},_renderGeometry(t){const{visible:e}=this.option();e&&ae()&&(this._stopAnimation(),this._renderGeometryImpl())},_renderGeometryImpl(){this._positionController.updatePosition(this._getOptionValue("position")),this._renderWrapper(),this._renderDimensions(),this._renderPosition()},_renderPosition(){this._positionController.positionContent()},_isAllWindowCovered(){return bt(this._positionController.$visualContainer.get(0))&&this.option("shading")},_toggleSafariScrolling(){const t=this.option("visible"),e=m(W.getBody()),n=X.real().platform==="ios"&&is.safari,i=this._isAllWindowCovered(),s=e.hasClass("dx-prevent-safari-scrolling"),r=!s&&t&&i,o=s&&(!t||!i||this._disposed);n&&(o?(e.removeClass("dx-prevent-safari-scrolling"),Ll.scrollTo(0,this._cachedBodyScrollTop),this._cachedBodyScrollTop=void 0):r&&(this._cachedBodyScrollTop=Ll.pageYOffset,e.addClass("dx-prevent-safari-scrolling")))},_renderWrapper(){this._positionController.styleWrapperPosition(),this._renderWrapperDimensions(),this._positionController.positionWrapper()},_renderWrapperDimensions(){const{$visualContainer:t}=this._positionController,e=W.getDocumentElement(),n=bt(t.get(0)),i=n?e.clientWidth:et(t),s=n?Ll.innerHeight:tt(t);this._$wrapper.css({width:i,height:s})},_renderDimensions(){const t=this._$content.get(0);this._$content.css({minWidth:this._getOptionValue("minWidth",t),maxWidth:this._getOptionValue("maxWidth",t),minHeight:this._getOptionValue("minHeight",t),maxHeight:this._getOptionValue("maxHeight",t),width:this._getOptionValue("width",t),height:this._getOptionValue("height",t)})},_focusTarget(){return this._$content},_attachKeyboardEvents(){this._keyboardListenerId=ph.on(this._$content,null,t=>this._keyboardHandler(t))},_keyboardHandler(t){const e=t.originalEvent;(m(e.target).is(this._$content)||!this.option("ignoreChildEvents"))&&this.callBase(...arguments)},_isVisible(){return this.option("visible")},_visibilityChanged(t){t?this.option("visible")&&this._renderVisibilityAnimate(t):this._renderVisibilityAnimate(t)},_dimensionChanged(){this._renderGeometry()},_clean(){const t=this.option();!this._contentAlreadyRendered&&!t.isRenovated&&this.$content().empty(),this._renderVisibility(!1),this._stopShowTimer(),this._cleanFocusState()},_stopShowTimer(){this._asyncShowTimeout&&clearTimeout(this._asyncShowTimeout),this._asyncShowTimeout=null},_dispose(){Tt.stop(this._$content,!1),clearTimeout(this._deferShowTimer),this._toggleViewPortSubscription(!1),this._toggleSubscriptions(!1),this._updateZIndexStackPosition(!1),this._toggleTabTerminator(!1),this._actions=null,this._parentsScrollSubscriptionInfo=null,this.callBase(),this._toggleSafariScrolling(),this.option("visible")&&d0(this._zIndex),this._$wrapper.remove(),this._$content.remove()},_toggleRTLDirection(t){this._$content.toggleClass("dx-rtl",t)},_optionChanged(t){const{value:e,name:n}=t;if(this._getActionsList().includes(n)){this._initActions();return}switch(n){case"animation":case"closeOnOutsideClick":case"hideOnOutsideClick":case"propagateOutsideClick":break;case"shading":this._toggleShading(this.option("visible")),this._toggleSafariScrolling();break;case"shadingColor":this._toggleShading(this.option("visible"));break;case"width":case"height":case"minWidth":case"maxWidth":case"minHeight":case"maxHeight":this._renderGeometry();break;case"position":this._positionController.updatePosition(this.option("position")),this._positionController.restorePositionOnNextRender(!0),this._renderGeometry(),this._toggleSafariScrolling();break;case"visible":this._renderVisibilityAnimate(e).done(()=>{var i;return(i=this._animateDeferred)===null||i===void 0?void 0:i.resolveWith(this)}).fail(()=>{var i;return(i=this._animateDeferred)===null||i===void 0?void 0:i.reject()});break;case"container":this._positionController.updateContainer(e),this._invalidate(),this._toggleSafariScrolling();break;case"visualContainer":this._positionController.updateVisualContainer(e),this._renderWrapper(),this._toggleSafariScrolling();break;case"innerOverlay":this._initInnerOverlayClass();break;case"deferRendering":case"contentTemplate":this._contentAlreadyRendered=!1,this._clean(),this._invalidate();break;case"hideTopOverlayHandler":this._toggleHideTopOverlayCallback(!1),this._initHideTopOverlayHandler(e),this._toggleHideTopOverlayCallback(this.option("visible"));break;case"hideOnParentScroll":case"_hideOnParentScrollTarget":this._toggleHideOnParentsScrollSubscription(this.option("visible"));break;case"rtlEnabled":this._contentAlreadyRendered=!1,this.callBase(t);break;case"_fixWrapperPosition":this._positionController.fixWrapperPosition=e;break;case"wrapperAttr":this._renderWrapperAttributes();break;case"restorePosition":this._positionController.restorePosition=e;break;case"preventScrollEvents":this._logDeprecatedPreventScrollEventsInfo(),this._toggleWrapperScrollEventsSubscription(e);break;default:this.callBase(t)}},toggle(t){t=t===void 0?!this.option("visible"):t;const e=j();if(t===this.option("visible"))return e.resolveWith(this,[t]).promise();const n=j();return this._animateDeferred=n,this.option("visible",t),n.promise().done(()=>{delete this._animateDeferred,e.resolveWith(this,[this.option("visible")])}).fail(()=>{delete this._animateDeferred,e.reject()}),e.promise()},$content(){return this._$content},show(){return this.toggle(!0)},hide(){return this.toggle(!1)},content(){return se(this._$content)},repaint(){this._contentAlreadyRendered?(this._positionController.restorePositionOnNextRender(!0),this._renderGeometry({forceStopAnimation:!0}),Ji(this._$content)):this.callBase()}});Dl.baseZIndex=t=>J8(t);re("dxOverlay",Dl);const M_="dxResizable",n7=K(uS,M_),i7=K(O_,M_),s7=K(dS,M_),r7={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},fS=us.inherit({_getDefaultOptions(){return T(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup(){this.callBase(),this._renderHandles()},_render(){this.callBase(),this._renderActions()},_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles(){this._handles=[];const t=this.option("handles");if(t==="none"||!t)return;const e=t==="all"?["top","bottom","left","right"]:t.split(" "),n={};N(e,(i,s)=>{n[s]=!0,this._renderHandle(s)}),n.bottom&&n.right&&this._renderHandle("corner-bottom-right"),n.bottom&&n.left&&this._renderHandle("corner-bottom-left"),n.top&&n.right&&this._renderHandle("corner-top-right"),n.top&&n.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()},_renderHandle(t){const e=m("<div>").addClass("dx-resizable-handle").addClass(`dx-resizable-handle-${t}`).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers(){if(this.option("disabled"))return;const t={};t[n7]=this._dragStartHandler.bind(this),t[i7]=this._dragHandler.bind(this),t[s7]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{b.on(e,t,{direction:"both",immediate:!0})})},_detachEventHandlers(){this._handles.forEach(t=>{b.off(t)})},_toggleEventHandlers(t){t?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize(){const t=this.$element();return t.css("boxSizing")==="border-box"?{width:et(t),height:tt(t)}:{width:me(t),height:Re(t)}},_dragStartHandler(t){const e=this.$element();if(e.is(".dx-state-disabled, .dx-state-disabled *")){t.cancel=!0;return}this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(t),this._elementLocation=Gn(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(t),this._resizeStartAction({event:t,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),t.targetElements=null},_toggleResizingClass(t){this.$element().toggleClass("dx-resizable-resizing",t)},_renderDragOffsets(t){const e=this._getArea();if(!e)return;const n=m(t.target).closest(".dx-resizable-handle"),i=et(n),s=tt(n),r=n.offset(),o=e.offset,a=this._getAreaScrollOffset();t.maxLeftOffset=this._leftMaxOffset=r.left-o.left-a.scrollX,t.maxRightOffset=this._rightMaxOffset=o.left+e.width-r.left-i+a.scrollX,t.maxTopOffset=this._topMaxOffset=r.top-o.top-a.scrollY,t.maxBottomOffset=this._bottomMaxOffset=o.top+e.height-r.top-s+a.scrollY},_getBorderWidth(t,e){if(bt(t.get(0)))return 0;const n=t.css(r7[e]);return parseInt(n)||0},_proportionate(t,e){const n=this._elementSize,i=t==="x"?n.width/n.height:n.height/n.width;return e*i},_getProportionalDelta(t){let{x:e,y:n}=t;const i=this._proportionate("y",e);if(i>=n)return{x:e,y:i};const s=this._proportionate("x",n);return s>=e?{x:s,y:n}:{x:0,y:0}},_getDirectionName(t){const e=this._movingSides;return t==="x"?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea(t,e){const n=this._getDirectionName(t);return Math.min(e,this[`_${n}MaxOffset`]??1/0)},_fitDeltaProportionally(t){let e=L({},t);const n=this._elementSize,{minWidth:i,minHeight:s,maxWidth:r,maxHeight:o}=this.option(),a=()=>n.width+e.x,l=()=>n.height+e.y,c=p=>e[p]===this._fitIntoArea(p,e[p]),u=()=>Or(a(),i,r)&&c("x"),d=()=>Or(l(),s,o)&&c("y");if(!u()){const p=this._fitIntoArea("x",pn(a(),i,r)-n.width);e={x:p,y:this._proportionate("y",p)}}if(!d()){const p=this._fitIntoArea("y",pn(l(),s,o)-n.height);e={x:this._proportionate("x",p),y:p}}return u()&&d()?e:{x:0,y:0}},_fitDelta(t){let{x:e,y:n}=t;const i=this._elementSize,{minWidth:s,minHeight:r,maxWidth:o,maxHeight:a}=this.option();return{x:pn(i.width+e,s,o)-i.width,y:pn(i.height+n,r,a)-i.height}},_getDeltaByOffset(t){const e=this._movingSides,n=this._isCornerHandler(e)&&this.option("keepAspectRatio");let i={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)};if(n){const s=this._getProportionalDelta(i);i=this._fitDeltaProportionally(s)}else{const s=this._fitDelta(i);i=this._roundByStep(s)}return i},_updatePosition(t,e){let{width:n,height:i}=e;const s=this._elementLocation,r=this._movingSides,o=this.$element(),a=this._getElementSize(),l=t.y*(r.top?-1:1)-((a.height||i)-i),c=t.x*(r.left?-1:1)-((a.width||n)-n);Ft(o,{top:s.top+(r.top?l:0),left:s.left+(r.left?c:0)})},_dragHandler(t){const e=this._getOffset(t),n=this._getDeltaByOffset(e),i=this._updateDimensions(n);this._updatePosition(n,i),this._triggerResizeAction(t,i)},_updateDimensions(t){const e=c=>c.substring(c.length-2)==="px",n=this.option("stepPrecision")==="strict",i=this._elementSize,s=i.width+t.x,r=i.height+t.y,o=this.$element().get(0).style,a=t.x||n||e(o.width),l=t.y||n||e(o.height);return a&&this.option({width:s}),l&&this.option({height:r}),{width:a?s:i.width,height:l?r:i.height}},_triggerResizeAction(t,e){let{width:n,height:i}=e;this._resizeAction({event:t,width:this.option("width")||n,height:this.option("height")||i,handles:this._movingSides}),Ji(this.$element())},_isCornerHandler:t=>Object.values(t).reduce((e,n)=>e^n,0)===0,_getOffset(t){const{offset:e}=t,n=this._movingSides;return!n.left&&!n.right&&(e.x=0),!n.top&&!n.bottom&&(e.y=0),e},_roundByStep(t){return this.option("stepPrecision")==="strict"?this._roundStrict(t):this._roundNotStrict(t)},_getSteps(){return dw(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict(t){const e=this._getSteps();return{x:t.x-t.x%e.h,y:t.y-t.y%e.v}},_roundStrict(t){const e=this._movingSides,n={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)},i=this._getSteps(),s=this._elementLocation,r=this._elementSize,o=e.left?s.left:s.left+r.width,a=e.top?s.top:s.top+r.height,l=(o+n.x)%i.h,c=(a+n.y)%i.v,u=Math.sign||(C=>(C=+C,C===0||isNaN(C)?C:C>0?1:-1)),d=(C,x)=>(1+.2*u(x))%1*C,p=(C,x)=>Math.abs(C)<.2*x;let f=n.x-l,g=n.y-c;l>d(i.h,n.x)&&(f+=i.h),c>d(i.v,n.y)&&(g+=i.v);const y=(e.left||e.right)&&!p(n.x,i.h)?f:0,v=(e.top||e.bottom)&&!p(n.y,i.v)?g:0;return{x:y*(e.left?-1:1),y:v*(e.top?-1:1)}},_getMovingSides(t){const e=m(t.target),n=e.hasClass("dx-resizable-handle-corner-top-left"),i=e.hasClass("dx-resizable-handle-corner-top-right"),s=e.hasClass("dx-resizable-handle-corner-bottom-left"),r=e.hasClass("dx-resizable-handle-corner-bottom-right");return{top:e.hasClass("dx-resizable-handle-top")||n||i,left:e.hasClass("dx-resizable-handle-left")||n||s,bottom:e.hasClass("dx-resizable-handle-bottom")||s||r,right:e.hasClass("dx-resizable-handle-right")||i||r}},_getArea(){let t=this.option("area");return ie(t)&&(t=t.call(this)),Ce(t)?this._getAreaFromObject(t):this._getAreaFromElement(t)},_getAreaScrollOffset(){const t=this.option("area"),e=!ie(t)&&!Ce(t),n={scrollY:0,scrollX:0};if(e){const i=m(t)[0];bt(i)&&(n.scrollX=i.pageXOffset,n.scrollY=i.pageYOffset)}return n},_getAreaFromObject(t){const e={width:t.right-t.left,height:t.bottom-t.top,offset:{left:t.left,top:t.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement(t){const e=m(t);let n;return e.length&&(n={width:SI(e),height:bI(e),offset:T({top:0,left:0},bt(e[0])?{}:e.offset())},this._correctAreaGeometry(n,e)),n},_correctAreaGeometry(t,e){const n=e?this._getBorderWidth(e,"left"):0,i=e?this._getBorderWidth(e,"top"):0;t.offset.left+=n+this._getBorderWidth(this.$element(),"left"),t.offset.top+=i+this._getBorderWidth(this.$element(),"top"),t.width-=et(this.$element())-SI(this.$element()),t.height-=tt(this.$element())-bI(this.$element())},_dragEndHandler(t){const e=this.$element();this._resizeEndAction({event:t,width:et(e),height:tt(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth(t){this.option("width",pn(t,this.option("minWidth"),this.option("maxWidth")))},_renderHeight(t){this.option("height",pn(t,this.option("minHeight"),this.option("maxHeight")))},_optionChanged(t){switch(t.name){case"disabled":this._toggleEventHandlers(!t.value),this.callBase(t);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":ae()&&this._renderWidth(et(this.$element()));break;case"minHeight":case"maxHeight":ae()&&this._renderHeight(tt(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(t)}},_clean(){this.$element().find(".dx-resizable-handle").remove()},_useTemplates:()=>!1});re(M_,fS);class o7{constructor(e){this.init(e)}init(e){let{dragEnabled:n,handle:i,draggableElement:s,positionController:r}=e;this._positionController=r,this._draggableElement=s,this._handle=i,this._dragEnabled=n,this.unsubscribe(),n&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){const e=this._getEventNames();b.on(this._handle,e.startEventName,n=>{this._dragStartHandler(n)}),b.on(this._handle,e.updateEventName,n=>{this._dragUpdateHandler(n)}),b.on(this._handle,e.endEventName,n=>{this._dragEndHandler(n)})}unsubscribe(){const e=this._getEventNames();b.off(this._handle,e.startEventName),b.off(this._handle,e.updateEventName),b.off(this._handle,e.endEventName)}_getEventNames(){const e=K(uS,"overlayDrag"),n=K(O_,"overlayDrag"),i=K(dS,"overlayDrag");return{startEventName:e,updateEventName:n,endEventName:i}}_dragStartHandler(e){const n=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=n.top,e.maxBottomOffset=n.bottom,e.maxLeftOffset=n.left,e.maxRightOffset=n.right}_dragUpdateHandler(e){const n={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(n),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,n,i){if(!this._dragEnabled)return;i.preventDefault(),i.stopPropagation();const s=this._fitOffsetIntoAllowedRange(e,n);this._moveByOffset(s),this._dragEndHandler(i)}_fitOffsetIntoAllowedRange(e,n){const i=this._getAllowedOffsets();return{top:pn(e,-i.top,i.bottom),left:pn(n,-i.left,i.right)}}_getContainerDimensions(){const e=W.getDocument(),n=this._positionController.$dragResizeContainer.get(0);let i=et(n),s=tt(n);return bt(n)&&(s=Math.max(e.body.clientHeight,s),i=Math.max(e.body.clientWidth,i)),{width:i,height:s}}_getContainerPosition(){const e=this._positionController.$dragResizeContainer.get(0);return bt(e)?{top:0,left:0}:bD(e)}_getElementPosition(){return bD(this._draggableElement)}_getInnerDelta(){const e=this._getContainerDimensions(),n=this._getElementDimensions();return{x:e.width-n.width,y:e.height-n.height}}_getOuterDelta(){const{width:e,height:n}=this._getElementDimensions(),{outsideDragFactor:i}=this._positionController;return{x:e*i,y:n*i}}_getFullDelta(){const e=this._getInnerDelta(),n=this._getOuterDelta();return{x:e.x+n.x,y:e.y+n.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){const e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};const i=this._getElementPosition(),s=this._getContainerPosition(),r=this._getOuterDelta();return{top:i.top-s.top+r.y,bottom:-i.top+s.top+e.y,left:i.left-s.left+r.x,right:-i.left+s.left+e.x}}_moveByOffset(e){const n=Gn(this._draggableElement),i={left:n.left+e.left,top:n.top+e.top};Ft(this._draggableElement,i)}}const a7={setOverflow:B,restoreOverflow:B},l7=()=>{if(!ae())return a7;const t=pe(),{documentElement:e}=W.getDocument(),n=W.getBody(),i=X.real().platform==="ios",s={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:i?()=>{if(M(s.position)||n.style.position==="fixed")return;const{scrollY:r,scrollX:o}=t;s.position=n.style.position,s.top=n.style.top,s.left=n.style.left,n.style.setProperty("position","fixed"),n.style.setProperty("top",-r+"px"),n.style.setProperty("left",-o+"px")}:()=>{(()=>{const r=t.innerWidth-e.clientWidth;if(s.paddingRight||r<=0)return;const o=t.getComputedStyle(n).getPropertyValue("padding-right"),a=parseInt(o,10);s.paddingRight=a,n.style.setProperty("padding-right",`${a+r}px`)})(),!(s.overflow||n.style.overflow==="hidden")&&(s.overflow=n.style.overflow,s.overflowX=n.style.overflowX,s.overflowY=n.style.overflowY,n.style.setProperty("overflow","hidden"))},restoreOverflow:i?()=>{if(!M(s.position))return;const r=-parseInt(n.style.top,10),o=-parseInt(n.style.left,10);["position","top","left"].forEach(a=>{s[a]?n.style.setProperty(a,s[a]):n.style.removeProperty(a)}),t.scrollTo(o,r),s.position=null}:()=>{M(s.paddingRight)&&(s.paddingRight?n.style.setProperty("padding-right",`${s.paddingRight}px`):n.style.removeProperty("padding-right"),s.paddingRight=null),["overflow","overflowX","overflowY"].forEach(r=>{if(!M(s[r]))return;const o=r.replace(/(X)|(Y)/,a=>`-${a.toLowerCase()}`);s[r]?n.style.setProperty(o,s[r]):n.style.removeProperty(o),s[r]=null})}}},c7=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],Fv=pe();class u7 extends pS{constructor(e){let{fullScreen:n,forceApplyBindings:i,dragOutsideBoundary:s,dragAndResizeArea:r,outsideDragFactor:o}=e,a=Mt(e,c7);super(a),this._props=L({},this._props,{fullScreen:n,forceApplyBindings:i,dragOutsideBoundary:s,dragAndResizeArea:r,outsideDragFactor:o}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer()}set outsideDragFactor(e){this._props.outsideDragFactor=e}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){if(this._props.fullScreen)Ft(this._$content,{top:0,left:0}),this.detectVisualPositionChange();else{var e,n;(e=(n=this._props).forceApplyBindings)===null||e===void 0||e.call(n),super.positionContent()}}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?m(Fv):this._props.dragAndResizeArea?m(this._props.dragAndResizeArea):kV().get(0)||this._props.container?this._$markupContainer:m(Fv)}_getVisualContainer(){return this._props.fullScreen?m(Fv):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}const d7=pe(),hk=["cancel","clear","done"],h7=is.safari&&CL(is.version,[11])<0,oo={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},p7=t=>{const e=X.current(),{platform:n}=e;let i="bottom",s="before";if(n==="ios")switch(t){case"cancel":i="top";break;case"clear":i="top",s="after";break;case"done":s="after"}else if(n==="android")switch(t){case"cancel":case"done":s="after"}return{toolbar:i,location:s}},xl=Dl.inherit({_supportedKeys(){return T(this.callBase(),{upArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveUp(t)},downArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveDown(t)},leftArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveLeft(t)},rightArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveRight(t)}})},_getDefaultOptions(){return T(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:t=>X.real().deviceType==="desktop"&&t.platform==="generic",options:{dragEnabled:!0}},{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>ii(),options:{useFlatToolbarButtons:!0}},{device:()=>Un(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init(){const t=this.option("_wrapperClassExternal"),e=t?`dx-popup-wrapper ${t}`:"dx-popup-wrapper";this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass("dx-popup"),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner(m("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render(){const t=this.option("fullScreen");this._toggleFullScreenClass(t),this.callBase()},_createBodyOverflowManager(){this._bodyOverflowManager=l7()},_toggleFullScreenClass(t){this.$overlayContent().toggleClass("dx-popup-fullscreen",t).toggleClass("dx-popup-normal",!t)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Rr,bottom:new Rr})},_getActionsList(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler(t){this._shouldSkipContentResize(t)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions(){const t=this.option("animation");return["to","from"].some(e=>{var n;const i=t==null||(n=t.show)===null||n===void 0?void 0:n[e];return ue(i)&&("width"in i||"height"in i)})},_updateResizeCallbackSkipCondition(){const t=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>t&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize(t){if(!this.option("useResizeObserver"))return;const e=this._$content.get(0);t?Ka.observe(e,n=>{this._contentResizeHandler(n)}):Ka.unobserve(e)},_areContentDimensionsRendered(t){var e,n,i;const s=(e=t.contentBoxSize)===null||e===void 0?void 0:e[0];if(s){var r,o;return parseInt(s.inlineSize,10)===((r=this._renderedDimensions)===null||r===void 0?void 0:r.width)&&parseInt(s.blockSize,10)===((o=this._renderedDimensions)===null||o===void 0?void 0:o.height)}const{contentRect:a}=t;return parseInt(a.width,10)===((n=this._renderedDimensions)===null||n===void 0?void 0:n.width)&&parseInt(a.height,10)===((i=this._renderedDimensions)===null||i===void 0?void 0:i.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle(){const t=this._getToolbarItems("top"),{title:e,showTitle:n}=this.option();if(n&&e&&t.unshift({location:X.current().ios?"center":"before",text:e}),n||t.length>0){this._$title&&this._$title.remove();const i=m("<div>").addClass("dx-popup-title").insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",t,i).addClass("dx-popup-title"),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach();this._toggleAriaLabel()},_toggleAriaLabel(){var t;const{title:e,showTitle:n}=this.option(),s=n&&!!e?new Et:null;(t=this._$title)===null||t===void 0||t.find(".dx-toolbar-label").eq(0).attr("id",s),this.$overlayContent().attr("aria-labelledby",s)},_renderTemplateByType(t,e,n,i){const{rtlEnabled:s,useDefaultToolbarButtons:r,useFlatToolbarButtons:o,disabled:a}=this.option(),l=this._getTemplateByOption(t);if(l instanceof Rr){const d=T({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),p=T(i,{items:e,rtlEnabled:s,useDefaultButtons:r,useFlatButtons:o,disabled:a,integrationOptions:d});this._getTemplate("dx-polymorph-widget").render({container:n,model:{widget:this._getToolbarName(),options:p}});const f=n.children("div");return n.replaceWith(f),f}const u=m(l.render({container:se(n)}));return u.hasClass("dx-template-wrapper")&&(n.replaceWith(u),n=u),n},_getToolbarName:()=>"dxToolbarBase",_renderVisibilityAnimate(t){return this.callBase(t)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction(t){this._getTitleRenderAction()({titleElement:se(t)})},_getTitleRenderAction(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer(){return(t,e,n)=>{const i=m("<div>").addClass("dx-closebutton");this._createComponent(i,Kn,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),m(n).append(i)}},_getToolbarItems(t){const e=this.option("toolbarItems"),n=[];this._toolbarItemClasses=[];const i=X.current().platform;let s=0;return N(e,(r,o)=>{const a=M(o.shortcut),l=a?p7(o.shortcut):o;if(a&&i==="ios"&&s<2&&(l.toolbar="top",s++),l.toolbar=o.toolbar||l.toolbar||"top",l&&l.toolbar===t){a&&T(l,{location:o.location},this._getToolbarItemByAlias(o));const c=i==="generic";o.shortcut==="done"&&c||o.shortcut==="cancel"&&!c?n.unshift(l):n.push(l)}}),t==="top"&&this._hasCloseButton()&&n.push(this._getCloseButton()),n},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:t=>t.toLowerCase()==="done"?"OK":Uc(t,!0),_getToolbarButtonStylingMode(t){return qn()?t==="done"?"contained":"outlined":this.option("useFlatToolbarButtons")?"text":"contained"},_getToolbarButtonType(t){return qn()&&t==="done"||this.option("useDefaultToolbarButtons")?"default":"normal"},_getToolbarItemByAlias(t){const e=this,n=t.shortcut;if(!hk.includes(n))return!1;const i=T({text:q.format(this._getLocalizationKey(n)),onClick:this._createToolbarItemAction(t.onClick),integrationOptions:{},type:this._getToolbarButtonType(n),stylingMode:this._getToolbarButtonStylingMode(n)},t.options||{}),s=`dx-popup-${n}`;return this._toolbarItemClasses.push(s),{template(r,o,a){const l=m("<div>").addClass(s).appendTo(a);e._createComponent(l,Kn,i)}}},_createToolbarItemAction(t){return this._createAction(t,{afterExecute(e){e.component.hide()}})},_renderBottom(){const t=this._getToolbarItems("bottom");if(t.length){this._$bottom&&this._$bottom.remove();const e=m("<div>").addClass("dx-popup-bottom").insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",t,e,{compactMode:!0}).addClass("dx-popup-bottom"),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState(t){this.callBase(...arguments),this.$content().toggleClass("dx-state-disabled",!!t)},_toggleClasses(){N(hk,(e,n)=>{const i=`dx-popup-${n}`;this._toolbarItemClasses.includes(i)?(this.$wrapper().addClass(`${i}-visible`),this._$bottom.addClass(i)):(this.$wrapper().removeClass(`${i}-visible`),this._$bottom.removeClass(i))})},_toggleFocusClass(t,e){if(this.callBase(t,e),t&&!e7(this._zIndex)){const n=w$(this._zIndexInitValue());d0(this._zIndex),this._zIndex=n,this._$wrapper.css("zIndex",n),this._$content.css("zIndex",n)}},_toggleContentScrollClass(){const t=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",t)},_getPositionControllerConfig(){const{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:n,dragAndResizeArea:i,outsideDragFactor:s}=this.option();return T({},this.callBase(),{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:n,dragAndResizeArea:i,outsideDragFactor:s})},_initPositionController(){this._positionController=new u7(this._getPositionControllerConfig())},_getDragTarget(){return this.topToolbar()},_renderGeometry(t){const{visible:e,useResizeObserver:n}=this.option();if(e&&ae()){const s=this._showAnimationProcessing&&!(t!=null&&t.forceStopAnimation)&&n;this._isAnimationPaused=s||void 0,this._stopAnimation(),t!=null&&t.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(t==null?void 0:t.isDimensionChange),s&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt(me(this._$content),10),height:parseInt(Re(this._$content),10)})},_renderGeometryImpl(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight(){this._getOptionValue("height")==="auto"&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag(){const t=this._getDragTarget(),e=this.option("dragEnabled");if(!t)return;const n={dragEnabled:e,handle:t.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(n):this._drag=new o7(n),this.$overlayContent().toggleClass("dx-popup-draggable",e)},_renderResize(){this._resizable=this._createComponent(this._$content,fS,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:t=>{this._resizeEndHandler(t),this._observeContentResize(!0)},onResize:t=>{this._setContentHeight(),this._actions.onResize(t)},onResizeStart:t=>{this._observeContentResize(!1),this._actions.onResizeStart(t)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler(t){const e=this._resizable.option("width"),n=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),n&&this._setOptionWithoutOptionChange("height",n),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(t.event),this._actions.onResizeEnd(t)},_setContentHeight(){(this.option("forceApplyBindings")||B)();const t=this.$overlayContent().get(0),e=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(e,t)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:(t,e)=>t===oo.flex?-e:0,_chooseHeightStrategy(t){const e=t.style.width==="auto"||t.style.width==="";let n=oo.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(e||h7?n=oo.inherit:n=oo.flex),n},_getHeightCssStyles(t,e){let n={};const i=this._getOptionValue("maxHeight",e),s=this._getOptionValue("minHeight",e),r=this._splitPopupHeight(),o=r.header+r.footer+r.contentVerticalOffsets+r.popupVerticalOffsets+this._heightStrategyChangeOffset(t,r.popupVerticalPaddings);if(t===oo.static){if(!this._isAutoHeight()||i||s){const l=(this.option("fullScreen")?Math.min(ke(e).height,pe().innerHeight):ke(e).height)-o;n={height:Math.max(0,l),minHeight:"auto",maxHeight:"auto"}}}else{const a=m(this._positionController.$visualContainer).get(0),l=FU(i,-o,a);n={height:"auto",minHeight:HU(s,-o,a),maxHeight:l}}return n},_setHeightClasses(t,e){let n="";for(const i in oo)oo[i]!==e&&(n+=` ${oo[i]}`);t.removeClass(n).addClass(e)},_isAutoHeight(){return this.$overlayContent().get(0).style.height==="auto"},_splitPopupHeight(){const t=this.topToolbar(),e=this.bottomToolbar();return{header:wI(t&&t.get(0)),footer:wI(e&&e.get(0)),contentVerticalOffsets:Ac(this.$overlayContent().get(0),!0),popupVerticalOffsets:Ac(this.$content().get(0),!0),popupVerticalPaddings:Ac(this.$content().get(0),!1)}},_isAllWindowCovered(){return this.callBase()||this.option("fullScreen")},_renderDimensions(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),ae()&&this._renderFullscreenWidthClass()},_dimensionChanged(){this._renderGeometry({isDimensionChange:!0})},_clean(){this.callBase(),this._observeContentResize(!1)},_dispose(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",et(this.$overlayContent())===me(d7))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll(t){if(!this._bodyOverflowManager)return;const{setOverflow:e,restoreOverflow:n}=this._bodyOverflowManager;t?n():e()},refreshPosition(){this._renderPosition()},_optionChanged(t){var e;const{value:n,name:i}=t;switch(i){case"disabled":this.callBase(t),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(n);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),Ji(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),Ji(this.$overlayContent());break;case"container":if(this.callBase(t),this.option("resizeEnabled")){var s;(s=this._resizable)===null||s===void 0||s.option("area",this._positionController.$dragResizeContainer)}break;case"width":case"height":this.callBase(t),(e=this._resizable)===null||e===void 0||e.option(i,n);break;case"onTitleRendered":this._createTitleRenderAction(n);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":{const r=!t.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),r&&(this._renderGeometry(),Ji(this.$overlayContent()));break}case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=n,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=n,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=n;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),Ji(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=n,this._toggleFullScreenClass(n),this._toggleSafariScrolling(),this._renderGeometry(),Ji(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(t),this._toggleContentScrollClass();break;default:this.callBase(t)}},bottomToolbar(){return this._$bottom},topToolbar(){return this._$title},$content(){return this._$popupContent},content(){return se(this.$content())},$overlayContent(){return this._$content},getFocusableElements(){return this.$wrapper().find("[tabindex]").filter((t,e)=>e.getAttribute("tabindex")>=0)}});re("dxPopup",xl);const pf=pe(),f7={text:"OK",onClick:()=>!0},m7=function(t){const e=j();t=t||{};const n=m("<div>").addClass("dx-dialog").appendTo(tr()),i="message"in t,s="messageHtml"in t;i&&it.log("W1013");const r=String(s?t.messageHtml:t.message),o=t.title?null:new Et,a=m("<div>").addClass("dx-dialog-message").html(r).attr("id",o),l=[],c=new xl(n,T({title:t.title??"",showTitle:rt(t.showTitle,!0),dragEnabled:rt(t.dragEnabled,!0),height:"auto",width:t.width,showCloseButton:t.showCloseButton||!1,ignoreChildEvents:!1,container:n,visualContainer:pf,dragAndResizeArea:pf,onContentReady(p){p.component.$content().addClass("dx-dialog-content").append(a),o&&p.component.$overlayContent().attr("aria-labelledby",o)},onShowing(p){p.component.bottomToolbar().addClass("dx-dialog-buttons").find(".dx-button").addClass("dx-dialog-button"),Wh()},onShown(p){const f=p.component.bottomToolbar().find(".dx-button").first();b.trigger(f,"focus")},onHiding(){e.reject()},onHidden(p){let{element:f}=p;m(f).remove()},animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:Me().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},t.popupOptions));(t.buttons||[f7]).forEach(p=>{const f=new Vo(p.onClick,{context:c});l.push({toolbar:"bottom",location:X.current().android?"after":"center",widget:"dxButton",options:L({},p,{onClick(){const g=f.execute(...arguments);d(g)}})})}),c.option("toolbarItems",l),c.$wrapper().addClass("dx-dialog-wrapper"),t.position&&c.option("position",t.position),c.$wrapper().addClass("dx-dialog-root");function d(p){e.resolve(p),c.hide()}return{show:function(){if(X.real().deviceType==="phone"){const f=Re(pf)>me(pf)?"90%":"60%";c.option({width:f})}return c.show(),e.promise()},hide:d}},g7=(t,e)=>{const n=e.reduce((i,s)=>i+s,t.getTime());return new Date(n)},he={addOffsets:g7};var Gs;(function(t){t.fromSourceToAppointment="toAppointment",t.fromAppointmentToSource="fromAppointment",t.fromSourceToGrid="toGrid",t.fromGridToSource="fromGrid"})(Gs||(Gs={}));const pk=V.dateToMilliseconds;class _7{constructor(e){this.options=e}createDate(e,n){const i=new Date(e);switch(n.path){case Gs.fromSourceToAppointment:return this.getConvertedDate(i,n.appointmentTimeZone,!0,!1);case Gs.fromAppointmentToSource:return this.getConvertedDate(i,n.appointmentTimeZone,!0,!0);case Gs.fromSourceToGrid:return this.getConvertedDate(i,n.appointmentTimeZone,!1,!1);case Gs.fromGridToSource:return this.getConvertedDate(i,n.appointmentTimeZone,!1,!0);default:throw new Error("not specified pathTimeZoneConversion")}}getOffsets(e,n){const i=-this.getClientOffset(e)/V.dateToMilliseconds("hour"),s=this.getCommonOffset(e),r=this.getAppointmentOffset(e,n);return{client:i,common:M(s)?s:i,appointment:typeof r!="number"?i:r}}getConvertedDateByOffsets(e,n,i,s){const r=s?-1:1,o=new Date(e);return he.addOffsets(o,[r*(pk("hour")*i),-r*(pk("hour")*n)])}getOriginStartDateOffsetInMs(e,n,i){return 36e5*this.getOffsetInHours(e,n,i)}getOffsetInHours(e,n,i){const{client:s,appointment:r,common:o}=this.getOffsets(e,n);return n&&i?r-s:n&&!i?r-o:!n&&i?o-s:0}getClientOffset(e){return this.options.getClientOffset(e)}getCommonOffset(e){return this.options.tryGetCommonOffset(e)}getAppointmentOffset(e,n){return this.options.tryGetAppointmentOffset(e,n)}getConvertedDate(e,n,i,s){const r=new Date(e.getTime()),o=this.getOffsets(r,n);return i&&n?this.getConvertedDateByOffsets(e,o.client,o.appointment,s):this.getConvertedDateByOffsets(e,o.client,o.common,s)}}const y7=V.dateToMilliseconds;class v7{constructor(e){this._source=new Date(e.getTime?e.getTime():e)}get source(){return this._source}result(){return this._source}getTimezoneOffset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;const n=this._source.getTimezoneOffset();return e==="minute"?n*y7("minute"):n}getTime(){return this._source.getTime()}setTime(e){return this._source.setTime(e),this}addTime(e){return this._source.setTime(this._source.getTime()+e),this}setMinutes(e){return this._source.setMinutes(e),this}addMinutes(e){return this._source.setMinutes(this._source.getMinutes()+e),this}subtractMinutes(e){return this._source.setMinutes(this._source.getMinutes()-e),this}}const C7=t=>new v7(t),D7=t=>t.split("|").map(e=>e==="Infinity"?null:1e3*parseInt(e,36)),x7=t=>{const{offsets:e}=t,{offsetIndices:n}=t,{untils:i}=t,s=e.split("|").map(l=>parseInt(l)),r=n.split("").map(l=>parseInt(l)),o=D7(i).map((a=0,l=>a+=l));var a;return{offsetList:s,offsetIndexList:r,dateList:o}};class w7{constructor(){this.map=new Map}tryGet(e){if(!this.map.get(e)){const n=qc.getTimezoneById(e);if(!n)return!1;const i=x7(n);this.map.set(e,i)}return this.map.get(e)}}const Hv=new w7,qc={_tzCache:Hv,getTimeZonesOld:()=>Me().timezones??[],formatOffset(t){const e=Math.floor(t),n=t-e,i=il(t)>=0?"+":"-",s=`0${Math.abs(e)}`.slice(-2),r=n>0?":"+60*n:":00";return i+s+r},formatId:t=>t.split("/").join(" - ").split("_").join(" "),getTimezoneById(t){if(!t)return;const e=this.getTimeZonesOld();for(let n=0;n<e.length;n++)if(e[n].id===t)return e[n]},getTimeZoneOffsetById(t,e){const n=Hv.tryGet(t);return n?this.getUtcOffset(n,e):void 0},getTimeZoneDeclarationTuple(t,e){const n=Hv.tryGet(t);return n?this.getTimeZoneDeclarationTupleCore(n,e):[]},getTimeZoneDeclarationTupleCore(t,e){const{offsetList:n}=t,{offsetIndexList:i}=t,{dateList:s}=t,r=[];for(let o=0;o<s.length;o++){const a=s[o],l=new Date(a).getFullYear();if(l===e){const c=n[i[o+1]];r.push({date:a,offset:-c/60})}if(l>e)break}return r},getUtcOffset(t,e){const{offsetList:n}=t,{offsetIndexList:i}=t,{dateList:s}=t;let o=s.length-1-1;for(;o>=0&&e<s[o];)o--;const a=n[i[o+1]];return-a/60||a}},S$={value:["Etc/GMT+12","Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago","Pacific/Samoa","US/Samoa","Etc/GMT+10","HST","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti","US/Hawaii","Pacific/Marquesas","America/Adak","America/Atka","Etc/GMT+9","Pacific/Gambier","US/Aleutian","America/Anchorage","America/Juneau","America/Metlakatla","America/Nome","America/Sitka","America/Yakutat","Etc/GMT+8","Pacific/Pitcairn","US/Alaska","America/Creston","America/Dawson_Creek","America/Dawson","America/Ensenada","America/Fort_Nelson","America/Hermosillo","America/Los_Angeles","America/Phoenix","America/Santa_Isabel","America/Tijuana","America/Vancouver","America/Whitehorse","Canada/Pacific","Canada/Yukon","Etc/GMT+7","Mexico/BajaNorte","MST","PST8PDT","US/Arizona","US/Pacific","America/Belize","America/Boise","America/Cambridge_Bay","America/Chihuahua","America/Costa_Rica","America/Denver","America/Edmonton","America/El_Salvador","America/Guatemala","America/Inuvik","America/Managua","America/Mazatlan","America/Monterrey","America/Ojinaga","America/Regina","America/Shiprock","America/Swift_Current","America/Tegucigalpa","America/Yellowknife","Canada/Mountain","Canada/Saskatchewan","Chile/EasterIsland","Etc/GMT+6","Mexico/BajaSur","MST7MDT","Navajo","Pacific/Easter","Pacific/Galapagos","US/Mountain","America/Atikokan","America/Bahia_Banderas","America/Bogota","America/Cancun","America/Cayman","America/Chicago","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Indiana/Knox","America/Indiana/Tell_City","America/Jamaica","America/Knox_IN","America/Lima","America/Matamoros","America/Menominee","America/Merida","America/Mexico_City","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Panama","America/Porto_Acre","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Rio_Branco","America/Winnipeg","Brazil/Acre","Canada/Central","CST6CDT","EST","Etc/GMT+5","Jamaica","Mexico/General","US/Central","US/Indiana-Starke","America/Anguilla","America/Antigua","America/Aruba","America/Asuncion","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Campo_Grande","America/Caracas","America/Cuiaba","America/Curacao","America/Detroit","America/Dominica","America/Fort_Wayne","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Havana","America/Indiana/Indianapolis","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Iqaluit","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Louisville","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port_of_Spain","America/Port-au-Prince","America/Porto_Velho","America/Puerto_Rico","America/Santiago","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Thunder_Bay","America/Toronto","America/Tortola","America/Virgin","Brazil/West","Canada/Eastern","Chile/Continental","Cuba","EST5EDT","Etc/GMT+4","US/East-Indiana","US/Eastern","US/Michigan","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/ComodRivadavia","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Bahia","America/Belem","America/Buenos_Aires","America/Catamarca","America/Cayenne","America/Cordoba","America/Fortaleza","America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Jujuy","America/Maceio","America/Mendoza","America/Moncton","America/Montevideo","America/Paramaribo","America/Punta_Arenas","America/Recife","America/Rosario","America/Santarem","America/Sao_Paulo","America/Thule","Antarctica/Palmer","Antarctica/Rothera","Atlantic/Bermuda","Atlantic/Stanley","Brazil/East","Canada/Atlantic","Etc/GMT+3","America/St_Johns","Canada/Newfoundland","America/Godthab","America/Miquelon","America/Noronha","America/Nuuk","Atlantic/South_Georgia","Brazil/DeNoronha","Etc/GMT+2","Atlantic/Cape_Verde","Etc/GMT+1","Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Africa/Timbuktu","America/Danmarkshavn","America/Scoresbysund","Atlantic/Azores","Atlantic/Reykjavik","Atlantic/St_Helena","Etc/GMT-0","Etc/GMT","Etc/GMT+0","Etc/GMT0","Etc/Greenwich","Etc/UCT","Etc/Universal","Etc/UTC","Etc/Zulu","GMT-0","GMT","GMT+0","GMT0","Greenwich","Iceland","UCT","Universal","UTC","Zulu","Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Casablanca","Africa/Douala","Africa/El_Aaiun","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Atlantic/Canary","Atlantic/Faeroe","Atlantic/Faroe","Atlantic/Madeira","Eire","Etc/GMT-1","Europe/Belfast","Europe/Dublin","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Lisbon","Europe/London","GB-Eire","GB","Portugal","WET","Africa/Blantyre","Africa/Bujumbura","Africa/Cairo","Africa/Ceuta","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Khartoum","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Tripoli","Africa/Windhoek","Antarctica/Troll","Arctic/Longyearbyen","Atlantic/Jan_Mayen","CET","Egypt","Etc/GMT-2","Europe/Amsterdam","Europe/Andorra","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Budapest","Europe/Busingen","Europe/Copenhagen","Europe/Gibraltar","Europe/Kaliningrad","Europe/Ljubljana","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Rome","Europe/San_Marino","Europe/Sarajevo","Europe/Skopje","Europe/Stockholm","Europe/Tirane","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Warsaw","Europe/Zagreb","Europe/Zurich","Libya","MET","Poland","Africa/Addis_Ababa","Africa/Asmara","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Asia/Aden","Asia/Amman","Asia/Baghdad","Asia/Bahrain","Asia/Beirut","Asia/Damascus","Asia/Famagusta","Asia/Gaza","Asia/Hebron","Asia/Istanbul","Asia/Jerusalem","Asia/Kuwait","Asia/Nicosia","Asia/Qatar","Asia/Riyadh","Asia/Tel_Aviv","EET","Etc/GMT-3","Europe/Athens","Europe/Bucharest","Europe/Chisinau","Europe/Helsinki","Europe/Istanbul","Europe/Kiev","Europe/Kirov","Europe/Mariehamn","Europe/Minsk","Europe/Moscow","Europe/Nicosia","Europe/Riga","Europe/Simferopol","Europe/Sofia","Europe/Tallinn","Europe/Tiraspol","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte","Israel","Turkey","W-SU","Asia/Baku","Asia/Dubai","Asia/Muscat","Asia/Tbilisi","Asia/Yerevan","Etc/GMT-4","Europe/Astrakhan","Europe/Samara","Europe/Saratov","Europe/Ulyanovsk","Europe/Volgograd","Indian/Mahe","Indian/Mauritius","Indian/Reunion","Asia/Kabul","Asia/Tehran","Iran","Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Ashkhabad","Asia/Atyrau","Asia/Dushanbe","Asia/Karachi","Asia/Oral","Asia/Qyzylorda","Asia/Samarkand","Asia/Tashkent","Asia/Yekaterinburg","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives","Asia/Calcutta","Asia/Colombo","Asia/Kolkata","Asia/Kathmandu","Asia/Katmandu","Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Dacca","Asia/Dhaka","Asia/Kashgar","Asia/Omsk","Asia/Qostanay","Asia/Thimbu","Asia/Thimphu","Asia/Urumqi","Etc/GMT-6","Indian/Chagos","Asia/Rangoon","Asia/Yangon","Indian/Cocos","Antarctica/Davis","Asia/Bangkok","Asia/Barnaul","Asia/Ho_Chi_Minh","Asia/Hovd","Asia/Jakarta","Asia/Krasnoyarsk","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Tomsk","Asia/Vientiane","Etc/GMT-7","Indian/Christmas","Antarctica/Casey","Asia/Brunei","Asia/Choibalsan","Asia/Chongqing","Asia/Chungking","Asia/Harbin","Asia/Hong_Kong","Asia/Irkutsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Macao","Asia/Macau","Asia/Makassar","Asia/Manila","Asia/Shanghai","Asia/Singapore","Asia/Taipei","Asia/Ujung_Pandang","Asia/Ulaanbaatar","Asia/Ulan_Bator","Australia/Perth","Australia/West","Etc/GMT-8","Hongkong","PRC","ROC","Singapore","Australia/Eucla","Asia/Chita","Asia/Dili","Asia/Jayapura","Asia/Khandyga","Asia/Pyongyang","Asia/Seoul","Asia/Tokyo","Asia/Yakutsk","Etc/GMT-9","Japan","Pacific/Palau","ROK","Australia/Adelaide","Australia/Broken_Hill","Australia/Darwin","Australia/North","Australia/South","Australia/Yancowinna","Antarctica/DumontDUrville","Asia/Ust-Nera","Asia/Vladivostok","Australia/ACT","Australia/Brisbane","Australia/Canberra","Australia/Currie","Australia/Hobart","Australia/Lindeman","Australia/Melbourne","Australia/NSW","Australia/Queensland","Australia/Sydney","Australia/Tasmania","Australia/Victoria","Etc/GMT-10","Pacific/Chuuk","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk","Pacific/Yap","Australia/LHI","Australia/Lord_Howe","Antarctica/Macquarie","Asia/Magadan","Asia/Sakhalin","Asia/Srednekolymsk","Etc/GMT-11","Pacific/Bougainville","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Norfolk","Pacific/Noumea","Pacific/Pohnpei","Pacific/Ponape","Antarctica/McMurdo","Antarctica/South_Pole","Asia/Anadyr","Asia/Kamchatka","Etc/GMT-12","Kwajalein","NZ","Pacific/Auckland","Pacific/Fiji","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis","NZ-CHAT","Pacific/Chatham","Etc/GMT-13","Pacific/Apia","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu","Etc/GMT-14","Pacific/Kiritimati"]},lp=V.dateToMilliseconds,lm="GMT",S7=/^GMT(?:[+-]\d{2}:\d{2})?$/,b7=t=>t?new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())):null,E7=t=>{const e=C7(t),n=e.getTimezoneOffset();return e.addTime(e.getTimezoneOffset("minute")),e.subtractMinutes(n-e.getTimezoneOffset()),e.source},T7=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return S$.value.map(e=>({offset:pg(e,t),title:O7(e,t),id:e}))},b$=t=>new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes())),E$=(t,e,n,i)=>hg(n,i)-hg(t,e),I7=(t,e,n,i)=>E$(t,e,n,i)*lp("minute"),hg=(t,e)=>new Date(t).getTimezoneOffset()-new Date(e).getTimezoneOffset(),p0=(t,e)=>hg(t,e)*lp("minute"),T$=t=>t instanceof Date&&!isNaN(t.valueOf()),A7=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date;if(qc.getTimeZonesOld().length===0)return;const i=b$(e);return qc.getTimeZoneOffsetById(t,i.getTime())},k7=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date;const n=I$(t,e);if(n===void 0)return;if(n===lm)return 0;const i=n.substring(3,4)==="-",s=n.substring(4,6),r=n.substring(7,9),o=parseInt(s,10)+parseInt(r,10)/60;return i?-o:o},pg=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date;if(!t)return;if(!S$.value.includes(t)){Te.log("W0009",t);return}if(!T$(e))return;let i=A7(t,e);return i===void 0&&(i=k7(t,e)),i},I$=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n="";try{var i;n=((i=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).formatToParts(e).find(o=>{let{type:a}=o;return a==="timeZoneName"}))===null||i===void 0?void 0:i.value)??""}catch{Te.log("W0009",t);return}if(!S7.test(n)){Te.log("W0009",t);return}return n},R7=t=>t===lm?`${t} +00:00`:t.replace(lm,`${lm} `),O7=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date;if(!T$(e))return"";const n=t.replace(/\//g," - ").replace(/_/g," "),i=I$(t,e);return i===void 0?void 0:`(${R7(i)}) ${n}`},fg=(t,e,n)=>{const i=pg(n,t),s=pg(n,e);return i===void 0||s===void 0?0:i-s},P7=(t,e,n,i,s)=>{const r=fg(t,e,i),o=fg(t,e,s),a=r-o;return new Date(n.getTime()-a*lp("hour"))},M7=function(t,e,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r=(t.getTimezoneOffset()-e.getTimezoneOffset())/60;return i?r=fg(e,t,i):n&&(r=fg(e,t,n)),new Date(t.getTime()+(s?-1:1)*r*lp("hour"))},A$=t=>{const e=new Date(new Date(t).setHours(0,0,0,0)),n=new Date(new Date(t).setHours(23,59,59,0));return e.getTimezoneOffset()-n.getTimezoneOffset()!==0},V7=t=>{const e=new Date(t);if(A$(e)){const n=new Date(e);return new Date(n.setDate(n.getDate()+1))}return e},B7=(t,e)=>(e=new Date(e.getTime()-1),V.sameDate(t,e)),f0=function(){return 6e4*(arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date).getTimezoneOffset()},L7=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date;return f0(t)-f0(e)},$7=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date;return Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone===t?!0:R$(t,e)},k$=()=>{const[t,e]=H7();return t.getTimezoneOffset()!==e.getTimezoneOffset()},qu=t=>-t.getTimezoneOffset()/60,fk=t=>new Date(t-lp("hour")),F7=(t,e)=>{const n=e.getFullYear(),i=qc.getTimeZoneDeclarationTuple(t,n),[s,r]=i;if(i.length<2){const c=qc.getTimeZoneOffsetById(t,e),u=qu(e);return c!==u?!1:!k$()}const a=qu(new Date(s.date)),l=qu(new Date(r.date));return!(a!==s.offset||a===qu(fk(s.date))||l!==r.offset||l===qu(fk(r.date)))},R$=(t,e)=>qc.getTimeZonesOld().filter(s=>s.id===t).length===1?F7(t,e):!1,H7=()=>{const t=new Date(Date.now()),e=new Date,n=new Date;return e.setFullYear(t.getFullYear(),0,1),n.setFullYear(t.getFullYear(),6,1),[e,n]},N7=(t,e)=>{const n=e.reduce((i,s)=>i+s,t.getTime());return new Date(n)},z7=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const s=he.addOffsets(t,n),r=p0(t,s);if(!r)return s;const o=he.addOffsets(s,[-r]);return p0(s,o)?s:o},De={getDaylightOffset:hg,getDaylightOffsetInMs:p0,getTimezoneOffsetChangeInMinutes:E$,getTimezoneOffsetChangeInMs:I7,calculateTimezoneByValue:pg,getCorrectedDateByDaylightOffsets:P7,isSameAppointmentDates:B7,correctRecurrenceExceptionByTimezone:M7,getClientTimezoneOffset:f0,getDiffBetweenClientTimezoneOffsets:L7,createUTCDateWithLocalOffset:b7,createDateFromUTCWithLocalOffset:E7,createUTCDate:b$,isTimezoneChangeInDate:A$,getDateWithoutTimezoneChange:V7,hasDSTInLocalTimeZone:k$,isEqualLocalTimeZone:$7,isEqualLocalTimeZoneByDeclaration:R$,getTimeZones:T7,setOffsetsToDate:N7,addOffsetsWithoutDST:z7},W7=t=>new _7({getClientOffset:e=>De.getClientTimezoneOffset(e),tryGetCommonOffset:e=>De.calculateTimezoneByValue(t,e),tryGetAppointmentOffset:(e,n)=>De.calculateTimezoneByValue(n,e)}),O$=()=>{const t=xi();return{isCompact:v9(t),isMaterial:Un(t),isFluent:qn(t),isMaterialBased:ii(t)}},mk="dx-scheduler-fixed-appointments",G7="dx-scheduler-appointment-reduced",U7="dx-scheduler-appointment-reduced-icon",K7="dx-scheduler-appointment-recurrence",j7="dx-scheduler-appointment-empty",q7="dx-scheduler-all-day-appointment",Y7={head:"dx-scheduler-appointment-head",body:"dx-scheduler-appointment-body",tail:"dx-scheduler-appointment-tail"},Z7={horizontal:"dx-scheduler-appointment-horizontal",vertical:"dx-scheduler-appointment-vertical"},P$="dx-scheduler-appointment-drag-source",Q7="dx-scheduler-appointment",wn={APPOINTMENT_CONTENT_DETAILS:"dx-scheduler-appointment-content-details",RECURRING_ICON:"dx-scheduler-appointment-recurrence-icon",APPOINTMENT_TITLE:"dx-scheduler-appointment-title",APPOINTMENT_DATE:"dx-scheduler-appointment-content-date",ALL_DAY_CONTENT:"dx-scheduler-appointment-content-allday",ITEM:"dx-scheduler-appointment",STRIP:"dx-scheduler-appointment-strip",AGENDA_MARKER:"dx-scheduler-agenda-appointment-marker",AGENDA_RESOURCE_LIST:"dx-scheduler-appointment-resource-list",AGENDA_RESOURCE_LIST_ITEM:"dx-scheduler-appointment-resource-item",AGENDA_RESOURCE_LIST_ITEM_VALUE:"dx-scheduler-appointment-resource-item-value"},X7="dx-scheduler-last-in-date-agenda-appointment",J7="dx-scheduler-appointment-has-resource-color",cm="dx-scheduler-header-panel-current-time-cell",ff="dx-scheduler-virtual-cell",M$="dx-scheduler-time-panel",mS="dx-scheduler-date-table",m0="dx-scheduler-date-table-row",Yc="dx-scheduler-group-row",gS="dx-scheduler-group-header-content",um="dx-scheduler-last-group-cell",dm="dx-scheduler-first-group-cell",hm=["dx-scheduler-group-column-count-one","dx-scheduler-group-column-count-two","dx-scheduler-group-column-count-three"],g0="dxListItemData",eZ="dx-list-item",Dr="dxAppointmentSettings",gk="horizontal",_t={DAY:"day",WEEK:"week",WORK_WEEK:"workWeek",MONTH:"month",TIMELINE_DAY:"timelineDay",TIMELINE_WEEK:"timelineWeek",TIMELINE_WORK_WEEK:"timelineWorkWeek",TIMELINE_MONTH:"timelineMonth",AGENDA:"agenda"},V$="vertical",tZ="horizontal",nZ={timelineDay:!0,timelineWeek:!0,timelineWorkWeek:!0,timelineMonth:!0},iZ=["day","week","workWeek","month","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","agenda"],sZ=V.dateToMilliseconds,rZ=(t,e)=>Math.floor((e.getTime()-t.getTime())/sZ("hour")),_0=(t,e)=>{const n=V.trimTime(t),i=V.trimTime(e);return i.setDate(i.getDate()+1),[n,i]},oZ=t=>{const{renderingStrategy:e}={day:{renderingStrategy:"vertical"},week:{renderingStrategy:"week"},workWeek:{renderingStrategy:"week"},month:{renderingStrategy:"horizontalMonth"},timelineDay:{renderingStrategy:"horizontal"},timelineWeek:{renderingStrategy:"horizontal"},timelineWorkWeek:{renderingStrategy:"horizontal"},timelineMonth:{renderingStrategy:"horizontalMonthLine"},agenda:{renderingStrategy:"agenda"}}[t];return e},Oc=(t,e)=>{const{startDate:n,endDate:i,allDay:s}=t;switch(e){case"hidden":return!1;case"allDay":return s;default:return s?!0:M(i)?rZ(n,i)>=24:!1}},aZ=t=>{const{left:e,top:n,width:i,height:s}=t;return`${e}-${n}-${i}-${s}`},B$=(t,e)=>M(t.find(n=>Bi(n,e))),lZ=(t,e)=>!e.length||e.filter(n=>n!==t).length===0?t:void 0,L$=t=>{switch(t==null?void 0:t.length){case 1:return hm[0];case 2:return hm[1];case 3:return hm[2];default:return}},oa=(t,e)=>{const n=new Date(t);return M(e)&&n.setHours(e,e%1*60,0,0),n},_S=(t,e)=>e-t,$$=(t,e)=>{const n=Math.floor(e);return De.isTimezoneChangeInDate(t)&&n!==t.getHours()?V.dateToMilliseconds("hour"):0},F$=(t,e)=>{let{startViewDate:n,startDayHour:i,cellIndexShift:s,viewOffset:r}=e;const o=he.addOffsets(t,[-r]);if(!De.isTimezoneChangeInDate(o))return t;const l=new Date(new Date(n).setDate(n.getDate()+2)),c=$$(n,i);return he.addOffsets(l,[r,s,-c])},yS=t=>t[t.length-1].length,H$=(t,e)=>t??yS(e),cZ=(t,e,n,i,s)=>{const r=i(t,e,s);return ee.format(r,n)},V_=(t,e)=>e===V$&&!!t.length,Kr=t=>{let e=0;for(let n=0,i=t.length;n<i;n+=1)n?e*=t[n].items.length:e=t[n].items.length;return e},Nv=(t,e)=>{const n=Kr(t)||1;return V_(t,e)?1:n},B_=t=>!!nZ[t],ol=t=>t!==_t.TIMELINE_MONTH&&t!==_t.MONTH,y0=t=>{switch(t){case _t.TIMELINE_DAY:case _t.TIMELINE_WEEK:case _t.TIMELINE_WORK_WEEK:case _t.TIMELINE_MONTH:case _t.MONTH:return!0;default:return!1}},N$=(t,e,n,i)=>i>0?V.dateInRange(t,e,new Date(n.getTime()-1)):V.dateInRange(t,n,e,"date"),z$=(t,e)=>t.getDate()===1&&e>1,L_=(t,e,n,i)=>{if(!t)return new Date(e);let s=V.trimTime(i);const r=s.getTime()<=e.getTime()?1:-1;let o=new Date(s.getTime()+n*r);for(;!N$(e,s,o,r);)s=o,o=new Date(s.getTime()+n*r);return r>0?s:o},W$=(t,e,n)=>V_(t,e)&&n,uZ=t=>t,G$=(t,e,n,i)=>{switch(t){case"month":return 36e5*_S(e,n);case"timelineMonth":return V.dateToMilliseconds("day");default:return 36e5*i}},dZ=(t,e,n)=>e*n+t,U$=t=>t.length,v0=(t,e)=>t??U$(e),hZ=(t,e)=>{const n=De.getDateWithoutTimezoneChange(t);return n.setHours(e),n},K$=(t,e)=>t&&e,j$=(t,e)=>e&&t?t.toString():"0",q$=(t,e)=>{const n=t??new Date;return(e==null?void 0:e.createDate(n,{path:"toGrid"}))||n},Y$=t=>M(t)?t:ee.firstDayOfWeekIndex(),cp=(t,e)=>e===tZ&&!!t.length,pZ=(t,e,n)=>{const i=cp(t,e);return n&&i},C0=(t,e,n,i)=>{const s=n&&!i.viewType.includes("timeline");let r=0;const o=new Date(t);o.setDate(o.getDate()+1),o.setHours(0,0,0,0);const a=new Date(e);a.setHours(0,0,0,0);const{startDayHour:l,endDayHour:c}=i.getViewOptions(),u=s?24:c-l;for(;o<a;)i.isSkippedDate(o)&&(r+=u),o.setDate(o.getDate()+1);const d=t.getHours(),p=e.getHours()+e.getTime()%36e5/36e5;return i.isSkippedDate(t)&&(s?r+=24:d<l?r+=u:d<c&&(r+=c-d)),i.isSkippedDate(e)&&(s?r+=24:p>c?r+=u:p>l&&(r+=p-l)),r},Z$=t=>{const e=t.getDay();return e===6||e===0},Q$=t=>2*Math.floor(t/7),fZ=(t,e)=>[...new Array(e)].reduce((n,i,s)=>t.map((r,o)=>[...n[o]||[],...r.map((l,c)=>L({},l,{key:`${l.key}_group_by_date_${s}`,isFirstGroupCell:c===0,isLastGroupCell:c===r.length-1}))]),[]),mZ=(t,e,n,i)=>{let s=1,r=t.map(o=>{const a=[],{name:l,items:c,data:u}=o;for(let d=0;d<s;d+=1)a.push(...c.map((p,f)=>{let{id:g,text:y,color:v}=p;return{id:g,text:y,color:v,key:`${d}_${l}_${g}`,resourceName:l,data:u==null?void 0:u[f]}}));return s*=c.length,a});return n&&(r=fZ(r,e)),{groupPanelItems:r,baseColSpan:i}},_k=(t,e)=>Array.from({length:Math.ceil(t/e)},(n,i)=>Math.min(t-e*i,e)),gZ=(t,e)=>{const n=new Date(t);return oa(n,e)},_Z=(t,e,n,i)=>{const s=L_(n,t,i,n);return oa(s,e)},yZ=(t,e,n,i)=>t*i+e,vS=(t,e,n,i)=>{if(!t)return new Date(e);let s=new Date(i);const r=new Date(i),o=s.getTime()<=e.getTime()?1:-1;let a=new Date(new Date(r.setMonth(r.getMonth()+o*n)));for(;!N$(e,s,a,o);)s=new Date(a),o>0&&s.setDate(1),a=new Date(new Date(a.setMonth(a.getMonth()+o*n)));return o>0?s:a},vZ=(t,e)=>z$(t,e)?[ee.getMonthNames("abbreviated")[t.getMonth()],ee.format(t,"day")].join(" "):ee.format(t,"dd"),CZ=(t,e,n,i,s)=>{const r=vS(n,t,i,V.getFirstMonthDate(n)),o=V.getFirstMonthDate(r),a=Y$(s),l=V.getFirstWeekDate(o,a);return oa(l,e)},CS=(t,e)=>{const n=e??{},i=L({},n);return t.forEach(s=>{let{attr:r,value:o}=s;i[r]=o||n[r]}),i},DZ=(t,e)=>{const n=t?`${t}px`:"";return CS([{attr:"width",value:n}],e)},xZ=(t,e)=>{const n=t?`${t}px`:"";return CS([{attr:"height",value:n}],e)},X$=t=>Object.keys(t).filter(e=>!!e&&t[e]).join(" "),wZ=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return X$({"dx-scheduler-first-group-cell":t,"dx-scheduler-last-group-cell":e,[n]:!0})},SZ=(t,e)=>{switch(t){case"day":case"week":case"workWeek":case"month":return e?"dx-scheduler-cell-sizes-horizontal":"";default:return"dx-scheduler-cell-sizes-horizontal"}},bZ=t=>t?"":"dx-scheduler-cell-sizes-vertical",EZ=(t,e,n,i)=>{const s=V.getFirstMonthDate(vS(n,t,i,V.getFirstMonthDate(n)));return oa(s,e)},TZ=(t,e,n)=>{let{startDayHour:i,startViewDate:s,cellCountInDay:r,interval:o,viewOffset:a}=n;return F$(e,{startViewDate:s,startDayHour:i,cellIndexShift:t%r*o,viewOffset:a})},IZ=(t,e)=>{let n=e.find(i=>!!(ue(i)?[i.name,i.type]:[i]).includes(t));return n===void 0&&(iZ.includes(t)?n=t:[n]=e),n},AZ=(t,e,n,i,s,r)=>{if(t%2!==0)return"";const o=F$(e,{startViewDate:n,startDayHour:s,cellIndexShift:Math.round(i)*t,viewOffset:r});return ee.format(o,"shorttime")},kZ=t=>7*V.dateToMilliseconds("day")*t,J$=(t,e)=>t?V.getFirstWeekDate(t,e):void 0,RZ=(t,e,n,i,s)=>{const r=Y$(s),o=L_(n,t,i,J$(n,r)),a=V.getFirstWeekDate(o,r);return oa(a,e)},OZ=(t,e)=>{const n=e??ee.firstDayOfWeekIndex();return V.getFirstWeekDate(t,n)},PZ=(t,e,n,i,s)=>{const r=L_(n,t,i,J$(n,s)),o=V.getFirstWeekDate(r,s);if(Z$(o)){const l=(8-o.getDay())%7;o.setDate(o.getDate()+l)}return oa(o,e)},Be={getField:(t,e,n)=>{if(M(t.getter[e]))return t.getter[e](n)},setField:(t,e,n,i)=>{if(M(t.setter[e]))return t.setter[e](n,i),n}},D0=V.dateToMilliseconds,MZ="yyyyMMddTHHmmss",VZ=(t,e,n,i,s)=>{const r=V.dateTimeFromDecimal(n);return t.getHours()>=r.hours&&t.getMinutes()>=r.minutes||e.getHours()===r.hours&&e.getMinutes()>r.minutes||e.getHours()>r.hours||s||i},BZ=t=>{const{startDate:e,endDate:n,startDayHour:i,endDayHour:s,viewStartDayHour:r,viewEndDayHour:o,allDay:a,severalDays:l,min:c,max:u,checkIntersectViewport:d}=t,p=(24-o+r)*D0("hour"),f=n.getTime()-e.getTime(),g=(p-f)/D0("hour"),y=e.getHours(),v=e.getMinutes();let C;const x=V.dateTimeFromDecimal(s),S=V.dateTimeFromDecimal(i),O=e<u&&n>c;return C=d&&O||y<x.hours||y===x.hours&&v<x.minutes||a&&e<=u||l&&O&&(y<x.hours||60*n.getHours()+n.getMinutes()>60*S.hours),f<p&&y>x.hours&&v>x.minutes&&g<=y-s&&(C=!1),C},DS=t=>!V.sameDate(t.startDate,t.endDate),LZ=(t,e)=>!e||isNaN(e.getTime())||t.getTime()>e.getTime(),$Z=(t,e,n,i)=>{const s=t.getHours(),r=e.getHours();return s<=n&&r<=i&&r>=n||r>=i&&s<=i&&s>=n},FZ=(t,e,n)=>{const{recurrenceException:i}=t;if(i){const s=i.split(",");for(let r=0;r<s.length;r++)s[r]=HZ(s[r],t.startDate,e,n);return s.join()}return i},HZ=(t,e,n,i)=>{t=t.replace(/\s/g,"");const s=l=>n.createDate(l,{path:"toGrid"}),r=je.deserializeDate(t),o=s(e);let a=s(r);return a=De.correctRecurrenceExceptionByTimezone(a,o,i),t=je.serializeDate(a,MZ),t},eF=(t,e,n,i,s)=>{if(LZ(e,n)){const r=Be.getField(s,"allDay",t),o=((a,l)=>a?V.setToDayEnd(new Date(l)):new Date(l.getTime()+i*D0("minute")))(r,e);s.setter.endDate(t,o)}},tF=(t,e)=>{t.sort((n,i)=>{const s=new Date(Be.getField(e,"startDate",n.settings||n)),r=new Date(Be.getField(e,"startDate",i.settings||i));return Math.sign(s.getTime()-r.getTime())})};var x0=["MO","TU","WE","TH","FR","SA","SU"],ei=function(){function t(e,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=n}return t.fromStr=function(e){return new t(x0.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=x0[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}(),Yt=function(t){return t!=null},Fs=function(t){return typeof t=="number"},yk=function(t){return typeof t=="string"&&x0.includes(t)},Ri=Array.isArray,lr=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var n=[],i=t;i<e;i++)n.push(i);return n},Ye=function(t,e){var n=0,i=[];if(Ri(t))for(;n<e;n++)i[n]=[].concat(t);else for(;n<e;n++)i[n]=t;return i},NZ=function(t){return Ri(t)?t:[t]};function $l(t,e,n){n===void 0&&(n=" ");var i=String(t);return e=e>>0,i.length>e?String(i):(e=e-i.length,e>n.length&&(n+=Ye(n,e/n.length)),n.slice(0,e)+String(i))}var zZ=function(t,e,n){var i=t.split(e);return n?i.slice(0,n).concat([i.slice(n).join(e)]):i},Qi=function(t,e){var n=t%e;return n*e<0?n+e:n},zv=function(t,e){return{div:Math.floor(t/e),mod:Qi(t,e)}},Ns=function(t){return!Yt(t)||t.length===0},hn=function(t){return!Ns(t)},gt=function(t,e){return hn(t)&&t.indexOf(e)!==-1},Ba;(function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=1e3*60*60*24,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var n=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((n.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},t.isDate=function(e){return e instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},t.daysBetween=function(e,n){var i=e.getTime()-t.tzOffset(e),s=n.getTime()-t.tzOffset(n),r=i-s;return Math.round(r/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var n=e.getUTCMonth();return n===1&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[n]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,n){var i=new Date(Date.UTC(e,n,1));return[t.getWeekday(i),t.getMonthDays(i)]},t.combine=function(e,n){return n=n||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))},t.clone=function(e){var n=new Date(e.getTime());return n},t.cloneDates=function(e){for(var n=[],i=0;i<e.length;i++)n.push(t.clone(e[i]));return n},t.sort=function(e){e.sort(function(n,i){return n.getTime()-i.getTime()})},t.timeToUntilString=function(e,n){n===void 0&&(n=!0);var i=new Date(e);return[$l(i.getUTCFullYear().toString(),4,"0"),$l(i.getUTCMonth()+1,2,"0"),$l(i.getUTCDate(),2,"0"),"T",$l(i.getUTCHours(),2,"0"),$l(i.getUTCMinutes(),2,"0"),$l(i.getUTCSeconds(),2,"0"),n?"Z":""].join("")},t.untilStringToDate=function(e){var n=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,i=n.exec(e);if(!i)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[5],10)||0,parseInt(i[6],10)||0,parseInt(i[7],10)||0))}})(Ba||(Ba={}));const Le=Ba;var Cc=function(){function t(e,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=n,e==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):e==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):e==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var n=this.minDate&&e<this.minDate,i=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(n)return!0;if(i)return!1}else if(this.method==="before"){if(i)return!1}else if(this.method==="after")return n?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),w0=function(t,e){return w0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},w0(t,e)};function xS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");w0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $i=function(){return $i=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$i.apply(this,arguments)};function te(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var vk=function(t){xS(e,t);function e(n,i,s){var r=t.call(this,n,i)||this;return r.iterator=s,r}return e.prototype.add=function(n){return this.iterator(n,this._result.length)?(this._result.push(n),!0):!1},e}(Cc),mg={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Ck=function(t,e){return t.indexOf(e)!==-1},WZ=function(t){return t.toString()},GZ=function(t,e,n){return"".concat(e," ").concat(n,", ").concat(t)},to=function(){function t(e,n,i,s){if(n===void 0&&(n=WZ),i===void 0&&(i=mg),s===void 0&&(s=GZ),this.text=[],this.language=i||mg,this.gettext=n,this.dateFormatter=s,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var r=[].concat(this.options.bymonthday),o=[].concat(this.options.bynmonthday);r.sort(function(u,d){return u-d}),o.sort(function(u,d){return d-u}),this.bymonthday=r.concat(o),this.bymonthday.length||(this.bymonthday=null)}if(Yt(this.origOptions.byweekday)){var a=Ri(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],l=String(a);this.byweekday={allWeeks:a.filter(function(u){return!u.n}),someWeeks:a.filter(function(u){return!!u.n}),isWeekdays:l.indexOf("MO")!==-1&&l.indexOf("TU")!==-1&&l.indexOf("WE")!==-1&&l.indexOf("TH")!==-1&&l.indexOf("FR")!==-1&&l.indexOf("SA")===-1&&l.indexOf("SU")===-1,isEveryDay:l.indexOf("MO")!==-1&&l.indexOf("TU")!==-1&&l.indexOf("WE")!==-1&&l.indexOf("TH")!==-1&&l.indexOf("FR")!==-1&&l.indexOf("SA")!==-1&&l.indexOf("SU")!==-1};var c=function(u,d){return u.weekday-d.weekday};this.byweekday.allWeeks.sort(c),this.byweekday.someWeeks.sort(c),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var n=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var i in e.origOptions){if(Ck(["dtstart","wkst","freq"],i))return!0;if(!Ck(t.IMPLEMENTED[e.options.freq],i))return!1}return n},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[ye.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var n,i=this.gettext;if(e===-1)return i("last");var s=Math.abs(e);switch(s){case 1:case 21:case 31:n=s+i("st");break;case 2:case 22:n=s+i("nd");break;case 3:case 23:n=s+i("rd");break;default:n=s+i("th")}return e<0?n+" "+i("last"):n},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var n=Fs(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[n]},t.prototype.plural=function(e){return e%100!==1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,n,i,s){var r=this;s===void 0&&(s=","),Ri(e)||(e=[e]);var o=function(l,c,u){for(var d="",p=0;p<l.length;p++)p!==0&&(p===l.length-1?d+=" "+u+" ":d+=c+" "),d+=l[p];return d};n=n||function(l){return l.toString()};var a=function(l){return n&&n.call(r,l)};return i?o(e.map(a),s,i):e.map(a).join(s+" ")},t}(),UZ=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,n;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;e=null;for(var s in this.rules){i=this.rules[s];var r=i.exec(this.text);r&&(e===null||r[0].length>e[0].length)&&(e=r,n=s)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(n==="SKIP");return this.symbol=n,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function nF(t,e){e===void 0&&(e=mg);var n={},i=new UZ(e.tokens);if(!i.start(t))return null;return s(),n;function s(){i.expect("every");var p=i.acceptNumber();if(p&&(n.interval=parseInt(p[0],10)),i.isDone())throw new Error("Unexpected end");switch(i.symbol){case"day(s)":n.freq=ye.DAILY,i.nextSymbol()&&(o(),d());break;case"weekday(s)":n.freq=ye.WEEKLY,n.byweekday=[ye.MO,ye.TU,ye.WE,ye.TH,ye.FR],i.nextSymbol(),d();break;case"week(s)":n.freq=ye.WEEKLY,i.nextSymbol()&&(r(),d());break;case"hour(s)":n.freq=ye.HOURLY,i.nextSymbol()&&(r(),d());break;case"minute(s)":n.freq=ye.MINUTELY,i.nextSymbol()&&(r(),d());break;case"month(s)":n.freq=ye.MONTHLY,i.nextSymbol()&&(r(),d());break;case"year(s)":n.freq=ye.YEARLY,i.nextSymbol()&&(r(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=ye.WEEKLY;var f=i.symbol.substr(0,2).toUpperCase();if(n.byweekday=[ye[f]],!i.nextSymbol())return;for(;i.accept("comma");){if(i.isDone())throw new Error("Unexpected end");var g=l();if(!g)throw new Error("Unexpected symbol "+i.symbol+", expected weekday");n.byweekday.push(ye[g]),i.nextSymbol()}u(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=ye.YEARLY,n.bymonth=[a()],!i.nextSymbol())return;for(;i.accept("comma");){if(i.isDone())throw new Error("Unexpected end");var y=a();if(!y)throw new Error("Unexpected symbol "+i.symbol+", expected month");n.bymonth.push(y),i.nextSymbol()}r(),d();break;default:throw new Error("Unknown symbol")}}function r(){var p=i.accept("on"),f=i.accept("the");if(p||f)do{var g=c(),y=l(),v=a();if(g)y?(i.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(ye[y].nth(g))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(g),i.accept("day(s)"));else if(y)i.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(ye[y]);else if(i.symbol==="weekday(s)")i.nextSymbol(),n.byweekday||(n.byweekday=[ye.MO,ye.TU,ye.WE,ye.TH,ye.FR]);else if(i.symbol==="week(s)"){i.nextSymbol();var C=i.acceptNumber();if(!C)throw new Error("Unexpected symbol "+i.symbol+", expected week number");for(n.byweekno=[parseInt(C[0],10)];i.accept("comma");){if(C=i.acceptNumber(),!C)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");n.byweekno.push(parseInt(C[0],10))}}else if(v)i.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(v);else return}while(i.accept("comma")||i.accept("the")||i.accept("on"))}function o(){var p=i.accept("at");if(p)do{var f=i.acceptNumber();if(!f)throw new Error("Unexpected symbol "+i.symbol+", expected hour");for(n.byhour=[parseInt(f[0],10)];i.accept("comma");){if(f=i.acceptNumber(),!f)throw new Error("Unexpected symbol "+i.symbol+"; expected hour");n.byhour.push(parseInt(f[0],10))}}while(i.accept("comma")||i.accept("at"))}function a(){switch(i.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function l(){switch(i.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return i.symbol.substr(0,2).toUpperCase();default:return!1}}function c(){switch(i.symbol){case"last":return i.nextSymbol(),-1;case"first":return i.nextSymbol(),1;case"second":return i.nextSymbol(),i.accept("last")?-2:2;case"third":return i.nextSymbol(),i.accept("last")?-3:3;case"nth":var p=parseInt(i.value[1],10);if(p<-366||p>366)throw new Error("Nth out of range: "+p);return i.nextSymbol(),i.accept("last")?-p:p;default:return!1}}function u(){i.accept("on"),i.accept("the");var p=c();if(p)for(n.bymonthday=[p],i.nextSymbol();i.accept("comma");){if(p=c(),!p)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");n.bymonthday.push(p),i.nextSymbol()}}function d(){if(i.symbol==="until"){var p=Date.parse(i.text);if(!p)throw new Error("Cannot parse until date:"+i.text);n.until=new Date(p)}else i.accept("for")&&(n.count=parseInt(i.value[0],10),i.expect("number"))}}var Xe;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(Xe||(Xe={}));function wS(t){return t<Xe.HOURLY}var KZ=function(t,e){return e===void 0&&(e=mg),new ye(nF(t,e)||void 0)},fu=["count","until","interval","byweekday","bymonthday","bymonth"];to.IMPLEMENTED=[];to.IMPLEMENTED[Xe.HOURLY]=fu;to.IMPLEMENTED[Xe.MINUTELY]=fu;to.IMPLEMENTED[Xe.DAILY]=["byhour"].concat(fu);to.IMPLEMENTED[Xe.WEEKLY]=fu;to.IMPLEMENTED[Xe.MONTHLY]=fu;to.IMPLEMENTED[Xe.YEARLY]=["byweekno","byyearday"].concat(fu);var jZ=function(t,e,n,i){return new to(t,e,n,i).toString()},qZ=to.isFullyConvertible,gg=function(){function t(e,n,i,s){this.hour=e,this.minute=n,this.second=i,this.millisecond=s||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}(),YZ=function(t){xS(e,t);function e(n,i,s,r,o,a,l){var c=t.call(this,r,o,a,l)||this;return c.year=n,c.month=i,c.day=s,c}return e.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},e.prototype.getWeekday=function(){return Ba.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(n){this.year+=n},e.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var i=Math.floor(this.month/12),s=Qi(this.month,12);this.month=s,this.year+=i,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(n,i){i>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-i))+n*7:this.day+=-(this.getWeekday()-i)+n*7,this.fixDay()},e.prototype.addDaily=function(n){this.day+=n,this.fixDay()},e.prototype.addHours=function(n,i,s){for(i&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var r=zv(this.hour,24),o=r.div,a=r.mod;if(o&&(this.hour=a,this.addDaily(o)),Ns(s)||gt(s,this.hour))break}},e.prototype.addMinutes=function(n,i,s,r){for(i&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/n)*n);;){this.minute+=n;var o=zv(this.minute,60),a=o.div,l=o.mod;if(a&&(this.minute=l,this.addHours(a,!1,s)),(Ns(s)||gt(s,this.hour))&&(Ns(r)||gt(r,this.minute)))break}},e.prototype.addSeconds=function(n,i,s,r,o){for(i&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/n)*n);;){this.second+=n;var a=zv(this.second,60),l=a.div,c=a.mod;if(l&&(this.second=c,this.addMinutes(l,!1,s,r)),(Ns(s)||gt(s,this.hour))&&(Ns(r)||gt(r,this.minute))&&(Ns(o)||gt(o,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var n=Ba.monthRange(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Ba.MAXYEAR))return;n=Ba.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(n,i){var s=n.freq,r=n.interval,o=n.wkst,a=n.byhour,l=n.byminute,c=n.bysecond;switch(s){case Xe.YEARLY:return this.addYears(r);case Xe.MONTHLY:return this.addMonths(r);case Xe.WEEKLY:return this.addWeekly(r,o);case Xe.DAILY:return this.addDaily(r);case Xe.HOURLY:return this.addHours(r,i,a);case Xe.MINUTELY:return this.addMinutes(r,i,a,l);case Xe.SECONDLY:return this.addSeconds(r,i,a,l,c)}},e}(gg);function iF(t){for(var e=[],n=Object.keys(t),i=0,s=n;i<s.length;i++){var r=s[i];gt(bQ,r)||e.push(r),Le.isDate(t[r])&&!Le.isValidDate(t[r])&&e.push(r)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return $i({},t)}function ZZ(t){var e=$i($i({},SS),iF(t));if(Yt(e.byeaster)&&(e.freq=ye.YEARLY),!(Yt(e.freq)&&ye.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(t.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Yt(e.wkst)?Fs(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=ye.MO.weekday,Yt(e.bysetpos)){Fs(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var n=0;n<e.bysetpos.length;n++){var i=e.bysetpos[n];if(i===0||!(i>=-366&&i<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||hn(e.byweekno)||hn(e.byyearday)||e.bymonthday||hn(e.bymonthday)||Yt(e.byweekday)||Yt(e.byeaster)))switch(e.freq){case ye.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case ye.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case ye.WEEKLY:e.byweekday=[Le.getWeekday(e.dtstart)];break}if(Yt(e.bymonth)&&!Ri(e.bymonth)&&(e.bymonth=[e.bymonth]),Yt(e.byyearday)&&!Ri(e.byyearday)&&Fs(e.byyearday)&&(e.byyearday=[e.byyearday]),!Yt(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Ri(e.bymonthday)){for(var s=[],r=[],n=0;n<e.bymonthday.length;n++){var i=e.bymonthday[n];i>0?s.push(i):i<0&&r.push(i)}e.bymonthday=s,e.bynmonthday=r}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Yt(e.byweekno)&&!Ri(e.byweekno)&&(e.byweekno=[e.byweekno]),!Yt(e.byweekday))e.bynweekday=null;else if(Fs(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(yk(e.byweekday))e.byweekday=[ei.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ei)!e.byweekday.n||e.freq>ye.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var o=[],a=[],n=0;n<e.byweekday.length;n++){var l=e.byweekday[n];if(Fs(l)){o.push(l);continue}else if(yk(l)){o.push(ei.fromStr(l).weekday);continue}!l.n||e.freq>ye.MONTHLY?o.push(l.weekday):a.push([l.weekday,l.n])}e.byweekday=hn(o)?o:null,e.bynweekday=hn(a)?a:null}return Yt(e.byhour)?Fs(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<ye.HOURLY?[e.dtstart.getUTCHours()]:null,Yt(e.byminute)?Fs(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<ye.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Yt(e.bysecond)?Fs(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<ye.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function QZ(t){var e=t.dtstart.getTime()%1e3;if(!wS(t.freq))return[];var n=[];return t.byhour.forEach(function(i){t.byminute.forEach(function(s){t.bysecond.forEach(function(r){n.push(new gg(i,s,r,e))})})}),n}function S0(t){var e=t.split(`
`).map(XZ).filter(function(n){return n!==null});return $i($i({},e[0]),e[1])}function _g(t){var e={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!n)return e;var i=n[1],s=n[2];return i&&(e.tzid=i),e.dtstart=Le.untilStringToDate(s),e}function XZ(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return Dk(t);var n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return Dk(t);case"DTSTART":return _g(t);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(t))}}function Dk(t){var e=t.replace(/^RRULE:/i,""),n=_g(e),i=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return i.forEach(function(s){var r=s.split("="),o=r[0],a=r[1];switch(o.toUpperCase()){case"FREQ":n.freq=Xe[a.toUpperCase()];break;case"WKST":n.wkst=Ds[a.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var l=JZ(a),c=o.toLowerCase();n[c]=l;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=eQ(a);break;case"DTSTART":case"TZID":var u=_g(t);n.tzid=u.tzid,n.dtstart=u.dtstart;break;case"UNTIL":n.until=Le.untilStringToDate(a);break;case"BYEASTER":n.byeaster=Number(a);break;default:throw new Error("Unknown RRULE property '"+o+"'")}}),n}function JZ(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(xk)}return xk(t)}function xk(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function eQ(t){var e=t.split(",");return e.map(function(n){if(n.length===2)return Ds[n];var i=n.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!i||i.length<3)throw new SyntaxError("Invalid weekday string: ".concat(n));var s=Number(i[1]),r=i[2],o=Ds[r].weekday;return new ei(o,s)})}var yg=function(){function t(e,n){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=n}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var e=Le.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var n=Intl.DateTimeFormat().resolvedOptions().timeZone,i=new Date(this.date.toLocaleString(void 0,{timeZone:n})),s=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),r=s.getTime()-i.getTime();return new Date(this.date.getTime()-r)},t}();function b0(t){for(var e=[],n="",i=Object.keys(t),s=Object.keys(SS),r=0;r<i.length;r++)if(i[r]!=="tzid"&&gt(s,i[r])){var o=i[r].toUpperCase(),a=t[i[r]],l="";if(!(!Yt(a)||Ri(a)&&!a.length)){switch(o){case"FREQ":l=ye.FREQUENCIES[t.freq];break;case"WKST":Fs(a)?l=new ei(a).toString():l=a.toString();break;case"BYWEEKDAY":o="BYDAY",l=NZ(a).map(function(f){return f instanceof ei?f:Ri(f)?new ei(f[0],f[1]):new ei(f)}).toString();break;case"DTSTART":n=tQ(a,t.tzid);break;case"UNTIL":l=Le.timeToUntilString(a,!t.tzid);break;default:if(Ri(a)){for(var c=[],u=0;u<a.length;u++)c[u]=String(a[u]);l=c.toString()}else l=String(a)}l&&e.push([o,l])}}var d=e.map(function(f){var g=f[0],y=f[1];return"".concat(g,"=").concat(y.toString())}).join(";"),p="";return d!==""&&(p="RRULE:".concat(d)),[n,p].filter(function(f){return!!f}).join(`
`)}function tQ(t,e){return t?"DTSTART"+new yg(new Date(t),e).toString():""}function nQ(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(n,i){return n.getTime()===e[i].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var iQ=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,n,i){n&&(n=n instanceof Date?Le.clone(n):Le.cloneDates(n)),e==="all"?this.all=n:(i._value=n,this[e].push(i))},t.prototype._cacheGet=function(e,n){var i=!1,s=n?Object.keys(n):[],r=function(u){for(var d=0;d<s.length;d++){var p=s[d];if(!nQ(n[p],u[p]))return!0}return!1},o=this[e];if(e==="all")i=this.all;else if(Ri(o))for(var a=0;a<o.length;a++){var l=o[a];if(!(s.length&&r(l))){i=l._value;break}}if(!i&&this.all){for(var c=new Cc(e,n),a=0;a<this.all.length&&c.accept(this.all[a]);a++);i=c.getValue(),this._cacheAdd(e,i,n)}return Ri(i)?Le.cloneDates(i):i instanceof Date?Le.clone(i):i},t}(),sQ=te(te(te(te(te(te(te(te(te(te(te(te(te([],Ye(1,31),!0),Ye(2,28),!0),Ye(3,31),!0),Ye(4,30),!0),Ye(5,31),!0),Ye(6,30),!0),Ye(7,31),!0),Ye(8,31),!0),Ye(9,30),!0),Ye(10,31),!0),Ye(11,30),!0),Ye(12,31),!0),Ye(1,7),!0),rQ=te(te(te(te(te(te(te(te(te(te(te(te(te([],Ye(1,31),!0),Ye(2,29),!0),Ye(3,31),!0),Ye(4,30),!0),Ye(5,31),!0),Ye(6,30),!0),Ye(7,31),!0),Ye(8,31),!0),Ye(9,30),!0),Ye(10,31),!0),Ye(11,30),!0),Ye(12,31),!0),Ye(1,7),!0),oQ=lr(1,29),aQ=lr(1,30),Do=lr(1,31),Ln=lr(1,32),lQ=te(te(te(te(te(te(te(te(te(te(te(te(te([],Ln,!0),aQ,!0),Ln,!0),Do,!0),Ln,!0),Do,!0),Ln,!0),Ln,!0),Do,!0),Ln,!0),Do,!0),Ln,!0),Ln.slice(0,7),!0),cQ=te(te(te(te(te(te(te(te(te(te(te(te(te([],Ln,!0),oQ,!0),Ln,!0),Do,!0),Ln,!0),Do,!0),Ln,!0),Ln,!0),Do,!0),Ln,!0),Do,!0),Ln,!0),Ln.slice(0,7),!0),uQ=lr(-28,0),dQ=lr(-29,0),xo=lr(-30,0),$n=lr(-31,0),hQ=te(te(te(te(te(te(te(te(te(te(te(te(te([],$n,!0),dQ,!0),$n,!0),xo,!0),$n,!0),xo,!0),$n,!0),$n,!0),xo,!0),$n,!0),xo,!0),$n,!0),$n.slice(0,7),!0),pQ=te(te(te(te(te(te(te(te(te(te(te(te(te([],$n,!0),uQ,!0),$n,!0),xo,!0),$n,!0),xo,!0),$n,!0),$n,!0),xo,!0),$n,!0),xo,!0),$n,!0),$n.slice(0,7),!0),fQ=[0,31,60,91,121,152,182,213,244,274,305,335,366],mQ=[0,31,59,90,120,151,181,212,243,273,304,334,365],wk=function(){for(var t=[],e=0;e<55;e++)t=t.concat(lr(7));return t}();function gQ(t,e){var n=new Date(Date.UTC(t,0,1)),i=Le.isLeapYear(t)?366:365,s=Le.isLeapYear(t+1)?366:365,r=Le.toOrdinal(n),o=Le.getWeekday(n),a=$i($i({yearlen:i,nextyearlen:s,yearordinal:r,yearweekday:o},_Q(t)),{wnomask:null});if(Ns(e.byweekno))return a;a.wnomask=Ye(0,i+7);var l,c,u=l=Qi(7-o+e.wkst,7);u>=4?(u=0,c=a.yearlen+Qi(o-e.wkst,7)):c=i-u;for(var d=Math.floor(c/7),p=Qi(c,7),f=Math.floor(d+p/4),g=0;g<e.byweekno.length;g++){var y=e.byweekno[g];if(y<0&&(y+=f+1),y>0&&y<=f){var v=void 0;y>1?(v=u+(y-1)*7,u!==l&&(v-=7-l)):v=u;for(var C=0;C<7&&(a.wnomask[v]=1,v++,a.wdaymask[v]!==e.wkst);C++);}}if(gt(e.byweekno,1)){var v=u+f*7;if(u!==l&&(v-=7-l),v<i)for(var g=0;g<7&&(a.wnomask[v]=1,v+=1,a.wdaymask[v]!==e.wkst);g++);}if(u){var x=void 0;if(gt(e.byweekno,-1))x=-1;else{var S=Le.getWeekday(new Date(Date.UTC(t-1,0,1))),O=Qi(7-S.valueOf()+e.wkst,7),H=Le.isLeapYear(t-1)?366:365,F=void 0;O>=4?(O=0,F=H+Qi(S-e.wkst,7)):F=i-u,x=Math.floor(52+Qi(F,7)/4)}if(gt(e.byweekno,x))for(var v=0;v<u;v++)a.wnomask[v]=1}return a}function _Q(t){var e=Le.isLeapYear(t)?366:365,n=new Date(Date.UTC(t,0,1)),i=Le.getWeekday(n);return e===365?{mmask:sQ,mdaymask:cQ,nmdaymask:pQ,wdaymask:wk.slice(i),mrange:mQ}:{mmask:rQ,mdaymask:lQ,nmdaymask:hQ,wdaymask:wk.slice(i),mrange:fQ}}function yQ(t,e,n,i,s,r){var o={lastyear:t,lastmonth:e,nwdaymask:[]},a=[];if(r.freq===ye.YEARLY)if(Ns(r.bymonth))a=[[0,n]];else for(var l=0;l<r.bymonth.length;l++)e=r.bymonth[l],a.push(i.slice(e-1,e+1));else r.freq===ye.MONTHLY&&(a=[i.slice(e-1,e+1)]);if(Ns(a))return o;o.nwdaymask=Ye(0,n);for(var l=0;l<a.length;l++)for(var c=a[l],u=c[0],d=c[1]-1,p=0;p<r.bynweekday.length;p++){var f=void 0,g=r.bynweekday[p],y=g[0],v=g[1];v<0?(f=d+(v+1)*7,f-=Qi(s[f]-y,7)):(f=u+(v-1)*7,f+=Qi(7-s[f]+y,7)),u<=f&&f<=d&&(o.nwdaymask[f]=1)}return o}function vQ(t,e){e===void 0&&(e=0);var n=t%19,i=Math.floor(t/100),s=t%100,r=Math.floor(i/4),o=i%4,a=Math.floor((i+8)/25),l=Math.floor((i-a+1)/3),c=Math.floor(19*n+i-r-l+15)%30,u=Math.floor(s/4),d=s%4,p=Math.floor(32+2*o+2*u-c-d)%7,f=Math.floor((n+11*c+22*p)/451),g=Math.floor((c+p-7*f+114)/31),y=(c+p-7*f+114)%31+1,v=Date.UTC(t,g-1,y+e),C=Date.UTC(t,0,1);return[Math.ceil((v-C)/(1e3*60*60*24))]}var CQ=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,n){var i=this.options;if(e!==this.lastyear&&(this.yearinfo=gQ(e,i)),hn(i.bynweekday)&&(n!==this.lastmonth||e!==this.lastyear)){var s=this.yearinfo,r=s.yearlen,o=s.mrange,a=s.wdaymask;this.monthinfo=yQ(e,n,r,o,a,i)}Yt(i.byeaster)&&(this.eastermask=vQ(e,i.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),t.prototype.ydayset=function(){return[lr(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,n){for(var i=this.mrange[n-1],s=this.mrange[n],r=Ye(null,this.yearlen),o=i;o<s;o++)r[o]=o;return[r,i,s]},t.prototype.wdayset=function(e,n,i){for(var s=Ye(null,this.yearlen+7),r=Le.toOrdinal(new Date(Date.UTC(e,n-1,i)))-this.yearordinal,o=r,a=0;a<7&&(s[r]=r,++r,this.wdaymask[r]!==this.options.wkst);a++);return[s,o,r]},t.prototype.ddayset=function(e,n,i){var s=Ye(null,this.yearlen),r=Le.toOrdinal(new Date(Date.UTC(e,n-1,i)))-this.yearordinal;return s[r]=r,[s,r,r+1]},t.prototype.htimeset=function(e,n,i,s){var r=this,o=[];return this.options.byminute.forEach(function(a){o=o.concat(r.mtimeset(e,a,i,s))}),Le.sort(o),o},t.prototype.mtimeset=function(e,n,i,s){var r=this.options.bysecond.map(function(o){return new gg(e,n,o,s)});return Le.sort(r),r},t.prototype.stimeset=function(e,n,i,s){return[new gg(e,n,i,s)]},t.prototype.getdayset=function(e){switch(e){case Xe.YEARLY:return this.ydayset.bind(this);case Xe.MONTHLY:return this.mdayset.bind(this);case Xe.WEEKLY:return this.wdayset.bind(this);case Xe.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case Xe.HOURLY:return this.htimeset.bind(this);case Xe.MINUTELY:return this.mtimeset.bind(this);case Xe.SECONDLY:return this.stimeset.bind(this)}},t}();function DQ(t,e,n,i,s,r){for(var o=[],a=0;a<t.length;a++){var l=void 0,c=void 0,u=t[a];u<0?(l=Math.floor(u/e.length),c=Qi(u,e.length)):(l=Math.floor((u-1)/e.length),c=Qi(u-1,e.length));for(var d=[],p=n;p<i;p++){var f=r[p];Yt(f)&&d.push(f)}var g=void 0;l<0?g=d.slice(l)[0]:g=d[l];var y=e[c],v=Le.fromOrdinal(s.yearordinal+g),C=Le.combine(v,y);gt(o,C)||o.push(C)}return Le.sort(o),o}function sF(t,e){var n=e.dtstart,i=e.freq,s=e.interval,r=e.until,o=e.bysetpos,a=e.count;if(a===0||s===0)return hr(t);var l=YZ.fromDate(n),c=new CQ(e);c.rebuild(l.year,l.month);for(var u=SQ(c,l,e);;){var d=c.getdayset(i)(l.year,l.month,l.day),p=d[0],f=d[1],g=d[2],y=wQ(p,f,g,c,e);if(hn(o))for(var v=DQ(o,u,f,g,c,p),C=0;C<v.length;C++){var x=v[C];if(r&&x>r)return hr(t);if(x>=n){var S=Sk(x,e);if(!t.accept(S)||a&&(--a,!a))return hr(t)}}else for(var C=f;C<g;C++){var O=p[C];if(Yt(O))for(var H=Le.fromOrdinal(c.yearordinal+O),F=0;F<u.length;F++){var I=u[F],x=Le.combine(H,I);if(r&&x>r)return hr(t);if(x>=n){var S=Sk(x,e);if(!t.accept(S)||a&&(--a,!a))return hr(t)}}}if(e.interval===0||(l.add(e,y),l.year>Le.MAXYEAR))return hr(t);wS(i)||(u=c.gettimeset(i)(l.hour,l.minute,l.second,0)),c.rebuild(l.year,l.month)}}function xQ(t,e,n){var i=n.bymonth,s=n.byweekno,r=n.byweekday,o=n.byeaster,a=n.bymonthday,l=n.bynmonthday,c=n.byyearday;return hn(i)&&!gt(i,t.mmask[e])||hn(s)&&!t.wnomask[e]||hn(r)&&!gt(r,t.wdaymask[e])||hn(t.nwdaymask)&&!t.nwdaymask[e]||o!==null&&!gt(t.eastermask,e)||(hn(a)||hn(l))&&!gt(a,t.mdaymask[e])&&!gt(l,t.nmdaymask[e])||hn(c)&&(e<t.yearlen&&!gt(c,e+1)&&!gt(c,-t.yearlen+e)||e>=t.yearlen&&!gt(c,e+1-t.yearlen)&&!gt(c,-t.nextyearlen+e-t.yearlen))}function Sk(t,e){return new yg(t,e.tzid).rezonedDate()}function hr(t){return t.getValue()}function wQ(t,e,n,i,s){for(var r=!1,o=e;o<n;o++){var a=t[o];r=xQ(i,a,s),r&&(t[a]=null)}return r}function SQ(t,e,n){var i=n.freq,s=n.byhour,r=n.byminute,o=n.bysecond;return wS(i)?QZ(n):i>=ye.HOURLY&&hn(s)&&!gt(s,e.hour)||i>=ye.MINUTELY&&hn(r)&&!gt(r,e.minute)||i>=ye.SECONDLY&&hn(o)&&!gt(o,e.second)?[]:t.gettimeset(i)(e.hour,e.minute,e.second,e.millisecond)}var Ds={MO:new ei(0),TU:new ei(1),WE:new ei(2),TH:new ei(3),FR:new ei(4),SA:new ei(5),SU:new ei(6)},SS={freq:Xe.YEARLY,dtstart:null,interval:1,wkst:Ds.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},bQ=Object.keys(SS),ye=function(){function t(e,n){e===void 0&&(e={}),n===void 0&&(n=!1),this._cache=n?null:new iQ,this.origOptions=iF(e);var i=ZZ(e).parsedOptions;this.options=i}return t.parseText=function(e,n){return nF(e,n)},t.fromText=function(e,n){return KZ(e,n)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return sF(e,this.options)},t.prototype._cacheGet=function(e,n){return this._cache?this._cache._cacheGet(e,n):!1},t.prototype._cacheAdd=function(e,n,i){if(this._cache)return this._cache._cacheAdd(e,n,i)},t.prototype.all=function(e){if(e)return this._iter(new vk("all",{},e));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new Cc("all",{})),this._cacheAdd("all",n)),n},t.prototype.between=function(e,n,i,s){if(i===void 0&&(i=!1),!Le.isValidDate(e)||!Le.isValidDate(n))throw new Error("Invalid date passed in to RRule.between");var r={before:n,after:e,inc:i};if(s)return this._iter(new vk("between",r,s));var o=this._cacheGet("between",r);return o===!1&&(o=this._iter(new Cc("between",r)),this._cacheAdd("between",o,r)),o},t.prototype.before=function(e,n){if(n===void 0&&(n=!1),!Le.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var i={dt:e,inc:n},s=this._cacheGet("before",i);return s===!1&&(s=this._iter(new Cc("before",i)),this._cacheAdd("before",s,i)),s},t.prototype.after=function(e,n){if(n===void 0&&(n=!1),!Le.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var i={dt:e,inc:n},s=this._cacheGet("after",i);return s===!1&&(s=this._iter(new Cc("after",i)),this._cacheAdd("after",s,i)),s},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return b0(this.origOptions)},t.prototype.toText=function(e,n,i){return jZ(this,e,n,i)},t.prototype.isFullyConvertibleToText=function(){return qZ(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=Xe.YEARLY,t.MONTHLY=Xe.MONTHLY,t.WEEKLY=Xe.WEEKLY,t.DAILY=Xe.DAILY,t.HOURLY=Xe.HOURLY,t.MINUTELY=Xe.MINUTELY,t.SECONDLY=Xe.SECONDLY,t.MO=Ds.MO,t.TU=Ds.TU,t.WE=Ds.WE,t.TH=Ds.TH,t.FR=Ds.FR,t.SA=Ds.SA,t.SU=Ds.SU,t.parseString=S0,t.optionsToString=b0,t}();function EQ(t,e,n,i,s,r){var o={},a=t.accept;function l(p,f){n.forEach(function(g){g.between(p,f,!0).forEach(function(y){o[Number(y)]=!0})})}s.forEach(function(p){var f=new yg(p,r).rezonedDate();o[Number(f)]=!0}),t.accept=function(p){var f=Number(p);return isNaN(f)?a.call(this,p):!o[f]&&(l(new Date(f-1),new Date(f+1)),!o[f])?(o[f]=!0,a.call(this,p)):!0},t.method==="between"&&(l(t.args.after,t.args.before),t.accept=function(p){var f=Number(p);return o[f]?!0:(o[f]=!0,a.call(this,p))});for(var c=0;c<i.length;c++){var u=new yg(i[c],r).rezonedDate();if(!t.accept(new Date(u.getTime())))break}e.forEach(function(p){sF(t,p.options)});var d=t._result;switch(Le.sort(d),t.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var bk={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function TQ(t,e){var n=[],i=[],s=[],r=[],o=_g(t),a=o.dtstart,l=o.tzid,c=OQ(t,e.unfold);return c.forEach(function(u){var d;if(u){var p=RQ(u),f=p.name,g=p.parms,y=p.value;switch(f.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));n.push(S0(u));break;case"RDATE":var v=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(u))!==null&&d!==void 0?d:[],C=v[1];C&&!l&&(l=C),i=i.concat(Tk(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));s.push(S0(y));break;case"EXDATE":r=r.concat(Tk(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+f)}}}),{dtstart:a,tzid:l,rrulevals:n,rdatevals:i,exrulevals:s,exdatevals:r}}function IQ(t,e){var n=TQ(t,e),i=n.rrulevals,s=n.rdatevals,r=n.exrulevals,o=n.exdatevals,a=n.dtstart,l=n.tzid,c=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||i.length>1||s.length||r.length||o.length){var u=new rF(c);return u.dtstart(a),u.tzid(l||void 0),i.forEach(function(p){u.rrule(new ye(Wv(p,a,l),c))}),s.forEach(function(p){u.rdate(p)}),r.forEach(function(p){u.exrule(new ye(Wv(p,a,l),c))}),o.forEach(function(p){u.exdate(p)}),e.compatible&&e.dtstart&&u.rdate(a),u}var d=i[0]||{};return new ye(Wv(d,d.dtstart||e.dtstart||a,d.tzid||e.tzid||l),c)}function Ek(t,e){return e===void 0&&(e={}),IQ(t,AQ(e))}function Wv(t,e,n){return $i($i({},t),{dtstart:e,tzid:n})}function AQ(t){var e=[],n=Object.keys(t),i=Object.keys(bk);if(n.forEach(function(s){gt(i,s)||e.push(s)}),e.length)throw new Error("Invalid options: "+e.join(", "));return $i($i({},bk),t)}function kQ(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=zZ(t,":",1),n=e[0],i=e[1];return{name:n,value:i}}function RQ(t){var e=kQ(t),n=e.name,i=e.value,s=n.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:i}}function OQ(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var n=t.split(`
`),i=0;i<n.length;){var s=n[i]=n[i].replace(/\s+$/g,"");s?i>0&&s[0]===" "?(n[i-1]+=s.slice(1),n.splice(i,1)):i+=1:n.splice(i,1)}return n}function PQ(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Tk(t,e){return PQ(e),t.split(",").map(function(n){return Le.untilStringToDate(n)})}function Ik(t){var e=this;return function(n){if(n!==void 0&&(e["_".concat(t)]=n),e["_".concat(t)]!==void 0)return e["_".concat(t)];for(var i=0;i<e._rrule.length;i++){var s=e._rrule[i].origOptions[t];if(s)return s}}}var rF=function(t){xS(e,t);function e(n){n===void 0&&(n=!1);var i=t.call(this,{},n)||this;return i.dtstart=Ik.apply(i,["dtstart"]),i.tzid=Ik.apply(i,["tzid"]),i._rrule=[],i._rdate=[],i._exrule=[],i._exdate=[],i}return e.prototype._iter=function(n){return EQ(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(n){Ak(n,this._rrule)},e.prototype.exrule=function(n){Ak(n,this._exrule)},e.prototype.rdate=function(n){kk(n,this._rdate)},e.prototype.exdate=function(n){kk(n,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(n){return Ek(n.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(n){return Ek(n.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},e.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat(b0({dtstart:this._dtstart}))),this._rrule.forEach(function(i){n=n.concat(i.toString().split(`
`))}),this._exrule.forEach(function(i){n=n.concat(i.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&n.push(Rk("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(Rk("EXDATE",this._exdate,this.tzid())),n},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var n=new e(!!this._cache);return this._rrule.forEach(function(i){return n.rrule(i.clone())}),this._exrule.forEach(function(i){return n.exrule(i.clone())}),this._rdate.forEach(function(i){return n.rdate(new Date(i.getTime()))}),this._exdate.forEach(function(i){return n.exdate(new Date(i.getTime()))}),n},e}(ye);function Ak(t,e){if(!(t instanceof ye))throw new TypeError(String(t)+" is not RRule instance");gt(e.map(String),String(t))||e.push(t)}function kk(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");gt(e.map(Number),Number(t))||(e.push(t),Le.sort(e))}function Rk(t,e,n){var i=!n||n.toUpperCase()==="UTC",s=i?"".concat(t,":"):"".concat(t,";TZID=").concat(n,":"),r=e.map(function(o){return Le.timeToUntilString(o.valueOf(),i)}).join(",");return"".concat(s).concat(r)}const MQ=V.dateToMilliseconds,VQ=["freq","interval","byday","byweekno","byyearday","bymonth","bymonthday","count","until","byhour","byminute","bysecond","bysetpos","wkst"],BQ=["DAILY","WEEKLY","MONTHLY","YEARLY","SECONDLY","MINUTELY","HOURLY"],LQ={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},Ok=[],$Q=["Etc/GMT-13","MIT","Pacific/Apia","Pacific/Enderbury","Pacific/Tongatapu","Etc/GMT-14","Pacific/Kiritimati"];let Gv=null;function ks(){return Gv||(Gv=new FQ),Gv}class FQ{constructor(){this.rRule=null,this.rRuleSet=null,this.validator=new HQ}generateDates(e){const n=this.evalRecurrenceRule(e.rule),{rule:i}=n;if(!n.isValid||!i.freq)return[];const s=this._createRruleIntervalParams(e);return this._initializeRRule(e,s.startIntervalDate,i.until),this.rRuleSet.between(s.minViewDate,s.maxViewDate,!0).filter(r=>r.getTime()+s.appointmentDuration>=s.minViewTime).map(r=>this._convertRruleResult(s,e,r))}_createRruleIntervalParams(e){const{start:n,min:i,max:s,appointmentTimezoneOffset:r}=e,o=De.getClientTimezoneOffset(n),a=De.getClientTimezoneOffset(i),l=De.getClientTimezoneOffset(s),c=e.end?e.end.getTime()-e.start.getTime():0,u=De.setOffsetsToDate(e.start,[-o,r]),d=e.min.getTime()-a+r,p=new Date(d-c),f=De.setOffsetsToDate(e.max,[-l,r]),g=De.getDiffBetweenClientTimezoneOffsets(e.start,u),y=g<0;return{startIntervalDate:u,minViewTime:d,minViewDate:p,maxViewDate:f,startIntervalDateDSTShift:y?0:g,appointmentDuration:c}}_convertRruleResult(e,n,i){const s=De.setOffsetsToDate(i,[...this._getLocalMachineOffset(i),-n.appointmentTimezoneOffset,e.startIntervalDateDSTShift]),r=De.getDiffBetweenClientTimezoneOffsets(s,i),o=r<0,a=De.setOffsetsToDate(s,[r]),l=De.getDiffBetweenClientTimezoneOffsets(a,s);return l&&o?new Date(a.getTime()+l):a}_getLocalMachineOffset(e){const n=De.getClientTimezoneOffset(e),i=V.getMachineTimezoneName(),s=[n],r=n/36e5<=-13,o=!i||$Q.some(a=>i.includes(a));return r&&o&&s.push(-864e5),s}hasRecurrence(e){return!!this.generateDates(e).length}evalRecurrenceRule(e){const n={rule:{},isValid:!1};return e&&(n.rule=this._parseRecurrenceRule(e),n.isValid=this.validator.validateRRule(n.rule,e)),n}isValidRecurrenceRule(e){return this.evalRecurrenceRule(e).isValid}daysFromByDayRule(e){let n=[];return e.byday&&(Array.isArray(e.byday)?n=e.byday:n=e.byday.split(",")),n.map(i=>{const s=i.match(/[A-Za-z]+/);return!!s&&s[0]}).filter(i=>!!i)}getAsciiStringByDate(e){const n=e.getTimezoneOffset()*MQ("minute"),i=new Date(e.getTime()+n);return`${i.getFullYear()+`0${i.getMonth()+1}`.slice(-2)+`0${i.getDate()}`.slice(-2)}T${`0${i.getHours()}`.slice(-2)}${`0${i.getMinutes()}`.slice(-2)}${`0${i.getSeconds()}`.slice(-2)}Z`}getRecurrenceString(e){if(!e||!e.freq)return;let n="";for(const i in e){let s=e[i];i==="interval"&&s<2||(i==="until"&&(s=this.getAsciiStringByDate(s)),n+=`${i}=${s};`)}return n=n.substring(0,n.length-1),n.toUpperCase()}_parseExceptionToRawArray(e){return e.match(/(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2}))?(Z)?/)}getDateByAsciiString(e){if(typeof e!="string")return e;const n=this._parseExceptionToRawArray(e);if(!n)return null;const[i,s,r,o,a,l,c]=this._createDateTuple(n);return c?new Date(Date.UTC(i,s,r,o,a,l)):new Date(i,s,r,o,a,l)}_dispose(){this.rRuleSet&&(delete this.rRuleSet,this.rRuleSet=null),this.rRule&&(delete this.rRule,this.rRule=null)}_getTimeZoneOffset(){return new Date().getTimezoneOffset()}_initializeRRule(e,n,i){const s=ye.parseString(e.rule),{firstDayOfWeek:r}=e;if(s.dtstart=n,!s.wkst&&r){const o=[6,0,1,2,3,4,5];s.wkst=o[r]}i&&(s.until=De.setOffsetsToDate(i,[-De.getClientTimezoneOffset(i),e.appointmentTimezoneOffset])),this._createRRule(s),e.exception&&e.exception.split(",").map(l=>this.getDateByAsciiString(l)).forEach(l=>{e.getPostProcessedException&&(l=e.getPostProcessedException(l));const c=De.setOffsetsToDate(l,[-De.getClientTimezoneOffset(l),e.appointmentTimezoneOffset]);this.rRuleSet.exdate(c)})}_createRRule(e){this._dispose(),this.rRuleSet=new rF,this.rRule=new ye(e),this.rRuleSet.rrule(this.rRule)}_parseRecurrenceRule(e){const n={},i=e.split(";");for(let r=0,o=i.length;r<o;r++){const a=i[r].split("="),l=a[0].toLowerCase(),c=a[1];n[l]=c}const s=parseInt(n.count);if(isNaN(s)||(n.count=s),n.interval){const r=parseInt(n.interval);isNaN(r)||(n.interval=r)}else n.interval=1;return n.freq&&n.until&&(n.until=this.getDateByAsciiString(n.until)),n}_createDateTuple(e){const n=e[8]!==void 0;return e.shift(),e[3]===void 0?e.splice(3):(e.splice(3,1),e.splice(6)),e[1]--,e.unshift(null),[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])||0,parseInt(e[5])||0,parseInt(e[6])||0,n]}}class HQ{validateRRule(e,n){return this._brokenRuleNameExists(e)||!BQ.includes(e.freq)||this._wrongCountRule(e)||this._wrongIntervalRule(e)||this._wrongDayOfWeek(e)||this._wrongByMonthDayRule(e)||this._wrongByMonth(e)||this._wrongUntilRule(e)?(this._logBrokenRule(n),!1):!0}_wrongUntilRule(e){let n=!1;const{until:i}=e;return i!==void 0&&!(i instanceof Date)&&(n=!0),n}_wrongCountRule(e){let n=!1;const{count:i}=e;return i&&typeof i=="string"&&(n=!0),n}_wrongByMonthDayRule(e){let n=!1;const i=e.bymonthday;return i&&isNaN(parseInt(i))&&(n=!0),n}_wrongByMonth(e){let n=!1;const i=e.bymonth;return i&&isNaN(parseInt(i))&&(n=!0),n}_wrongIntervalRule(e){let n=!1;const{interval:i}=e;return i&&typeof i=="string"&&(n=!0),n}_wrongDayOfWeek(e){const n=e.byday,i=ks().daysFromByDayRule(e);let s=!1;return n===""&&(s=!0),N(i,(r,o)=>{if(!Object.prototype.hasOwnProperty.call(LQ,o))return s=!0,!1}),s}_brokenRuleNameExists(e){let n=!1;return N(e,i=>{if(!VQ.includes(i))return n=!0,!1}),n}_logBrokenRule(e){Ok.includes(e)||(Te.log("W0006",e),Ok.push(e))}}const vn={startDate:"startDate",endDate:"endDate",allDay:"allDay",text:"text",description:"description",startDateTimeZone:"startDateTimeZone",endDateTimeZone:"endDateTimeZone",recurrenceRule:"recurrenceRule",recurrenceException:"recurrenceException",disabled:"disabled"};class bS{constructor(e,n,i,s){this.rawAppointment=e,this.dataAccessors=n,this.timeZoneCalculator=i,this.options=s}get duration(){return this.endDate?this.endDate-this.startDate:0}get startDate(){const e=this.getField(vn.startDate);return e===void 0?e:new Date(e)}set startDate(e){this.setField(vn.startDate,e)}get endDate(){const e=this.getField(vn.endDate);return e===void 0?e:new Date(e)}set endDate(e){this.setField(vn.endDate,e)}get allDay(){return this.getField(vn.allDay)}set allDay(e){this.setField(vn.allDay,e)}get text(){return this.getField(vn.text)}set text(e){this.setField(vn.text,e)}get description(){return this.getField(vn.description)}set description(e){this.setField(vn.description,e)}get startDateTimeZone(){return this.getField(vn.startDateTimeZone)}get endDateTimeZone(){return this.getField(vn.endDateTimeZone)}get recurrenceRule(){return this.getField(vn.recurrenceRule)}set recurrenceRule(e){this.setField(vn.recurrenceRule,e)}get recurrenceException(){return this.getField(vn.recurrenceException)}set recurrenceException(e){this.setField(vn.recurrenceException,e)}get disabled(){return!!this.getField(vn.disabled)}get isRecurrent(){return ks().isValidRecurrenceRule(this.recurrenceRule)}getField(e){return Be.getField(this.dataAccessors,e,this.rawAppointment)}setField(e,n){return Be.setField(this.dataAccessors,e,this.rawAppointment,n)}calculateStartDate(e){if(!this.startDate||isNaN(this.startDate.getTime()))throw it.Error("E1032",this.text);return this.calculateDate(this.startDate,this.startDateTimeZone,e)}calculateEndDate(e){return this.calculateDate(this.endDate,this.endDateTimeZone,e)}calculateDate(e,n,i){if(e)return this.timeZoneCalculator.createDate(e,{appointmentTimeZone:n,path:i})}clone(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;const n=new bS(Jo({},this.rawAppointment),this.dataAccessors,this.timeZoneCalculator,e);return e!=null&&e.pathTimeZone&&(n.startDate=n.calculateStartDate(e.pathTimeZone),n.endDate=n.calculateEndDate(e.pathTimeZone)),n}source(){if(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1){const n=this.clone();return n.startDate=this.startDate,n.endDate=this.endDate,n.source()}return T({},this.rawAppointment)}}const ct=(t,e,n,i)=>new bS(t,e,n,i),NQ=(t,e,n,i)=>{const s=[];return t==null||t.forEach(r=>{var o;const a=new Date(e.getter.startDate(r)),l=new Date(e.getter.endDate(r));eF(r,a,l,n,e);const c=ct(r,e,i),u=c.startDate&&c.calculateStartDate("toGrid"),d=c.endDate&&c.calculateEndDate("toGrid"),p=new RegExp("freq","gi"),f=c.recurrenceRule,g=!!(f!=null&&(o=f.match(p))!==null&&o!==void 0&&o.length),y=M(r.visible)?!!r.visible:!0;u&&d&&s.push({allDay:!!c.allDay,startDate:u,startDateTimeZone:r.startDateTimeZone,endDate:d,endDateTimeZone:r.endDateTimeZone,recurrenceRule:c.recurrenceRule,recurrenceException:c.recurrenceException,hasRecurrenceRule:g,visible:y,rawAppointment:r})}),s},zQ="yyyyMMddTHHmmss",WQ=`${zQ}Z`,GQ=(t,e,n)=>(n&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),je.serializeDate(t,WQ)),UQ=(t,e)=>{const n=[];return t.recurrenceException&&n.push(t.recurrenceException),n.push(GQ(e,t.startDate,t.allDay)),n.join()},KQ=(t,e,n,i)=>{const s=ct(L({},t),n,i);return s.recurrenceException=UQ(s,e),s},ES=t=>ee.getDayNames("abbreviated")[t.getDay()],$_=t=>`${ES(t)} ${ee.format(t,"day")}`,jQ={calculateStartViewDate:gZ},qQ={calculateStartViewDate:_Z},vg={getIntervalDuration:kZ,getTimePanelCellText:AZ,calculateStartViewDate:RZ,calculateViewStartDate:OZ},YQ={calculateStartViewDate:PZ},wo={getViewStartByOptions:vS,getCellText:vZ,calculateCellIndex:yZ,calculateStartViewDate:CZ},ZQ={getDateForHeaderText:TZ},QQ={calculateStartViewDate:EZ},E0={getCurrentView:IZ},gn={addToStyles:CS,addWidthToStyle:DZ,addHeightToStyle:xZ,getGroupCellClasses:wZ,combineClasses:X$,getCellSizeHorizontalClass:SZ,getCellSizeVerticalClass:bZ},XQ={getThemeType:O$},Dh=T({},Hw,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new Zs({store:new $w(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=lt(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=lt(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(t){const e=j();return t=this._unwrappedValue(t),M(t)?(this._loadSingle(this._valueGetterExpr(),t).done(n=>{this._isValueEquals(this._valueGetter(n),t)?e.resolve(n):e.reject()}).fail(()=>{e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading(){var t;(t=this._loadValueDeferred)===null||t===void 0||t.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(t){return t=t??this._getCurrentValue(),t&&this._dataSource&&this._valueGetterExpr()==="this"&&(t=this._getItemKey(t)),Xi.unwrap(t)},_getItemKey(t){const e=this._dataSource.key();if(Array.isArray(e)){const n={};for(let i=0,s=e.length;i<s;i++)n[e[i]]=t[e[i]];return n}return e&&typeof t=="object"&&(t=t[e]),t},_isValueEquals(t,e){const n=this._dataSource&&this._dataSource.key();let i=this._compareValues(t,e);return!i&&n&&M(t)&&M(e)&&(Array.isArray(n)?i=this._compareByCompositeKey(t,e,n):i=this._compareByKey(t,e,n)),i},_compareByCompositeKey(t,e,n){const i=ue;if(!i(t)||!i(e))return!1;for(let s=0,r=n.length;s<r;s++)if(t[n[s]]!==e[n[s]])return!1;return!0},_compareByKey(t,e,n){const i=Xi.unwrap,s=rt(i(t[n]),t),r=rt(i(e[n]),e);return this._compareValues(s,r)},_compareValues:(t,e)=>zr(t,!0)===zr(e,!0),_initDynamicTemplates:B,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){const t=this.option("valueExpr");return ve(t)&&t!=="this"||ie(t)?t:null},_dataExpressionOptionChanged(t){switch(t.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),mf="dx-invalid-message",JQ="dx-invalid-message-auto",eX="dx-invalid-message-always",tX="dx-invalid-message-content",TS=Dl.inherit({_getDefaultOptions(){return T(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,preventScrollEvents:!1,positionSide:"top",boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget(){const{target:t}=this.option();this.option("position.of",t)},_ensureMessageNotEmpty(){this._textMarkup=this._getTextMarkup();const t=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(t)},_toggleVisibilityClasses(t){t?(this.$element().addClass(mf),this.$wrapper().addClass(mf)):(this.$element().removeClass(mf),this.$wrapper().removeClass(mf))},_updateContentId(){const{container:t,contentId:e}=this.option(),n=e??m(t).attr("aria-describedby");this.$content().addClass(tX).attr("id",n)},_renderInnerHtml(t){const e=t&&m(t);e==null||e.html(this._textMarkup)},_getTextMarkup(){const t=this.option("validationErrors")??[];let e="";return t.forEach(n=>{e+=(e?"<br />":"")+L2((n==null?void 0:n.message)??"")}),e},_toggleModeClass(){const t=this.option("mode");this.$wrapper().toggleClass(JQ,t==="auto").toggleClass(eX,t==="always")},updateMaxWidth(){const t=this.option("target"),e=et(t);let n="100%";e&&(n=Math.max(e,100)),this.option({maxWidth:n})},_getPositionsArray(t,e){switch(t){case"top":return[`${e} bottom`,`${e} top`];case"left":return["right","left"];case"right":return["left","right"];default:return[`${e} top`,`${e} bottom`]}},_updatePosition(){const{positionSide:t,rtlEnabled:e,offset:n,boundary:i}=this.option(),s=tB(e),r=this._getPositionsArray(t,s),o=L({},n);this.$element().addClass(`dx-invalid-message-${t}`),e&&t!=="left"&&t!=="right"&&(o.h=-o.h),t==="top"&&(o.v=-o.v),t==="left"&&(o.h=-o.h),this.option("position",{offset:o,boundary:i,my:r[0],at:r[1],collision:"none flip"})},_optionChanged(t){const{name:e,value:n,previousValue:i}=t;switch(e){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(t);break;case"boundary":this.option("position.boundary",n);break;case"mode":this._toggleModeClass(n);break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass(`dx-invalid-message-${i}`),this._updatePosition();break;case"container":this._updateContentId(),this.callBase(t);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(t)}}});re("dxValidationMessage",TS);const Pk="dx-invalid-message-auto",nX="dx-show-invalid-badge",Mk="dx-validation-target",iX=["outlined","filled","underlined"],Vk={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"},Fi=Kt.inherit({ctor(){this.showValidationMessageTimeout=null,this.validationRequest=at(),this.callBase.apply(this,arguments)},_createElement(t){this.callBase(t);const e=this.$element();e&&st(e[0],Mk,this)},_initOptions(t){this.callBase.apply(this,arguments),this.option(Qe.initValidationOptions(t))},_init(){this._initialValue=this.option("value"),this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions")),this.$element().addClass(nX)},_getDefaultOptions(){return T(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{},_showValidationMessage:!0,isDirty:!1})},_attachKeyboardEvents(){this.option("readOnly")||this.callBase()},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{validationError:!0})},_createValueChangeAction(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction(){this._valueChangeActionSuppressed=!1},_initMarkup(){var t;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),(t=this.option("_onMarkupRendered"))===null||t===void 0||t()},_raiseValueChangeAction(t,e){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(t,e))},_valueChangeArgs(t,e){return{value:t,previousValue:e,event:this._valueChangeEventInstance}},_saveValueChangeEvent(t){this._valueChangeEventInstance=t},_focusInHandler(t){const e=this.option("validationMessageMode")==="auto";if(this._canValueBeChangedByClick()&&e){var n;const i=(n=this._validationMessage)===null||n===void 0?void 0:n.$wrapper();i==null||i.removeClass(Pk),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>i==null?void 0:i.addClass(Pk),150)}return this.callBase(t)},_canValueBeChangedByClick:()=>!1,_getStylingModePrefix:()=>"dx-editor-",_renderStylingMode(){const t=this.option("stylingMode"),e=this._getStylingModePrefix(),n=iX.map(s=>e+s);n.forEach(s=>this.$element().removeClass(s));let i=e+t;if(!n.includes(i)){const s=this._getDefaultOptions().stylingMode,r=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;i=e+(r||s)}this.$element().addClass(i)},_getValidationErrors(){let t=this.option("validationErrors");return!t&&this.option("validationError")&&(t=[this.option("validationError")]),t},_disposeValidationMessage(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses(t){this.$element().toggleClass("dx-invalid",t),this.setAria("invalid",t||void 0)},_renderValidationState(){const t=this.option("isValid")&&this.option("validationStatus")!=="invalid",e=this._getValidationErrors(),n=this.$element();if(this._toggleValidationClasses(!t),!(!ae()||this.option("_showValidationMessage")===!1)&&(this._disposeValidationMessage(),!t&&e)){const{validationMessageMode:i,validationMessageOffset:s,validationBoundary:r,rtlEnabled:o}=this.option();this._$validationMessage=m("<div>").appendTo(n);const a=`dx-${new Et}`;this.setAria("describedby",a),this._validationMessage=new TS(this._$validationMessage,T({validationErrors:e,rtlEnabled:o,target:this._getValidationMessageTarget(),visualContainer:n,mode:i,positionSide:this._getValidationMessagePosition(),offset:s,boundary:r,contentId:a},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessagePosition(){return this.option("validationMessagePosition")},_getValidationMessageTarget(){return this.$element()},_toggleReadOnlyState(){const t=this.option("readOnly");this._toggleBackspaceHandler(t),this.$element().toggleClass("dx-state-readonly",!!t),this._setAriaReadonly(t)},_setAriaReadonly(t){this.setAria("readonly",t||void 0)},_toggleBackspaceHandler(t){const e=this._keyboardEventBindingTarget(),n=K("keydown","editorReadOnly");b.off(e,n),t&&b.on(e,n,i=>{tn(i)==="backspace"&&i.preventDefault()})},_dispose(){const t=this.$element()[0];st(t,Mk,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName(t){const e=this._getSubmitElement();e&&(t.length>0?e.attr("name",t):e.removeAttr("name"))},_getSubmitElement:()=>null,_setValidationMessageOption(t){var e;let{name:n,value:i}=t;const s=Vk[n]?Vk[n]:n;(e=this._validationMessage)===null||e===void 0||e.option(s,i)},_hasActiveElement:B,_optionChanged(t){var e;switch(t.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":t.value!=t.previousValue&&(this.option("isDirty",this._initialValue!==t.value),this.validationRequest.fire({value:t.value,editor:this})),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(t.value,t.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(t),(e=this._validationMessage)===null||e===void 0||e.updateMaxWidth();break;case"name":this._setSubmitElementName(t.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Qe.synchronizeValidationOptions(t,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(t);break;case"rtlEnabled":this._setValidationMessageOption(t),this.callBase(t);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,t);break;case"_showValidationMessage":case"isDirty":break;default:this.callBase(t)}},_resetToInitialValue(){this.option("value",this._initialValue)},blur(){this._hasActiveElement()&&Wh()},clear(){const t=this._getDefaultOptions();this.option("value",t.value)},reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length&&(this._initialValue=t),this._resetToInitialValue(),this.option("isDirty",!1),this.option("isValid",!0)}});Fi.isEditor=t=>t instanceof Fi;const sX=Fi;class rX extends uq{_focusTarget(){return m(this.element()).parent()}_nullValueSelectionSupported(){return!0}_getDefaultOptions(){const e=super._getDefaultOptions();return T(e,Dh._dataExpressionDefaultOptions(),{_itemAttributes:{role:"radio"}})}_initMarkup(){super._initMarkup(),Wr(()=>{this._itemElements().addClass("dx-radiobutton")})}_keyboardEventBindingTarget(){return this._focusTarget()}_postprocessRenderItem(e){const{itemData:{html:n},itemElement:i}=e;if(!n){const s=m("<div>").addClass("dx-radiobutton-icon");m("<div>").addClass("dx-radiobutton-icon-dot").appendTo(s);const r=m("<div>").append(s).addClass("dx-radio-value-container");m(i).prepend(r)}super._postprocessRenderItem(e)}_processSelectableItem(e,n){super._processSelectableItem(e,n),e.toggleClass("dx-radiobutton-checked",n).find(".dx-radiobutton-icon").first().toggleClass("dx-radiobutton-icon-checked",n),this.setAria("checked",n,e)}_refreshContent(){this._prepareContent(),this._renderContent()}_supportedKeys(){const e=super._supportedKeys();return T({},e,{enter(n){return n.preventDefault(),e.enter.apply(this,arguments)},space(n){return n.preventDefault(),e.space.apply(this,arguments)}})}_itemElements(){return this._itemContainer().children(this._itemSelector())}_setAriaSelectionAttribute(){}}class oF extends sX{_dataSourceOptions(){return{paginate:!1}}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{tablet:!0},options:{layout:"horizontal"}},{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}}])}_fireContentReadyAction(e){e&&super._fireContentReadyAction()}_focusTarget(){return this.$element()}_getAriaTarget(){return this.$element()}_getDefaultOptions(){const e=super._getDefaultOptions();return T(e,T(Dh._dataExpressionDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,layout:"vertical"}))}_getItemValue(e){return this._valueGetter?this._valueGetter(e):e.text}_getSubmitElement(){return this._$submitElement}_init(){super._init(),this._activeStateUnit=".dx-radiobutton",this._feedbackHideTimeout=100,this._initDataExpressions()}_initMarkup(){m(this.element()).addClass("dx-radiogroup"),this._renderSubmitElement(),this.setAria("role","radiogroup"),this._renderRadios(),this._renderLayout(),super._initMarkup()}_itemClickHandler(e){let{itemElement:n,event:i,itemData:s}=e;if(this.itemElements().is(n)){const r=this._getItemValue(s);r!==this.option("value")&&(this._saveValueChangeEvent(i),this.option("value",r))}}_getSelectedItemKeys(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.option("value");return this.option("valueExpr")!=="this"&&e===null||M(e)?[e]:[]}_setSelection(e){const n=this._unwrappedValue(e);this._setCollectionWidgetOption("selectedItemKeys",this._getSelectedItemKeys(n))}_renderValidationState(){var e;super._renderValidationState(),(e=this._validationMessage)===null||e===void 0||e.$content().attr("role","alert")}_optionChanged(e){const{name:n,value:i}=e;switch(this._dataExpressionOptionChanged(e),n){case"dataSource":this._invalidate();break;case"focusStateEnabled":case"accessKey":case"tabIndex":this._setCollectionWidgetOption(n,i);break;case"disabled":super._optionChanged(e),this._setCollectionWidgetOption(n,i);break;case"valueExpr":this._setCollectionWidgetOption("keyExpr",this._getCollectionKeyExpr());break;case"value":this._setSelection(i),this._setSubmitValue(i),super._optionChanged(e);break;case"items":this._setSelection(this.option("value"));break;case"itemTemplate":case"displayExpr":break;case"layout":this._renderLayout(),this._updateItemsSize();break;default:super._optionChanged(e)}}_render(){super._render(),this._updateItemsSize()}_renderLayout(){const e=this.option("layout"),n=m(this.element());n.toggleClass("dx-radiogroup-vertical",e==="vertical"),n.toggleClass("dx-radiogroup-horizontal",e==="horizontal")}_renderRadios(){this._areRadiosCreated=j();const e=m("<div>").appendTo(this.$element()),{displayExpr:n,accessKey:i,focusStateEnabled:s,itemTemplate:r,tabIndex:o}=this.option();this._createComponent(e,rX,{onInitialized:a=>{let{component:l}=a;this._radios=l},onContentReady:a=>{this._fireContentReadyAction(!0)},onItemClick:this._itemClickHandler.bind(this),displayExpr:n,accessKey:i,dataSource:this._dataSource,focusStateEnabled:s,itemTemplate:r,keyExpr:this._getCollectionKeyExpr(),noDataText:"",scrollingEnabled:!1,selectByClick:!1,selectionMode:"single",selectedItemKeys:this._getSelectedItemKeys(),tabIndex:o}),this._areRadiosCreated.resolve()}_renderSubmitElement(){this._$submitElement=m("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue()}_setOptionsByReference(){super._setOptionsByReference(),T(this._optionsByReference,{value:!0})}_setSubmitValue(e){e=e??this.option("value");const n=this.option("valueExpr")==="this"?this._displayGetter(e):e;this._$submitElement.val(n)}_setCollectionWidgetOption(e,n){this._areRadiosCreated.done(this._setWidgetOption.bind(this,"_radios",arguments))}_updateItemsSize(){if(this.option("layout")==="horizontal"){var e;(e=this.itemElements())===null||e===void 0||e.css("height","auto")}else{var n;const i=this.option("items").length;(n=this.itemElements())===null||n===void 0||n.css("height",100/i+"%")}}focus(){var e;(e=this._radios)===null||e===void 0||e.focus()}itemElements(){var e;return(e=this._radios)===null||e===void 0?void 0:e._itemElements()}}oF.include(Dh);re("dxRadioGroup",oF);const Bk="dx-buttongroup-item-has-width",gf={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},oX=ia.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new ea((t,e,n)=>{this._prepareItemStyles(t);const i=this.option("buttonTemplate");this._createComponent(t,Kn,T({},n,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(i)?n:{},template:n.template||i}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions(){return T(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(t){return ie(t)||this.option("integrationOptions.templates")[t]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(t){const e=t.data("dxItemIndex");e===0&&t.addClass("dx-buttongroup-first-item");const n=this.option("items");n&&e===n.length-1&&t.addClass("dx-buttongroup-last-item"),t.addClass("dx-shape-standard")},_renderItemContent(t){return t.container=m(t.container).parent(),this.callBase(t)},_setAriaSelectionAttribute(t,e){this.setAria("pressed",e,t)},_renderItemContentByNode(t,e){return t.container=m(t.container.children().first()),this.callBase(t,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>"dx-buttongroup-item",_itemSelectHandler(t){this.option("selectionMode")==="single"&&this.isItemSelected(t.currentTarget)||this.callBase(t)}}),IS=Kt.inherit({_getDefaultOptions(){return T(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass("dx-buttongroup"),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){const{stylingMode:t}=this.option();for(const e in gf)this.$element().removeClass(gf[e]);this.$element().addClass(gf[t]??gf.contained)},_fireSelectionChangeEvent(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_renderButtons(){const t=m("<div>").addClass("dx-buttongroup-wrapper").appendTo(this.$element()),e=this.option("selectedItems"),n={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:i=>{const s=this.option("width");M(s)&&m(i.itemElement).addClass(Bk)},onSelectionChanged:i=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(i.addedItems,i.removedItems)},onItemClick:i=>{this._itemClickAction(i)}};M(e)&&e.length&&(n.selectedItems=e),this._buttonsCollection=this._createComponent(t,oX,n)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(t){switch(t.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(t.name,t.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(t),this._buttonsCollection.itemElements().toggleClass(Bk,!!t.value);break;default:this.callBase(t)}}});re("dxButtonGroup",IS);const aX=Hh(),wl=Kt.inherit({_getDefaultOptions(){return T(this.callBase(),{indicatorSrc:"",activeStateEnabled:!1,hoverStateEnabled:!1,_animatingSegmentCount:1,_animatingSegmentInner:!1})},_defaultOptionsRules(){const t=xi();return this.callBase().concat([{device(){return X.real().platform==="android"&&!/chrome/i.test(aX.userAgent)},options:{viaImage:!0}},{device:()=>ii(t),options:{_animatingSegmentCount:2,_animatingSegmentInner:!0}},{device:()=>y9(t),options:{_animatingSegmentCount:7}}])},_useTemplates:()=>!1,_init(){this.callBase(),this.$element().addClass("dx-loadindicator");const e={role:"alert",label:q.format("Loading")};this.setAria(e)},_initMarkup(){this.callBase(),this._renderWrapper(),this._renderIndicatorContent(),this._renderMarkup()},_renderWrapper(){this._$wrapper=m("<div>").addClass("dx-loadindicator-wrapper"),this.$element().append(this._$wrapper)},_renderIndicatorContent(){this._$content=m("<div>").addClass("dx-loadindicator-content"),this._$wrapper.append(this._$content)},_renderMarkup(){const{viaImage:t,indicatorSrc:e}=this.option();WD()&&!t&&!e?this._renderMarkupForAnimation():this._renderMarkupForImage()},_renderMarkupForAnimation(){const t=this.option("_animatingSegmentInner");this._$indicator=m("<div>").addClass("dx-loadindicator-icon"),this._$content.append(this._$indicator);for(let e=this.option("_animatingSegmentCount");e>=0;--e){const n=m("<div>").addClass("dx-loadindicator-segment").addClass("dx-loadindicator-segment"+e);t&&n.append(m("<div>").addClass("dx-loadindicator-segment-inner")),this._$indicator.append(n)}},_renderMarkupForImage(){const{indicatorSrc:t}=this.option();t?(this._$wrapper.addClass("dx-loadindicator-image"),this._$wrapper.css("backgroundImage",`url(${t})`)):WD()&&this._renderMarkupForAnimation()},_renderDimensions(){this.callBase(),this._updateContentSizeForAnimation()},_updateContentSizeForAnimation(){if(!this._$indicator)return;let t=this.option("width"),e=this.option("height");if(t||e){t=me(this.$element()),e=Re(this.$element());const n=Math.min(e,t);this._$wrapper.css({height:n,width:n,fontSize:n})}},_clean(){this.callBase(),this._removeMarkupForAnimation(),this._removeMarkupForImage()},_removeMarkupForAnimation(){this._$indicator&&(this._$indicator.remove(),delete this._$indicator)},_removeMarkupForImage(){this._$wrapper.css("backgroundImage","none")},_optionChanged(t){switch(t.name){case"_animatingSegmentCount":case"_animatingSegmentInner":case"indicatorSrc":this._invalidate();break;default:this.callBase(t)}}});re("dxLoadIndicator",wl);class F_{constructor(e,n,i){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=n,this.name=e,this.options=i||{}}_addPlaceMarker(e){this.$placeMarker=m("<div>").appendTo(e)}_addToContainer(e){const{$placeMarker:n,$container:i}=this;n?n.replaceWith(e):e.appendTo(i)}_attachEvents(e,n){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){const{editor:e,options:n}=this;return n.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){const{instance:e,$placeMarker:n}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),n&&n.remove()}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){const{instance:n,$element:i}=this._create();this.instance=n,this._attachEvents(n,i)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}const lX=ot.down;class cX extends F_{_create(){const e=m("<span>").addClass("dx-clear-button-area").append(m("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){const{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,n){const{editor:i}=this,s=i.NAME;b.on(n,K(lX,s),r=>{r.preventDefault(),r.pointerType!=="mouse"&&i._clearValueHandler(r)}),b.on(n,K(_n,s),r=>i._clearValueHandler(r))}_legacyRender(e,n){e.toggleClass("dx-show-clear-button",n)}update(){!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&super.update();const{editor:n,instance:i}=this,s=n.$element(),r=this._isVisible();i&&i.toggleClass("dx-state-invisible",!r),this._legacyRender(s,r)}}class uX{constructor(e){this.NAME="dxLabel",this._props=e,this._id=`dx-texteditor-label-${new Et}`,this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&this._props.mode!=="hidden"}_render(){this._$before=m("<div>").addClass("dx-label-before"),this._$labelSpan=m("<span>"),this._$label=m("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=m("<div>").addClass("dx-label-after"),this._$root=m("<div>").addClass("dx-texteditor-label").attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){const e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach(),this._attachEvents()}_attachEvents(){const e=K(_n,this.NAME),n=K(Xh,this.NAME),i=K(eq,this.NAME);b.off(this._$labelSpan,e),b.off(this._$labelSpan,n),b.off(this._$labelSpan,i),this._isVisible()&&this._isOutsideMode()&&(b.on(this._$labelSpan,e,s=>{pe().getSelection().toString()===""&&(this._props.onClickHandler(),s.preventDefault())}),b.on(this._$labelSpan,n,s=>{this._props.onHoverHandler(s)}),b.on(this._$labelSpan,i,s=>{this._props.onActiveHandler(s)}))}_updateEditorLabelClass(e){if(this._props.$editor.removeClass("dx-texteditor-with-floating-label").removeClass("dx-texteditor-label-outside").removeClass("dx-texteditor-with-label"),e){const n=this._props.mode==="floating"?"dx-texteditor-with-floating-label":"dx-texteditor-with-label";this._props.$editor.addClass(n),this._isOutsideMode()&&this._props.$editor.addClass("dx-texteditor-label-outside")}}_isOutsideMode(){return this._props.mode==="outside"}_updateEditorBeforeButtonsClass(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible();if(this._props.$editor.removeClass("dx-texteditor-with-before-buttons"),e){const n=this._props.containsButtonsBefore?"dx-texteditor-with-before-buttons":"";this._props.$editor.addClass(n)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){if(this._isVisible()){const e=this._props.beforeWidth??this._props.getBeforeWidth();this._$before.css({width:e}),this._updateLabelTransform()}}_updateLabelTransform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._$labelSpan.css("transform",""),this._isVisible()&&this._isOutsideMode()){const i=(this._props.rtlEnabled?1:-1)*(me(this._$before)+e);this._$labelSpan.css("transform",`translateX(${i}px)`)}}_updateMaxWidth(){if(this._isVisible()&&!this._isOutsideMode()){const e=this._props.containerWidth??this._props.getContainerWidth();this._$label.css({maxWidth:e})}}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}class dX extends F_{_attachEvents(e,n){const{editor:i}=this;b.on(n,Xh,()=>{i.$element().addClass("dx-custom-button-hovered")}),b.on(n,x_,()=>{i.$element().removeClass("dx-custom-button-hovered")}),b.on(n,_n,s=>{s.stopPropagation()})}_create(){const{editor:e}=this,n=m("<div>");this._addToContainer(n);const i=e._createComponent(n,Kn,T({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}));return{$element:n,instance:i}}_prepareIntegrationOptions(e){return T({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){const e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){const{editor:e}=this;return e.option("visible")}_isDisabled(){return this.options.disabled!==void 0?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}function hX(t){(()=>{if(!t||typeof t!="object"||Array.isArray(t))throw it.Error("E1053")})(),(()=>{if(!("name"in t))throw it.Error("E1054")})(),(()=>{const{name:e}=t;if(typeof e!="string")throw it.Error("E1055")})(),(()=>{const{location:e}=t;"location"in t&&e!=="after"&&e!=="before"&&(t.location="after")})()}function Lk(t,e){if(t.indexOf(e)!==-1)throw it.Error("E1055",e);t.push(e)}function pX(t,e){return!!e.find(n=>n.name===t)}class fX{constructor(e,n){this.buttons=[],this.defaultButtonsInfo=n,this.editor=e}_compileButtonInfo(e){const n=[];return e.map(i=>{const s=typeof i=="string";if(s||hX(i),s||pX(i.name,this.defaultButtonsInfo)){const a=this.defaultButtonsInfo.find(l=>{let{name:c}=l;return c===i||c===i.name});if(!a)throw it.Error("E1056",this.editor.NAME,i);return Lk(n,i),a}const{name:o}=i;return Lk(n,o),T(i,{Ctor:dX})})}_createButton(e){const{Ctor:n,options:i,name:s}=e,r=new n(s,this.editor,i);return this.buttons.push(r),r}_renderButtons(e,n,i){let s=null;return(e?this._compileButtonInfo(e):this.defaultButtonsInfo).forEach(o=>{const{location:a="after"}=o;a===i&&this._createButton(o).render((s=s??m("<div>").addClass("dx-texteditor-buttons-container"),i==="before"?n.prepend(s):n.append(s),s))}),s}clean(){this.buttons.forEach(e=>e.dispose()),this.buttons=[]}getButton(e){const n=this.buttons.find(i=>{let{name:s}=i;return s===e});return n&&n.instance}renderAfterButtons(e,n){return this._renderButtons(e,n,"after")}renderBeforeButtons(e,n){return this._renderButtons(e,n,"before")}updateButtons(e){this.buttons.forEach(n=>{(!e||e.indexOf(n.name)!==-1)&&n.update()})}}const _f=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],mX=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];let gX=uX;function $k(t){if(M(t)&&!Array.isArray(t))throw it.Error("E1053")}const _X=Fi.inherit({ctor(t,e){e&&$k(e.buttons),this._buttonCollection=new fX(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions(){return T(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:t=>M(t)&&t!==!1?t:"",stylingMode:Me().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules(){return this.callBase().concat([{device(){const t=xi();return Un(t)},options:{labelMode:"floating",stylingMode:Me().editorStylingMode||"filled"}},{device(){const t=xi();return qn(t)},options:{labelMode:"outside"}}])},_getDefaultButtons:()=>[{name:"clear",Ctor:cX}],_isClearButtonVisible(){return this.option("showClearButton")&&!this.option("readOnly")},_input(){return this.$element().find(".dx-texteditor-input").first()},_isFocused(){return Kc(this._input())||this.callBase()},_inputWrapper(){return this.$element()},_buttonsContainer(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)},_isControlKey:t=>mX.includes(t),_renderStylingMode(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderButtonContainers(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render(){this.callBase(),this._refreshValueChangeEvent(),this._refreshEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput(){this._$textEditorContainer=m("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=m("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput())},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator(){this.$element().addClass("dx-validation-pending");const t=this._getInputContainer(),e=m("<div>").addClass("dx-pending-indicator").appendTo(t);this._pendingIndicator=this._createComponent(e,wl)},_disposePendingIndicator(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass("dx-validation-pending"))},_renderValidationState(){this.callBase(),this.option("validationStatus")==="pending"?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):(this.option("validationStatus")==="invalid"&&(this._showValidMark=!1),!this._showValidMark&&this.option("showValidationMark")===!0&&(this._showValidMark=this.option("validationStatus")==="valid"&&!!this._pendingIndicator),this._disposePendingIndicator()),this._toggleValidMark()},_getButtonsContainer(){return this._$textEditorContainer},_renderButtonContainers(){const t=this.option("buttons"),e=this._getButtonsContainer();this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(t,e),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(t,e)},_cleanButtonContainers(){var t,e;(t=this._$beforeButtonsContainer)===null||t===void 0||t.remove(),(e=this._$afterButtonsContainer)===null||e===void 0||e.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this.callBase()},_createInput(){const t=m("<input>");return this._applyInputAttributes(t,this.option("inputAttr")),t},_setSubmitElementName(t){const e=this.option("inputAttr.name");return this.callBase(t||e||"")},_applyInputAttributes(t,e){const n=T(this._getDefaultAttributes(),e);t.attr(n).addClass("dx-texteditor-input"),this._setInputMinHeight(t)},_setInputMinHeight(t){t.css("minHeight",this.option("height")?"0":"")},_getPlaceholderAttr(){const{ios:t,mac:e}=X.real(),{placeholder:n}=this.option();return n||(t||e?" ":null)},_getDefaultAttributes(){return{autocomplete:"off",placeholder:this._getPlaceholderAttr()}},_updateButtons(t){this._buttonCollection.updateButtons(t)},_updateButtonsStyling(t){N(this.option("buttons"),(e,n)=>{let{options:i,name:s}=n;if(i&&!i.stylingMode&&this.option("visible")){const r=this.getButton(s);r.option&&r.option("stylingMode",t==="underlined"?"text":"contained")}})},_renderValue(){return this._renderInputValue().promise()},_renderInputValue(t){t=t??this.option("value");let e=this.option("text");const n=this.option("displayValue"),i=this.option("displayValueFormatter");return n!==void 0&&t!==null?e=i(n):M(e)||(e=i(t)),this.option("text",e),this._input().val()!==(M(e)?e:"")?this._renderDisplayText(e):this._toggleEmptinessEventHandler(),j().resolve()},_renderDisplayText(t){this._input().val(t),this._toggleEmptinessEventHandler()},_isValueValid(){if(this._input().length){const{validity:t}=this._input().get(0);if(t)return t.valid}return!0},_toggleEmptiness(t){this.$element().toggleClass("dx-texteditor-empty",t),this._togglePlaceholder(t)},_togglePlaceholder(t){this.$element().find(".dx-placeholder").eq(0).toggleClass("dx-state-invisible",!t)},_renderProps(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState(t){this.callBase.apply(this,arguments),this._input().prop("disabled",t)},_toggleTabIndex(){const t=this._input(),e=this.option("disabled"),n=this.option("focusStateEnabled");e||!n?t.attr("tabIndex",-1):t.removeAttr("tabIndex")},_toggleReadOnlyState(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue(){return this.option("readOnly")},_toggleSpellcheckState(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize(){this._labelContainerElement&&(Ka.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer(){return this._input()},_getLabelContainerWidth(){return me(this._getLabelContainer())},_getLabelBeforeWidth(){return(this._$beforeButtonsContainer&&me(this._$beforeButtonsContainer))??0},_updateLabelWidth(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_getFieldElement(){return this._getLabelContainer()},_setFieldAria(t){var e;const n=this.option("inputAttr"),i=n==null?void 0:n["aria-label"],s=(e=this._label)===null||e===void 0?void 0:e.getId(),r=i?void 0:s;if(r||t){const o={labelledby:r,label:i};this.setAria(o,this._getFieldElement())}},_renderLabel(){this._unobserveLabelContainerResize(),this._labelContainerElement=m(this._getLabelContainer()).get(0);const{label:t,labelMode:e,labelMark:n,rtlEnabled:i}=this.option(),s={onClickHandler:()=>{this.focus()},onHoverHandler:r=>{r.stopPropagation()},onActiveHandler:r=>{r.stopPropagation()},$editor:this.$element(),text:t,mark:n,mode:e,rtlEnabled:i,containsButtonsBefore:!!this._$beforeButtonsContainer,getContainerWidth:()=>this._getLabelContainerWidth(),getBeforeWidth:()=>this._getLabelBeforeWidth()};this._label=new gX(s),this._setFieldAria(),this._labelContainerElement&&Ka.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);const t=this._input(),e=this.option("placeholder"),n={id:e?`dx-${new Et}`:void 0,"data-dx_placeholder":e},i=this._$placeholder=m("<div>").attr(n);i.insertAfter(t),i.addClass("dx-placeholder")},_attachPlaceholderEvents(){const t=K(ot.up,this.NAME);b.on(this._$placeholder,t,()=>{b.trigger(this._input(),"focus")}),this._toggleEmptinessEventHandler()},_placeholder(){return this._$placeholder||m()},_clearValueHandler(t){const e=this._input();t.stopPropagation(),this._saveValueChangeEvent(t),this._clearValue(),!this._isFocused()&&b.trigger(e,"focus"),b.trigger(e,"input")},_clearValue(){this.clear()},_renderEvents(){const t=this._input();N(_f,(e,n)=>{if(this.hasActionSubscription(`on${n}`)){const i=this._createActionByOption(`on${n}`,{excludeValidators:["readOnly"]});b.on(t,K(n.toLowerCase(),this.NAME),s=>{this._disposed||i({event:s})})}})},_refreshEvents(){const t=this._input();N(_f,(e,n)=>{b.off(t,K(n.toLowerCase(),this.NAME))}),this._renderEvents()},_keyPressHandler(){this.option("text",this._input().val())},_keyDownHandler(t){const e=this._input(),n=t.ctrlKey&&tn(t)==="enter",i=e.val()!==this.option("value");n&&i&&b.trigger(e,"change")},_getValueChangeEventOptionName:()=>"valueChangeEvent",_renderValueChangeEvent(){const t=K(this._renderValueEventName(),`${this.NAME}TextChange`),e=K(this.option(this._getValueChangeEventOptionName()),`${this.NAME}ValueChange`),n=K("keydown",`${this.NAME}TextChange`),i=this._input();b.on(i,t,this._keyPressHandler.bind(this)),b.on(i,e,this._valueChangeEventHandler.bind(this)),b.on(i,n,this._keyDownHandler.bind(this))},_cleanValueChangeEvent(){const t=`.${this.NAME}ValueChange`,e=`.${this.NAME}TextChange`;b.off(this._input(),t),b.off(this._input(),e)},_refreshValueChangeEvent(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:()=>"input change keypress",_focusTarget(){return this._input()},_focusEventTarget(){return this.element()},_isInput(t){return t===this._input().get(0)},_preventNestedFocusEvent(t){if(t.isDefaultPrevented())return!0;let e=this._isNestedTarget(t.relatedTarget);return t.type==="focusin"?e=e&&this._isNestedTarget(t.target)&&!this._isInput(t.target):e||this._toggleFocusClass(!1,this.$element()),e&&t.preventDefault(),e},_isNestedTarget(t){return!!this.$element().find(t).length},_focusClassTarget(){return this.$element()},_focusInHandler(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_focusOutHandler(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_toggleFocusClass(t,e){this.callBase(t,this._focusClassTarget(e))},_hasFocusClass(t){return this.callBase(m(t||this.$element()))},_renderEmptinessEvent(){const t=this._input();b.on(t,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler(){const t=this._input().val(),e=(t===""||t===null)&&this._isValueValid();this._toggleEmptiness(e)},_valueChangeEventHandler(t,e){this.option("readOnly")||(this._saveValueChangeEvent(t),this.option("value",arguments.length>1?e:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),b.off(this._input(),"keyup.onEnterKey.dxTextEditor"),b.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp(t){this._disposed||tn(t)==="enter"&&this._enterKeyAction({event:t})},_updateValue(){this._options.silent("text",null),this._renderValue()},_dispose(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement(){return this._input()},_hasActiveElement(){return this._input().is(W.getActiveElement(this._input()[0]))},_optionChanged(t){const{name:e,fullName:n,value:i}=t,s=e.replace("on","");if(_f.includes(s)){this._refreshEvents();return}switch(e){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(t),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0),this._input().attr({placeholder:this._getPlaceholderAttr()});break;case"label":this._label.updateText(i),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(i);break;case"labelMode":this._label.updateMode(i),this._setFieldAria();break;case"width":this.callBase(t),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(t);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),this.callBase(t);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(e));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":n===e&&$k(i),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(t),i&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;default:this.callBase(t)}},_renderInputType(){this._setInputType(this.option("mode"))},_setInputType(t){const e=this._input();t==="search"&&(t="text");try{e.prop("type",t)}catch{e.prop("type","text")}},getButton(t){return this._buttonCollection.getButton(t)},focus(){b.trigger(this._input(),"focus")},clear(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());const t=this._getDefaultOptions();this.option("value")===t.value?(this._options.silent("text",""),this._renderValue()):this.option("value",t.value)},_resetToInitialValue(){this.option("value")===this._initialValue?(this._options.silent("text",this._initialValue),this._renderValue()):this.callBase(),this._disposePendingIndicator(),this._showValidMark=!1,this._toggleValidMark()},_toggleValidMark(){this.$element().toggleClass("dx-valid",!!this._showValidMark)},reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length?this.callBase(t):this.callBase()},on(t,e){const n=this.callBase(t,e),i=t.charAt(0).toUpperCase()+t.substr(1);return _f.includes(i)&&this._refreshEvents(),n}});class aF{constructor(e){this._value=" ",T(this,e)}next(e){if(!arguments.length)return this._next;this._next=e}_prepareHandlingArgs(e,n){n=n||{};const i=Object.prototype.hasOwnProperty.call(e,"value")?"value":"text";return e[i]=n.str??e[i],e.start=n.start??e.start,e.length=n.length??e.length,e.index+=1,e}first(e){return e=e||0,this.next().first(e+1)}isAccepted(e){return!1}adjustedCaret(e,n,i){return n?this._adjustedForward(e,0,i):this._adjustedBackward(e,0,i)}_adjustedForward(e,n,i){}_adjustedBackward(e,n,i){}isValid(e){}reset(){}clear(e){}text(){}value(){}rawValue(){}handle(e){}}class yX extends aF{next(){}handle(){return 0}text(){return""}value(){return""}first(){return 0}rawValue(){return""}adjustedCaret(){return 0}isValid(){return!0}}class lF extends aF{text(){return(this._value!==" "?this._value:this.maskChar)+this.next().text()}value(){return this._value+this.next().value()}rawValue(){return this._value+this.next().rawValue()}handle(e){const n=Object.prototype.hasOwnProperty.call(e,"value")?e.value:e.text;if(!n||!n.length||!e.length)return 0;if(e.start)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start-1}));const i=n[0],s=n.substring(1);return this._tryAcceptChar(i,e),this._accepted()?this.next().handle(this._prepareHandlingArgs(e,{str:s,length:e.length-1}))+1:this.handle(this._prepareHandlingArgs(e,{str:s,length:e.length-1}))}clear(e){this._tryAcceptChar(" ",e),this.next().clear(this._prepareHandlingArgs(e))}reset(){this._accepted(!1),this.next().reset()}_tryAcceptChar(e,n){if(this._accepted(!1),!this._isAllowed(e,n))return;const i=e===" "?this.maskChar:e;n.fullText=n.fullText.substring(0,n.index)+i+n.fullText.substring(n.index+1),this._accepted(!0),this._value=e}_accepted(e){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!e}first(e){return this._value===" "?e||0:super.first(e)}_isAllowed(e,n){return e===" "?!0:this._isValid(e,n)}_isValid(e,n){const{allowedChars:i}=this;return i instanceof RegExp?i.test(e):ie(i)?i(e,n.index,n.fullText):Array.isArray(i)?i.includes(e):i===e}isAccepted(e){return e===0?this._accepted():this.next().isAccepted(e-1)}_adjustedForward(e,n,i){return n>=e?n:this.next()._adjustedForward(e,n+1,i)||n+1}_adjustedBackward(e,n){return n>=e-1?e:this.next()._adjustedBackward(e,n+1)||n+1}isValid(e){return this._isValid(this._value,e)&&this.next().isValid(this._prepareHandlingArgs(e))}}class Fk extends lF{value(){return this.next().value()}handle(e){const n=Object.prototype.hasOwnProperty.call(e,"value"),i=n?e.value:e.text;if(!i.length||!e.length)return 0;if(e.start||n)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start&&e.start-1}));const s=i[0],r=i.substring(1);this._tryAcceptChar(s);const o=this._isAllowed(s)?this._prepareHandlingArgs(e,{str:r,length:e.length-1}):e;return this.next().handle(o)+1}clear(e){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(e))}_tryAcceptChar(e){this._accepted(this._isValid(e))}_isValid(e){return e===this.maskChar}first(e){return e=e||0,this.next().first(e+1)}_adjustedForward(e,n,i){return n>=e&&i===this.maskChar?n:e===n+1&&this._accepted()?e:this.next()._adjustedForward(e,n+1,i)}_adjustedBackward(e,n){return n>=e-1?0:this.next()._adjustedBackward(e,n+1)}isValid(e){return this.next().isValid(this._prepareHandlingArgs(e))}}const vX="blur beforedeactivate",CX=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],DX=["historyUndo","historyRedo"],xX=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function wX(t){return" ".repeat(t)}class SX{constructor(e){this.editor=e}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}_attachChangeEventHandler(){if(!this._editorOption("valueChangeEvent").split(" ").includes("change"))return;const e=this._editorInput(),n=K(vX,"dxMask");b.on(e,n,i=>{this.editor._changeHandler(i)})}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(e){const{originalEvent:n}=e;if(!n)return;const{inputType:i}=n;if(DX.includes(i))this._handleHistoryInputEvent();else if(CX.includes(i))this._handleBackwardDeleteInputEvent();else{const s=this._editorCaret();if(!s.end)return;this._clearSelectedText(),this._autoFillHandler(n),this._editorCaret(s),this._handleInsertTextInputEvent(n.data)}this._editorOption("text")===this._previousText&&e.stopImmediatePropagation()}_handleHistoryInputEvent(){const e=this._editorCaret();this._updateEditorMask({start:e.start,length:e.end-e.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText();const e=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret(),this._editorCaret().start!==e.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(){var e,n;const i=((e=this._prevCaret)===null||e===void 0?void 0:e.end)-((n=this._prevCaret)===null||n===void 0?void 0:n.start)||1,s=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:s.start,length:i,text:wX(i)}))}_handleInsertTextInputEvent(e){var n;const i=e??"";this.editor.setForwardDirection(),this._updateEditorMask({start:((n=this._prevCaret)===null||n===void 0?void 0:n.start)??0,length:i.length||1,text:i})||this._editorCaret(this._prevCaret)}_updateEditorMask(e){const n=e.text.length,i=this.editor._handleChain(e);if(this.editor._displayMask(),this.editor.isForwardDirection()){const{start:s,end:r}=this._editorCaret(),o=i-n;i>1&&n===1&&this._editorCaret({start:s+o,end:r+o}),this.editor._adjustCaret()}return!!i}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{const e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout(()=>{this._editorCaret({start:e,end:e})},0)}}_focusOutHandler(e){this.editor._changeHandler(e),this._editorOption("showMaskMode")==="onFocus"&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(e){const{editor:n}=this;n._maskKeyHandler(e,()=>{n._hasSelection()||n._handleKey(" ")})}_cutHandler(e){const n=this._editorCaret(),i=this._editorInput().val().substring(n.start,n.end);this.editor._maskKeyHandler(e,()=>ID(e,i))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout(()=>{const e=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",e)})}_pasteHandler(e){const{editor:n}=this;if(this._editorOption("disabled"))return;const i=this._editorCaret();n._maskKeyHandler(e,()=>{const s=ID(e),r=n._maskRulesChain.text().substring(i.end),o=n._handleChain({text:s,start:i.start,length:s.length}),a=i.start+o;n._handleChain({text:r,start:a,length:r.length}),n._caret({start:a,end:a})})}_autoFillHandler(e){const{editor:n}=this,i=this._editorInput().val();this._inputHandlerTimer=setTimeout(()=>{this._isAutoFill()&&(n._maskKeyHandler(e,()=>{n._handleChain({text:i,start:0,length:i.length})}),n._validateMask())})}_isAutoFill(){const e=this._editorInput();if(is.webkit){const n=e.get(0);return(n==null?void 0:n.matches(":-webkit-autofill"))??!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}_clearTimers(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}getHandler(e){return n=>{var i;(i=this[`_${e}Handler`])===null||i===void 0||i.call(this,n)}}attachEvents(){const e=this._editorInput();xX.forEach(n=>{const i=K(n.toLowerCase(),"dxMask");b.on(e,i,this.getHandler(n))}),this._attachChangeEventHandler()}detachEvents(){this._clearTimers(),b.off(this._editorInput(),".dxMask")}clean(){this._clearTimers()}}const{ios:bX,mac:EX}=X.real(),TX=bX||EX,IX=function(t){let e;try{e={start:t.selectionStart,end:t.selectionEnd}}catch{e={start:0,end:0}}return e},AX=function(t,e){const n=W.getBody();if(!(!n.contains(t)&&!n.contains(t.getRootNode().host)))try{t.selectionStart=e.start,t.selectionEnd=e.end}catch{}},cF=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t=m(t).get(0),!M(e))return IX(t);!n&&TX&&W.getActiveElement(t)!==t||AX(t,e)},Hk=cF,kX={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:t=>yf(t),l:t=>yf(t)||zk(t),C:/\S/,c:/./,A:t=>yf(t)||Nk(t),a:t=>yf(t)||Nk(t)||zk(t)};function Nk(t){return/[0-9]/.test(t)}function yf(t){const e=t.charCodeAt();return e>64&&e<91||e>96&&e<123||e>127}function zk(t){return t===" "}const AS=_X.inherit({_getDefaultOptions(){return T(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:q.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys(){const t=this,e={del:t._maskStrategy.getHandler("del"),enter:t._changeHandler},n=t.callBase();return N(e,(i,s)=>{const r=n[i];n[i]=function(o){t.option("mask")&&s.call(t,o),r&&r(o)}}),n},_getSubmitElement(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy(){this._maskStrategy=new SX(this)},_initMarkup(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers(){if(!(this._onMouseWheel!==B))return;const e=this._input(),n=K(C_,this.NAME),i=this._createAction(s=>{const{event:r}=s;Kc(e)&&!bn(r)&&(this._onMouseWheel(r),r.preventDefault(),r.stopPropagation())});b.off(e,n),b.on(e,n,s=>{i({event:s})})},_onMouseWheel:B,_useMaskBehavior(){return!!this.option("mask")},_attachDropEventHandler(){if(!this._useMaskBehavior())return;const e=K("drop",this.NAME),n=this._input();b.off(n,e),b.on(n,e,i=>i.preventDefault())},_render(){this._attachMouseWheelEventHandlers(),this._renderMask(),this.callBase(),this._attachDropEventHandler()},_renderHiddenElement(){this.option("mask")&&(this._$hiddenElement=m("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask(){this.$element().removeClass("dx-texteditor-masked"),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass("dx-texteditor-masked"),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_changeHandler(t){const e=this._input(),n=e.val();if(n===this._changedValue)return;this._changedValue=n;const i=Kw(t,{type:"change"});b.trigger(e,i)},_parseMask(){this._maskRules=T({},kX,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule(t){const e=this.option("mask");if(t>=e.length)return new yX;const n=e[t],i=n==="\\",s=i?new Fk({maskChar:e[t+1]}):this._getMaskRule(n);return s.next(this._parseMaskRule(t+1+i)),s},_getMaskRule(t){let e;return N(this._maskRules,(n,i)=>{if(n===t)return e={pattern:n,allowedChars:i},!1}),M(e)?new lF(T({maskChar:this.option("maskChar")||" "},e)):new Fk({maskChar:t})},_renderMaskedValue(){if(!this._maskRulesChain)return;const t=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());const e={length:t.length};e[this._isMaskedValueMode()?"text":"value"]=t,this._handleChain(e),this._displayMask()},_replaceSelectedText(t,e,n){if(n===void 0)return t;const i=t.slice(0,e.start),s=t.slice(e.end);return i+n+s},_isMaskedValueMode(){return this.option("useMaskedValue")},_displayMask(t){t=t||this._caret(),this._renderValue(),this._caret(t)},_isValueEmpty(){return dv(this._value)},_shouldShowMask(){return this.option("showMaskMode")==="onFocus"?Kc(this._input())||!this._isValueEmpty():!0},_showMaskPlaceholder(){if(this._shouldShowMask()){const t=this._maskRulesChain.text();this.option("text",t),this.option("showMaskMode")==="onFocus"&&this._renderDisplayText(t)}},_renderValue(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){const t=this._maskRulesChain.value(),e=dv(t)?"":this._getPreparedValue();this._$hiddenElement.val(e)}return this.callBase()},_getPreparedValue(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler(t){if(!this._maskRulesChain){this.callBase.apply(this,arguments);return}this._saveValueChangeEvent(t),this.option("value",this._getPreparedValue())},_isControlKeyFired(t){return this._isControlKey(tn(t))||bn(t)},_handleChain(t){const e=this._maskRulesChain.handle(this._normalizeChainArguments(t));return this._updateMaskInfo(),e},_normalizeChainArguments(t){return t=t||{},t.index=0,t.fullText=this._maskRulesChain.text(),t},_convertToValue(t){return this._isMaskedValueMode()?t=this._replaceMaskCharWithEmpty(t||this._textValue||""):t=t||this._value||"",t},_replaceMaskCharWithEmpty(t){return t.replace(new RegExp(this.option("maskChar"),"g")," ")},_maskKeyHandler(t,e){if(this.option("readOnly"))return;this.setForwardDirection(),t.preventDefault(),this._handleSelection();const n=this._input().val(),i=()=>{n!==this._input().val()&&b.trigger(this._input(),"input")},s=e();s?s.then(i):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),i())},_handleKey(t,e){this._direction(e||"forward"),this._adjustCaret(t),this._handleKeyChain(t),this._moveCaret()},_handleSelection(){if(!this._hasSelection())return;const t=this._caret(),e=new Array(t.end-t.start+1).join(" ");this._handleKeyChain(e)},_handleKeyChain(t){const e=this._caret(),n=this.isForwardDirection()?e.start:e.start-1,i=this.isForwardDirection()?e.end:e.end-1,s=n===i?1:i-n;this._handleChain({text:t,start:n,length:s})},_tryMoveCaretBackward(){this.setBackwardDirection();const t=this._caret().start;return this._adjustCaret(),!t||t!==this._caret().start},_adjustCaret(t){const e=this._caret().start,n=this.isForwardDirection(),i=this._maskRulesChain.adjustedCaret(e,n,t);this._caret({start:i,end:i})},_moveCaret(){const t=this._caret().start,e=t+(this.isForwardDirection()?0:-1),n=this._maskRulesChain.isAccepted(e)?t+(this.isForwardDirection()?1:-1):t;this._caret({start:n,end:n})},_caret(t,e){const n=this._input();if(n.length){if(!arguments.length)return Hk(n);Hk(n,t,e)}},_hasSelection(){const t=this._caret();return t.start!==t.end},_direction(t){if(!arguments.length)return this._typingDirection;this._typingDirection=t},setForwardDirection(){this._direction("forward")},setBackwardDirection(){this._direction("backward")},isForwardDirection(){return this._direction()==="forward"},_updateMaskInfo(){this._textValue=this._maskRulesChain.text(),this._value=this._maskRulesChain.value()},_clean(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask(){if(!this._maskRulesChain)return;const t=dv(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})},_updateHiddenElement(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption(){this._updateHiddenElement(),this._renderMask(),this._validateMask(),this._refreshValueChangeEvent()},_processEmptyMask(t){if(t)return;const e=this.option("value");this.option({text:e,isValid:!0,validationError:null}),this.validationRequest.fire({value:e,editor:this}),this._renderValue()},_optionChanged(t){switch(t.name){case"mask":this._updateMaskOption(),this._processEmptyMask(t.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(t),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(t)}},clear(){const{value:t}=this._getDefaultOptions();this.option("value")===t&&this._renderMaskedValue(),this.callBase()}});re("dxTextEditor",AS);const RX=pe(),OX=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],kS=AS.inherit({ctor(t,e){e&&(this._showClearButton=e.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions(){return T(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup(){this.$element().addClass("dx-textbox"),this.callBase(),this.setAria("role","textbox")},_renderInputType(){this.callBase(),this._renderSearchMode()},_useTemplates:()=>!1,_renderProps(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp(){const t=this._getMaxLength();t&&t>0?this._input().attr("maxLength",t):this._input().removeAttr("maxLength")},_renderSearchMode(){const t=this._$element;this.option("mode")==="search"?(t.addClass("dx-searchbox"),this._renderSearchIcon(),this._showClearButton===void 0&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(t.removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",this._showClearButton===void 0?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon(){const t=m("<div>").addClass("dx-icon").addClass("dx-icon-search");t.prependTo(this._input().parent()),this._$searchIcon=t},_getLabelContainerWidth(){if(this._$searchIcon){const t=this._input().parent();return me(t)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth(){let t=this.callBase();return this._$searchIcon&&(t+=et(this._$searchIcon)),t},_optionChanged(t){switch(t.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(t),this._updateLabelWidth();break;case"mask":this.callBase(t),this._toggleMaxLengthProp();break;default:this.callBase(t)}},_onKeyDownCutOffHandler(t){const e=this._getMaxLength();if(e&&!t.ctrlKey&&!this._hasSelection()){const n=m(t.target),i=tn(t);return this._cutOffExtraChar(n),n.val().length<e||OX.includes(i)||RX.getSelection().toString()!==""}return!0},_onChangeCutOffHandler(t){const e=m(t.target);this.option("maxLength")&&this._cutOffExtraChar(e)},_cutOffExtraChar(t){const e=this._getMaxLength(),n=t.val();e&&n.length>e&&t.val(n.substr(0,e))},_getMaxLength(){return!!this.option("mask")?null:this.option("maxLength")}});re("dxTextBox",kS);const PX="dx-dropdowneditor-button-visible",MX="dxDropDownEditor-selectLabel";let VX=class extends F_{constructor(e,n,i){super(e,n,i),this.currentTemplate=null}_attachEvents(e){const{editor:n}=this;e.option("onClick",i=>{var s;if((s=n._shouldCallOpenHandler)!==null&&s!==void 0&&s.call(n)){n._openHandler(i);return}!n.option("openOnFieldClick")&&n._openHandler(i)}),b.on(e.$element(),"mousedown",i=>{n.$element().is(".dx-state-focused")&&i.preventDefault()})}_create(){const{editor:e}=this,n=m("<div>"),i=this._getOptions();this._addToContainer(n);const s=e._createComponent(n,Kn,T({},i,{elementAttr:{"aria-label":q.format(MX)}}));return this._legacyRender(e.$element(),n,i.visible),{$element:n,instance:s}}_getOptions(){const{editor:e}=this,n=this._isVisible(),s={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:n};return this._addTemplate(s),s}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,n,i){e.toggleClass(PX,i),n&&n.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){const{editor:n,instance:i}=this,s=n.$element(),r=this._getOptions();i==null||i.option(r),this._legacyRender(s,i==null?void 0:i.$element(),r.visible)}}};const Cg=function(t){if(ae())return et(t)},RS=function(t){return t===null&&(t=void 0),typeof t=="function"&&(t=t()),t},Wk="dx-dropdowneditor-input-wrapper",vf="dx-dropdowneditor-overlay",BX="dx-dropdowneditor-overlay-flipped",LX="dx-dropdowneditor-active",$X="dx-dropdowneditor-field-clickable",FX="dx-dropdowneditor-field-template-wrapper",Gk=X.current().platform==="ios",OS=kS.inherit({_supportedKeys(){return T({},this.callBase(),{tab(t){if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length){this.close();return}const e=t.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(b.trigger(e,"focus"),e.select()),t.preventDefault()},escape(t){return this.option("opened")&&t.preventDefault(),this.close(),!0},upArrow(t){return!bn(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)?(this.close(),!1):!0},downArrow(t){return!bn(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)?(this._validatedOpening(),!1):!0},enter(t){return this.option("opened")&&(t.preventDefault(),this._valueChangeEventHandler(t)),!0}})},_getDefaultButtons(){return this.callBase().concat([{name:"dropDown",Ctor:VX}])},_getDefaultOptions(){return T(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:q.format("OK"),cancelButtonText:q.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:()=>!0,_getDefaultPopupPosition(t){const e=tB(t);return{offset:{h:0,v:-1},my:`${e} top`,at:`${e} bottom`,collision:"flip flip"}},_defaultOptionsRules(){return this.callBase().concat([{device(t){return t.platform==="generic"},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper(){return this.$element().find(`.${Wk}`).first()},_init(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition(t){const{my:e,at:n}=this._getDefaultPopupPosition(t),i=this.option("popupPosition");this.option("popupPosition",T({},i,{my:e,at:n}))},_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())},_render(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl(){this.option("deferRendering")||this._createPopup()},_renderInput(){this.callBase(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()},_wrapInput(){this._$container=this.$element().wrapInner(m("<div>").addClass(Wk)).children().eq(0)},_getAriaHasPopup:()=>"true",_getAriaAutocomplete:()=>"none",_getAriaRole:()=>"combobox",_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})},_readOnlyPropValue(){return!this._isEditable()||this.callBase()},_cleanFocusState(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask(){this.option("fieldTemplate")||this.callBase()},_renderField(){const t=this._getFieldTemplate();t&&this._renderTemplatedField(t,this._fieldRenderData())},_renderPlaceholder(){!!this._getFieldTemplate()||this.callBase()},_renderValue(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer},_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=m("<div>").addClass(FX).prependTo(this.$element())))},_renderTemplatedField(t,e){const n=Kc(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove(),this._$templateWrapper.empty();const i=this._$templateWrapper;t.render({model:e,container:se(i),onRendered:()=>{if(!!!this.$element().find(i).length)return;const r=this._input();if(!r.length)throw it.Error("E1010");this._integrateInput(),n&&b.trigger(r,"focus")}})},_integrateInput(){var t;const{isValid:e}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!e),(t=this.option("_onMarkupRendered"))===null||t===void 0||t()},_refreshEmptinessEvent(){b.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData(){return this.option("value")},_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new nr(t=>{const e=m("<div>").addClass("dx-dropdowneditor-icon");m(t.container).append(e)})}),this.callBase()},_renderOpenHandler(){const t=this._inputWrapper(),e=K(_n,this.NAME),n=this.option("openOnFieldClick");b.off(t,e),b.on(t,e,this._getInputClickHandler(n)),this.$element().toggleClass($X,n),n&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler(){Gk&&(this._detachFocusOutEvents(),b.on(this._inputWrapper(),K("focusout",this.NAME),t=>{const e=t.relatedTarget;e&&this.option("opened")&&this._isTargetOutOfComponent(e)&&this.close()}))},_isTargetOutOfComponent(t){const e=this.content?m(this.content()).closest(`.${vf}`):this._$popup;return m(t).closest(`.${vf}`,e).length===0},_detachFocusOutEvents(){Gk&&b.off(this._inputWrapper(),K("focusout",this.NAME))},_getInputClickHandler(t){return t?e=>{this._executeOpenAction(e)}:()=>{this._focusInput()}},_openHandler(){this._toggleOpenState()},_executeOpenAction(t){this._openOnFieldClickAction({event:t})},_keyboardEventBindingTarget(){return this._input()},_focusInput(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!Kc(this._input())&&(this._resetCaretPosition(),b.trigger(this._input(),"focus")),!0)},_resetCaretPosition(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const e=this._input().get(0);if(e){const{value:n}=e,i=M(n)&&(t||this._isEditable())?n.length:0;this._caret({start:i,end:i},!0)}},_isEditable(){return this.option("acceptCustomValue")},_toggleOpenState(t){this._focusInput()&&(this.option("readOnly")||(t=arguments.length?t:!this.option("opened"),this.option("opened",t)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState(){const t=this.option("opened");t&&this._createPopup(),this.$element().toggleClass(LX,t),this._setPopupOption("visible",t);const e={expanded:t,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",t?this._popupContentId:void 0,this.$element())},_createPopup(){this._$popup||(this._$popup=m("<div>").addClass(vf).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())},_setPopupAriaLabel(){const t=this._popup.$overlayContent();this.setAria("label","Dropdown",t)},_renderPopupContent:B,_renderPopup(){const t=T(this._popupConfig(),this._options.cache("dropDownOptions"));delete t.closeOnOutsideClick,this._popup=this._createComponent(this._$popup,xl,t),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){b.on(this._popup.$overlayContent(),K("keydown",this.NAME),t=>this._popupKeyHandler(t))},_popupKeyHandler(t){switch(tn(t)){case"tab":this._popupTabHandler(t);break;case"escape":this._popupEscHandler(t)}},_popupTabHandler(t){const e=m(t.target),n=t.shiftKey&&e.is(this._getFirstPopupElement());(!t.shiftKey&&e.is(this._getLastPopupElement())||n)&&(b.trigger(this.field(),"focus"),t.preventDefault())},_popupEscHandler(){b.trigger(this._input(),"focus"),this.close()},_setPopupContentId(t){this._popupContentId=`dx-${new Et}`,this.setAria("id",this._popupContentId,t)},_contentReadyHandler:B,_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:T(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Cg(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:t=>this._closeOutsideDropDownHandler(t),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:vf,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:B,_getPopupInitializedHandler(){const t=this.option("onPopupInitialized");return e=>{this._popupInitializedHandler(e),t&&this._popupInitializedAction({popup:e.component})}},_dimensionChanged(){if(ae()&&!this.$element().is(":visible")){this.close();return}this._updatePopupWidth()},_updatePopupWidth(){RS(this.option("dropDownOptions.width"))===void 0&&this._setPopupOption("width",()=>Cg(this.$element()))},_popupPositionedHandler(t){var e;const{labelMode:n,stylingMode:i}=this.option();if(!this._popup)return;const s=this._popup.$overlayContent(),r=(e=t.position)===null||e===void 0||(e=e.v)===null||e===void 0?void 0:e.flip,o=n!=="hidden"&&n!=="outside"&&i==="outlined";if(t.position&&s.toggleClass(BX,r),r&&o&&this._label.isVisible()){const a=this._label.$element();Ft(s,{top:Gn(s).top-parseInt(a.css("fontSize"))})}},_popupShowingHandler:B,_popupHidingHandler(){this.option("opened",!1)},_popupShownHandler(){var t;this._openAction(),(t=this._validationMessage)===null||t===void 0||t.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler(){var t;this._closeAction(),(t=this._validationMessage)===null||t===void 0||t.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide(){const t=this.option("validationMessagePosition");if(t!=="auto")return t;let e="bottom";if(this._popup&&this._popup.option("visible")){const{top:n}=fi.setup(this.$element()),{top:i}=fi.setup(this._popup.$content());e=n+this.option("popupPosition").offset.v>i?"bottom":"top"}return e},_closeOutsideDropDownHandler(t){let{target:e}=t;const n=m(e),i=this.getButton("dropDown"),s=i&&i.$element(),r=!!n.closest(this.$element()).length,o=!!n.closest(s).length;return!r&&!o},_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption(t,e){this._setWidgetOption("_popup",arguments)},_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems(){return this.option("applyValueMode")==="useButtons"?this._popupToolbarItemsConfig():[]},_getFirstPopupElement(){return m(this._popup.getFocusableElements()).first()},_getLastPopupElement(){return m(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig(){const t=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(t)},_applyButtonsLocation(t){const e=this.option("buttonsLocation"),n=t;if(e!=="default"){const i=cu(e);N(n,(s,r)=>{T(r,{toolbar:i[0],location:i[1]})})}return n},_applyButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged(t){const e=Kt.getOptionsFromContainer(t);this._setPopupOption(e);const n=Object.keys(e);(n.includes("width")||n.includes("height"))&&this._dimensionChanged()},_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=m("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose(){this._detachFocusOutEvents(),this.callBase()},_optionChanged(t){var e;switch(t.name){case"width":case"height":this.callBase(t),(e=this._popup)===null||e===void 0||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(t),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":ae()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(t.value),this.callBase(t);break;default:this.callBase(t)}},open(){this.option("opened",!0)},close(){this.option("opened",!1)},field(){return se(this._input())},content(){return this._popup?this._popup.content():null}});re("dxDropDownEditor",OS);const uF="dxswipestart",dF="dxswipe",PS="dxswipeend",HX={defaultItemSizeFunc:function(){return me(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(t){return(At(t).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){const e=At(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},NX={defaultItemSizeFunc:function(){return Re(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(t){return(At(t).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){const e=At(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},zX={horizontal:HX,vertical:NX},WX=rp.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(t){this.callBase(t),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return zX[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(t){this._tickData=At(t)},_start:function(t){this._savedEventData=At(t),t=this._fireEvent("dxswipestart",t),t.cancel||(this._maxLeftOffset=t.maxLeftOffset,this._maxRightOffset=t.maxRightOffset,this._maxTopOffset=t.maxTopOffset,this._maxBottomOffset=t.maxBottomOffset)},_move:function(t){const e=this._getStrategy(),n=At(t);let i=e.calcOffsetRatio.call(this,t);i=this._fitOffset(i,this.elastic),n.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=n),this._fireEvent("dxswipe",t,{offset:i}),t.cancelable!==!1&&t.preventDefault()},_end:function(t){const e=this._getStrategy(),n=e.calcOffsetRatio.call(this,t),i=e.isFastSwipe.call(this,t);let s=n,r=this._calcTargetOffset(n,i);s=this._fitOffset(s,this.elastic),r=this._fitOffset(r,!1),this._fireEvent("dxswipeend",t,{offset:s,targetOffset:r})},_fitOffset:function(t,e){const i=this._getStrategy().getBounds.call(this);return t<-i[0]?e?(-2*i[0]+t)/3:-i[0]:t>i[1]?e?(2*i[1]+t)/3:i[1]:t},_calcTargetOffset:function(t,e){let n;return e?(n=Math.ceil(Math.abs(t)),t<0&&(n=-n)):n=Math.round(t),n}});du({emitter:WX,events:["dxswipestart","dxswipe","dxswipeend"]});const GX="dxSwipeable",UX={onStart:uF,onUpdated:dF,onEnd:PS,onCancel:"dxswipecancel"},xh=us.inherit({_getDefaultOptions:function(){return T(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),this.option("disabled"))return;const t=this.NAME;this._createEventData(),N(UX,(function(e,n){const i=this._createActionByOption(e,{context:this});n=K(n,t),b.on(this.$element(),n,this._eventData,function(s){return i({event:s})})}).bind(this))},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){b.off(this.$element(),".dxSwipeable")},_optionChanged:function(t){switch(t.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(t)}},_useTemplates:function(){return!1}});zh(xh,GX);class MS{constructor(e){this.calendar=e}dateOption(e){return this.calendar._dateOption(e)}dateValue(e,n){this.calendar._dateValue(e,n)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,n){this.calendar._updateAriaSelected(e,n),e[0]&&this.calendar.option("currentDate").getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,n){var i,s;M(e)&&!Array.isArray(e)&&(e=[e]),M(n)&&!Array.isArray(n)&&(n=[n]),e=((i=e)===null||i===void 0?void 0:i.map(r=>this._convertToDate(r)))||[],n=((s=n)===null||s===void 0?void 0:s.map(r=>this._convertToDate(r)))||[],this._updateViewsValue(e),this.updateAriaSelected(e,n),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(e){const n=this.calendar._dateOption("min"),i=this.calendar._dateOption("max"),s=M(n)&&e<n&&!V.sameDate(n,e),r=M(i)&&e>i&&!V.sameDate(i,e);return this.calendar._view.isDateDisabled(e)||s||r}_getLowestDateInArray(e){if(e.length)return new Date(Math.min(...e))}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,n){this.calendar._updateViewsOption(e,n)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}_shouldHandleWeekNumberClick(){const{selectionMode:e,selectWeekOnClick:n}=this.calendar.option();return n&&e!=="single"}}class KX extends MS{constructor(e){super(e),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multiple",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,n){const i=[...this.dateOption("value")],s=i.findIndex(r=>(r==null?void 0:r.toDateString())===e.toDateString());s>-1?i.splice(s,1):i.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(i,n)}updateAriaSelected(e,n){e??(e=this.dateOption("value")),n??(n=[]),super.updateAriaSelected(e,n)}getDefaultCurrentDate(){const e=this.dateOption("value").filter(n=>n);return this._getLowestDateInArray(e)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(e){let{rowDates:n,event:i}=e;const s=n.filter(r=>!this._isDateDisabled(r));this.dateValue(s,i)}}class jX extends bL{_getDefaultOptions(){return L({},super._getDefaultOptions(),{onClick:void 0,onCaptionClick:void 0,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>Un(),options:{type:"default",stylingMode:"text"}},{device:()=>qn(),options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),m(this.element()).addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){const{rtlEnabled:e,type:n,stylingMode:i,focusStateEnabled:s}=this.option();this._prevButton=this._createComponent(m("<div>"),Kn,{focusStateEnabled:s,icon:e?"chevronright":"chevronleft",onClick:l=>{this._clickAction({direction:-1,event:l})},type:n,stylingMode:i,integrationOptions:{}});const r=m(this._prevButton.element()).addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent(m("<div>"),Kn,{focusStateEnabled:s,icon:e?"chevronleft":"chevronright",onClick:l=>{this._clickAction({direction:1,event:l})},type:n,stylingMode:i,integrationOptions:{}});const o=m(this._nextButton.element()).addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent(m("<div>").addClass("dx-calendar-caption-button"),Kn,{focusStateEnabled:s,onClick:l=>{this._captionClickAction({event:l})},type:n,stylingMode:i,template:(l,c)=>{const{text:u}=this.option();u.split(" - ").forEach(p=>{m(c).append(m("<span>").addClass("dx-button-text").text(p))})},integrationOptions:{}});const a=this._caption.$element();this.$element().append(r,a,o)}_renderCaption(){var e;(e=this._caption)===null||e===void 0||e.option("text",this.option("text"))}toggleButton(e,n){const i=`_${e}Button`,s=this[i];s&&(s.option("disabled",n),s.$element().toggleClass("dx-calendar-disabled-navigator-link",n))}_optionChanged(e){e.name==="text"?this._renderCaption():super._optionChanged(e)}}class qX extends MS{constructor(e){super(e),this.NAME="RangeSelection"}getViewOptions(){const e=this._getValue(),n=this._getDaysInRange(e[0],e[1]);return{value:e,range:n,selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,n){const[i,s]=this._getValue();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.calendar.option("_allowChangeSelectionOrder")===!0?(this.calendar._valueSelected=!0,this.calendar.option("_currentSelection")==="startDate"?this.calendar._convertToDate(e)>this.calendar._convertToDate(s)?this.dateValue([e,null],n):this.dateValue([e,s],n):this.calendar._convertToDate(e)>=this.calendar._convertToDate(i)?this.dateValue([i,e],n):this.dateValue([e,null],n)):!i||s?this.dateValue([e,null],n):this.dateValue(i<e?[i,e]:[e,i],n)}updateAriaSelected(e,n){e??(e=this._getValue()),n??(n=[]),super.updateAriaSelected(e,n)}processValueChanged(e,n){super.processValueChanged(e,n);const i=this._getRange();this._updateViewsOption("range",i)}getDefaultCurrentDate(){const{_allowChangeSelectionOrder:e,_currentSelection:n}=this.calendar.option(),i=this.dateOption("value");if(e){if(n==="startDate"&&i[0])return i[0];if(n==="endDate"&&i[1])return i[1]}const s=i.filter(r=>r);return this._getLowestDateInArray(s)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){const e=this.dateOption("value");if(!e.length)return e;let[n,i]=e;return n&&i&&n>i&&([n,i]=[i,n]),[n,i]}_getRange(){const[e,n]=this._getValue();return this._getDaysInRange(e,n)}_getDaysInRange(e,n){if(!e||!n)return[];const{currentDate:i,viewsCount:s}=this.calendar.option(),r=this.calendar._isAdditionalViewDate(i),o=V.getFirstMonthDate(V.addDateInterval(i,"month",r?-2:-1)),a=V.getLastMonthDate(V.addDateInterval(i,"month",r?1:s)),l=new Date(Math.max(o,e)),c=new Date(Math.min(a,n));return[...V.getDatesOfInterval(l,c,864e5),c]}_cellHoverHandler(e){const n=this._isMaxZoomLevel(),[i,s]=this._getValue(),{_allowChangeSelectionOrder:r,_currentSelection:o}=this.calendar.option();if(n){if(i&&!s&&!(r&&o==="startDate")){if(e.value>i){this._updateViewsOption("hoveredRange",this._getDaysInRange(i,e.value));return}}else if(!i&&s&&!(r&&o==="endDate")){if(e.value<s){this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,s));return}}else if(i&&s){if(o==="startDate"&&e.value<i){this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,i));return}if(o==="endDate"&&e.value>s){this._updateViewsOption("hoveredRange",this._getDaysInRange(s,e.value));return}}this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(e){let{rowDates:n,event:i}=e;const s=n.filter(o=>!this._isDateDisabled(o)),r=s.length?[s[0],s[s.length-1]]:[null,null];this.dateValue(r,i)}}class YX extends MS{constructor(e){super(e),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(e,n){this.skipNavigate(),this.dateValue(e,n)}updateAriaSelected(e,n){e??(e=[this.dateOption("value")]),n??(n=[]),super.updateAriaSelected(e,n)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(e){this._updateViewsOption("value",e[0])}}const{abstract:Ms}=Kt,Uk="td:not(.dx-calendar-week-number-cell)",Uv=K(_n,"dxCalendar"),Kk=K(Xh,"dxCalendar"),ZX={month:q.format("dxCalendar-currentDay"),year:q.format("dxCalendar-currentMonth"),decade:q.format("dxCalendar-currentYear"),century:q.format("dxCalendar-currentYearRange")},_a={single:"single",multiple:"multiple",range:"range"},Cf=Kt.inherit({_getViewName:()=>"base",_getDefaultOptions(){return T(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup(){this.callBase(),this._renderImpl()},_renderImpl(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents(),this._updateTableAriaLabel()},_getLocalizedWidgetName(){return q.format("dxCalendar-ariaWidgetName")},_getSingleModeAriaLabel(){const{value:t}=this.option(),e=this._getLocalizedWidgetName(),n=ee.format(t,"date"),i=q.format("dxCalendar-selectedDate",n);return`${e}. ${i}`},_getRangeModeAriaLabel(){const{value:t}=this.option(),e=this._getLocalizedWidgetName(),[n,i]=t,s=ee.format(n,"date"),r=ee.format(i,"date"),o=n&&i?q.format("dxCalendar-selectedDateRange",s,r):q.format("dxCalendar-selectedDate",s??r);return`${e}. ${o}`},_getMultipleModeAriaLabel(){return this._getLocalizedWidgetName()},_getTableAriaLabel(){const{value:t,selectionMode:e}=this.option();if(!t||Array.isArray(t)&&!t.filter(Boolean).length)return this._getLocalizedWidgetName();switch(e){case _a.single:return this._getSingleModeAriaLabel();case _a.range:return this._getRangeModeAriaLabel();case _a.multiple:return this._getMultipleModeAriaLabel()}},_updateTableAriaLabel(){const t=this._getTableAriaLabel();this.setAria({label:t},this._$table)},_createTable(){return this._$table=m("<table>"),this.setAria({role:"grid"},this._$table),this._$table},_renderBody(){this.$body=m("<tbody>").appendTo(this._$table);const t={cellDate:this._getFirstCellData(),prevCellDate:null};for(let e=0,n=this.option("rowCount");e<n;e++){t.row=this._createRow();for(let i=0,s=this.option("colCount");i<s;i++)this._renderCell(t,i);this._renderWeekNumberCell(t)}},_createRow(){const t=W.createElement("tr");return this.setAria("role","row",m(t)),this.$body.get(0).appendChild(t),t},_createCell(t,e){const n=W.createElement("td"),i=m(n);return n.className=this._getClassNameByDate(t,e),n.setAttribute("data-value",je.serializeDate(t,V.getShortDateFormat())),st(n,"dxDateValueKey",t),this.setAria({role:"gridcell",selected:!1,label:this.getCellAriaLabel(t)},i),{cell:n,$cell:i}},_renderCell(t,e){const{cellDate:n,prevCellDate:i,row:s}=t;i&&V.fixTimezoneGap(i,n),t.prevCellDate=n;const{cell:r,$cell:o}=this._createCell(n,e),a=this.option("cellTemplate");m(s).append(r),a?a.render(this._prepareCellTemplateData(n,e,o)):r.innerHTML=this._getCellText(n),t.cellDate=this._getNextCellData(n)},_getClassNameByDate(t,e){let n="dx-calendar-cell";return this._isTodayCell(t)&&(n+=" dx-calendar-today"),(this._isDateOutOfRange(t)||this.isDateDisabled(t))&&(n+=" dx-calendar-empty-cell"),this._isOtherView(t)&&(n+=" dx-calendar-other-view"),this.option("selectionMode")===_a.range&&(e===0&&(n+=" dx-calendar-cell-start-in-row"),e===this.option("colCount")-1&&(n+=" dx-calendar-cell-end-in-row"),this._isStartDayOfMonth(t)&&(n+=" dx-calendar-cell-start"),this._isEndDayOfMonth(t)&&(n+=" dx-calendar-cell-end")),n},_prepareCellTemplateData(t,e,n){const i=t instanceof Date,s=i?this._getCellText(t):t,r=i?t:void 0,o=this._getViewName();return{model:{text:s,date:r,view:o},container:se(n),index:e}},_renderEvents(){this._createCellClickAction(),b.off(this._$table,Uv),b.on(this._$table,Uv,Uk,e=>{m(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellClickAction({event:e,value:m(e.currentTarget).data("dxDateValueKey")})});const{selectionMode:t}=this.option();b.off(this._$table,Kk),t===_a.range&&(this._createCellHoverAction(),b.on(this._$table,Kk,Uk,e=>{m(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellHoverAction({event:e,value:m(e.currentTarget).data("dxDateValueKey")})})),t!==_a.single&&(this._createWeekNumberCellClickAction(),b.on(this._$table,Uv,".dx-calendar-week-number-cell",e=>{const n=m(e.currentTarget).closest("tr"),i=n.find(".dx-calendar-cell").first().data("dxDateValueKey"),s=n.find(".dx-calendar-cell").last().data("dxDateValueKey"),r=[...V.getDatesOfInterval(i,s,864e5),s];this._weekNumberCellClickAction({event:e,rowDates:r})}))},_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createWeekNumberCellClickAction(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")},_createDisabledDatesHandler(){const t=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(t)?this._getDefaultDisabledDatesHandler(t):t||B},_getDefaultDisabledDatesHandler:()=>B,_isTodayCell:Ms,_isDateOutOfRange:Ms,isDateDisabled(t){const e={date:t,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:Ms,_isStartDayOfMonth:Ms,_isEndDayOfMonth:Ms,_getCellText:Ms,_getFirstCellData:Ms,_getNextCellData:Ms,_renderContouredDate(t){if(!this.option("focusStateEnabled"))return;t=t||this.option("contouredDate");const e=this._getContouredCell(),n=this._getCellByDate(t);e.removeClass("dx-calendar-contoured-date"),t&&n.addClass("dx-calendar-contoured-date")},_getContouredCell(){return this._$table.find(".dx-calendar-contoured-date")},_renderValue(){if(!this.option("allowValueSelection"))return;let t=this.option("value");Array.isArray(t)||(t=[t]),this._updateSelectedClass(t)},_updateSelectedClass(t){var e;this._isRangeMode()&&!this._isMonthView()||((e=this._$selectedCells)===null||e===void 0||e.forEach(n=>{n.removeClass("dx-calendar-selected-date")}),this._$selectedCells=t.map(n=>this._getCellByDate(n)),this._$selectedCells.forEach(n=>{n.addClass("dx-calendar-selected-date")}))},_renderRange(){var t,e,n,i,s,r,o,a;const{allowValueSelection:l,value:c,range:u}=this.option();!l||!this._isRangeMode()||!this._isMonthView()||((t=this._$rangeCells)===null||t===void 0||t.forEach(d=>{d.removeClass("dx-calendar-cell-in-range")}),(e=this._$hoveredRangeCells)===null||e===void 0||e.forEach(d=>{d.removeClass("dx-calendar-cell-range-hover")}),(n=this._$rangeStartHoverCell)===null||n===void 0||n.removeClass("dx-calendar-cell-range-hover-start"),(i=this._$rangeEndHoverCell)===null||i===void 0||i.removeClass("dx-calendar-cell-range-hover-end"),(s=this._$rangeStartDateCell)===null||s===void 0||s.removeClass("dx-calendar-range-start-date"),(r=this._$rangeEndDateCell)===null||r===void 0||r.removeClass("dx-calendar-range-end-date"),this._$rangeCells=u.map(d=>this._getCellByDate(d)),this._$rangeStartDateCell=this._getCellByDate(c[0]),this._$rangeEndDateCell=this._getCellByDate(c[1]),this._$rangeCells.forEach(d=>{d.addClass("dx-calendar-cell-in-range")}),(o=this._$rangeStartDateCell)===null||o===void 0||o.addClass("dx-calendar-range-start-date"),(a=this._$rangeEndDateCell)===null||a===void 0||a.addClass("dx-calendar-range-end-date"))},_renderHoveredRange(){var t,e,n,i,s;const{allowValueSelection:r,hoveredRange:o}=this.option();!r||!this._isRangeMode()||!this._isMonthView()||((t=this._$hoveredRangeCells)===null||t===void 0||t.forEach(a=>{a.removeClass("dx-calendar-cell-range-hover")}),(e=this._$rangeStartHoverCell)===null||e===void 0||e.removeClass("dx-calendar-cell-range-hover-start"),(n=this._$rangeEndHoverCell)===null||n===void 0||n.removeClass("dx-calendar-cell-range-hover-end"),this._$hoveredRangeCells=o.map(a=>this._getCellByDate(a)),this._$rangeStartHoverCell=this._getCellByDate(o[0]),this._$rangeEndHoverCell=this._getCellByDate(o[o.length-1]),this._$hoveredRangeCells.forEach(a=>{a.addClass("dx-calendar-cell-range-hover")}),(i=this._$rangeStartHoverCell)===null||i===void 0||i.addClass("dx-calendar-cell-range-hover-start"),(s=this._$rangeEndHoverCell)===null||s===void 0||s.addClass("dx-calendar-cell-range-hover-end"))},_isMonthView(){return this.option("zoomLevel")==="month"},_isRangeMode(){return this.option("selectionMode")===_a.range},_getCurrentDateFormat:()=>null,getCellAriaLabel(t){const e=this._getViewName(),n=this._isTodayCell(t),i=this._getCurrentDateFormat(),s=i?ee.format(t,i):this._getCellText(t);return n?`${s}. ${ZX[e]}`:s},_getFirstAvailableDate(){let t=this.option("date");const e=this.option("min");return t=V.getViewFirstCellDate(this._getViewName(),t),new Date(e&&t<e?e:t)},_getCellByDate:Ms,isBoundary:Ms,_optionChanged(t){const{name:e,value:n}=t;switch(e){case"value":this._renderValue(),this._updateTableAriaLabel();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(n);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(t)}}}),QX={month:Cf.inherit({_getViewName:()=>"month",_getCurrentDateFormat:()=>"longdate",_getDefaultOptions(){return T(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl(){this.callBase(),this._renderHeader()},_renderBody(){this.callBase(),this._$table.find(".dx-calendar-other-view").addClass("dx-calendar-other-month")},_renderFocusTarget:B,_renderHeader(){const t=m("<tr>"),e=m("<thead>").append(t);this._$table.prepend(e);for(let n=0,i=this.option("colCount");n<i;n++)this._renderHeaderCell(n,t);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(t)},_renderHeaderCell(t,e){const{firstDayOfWeek:n}=this.option(),{full:i,abbreviated:s}=this._getDayCaption(n+t),r=m("<th>").attr({scope:"col",abbr:i}).text(s);e.append(r)},_renderWeekHeaderCell(t){const e=m("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});t.prepend(e)},_renderWeekNumberCell(t){const{showWeekNumbers:e,cellTemplate:n,selectionMode:i,selectWeekOnClick:s}=this.option();if(!e)return;const r=this._getWeekNumber(t.prevCellDate),o=W.createElement("td"),a=m(o);o.className="dx-calendar-week-number-cell",i!=="single"&&s&&a.addClass("dx-calendar-week-selection"),n?n.render(this._prepareCellTemplateData(r,-1,a)):o.innerHTML=r,t.row.prepend(o),this.setAria({role:"gridcell",label:`Week ${r}`},a)},_getWeekNumber(t){const{weekNumberRule:e,firstDayOfWeek:n}=this.option();return e==="auto"?V.getWeekNumber(t,n,n===1?"firstFourDays":"firstDay"):V.getWeekNumber(t,n,e)},getNavigatorCaption(){return ee.format(this.option("date"),"monthandyear")},_isTodayCell(t){const e=this.option("_todayDate")();return V.sameDate(t,e)},_isDateOutOfRange(t){const e=this.option("min"),n=this.option("max");return!V.dateInRange(t,e,n,"date")},_isOtherView(t){return t.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth(t){return V.sameDate(t,V.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth(t){return V.sameDate(t,V.getLastMonthDate(this.option("date")))},_getCellText:t=>ee.format(t,"d"),_getDayCaption(t){const e=this.option("colCount"),n=t%e;return{full:ee.getDayNames()[n],abbreviated:ee.getDayNames("abbreviated")[n]}},_getFirstCellData(){const{firstDayOfWeek:t}=this.option(),e=V.getFirstMonthDate(this.option("date"));let n=t-e.getDay();const i=this.option("colCount");return n>=0&&(n-=i),e.setDate(e.getDate()+n),e},_getNextCellData(t){return t=new Date(t),t.setDate(t.getDate()+1),t},_getCellByDate(t){return this._$table.find(`td[data-value='${je.serializeDate(t,V.getShortDateFormat())}']`)},isBoundary(t){return V.sameMonthAndYear(t,this.option("min"))||V.sameMonthAndYear(t,this.option("max"))},_getDefaultDisabledDatesHandler:t=>function(e){if(t.some(i=>V.sameDate(i,e.date)))return!0}}),year:Cf.inherit({_getViewName:()=>"year",_getCurrentDateFormat:()=>"monthandyear",_isTodayCell(t){const e=this.option("_todayDate")();return V.sameMonthAndYear(t,e)},_isDateOutOfRange(t){return!V.dateInRange(t,V.getFirstMonthDate(this.option("min")),V.getLastMonthDate(this.option("max")))},_isOtherView:()=>!1,_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:t=>ee.getMonthNames("abbreviated")[t.getMonth()],_getFirstCellData(){const t=this.option("date"),e=new Date(t);return e.setDate(1),e.setMonth(0),e},_getNextCellData(t){return t=new Date(t),t.setMonth(t.getMonth()+1),t},_getCellByDate(t){const e=new Date(t);return e.setDate(1),this._$table.find(`td[data-value='${je.serializeDate(e,V.getShortDateFormat())}']`)},getNavigatorCaption(){return ee.format(this.option("date"),"yyyy")},isBoundary(t){return V.sameYear(t,this.option("min"))||V.sameYear(t,this.option("max"))},_renderWeekNumberCell:B}),decade:Cf.inherit({_getViewName:()=>"decade",_isTodayCell(t){const e=this.option("_todayDate")();return V.sameYear(t,e)},_isDateOutOfRange(t){const e=this.option("min"),n=this.option("max");return!V.dateInRange(t.getFullYear(),e&&e.getFullYear(),n&&n.getFullYear())},_isOtherView(t){const e=new Date(t);return e.setMonth(1),!V.sameDecade(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:t=>ee.format(t,"yyyy"),_getFirstCellData(){const t=V.getFirstYearInDecade(this.option("date"))-1;return V.createDateWithFullYear(t,0,1)},_getNextCellData(t){return t=new Date(t),t.setFullYear(t.getFullYear()+1),t},getNavigatorCaption(){const t=this.option("date"),e=V.getFirstYearInDecade(t),n=new Date(t),i=new Date(t);return n.setFullYear(e),i.setFullYear(e+9),`${ee.format(n,"yyyy")}-${ee.format(i,"yyyy")}`},_isValueOnCurrentView:(t,e)=>V.sameDecade(t,e),_getCellByDate(t){const e=new Date(t);return e.setDate(1),e.setMonth(0),this._$table.find(`td[data-value='${je.serializeDate(e,V.getShortDateFormat())}']`)},isBoundary(t){return V.sameDecade(t,this.option("min"))||V.sameDecade(t,this.option("max"))},_renderWeekNumberCell:B}),century:Cf.inherit({_getViewName:()=>"century",_isTodayCell(t){const e=this.option("_todayDate")();return V.sameDecade(t,e)},_isDateOutOfRange(t){const e=V.getFirstYearInDecade(t),n=V.getFirstYearInDecade(this.option("min")),i=V.getFirstYearInDecade(this.option("max"));return!V.dateInRange(e,n,i)},_isOtherView(t){const e=new Date(t);return e.setMonth(1),!V.sameCentury(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText(t){const e=ee.format(t,"yyyy"),n=new Date(t);return n.setFullYear(n.getFullYear()+9),`${e} - ${ee.format(n,"yyyy")}`},_getFirstCellData(){const t=V.getFirstDecadeInCentury(this.option("date"))-10;return V.createDateWithFullYear(t,0,1)},_getNextCellData(t){return t=new Date(t),t.setFullYear(t.getFullYear()+10),t},_getCellByDate(t){const e=new Date(t);return e.setDate(1),e.setMonth(0),e.setFullYear(V.getFirstYearInDecade(e)),this._$table.find(`td[data-value='${je.serializeDate(e,V.getShortDateFormat())}']`)},getNavigatorCaption(){const t=this.option("date"),e=V.getFirstDecadeInCentury(t),n=new Date(t),i=new Date(t);return n.setFullYear(e),i.setFullYear(e+99),`${ee.format(n,"yyyy")}-${ee.format(i,"yyyy")}`},isBoundary(t){return V.sameCentury(t,this.option("min"))||V.sameCentury(t,this.option("max"))},_renderWeekNumberCell:B})},jk=K(x_,"dxCalendar"),Fl={month:3,year:2,decade:1,century:0},ln={MONTH:"month",YEAR:"year",DECADE:"decade",CENTURY:"century"},XX={SingleSelection:YX,MultipleSelection:KX,RangeSelection:qX},VS=Fi.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions(){return T(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:ln.MONTH,maxZoomLevel:ln.MONTH,minZoomLevel:ln.CENTURY,selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}}])},_supportedKeys(){return T(this.callBase(),{rightArrow(t){t.preventDefault(),bn(t)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow(t){t.preventDefault(),bn(t)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow(t){if(t.preventDefault(),bn(t))this._navigateUp();else{if(Tt.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow(t){if(t.preventDefault(),bn(t))this._navigateDown();else{if(Tt.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home(t){t.preventDefault();const e=this.option("zoomLevel"),n=this.option("currentDate"),i=this._dateOption("min");if(this._view.isDateDisabled(n))return;const s=V.sameView(e,n,i)?i:V.getViewFirstCellDate(e,n);this._moveToClosestAvailableDate(s)},end(t){t.preventDefault();const e=this.option("zoomLevel"),n=this.option("currentDate"),i=this._dateOption("max");if(this._view.isDateDisabled(n))return;const s=V.sameView(e,n,i)?i:V.getViewLastCellDate(e,n);this._moveToClosestAvailableDate(s)},pageUp(t){t.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown(t){t.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:B,enter:this._enterKeyHandler})},_enterKeyHandler(t){if(!this._isMaxZoomLevel())this._navigateDown();else if(!this._view.isDateDisabled(this.option("currentDate"))){const e=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(e,t)}},_getSerializationFormat(t){const e=this.option(t||"value");if(this.option("dateSerializationFormat"))return this.option("dateSerializationFormat");if(ut(e))return"number";if(ve(e))return je.getDateSerializationFormat(e)},_convertToDate:t=>je.deserializeDate(t),_dateValue(t,e){if(e){if(e.type==="keydown"){const n=this._view._getContouredCell().get(0);e.target=n}this._saveValueChangeEvent(e)}this._dateOption("value",t)},_dateOption(t,e){const n=t==="value"&&!this._isSingleMode(),i=this.option("value");if(arguments.length===1)return n?(i??[]).map(o=>this._convertToDate(o)):this._convertToDate(this.option(t));const s=this._getSerializationFormat(t),r=n?(e==null?void 0:e.map(o=>je.serializeDate(o,s)))||[]:je.serializeDate(e,s);this.option(t,r)},_isSingleMode(){return this.option("selectionMode")==="single"},_shiftDate(t,e,n,i){switch(t){case ln.MONTH:e.setDate(e.getDate()+n*i);break;case ln.YEAR:e.setMonth(e.getMonth()+n*i);break;case ln.DECADE:e.setFullYear(e.getFullYear()+n*i);break;case ln.CENTURY:e.setFullYear(e.getFullYear()+10*n*i)}},_moveCurrentDateByOffset(t){const e=this.option("currentDate");let n=new Date(e);const i=this.option("zoomLevel");this._shiftDate(i,n,t,1);const s=this._getMaxDate(),r=this._getMinDate();let o=this._areDatesInNeighborView(i,n,e),a=Or(n,r,s)&&o;const l=new Date(n);for(;a;){if(!this._view.isDateDisabled(l)){n=l;break}this._shiftDate(i,l,t,1),o=this._areDatesInNeighborView(i,l,e),a=Or(l,r,s)&&o}if(this._view.isDateDisabled(e)||this._view.isDateDisabled(n)){const c=t>0?1:-1;(c===1?this._isNextViewDisabled():this._isPrevViewDisabled())?this._moveToClosestAvailableDate(n):this._waitRenderView(c)}else this._skipNavigate=!0,this.option("currentDate",n)},_isNextViewDisabled(){return this._navigator._nextButton.option("disabled")},_isPrevViewDisabled(){return this._navigator._prevButton.option("disabled")},_areDatesInSameView(t,e,n){switch(t){case ln.MONTH:return e.getMonth()===n.getMonth();case ln.YEAR:return e.getYear()===n.getYear();case ln.DECADE:return parseInt(e.getYear()/10)===parseInt(n.getYear()/10);case ln.CENTURY:return parseInt(e.getYear()/100)===parseInt(n.getYear()/100)}},_areDatesInNeighborView(t,e,n){switch(t){case ln.MONTH:return((i,s)=>{const r=Math.abs(i-s);return Math.min(r,12-r)})(e.getMonth(),n.getMonth())<=1;case ln.YEAR:return Math.abs(e.getYear()-n.getYear())<=1;case ln.DECADE:return Math.abs(e.getYear()-n.getYear())<=10;case ln.CENTURY:return Math.abs(e.getYear()-n.getYear())<=100}},_moveToClosestAvailableDate(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.option("currentDate"),e=new Date(t);const n=this.option("zoomLevel"),i=!this._isDateNotAvailable(e);let s=i,r=i,o,a;const l=new Date(e),c=new Date(e);do{if(s){e=l;break}if(r){e=c;break}this._shiftDate(n,l,1,1),this._shiftDate(n,c,1,-1),o=this._areDatesInSameView(n,l,t),a=this._areDatesInSameView(n,c,t),s=o&&!this._isDateNotAvailable(l),r=a&&!this._isDateNotAvailable(c)}while(o||a);this.option("currentDate",e)},_isDateNotAvailable(t){const e=this._getMaxDate(),n=this._getMinDate();return!Or(t,n,e)||this._view.isDateDisabled(t)},_init(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy(){const t=this._getSelectionStrategyName(),e=XX[t];(!this._selectionStrategy||this._selectionStrategy.NAME!==t)&&(this._selectionStrategy=new e(this))},_refreshSelectionStrategy(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()},_getSelectionStrategyName(){switch(this.option("selectionMode")){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel(){const t=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),n=this.option("zoomLevel");Fl[e]<Fl[t]||(Fl[n]>Fl[e]?this.option("zoomLevel",e):Fl[n]<Fl[t]&&this.option("zoomLevel",t))},_initCurrentDate(){const t=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate())??this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",t)},_getNormalizedDate(t){return t=V.normalizeDate(t,this._getMinDate(),this._getMaxDate()),M(t)?this._getDate(t):t},_initActions(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates(){this._templateManager.addDefaultTemplates({cell:new nr(t=>{const e=t.model;m(t.container).append(m("<span>").text(e&&e.text||String(e)))})}),this.callBase()},_updateCurrentDate(t){Tt.isAnimating(this._$viewsWrapper)&&Tt.stop(this._$viewsWrapper,!0);const e=this._getMinDate(),n=this._getMaxDate();if(e>n){this.option("currentDate",new Date);return}const i=this._getNormalizedDate(t);if(t.getTime()!==i.getTime()){this.option("currentDate",new Date(i));return}let s=this._getViewsOffset(this._view.option("date"),i);s!==0&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(s=0),this._view&&s!==0&&!this._suppressNavigation?this._additionalView?s>2||s<-1?(this._refreshViews(),this._setViewContoured(i),this._updateAriaId(i),this._renderNavigator()):s===1&&this._skipNavigate?(this._setViewContoured(i),this._updateAriaId(i)):this._navigate(s,i):this._navigate(s,i):(this._renderNavigator(),this._setViewContoured(i),this._updateAriaId(i)),this._skipNavigate=!1},_isAdditionalViewDate(t){return this._additionalView?t>=this._additionalView._getFirstAvailableDate():!1},_getActiveView(t){return this._isAdditionalViewDate(t)?this._additionalView:this._view},_setViewContoured(t){if(this.option("skipFocusCheck")||m(this._$viewsWrapper).is(":focus")){var e;this._view.option("contouredDate",null),(e=this._additionalView)===null||e===void 0||e.option("contouredDate",null),(this._isAdditionalViewDate(t)?this._additionalView:this._view).option("contouredDate",t)}},_getMinDate(){const t=this.option("_rangeMin");return t||(this.min?this.min:(this.min=this._dateOption("min")||new Date(1e3,0),this.min))},_getMaxDate(){const t=this.option("_rangeMax");return t||(this.max?this.max:(this.max=this._dateOption("max")||new Date(3e3,0),this.max))},_getViewsOffset(t,e){const n=this.option("zoomLevel");if(n===ln.MONTH)return this._getMonthsOffset(t,e);let i;switch(n){case ln.CENTURY:i=100;break;case ln.DECADE:i=10;break;default:i=1}return parseInt(e.getFullYear()/i)-parseInt(t.getFullYear()/i)},_getMonthsOffset(t,e){const n=e.getFullYear()-t.getFullYear(),i=e.getMonth()-t.getMonth();return 12*n+i},_waitRenderView(t){if(this._alreadyViewRender)return;this._alreadyViewRender=!0;const e=this._getDateByOffset(t*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})},_getRtlCorrection(){return this.option("rtlEnabled")?-1:1},_getDateByOffset(t,e){e=this._getDate(e??this.option("currentDate"));const n=e.getDate(),i=V.getDifferenceInMonth(this.option("zoomLevel"))*t;e.setDate(1),e.setMonth(e.getMonth()+i);const s=V.getLastMonthDate(e).getDate();return e.setDate(n>s?s:n),e},_focusTarget(){return this._$viewsWrapper},_focusEventTarget(){return this.$element()},_initMarkup(){this._renderSubmitElement();const t=this.$element();t.addClass("dx-calendar"),t.toggleClass("dx-calendar-range",this.option("selectionMode")==="range"),this._renderBody(),t.append(this.$body),this._renderViews(),this._renderNavigator(),this.callBase(),this._renderEvents(),t.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody(){this._$viewsWrapper||(this.$body=m("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=m("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_setAriaReadonly:B,_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews(){this.$element().addClass(`dx-calendar-view-${this.option("zoomLevel")}`);const{currentDate:t,viewsCount:e}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",e>1),this._view=this._renderSpecificView(t),ae()){const n=this._getDateByOffset(-1,t);this._beforeView=this._isViewAvailable(n)?this._renderSpecificView(n):null;const i=this._getDateByOffset(e,t);i.setDate(1),this._afterView=this._isViewAvailable(i)?this._renderSpecificView(i):null}e>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,t))),this._translateViews()},_renderSpecificView(t){const{zoomLevel:e}=this.option(),n=QX[e],i=m("<div>").appendTo(this._$viewsWrapper),s=this._viewConfig(t);return this._createComponent(i,n,s)},_viewConfig(t){let e=this.option("disabledDates");return e=ie(e)?this._injectComponent(e.bind(this)):e,L({},this._selectionStrategy.getViewOptions(),{date:t,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:this.option("firstDayOfWeek")??ee.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),selectWeekOnClick:this.option("selectWeekOnClick"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:e,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){b.off(this._$viewsWrapper,jk),this.option("selectionMode")==="range"&&b.on(this._$viewsWrapper,jk,null,()=>{this._updateViewsOption("hoveredRange",[])})},_injectComponent(t){const e=this;return function(n){return T(n,{component:e}),t(n)}},_isViewAvailable(t){const e=this.option("zoomLevel"),n=V.getViewMinBoundaryDate(e,this._getMinDate()),i=V.getViewMaxBoundaryDate(e,this._getMaxDate());return V.dateInRange(t,n,i)},_translateViews(){const{viewsCount:t}=this.option();Ft(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,t),this._moveViewElement(this._additionalView,1)},_moveViewElement(t,e){t&&Ft(t.$element(),{left:this._getViewPosition(e),top:0})},_getViewPosition(t){const e=this.option("rtlEnabled")?-1:1;return 100*t*e+"%"},_cellClickHandler(t){const e=this.option("zoomLevel"),n=V.getViewDown(e),i=this._isMaxZoomLevel();if(n&&!i)this._navigateDown(t.event.currentTarget);else{const s=this._updateTimeComponent(t.value);this._selectionStrategy.selectValue(s,t.event),this._cellClickAction(t)}},_updateTimeComponent(t){const e=new Date(t),n=this._dateOption("value");return n&&this._isSingleMode()&&(e.setHours(n.getHours()),e.setMinutes(n.getMinutes()),e.setSeconds(n.getSeconds()),e.setMilliseconds(n.getMilliseconds())),e},_isMaxZoomLevel(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown(t){const e=this.option("zoomLevel");if(this._isMaxZoomLevel())return;const n=V.getViewDown(e);if(!n)return;let i=this._view.option("contouredDate")||this._view.option("date");t&&(i=m(t).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",i),this.option("zoomLevel",n),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))},_renderNavigator(){this._navigator||(this._navigator=new jX(m("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig(){const{focusStateEnabled:t,rtlEnabled:e}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:t,rtlEnabled:e,tabIndex:void 0}},_navigatorClickHandler(t){const{currentDate:e,viewsCount:n}=this.option();let i=t.direction;if(n>1){const r=this._isAdditionalViewDate(e);(r&&i<0||!r&&i>0)&&(i*=2)}const s=this._getDateByOffset(i,e);this._moveToClosestAvailableDate(s)},_navigateUp(){const t=this.option("zoomLevel"),e=V.getViewUp(t);!e||this._isMinZoomLevel(t)||(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel(t){const e=this._getMinDate(),n=this._getMaxDate();return V.sameView(t,e,n)||this.option("minZoomLevel")===t},_updateButtonsVisibility(){this._navigator.toggleButton("next",!M(this._afterView)),this._navigator.toggleButton("prev",!M(this._beforeView))},_renderSwipeable(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),xh,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler(t){Tt.stop(this._$viewsWrapper,!0);const{viewsCount:e}=this.option();this._toggleGestureCoverCursor("grabbing"),t.event.maxLeftOffset=this._getRequiredView("next")?1/e:0,t.event.maxRightOffset=this._getRequiredView("prev")?1/e:0},_toggleGestureCoverCursor(t){m(".dx-gesture-cover").css("cursor",t)},_getRequiredView(t){let e;const n=this.option("rtlEnabled");return t==="next"?e=n?this._beforeView:this._afterView:t==="prev"&&(e=n?this._afterView:this._beforeView),e},_swipeUpdateHandler(t){const{offset:e}=t.event;Ft(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler(t){this._toggleGestureCoverCursor("auto");const{currentDate:e,rtlEnabled:n}=this.option(),{targetOffset:i}=t.event,s=i?i/Math.abs(i):0,o=this._isAdditionalViewDate(e)&&(n?s===-1:s===1);if(s===0){this._animateWrapper(0,250);return}const a=-s*this._getRtlCorrection()*(o?2:1);let l=this._getDateByOffset(a);this._isDateInInvalidRange(l)&&(s>=0?l=new Date(this._getMinDate()):l=new Date(this._getMaxDate())),this.option("currentDate",l)},_viewWidth(){return this._viewWidthValue||(this._viewWidthValue=me(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption(t){t*=this._getRtlCorrection();const e=this.option("viewsCount")>1;let n,i;t>.5&&this._beforeView?(n=this._beforeView,i=e&&this._view):t<-.5&&this._afterView?(n=e?this._additionalView:this._afterView,i=e?this._afterView:null):(n=this._view,i=e?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(n,i))},_getViewsCaption(t,e){let n=t.getNavigatorCaption();const{viewsCount:i}=this.option();if(i>1&&e){const s=e.getNavigatorCaption();n=`${n} - ${s}`}return n},_isDateInInvalidRange(t){if(this._view.isBoundary(t))return;const e=this._getMinDate(),n=this._getMaxDate(),i=V.normalizeDate(t,e,n);return i===e||i===n},_renderFooter(){const t=this.option("showTodayButton");if(t){const e=this._createComponent(m("<div>"),Kn,{focusStateEnabled:this.option("focusStateEnabled"),text:q.format("dxCalendar-todayButtonText"),onClick:n=>{this._toTodayView(n)},type:qn()?"normal":"default",stylingMode:qn()?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=m("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",t)},_renderSubmitElement(){this._$submitElement=m("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(t){const e=this._convertToDate(t);this._getSubmitElement().val(je.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement(){return this._$submitElement},_animateShowView(){Tt.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(Tt.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:(t,e,n,i)=>Tt.animate(t.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:n,opacity:n},duration:i}),_navigate(t,e){if(t!==0&&Math.abs(t)!==1&&this._isViewAvailable(e)){const o=this._renderSpecificView(e);t>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=o):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=o),this._translateViews()}const n=this._getRtlCorrection(),i=t>0?1:t<0?-1:0,s=-n*i*this._viewWidth();this._$viewsWrapper.position().left!==s&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(t,e):this._animateWrapper(s,250).done(this._wrapperAnimationEndHandler.bind(this,t,e)))},_animateWrapper(t,e){return Tt.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:t},duration:e})},_getDate:t=>new Date(t),_toTodayView(t){const e=new Date;if(this._isMaxZoomLevel()){this._selectionStrategy.selectValue(e,t.event);return}this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(e,t.event),this._animateShowView(),this._preventViewChangeAnimation=!1},_wrapperAnimationEndHandler(t,e){this._rearrangeViews(t),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._selectionStrategy.updateAriaSelected()},_rearrangeViews(t){var e;if(t===0)return;const{viewsCount:n}=this.option();let i,s,r,o,a;if(t<0?(i=1,s="_beforeView",r="_afterView",o="_view",a=n===1?"_view":"_additionalView"):(i=-1,s="_afterView",r="_beforeView",o=n===1?"_view":"_additionalView",a="_view"),!this[s])return;const l=this[s].option("date");(e=this[r])===null||e===void 0||e.$element().remove(),this[r]=this._renderSpecificView(this._getDateByOffset(i*n,l)),this[a].$element().remove(),n===1?this[a]=this[s]:(this[a]=this[o],this[o]=this[s]);const c=this._getDateByOffset(-i,l);this[s]=this._isViewAvailable(c)?this._renderSpecificView(c):null},_resetLocation(){Ft(this._$viewsWrapper,{left:0,top:0})},_clean(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache(){delete this._viewWidthValue},_disposeViews(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged(){this._translateViews()},_shouldSkipFocusEvent(t){const{target:e,relatedTarget:n}=t;return m(e).parents(".dx-calendar").length&&m(n).parents(".dx-calendar").length},_focusInHandler(t){m(t.target).is(this._$viewsWrapper)&&this._setViewContoured(this.option("currentDate")),!this._shouldSkipFocusEvent(t)&&(this.callBase.apply(this,arguments),this._toggleFocusClass(!0,this.$element()))},_focusOutHandler(t){if(m(t.target).is(this._$viewsWrapper)){var e;this._view.option("contouredDate",null),(e=this._additionalView)===null||e===void 0||e.option("contouredDate",null)}this._shouldSkipFocusEvent(t)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!1,this.$element()))},_updateViewsOption(t,e){var n,i,s;this._view.option(t,e),(n=this._additionalView)===null||n===void 0||n.option(t,e),(i=this._beforeView)===null||i===void 0||i.option(t,e),(s=this._afterView)===null||s===void 0||s.option(t,e)},_setViewsMinOption(t){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(t)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption(t){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(t)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions(){this._resetActiveState(),this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateNavigatorLabels(){let t=this.option("zoomLevel");t=t.charAt(0).toUpperCase()+t.slice(1);const e=this._navigator._caption.option("text"),n=q.format(`dxCalendar-previous${t}ButtonLabel`),i=q.format(`dxCalendar-caption${t}Label`),s=q.format(`dxCalendar-next${t}ButtonLabel`);this.setAria("label",n,this._navigator._prevButton.$element()),this.setAria("label",`${e}. ${i}`,this._navigator._caption.$element()),this.setAria("label",s,this._navigator._nextButton.$element())},_updateAriaSelected(t,e){e.forEach(n=>{this.setAria("selected",!1,this._view._getCellByDate(n))}),t.forEach(n=>{this.setAria("selected",!0,this._view._getCellByDate(n))}),this.option("viewsCount")>1&&(e.forEach(n=>{this.setAria("selected",!1,this._additionalView._getCellByDate(n))}),t.forEach(n=>{this.setAria("selected",!0,this._additionalView._getCellByDate(n))}))},_updateAriaId(t){t=t??this.option("currentDate");const e=`dx-${new Et}`,i=this._getActiveView(t)._getCellByDate(t);this.setAria("id",e,i),this.setAria("activedescendant",e),this._onContouredChanged(e)},_suppressingNavigation(t,e){this._suppressNavigation=!0,t.apply(this,e),delete this._suppressNavigation},_optionChanged(t){const{value:e,previousValue:n}=t;switch(t.name){case"width":this.callBase(t),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(n)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass(`dx-calendar-view-${n}`),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this._selectionStrategy.processValueChanged(e,n),this._setSubmitValue(e),this.callBase(t);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"skipFocusCheck":break;default:this.callBase(t)}},getContouredDate(){return this._view.option("contouredDate")}});re("dxCalendar",VS);const{abstract:Df}=ze,H_=ze.inherit({ctor(t){this.dateBox=t},widgetOption(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget(t){t=t||m("<div>"),this._widget=this._createWidget(t),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget(t){const e=this._getWidgetName(),n=this._getWidgetOptions();return this.dateBox._createComponent(t,e,n)},_getWidgetOptions:Df,_getWidgetName:Df,getDefaultOptions:()=>({mode:"text"}),getDisplayFormat:Df,supportedKeys:B,getKeyboardListener:B,customizeButtons:B,getParsedText(t,e){return ee.parse(t,e)||ee.parse(t)},renderInputMinMax:B,renderOpenedState(){this._updateValue()},popupConfig:Df,_dimensionChanged(){var t;(t=this._getPopup())===null||t===void 0||t.repaint()},renderPopupContent(){const t=this._getPopup();this._renderWidget();const e=t.$content().parent();b.off(e,"mousedown"),b.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},_preventFocusOnPopup(t){t.preventDefault()},_getWidgetContainer(){return this._getPopup().$content()},_getPopup(){return this.dateBox._popup},popupShowingHandler:B,popupHiddenHandler:B,_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:B,getDefaultDate:()=>new Date,textChangedHandler:B,renderValue(){this.dateBox.option("opened")&&this._updateValue()},getValue(){return this._widget.option("value")},isAdaptivityChanged:()=>!1,dispose(){const t=this._getPopup();t&&t.$content().empty()},dateBoxValue(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}}),hF=H_.inherit({NAME:"Calendar",getDefaultOptions(){return T(this.callBase(),{todayButtonText:q.format("dxCalendar-todayButtonText")})},supportedKeys(){const t=function(e){return this.option("opened")?(e.preventDefault(),!0):!1};return{rightArrow(){if(this.option("opened"))return!0},leftArrow(){if(this.option("opened"))return!0},enter:(function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){const n=this._getContouredValue(),i=this._lastActionElement,s=this._closeDropDownByEnter();return s&&n&&i==="calendar"&&this.dateBoxValue(n,e),s&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!s}return!0}this.dateBox._valueChangeEventHandler(e)}).bind(this),home:t,end:t}},getDisplayFormat:t=>t||"shortdate",_closeDropDownByEnter:()=>!0,_getWidgetName:()=>VS,_getContouredValue(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions(){const t=this.dateBox.option("disabledDates");return T(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:ie(t)?this._injectComponent(t.bind(this.dateBox)):t,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent(t){const e=this;return function(n){return T(n,{component:e.dateBox}),t(n)}},_refreshActiveDescendant(t){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",t.actionValue)},_getTodayButtonConfig(){const t=this.dateBox.option("buttonsLocation"),n=t==="default"?["bottom","center"]:cu(t),i=Un()?"text":"outlined";return{widget:"dxButton",toolbar:n[0],location:n[1]==="after"?"before":n[1],options:{onClick:s=>{this._widget._toTodayView(s)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:i}}},_isCalendarVisible(){const{calendarOptions:t}=this.dateBox.option();return ti(t)||t.visible!==!1},_getPopupToolbarItems(t){return this.dateBox.option("applyValueMode")==="useButtons"&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...t]:t},popupConfig:t=>T(!0,t,{position:{collision:"flipfit flip"},width:"auto"}),_valueChangedHandler(t){const{value:e}=t,n=t.previousValue;V.sameDate(e,n)&&V.sameHoursAndMinutes(e,n)||this.dateBox.option("applyValueMode")==="instantly"&&this.dateBoxValue(this.getValue(),t.event)},_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler(t){const{dateBox:e}=this;e.option("applyValueMode")==="instantly"&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),t.event))}}),JX={row:"minWidth",col:"minHeight"},eJ={row:"maxWidth",col:"maxHeight"},qk={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},Yk={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},tJ={row:"row",col:"column"},Hl=(t,e,n)=>{if(n=sh(e,n),t.style[gl(e)]=n,!ae()){if(n===""||!M(n))return;const s=`${xw(e)}: ${n};`;_V(t,s,!1)}};class nJ extends hu{_renderVisible(e,n){super._renderVisible(e),M(n)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:n})}}class iJ{constructor(e,n){this._$element=e,this._option=n}renderBox(){this._$element.css({display:`${Xf("flexDirection")}flex`}),Hl(this._$element.get(0),"flexDirection",tJ[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){const e=this._option("align");return e in qk?qk[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){const e=this._option("crossAlign");return e in Yk?Yk[e]:e}renderItems(e){const n=Xf("flexDirection"),i=this._option("direction");N(e,function(){const s=m(this),r=s.data("dxBoxItemData");s.css({display:`${n}flex`}).css(eJ[i],r.maxSize||"none").css(JX[i],r.minSize||"0"),Hl(s.get(0),"flexBasis",r.baseSize||0),Hl(s.get(0),"flexGrow",r.ratio),Hl(s.get(0),"flexShrink",M(r.shrink)?r.shrink:1),s.children().each((o,a)=>{m(a).css({width:"auto",height:"auto",display:`${Xf("flexDirection")}flex`,flexBasis:0}),Hl(a,"flexGrow",1),Hl(a,"flexDirection",m(a)[0].style.flexDirection||"column")})})}}class Go extends ia{_getDefaultOptions(){return T(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return"dxBoxItemData"}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new iJ(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return this.option("_queue")?!1:!!this._queue.length}_pushItemToQueue(e,n){this._queue.push({$item:e,config:n})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(e){for(super._renderItems(e);this._queueIsNotEmpty();){const n=this._shiftItemFromQueue();this._createComponent(n.$item,Go,T({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},n.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(e){const n=e.itemData&&e.itemData.node;return n?this._renderItemContentByNode(e,n):super._renderItemContent(e)}_postprocessRenderItem(e){const n=e.itemData.box;n&&this._pushItemToQueue(e.itemContent,n)}_createItemByTemplate(e,n){return n.itemData.box?e.source?e.source():m():super._createItemByTemplate(e,n)}_itemOptionChanged(e,n,i,s){n==="visible"&&this._onItemStateChanged({name:n,state:i,oldState:s!==!1}),super._itemOptionChanged(e,n,i)}_optionChanged(e){switch(e.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(e)}}_itemOptions(){const e=super._itemOptions();return e.fireItemStateChangedAction=n=>{this._onItemStateChanged(n)},e}}Go.ItemClass=nJ;re("dxBox",Go);const Kv=["year","day","month","day"],Zk=["hours","minutes","seconds","milliseconds"],sJ=864e5,rJ=31536e6,oJ=function(t){const e=typeof t;return e==="string"?"format":e==="object"&&t.type!==void 0?t.type:null},Pe={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:sJ,ONE_YEAR:rJ,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){const t=new Date;return new Date(t.getFullYear()+50,t.getMonth(),t.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:()=>"yyyy-MM-dd",components:Kv},time:{getStandardPattern:()=>"HH:mm",components:Zk},datetime:{getStandardPattern(){let t;return function(){const e=m("<input>").attr("type","datetime");e.val("2000-01-01T01:01Z"),e.val()&&(t="yyyy-MM-ddTHH:mmZ")}(),t||(t="yyyy-MM-ddTHH:mm:ssZ"),Pe.FORMATS_INFO.datetime.getStandardPattern=function(){return t},t},components:[...Kv,...Zk]},"datetime-local":{getStandardPattern:()=>"yyyy-MM-ddTHH:mm:ss",components:[...Kv,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat(t,e){const n=Pe.FORMATS_INFO[e].getStandardPattern();return je.serializeDate(t,n)},fromStandardDateFormat(t){const e=je.dateParser(t);return er(e)?e:void 0},getMaxMonthDay:(t,e)=>new Date(t,e+1,0).getDate(),mergeDates(t,e,n){if(!e)return e||null;if(!t||isNaN(t.getTime())){const r=new Date(null);t=new Date(r.getFullYear(),r.getMonth(),r.getDate())}const i=new Date(t.valueOf()),s=Pe.FORMATS_INFO[n];return N(s.components,function(){const r=Pe.DATE_COMPONENTS_INFO[this];i[r.setter](e[r.getter]())}),i},getLongestCaptionIndex(t){let e=0,n=0,i;for(i=0;i<t.length;++i)t[i].length>n&&(e=i,n=t[i].length);return e},formatUsesMonthName:t=>ee.formatUsesMonthName(t),formatUsesDayName:t=>ee.formatUsesDayName(t),getLongestDate(t,e,n){const i=oJ(t);let s=9;(!i||Pe.formatUsesMonthName(i))&&(s=Pe.getLongestCaptionIndex(e));const r=new Date(1888,s,21,23,59,59,999);if(!i||Pe.formatUsesDayName(i)){const o=r.getDate()-r.getDay()+Pe.getLongestCaptionIndex(n);r.setDate(o)}return r},normalizeTime(t){t.setSeconds(0),t.setMilliseconds(0)}};Pe.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter(t,e){const n=new Date(e.getTime());return n.setFullYear(t),ee.format(n,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter(t,e){const n=new Date(e.getTime());return n.setDate(t),ee.format(n,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:t=>ee.getMonthNames()[t],startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:t=>ee.format(new Date(0,0,0,t),"hour"),startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:t=>ee.format(new Date(0,0,0,0,t),"minute"),startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:t=>ee.format(new Date(0,0,0,0,0,t),"second"),startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:t=>ee.format(new Date(0,0,0,0,0,0,t),"millisecond"),startValue:0,endValue:999}};const BS="dxdblclick",Qk=K(_n,"dxDblClick"),aJ=ze.inherit({ctor(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add(){this._handlerCount<=0&&b.on(W.getDocument(),Qk,this._clickHandler.bind(this)),this._handlerCount+=1},_clickHandler(t){const e=t.timeStamp||Date.now(),n=e-this._lastClickTimeStamp;!(n<0)&&n<300?(ta({type:"dxdblclick",target:iK(this._firstClickTarget,t.target),originalEvent:t}),this._forgetLastClick()):(this._firstClickTarget=t.target,this._lastClickTimeStamp=e,clearTimeout(this._lastClickClearTimeout),this._lastClickClearTimeout=setTimeout(()=>{this._forgetLastClick()},600))},remove(){this._handlerCount-=1,this._handlerCount<=0&&(this._forgetLastClick(),b.off(W.getDocument(),Qk,void 0),clearTimeout(this._lastClickClearTimeout),this._handlerCount=0)}}),lJ=new aJ;cs(BS,lJ);const cJ="dx-numberbox-spin",uJ="dx-numberbox-spin-button",pF="dxNumberBox",Xk=K(ot.up,pF),Jk=K(ot.cancel,pF),Nl=Kt.inherit({_getDefaultOptions(){return T(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup(){this.callBase();const t=`${cJ}-${this.option("direction")}`;this.$element().addClass(uJ).addClass(t),this._spinIcon=m("<div>").addClass(`${t}-icon`).appendTo(this.$element())},_render(){this.callBase();const t=K(ot.down,this.NAME),e=this.$element();b.off(e,t),b.on(e,t,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler(t){t.preventDefault(),this._clearTimer(),b.on(this.$element(),hh.name,()=>{this._feedBackDeferred=j(),DL(this._feedBackDeferred),this._spinChangeHandler({event:t}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:t})});const e=W.getDocument();b.on(e,Xk,this._clearTimer.bind(this)),b.on(e,Jk,this._clearTimer.bind(this)),this._spinChangeHandler({event:t})},_dispose(){this._clearTimer(),this.callBase()},_clearTimer(){b.off(this.$element(),hh.name);const t=W.getDocument();b.off(t,Xk),b.off(t,Jk),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged(t){switch(t.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(t)}}}),dJ="dx-numberbox-spin",hJ="dx-numberbox-spin-container",pJ="dx-numberbox-spin-touch-friendly";class fJ extends F_{_attachEvents(e,n){const{editor:i}=this,s=K(ot.down,i.NAME),r=n.children(),o=i._createAction(a=>i._spinButtonsPointerDownHandler(a));b.off(n,s),b.on(n,s,a=>o({event:a})),Nl.getInstance(r.eq(0)).option("onChange",a=>i._spinUpChangeHandler(a)),Nl.getInstance(r.eq(1)).option("onChange",a=>i._spinDownChangeHandler(a))}_create(){const{editor:e}=this,n=m("<div>").addClass(hJ),i=m("<div>").appendTo(n),s=m("<div>").appendTo(n),r=this._getOptions();return this._addToContainer(n),e._createComponent(i,Nl,T({direction:"up"},r)),e._createComponent(s,Nl,T({direction:"down"},r)),this._legacyRender(e.$element(),this._isTouchFriendly(),r.visible),{instance:n,$element:n}}_getOptions(){const{editor:e}=this,n=this._isVisible(),i=e.option("disabled");return{visible:n,disabled:i}}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){const{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,n,i){e.toggleClass(pJ,n),e.toggleClass(dJ,i)}update(){if(super.update()){const{editor:n,instance:i}=this,s=n.$element(),r=this._isVisible(),o=this._isTouchFriendly(),a=i.children(),l=Nl.getInstance(a.eq(0)),c=Nl.getInstance(a.eq(1)),u=this._getOptions();l.option(u),c.option(u),this._legacyRender(s,o,r)}}}const mJ=Math,gJ="dx-numberbox",_J=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],yJ=AS.inherit({_supportedKeys(){return T(this.callBase(),{upArrow(t){bn(t)||(t.preventDefault(),t.stopPropagation(),this._spinUpChangeHandler(t))},downArrow(t){bn(t)||(t.preventDefault(),t.stopPropagation(),this._spinDownChangeHandler(t))},enter(){}})},_getDefaultOptions(){return T(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:q.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:()=>!1,_getDefaultButtons(){return this.callBase().concat([{name:"spins",Ctor:fJ}])},_isSupportInputMode(){const t=parseFloat(is.version);return is.chrome&&t>=66||is.safari&&t>=12},_defaultOptionsRules(){return this.callBase().concat([{device:()=>X.real().generic&&!X.isSimulator(),options:{useLargeSpinButtons:!1}},{device:(function(){return X.real().deviceType!=="desktop"&&!this._isSupportInputMode()}).bind(this),options:{mode:"number"}}])},_initMarkup(){this._renderSubmitElement(),this.$element().addClass(gJ),this.callBase()},_getDefaultAttributes(){const t=this.callBase();return t.inputmode="decimal",t},_renderContentImpl(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement(){this._$submitElement=m("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(t){this._getSubmitElement().val(rU(t))},_getSubmitElement(){return this._$submitElement},_keyPressHandler(t){this.callBase(t);const e=ZD(t);if(!/[\d.,eE\-+]/.test(e)){const i=tn(t);return bn(t)||i&&_J.includes(i)?void 0:(t.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel(t){t.delta>0?this._spinValueChange(1,t):this._spinValueChange(-1,t)},_renderValue(){const t=this._input().val(),e=this.option("value");(!t.length||Number(t)!==e)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());const n=M(e)?null:q.format("dxNumberBox-noDataText");return this.setAria({valuenow:rt(e,""),valuetext:n}),this.option("text",this._input().val()),this._updateButtons(),j().resolve()},_forceValueRender(){const t=this.option("value"),e=Number(t),n=isNaN(e)?"":this._applyDisplayValueFormatter(t);this._renderDisplayText(n)},_applyDisplayValueFormatter(t){return this.option("displayValueFormatter")(t)},_renderProps(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:rt(this.option("min"),""),valuemax:rt(this.option("max"),"")})},_spinButtonsPointerDownHandler(){const t=this._input();!this.option("useLargeSpinButtons")&&W.getActiveElement()!==t[0]&&b.trigger(t,"focus")},_spinUpChangeHandler(t){this.option("readOnly")||this._spinValueChange(1,t.event||t)},_spinDownChangeHandler(t){this.option("readOnly")||this._spinValueChange(-1,t.event||t)},_spinValueChange(t,e){const n=parseFloat(this.option("step"));if(n===0)return;let i=parseFloat(this._normalizeInputValue())||0;i=this._correctRounding(i,n*t);const s=this.option("min"),r=this.option("max");M(s)&&(i=Math.max(s,i)),M(r)&&(i=Math.min(r,i)),this._saveValueChangeEvent(e),this.option("value",i)},_correctRounding(t,e){const n=/[,.](.*)/,i=n.test(t),s=n.test(e);if(i||s){const r=i?n.exec(t)[0].length:0,o=s?n.exec(e)[0].length:0,a=mJ.max(r,o);return t=this._round(t+e,a),t}return t+e},_round(t,e){e=e||0;const n=10**e;return t*=n,t=Math.round(t)/n,t},_renderValueChangeEvent(){this.callBase();const t=K("focusout","NumberBoxForceValueChange");b.off(this.element(),t),b.on(this.element(),t,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue(){if(this.option("mode")==="number")return;const t=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));t.val(null),t.val(e)},_valueChangeEventHandler(t){const e=this._input(),n=this._normalizeText(),i=this._parseValue(n),s=n!=="."&&n!=="-";if(this._isValueValid()&&!this._validateValue(i)){e.val(this._applyDisplayValueFormatter(i));return}s&&this.callBase(t,isNaN(i)?null:i),this._applyValueBoundaries(n,i),this.validationRequest.fire({value:i,editor:this})},_applyValueBoundaries(t,e){const n=this._isValueIncomplete(t),i=this._isValueInRange(t);!n&&!i&&e!==null&&Number(t)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:t=>t.replace(",","."),_inputIsInvalid(){const t=this.option("mode")==="number",e=this._input().get(0).validity;return t&&e&&e.badInput},_renderDisplayText(t){this._inputIsInvalid()||this.callBase(t)},_isValueIncomplete:t=>/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(t),_isValueInRange(t){return Or(t,this.option("min"),this.option("max"))},_isNumber(t){return this._parseValue(t)!==null},_validateValue(t){const e=this._normalizeText(),n=this._isValueValid();let i=!0;const s=this._isNumber(e);return isNaN(Number(t))&&(i=!1),!t&&n?i=!0:!s&&!n&&(i=!1),this.option({isValid:i,validationError:i?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),i},_normalizeInputValue(){return this._parseValue(this._normalizeText())},_normalizeText(){const t=this._input().val().trim();return this._replaceCommaWithPoint(t)},_parseValue(t){const e=parseFloat(t);return isNaN(e)?null:pn(e,this.option("min"),this.option("max"))},_clearValue(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear(){this.option("value")===null?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged(t){switch(t.name){case"value":this._validateValue(t.value),this._setSubmitValue(t.value),this.callBase(t),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(t)}}}),pm=function(t){let e=0,n=0;for(let i=0;i<t.length;++i)if(t[i]==="'"&&e++,t[i]==="."&&(++n,e%2===0))return{occurrence:n,index:i};return{occurrence:1,index:-1}},T0=function(t,e,n){let i=-1;for(;n--&&i++<t.length;)i=t.indexOf(e,i);return i},I0=function(t,e){return e===-1?[t]:[t.slice(0,e),t.slice(e+1)]},vJ=function(t,e){return t&&VV(t/100,e)},Dg=function(t,e){if(typeof e=="string"){const n=e.split(";"),i=Ge.getSign(t,e);n[1]=n[1]||`-${n[0]}`,e=n[i<0?1:0],e=(a=>a.replace(/'([^']*)'/g,l=>l.split("").map(()=>" ").join("").substr(2)))(e);const r=/^[^#0.,]*/.exec(e)[0].length,o=/[^#0.,]*$/.exec(e)[0].length;return{start:r,end:t.length-o}}return{start:0,end:t.length}},eR=function(t,e){const n=Ge.getDecimalSeparator(),i=new RegExp(`[^0-9${Po(n)}]`,"g");return e.slice(0,t).replace(i,"").length},tR=function(t){return t.split("").reverse().join("")},nR=function(t,e){if(!t)return-1;const n=/[0-9]/g;let i=1,s=null,r=n.exec(e);for(;r;){if(s=r.index,i>=t)return s;i++,r=n.exec(e)}return s===null?e.length:s},CJ=function(t){return t.replace(/[^0-9e]+$/,"")},La=function(t,e){return t.start===void 0&&(t={start:t,end:t}),{start:t.start+e,end:t.end+e}},DJ=function(t,e,n,i){n=La(n,0);const s=Ge.getDecimalSeparator(),r=xJ(t),o=pm(i).occurrence,a=r?0:T0(t,s,o),l=T0(e,s,o),c=I0(t,a),u=I0(e,l);if(a!==-1&&n.start>a){const C=n.start-a-1,x=eR(C,c[1]),S=u[1]?l+1+nR(x,u[1])+1:e.length;return go(S,e,i)}const p=CJ(u[0]),f=c[0].length-n.start,g=eR(f,tR(c[0])),y=nR(g,tR(p)),v=p.length-(y+1);return go(v,e,i)};function xJ(t){return t.length===1&&!!t.match(/^[,.][0-9]*$/g)}const wJ=function(t,e,n){t=La(t,0);const i=go(t,e,n);return t.start>=i.start&&t.end<=i.end};function go(t,e,n){t=La(t,0);const i=Dg(e,n);return{start:pn(t.start,i.start,i.end),end:pn(t.end,i.start,i.end)}}const SJ=function(t,e,n){const i=Dg(t,n);return Dg(e,n).start-i.start},xg=yJ.inherit({_getDefaultOptions(){return T(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:t=>t==="del",_supportedKeys(){return this._useMaskBehavior()?T(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex(t){const e=Ge.getDecimalSeparator(),n=pm(this.option("format")).occurrence;return T0(t,e,n)},_focusInHandler(t){this._preventNestedFocusEvent(t)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0;const e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){const n=this._getInputVal(),i=this._getTextSeparatorIndex(n);i>=0?this._caret({start:i,end:i}):this._moveCaretToBoundaryEventHandler(-1,t)}},0)),this.callBase(t)},_focusOutHandler(t){const e=!this._preventNestedFocusEvent(t);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(t),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(t){const e=this._getFormatPattern(),n=this.option("value");return(this._format(n,e)||"")!==t},_updateFormattedValue(){const t=this._getInputVal();this._hasValueBeenChanged(t)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&b.trigger(this._input(),"change"))},_arrowHandler(t,e){if(!this._useMaskBehavior())return;const n=this._getInputVal(),i=this._getFormatPattern();let s=La(this._caret(),t);wJ(s,n,i)||(s=t===1?s.end:s.start,e.preventDefault(),this._caret(go(s,n,i)))},_moveCaretToBoundary(t){const e=Dg(this._getInputVal(),this._getFormatPattern()),n=La(t===1?e.start:e.end,0);this._caret(n)},_moveCaretToBoundaryEventHandler(t,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(t),e&&e.preventDefault())},_shouldMoveCaret(t,e){const n=Ge.getDecimalSeparator(),i=t.charAt(e.end)===n;return(this._lastKey===n||this._lastKey==="."||this._lastKey===",")&&i},_getInputVal(){return Ge.convertDigits(this._input().val(),!0)},_keyboardHandler(t){if(this.clearCaretTimeout(),this._lastKey=Ge.convertDigits(ZD(t),!0),this._lastKeyName=tn(t),!this._shouldHandleKey(t.originalEvent))return this.callBase(t);const e=this._getInputVal(),n=this._caret();let i;this._lastKeyName==="minus"?i="":i=t.which===110?Ge.getDecimalSeparator():this._lastKey;const s=this._tryParse(e,n,i);return this._shouldMoveCaret(e,n)&&(this._moveCaret(1),t.originalEvent.preventDefault()),s===void 0?this._lastKeyName!=="minus"&&t.originalEvent.preventDefault():this._parsedValue=s,this.callBase(t)},_keyPressHandler(t){this._useMaskBehavior()||this.callBase(t)},_removeHandler(t){const e=this._caret(),n=this._getInputVal();let{start:i}=e,{end:s}=e;this._lastKey=ZD(t),this._lastKeyName=tn(t);const r=this._isDeleteKey(this._lastKeyName),o=!r;if(i===s){const u=i;if(o&&u>0||r&&u<n.length)r&&s++,o&&i--;else{t.preventDefault();return}}const a=n.slice(i,s);if(this._isStub(a)){this._moveCaret(r?1:-1),(this._parsedValue<0||1/this._parsedValue===-1/0)&&(this._revertSign(t),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&b.trigger(this._input(),"input")),t.preventDefault();return}const l=Ge.getDecimalSeparator();if(a===l){const u=n.indexOf(l);this._isNonStubAfter(u+1)&&(this._moveCaret(r?1:-1),t.preventDefault());return}if(s-i<n.length&&this._replaceSelectedText(n,{start:i,end:s},"").search(/[0-9]/)<0&&this._isValueInRange(0)){this._parsedValue=this._parsedValue<0||1/this._parsedValue===-1/0?-0:0;return}const c=this._tryParse(n,{start:i,end:s},"");c===void 0?t.preventDefault():this._parsedValue=c},_isPercentFormat(){return this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")!==-1},_parse(t,e){const n=this.option("format"),i=ie(n.parser),s=i?n.parser:Ge.parse;let r=0;if(!i){const o=pm(e).index,a=this._getTextSeparatorIndex(t),l=o!==-1?o:e.length,c=a!==-1?a:t.length;c>l&&e.indexOf("#")===-1&&(r=c-l)}return t=t.substr(r),s(t,e)},_format(t,e){const n=this.option("format"),i=(n==null?void 0:n.formatter)||n,s=ie(i)?i:Ge.format;return t===null?"":s(t,e)},_getFormatPattern(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat(){const t=this.option("format"),e=ie(t==null?void 0:t.parser),n=ve(t)&&(t.includes("0")||t.includes("#")),i=t==="exponential"||(t==null?void 0:t.type)==="exponential",s=e||n||i;this._currentFormat=s?t:C3(r=>{const o=this._format(r,t);return Ge.convertDigits(o,!0)})},_getFormatForSign(t){const e=this._getFormatPattern();if(ve(e)){const i=e.split(";"),s=Ge.getSign(t,e);return i[1]=i[1]||`-${i[0]}`,s<0?i[1]:i[0]}return Ge.getSign(t)<0?"-":""},_removeStubs(t,e){const n=this._getFormatForSign(t),i=Ge.getThousandsSeparator(),s=this._getStubs(n);let r=t;if(s.length){const o=s[0],a=new RegExp(`(${Po(s[1]||"")})$`,"g"),l=new RegExp(`[-${Po(e?"":i)}]`,"g");r=r.replace(o,"").replace(a,"").replace(l,"")}return r},_getStubs(t){const e=/[^']([#0.,]+)/g.exec(t),n=e&&e[0].trim();return t.split(n).map(i=>i.replace(/'/g,""))},_truncateToPrecision(t,e){if(M(t)){const n=t.toString(),i=n.indexOf(".");if(n&&i>-1){const s=parseFloat(n.substr(0,i+e+1));return isNaN(s)?t:s}}return t},_tryParse(t,e,n){const i=e.start!==e.end,s=i&&e.start===0&&e.end===t.length,r=Ge.getDecimalSeparator();if(s&&n===r)return 0;const o=this._replaceSelectedText(t,e,n),a=this._getFormatPattern();let l=this._getParsedValue(o,a);const c=!a.parser&&this._getPrecisionLimits(o).max,u=l!==this._parsedValue,d=n===r&&c===0,p=!i&&!u&&n!=="-"&&this._isStub(n);if(d||p||(this._removeStubs(o)===""&&(l=Math.abs(0*this._parsedValue)),isNaN(l)))return;const f=l===null?this._parsedValue:l;return l=c?this._truncateToPrecision(f,c):l,!a.parser&&this._isPercentFormat()?vJ(l,c):l},_getParsedValue(t,e){const n=Ge.getSign(t,(e==null?void 0:e.formatter)||e),i=this._removeStubs(t,!0),s=this._parse(i,e),r=s<0?-1:1;return ut(s)&&n!==r?n*s:s},_isValueIncomplete(t){if(!this._useMaskBehavior())return this.callBase(t);const e=this._caret(),n=Ge.getDecimalSeparator(),i=this._getTextSeparatorIndex(t),s=i>=0&&i<e.start,r=this._removeStubs(t,!0).split(n);if(!s||r.length!==2)return!1;const o=r[1].length,l=!!this._getFormatPattern().parser,c=!l&&this._getPrecisionLimits(this._getFormatPattern(),t),u=l?!0:Or(o,c.min,c.max),d=r[1].charAt(o-1)==="0";return u&&(d||!o)},_isValueInRange(t){const e=rt(this.option("min"),-1/0),n=rt(this.option("max"),1/0);return Or(t,e,n)},_setInputText(t){const e=Ge.convertDigits(t,!0),n=DJ(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(t),this._toggleEmptinessEventHandler(),this._formattedValue=t,this._focusOutOccurs||this._caret(n)},_useMaskBehavior(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType(){const t=this.option("mode")==="number",e=X.real().deviceType==="desktop";this._useMaskBehavior()&&t?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:t=>ve(t)&&t.length===1,_moveCaret(t){if(!t)return;const e=La(this._caret(),t),n=go(e,this._getInputVal(),this._getFormatPattern());this._caret(n)},_shouldHandleKey(t){const e=tn(t),n=bn(t)||t.altKey||t.shiftKey||!this._isChar(e),i=e==="minus";return this._useMaskBehavior()&&!n&&!i},_renderInput(){this.callBase(),this._renderFormatter()},_renderFormatter(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents(){b.off(this._input(),".dxNumberFormatter")},_isInputFromPaste(t){const e=t.originalEvent&&t.originalEvent.inputType;return M(e)?e==="insertFromPaste":this._isValuePasted},_attachFormatterEvents(){const t=this._input();b.on(t,K("input","dxNumberFormatter"),e=>{this._formatValue(e),this._isValuePasted=!1}),b.on(t,K("dxclick","dxNumberFormatter"),()=>{this._caretTimeout||(this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0,this._caret(go(this._caret(),this._getInputVal(),this._getFormatPattern()))},0))}),b.on(t,BS,()=>{this.clearCaretTimeout()})},clearCaretTimeout(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter(t){const e=this._getInputVal().slice(t);return e&&!this._isStub(e,!0)},_isStub(t,e){const i=`^[^0-9${Po(Ge.getDecimalSeparator())}]+$`;return new RegExp(i,"g").test(t)&&(e||this._isChar(t))},_parseValue(t){return this._useMaskBehavior()?this._parsedValue:this.callBase(t)},_getPrecisionLimits(t){const e=this._getFormatForSign(t),n=pm(e).index,i=(I0(e,n)[1]||"").replace(/[^#0]/g,""),s=i.replace(/^(0*)#*/,"$1").length,r=i.length;return{min:s,max:r}},_revertSign(t){if(!this._useMaskBehavior())return;const e=this._caret();if(e.start!==e.end){if(tn(t)==="minus"){this._applyRevertedSign(t,e,!0);return}this._caret(go(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(t,e)},_applyRevertedSign(t,e,n){const i=-1*rt(this._parsedValue,null);if((this._isValueInRange(i)||i===0)&&(this._parsedValue=i,n)){const s=this._getFormatPattern(),r=this._getInputVal();this._setTextByParsedValue(),t.preventDefault();const o=this._getInputVal(),a=SJ(r,o,s);e=La(e,a);const l=go(e,o,s);this._caret(l)}},_removeMinusFromText(t,e){return this._lastKeyName==="minus"&&t.charAt(e.start-1)==="-"?this._replaceSelectedText(t,{start:e.start-1,end:e.start},""):t},_setTextByParsedValue(){const t=this._getFormatPattern(),e=this._parseValue(),n=this._format(e,t)||"";this._setInputText(n)},_formatValue(t){let e=this._getInputVal();const n=this._caret(),i=this._removeMinusFromText(e,n),s=i!==e;if(e=i,!this._isInputFromPaste(t)&&this._isValueIncomplete(i)){this._formattedValue=e,s&&this._setTextByParsedValue();return}if(Ge.convertDigits(this._formattedValue,!0)!==e){const o=this._tryParse(e,n,"");M(o)&&(this._parsedValue=o)}this._setTextByParsedValue()},_renderDisplayText(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue(){const t=this._getInputVal();this._parsedValue=this._tryParse(t,this._caret())},_adjustParsedValue(){if(!this._useMaskBehavior())return;const e=this._removeStubs(this._getInputVal())?this._parseValue():null;if(!ut(e)){this._parsedValue=e;return}this._parsedValue=pn(e,this.option("min"),this.option("max"))},_valueChangeEventHandler(t){if(!this._useMaskBehavior())return this.callBase(t);const e=this._caret();this._saveValueChangeEvent(t),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged(t){switch(t.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(t);break;default:this.callBase(t)}},_clearCache(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean(){this._clearCache(),this.callBase()}});re("dxNumberBox",xg);function bJ(t,e){var n;return(((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))??document).querySelector(e)}const iR="dx-invalid-message-auto",sR="dx-validation-target";let LS=class extends A_{getProps(){const e=super.getProps();return e.onFocusIn=()=>{if(this.option("validationMessageMode")==="auto"){const i=m(bJ(this.element(),".dx-invalid-message.dx-overlay-wrapper"));i==null||i.removeClass(iR);const s=150;this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>{i==null||i.addClass(iR)},s)}},e.saveValueChangeEvent=n=>{this._valueChangeEventInstance=n},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=at(),st(this.$element()[0],sR,this)}_render(){var e;(e=this.option("_onMarkupRendered"))===null||e===void 0||e()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(Qe.initValidationOptions(e))}_getDefaultOptions(){return T(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,n){const i=T({},e.option()),s=()=>this._silent(n,i);s(),e.on("optionChanged",s)}_raiseValidation(e,n){const i=!M(e)&&!M(n);e!==n&&!i&&this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,n){var i;(i=this._valueChangeAction)===null||i===void 0||i.call(this,{element:this.$element(),previousValue:n,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){const{name:n,previousValue:i,value:s}=e;switch(n&&this._getActionConfigs()[n]!==void 0&&this._addAction(n),n){case"value":this._raiseValidation(s,i),this.option("isDirty",this._initialValue!==s),this._raiseValueChangeAction(s,i);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Qe.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}clear(){const{value:e}=this._getDefaultOptions();this.option({value:e})}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length&&(this._initialValue=e),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),st(this.element(),sR,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}};const EJ=Fi.isEditor,fF=t=>EJ(t)||t instanceof LS;LS.isEditor=fF;Fi.isEditor=fF;let TJ=class extends LS{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){const e=super.getProps();return e.value!==null&&(e.value=!!e.value),e}};const IJ=["dataSource","selectedRowKeys"],AJ={integrationOptions:!0};function Yu(t,e,n){return{path:t,value:e,previousValue:n}}function rR(t,e,n,i,s,r){if(AJ[i])return;const o=as(e),a=as(n);if(e!==n)if(o!==a)t.push(Yu(i,n,e));else if(o==="object")if(!Ce(n))t.push(Yu(i,n,e));else{const l=oR(e,n,s,r);t.push(...l.map(c=>L({},c,{path:`${i}.${c.path}`})))}else if(o==="array")if(r.some(c=>s.includes(c))&&e!==n)t.push(Yu(i,n,e));else if(e.length!==n.length)t.push(Yu(i,n,e));else{const c=oR(e,n,s,r);[].push.apply(t,c.map(u=>L({},u,{path:`${i}${u.path}`})))}else t.push(Yu(i,n,e))}const mF=t=>(e,n,i,s)=>{const r=[],o=Array.isArray(e)?a=>{rR(r,e[a],n[a],`[${a}]`,`${i}.${a}`,s)}:a=>{rR(r,e[a],n[a],a,`${i}.${a}`,s)};return t(e).forEach(o),Object.keys(n).filter(a=>!Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==n[a]).forEach(a=>{r.push({path:a,value:n[a],previousValue:e[a]})}),r},oR=mF(t=>Object.keys(t)),kJ={key:!0,ref:!0,children:!0,style:!0},RJ=mF(t=>Object.keys(t).filter(e=>!kJ[e]));function OJ(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:IJ;return RJ(t,e,"",n)}const PJ=["valueChange"],MJ=["componentProps","componentType","templateNames"],gF=t=>Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{}),VJ=t=>{let{props:{componentProps:{className:e}},restAttributes:n,widgetRef:i}=t;return gF(Ve(1,"div",e,null,1,L({},n),null,i))},BJ={};class _F extends I_{get config(){return this.context[Bo.id]?this.context[Bo.id]:Bo.defaultValue}constructor(e){super(e),this.state={},this.widgetRef=ts(),this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}createEffects(){return[new Wt(this.setupWidget,[]),new Wt(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var e;(e=this._effects[1])===null||e===void 0||e.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){const e=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=e,()=>{e.dispose(),this.instance=null}}updateWidget(){const e=this.getInstance();if(!e)return;const n=OJ(this.prevProps||{},this.properties);n.length&&(e.beginUpdate(),n.forEach(i=>{let{path:s,value:r}=i;e.option(s,r)}),e.endUpdate()),this.prevProps=this.properties}get properties(){var e;const n=gF(this.props.componentProps),{valueChange:i}=n,s=Mt(n,PJ),r=L({rtlEnabled:!!((e=this.config)!==null&&e!==void 0&&e.rtlEnabled),isRenovated:!0},s);return i&&(r.onValueChanged=a=>{let{value:l}=a;return i(l)}),this.props.templateNames.forEach(a=>{jY(a,r)&&(r[a]=(l,c,u)=>{KY(this.props.componentProps[a],{item:l,index:c,container:u})})}),r}get restAttributes(){const e=this.props;return Mt(e,MJ)}getInstance(){return this.instance}render(){const e=this.props;return VJ({props:L({},e),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}_F.defaultProps=BJ;const LJ=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],$J=t=>{let{componentProps:e,restAttributes:n}=t;return Li(fe(2,_F,L({componentType:TS,componentProps:e,templateNames:[]},n)))},FJ=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(R_),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));class yF extends ht{constructor(e){super(e),this.state={}}get componentProps(){return this.props}get restAttributes(){const e=this.props;return Mt(e,LJ)}render(){const e=this.props;return $J({props:L({},e),componentProps:this.componentProps,restAttributes:this.restAttributes})}}yF.defaultProps=FJ;const HJ=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],NJ=t=>{const{classes:e,isValid:n,readOnly:i}=t,s={"dx-state-readonly":!!i,"dx-invalid":!n,[String(e)]:!!e};return Co(s)},zJ=t=>{const{aria:e,cssClasses:n,isValidationMessageVisible:i,onFocusIn:s,props:{accessKey:r,activeStateEnabled:o,children:a,className:l,disabled:c,focusStateEnabled:u,height:d,hint:p,hoverStateEnabled:f,onClick:g,onKeyDown:y,rtlEnabled:v,tabIndex:C,validationMessageMode:x,validationMessagePosition:S,visible:O,width:H},restAttributes:F,rootElementRef:I,validationErrors:w,validationMessageGuid:A,validationMessageTarget:k,widgetRef:P}=t;return Li(fe(2,cS,L({rootElementRef:I,aria:e,classes:n,activeStateEnabled:o,focusStateEnabled:u,hoverStateEnabled:f,accessKey:r,className:l,rtlEnabled:v,hint:p,disabled:c,height:d,width:H,onFocusIn:s,onClick:g,onKeyDown:y,tabIndex:C,visible:O},F,{children:ri([a,i&&fe(2,yF,{validationErrors:w,mode:x,positionSide:S,rtlEnabled:v,target:k,boundary:k,visualContainer:k,contentId:A})],0)}),null,P))},jt=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(R_),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),WJ={get readOnly(){return jt.readOnly},get name(){return jt.name},get validationError(){return jt.validationError},get validationErrors(){return jt.validationErrors},get validationMessageMode(){return jt.validationMessageMode},get validationMessagePosition(){return jt.validationMessagePosition},get validationStatus(){return jt.validationStatus},get isValid(){return jt.isValid},get isDirty(){return jt.isDirty},get inputAttr(){return jt.inputAttr},get defaultValue(){return jt.defaultValue},get valueChange(){return jt.valueChange},get className(){return jt.className},get activeStateEnabled(){return jt.activeStateEnabled},get disabled(){return jt.disabled},get focusStateEnabled(){return jt.focusStateEnabled},get hoverStateEnabled(){return jt.hoverStateEnabled},get tabIndex(){return jt.tabIndex},get visible(){return jt.visible},get aria(){return ug.aria},get classes(){return ug.classes}};class vF extends ds{constructor(e){super(e),this.widgetRef=ts(),this.rootElementRef=ts(),this.__getterCache={},this.state={validationMessageGuid:`dx-${new Et}`,isValidationMessageVisible:!1,value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new Wt(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),hs()]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState(e=>({isValidationMessageVisible:this.shouldShowValidationMessage}))}onFocusIn(e){const{onFocusIn:n}=this.props;n==null||n(e)}get cssClasses(){return`${NJ(L({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}`}get shouldShowValidationMessage(){const{isValid:e,validationStatus:n}=this.props,i=this.validationErrors??[];return!(e&&n!=="invalid")&&i.length>0}get aria(){const{isValid:e,readOnly:n}=this.props,i={readonly:n?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(i.describedBy=this.state.validationMessageGuid),L({},i,this.props.aria)}get validationErrors(){return this.__getterCache.validationErrors!==void 0?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{const{validationError:e,validationErrors:n}=this.props;let i=n&&[...n];return!i&&e&&(i=[L({},e)]),i})()}get validationMessageTarget(){var e;return(e=this.rootElementRef)===null||e===void 0?void 0:e.current}get restAttributes(){const e=L({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value});return Mt(e,HJ)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e,n,i){super.componentWillUpdate(),(this.props.validationError!==e.validationError||this.props.validationErrors!==e.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){const e=this.props;return zJ({props:L({},e,{value:this.props.value!==void 0?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}vF.defaultProps=WJ;const GJ=["size"],UJ=t=>{const{cssStyles:e,elementRef:n}=t;return Ve(1,"span","dx-checkbox-icon",null,1,{style:Cl(e)},null,n)},KJ={};class CF extends ht{constructor(e){super(e),this.state={},this.elementRef=ts(),this.__getterCache={}}get cssStyles(){return this.__getterCache.cssStyles!==void 0?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{const{size:e}=this.props;return{fontSize:sh("fontSize",e)}})()}get restAttributes(){const e=this.props;return Mt(e,GJ)}componentWillUpdate(e,n,i){this.props.size!==e.size&&(this.__getterCache.cssStyles=void 0)}render(){const e=this.props;return UJ({props:L({},e),elementRef:this.elementRef,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}CF.defaultProps=KJ;const jJ=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],qJ=t=>{const{text:e,value:n}=t,i=n;return Co({"dx-checkbox":!0,"dx-checkbox-checked":i===!0,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":i===null})},YJ=t=>{const{aria:e,cssClasses:n,editorRef:i,keyDown:s,onWidgetClick:r,props:{accessKey:o,activeStateEnabled:a,className:l,disabled:c,focusStateEnabled:u,height:d,hint:p,hoverStateEnabled:f,iconSize:g,isValid:y,name:v,onFocusIn:C,readOnly:x,rtlEnabled:S,tabIndex:O,text:H,validationError:F,validationErrors:I,validationMessageMode:w,validationMessagePosition:A,validationStatus:k,value:P,visible:$,width:R},restAttributes:Ae}=t;return Li(fe(2,vF,L({aria:e,classes:n,onClick:r,onKeyDown:s,accessKey:o,activeStateEnabled:a,focusStateEnabled:u,hoverStateEnabled:f,className:l,disabled:c,readOnly:x,hint:p,height:d,width:R,rtlEnabled:S,tabIndex:O,visible:$,validationError:F,validationErrors:I,validationMessageMode:w,validationMessagePosition:A,validationStatus:k,isValid:y,onFocusIn:C},Ae,{children:ri([Li(Ve(64,"input",null,null,1,L({type:"hidden",value:`${P}`},v&&{name:v}))),Ve(1,"div","dx-checkbox-container",[fe(2,CF,{size:g,isChecked:P===!0}),H&&Ve(1,"span","dx-checkbox-text",H,0)],0)],4)}),null,i))},zt=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(jt),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return X.real().deviceType==="desktop"&&!X.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),ZJ={get text(){return zt.text},get enableThreeStateBehavior(){return zt.enableThreeStateBehavior},get activeStateEnabled(){return zt.activeStateEnabled},get hoverStateEnabled(){return zt.hoverStateEnabled},get focusStateEnabled(){return zt.focusStateEnabled},get defaultValue(){return zt.defaultValue},get valueChange(){return zt.valueChange},get readOnly(){return zt.readOnly},get name(){return zt.name},get validationError(){return zt.validationError},get validationErrors(){return zt.validationErrors},get validationMessageMode(){return zt.validationMessageMode},get validationMessagePosition(){return zt.validationMessagePosition},get validationStatus(){return zt.validationStatus},get isValid(){return zt.isValid},get isDirty(){return zt.isDirty},get inputAttr(){return zt.inputAttr},get className(){return zt.className},get disabled(){return zt.disabled},get tabIndex(){return zt.tabIndex},get visible(){return zt.visible},get aria(){return ug.aria}};let wg=class extends ds{constructor(e){super(e),this.editorRef=ts(),this.state={value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[hs()]}onWidgetClick(e){const{enableThreeStateBehavior:n,readOnly:i,saveValueChangeEvent:s}=this.props;if(!i)if(s==null||s(e),n){let r;this.setState(o=>(r=(this.props.value!==void 0?this.props.value:o.value)===null||((this.props.value!==void 0?this.props.value:o.value)?!1:null),{value:r})),this.props.valueChange(r)}else{let r;this.setState(o=>(r=!((this.props.value!==void 0?this.props.value:o.value)??!1),{value:r})),this.props.valueChange(r)}}keyDown(e){const{onKeyDown:n}=this.props,{keyName:i,originalEvent:s,which:r}=e,o=n==null?void 0:n(e);if(o!=null&&o.cancel)return o;(i==="space"||r==="space")&&(s.preventDefault(),this.onWidgetClick(s))}get cssClasses(){return qJ(L({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}get aria(){const e=(this.props.value!==void 0?this.props.value:this.state.value)===!0,i={role:"checkbox",checked:(this.props.value!==void 0?this.props.value:this.state.value)===null?"mixed":`${e}`};return L({},i,this.props.aria)}get restAttributes(){const e=L({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value});return Mt(e,jJ)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){const e=this.props;return YJ({props:L({},e,{value:this.props.value!==void 0?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}};function QJ(t){const e=["value"];return Object.keys(t).reduce((n,i)=>{const s=t[i],r=e.some(o=>o===i)?"default"+i.charAt(0).toUpperCase()+i.slice(1):i;return n[r]=s,n},{})}wg.defaultProps=ZJ;const aR=[];function XJ(t){aR.push(t),wg.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(wg.defaultProps),Object.getOwnPropertyDescriptors(QJ(jc(aR)))))}class Sg extends TJ{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.focus(...arguments)}blur(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return wg}}re("dxCheckBox",Sg);Sg.defaultOptions=XJ;const DF=Fi.inherit({_supportedKeys(){return T(this.callBase(),{space:function(t){t.preventDefault(),this._clickAction({event:t})}})},_getDefaultOptions(){return T(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:()=>!0,_defaultOptionsRules(){return this.callBase().concat([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon(){this._$icon=m("<div>").addClass("dx-radiobutton-icon"),m("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState(t){this.$element().toggleClass("dx-radiobutton-checked",t).find(".dx-radiobutton-icon").toggleClass("dx-radiobutton-icon-checked",t),this.setAria("checked",t)},_renderClick(){const t=K(_n,this.NAME);this._clickAction=this._createAction(e=>{this._clickHandler(e.event)}),b.off(this.$element(),t),b.on(this.$element(),t,e=>{this._clickAction({event:e})})},_clickHandler(t){this._saveValueChangeEvent(t),this.option("value",!0)},_optionChanged(t){t.name==="value"?(this._renderCheckedState(t.value),this.callBase(t)):this.callBase(t)}});re("dxRadioButton",DF);const $S="dxListEditDecorator",JJ=K(uF,$S),eee=K(dF,$S),tee=K(PS,$S),nee=ze.inherit({ctor(t){this._list=t,this._init()},_init:B,_shouldHandleSwipe:!1,_attachSwipeEvent(t){const e={itemSizeFunc:(function(){return this._clearSwipeCache&&(this._itemWidthCache=me(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}).bind(this)};b.on(t.$itemElement,JJ,e,this._itemSwipeStartHandler.bind(this)),b.on(t.$itemElement,eee,this._itemSwipeUpdateHandler.bind(this)),b.on(t.$itemElement,tee,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler(t){const e=m(t.currentTarget);if(e.is(".dx-state-disabled, .dx-state-disabled *")){t.cancel=!0;return}clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,t)},_itemSwipeUpdateHandler(t){const e=m(t.currentTarget);this._swipeUpdateHandler(e,t)},_itemSwipeEndHandler(t){const e=m(t.currentTarget);this._swipeEndHandler(e,t),this._clearSwipeCache=!0},beforeBag:B,afterBag:B,_commonOptions(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement(t){this._shouldHandleSwipe&&(this._attachSwipeEvent(t),this._clearSwipeCache=!0)},afterRender:B,handleClick:B,handleKeyboardEvents:B,handleEnterPressing:B,handleContextMenu:B,_swipeStartHandler:B,_swipeUpdateHandler:B,_swipeEndHandler:B,visibilityChange:B,getExcludedSelectors:B,dispose:B}),xF={};function iee(t,e,n){const i=xF,s={};s[t]=i[t]?i[t]:{},s[t][e]=n,T(i,s)}const lR="dx-list-select-decorator-enabled",see="dx-list-select-checkbox-container",ree="dx-list-select-checkbox",oee="dx-list-select-radiobutton-container",aee="dx-list-select-radiobutton",cR=K(_n,"dxListEditDecorator");iee("selection","default",nee.inherit({_init(){this.callBase.apply(this,arguments);const t=this._list.option("selectionMode");this._singleStrategy=t==="single",this._containerClass=this._singleStrategy?oee:see,this._controlClass=this._singleStrategy?aee:ree,this._controlWidget=this._singleStrategy?DF:Sg,this._list.$element().addClass(lR)},beforeBag(t){const{$itemElement:e}=t,n=t.$container.addClass(this._containerClass),i=m("<div>").addClass(this._controlClass).appendTo(n);new this._controlWidget(i,T(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":"Check State"},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:(function(s){s.event&&this._list._saveSelectionChangeEvent(s.event),this._processCheckedState(e,s.value),s.event&&s.event.stopPropagation()}).bind(this)}))},modifyElement(t){this.callBase.apply(this,arguments);const{$itemElement:e}=t,n=this._controlWidget.getInstance(e.find(`.${this._controlClass}`));b.on(e,"stateChanged",(i,s)=>{n.option("value",s)})},_updateSelectAllState(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender(){this._list.option("selectionMode")==="all"&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents(t,e){const n=!e,i=this._list,s=this._$selectAll,r=i._getLastItemIndex();return!!s&&(e&&t===0||n&&t===r)?(i.option("focusedElement",s),i.scrollToItem(i.option("focusedElement")),!0):!1},handleEnterPressing(t){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return t.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll(){this._$selectAll=m("<div>").addClass("dx-list-select-all");const t=this._list._supportedKeys().downArrow.bind(this._list),e=m("<div>").addClass("dx-list-select-all-checkbox").appendTo(this._$selectAll);this._selectAllCheckBox=this._list._createComponent(e,Sg,{elementAttr:{"aria-label":q.format("dxList-selectAll")},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",t),m("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(this._$selectAll),this._list.itemsContainer().prepend(this._$selectAll),this._updateSelectAllState(),this._updateSelectAllAriaLabel(),this._attachSelectAllHandler()},_attachSelectAllHandler(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),b.off(this._$selectAll,cR),b.on(this._$selectAll,cR,this._selectAllClickHandler.bind(this))},_updateSelectAllAriaLabel(){if(!this._$selectAll)return;const{value:t}=this._selectAllCheckBox.option(),n=t===void 0?"half checked":t?"checked":"not checked",i=`${q.format("dxList-selectAll")}, ${n}`;this._$selectAll.attr({"aria-label":i})},_selectAllHandler(t){t.event&&t.event.stopPropagation(),t.event&&this._list._saveSelectionChangeEvent(t.event);const{value:e}=this._selectAllCheckBox.option();e?this._selectAllItems():e===!1&&this._unselectAllItems(),this._updateSelectAllAriaLabel(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability(){const t=this._list,e=t._dataController;return t.option("selectAllMode")==="allPages"&&t.option("grouped")&&!e.group()?(it.log("W1010"),!1):!0},_selectAllItems(){this._checkSelectAllCapability()&&this._list._selection.selectAll(this._list.option("selectAllMode")==="page")},_unselectAllItems(){this._checkSelectAllCapability()&&this._list._selection.deselectAll(this._list.option("selectAllMode")==="page")},_selectAllClickHandler(t){this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected(t){return this._list.isItemSelected(t)},_processCheckedState(t,e){e?this._list.selectItem(t):this._list.unselectItem(t)},dispose(){this._disposeSelectAll(),this._list.$element().removeClass(lR),this.callBase.apply(this,arguments)},_disposeSelectAll(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));function lee(t){return class{constructor(){throw new Error(`Module '${t}' not found`)}static getInstance(){}}}let uR=lee("TextBox");const dR={_getDefaultOptions:function(){return T(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){const t=this.$element(),e=this.option("searchEnabled"),n=this._addWidgetPrefix("search"),i=this._addWidgetPrefix("with-search");if(!e){t.removeClass(i),this._removeSearchBox();return}const s=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(s):(t.addClass(i),this._$searchEditorElement=m("<div>").addClass(n).prependTo(t),this._searchEditor=this._createComponent(this._$searchEditorElement,uR,s))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){const t=this,e=t.option("searchEditorOptions"),n=q.format("Search");return T({mode:"search",placeholder:n,tabIndex:t.option("tabIndex"),value:t.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":n},onValueChanged:function(i){const s=t.option("searchTimeout");t._valueChangeDeferred=new j,clearTimeout(t._valueChangeTimeout),t._valueChangeDeferred.done((function(){this.option("searchValue",i.value)}).bind(t)),i.event&&i.event.type==="input"&&s?t._valueChangeTimeout=setTimeout(function(){t._valueChangeDeferred.resolve()},s):t._valueChangeDeferred.resolve()}},e)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(t,e){this.option("searchEnabled")&&this._toggleFocusClass(e,this.$element()),this.callBase(t,e)},getOperationBySearchMode:function(t){return t==="equals"?"=":t},_optionChanged:function(t){switch(t.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource){it.log("W1009");return}t.name==="searchMode"?this._dataSource.searchOperation(this.getOperationBySearchMode(t.value)):this._dataSource[t.name](t.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(t)}},focus:function(){if(!this.option("focusedElement")&&this.option("searchEnabled")){this._searchEditor&&this._searchEditor.focus();return}this.callBase()},_cleanAria:function(){const t=this.$element();this.setAria({role:null,activedescendant:null},t),t.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(t){uR=t}};function cee(t){return t?Number(t.replace("px","")):0}function uee(t){var e,n;return t&&ae()?(e=(n=pe()).getComputedStyle)===null||e===void 0?void 0:e.call(n,t):null}function dee(t,e){const n=uee(t);return n?cee(n[`margin${ih(e)}`]):0}const hee="__dx_key__",FS=ia.inherit({_getDefaultOptions(){return T(this.callBase(),{repaintChangesOnly:!1})},ctor(){var t;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},(t=this._dataController)===null||t===void 0||t.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload(){this._correctionIndex=0},_init(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey(t){let e=m();const n=this.key();return this.itemElements().each((i,s)=>{const r=m(s),o=this._getItemData(r);if(n?d_(n,this.keyOf(o),t):this._isItemEquals(o,t))return e=r,!1}),e},_dataSourceChangedHandler(t,e){e!=null&&e.changes?this._modifyByChanges(e.changes):(this.callBase(t,e),this._refreshItemsCache())},_isItemEquals(t,e){t&&t.__dx_key__&&(t=t.data);try{return JSON.stringify(t)===JSON.stringify(e)}catch{return t===e}},_isItemStrictEquals(t,e){return this._isItemEquals(t,e)},_shouldAddNewGroup(t,e){let n=!1;return this.option("grouped")&&(t.length||(n=!0),N(t,(i,s)=>{s.type==="insert"&&(n=!0,N(e,(r,o)=>{if(s.data.key!==void 0&&s.data.key===o.key)return n=!1,!1}))})),n},_partialRefresh(){if(this.option("repaintChangesOnly")){const t=n=>n&&n.__dx_key__!==void 0?n.__dx_key__:this.keyOf(n),e=A9(this._itemsCache,this._editStrategy.itemsGetter(),t,this._isItemStrictEquals.bind(this));if(e&&this._itemsCache.length&&!this._shouldAddNewGroup(e,this._itemsCache))return this._modifyByChanges(e,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache(){if(this.option("repaintChangesOnly")){const t=this._editStrategy.itemsGetter();try{this._itemsCache=T(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map((e,n)=>({[hee]:t[n],data:e})))}catch{this._itemsCache=T([],t)}}},_dispose(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange(t,e,n,i){if(i)this._renderItem(n.index,n.data,null,this._findItemElementByKey(n.key));else{const s=e[sl(t,e,n.key)];s&&Ow(t,e,n.key,n.data).done(()=>{this._renderItem(e.indexOf(s),s,null,this._findItemElementByKey(n.key))})}},_insertByChange(t,e,n,i){Ne(i||Pw(t,e,n.data,n.index)).done(()=>{this._beforeItemElementInserted(n),this._renderItem(n.index??e.length,n.data),this._afterItemElementInserted(),this._correctionIndex++})},_updateSelectionAfterRemoveByChange(t){const e=this.option("selectedIndex");e>t?this.option("selectedIndex",e-1):e===t&&this.option("selectedItems").length===1?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted(t){const e=this.option("selectedIndex");t.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:B,_removeByChange(t,e,n,i){const s=i?n.index:sl(t,e,n.key);if(i?n.oldItem:e[s]){const o=this._findItemElementByKey(n.key),a=this._extendActionArgs(o);this._waitDeletingPrepare(o).done(()=>{i?(this._updateIndicesAfterIndex(s-1),this._afterItemElementDeleted(o,a),this._updateSelectionAfterRemoveByChange(s)):(this._deleteItemElementByIndex(s),this._afterItemElementDeleted(o,a))}),this._correctionIndex--}},_modifyByChanges(t,e){const n=this._editStrategy.itemsGetter(),i={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},s=this._dataController,r=s.paginate(),o=s.group();(r||o)&&(t=t.filter(a=>a.type!=="insert"||a.index!==void 0)),t.forEach(a=>this[`_${a.type}ByChange`](i,n,a,e)),this._renderedItemsCount=n.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer(t,e,n){const i=t.children(this._itemSelector()).get(n);W.insertElement(t.get(0),e.get(0),i)},_optionChanged(t){switch(t.name){case"items":{this._partialRefresh(t.value)||this.callBase(t);break}case"dataSource":(!this.option("repaintChangesOnly")||!t.value)&&this.option("items",[]),this.callBase(t);break;case"repaintChangesOnly":break;default:this.callBase(t)}}}),HS=Dl.inherit({_supportedKeys(){return T(this.callBase(),{escape:B})},_getDefaultOptions(){return T(this.callBase(),{message:q.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:()=>Un(),options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}},{device:()=>qn(),options:{width:"auto",height:"auto"}}])},_init(){this.callBase.apply(this,arguments)},_render(){this.callBase(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper"),this._updateWrapperAria()},_updateWrapperAria(){if(this.$wrapper().removeAttr("aria-label").removeAttr("role"),!this.option("showIndicator")){const e=this._getAriaAttributes();this.$wrapper().attr(e)}},_getAriaAttributes(){const{message:t}=this.option();return{role:"alert","aria-label":t||q.format("Loading")}},_renderContentImpl(){this.callBase(),this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=m("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show(){const t=this.option("delay");if(!t)return this.callBase();const e=j(),n=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(()=>{n().done(()=>{e.resolve()})},t),e.promise()},_hide(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout(){clearTimeout(this._showTimeout)},_renderMessage(){if(!this._$loadPanelContentWrapper)return;const t=this.option("message");if(!t)return;const e=m("<div>").addClass("dx-loadpanel-message").text(t);this._$loadPanelContentWrapper.append(e)},_renderLoadIndicator(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=m("<div>").addClass("dx-loadpanel-indicator").appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,wl,{elementAttr:this._getAriaAttributes(),indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent(){this.$content().find(".dx-loadpanel-message").remove(),this.$content().find(".dx-loadpanel-indicator").remove(),delete this._$indicator},_togglePaneVisible(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))},_optionChanged(t){switch(t.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),this._updateWrapperAria();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(t)}},_dispose(){this._clearShowTimeout(),this.callBase()}});re("dxLoadPanel",HS);const A0="dxScrollbar",pee="dx-scrollbar-hoverable",hR="horizontal",pr={onScroll:"onScroll",onHover:"onHover",always:"always",never:"never"};let Dc=null;const wF=Kt.inherit({_getDefaultOptions(){return T(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:pr.onScroll,containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init(){this.callBase(),this._isHovered=!1},_initMarkup(){this._renderThumb(),this.callBase()},_render(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass(pee,this.option("hoverStateEnabled"))},_renderThumb(){this._$thumb=m("<div>").addClass("dx-scrollable-scroll"),m("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)},isThumb(t){return!!this.$element().find(t).length},_isHoverMode(){const t=this.option("visibilityMode");return(t===pr.onHover||t===pr.always)&&this.option("expandable")},_renderDirection(){const t=this.option("direction");this.$element().addClass(`dx-scrollbar-${t}`),this._dimension=t===hR?"width":"height",this._prop=t===hR?"left":"top"},_attachPointerDownHandler(){b.on(this._$thumb,K(ot.down,A0),this.feedbackOn.bind(this))},feedbackOn(t){t==null||t.preventDefault(),this.$element().addClass("dx-scrollable-scrollbar-active"),Dc=this},feedbackOff(){this.$element().removeClass("dx-scrollable-scrollbar-active"),Dc=null},cursorEnter(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility(t){this.option("visibilityMode")===pr.onScroll&&this._$thumb.css("opacity"),t=this._adjustVisibility(t),this.option().visible=t,this._$thumb.toggleClass("dx-state-invisible",!t)},_adjustVisibility(t){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case pr.onScroll:break;case pr.onHover:t=t||!!this._isHovered;break;case pr.never:t=!1;break;case pr.always:t=!0}return t},moveTo(t){if(this._isHidden())return;Ce(t)&&(t=t[this._prop]||0);const e={};e[this._prop]=this._calculateScrollBarPosition(t),Ft(this._$thumb,e)},_calculateScrollBarPosition(t){return-t*this._thumbRatio},_update(){const t=Math.round(this.option("containerSize")),e=Math.round(this.option("contentSize"));let n=Math.round(this.option("baseContainerSize")),i=Math.round(this.option("baseContentSize"));isNaN(n)&&(n=t,i=e),this._baseContainerToContentRatio=i?n/i:n,this._realContainerToContentRatio=e?t/e:t;const s=Math.round(Math.max(Math.round(t*this._realContainerToContentRatio),15));this._thumbRatio=(t-s)/(this.option("scaleRatio")*(e-t)),this.option(this._dimension,s/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden(){return this.option("visibilityMode")===pr.never},_needScrollbar(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio(){return this._realContainerToContentRatio},_normalizeSize(t){return Ce(t)?t[this._dimension]||0:t},_clean(){this.callBase(),this===Dc&&(Dc=null),b.off(this._$thumb,`.${A0}`)},_optionChanged(t){if(!this._isHidden())switch(t.name){case"containerSize":case"contentSize":this.option()[t.name]=this._normalizeSize(t.value),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:this.callBase.apply(this,arguments)}},update:Ic(function(){this._adjustVisibility()&&this.option("visible",!0)})});ar.add(()=>{b.subscribeGlobal(W.getDocument(),K(ot.up,A0),()=>{Dc&&Dc.feedbackOff()})});const pR="dxNativeScrollable",fee="dx-scrollable-scrollbar-simulated",mee="dx-scrollable-scrollbars-hidden",Zu="vertical",xf="horizontal",NS=ze.inherit({ctor(t){this._init(t)},_init(t){this._component=t,this._$element=t.$element(),this._$container=m(t.container()),this._$content=t.$content(),this._direction=t.option("direction"),this._useSimulatedScrollbar=t.option("useSimulatedScrollbar"),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t),this._isRtlNativeStrategy=t._isRtlNativeStrategy.bind(t)},render(){const e=X.real().platform;this._$element.addClass("dx-scrollable-native").addClass(`dx-scrollable-native-${e}`).toggleClass(mee,!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition(t){t&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass(fee),this._renderScrollbar(Zu),this._renderScrollbar(xf)},_renderScrollbar(t){this._isDirection(t)&&(this._scrollbars[t]=new wF(m("<div>").appendTo(this._$element),{direction:t,expandable:this._component.option("scrollByThumb")}))},handleInit:B,handleStart:B,handleMove(t){if(this._isLocked()){t.cancel=!0;return}this._allowedDirection()&&(t.originalEvent.isScrollingEvent=!0)},handleEnd:B,handleCancel:B,handleStop:B,_eachScrollbar(t){t=t.bind(this),N(this._scrollbars||{},(e,n)=>{t(n,e)})},createActions(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs(){const{left:t,top:e}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-t):this._isReachedLeft(t),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(t)):this._isReachedRight(t),reachedTop:this._isDirection(Zu)?Math.round(e)>=0:void 0,reachedBottom:this._isDirection(Zu)?Math.round(Math.abs(e)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset(){const{top:t,left:e}=this.location();return{top:-t,left:this._normalizeOffsetLeft(-e)}},_normalizeOffsetLeft(t){return this._isRtlNativeStrategy()?this._getMaxOffset().left+t:t},_isReachedLeft(t){return this._isDirection(xf)?Math.round(t)>=0:void 0},_isReachedRight(t){return this._isDirection(xf)?Math.round(Math.abs(t)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible(){const{showScrollbar:t}=this.option();return t!=="never"&&t!==!1},handleScroll(t){this._eventForUserAction=t,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars(){const{top:t,left:e}=this._getScrollOffset();this._eachScrollbar(n=>{n.moveTo({top:-t,left:-e}),n.option("visible",!0)}),this._hideScrollbars()},_hideScrollbars(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout(()=>{this._eachScrollbar(t=>{t.option("visible",!1)})},500)},location(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:B,update(){this._update(),this._updateAction(this._createActionArgs())},_update(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions(){this._containerSize={height:Re(this._$container),width:me(this._$container)},this._componentContentSize={height:Re(this._component.$content()),width:me(this._component.$content())},this._contentSize={height:Re(this._$content),width:me(this._$content)}},_updateScrollbars(){this._eachScrollbar(function(t,e){const n=e===Zu?"height":"width";t.option({containerSize:this._containerSize[n],contentSize:this._componentContentSize[n]}),t.update()})},_allowedDirections(){return{vertical:this._isDirection(Zu)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(xf)&&this._contentSize.width>this._containerSize.width}},dispose(){const{className:t}=this._$element.get(0),e=new RegExp("dx-scrollable-native\\S*","g");e.test(t)&&this._$element.removeClass(t.match(e).join(" ")),b.off(this._$element,`.${pR}`),b.off(this._$container,`.${pR}`),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars(){this._eachScrollbar(t=>{t.$element().remove()})},scrollBy(t){const e=this.location();this._$container.scrollTop(Math.round(-e.top-t.top)),this._$container.scrollLeft(Math.round(-e.left-t.left))},validate(t){return this.option("disabled")||Wn(t)&&this._isScrolledInMaxDirection(t)?!1:!!this._allowedDirection()},_isScrolledInMaxDirection(t){const e=this._$container.get(0);let n;return t.delta>0?n=t.shiftKey?!e.scrollLeft:!e.scrollTop:t.shiftKey?n=e.scrollLeft>=this._getMaxOffset().left:n=e.scrollTop>=this._getMaxOffset().top,n},getDirection(){return this._allowedDirection()}}),gee=NS.inherit({_init(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$refreshingText=t._$refreshingText,this._$scrollViewContent=m(t.content()),this._$container=m(t.container()),this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=at(),this.releaseCallbacks=at(),this.reachBottomCallbacks=at()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const t=m("<div>").addClass("dx-scrollview-pull-down-image"),e=m("<div>").addClass("dx-scrollview-pull-down-indicator"),n=new wl(m("<div>")).$element(),i=this._$pullDownText=m("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=m("<div>").text(this.option("pullingDownText")).appendTo(i),this._$pulledDownText=m("<div>").text(this.option("pulledDownText")).appendTo(i),this._$refreshingText=m("<div>").text(this.option("refreshingText")).appendTo(i),this._$pullDown.empty().append(t).append(e.append(n)).append(i)},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const t=this,e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];N(e,(n,i)=>{const s=t._state===i.visibleState?"addClass":"removeClass";i.element[s]("dx-scrollview-pull-down-text-visible")})},update(){this.callBase(),this._setTopPocketOffset()},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections(){const t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd(){this.callBase(),this._complete()},handleStop(){this.callBase(),this._complete()},_complete(){this._state===1&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(()=>{this._pullDownRefreshing()},400))},_setPullDownOffset(t){Ft(this._$topPocket,{top:t}),Ft(this._$scrollViewContent,{top:t})},handleScroll(t){if(this.callBase(t),this._state===2)return;const e=this.location().top,n=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():n>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this._state!==3&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady(){this._state!==1&&(this._state=1,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._releaseState())},_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable(t){t&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=t},reachBottomEnable(t){this._reachBottomEnabled=t},pendingRelease(){this._state=1},release(){const t=j();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._state===3&&(this._state=0),this._releaseTimeout=setTimeout(()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()},400),t.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),_ee=NS.inherit({_init(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$scrollViewContent=m(t.content()),this._$container=m(t.container()),this._initCallbacks(),this._location=0},_initCallbacks(){this.pullDownCallbacks=at(),this.releaseCallbacks=at(),this.reachBottomCallbacks=at()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const t=m("<div>").addClass("dx-scrollview-pull-down-indicator"),e=new wl(m("<div>")).$element();this._$icon=m("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(t.append(e))},_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown(){this._$pullDown.css({opacity:0})},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections(){const t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},handleInit(t){this.callBase(t),this._state===0&&this._location===0&&(this._startClientY=At(t.originalEvent).y,this._state=4)},handleMove(t){this.callBase(t),this._deltaY=At(t.originalEvent).y-this._startClientY,this._state===4&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),this._state===5&&(t.preventDefault(),this._movePullDown())},_movePullDown(){const t=this._getPullDownHeight(),e=Math.min(3*t,this._deltaY+this._getPullDownStartPosition()),n=180*e/t/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",e<t),Ft(this._$pullDown,{top:e}),this._$icon.css({transform:`rotate(${n}deg)`})},_isPullDown(){return this._pullDownEnabled&&this._state===5&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight(){return Math.round(.05*tt(this._$element))},_getPullDownStartPosition(){return-Math.round(1.5*tt(this._$pullDown))},handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop(){this._complete()},_complete(){(this._state===4||this._state===5)&&this._releaseState()},handleScroll(t){if(this.callBase(t),this._state===2)return;const e=this.location().top,n=this._location-e;this._location=e,n>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this.reachBottomCallbacks.fire()},_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading"),this._releaseState())},_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown(){this._$pullDown.addClass("dx-scrollview-pull-down-loading"),Ft(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable(t){this._$topPocket.toggle(t),this._pullDownEnabled=t},reachBottomEnable(t){this._reachBottomEnabled=t},pendingRelease(){this._state=1},release(){const t=j();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()},800),t.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),{abstract:yee}=ze,SF=ze.inherit({ctor(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start(){this._stopped=!1,this._finished=!1,this._stepCore()},stop(){this._stopped=!0,Sr(this._stepAnimationFrame)},_stepCore(){if(this._isStopped()){this._stop();return}if(this._isFinished()){this._finished=!0,this._complete();return}this._step(),this._stepAnimationFrame=ah(this._proxiedStepCore)},_step:yee,_isFinished:B,_stop:B,_complete:B,_isStopped(){return this._stopped},inProgress(){return!(this._stopped||this._finished)}}),bF="dxSimulatedScrollable",vee="dxScrollableStrategy",wf=`${bF}Cursor`,jv=`${bF}Keyboard`,Cee="dx-scrollable-scrollbars-alwaysvisible",Vs="vertical",Cn="horizontal",Dee=Math.round(1e3/60),xee=400/Dee,wee=(1-.92**xee)/(1-.92),fr={PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home",LEFT:"leftArrow",UP:"upArrow",RIGHT:"rightArrow",DOWN:"downArrow",TAB:"tab"},EF=SF.inherit({ctor(t){this.callBase(),this.scroller=t},VELOCITY_LIMIT:1,_isFinished(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration(){return this.scroller._inBounds()?.92:.5},_complete(){this.scroller._scrollComplete()}}),See=EF.inherit({VELOCITY_LIMIT:.2,_isFinished(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:()=>.92,_complete(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),TF=ze.inherit({ctor(t){this._initOptions(t),this._initAnimators(),this._initScrollbar()},_initOptions(t){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=t.direction===Cn?"x":"y",this._prop=t.direction===Cn?"left":"top",this._dimension=t.direction===Cn?"width":"height",this._scrollProp=t.direction===Cn?"scrollLeft":"scrollTop",N(t,(e,n)=>{this[`_${e}`]=n})},_initAnimators(){this._inertiaAnimator=new EF(this),this._bounceAnimator=new See(this)},_initScrollbar(){this._scrollbar=new wF(m("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:t=>t===!0?"onScroll":t===!1?"never":t,_scrollStep(t){const e=this._location;this._location+=t,this._suppressBounce(),this._move(),!(Math.abs(e-this._location)<1)&&b.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation(t){return t=t!==void 0?t:this._location,Math.max(Math.min(t,this._maxOffset),this._minOffset)},_move(t){this._location=t!==void 0?t*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent(){const t=this._location;this._$container[this._scrollProp](-t/this._getScaleRatio()),this._moveContentByTranslator(t)},_getScaleRatio(){if(ae()&&!this._scaleRatio){const t=this._$element.get(0),e=this._getRealDimension(t,this._dimension),n=this._getBaseDimension(t,this._dimension);this._scaleRatio=Math.round(e/n*100)/100}return this._scaleRatio||1},_getRealDimension:(t,e)=>Math.round(ke(t)[e]),_getBaseDimension(t,e){const n=`offset${ih(e)}`;return t[n]},_moveContentByTranslator(t){let e;const n=-this._maxScrollPropValue;if(t>0?e=t:t<=n?e=t-n:e=t%1,this._translateOffset===e)return;const i={};if(i[this._prop]=e,this._translateOffset=e,e===0){Yh(this._$content);return}Ft(this._$content,i)},_moveScrollbar(){this._scrollbar.moveTo(this._location)},_scrollComplete(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce(){const e=(this._bounceLocation=this._boundLocation())-this._location;this._velocity=e/wee},_inBounds(t){return t=t!==void 0?t:this._location,this._boundLocation(t)===t},_crossBoundOnNextStep(){const t=this._location,e=t+this._velocity;return t<this._minOffset&&e>=this._minOffset||t>this._maxOffset&&e<=this._maxOffset},_initHandler(t){this._stopScrolling(),this._prepareThumbScrolling(t)},_stopScrolling:Ic(function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}),_prepareThumbScrolling(t){if(Wn(t.originalEvent))return;const e=m(t.originalEvent.target),n=this._isScrollbar(e);n&&this._moveToMouseLocation(t),this._thumbScrolling=n||this._isThumb(e),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(e),this._thumbScrolling&&this._scrollbar.feedbackOn()},_isThumbScrollingHandler(t){return this._isThumb(t)},_moveToMouseLocation(t){const e=t[`page${this._axis.toUpperCase()}`]-this._$element.offset()[this._prop],n=this._location+e/this._containerToContentRatio()-Re(this._$container)/2;this._scrollStep(-Math.round(n))},_startHandler(){this._showScrollbar()},_moveHandler(t){this._crossThumbScrolling||(this._thumbScrolling&&(t[this._axis]=-Math.round(t[this._axis]/this._containerToContentRatio())),this._scrollBy(t))},_scrollBy(t){t=t[this._axis],this._inBounds()||(t*=.5),this._scrollStep(t)},_scrollByHandler(t){this._scrollBy(t),this._scrollComplete()},_containerToContentRatio(){return this._scrollbar.containerToContentRatio()},_endHandler(t){return this._completeDeferred=j(),this._velocity=t[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)},_resetThumbScrolling(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler(){this._update(),this._moveToBounds()},_update(){return this._stopScrolling(),r_(()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),Wr(()=>{this._moveScrollbar(),this._scrollbar.update()})})},_resetScaleRatio(){this._scaleRatio=null},_updateLocation(){this._location=(Gn(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:()=>0,_getMinOffset(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:pI(function(){const t=this._containerSize(),e=this._contentSize(),n=this._getBaseDimension(this._$container.get(0),this._dimension),i=this._getBaseDimension(this._$content.get(0),this._dimension);Wr(()=>{this._scrollbar.option({containerSize:t,contentSize:e,baseContainerSize:n,baseContentSize:i,scaleRatio:this._getScaleRatio()})})}),_moveToBounds:Ic(pI(Ic(function(){const t=this._boundLocation(),e=t!==this._location;this._location=t,this._move(),e&&this._scrollAction()}))),_createActionsHandler(t){this._scrollAction=t.scroll,this._bounceAction=t.bounce},_showScrollbar(){this._scrollbar.option("visible",!0)},_hideScrollbar(){this._scrollbar.option("visible",!1)},_containerSize(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize(){const t=this._$content.css(`overflow${this._axis.toUpperCase()}`)==="hidden";let e=this._getRealDimension(this._$content.get(0),this._dimension);if(!t){const n=this._$content[0][`scroll${ih(this._dimension)}`]*this._getScaleRatio();e=Math.max(n,e)}return e},_validateEvent(t){const e=m(t.originalEvent.target);return this._isThumb(e)||this._isScrollbar(e)},_isThumb(t){return this._scrollByThumb&&this._scrollbar.isThumb(t)},_isScrollbar(t){return this._scrollByThumb&&t&&t.is(this._$scrollbar)},_reachedMin(){return Math.round(this._location-this._minOffset)<=0},_reachedMax(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler(){this._scrollbar.cursorLeave()},dispose:B});let gs,zl;const IF=ze.inherit({ctor(t){this._init(t)},_init(t){this._component=t,this._$element=t.$element(),this._$container=m(t.container()),this._$wrapper=t._$wrapper,this._$content=t.$content(),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t)},render(){this._$element.addClass("dx-scrollable-simulated"),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers(){this._scrollers={},this._isDirection(Cn)&&this._createScroller(Cn),this._isDirection(Vs)&&this._createScroller(Vs),this._$element.toggleClass(Cee,this.option("showScrollbar")==="always")},_createScroller(t){this._scrollers[t]=new TF(this._scrollerOptions(t))},_scrollerOptions(t){return{direction:t,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio(t){for(const e in this._scrollers){const n=this._getPropByDirection(e);if(M(t[n])){const i=this._scrollers[e];t[n]*=i._getScaleRatio()}}return t},_isAnyThumbScrolling(t){let e=!1;return this._eventHandler("isThumbScrolling",t).done((n,i)=>{e=n||i}),e},handleInit(t){this._suppressDirections(t),this._eventForUserAction=t,this._eventHandler("init",t)},_suppressDirections(t){if(Wn(t.originalEvent)){this._prepareDirections(!0);return}this._prepareDirections(),this._eachScroller(function(e,n){const i=m(t.originalEvent.target),s=e._validateEvent(t)||this.option("scrollByContent")&&this._isContent(i);this._validDirections[n]=s})},_isContent(t){return!!t.closest(this._$element).length},_prepareDirections(t){t=t||!1,this._validDirections={},this._validDirections[Cn]=t,this._validDirections[Vs]=t},_eachScroller(t){t=t.bind(this),N(this._scrollers,(e,n)=>{t(n,e)})},handleStart(t){this._eventForUserAction=t,this._eventHandler("start").done(this._startAction)},_saveActive(){zl=this},_resetActive(){zl===this&&(zl=null)},handleMove(t){if(this._isLocked()){t.cancel=!0,this._resetActive();return}this._saveActive(),t.preventDefault&&t.preventDefault(),this._adjustDistance(t,t.delta),this._eventForUserAction=t,this._eventHandler("move",t.delta)},_adjustDistance(t,e){e.x*=this._validDirections[Cn],e.y*=this._validDirections[Vs];const n=this._tryGetDevicePixelRatio();n&&Wn(t.originalEvent)&&(e.x=Math.round(e.x/n*100)/100,e.y=Math.round(e.y/n*100)/100)},_tryGetDevicePixelRatio(){if(ae())return pe().devicePixelRatio},handleEnd(t){return this._resetActive(),this._refreshCursorState(t.originalEvent&&t.originalEvent.target),this._adjustDistance(t,t.velocity),this._eventForUserAction=t,this._eventHandler("end",t.velocity).done(this._endAction)},handleCancel(t){return this._resetActive(),this._eventForUserAction=t,this._eventHandler("end",{x:0,y:0})},handleStop(){this._resetActive(),this._eventHandler("stop")},handleScroll(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler(){b.off(this._$element,`.${jv}`),!this.option("disabled")&&this.option("useKeyboard")&&b.on(this._$element,K("keydown",jv),this._keyDownHandler.bind(this))},_keyDownHandler(t){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout(()=>{tn(t)===fr.TAB&&this._eachScroller(n=>{n._updateHandler()})}),!this._$container.is(W.getActiveElement(this._$container.get(0))))return;let e=!0;switch(tn(t)){case fr.DOWN:this._scrollByLine({y:1});break;case fr.UP:this._scrollByLine({y:-1});break;case fr.RIGHT:this._scrollByLine({x:1});break;case fr.LEFT:this._scrollByLine({x:-1});break;case fr.PAGE_DOWN:this._scrollByPage(1);break;case fr.PAGE_UP:this._scrollByPage(-1);break;case fr.HOME:this._scrollToHome();break;case fr.END:this._scrollToEnd();break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault())},_scrollByLine(t){const e=this._tryGetDevicePixelRatio();let n=40;e&&(n=Math.abs(n/e*100)/100),this.scrollBy({top:(t.y||0)*-n,left:(t.x||0)*-n})},_scrollByPage(t){const e=this._wheelProp(),n=this._dimensionByProp(e),i={},s=n==="width"?me:Re;i[e]=t*-s(this._$container),this.scrollBy(i)},_dimensionByProp:t=>t==="left"?"width":"height",_getPropByDirection:t=>t===Cn?"left":"top",_scrollToHome(){const t=this._wheelProp(),e={};e[t]=0,this._component.scrollTo(e)},_scrollToEnd(){const t=this._wheelProp(),e=this._dimensionByProp(t),n={},i=e==="width"?me:Re;n[t]=i(this._$content)-i(this._$container),this._component.scrollTo(n)},createActions(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler(t){const e=this._createActionByOption(t);return()=>{e(T(this._createActionArgs(),arguments))}},_createActionArgs(){const{horizontal:t,vertical:e}=this._scrollers,n=this._getScrollOffset();return this._scrollOffset={top:e&&n.top,left:t&&n.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:t&&t._reachedMax(),reachedRight:t&&t._reachedMin(),reachedTop:e&&e._reachedMax(),reachedBottom:e&&e._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler(t){const e=[].slice.call(arguments).slice(1),n=Yn(this._scrollers,i=>i[`_${t}Handler`].apply(i,e));return Ne.apply(m,n).promise()},location(){const t=Gn(this._$content);return t.top-=this._$container.scrollTop(),t.left-=this._$container.scrollLeft(),t},disabledChanged(){this._attachCursorHandlers()},_attachCursorHandlers(){b.off(this._$element,`.${wf}`),!this.option("disabled")&&this._isHoverMode()&&(b.on(this._$element,K("mouseenter",wf),this._cursorEnterHandler.bind(this)),b.on(this._$element,K("mouseleave",wf),this._cursorLeaveHandler.bind(this)))},_isHoverMode(){return this.option("showScrollbar")==="onHover"},_cursorEnterHandler(t){t=t||{},t.originalEvent=t.originalEvent||{},!(zl||t.originalEvent._hoverHandled)&&(gs&&gs._cursorLeaveHandler(),gs=this,this._eventHandler("cursorEnter"),t.originalEvent._hoverHandled=!0)},_cursorLeaveHandler(t){gs!==this||zl===gs||(this._eventHandler("cursorLeave"),gs=null,this._refreshCursorState(t&&t.relatedTarget))},_refreshCursorState(t){if(!this._isHoverMode()&&(!t||zl))return;const n=m(t).closest(".dx-scrollable-simulated:not(.dx-state-disabled)"),i=n.length&&n.data(vee);gs&&gs!==i&&gs._cursorLeaveHandler(),i&&i._cursorEnterHandler()},update(){const t=this._eventHandler("update").done(this._updateAction);return Ne(t,r_(()=>{const e=this._allowedDirections();return Wr(()=>{let n=e.vertical?"pan-x":"";n=e.horizontal?"pan-y":n,n=e.vertical&&e.horizontal?"none":n,this._$container.css("touchAction",n)}),Ne().promise()}))},_allowedDirections(){const t=this.option("bounceEnabled"),e=this._scrollers[Vs],n=this._scrollers[Cn];return{vertical:e&&(e._minOffset<0||t),horizontal:n&&(n._minOffset<0||t)}},_updateBounds(){this._scrollers[Cn]&&this._scrollers[Cn]._updateBounds()},_isHorizontalAndRtlEnabled(){return this.option("rtlEnabled")&&this.option("direction")!==Vs},updateRtlPosition(t){if(t&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){let e=this._getMaxOffset().left-this._rtlConfig.scrollRight;e<=0&&(e=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==e&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:e}),this._rtlConfig.skipUpdating=!1)}},_updateRtlConfig(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){const{clientWidth:t,scrollLeft:e}=this._$container.get(0),n=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===n&&this._rtlConfig.clientWidth===t&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-e),this._rtlConfig.clientWidth=t,this._rtlConfig.windowPixelRatio=n}},_getWindowDevicePixelRatio:()=>ae()?pe().devicePixelRatio:1,scrollBy(t){const e=this._scrollers[Vs],n=this._scrollers[Cn];e&&(t.top=e._boundLocation(t.top+e._location)-e._location),n&&(t.left=n._boundLocation(t.left+n._location)-n._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:t.left,y:t.top}),this._endAction(),this._updateRtlConfig()},validate(t){return Wn(t)&&bn(t)||this.option("disabled")?!1:this.option("bounceEnabled")?!0:Wn(t)?this._validateWheel(t):this._validateMove(t)},_validateWheel(t){const e=this._scrollers[this._wheelDirection(t)],n=e._reachedMin(),i=e._reachedMax(),s=!n||!i,r=!n&&!i,o=n&&t.delta>0,a=i&&t.delta<0;let l=s&&(r||o||a);return l=l||this._validateWheelTimer!==void 0,l&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout(()=>{this._validateWheelTimer=void 0},500)),l},_validateMove(t){return!this.option("scrollByContent")&&!m(t.target).closest(".dx-scrollable-scrollbar").length?!1:this._allowedDirection()},getDirection(t){return Wn(t)?this._wheelDirection(t):this._allowedDirection()},_wheelProp(){return this._wheelDirection()===Cn?"left":"top"},_wheelDirection(t){switch(this.option("direction")){case Cn:return Cn;case Vs:return Vs;default:return t&&t.shiftKey?Cn:Vs}},dispose(){this._resetActive(),gs===this&&(gs=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass("dx-scrollable-simulated"),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers(){b.off(this._$element,`.${wf}`),b.off(this._$container,`.${jv}`)}}),bee=Math,Eee=TF.inherit({ctor(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const t=this,e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];N(e,(n,i)=>{const s=t._state===i.visibleState?"addClass":"removeClass";i.element[s]("dx-scrollview-pull-down-text-visible")})},_initCallbacks(){this.pullDownCallbacks=at(),this.releaseCallbacks=at(),this.reachBottomCallbacks=at()},_updateBounds(){if(this._direction!=="horizontal"){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;const e=this._$container.get(0),n=this._$content.get(0);this._bottomBoundary=Math.max(n.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():this._state!==0&&this._stateReleased()},_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown(){return this._pullDownEnabled&&this._location>=0},_isReachBottom(){const t=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(t.scrollTop))<=1},_scrollComplete(){this._inBounds()&&this._state===1?this._pullDownRefreshing():this._inBounds()&&this._state===3?this._reachBottomLoading():this.callBase()},_reachBottomReady(){this._state!==3&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset(){return-this._topPocketSize},_getMinOffset(){return bee.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading(){this.reachBottomCallbacks.fire()},_pullDownReady(){this._state!==1&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){this._state!==0&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this.releaseCallbacks.fire())},_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler(){return this._state===0&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=iV(this._release.bind(this)),this._releaseTask.promise},_release(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler(t){this._reachBottomEnabled!==t&&(this._reachBottomEnabled=t,this._updateBounds())},_pullDownEnablingHandler(t){this._pullDownEnabled!==t&&(this._pullDownEnabled=t,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange(){this._location-=Re(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler(){this._state=1},dispose(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),Tee=IF.inherit({_init(t){this.callBase(t),this._$pullDown=t._$pullDown,this._$topPocket=t._$topPocket,this._$bottomPocket=t._$bottomPocket,this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=at(),this.releaseCallbacks=at(),this.reachBottomCallbacks=at()},render(){this._renderPullDown(),this.callBase()},_renderPullDown(){const t=m("<div>").addClass("dx-scrollview-pull-down-image"),e=m("<div>").addClass("dx-scrollview-pull-down-indicator"),n=new wl(m("<div>")).$element(),i=this._$pullDownText=m("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=m("<div>").text(this.option("pullingDownText")).appendTo(i),this._$pulledDownText=m("<div>").text(this.option("pulledDownText")).appendTo(i),this._$refreshingText=m("<div>").text(this.option("refreshingText")).appendTo(i),this._$pullDown.empty().append(t).append(e.append(n)).append(i)},pullDownEnable(t){this._eventHandler("pullDownEnabling",t)},reachBottomEnable(t){this._eventHandler("reachBottomEnabling",t)},_createScroller(t){const e=this,n=e._scrollers[t]=new Eee(e._scrollerOptions(t));n.pullDownCallbacks.add(()=>{e.pullDownCallbacks.fire()}),n.releaseCallbacks.add(()=>{e.releaseCallbacks.fire()}),n.reachBottomCallbacks.add(()=>{e.reachBottomCallbacks.fire()})},_scrollerOptions(t){return T(this.callBase(t),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease(){this._eventHandler("pendingRelease")},release(){return this._eventHandler("release").done(this._updateAction)},location(){const t=this.callBase();return t.top+=Re(this._$topPocket),t},dispose(){N(this._scrollers,function(){this.dispose()}),this.callBase()}});function Iee(t,e){const n={left:0,top:0};let i=e;for(;(s=i)!==null&&s!==void 0&&s.offsetParent&&!i.classList.contains(t);){var s;const r=i.offsetParent,o=i.getBoundingClientRect(),a=r.getBoundingClientRect();n.left+=o.left-a.left,n.top+=o.top-a.top,i=i.offsetParent}return n}const k0="vertical",Aee="horizontal",qv="both",kee="dx-scrollable-content";function Ree(t,e,n,i,s){const r=L({top:0,left:0,right:0,bottom:0},s),o=e===k0,a=o?"top":"left",l=o?"bottom":"right",c=o?"height":"width",u=n[`offset${ih(c)}`],d=n[`client${ih(c)}`],p=n.getBoundingClientRect()[c],f=t.getBoundingClientRect()[c];let g=1;Math.abs(p-u)>1&&(g=p/u);const y=Iee(kee,t)[a]/g,v=i[a],C=v-y+r[a],x=v-y-f/g+d-r[l];return C<=0&&x>=0?v:v-(Math.abs(C)>Math.abs(x)?x:C)}const AF=function(){return[{device:()=>!lh,options:{useNative:!1}},{device:t=>!X.isSimulator()&&X.real().deviceType==="desktop"&&t.platform==="generic",options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:rl,showScrollbar:"onHover"}}]},Ls="dxScrollable",Oee="dxScrollableStrategy",Bs="vertical",mr="horizontal",Yv="both",Qs=us.inherit({_getDefaultOptions(){return T(this.callBase(),{disabled:!1,onScroll:null,direction:Bs,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1,_onVisibilityChanged:B})},_defaultOptionsRules(){return this.callBase().concat(AF(),[{device:()=>lh&&X.real().platform==="android"&&!is.mozilla,options:{useSimulatedScrollbar:!0}}])},_initOptions(t){this.callBase(t),"useSimulatedScrollbar"in t||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged(t){t?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset,this.option("_onVisibilityChanged")(this)):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup(){const t=this.$element().addClass("dx-scrollable"),e=this._$container=m("<div>").addClass("dx-scrollable-container"),n=this._$wrapper=m("<div>").addClass("dx-scrollable-wrapper");(this._$content=m("<div>").addClass("dx-scrollable-content")).append(t.contents()).appendTo(e),e.appendTo(n),n.appendTo(t)},_dimensionChanged(){this.update(),this._updateRtlPosition()},_initMarkup(){this.callBase(),this._renderDirection()},_render(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition(t){this._strategy.updateRtlPosition(t)},_getMaxOffset(){const{scrollWidth:t,clientWidth:e,scrollHeight:n,clientHeight:i}=m(this.container()).get(0);return{left:t-e,top:n-i}},_attachEventHandlers(){const t=this._strategy,e={getDirection:t.getDirection.bind(t),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};b.off(this._$wrapper,`.${Ls}`),b.on(this._$wrapper,K(Ea.init,Ls),e,this._initHandler.bind(this)),b.on(this._$wrapper,K(Ea.start,Ls),t.handleStart.bind(t)),b.on(this._$wrapper,K(Ea.move,Ls),t.handleMove.bind(t)),b.on(this._$wrapper,K(Ea.end,Ls),t.handleEnd.bind(t)),b.on(this._$wrapper,K(Ea.cancel,Ls),t.handleCancel.bind(t)),b.on(this._$wrapper,K(Ea.stop,Ls),t.handleStop.bind(t)),b.off(this._$container,`.${Ls}`),b.on(this._$container,K("scroll",Ls),t.handleScroll.bind(t))},_validate(t){return this._isLocked()?!1:(this._updateIfNeed(),this._moveIsAllowed(t))},_moveIsAllowed(t){return this._strategy.validate(t)},handleMove(t){this._strategy.handleMove(t)},_prepareDirections(t){this._strategy._prepareDirections(t)},_initHandler(){const t=this._strategy;t.handleInit.apply(t,arguments)},_renderDisabledState(){this.$element().toggleClass("dx-scrollable-disabled",this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection(){this.$element().removeClass(`dx-scrollable-${mr}`).removeClass(`dx-scrollable-${Bs}`).removeClass(`dx-scrollable-${Yv}`).addClass(`dx-scrollable-${this.option("direction")}`)},_renderStrategy(){this._createStrategy(),this._strategy.render(),this.$element().data(Oee,this._strategy)},_createStrategy(){this._strategy=this.option("useNative")?new NS(this):new IF(this)},_createActions(){this._strategy&&this._strategy.createActions()},_clean(){this._strategy&&this._strategy.dispose()},_optionChanged(t){switch(t.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":case"_onVisibilityChanged":break;case"width":this.callBase(t),this._updateRtlPosition();break;default:this.callBase(t)}},_resetInactiveDirection(){const t=this._getInactiveProp();if(!t||!ae())return;const e=this.scrollOffset();e[t]=0,this.scrollTo(e)},_getInactiveProp(){const t=this.option("direction");if(t===Bs)return"left";if(t===mr)return"top"},_location(){return this._strategy.location()},_normalizeLocation(t){if(Ce(t)){const n=rt(t.left,t.x),i=rt(t.top,t.y);return{left:M(n)?-n:void 0,top:M(i)?-i:void 0}}const e=this.option("direction");return{left:e!==Bs?-t:void 0,top:e!==mr?-t:void 0}},_isLocked(){return this._locked},_lock(){this._locked=!0},_unlock(){this.option("disabled")||(this._locked=!1)},_isDirection(t){const e=this.option("direction");return t===Bs?e!==mr:t===mr?e!==Bs:e===t},_updateAllowedDirection(){const t=this._strategy._allowedDirections();this._isDirection(Yv)&&t.vertical&&t.horizontal?this._allowedDirectionValue=Yv:this._isDirection(mr)&&t.horizontal?this._allowedDirectionValue=mr:this._isDirection(Bs)&&t.vertical?this._allowedDirectionValue=Bs:this._allowedDirectionValue=null},_allowedDirection(){return this._allowedDirectionValue},$content(){return this._$content},content(){return se(this._$content)},container(){return se(this._$container)},scrollOffset(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy(){const{useNative:t,rtlEnabled:e}=this.option();return t&&e},scrollTop(){return this.scrollOffset().top},scrollLeft(){return this.scrollOffset().left},clientHeight(){return Re(this._$container)},scrollHeight(){return tt(this.$content())},clientWidth(){return me(this._$container)},scrollWidth(){return et(this.$content())},update(){if(this._strategy)return Ne(this._strategy.update()).done(()=>{this._updateAllowedDirection()})},scrollBy(t){t=this._normalizeLocation(t),!(!t.top&&!t.left)&&(this._updateIfNeed(),this._strategy.scrollBy(t))},scrollTo(t){t=this._normalizeLocation(t),this._updateIfNeed();let e=this._location();this.option("useNative")||(t=this._strategy._applyScaleRatio(t),e=this._strategy._applyScaleRatio(e)),this._isRtlNativeStrategy()&&(e.left-=this._getMaxOffset().left);const n=this._normalizeLocation({left:e.left-rt(t.left,e.left),top:e.top-rt(t.top,e.top)});!n.top&&!n.left||this._strategy.scrollBy(n)},scrollToElement(t,e){const n=m(t),i=this.$content().find(t).length,s=n.parents(".dx-scrollable").length-n.parents(".dx-scrollable-content").length===0;if(!i||!s)return;const r={top:0,left:0},o=this.option("direction");o!==Bs&&(r.left=this.getScrollElementPosition(n,mr,e)),o!==mr&&(r.top=this.getScrollElementPosition(n,Bs,e)),this.scrollTo(r)},getScrollElementPosition(t,e,n){const i=this.scrollOffset();return Ree(t.get(0),e,m(this.container()).get(0),i,n)},_updateIfNeed(){this.option("updateManually")||this.update()},_useTemplates:()=>!1,isRenovated:()=>!!Qs.IS_RENOVATED_WIDGET});re(Ls,Qs);const Pee="dx-scrollview-loadpanel",Mee={pullDown:gee,swipeDown:_ee,simulated:Tee},Vee=!ae(),Bee={finishLoading:B,release:B,refresh:B,scrollOffset:()=>({top:0,left:0}),_optionChanged(t){if(t.name!=="onUpdated")return this.callBase.apply(this,arguments)}},kF=Qs.inherit(Vee?Bee:{_getDefaultOptions(){return T(this.callBase(),{pullingDownText:q.format("dxScrollView-pullingDownText"),pulledDownText:q.format("dxScrollView-pulledDownText"),refreshingText:q.format("dxScrollView-refreshingText"),reachBottomText:q.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules(){return this.callBase().concat([{device(){return X.real().platform==="android"},options:{refreshStrategy:"swipeDown"}},{device:()=>ii(),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup(){this.callBase(),this.$element().addClass("dx-scrollview"),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent(){const t=m("<div>").addClass("dx-scrollview-content");this._$content.wrapInner(t)},_initTopPocket(){const t=this._$topPocket=m("<div>").addClass("dx-scrollview-top-pocket"),e=this._$pullDown=m("<div>").addClass("dx-scrollview-pull-down");t.append(e),this._$content.prepend(t)},_initBottomPocket(){const t=this._$bottomPocket=m("<div>").addClass("dx-scrollview-bottom-pocket"),e=this._$reachBottom=m("<div>").addClass("dx-scrollview-scrollbottom"),n=m("<div>").addClass("dx-scrollview-scrollbottom-indicator"),i=new wl(m("<div>")).$element(),s=this._$reachBottomText=m("<div>").addClass("dx-scrollview-scrollbottom-text");this._updateReachBottomText(),e.append(n.append(i)).append(s),t.append(e),this._$content.append(t)},_initLoadPanel(){const t=m("<div>").addClass(Pee).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(t,HS,e)},_updateReachBottomText(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy(){const t=this.option("useNative")?this.option("refreshStrategy"):"simulated",e=Mee[t];this._strategy=new e(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on(t){const e=this.callBase.apply(this,arguments);return(t==="pullDown"||t==="reachBottom")&&this._tryRefreshPocketState(),e},_pullDownEnable(t){if(arguments.length===0)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(t),this._strategy.pullDownEnable(t),this._pullDownEnabled=t)},_reachBottomEnable(t){if(arguments.length===0)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(t),this._strategy.reachBottomEnable(t),this._reachBottomEnabled=t)},_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator(t){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=t},_pullDownLoading(){this.startLoading(),this._pullDownAction()},_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading(){this.startLoading(),this._reachBottomAction()},_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged(t){switch(t.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(t)}},content(){return se(this._$content.children().eq(1))},release(t){return t!==void 0&&this.toggleLoading(!t),this._strategy.release()},toggleLoading(t){this._reachBottomEnable(t)},refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading(){this._loadPanel.hide(),this._unlock()},_dispose(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});re("dxScrollView",kF);const Lee=t=>Array.isArray(t)&&t.every(e=>{const n=Object.keys(e).length===2,i="key"in e&&"items"in e;return n&&i&&Array.isArray(e.items)}),RF={_getSpecificDataSourceOption(){let t=this.option("dataSource"),e=!1,n={};return this._getGroupedOption()&&Lee(t)&&(n=t.reduce((i,s)=>{const r=s.items.map(o=>(ue(o)||(o={text:o},e=!0),"key"in o||(o.key=s.key),o));return i.concat(r)},[]),t={store:{type:"array",data:n},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(t.searchExpr="text")),t}},$ee=hu.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge(t){if(this._$element.children(".dx-list-item-badge-container").remove(),!t)return;const e=m("<div>").addClass("dx-list-item-badge-container").append(m("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(t)),n=this._$element.children(".dx-list-item-chevron-container").first();n.length>0?e.insertBefore(n):e.appendTo(this._$element)},_renderShowChevron(t){if(this._$element.children(".dx-list-item-chevron-container").remove(),!t)return;const e=m("<div>").addClass("dx-list-item-chevron-container"),n=m("<div>").addClass("dx-list-item-chevron");e.append(n).appendTo(this._$element)}}),Fee=".dx-list-item",Hee=".dx-list-select-all",Nee=lt("items"),zS=FS.inherit({_activeStateUnit:[Fee,Hee].join(","),_supportedKeys(){const t=this,e=function(i){let s=n(i);s.is(t.option("focusedElement"))&&(function(o,a){let l=o.position().top;a==="prev"&&(l=o.position().top-Re(t.$element())+tt(o)),t.scrollTo(l)}(s,i),s=n(i)),t.option("focusedElement",se(s)),t.scrollToItem(s)};function n(i){const s=t.scrollTop(),r=Re(t.$element());let o=m(t.option("focusedElement")),a=!0;if(!o.length)return m();for(;a;){const l=o[i]();if(!l.length)break;const c=l.position().top+tt(l)/2;a=c<r+s&&c>s,a&&(o=l)}return o}return T(this.callBase(),{leftArrow:B,rightArrow:B,pageUp(){return e("prev"),!1},pageDown(){return e("next"),!1}})},_getDefaultOptions(){return T(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:q.format("dxList-pullingDownText"),pulledDownText:q.format("dxList-pulledDownText"),refreshingText:q.format("dxList-refreshingText"),pageLoadingText:q.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:q.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:t=>t?t.showChevron:void 0,badgeExpr:t=>t?t.badge:void 0})},_defaultOptionsRules(){const t=xi();return this.callBase().concat(AF(),[{device:()=>!lh,options:{useNativeScrolling:!1}},{device:e=>!lh&&!X.isSimulator()&&X.real().deviceType==="desktop"&&e.platform==="generic",options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>Un(t),options:{useInkRipple:!0}},{device:()=>ii(t),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])},_visibilityChanged(t){t&&this._updateLoadingState(!0)},_itemClass:()=>"dx-list-item",_itemDataKey:()=>"dxListItemData",_itemContainer(){return this._$container},_getItemsContainer(){return this._$listContainer},_cleanItemContainer(){this.callBase();const t=this._getItemsContainer();m(t).empty(),t.appendTo(this._$container)},_saveSelectionChangeEvent(t){this._selectionChangeEventInstance=t},_getSelectionChangeEvent(){return this._selectionChangeEventInstance},_refreshItemElements(){this.option("grouped")?this._itemElementsCache=this._getItemsContainer().children(".dx-list-group").children(".dx-list-group-body").children(this._itemSelector()):this._itemElementsCache=this._getItemsContainer().children(this._itemSelector())},_modifyByChanges(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem(t,e){return this.callBase(t,e).done(function(){this._refreshItemElements()})},deleteItem(t){return this.callBase(t).done(function(){this._refreshItemElements()})},_itemElements(){return this._itemElementsCache},_itemSelectHandler(t){if(!(this.option("selectionMode")==="single"&&this.isItemSelected(t.currentTarget)))return this.callBase(t)},_allowDynamicItemsAppend:()=>!0,_init(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=m("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode(){return this.option("pageLoadMode")==="scrollBottom"},_nextButtonMode(){return this.option("pageLoadMode")==="nextButton"},_dataSourceOptions(){const t=this._scrollBottomMode(),e=this._nextButtonMode();return T(this.callBase(),{paginate:rt(t||e,!0)})},_getGroupedOption(){return this.option("grouped")},_getGroupContainerByIndex(t){return this._getItemsContainer().find(".dx-list-group").eq(t).find(".dx-list-group-body")},_dataSourceFromUrlLoadMode:()=>"raw",_initScrollView(){const t=this.option("scrollingEnabled"),e=t&&this.option("pullRefreshEnabled"),n=t&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),zee(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!t,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:n?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=m(this._scrollView.content()),this._$listContainer.appendTo(this._$container),this._toggleWrapItemText(this.option("wrapItemText")),this._createScrollViewActions()},_toggleWrapItemText(t){this._$listContainer.toggleClass("dx-wrap-item-text",t)},_createScrollViewActions(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler(t){this._scrollAction&&this._scrollAction(t)},_initTemplates(){this._templateManager.addDefaultTemplates({group:new ea((t,e)=>{Ce(e)?e.key&&t.text(e.key):t.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate(t,e){if(this.callBase(t,e),t.icon){const n=Ch(t.icon).addClass("dx-list-item-icon"),i=m("<div>").addClass("dx-list-item-icon-container");i.append(n),e.prepend(i)}},_getBindableFields:()=>["text","html","icon"],_updateLoadingState(t){const e=this._dataController,n=this._scrollBottomMode()&&t&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(n)?this._infiniteDataLoading():(this._scrollView.release(!n&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted(t){return M(t)&&(this._isFirstLoadCompleted=t),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler(t){this._loadIndicationSuppressed()||(t&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(()=>{if(!!this._itemElements().length||this._isDataSourceFirstLoadCompleted()){var i;(i=this._scrollView)===null||i===void 0||i.startLoading()}}):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),t||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler(){!this._shouldAppendItems()&&ae()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed(t){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=t},_scrollViewIsFull(){const t=this._scrollView;return!t||Re(t.content())>Re(t.container())},_pullDownHandler(t){this._pullRefreshAction(t);const e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading(t){var e;const n=Re(this._scrollView.content())-Re(this._scrollView.container())<(((e=this._scrollView.scrollOffset())===null||e===void 0?void 0:e.top)??0);return t&&(!this._scrollViewIsFull()||n)},_infiniteDataLoading(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler(t){this._pageLoadingAction(t),!this._dataController.isLoading()&&!this._isLastPage()?this._loadNextPage():this._updateLoadingState()},_renderItems(t){this.option("grouped")?(N(t,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),Un()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent(){const t=K(_n,this.NAME),e=this.$element(),n=this.option("collapsibleGroups");e.toggleClass("dx-list-collapsible-groups",n),b.off(e,t,".dx-list-group-header"),n&&b.on(e,t,".dx-list-group-header",i=>{this._createAction(s=>{const r=m(s.event.currentTarget).parent();this._collapseGroupHandler(r),this.option("focusStateEnabled")&&this.option("focusedElement",se(r.find(".dx-list-item").eq(0)))},{validatingTargetName:"element"})({event:i})})},_collapseGroupHandler(t,e){const n=j();if(t.hasClass("dx-list-group-collapsed")===e)return n.resolve();const i=t.children(".dx-list-group-body"),s=tt(i);let r=0;return s===0&&(Ai(i,"auto"),r=tt(i)),t.toggleClass("dx-list-group-collapsed",e),Tt.animate(i,{type:"custom",from:{height:s},to:{height:r},duration:200,complete:(function(){this.updateDimensions(),this._updateLoadingState(!0),n.resolve()}).bind(this)}),n.promise()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup(){this._itemElementsCache=m(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this.setAria({role:"application"},this._focusTarget()),this._setListAria()},_setListAria(){const{items:t,allowItemDeleting:e}=this.option(),n=e?q.format("dxList-listAriaLabel-deletable"):q.format("dxList-listAriaLabel"),i=t!=null&&t.length?{role:"listbox",label:n}:{role:void 0,label:void 0};this.setAria(i,this._$listContainer)},_focusTarget(){return this._itemContainer()},_renderInkRipple(){this._inkRipple=h$()},_toggleActiveState(t,e,n){this.callBase.apply(this,arguments);const i=this;if(!this._inkRipple)return;const s={element:t,event:n};e?Un()?this._inkRippleTimer=setTimeout(()=>{i._inkRipple.showWave(s)},35):i._inkRipple.showWave(s):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(s))},_postprocessRenderItem(t){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent(m(t.itemElement))},_attachSwipeEvent(t){const e=K(PS,this.NAME);b.on(t,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler(t){this._itemDXEventHandler(t,"onItemSwipe",{direction:t.offset<0?"left":"right"})},_nextButtonHandler(t){this._pageLoadingAction(t);const e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup(t,e){const n=m("<div>").addClass("dx-list-group").appendTo(this._getItemsContainer()),i=`dx-${new Et().toString()}`,s={role:"group",labelledby:i};this.setAria(s,n);const r=m("<div>").addClass("dx-list-group-header").attr("id",i).appendTo(n),o=this.option("groupTemplate"),a=this._getTemplate(e.template||o,e,t,r),l={index:t,itemData:e,container:se(r)};this._createItemByTemplate(a,l),m("<div>").addClass("dx-list-group-header-indicator").prependTo(r),this._renderingGroupIndex=t;const c=m("<div>").addClass("dx-list-group-body").appendTo(n);N(Nee(e)||[],(u,d)=>{this._renderItem({group:t,item:u},d,c)}),this._groupRenderAction({groupElement:se(n),groupIndex:t,groupData:e})},downInkRippleHandler(t){this._toggleActiveState(m(t.currentTarget),!0,t)},upInkRippleHandler(t){this._toggleActiveState(m(t.currentTarget),!1)},attachGroupHeaderInkRippleEvents(){const t=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);const e=[t,"dxpointerdown",".dx-list-group-header",this._downInkRippleHandler],n=[t,"dxpointerup dxpointerout",".dx-list-group-header",this._upInkRippleHandler];b.off(...e),b.on(...e),b.off(...n),b.on(...n)},_createGroupRenderAction(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState(t){this.callBase(t),this._scrollView.option("disabled",t||!this.option("scrollingEnabled"))},_toggleNextButton(t){const e=this._dataController,n=this._getNextButton();this.$element().toggleClass("dx-has-next",t),t&&e.isLoaded()&&n.appendTo(this._itemContainer()),t||n.detach()},_getNextButton(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton(){const t=m("<div>").addClass("dx-list-next-button"),e=m("<div>").appendTo(t);return this._createComponent(e,Kn,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:ii()?"default":void 0,integrationOptions:{}}),t},_moveFocus(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh(){if(!ae())this.callBase();else{const t=this._scrollView.scrollTop();this.callBase(),t&&this._scrollView.scrollTo(t)}},_optionChanged(t){switch(t.name){case"pageLoadMode":this._toggleNextButton(t.value),this._initScrollView();break;case"dataSource":this.callBase(t),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(t),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._toggleWrapItemText(t.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(t),this._scrollView.option(t.name,t.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(t),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(t);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(t)}},_extendActionArgs(t){if(!this.option("grouped"))return this.callBase(t);const e=t.closest(".dx-list-group"),n=e.find(".dx-list-item");return T(this.callBase(t),{itemIndex:{group:e.index(),item:n.index(t)}})},expandGroup(t){const e=j(),n=this._getItemsContainer().find(".dx-list-group").eq(t);return this._collapseGroupHandler(n,!1).done(()=>{e.resolveWith(this)}),e.promise()},collapseGroup(t){const e=j(),n=this._getItemsContainer().find(".dx-list-group").eq(t);return this._collapseGroupHandler(n,!0).done(()=>{e.resolveWith(this)}),e},updateDimensions(){const t=this,e=j();return t._scrollView?t._scrollView.update().done(()=>{!t._scrollViewIsFull()&&t._updateLoadingState(!0),e.resolveWith(t)}):e.resolveWith(t),e.promise()},reload(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint(){this.scrollTo(0),this.callBase()},scrollTop(){return this._scrollView.scrollOffset().top},clientHeight(){return this._scrollView.clientHeight()},scrollHeight(){return this._scrollView.scrollHeight()},scrollBy(t){this._scrollView.scrollBy(t)},scrollTo(t){this._scrollView.scrollTo(t)},scrollToItem(t){const e=this._editStrategy.getItemElement(t),n=e==null?void 0:e.get(0);this._scrollView.scrollToElement(n,{bottom:dee(n,"bottom")})},_dimensionChanged(){this.updateDimensions()}}).include(RF);zS.ItemClass=$ee;function zee(){return kF}const OF=[],N_=function(t,e,n){OF.push({enabled:t,decoratorType:e,decoratorSubType:n})};N_(function(){return this.option("menuItems").length},()=>"menu",function(){return this.option("menuMode")});N_(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){const t=this.option("itemDeleteMode");return t==="toggle"||t==="slideButton"||t==="swipe"||t==="static"?"delete":"menu"},function(){let t=this.option("itemDeleteMode");return t==="slideItem"&&(t="slide"),t});N_(function(){return this.option("selectionMode")!=="none"&&this.option("showSelectionControls")},()=>"selection",()=>"default");N_(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},()=>"reorder",()=>"default");const Wee=ze.inherit({ctor(t){this._list=t,this._fetchRequiredDecorators()},dispose(){this._decorators&&this._decorators.length&&N(this._decorators,(t,e)=>{e.dispose()})},_fetchRequiredDecorators(){this._decorators=[],N(OF,(t,e)=>{if(e.enabled.call(this._list)){const i=e.decoratorType.call(this._list),s=e.decoratorSubType.call(this._list),r=this._createDecorator(i,s);this._decorators.push(r)}})},_createDecorator(t,e){const n=this._findDecorator(t,e);return new n(this._list)},_findDecorator(t,e){var n;const i=(n=xF[t])===null||n===void 0?void 0:n[e];if(!i)throw it.Error("E1012",t,e);return i},modifyItemElement(t){const e=m(t.itemElement),n={$itemElement:e};this._prependBeforeBags(e,n),this._appendAfterBags(e,n),this._applyDecorators("modifyElement",n)},afterItemsRendered(){this._applyDecorators("afterRender")},_prependBeforeBags(t,e){const n=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");t.prepend(n)},_appendAfterBags(t,e){const n=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");t.append(n)},_collectDecoratorsMarkup(t,e,n){const i=m("<div>");return N(this._decorators,function(){const s=m("<div>").addClass(n);this[t](T({$container:s},e)),s.children().length&&i.append(s)}),i.children()},_applyDecorators(t,e){N(this._decorators,function(){this[t](e)})},_handlerExists(t){if(!this._decorators)return!1;const e=this._decorators,{length:n}=e;for(let i=0;i<n;i++)if(e[i][t]!==B)return!0;return!1},_eventHandler(t,e,n){if(!this._decorators)return!1;let i=!1;const s=this._decorators,{length:r}=s;for(let o=0;o<r&&(i=s[o][t](e,n),!i);o++);return i},handleClick(t,e){return this._eventHandler("handleClick",t,e)},handleKeyboardEvents(t,e){return this._eventHandler("handleKeyboardEvents",t,e)},handleEnterPressing(t){return this._eventHandler("handleEnterPressing",t)},contextMenuHandlerExists(){return this._handlerExists("handleContextMenu")},handleContextMenu(t,e){return this._eventHandler("handleContextMenu",t,e)},getExcludedItemSelectors(){const t=[];return this._applyDecorators("getExcludedSelectors",t),t.join(",")}}),fR=function(t){return(t.group<<20)+t.item},ya=function(t){return{group:t>>20,item:1048575&t}},Gee=SL.inherit({_groupElements(){return this._collectionWidget._itemContainer().find(".dx-list-group")},_groupItemElements:t=>t.find(".dx-list-item"),getIndexByItemData(t){const e=this._collectionWidget.option("items");let n=!1;return t?(t.items&&t.items.length&&(t=t.items[0]),N(e,(i,s)=>{if(!s.items||(N(s.items,(r,o)=>o!==t?!0:(n={group:i,item:r},!1)),n))return!1}),n):!1},getItemDataByIndex(t){const e=this._collectionWidget.option("items");return ut(t)?this.itemsGetter()[t]:t&&e[t.group]&&e[t.group].items[t.item]||null},itemsGetter(){let t=[];const e=this._collectionWidget.option("items");for(let n=0;n<e.length;n++)e[n]&&e[n].items?t=t.concat(e[n].items):t.push(e[n]);return t},deleteItemAtIndex(t){const e=ya(t);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems(t){let e=[],n;for(n=0;n<t.length;n++)t[n]&&t[n].items?e=e.concat(t[n].items):e.push(t[n]);const i=[];for(n=0;n<e.length;n++)i.push(this._collectionWidget.keyOf(e[n]));return i},getIndexByKey(t,e){const n=e||this._collectionWidget.option("items");let i=-1;const s=this;return N(n,(r,o)=>{if(o.items&&(N(o.items,(a,l)=>{const c=s._collectionWidget.keyOf(l);if(s._equalKeys(c,t))return i={group:r,item:a},!1}),i!==-1))return!1}),i},_getGroups(t){const n=this._collectionWidget._dataController.group();return n?eg.queryByOptions(As(t),{group:n}).toArray():this._collectionWidget.option("items")},getItemsByKeys(t,e){const n=[],i=this._getGroups(e),s={},r=o=>{const a=this.getIndexByKey(o,i),l=a&&i[a.group];if(l)return{groupKey:l.key,item:l.items[a.item]}};return N(t,(o,a)=>{const l=r(a);if(!l)return;const{groupKey:c}=l,{item:u}=l;let d=s[c];d||(d={key:c,items:[]},s[c]=d,n.push(d)),d.items.push(u)}),n},moveItemAtIndexToIndex(t,e){const n=this._collectionWidget.option("items"),i=ya(t),s=ya(e),r=n[i.group].items,o=n[s.group].items,a=r[i.item];r.splice(i.item,1),o.splice(s.item,0,a)},_isItemIndex:t=>t&&ut(t.group)&&ut(t.item),_getNormalizedItemIndex(t){const e=m(t),n=e.closest(".dx-list-group");return n.length?fR({group:this._groupElements().index(n),item:this._groupItemElements(n).index(e)}):-1},_normalizeItemIndex:t=>fR(t),_denormalizeItemIndex:t=>ya(t),_getItemByNormalizedIndex(t){const e=ya(t),n=this._groupElements().eq(e.group);return this._groupItemElements(n).eq(e.item)},_itemsFromSameParent:(t,e)=>ya(t).group===ya(e).group}),PF=zS.inherit({_supportedKeys(){const t=this,e=this.callBase(),n=(i,s)=>{const r=this._editStrategy,o=this.option("focusedElement"),a=r.getNormalizedIndex(o);if(!(a===this._getLastItemIndex()&&this._dataController.isLoading()))if(i.shiftKey&&t.option("itemDragging.allowReordering")){const c=a+(s?-1:1),u=r.getItemElement(c);this.reorderItem(o,u),this.scrollToItem(o),i.preventDefault()}else this._editProvider.handleKeyboardEvents(a,s)||(s?e.upArrow(i):e.downArrow(i))};return T({},e,{del:i=>{t.option("allowItemDeleting")&&(i.preventDefault(),t.deleteItem(t.option("focusedElement")))},upArrow:i=>n(i,!0),downArrow:i=>n(i),enter:function(i){this._editProvider.handleEnterPressing(i)||e.enter.apply(this,arguments)},space:function(i){this._editProvider.handleEnterPressing(i)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();const t=this._editProvider.getExcludedItemSelectors();t.length&&(this._itemElementsCache=this._itemElementsCache.not(t))},_isItemStrictEquals(t,e){const n=t&&t.__dx_key__;return n&&!this.key()&&this._selection.isItemSelected(n)?!1:this.callBase(t,e)},_getDefaultOptions(){return T(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:q.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:t=>t.platform==="ios",options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return this.option("selectAllMode")==="page"},_initEditProvider(){this._editProvider=new Wee(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new Gee(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(t){const e=m(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,t)||(this._saveSelectionChangeEvent(t),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(t){const e=m(t.currentTarget);if(e.is(".dx-state-disabled, .dx-state-disabled *"))return;if(m_(t)&&this._editProvider.handleContextMenu(e,t)){t.handledByEditProvider=!0;return}this.callBase(...arguments)},_getItemContainer(t){if(this.option("grouped")){var e;const n=(e=this._editStrategy.getIndexByItemData(t))===null||e===void 0?void 0:e.group;return this._getGroupContainerByIndex(n)}return this.callBase(t)},_itemContextMenuHandler(t){const e=m(t.currentTarget);if(e.is(".dx-state-disabled, .dx-state-disabled *"))return;if(!t.handledByEditProvider&&this._editProvider.handleContextMenu(e,t)){t.preventDefault();return}this.callBase(...arguments)},_postprocessRenderItem(t){this.callBase(...arguments),this._editProvider.modifyItemElement(t)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(t){const e=this._editStrategy.getItemElement(t);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(t){switch(t.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(t);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(t)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(t){return this._itemElements().index(t)},getItemElementByFlatIndex(t){const e=this._itemElements();return t<0||t>=e.length?m():e.eq(t)},getItemByIndex(t){return this._editStrategy.getItemDataByIndex(t)},deleteItem(t){const e=this._editStrategy,n=e.getNormalizedIndex(t),i=this.option("focusedElement"),s=this.option("focusStateEnabled"),r=i?e.getNormalizedIndex(i):n,a=r===this._getLastItemIndex()||n<r?r-1:r;return this.callBase(t).done(function(){s&&this.focusListItem(a)})}}),z_=PF.inherit(dR).inherit({_addWidgetPrefix:t=>`dx-list-${t}`,_getCombinedFilter(){const t=this._dataController,e={filter:t.filter()};t.addSearchFilter(e);const{filter:n}=e;return n},_initDataSource(){const t=this.option("searchValue"),e=this.option("searchExpr"),n=this.option("searchMode");this.callBase();const i=this._dataController;t&&t.length&&i.searchValue(t),n.length&&i.searchOperation(dR.getOperationBySearchMode(n)),e&&i.searchExpr(e)}});re("dxList",z_);const mR=pe(),Uee=["startswith","contains","endwith","notcontains"],gR=X.real().platform!=="android",MF=OS.inherit({_supportedKeys(){const t=this.callBase();return T({},t,{tab(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);const n=m(this._list.option("focusedElement"));n.length&&this._setSelectedElement(n)}t.tab.apply(this,arguments)},space:B,home:B,end:B})},_allowSelectItemByTab(){return this.option("opened")&&this.option("applyValueMode")==="instantly"},_setSelectedElement(t){const e=this._valueGetter(this._list._getItemData(t));this._setValue(e)},_setValue(t){this.option("value",t)},_getDefaultOptions(){return T(this.callBase(),T(Dh._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:q.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:B,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems(){const{items:t}=this.option();t&&!t.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Qw("item")})},_isEditable(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget(){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange(t,e,n){return t>n?e:t<e?n:t},_items(){const t=this._getPlainItems(!this._list&&this._dataSource.items());return new As(t).filter("disabled","<>",!0).toArray()},_calcNextItem(t){const e=this._items(),n=this._fitIntoRange(this._getSelectedIndex()+t,0,e.length-1);return e[n]},_getSelectedIndex(){const t=this._items(),e=this.option("selectedItem");let n=-1;return N(t,(i,s)=>{if(this._isValueEquals(s,e))return n=i,!1}),n},_createPopup(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const t=this._popup.$content();b.off(t,"mouseup"),b.on(t,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer(){const t=this.option("dropDownOptions.container"),e=t&&m(t);if(e&&e.length&&!bt(e.get(0))){const n=[].slice.call(e.parents());n.unshift(e.get(0)),N(n,(i,s)=>{if(s===m("body").get(0))return!1;if(mR.getComputedStyle(s).overflowY==="hidden")return this._$customBoundaryContainer=m(s),!1})}},_popupWrapperClass:()=>"dx-dropdownlist-popup-wrapper",_renderInputValue(){const t=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(t,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,t))},_loadInputValue(t,e){return this._loadItem(t).always(e)},_getItemFromPlain(t,e){let n,i;return e&&typeof t!="object"&&(e.itemByValue||(e.itemByValue={},n=this._getPlainItems(),n.forEach(function(s){e.itemByValue[this._valueGetter(s)]=s},this)),i=e.itemByValue[t]),i||(n=this._getPlainItems(),i=Ci(n,s=>this._isValueEquals(this._valueGetter(s),t))[0]),i},_loadItem(t,e){const n=this._getItemFromPlain(t,e);return n!==void 0?j().resolve(n).promise():this._loadValue(t)},_getPlainItems(t){let e=[];t=t||this.option("items")||this._dataSource.items()||[];for(let n=0;n<t.length;n++)t[n]&&t[n].items?e=e.concat(t[n].items):e.push(t[n]);return e},_updateActiveDescendant(t){var e;const n=this.option("opened"),i=(e=this._list)===null||e===void 0?void 0:e.getFocusedItemId(),s=m(`#${i}`).length>0,r=n&&s&&i;this.setAria({activedescendant:r||null},t)},_setSelectedItem(t){const e=this._displayValue(t);this.option("selectedItem",rt(t,null)),this.option("displayValue",e)},_displayValue(t){return this._displayGetter(t)},_refreshSelected(){const t={};this._listItemElements().each((e,n)=>{const i=m(n),s=this._valueGetter(i.data("dxListItemData"));this._isSelectedValue(s,t)?this._list.selectItem(i):this._list.unselectItem(i)})},_popupShownHandler(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue(t){return this._isValueEquals(t,this.option("value"))},_validateSearchMode(){const t=this.option("searchMode"),e=t.toLowerCase();if(!Uee.includes(e))throw it.Error("E1019",t)},_clearSelectedItem(){this.option("selectedItem",null)},_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(()=>{this._isCustomValueAllowed()||this._clearSelectedItem()})},_isCustomValueAllowed(){return this.option("displayCustomValue")},clear(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):m()},_popupConfig(){return T(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent(){this.callBase(),this._renderList()},_getKeyboardListeners(){const t=this._canListHaveFocus();return this.callBase().concat([!t&&this._list])},_renderList(){this._listId=`dx-${new Et()._value}`;const t=m("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=t,this._list=this._createComponent(t,z_,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick(){const t=K("mousedown","dxDropDownList");b.off(this._$list,t),b.on(this._$list,t,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_getAriaHasPopup:()=>"listbox",_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:()=>X.real().deviceType==="desktop",_listConfig(){const t={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:this._isDesktopDevice()?this.option("hoverStateEnabled"):!1,focusStateEnabled:this._isDesktopDevice()?this.option("focusStateEnabled"):!1};return this._canListHaveFocus()||(t.tabIndex=null),t},_canListHaveFocus:()=>!1,_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:()=>({paginate:!1}),_getGroupedOption(){return this.option("grouped")},_dataSourceFromUrlLoadMode:()=>"raw",_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption(t,e){this._setWidgetOption("_list",arguments)},_listItemClickAction(t){this._listItemClickHandler(t),this._itemClickAction(t)},_listItemClickHandler:B,_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()},_canKeepDataSource(){const t=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!t&&!this._isLastMinSearchLengthExceeded},_searchValue(){return this._input().val()||""},_getSearchEvent(){return K("input",`${this.NAME}Search`)},_getCompositionStartEvent(){return K("compositionstart",`${this.NAME}CompositionStart`)},_getCompositionEndEvent(){return K("compositionend",`${this.NAME}CompositionEnd`)},_getSetFocusPolicyEvent(){return K("input",`${this.NAME}FocusPolicy`)},_renderEvents(){this.callBase(),b.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(b.on(this._input(),this._getSearchEvent(),t=>{this._searchHandler(t)}),gR&&(b.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),b.on(this._input(),this._getCompositionEndEvent(),t=>{this._isTextCompositionInProgress(void 0),this._searchHandler(t,this._searchValue())})))},_shouldRenderSearchEvent(){return this.option("searchEnabled")},_refreshEvents(){b.off(this._input(),this._getSearchEvent()),b.off(this._input(),this._getSetFocusPolicyEvent()),gR&&(b.off(this._input(),this._getCompositionStartEvent()),b.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress(t){if(arguments.length)this._isTextComposition=t;else return this._isTextComposition},_searchHandler(t,e){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}const n=this.option("searchTimeout");n?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},n)):this._searchDataSource(e)},_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(t)},_filterDataSource(t){this._clearSearchTimer();const e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(t),e.load().done(this._dataSourceFiltered.bind(this,t))},_clearFilter(){const t=this._dataController;t.searchValue()&&t.searchValue(null)},_dataSourceFiltered(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup(){return this._hasItemsToShow()},_refreshPopupVisibility(){if(this.option("readOnly")||!this._searchValue())return;const t=this._shouldOpenPopup();t&&!this._isFocused()||(this.option("opened",t),t&&(this._updatePopupWidth(),this._updateListDimensions()))},_dataSourceChangedHandler(t){this._dataController.pageIndex()===0?this.option().items=t:this.option().items=this.option().items.concat(t)},_hasItemsToShow(){const n=(this._dataController.items()||[]).length;return!!(this._needPassDataSourceToList()&&n)},_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged(){this.callBase(),this._updateListDimensions()},_needPopupRepaint(){const t=this._dataController,e=t.pageIndex(),n=M(this._pageIndex)&&e<=this._pageIndex||t.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,n},_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight(){const t=this.$element(),e=this._$customBoundaryContainer,n=t.offset().top-(e?e.offset().top:0),i=tt(mR),s=e?Math.min(tt(e),i):i,r=Math.max(n,s-n-tt(t));return Math.min(.5*s,r)},_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)},_setSubmitValue(){const t=this.option("value"),e=this._shouldUseDisplayValue(t)?this._displayGetter(t):t;this._getSubmitElement().val(e)},_shouldUseDisplayValue(t){return this.option("valueExpr")==="this"&&ue(t)},_optionChanged(t){switch(this._dataExpressionOptionChanged(t),t.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(t.name,t.value),this.callBase(t);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(t.name);break;case"displayValue":this.option("text",t.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":t.previousValue!==t.value&&this._selectionChangedAction({selectedItem:t.value});break;default:this.callBase(t)}}}).include(Dh,RF);re("dxDropDownList",MF);const WS=MF.inherit({_supportedKeys(){const t=this,e=this.callBase(),n=function(s){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(s.preventDefault(),this.clear()),this._savedTextRemoveEvent=s,this._preventSubstitution=!0},i=function(){t.option("searchEnabled")&&t._valueSubstituted()&&t._searchHandler()};return T({},e,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(s){if(e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},downArrow(s){if(e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},leftArrow(){var s;i(),(s=e.leftArrow)===null||s===void 0||s.apply(this,arguments)},rightArrow(){i(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home(){i(),e.home&&e.home.apply(this,arguments)},end(){i(),e.end&&e.end.apply(this,arguments)},escape(){const s=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),s??!0},enter(s){const r=this.option("opened"),o=this._input().val().trim(),a=o&&this._list&&!this._list.option("focusedElement");if(!o&&M(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(s),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return s.preventDefault(),a&&(r&&this._toggleOpenState(),this._valueChangeEventHandler(s)),r;if(e.enter&&e.enter.apply(this,arguments))return r}},space(s){const r=this.option("opened"),o=this.option("searchEnabled"),a=this.option("acceptCustomValue");if(!(!r||o||a))return s.preventDefault(),this._valueChangeEventHandler(s),!0},backspace:n,del:n})},_getDefaultOptions(){return T(this.callBase(),{placeholder:q.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(t){M(t.customItem)||(t.customItem=t.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return`${this.callBase()} dx-selectbox-popup-wrapper`},_setDeprecatedOptions(){this.callBase(),T(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){if(!this._searchValue()){this._focusListElement(null);return}const{items:e,selectedItem:n}=this.option(),i=this._list._itemElements(),s=(e==null?void 0:e.indexOf(n))??-1,r=s!==-1&&!this._isCustomItemSelected()?i.eq(s):null;this._focusListElement(r)},_renderFocusedElement(){if(!this._list)return;if(!this._searchValue()||this.option("acceptCustomValue")){this._focusListElement(null);return}const n=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(n)},_focusListElement(t){this._preventInputValueRender=!0,this._list.option("focusedElement",se(t)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),!(this._dataController.paginate()&&this._needPopupRepaint())&&this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),j().resolve()},_renderInputValue(){return this.callBase().always(()=>{this._renderInputValueAsync()})},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always(()=>{this._refreshSelected()})},_renderInputValueImpl(){return this._renderField(),j().resolve()},_setNextItem(t){const e=this._calcNextItem(t),n=this._valueGetter(e);this._setValue(n)},_setNextValue(t){(this._dataController.isLoaded()?j().resolve():this._dataController.load()).done(()=>{const n=this._getSelectedIndex(),i=this._dataController.pageSize(),s=this._dataController.isLastPage(),r=n===this._items().length-1;this._saveValueChangeEvent(t);const o=tn(t)==="downArrow"?1:-1;i&&!s&&r&&o>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,o))):this._setNextItem(o)})},_setSelectedItem(t){const e=!this._isCustomValueAllowed()&&t===void 0;this.callBase(e?null:t),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(t){return t=!M(t)&&this._isCustomValueAllowed()?this.option("value"):t,this.callBase(t)},_listConfig(){const t=T(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&T(t,{showSelectionControls:!0,selectByClick:!0}),t},_listFocusedItemChangeHandler(t){if(this._preventInputValueRender)return;const e=t.component,n=m(e.option("focusedElement")),i=e._getItemData(n);this._updateField(i)},_updateField(t){if(!(this._getTemplateByOption("fieldTemplate")&&this.option("fieldTemplate"))){const n=this._displayGetter(t);this.option("text",n),this._renderDisplayText(n);return}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):B},_selectionChangeHandler(t){N(t.addedItems||[],(e,n)=>{this._setValue(this._valueGetter(n))})},_getActualSearchValue(){return this._dataController.searchValue()},_isInlineAutocompleteEnabled(){return this.option("searchEnabled")&&!this.option("acceptCustomValue")&&this.option("searchMode")==="startswith"},_getAriaAutocomplete(){const{disabled:t,readOnly:e,searchEnabled:n}=this.option();return n&&!(e||t)?this._isInlineAutocompleteEnabled()?"both":"list":"none"},_toggleOpenState(t){if(!this.option("disabled")){if(t=arguments.length?t:!this.option("opened"),!t&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&t)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;const n=this._getActualSearchValue();n&&this._wasSearch(!0),this._filterDataSource(n||null)}else this._setListOption("items",[]);t&&this._scrollToSelectedItem(),this.callBase(t)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){const t=this.option("selectedItem");if(t===null)return!1;const e=this._displayGetter(t),n=e?String(e):"",i=this._searchValue();return n===i},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(t){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(()=>{const{acceptCustomValue:e,text:n,selectedItem:i}=this.option();if(e){!t&&!this._isValueChanging&&(this._updateField(i??this._createCustomItem(n)),this._clearFilter());return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always(s=>{const r=rt(s,i);this._setSelectedItem(r),this._updateField(r),this._clearFilter()})})},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(t){return this._preventNestedFocusEvent(t)||this._valueChangeEventIncludesBlur()},_focusOutHandler(t){this._isPreventedFocusOutEvent(t)||(this._isOverlayNestedTarget(t.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(t)),t.target=this._input().get(0),this.callBase(t)},_cancelSearchIfNeed(t){const{searchEnabled:e}=this.option(),n=this._isOverlayNestedTarget(t==null?void 0:t.relatedTarget);if(this._wasSearch()&&e&&!n){var s;const r=(s=this._popup)===null||s===void 0?void 0:s._hideAnimationProcessing;this._clearSearchTimer(),r?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(t){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=t},_isOverlayNestedTarget:t=>!!m(t).closest(".dx-selectbox-popup-wrapper").length,_clearTextValue(){const t=this.option("selectedItem"),e=this._displayGetter(t);t&&e!==""&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){const t=W.getActiveElement(this.element());return this.callBase()&&m(t).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){const t=this._list&&this.option("opened")&&m(this._list.option("focusedElement"));return t&&t.length?this._list._getItemData(t):this.option("selectedItem")},_isSelectedValue(t){return this._isValueEquals(t,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&this.option("selectionMode")!=="single")},_listItemClickHandler(t){const e=this._getCurrentValue();this._focusListElement(m(t.itemElement)),this._saveValueChangeEvent(t.event),this._completeSelection(this._valueGetter(t.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(t.itemData)&&this._updateField(t.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(t){this._setValue(t)},_loadItem(t,e){const n=this,i=j();return this.callBase(t,e).done(s=>{i.resolve(s)}).fail(s=>{if(s!=null&&s.shouldSkipCallback)return;const r=n.option("selectedItem");n.option("acceptCustomValue")&&t===n._valueGetter(r)?i.resolve(r):i.reject()}),i.promise()},_loadInputValue(t,e){return this._loadItemDeferred=this._loadItem(t).always(e),this._loadItemDeferred},_isCustomItemSelected(){const t=this.option("selectedItem"),e=this._searchValue(),n=this._displayGetter(t);return!n||e!==n.toString()},_valueChangeEventHandler(t){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(t))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(t){const e={text:t},n=this._customItemCreatingAction(e),i=rt(n,e.customItem);return M(n)&&Te.log("W0015","onCustomItemCreating","customItem"),i},_customItemAddedHandler(t){const e=this._searchValue(),n=this._createCustomItem(e);if(this._saveValueChangeEvent(t),n===void 0)throw this._renderValue(),Te.Error("E0121");fl(n)?vi(n).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(n)},_setCustomItem(t){this._disposed||(t=t||null,this.option("selectedItem",t),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(t)),this._renderDisplayText(this._displayGetter(t)),this._isValueChanging=!1)},_clearValueHandler(t){return this._preventFiltering=!0,this.callBase(t),this._searchCanceled(),!1},_wasSearch(t){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=t},_searchHandler(){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments)},_dataSourceFiltered(t){this.callBase(),t!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){const t=this._input().get(0),e=this._searchValue().length,n=t.selectionStart===0&&t.selectionEnd===e,i=t.selectionStart!==t.selectionEnd,s=e===t.selectionEnd;return this._wasSearch()&&i&&!n&&s&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()},_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}const t=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!t)return;const e=this._input(),n=e.val().length;if(n===0)return;const i=e.get(0),s=this._displayGetter(t).toString();i.value=s,this._caret({start:n,end:s.length})},_dispose(){this._renderInputValueAsync=B,delete this._loadItemDeferred,this.callBase()},_optionChanged(t){switch(t.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":this.callBase(t),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(t)}}});re("dxSelectBox",WS);const _R=function(t,e,n){Kee(t,e,n)},Kee=function(t,e,n){t.css("transform",`rotate(${e}deg) translate(0,${n}px)`)},VF=Fi.inherit({_getDefaultOptions(){return T(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue(){return this.option("value")||new Date},_init(){this.callBase(),this.$element().addClass("dx-timeview")},_render(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox(){const t=m("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(t,Go,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock(t,e,n){this._$hourArrow=m("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=m("<div>").addClass("dx-timeview-minutearrow");const i=m(n);i.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",i)},_updateClock(){const t=this._getValue(),e=t.getHours()/12*360+t.getMinutes()/60*30,n=t.getMinutes()/60*360;_R(this._$hourArrow,e,this.option("_arrowOffset")),_R(this._$minuteArrow,n,this.option("_arrowOffset"))},_getBoxItems(t){const e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:m("<div>").addClass("dx-timeview-time-separator").text(ee.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return t&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField(){const t=!this.option("use24HourFormat");return this._createHourBox(t),this._createMinuteBox(),t&&this._createFormat12Box(),this._createComponent(m("<div>").addClass("dx-timeview-field"),Go,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(t)}).$element()},_createHourBox(t){(this._hourBox=this._createComponent(m("<div>"),xg,T({min:-1,max:t?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:n=>this._keyboardHandler(n)},this._getNumberBoxConfig()))).setAria("label","hours")},_isPM(){return!this.option("use24HourFormat")&&this._format12.option("value")===1},_onHourBoxValueChanged(t){let{value:e,component:n}=t;const i=this._getValue(),s=new Date(i);let r=this._convertMaxHourToMin(e);n.option("value",r),this._isPM()&&(r+=12),s.setHours(r),Pe.normalizeTime(s),this.option("value",s)},_convertMaxHourToMin(t){const e=this.option("use24HourFormat")?24:12;return(e+t)%e},_createMinuteBox(){(this._minuteBox=this._createComponent(m("<div>"),xg,T({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{let{value:n,component:i}=e;const s=(60+n)%60;i.option("value",s);const r=new Date(this._getValue());r.setMinutes(s),Pe.normalizeTime(r),this.option("value",r)}},this._getNumberBoxConfig()))).setAria("label","minutes")},_createFormat12Box(){const t=ee.getPeriodNames();(this._format12=this._createComponent(m("<div>").addClass("dx-timeview-format12"),WS,{items:[{value:-1,text:t[0]},{value:1,text:t[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:n=>this._keyboardHandler(n),onValueChanged:n=>{let{value:i}=n;const s=this._getValue().getHours(),r=new Date(this._getValue()),o=(s+12*i)%24;r.setHours(o),this.option("value",r)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")})).setAria("label","type")},_refreshFormat12(){if(this.option("use24HourFormat"))return;const i=this._getValue().getHours()>=12?1:-1;this._silentEditorValueUpdate(this._format12,i)},_silentEditorValueUpdate(t,e){t&&(t._suppressValueChangeAction(),t.option("value",e),t._resumeValueChangeAction())},_getNumberBoxConfig(){return{showSpinButtons:!0,displayValueFormatter:t=>(t<10?"0":"")+t,stylingMode:this.option("stylingMode")}},_normalizeHours(t){return this.option("use24HourFormat")?t:t%12||12},_updateField(){const t=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,t),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged(t){t&&this._updateTime()},_optionChanged(t){switch(t.name){case"value":this._updateTime(),this.callBase(t);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(t)}}});re("dxTimeView",VF);const jee=pe(),yR="dx-datebox-datetime-time-side",qee=hF.inherit({NAME:"CalendarWithTime",getDefaultOptions(){return T(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter(){return V.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:t=>t||"shortdateshorttime",_is24HourFormat(){return ee.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue(){const t=this.callBase();return this._updateDateTime(t)},_renderWidget(){this.callBase(),this._timeView=this.dateBox._createComponent(m("<div>"),VF,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState(){this.callBase();const t=this._getPopup();t&&t.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(()=>{this._getPopup()&&this._getPopup().repaint()},0)},isAdaptivityChanged(){const t=this._isShrinkView(),e=this._currentAdaptiveMode;return t!==e?(this._currentAdaptiveMode=t,e!==void 0):this.callBase()},_updateValue(t){let e=this.dateBoxValue();!e&&!t&&(e=new Date,Pe.normalizeTime(e)),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:()=>me(jee)<=573,_isShrinkView(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems(){const t=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||t.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),t},renderPopupContent(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();const t=this._getPopup().$content();this._box=this.dateBox._createComponent(m("<div>").appendTo(t),Go,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:(function(e,n,i){const s=m("<div>");switch(e.name){case"calendar":s.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(yR),s.append(this._timeView.$element()));break;case"time":s.append(this._timeView.$element()),m(i).addClass(yR)}return s}).bind(this)})},popupConfig(t){const e=this.callBase(t);return T(e,{width:"auto"})},_preventFocusOnPopup(t){m(t.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime(t){const e=this._timeView.option("value");return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},getValue(){let t=this._widget.option("value")??this._widget.getContouredDate();return t=t?new Date(t):new Date,this._updateDateTime(t)},dispose(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});class Yee{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??k0}get isHorizontal(){return this.direction===Aee||this.direction===qv}get isVertical(){return this.direction===k0||this.direction===qv}get isBoth(){return this.direction===qv}}function Zee(t,e){if(Ce(t)){const s=rt(t.left,t.x),r=rt(t.top,t.y);return{left:M(s)?s:void 0,top:M(r)?r:void 0}}const{isHorizontal:n,isVertical:i}=new Yee(e);return{left:n&&M(t)?t:void 0,top:i&&M(t)?t:void 0}}class BF extends Qs{_getDefaultOptions(){return T(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){b.on(m(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(!this.option("showOnClick"))return;const e=K(_n,this.NAME),n=this._createActionByOption("onClick");b.off(m(this.container()),e),b.on(m(this.container()),e,i=>{n({event:i})})}_renderItems(){const e=this.option("items")||[];let n=m();m(this.content()).empty(),e.forEach(i=>{n=n.add(m("<div>").addClass("dx-dateview-item").append(i))}),m(this.content()).append(n),this._$items=n,this.update()}_renderSelectedItemFrame(){m("<div>").addClass("dx-dateview-item-selected-frame").append(m("<div>").addClass("dx-dateview-item-selected-border")).appendTo(m(this.container()))}_renderSelectedValue(e){const n=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(n)}),this._renderActiveStateItem()}_fitIndex(e){const i=(this.option("items")||[]).length;return e>=i?i-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){const e=this._getItemSelector(),n=K(_n,this.NAME);b.off(this.$element(),n,e),b.on(this.$element(),n,e,this._itemClickHandler.bind(this))}_getItemSelector(){return".dx-dateview-item"}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){const e=this.option("selectedIndex");N(this._$items,function(n){m(this).toggleClass("dx-dateview-item-selected",e===n)})}_shouldScrollToNeighborItem(){return X.real().deviceType==="desktop"&&this._isWheelScrolled}_moveTo(e){const{top:n,left:i}=Zee(e),s=this.scrollOffset(),r={x:s.left-i,y:s.top-n};if(this._isVisible()&&(r.x||r.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){const o=this;Tt.stop(m(this.content())),Tt.animate(m(this.content()),{duration:200,type:"slide",to:{top:Math.floor(r.y)},complete(){Yh(m(o.content())),o.handleMove({delta:r})}}),delete this._animation}else this.handleMove({delta:r})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){const n=this.option("items").length;return Math.max(Math.min(e,n-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){const n=this.scrollOffset().top,i=e*this._itemHeight(),s=n-i;if(this._isInNullNeighborhood(s))return e;const r=s>0?1:-1;return this._fitSelectedIndexInRange(e+r)}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;const n=this.scrollOffset().top/this._itemHeight();return Math.round(n)}_endActionHandler(){const e=this.option("selectedIndex"),n=this._getNewSelectedIndex(e);n===e?this._renderSelectedValue(n):this.option("selectedIndex",n),this._isWheelScrolled=!1}_itemHeight(){const e=this._$items.first();return Re(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return m(this.container()).is(":visible")}_fireSelectedIndexChanged(e,n){this._selectedIndexChanged({value:e,previousValue:n,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){const e=this.option("selectedIndex"),n=this._fitIndex(e);n===e?this._renderActiveStateItem():this.option("selectedIndex",n)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}re("dxDateViewRoller",BF);const vR={date:"date",datetime:"datetime",time:"time"},ui={year:"year",month:"month",day:"day",hours:"hours"},LF=Fi.inherit({_valueOption(){const t=this.option("value"),e=new Date(t);return!t||isNaN(e)?this._getDefaultDate():e},_getDefaultDate(){const t=new Date;return this.option("type")===vR.date?new Date(t.getFullYear(),t.getMonth(),t.getDate()):t},_getDefaultOptions(){return T(this.callBase(),{minDate:Pe.MIN_DATEVIEW_DEFAULT_DATE,maxDate:Pe.MAX_DATEVIEW_DEFAULT_DATE,type:vR.date,value:new Date,applyCompactClass:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:t=>t.deviceType!=="desktop",options:{applyCompactClass:!0}}])},_render(){this.callBase(),this.$element().addClass("dx-dateview"),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses(t,e){this.$element().addClass(`dx-dateview-${t}`),e&&this.$element().removeClass(`dx-dateview-${e}`)},_toggleCompactClass(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper(){return this._$wrapper},_renderContentImpl(){this._$wrapper=m("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers(){this._$rollersContainer||(this._$rollersContainer=m("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};const t=this;N(t._rollerConfigs,e=>{const n=m("<div>").appendTo(t._$rollersContainer).addClass(`dx-dateviewroller-${t._rollerConfigs[e].type}`);t._rollers[t._rollerConfigs[e].type]=t._createComponent(n,BF,{items:t._rollerConfigs[e].displayItems,selectedIndex:t._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart(i){const s=i.component;s._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],s.option("selectedIndex"))},onEnd(i){i.component._toggleActive(!1)},onClick(i){const s=i.component;s._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],s.option("selectedIndex")),t._setRollerState(t._rollerConfigs[e],s.option("selectedIndex")),s._toggleActive(!1)},onSelectedIndexChanged(i){const s=i.component;t._setRollerState(t._rollerConfigs[e],s.option("selectedIndex"))}})}),t._$rollersContainer.appendTo(t._wrapper())},_createRollerConfigs(t){const e=this;t=t||e.option("type"),e._rollerConfigs={},ee.getFormatParts(Pe.FORMATS_MAP[t]).forEach(n=>{e._createRollerConfig(n)})},_createRollerConfig(t){const e=Pe.DATE_COMPONENTS_INFO[t],n=this._calculateRollerConfigValueRange(t),{startValue:i}=n,{endValue:s}=n,{formatter:r}=e,o=this._getCurrentDate(),a={type:t,setValue:e.setter,valueItems:[],displayItems:[],getIndex:l=>l[e.getter]()-i};for(let l=i;l<=s;l++)a.valueItems.push(l),a.displayItems.push(r(l,o));a.selectedIndex=a.getIndex(o),this._rollerConfigs[t]=a},_setActiveRoller(t){const e=t&&this._rollers[t.type];N(this._rollers,function(){this.toggleActiveState(this===e)})},_updateRollersPosition(){const t=this;N(this._rollers,function(e){const n=t._rollerConfigs[e].getIndex(t._getCurrentDate());this.option("selectedIndex",n)})},_setRollerState(t,e){if(e!==t.selectedIndex){const n=t.valueItems[e],{setValue:i}=t;let s=new Date(this._getCurrentDate()),r=s.getDate();const o=this.option("minDate"),a=this.option("maxDate");t.type===ui.month?r=Math.min(r,Pe.getMaxMonthDay(s.getFullYear(),n)):t.type===ui.year&&(r=Math.min(r,Pe.getMaxMonthDay(n,s.getMonth()))),s.setDate(r),s[i](n);const l=V.normalizeDate(s,o,a);s=Pe.mergeDates(l,s,"time"),s=V.normalizeDate(s,o,a),this.option("value",s),t.selectedIndex=e}t.type===ui.year&&this._refreshRollers(),t.type===ui.month&&(this._refreshRoller(ui.day),this._refreshRoller(ui.hours))},_refreshRoller(t){const e=this._rollers[t];if(e){this._createRollerConfig(t);const n=this._rollerConfigs[t];(t===ui.day||n.displayItems.toString()!==e.option("items").toString())&&e.option({items:n.displayItems,selectedIndex:n.selectedIndex})}},_getCurrentDate(){const t=this._valueOption(),e=this.option("minDate"),n=this.option("maxDate");return V.normalizeDate(t,e,n)},_calculateRollerConfigValueRange(t){const e=this._getCurrentDate(),n=this.option("minDate"),i=this.option("maxDate"),s=V.sameYear(e,n),r=s&&e.getMonth()===n.getMonth(),o=V.sameYear(e,i),a=o&&e.getMonth()===i.getMonth(),l=r&&e.getDate()===n.getDate(),c=a&&e.getDate()===i.getDate(),u=Pe.DATE_COMPONENTS_INFO[t];let{startValue:d}=u,{endValue:p}=u;return t===ui.year&&(d=n.getFullYear(),p=i.getFullYear()),t===ui.month&&(s&&(d=n.getMonth()),o&&(p=i.getMonth())),t===ui.day&&(p=Pe.getMaxMonthDay(e.getFullYear(),e.getMonth()),s&&r&&(d=n.getDate()),o&&a&&(p=i.getDate())),t===ui.hours&&(d=l?n.getHours():d,p=c?i.getHours():p),{startValue:d,endValue:p}},_refreshRollers(){this._refreshRoller(ui.month),this._refreshRoller(ui.day),this._refreshRoller(ui.hours)},_optionChanged(t){switch(t.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(t.value,t.previousValue);break;case"visible":this.callBase(t),t.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(t)}},_clean(){this.callBase(),delete this._$rollersContainer}});re("dxDateView",LF);const Qee=pe(),Xee=H_.inherit({NAME:"DateView",getDefaultOptions(){return T(this.callBase(),{openOnFieldClick:!0,applyButtonText:q.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat(t){return t||Pe.FORMATS_MAP[this.dateBox.option("type")]},popupConfig(t){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:t.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device(e){const{platform:n}=e;return n==="generic"||n==="ios"},options:{width:"auto",height:"auto"}},{device(e){const{platform:n}=e,{phone:i}=e;return n==="generic"&&i},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:Qee}}}]}},_renderWidget(){if(f_(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly")){this._widget&&(this._widget.$element().remove(),this._widget=null);return}const t=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{const e=m("<div>").appendTo(t.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())},_getWidgetName:()=>LF,renderOpenedState(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*Pe.ONE_YEAR),onDisposing:(function(){this._widget=null}).bind(this)}}}),Jee=pe(),ete={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},tte=H_.inherit({NAME:"List",supportedKeys:()=>({space:B,home:B,end:B}),getDefaultOptions(){return T(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:t=>t||"shorttime",popupConfig:t=>t,getValue(){const t=this._widget.option("selectedIndex");if(t===-1)return this.dateBox.option("value");const e=this._widgetItems[t];return this._getDateByItemData(e)},useCurrentDateByDefault:()=>!0,getDefaultDate:()=>new Date(null),popupShowingHandler(){this.dateBox._dimensionChanged()},_renderWidget(){this.callBase(),this._refreshItems()},_getWidgetName:()=>z_,_getWidgetOptions(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant(t){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",t.actionValue)},_refreshItems(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue(){const t=this.dateBoxValue(),e=this._getDateIndex(t);e===-1?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex(t){let e=-1;for(let n=0,i=this._widgetItems.length;n<i;n++)if(this._areDatesEqual(t,this._widgetItems[n])){e=n;break}return e},_areDatesEqual:(t,e)=>er(t)&&er(e)&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes(),_getTimeListItems(){let t=this.dateBox.dateOption("min")||this._getBoundaryDate("min");const e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),n=this.dateBox.dateOption("value")||null;let i=e-t;const s=t.getMinutes()%this.dateBox.option("interval");return i<0?[]:(i>Pe.ONE_DAY&&(i=Pe.ONE_DAY),n-t<Pe.ONE_DAY?this._getRangeItems(t,new Date(t),i):(t=this._getBoundaryDate("min"),t.setMinutes(s),n&&Math.abs(n-e)<Pe.ONE_DAY&&(i=(60*e.getHours()+Math.abs(e.getMinutes()-s))*Pe.ONE_MINUTE),this._getRangeItems(t,new Date(t),i)))},_getRangeItems(t,e,n){const i=[],s=this.dateBox.option("interval");for(;e-t<=n;)i.push(new Date(e)),e.setMinutes(e.getMinutes()+s);return i},_getBoundaryDate(t){const e=ete[t],n=new Date(rt(this.dateBox.dateOption("value"),0));return new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate(t){const e=this.dateBox.option("displayFormat");return ee.format(t,this.getDisplayFormat(e))},_listItemClickHandler(t){if(this.dateBox.option("applyValueMode")==="useButtons")return;const e=this._getDateByItemData(t.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,t.event)},_getDateByItemData(t){let e=this.dateBox.option("value");const n=t.getHours(),i=t.getMinutes(),s=t.getSeconds(),r=t.getFullYear(),o=t.getMonth(),a=t.getDate();return e?(this.dateBox.option("dateSerializationFormat")?e=je.deserializeDate(e):e=new Date(e),e.setHours(n),e.setMinutes(i),e.setSeconds(s),e.setFullYear(r),e.setMonth(o),e.setDate(a)):e=new Date(r,o,a,n,i,0,0),e},getKeyboardListener(){return this._widget},_updatePopupHeight(){const t=RS(this.dateBox.option("dropDownOptions.height"));if(t===void 0||t==="auto"){this.dateBox._setPopupOption("height","auto");const e=tt(this._widget.$element()),n=.45*Re(Jee);this.dateBox._setPopupOption("height",Math.min(e,n))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText(t,e){let n=this.callBase(t,e);return n&&(n=Pe.mergeDates(n,new Date(null),"date")),n}}),nte=H_.inherit({NAME:"Native",popupConfig:t=>T({},t,{width:"auto"}),getParsedText(t){return t?this.dateBox.option("type")==="datetime"?new Date(t.replace(/-/g,"/").replace("T"," ").split(".")[0]):Pe.fromStandardDateFormat(t):null},renderPopupContent:B,_getWidgetName:B,_getWidgetOptions:B,_getDateBoxType(){let t=this.dateBox.option("type");return Pe.SUPPORTED_FORMATS.includes(t)?t==="datetime"&&!f_(t)&&(t="datetime-local"):t="date",t},customizeButtons(){const t=this.dateBox.getButton("dropDown");X.real().android&&t&&t.on("click",()=>{this.dateBox._input().get(0).click()})},getDefaultOptions(){return{mode:this._getDateBoxType()}},getDisplayFormat(t){const e=this._getDateBoxType();return t||Pe.FORMATS_MAP[e]},renderInputMinMax(t){t.attr({min:je.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:je.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}}),Qu=pe(),ite="dx-show-invalid-badge",ste="dx-clear-button-area",Ui={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Ki={date:"date",datetime:"datetime",time:"time"},Xu={calendar:"Calendar",dateView:"DateView",native:"Native",calendarWithTime:"CalendarWithTime",list:"List"},rte={Calendar:hF,DateView:Xee,Native:nte,CalendarWithTime:qee,List:tte},ote=OS.inherit({_supportedKeys(){return T(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions(){return T(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:Ui.calendar,invalidDateMessage:q.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:q.format("validation-range"),applyButtonText:q.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device(){const t=X.real(),{platform:e}=t;return e==="ios"||e==="android"},options:{pickerType:Ui.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions(t){this._userOptions=T({},t),this.callBase(t),this._updatePickerOptions()},_updatePickerOptions(){let t=this.option("pickerType");const e=this.option("type");t===Ui.list&&(e===Ki.datetime||e===Ki.date)&&(t=Ui.calendar),e===Ki.time&&t===Ui.calendar&&(t=Ui.list),this._pickerType=t,this._setShowDropDownButtonOption()},_setShowDropDownButtonOption(){const{platform:t}=X.real(),e=t==="android"&&is.mozilla,n=this._isNativeType();let i=t!=="generic"||!n;n&&e&&(i=!1),this.option({showDropDownButton:i})},_init(){this._initStrategy(),this.option(T({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:t=>t.charAt(0).toLowerCase()+t.substr(1),_initStrategy(){const t=this._getStrategyName(this._getFormatType()),e=rte[t];this._strategy&&this._strategy.NAME===t||(this._strategy=new e(this))},_getFormatType(){const t=this.option("type"),e=/h|m|s/g.test(t),n=/d|M|Y/g.test(t);let i="";return n&&(i+=Ki.date),e&&(i+=Ki.time),i},_getStrategyName(t){const e=this._pickerType;return e===Ui.rollers?Xu.dateView:e===Ui.native?Xu.native:t===Ki.date?Xu.calendar:t===Ki.datetime?Xu.calendarWithTime:Xu.list},_initMarkup(){this.$element().addClass("dx-datebox"),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render(){this.callBase(),this._formatValidationIcon()},_renderDimensions(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight(){if(this._popup){var t,e;(t=(e=this._strategy)._updatePopupHeight)===null||t===void 0||t.call(e)}},_refreshFormatClass(){const t=this.$element();N(Ki,(e,n)=>{t.removeClass(`dx-datebox-${n}`)}),t.addClass(`dx-datebox-${this.option("type")}`)},_refreshPickerTypeClass(){const t=this.$element();N(Ui,(e,n)=>{t.removeClass(`dx-datebox-${n}`)}),t.addClass(`dx-datebox-${this._pickerType}`)},_formatValidationIcon(){if(!ae())return;const t=this._input().get(0),e=this.option("rtlEnabled"),n=this._getClearButtonWidth(),i=this._getLongestElementDimensions(),s=parseFloat(Qu.getComputedStyle(t).width)-n,r=i.width>s,{style:o}=t;this.$element().toggleClass(ite,!r&&this.option("_showValidationIcon")),r?(this._storedPadding===void 0&&(this._storedPadding=e?i.leftPadding:i.rightPadding),e?o.paddingLeft=0:o.paddingRight=0):e?o.paddingLeft=`${this._storedPadding}px`:o.paddingRight=`${this._storedPadding}px`},_getClearButtonWidth(){let t=0;if(this._isClearButtonVisible()&&this._input().val()===""){const e=this.$element().find(`.${ste}`).get(0);t=parseFloat(Qu.getComputedStyle(e).width)}return t},_getLongestElementDimensions(){const t=this._strategy.getDisplayFormat(this.option("displayFormat")),e=ee.format(Pe.getLongestDate(t,ee.getMonthNames(),ee.getDayNames()),t),n=this._input(),i=n.get(0),s=OV(n,e),o=this._storedPadding!==void 0?this._storedPadding:0;s.appendTo(this.$element());const a=parseFloat(Qu.getComputedStyle(s.get(0)).width),l=parseFloat(Qu.getComputedStyle(i).paddingRight),c=parseFloat(Qu.getComputedStyle(i).paddingLeft),u=a+c+l+o;return s.remove(),{width:u,leftPadding:c,rightPadding:l}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup(){this.callBase(),this._popup.$wrapper().addClass("dx-datebox-wrapper"),this._renderPopupWrapper()},_getPopupToolbarItems(){var t,e;const n=this.callBase();return((t=(e=this._strategy)._getPopupToolbarItems)===null||t===void 0?void 0:t.call(e,n))??n},_popupConfig(){const t=this.callBase();return T(this._strategy.popupConfig(t),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper(){if(!this._popup)return;const t=this.$element(),e=T({},Ki,Ui);N(e,(n,i)=>{t.removeClass(`dx-datebox-wrapper-${i}`)}),this._popup.$wrapper().addClass(`dx-datebox-wrapper-${this.option("type")}`).addClass(`dx-datebox-wrapper-${this._pickerType}`).addClass("dx-dropdowneditor-overlay")},_renderPopupContent(){this.callBase(),this._strategy.renderPopupContent()},_popupShowingHandler(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged(t){t&&this._formatValidationIcon()},_clearValueHandler(t){this.option("text",""),this.callBase(t)},_readOnlyPropValue(){if(this._pickerType===Ui.rollers)return!0;const{platform:t}=X.real();return this._isNativeType()&&(t==="ios"||t==="android")?this.option("readOnly"):this.callBase()},_isClearButtonVisible(){return this.callBase()&&!this._isNativeType()},_renderValue(){const t=this.dateOption("value");return this.option("text",this._getDisplayedText(t)),this._strategy.renderValue(),this.callBase()},_setSubmitValue(){const t=this.dateOption("value"),e=this.option("dateSerializationFormat"),n=Pe.SUBMIT_FORMATS_MAP[this.option("type")],i=e?je.serializeDate(t,e):Pe.toStandardDateFormat(t,n);this._getSubmitElement().val(i)},_getDisplayedText(t){const e=this.option("mode");let n;if(e==="text"){const i=this._strategy.getDisplayFormat(this.option("displayFormat"));n=ee.format(t,i)}else{const i=this._getFormatByMode(e);i?n=ee.format(t,i):n=Pe.toStandardDateFormat(t,e)}return n},_getFormatByMode:t=>f_(t)?null:Pe.FORMATS_MAP[t],_valueChangeEventHandler(t){const{text:e,type:n,validationError:i}=this.option(),s=this.dateOption("value");if(e===this._getDisplayedText(s)){this._recallInternalValidation(s,i);return}const r=this._getParsedDate(e),o=s??this._getDateByDefault(),a=Pe.mergeDates(o,r,n),l=r&&n==="time"?a:r;if(this._applyInternalValidation(l).isValid){const c=this._getDisplayedText(a);o&&a&&o.getTime()===a.getTime()&&c!==e?this._renderValue():this.dateValue(a,t)}},_recallInternalValidation(t,e){(!e||e.editorSpecific)&&(this._applyInternalValidation(t),this._applyCustomValidation(t))},_getDateByDefault(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate(t){const e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(t,e)??void 0},_applyInternalValidation(t){const n=!!this.option("text")&&t!==null,i=!!t&&er(t)&&!isNaN(t.getTime()),s=i&&V.dateInRange(t,this.dateOption("min"),this.dateOption("max"),this.option("type")),r=!n&&!t||s;let o="";return i?s||(o=this.option("dateOutOfRangeMessage")):o=this.option("invalidDateMessage"),this._updateInternalValidationState(r,o),{isValid:r,isDate:i}},_updateInternalValidationState(t,e){this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:e}})},_applyCustomValidation(t){this.validationRequest.fire({editor:this,value:this._serializeDate(t)})},_isValueChanged(t){const e=this.dateOption("value"),n=e&&e.getTime(),i=t&&t.getTime();return n!==i},_isTextChanged(t){const e=this.option("text"),n=t&&this._getDisplayedText(t)||"";return e!==n},_renderProps(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle(){const t=this.option("placeholder");if(t)return t;const e=this.option("type");return e===Ki.time?q.format("dxDateBox-simulatedDataPickerTitleTime"):e===Ki.date||e===Ki.datetime?q.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler(t){const e=this._strategy.getValue();this.dateValue(e,t.event),this.callBase()},_dispose(){var t;this.callBase(),(t=this._strategy)===null||t===void 0||t.dispose()},_isNativeType(){return this._pickerType===Ui.native},_updatePopupTitle(){var t;(t=this._popup)===null||t===void 0||t.option("title",this._getPopupTitle())},_optionChanged(t){switch(t.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:t.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:t.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":{const e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break}case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(t.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat(){const t=this.option("value");if(this.option("dateSerializationFormat")&&Me().forceIsoDateParsing)return this.option("dateSerializationFormat");if(ut(t))return"number";if(ve(t))return je.getDateSerializationFormat(t)},_updateValue(t){this.callBase(),this._applyInternalValidation(t??this.dateOption("value"))},dateValue(t,e){const n=this._isValueChanged(t);return n&&e&&this._saveValueChangeEvent(e),n||(this._isTextChanged(t)?this._updateValue(t):this.option("text")===""&&this._applyCustomValidation(t)),this.dateOption("value",t)},dateOption(t,e){if(arguments.length===1)return je.deserializeDate(this.option(t));this.option(t,this._serializeDate(e))},_serializeDate(t){const e=this._getSerializationFormat();return je.serializeDate(t,e)},_clearValue(){const t=this.option("value");this.callBase(),t===null&&this._applyCustomValidation(null)},clear(){const t=this.option("value");this.callBase(),t===null&&this._applyInternalValidation(null)}}),CR=t=>t.getMonth()+1,DR=(t,e)=>{const n=t.getDate(),i=wh("M",t),s=pn(parseInt(e),i.min,i.max);t.setMonth(s-1,1);const{min:r,max:o}=wh("dM",t),a=pn(n,r,o);t.setDate(a)},ate={a:t=>t.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:CR,L:CR,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds",x:"getTimezoneOffset"},lte=T({},G3(),{a:(t,e)=>{const n=t.getHours();n>=12!==!!parseInt(e)&&t.setHours((n+12)%24)},d:(t,e)=>{const n=wh("dM",t).max;e>n&&t.setMonth(t.getMonth()+1),t.setDate(e)},h:(t,e)=>{const n=t.getHours()>=12;t.setHours(+e%12+(n?12:0))},M:DR,L:DR,E:(t,e)=>{e<0||t.setDate(t.getDate()-t.getDay()+parseInt(e))},y:(t,e)=>{const n=t.getFullYear(),i=String(e).length,s=String(wh("y",t).max).length,r=parseInt(String(n).substr(0,s-i)+e);t.setFullYear(r)},x:t=>t}),cte=t=>ate[t]||(()=>t),ute=(t,e)=>{const n=e.regexp.exec(t);let i=0,s=0;const r=[];for(let o=1;o<n.length;o++){i=s,s=i+n[o].length;const a=e.patterns[o-1].replace(/^'|'$/g,""),l=cte(a[0]);r.push({index:o-1,isStub:a===n[o],caret:{start:i,end:s},pattern:a,text:n[o],limits:function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return wh(a[0],...u)},setter:lte[a[0]]||B,getter:l})}return r},wh=(t,e,n)=>{const i={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1},x:{min:0,max:0}};return i[n||t]||i.getAmPm},dte=(t,e)=>{for(let n=0;n<t.length;n++){const i=t[n].caret.end>=e;if(!t[n].isStub&&i)return n}return null},$F=ote.inherit({_supportedKeys(t){const e=this.callBase(t),n=s=>{const r=e[tn(s)];return r&&r.apply(this,[s])},i=(s,r)=>this._shouldUseOriginalHandler(s)?n.apply(this,[s]):r.apply(this,[s]);return T({},e,{del:s=>i(s,r=>{this._revertPart(1),this._isAllSelected()||r.preventDefault()}),backspace:s=>i(s,r=>{this._revertPart(-1),this._isAllSelected()||r.preventDefault()}),home:s=>i(s,r=>{this._selectFirstPart(),r.preventDefault()}),end:s=>i(s,r=>{this._selectLastPart(),r.preventDefault()}),escape:s=>i(s,r=>{this._revertChanges(r)}),enter:s=>i(s,()=>{this._enterHandler()}),leftArrow:s=>i(s,r=>{this._selectNextPart(-1),r.preventDefault()}),rightArrow:s=>i(s,r=>{this._selectNextPart(1),r.preventDefault()}),upArrow:s=>i(s,r=>{this._upDownArrowHandler(1),r.preventDefault()}),downArrow:s=>i(s,r=>{this._upDownArrowHandler(-1),r.preventDefault()})})},_shouldUseOriginalHandler(t){const e=this.option("opened")&&t&&!["backspace","del"].includes(tn(t));return!this._useMaskBehavior()||e||t&&t.altKey},_upDownArrowHandler(t){this._setNewDateIfEmpty();const e=this._getActivePartValue(this._initialMaskValue),i=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._changePartValue(i+t,!0)},_changePartValue(t,e){const n=this._getActivePartProp("pattern");/^a{1,5}$/.test(n)?this._toggleAmPm():this._partIncrease(t,e)},_toggleAmPm(){const t=this._getActivePartProp("text"),n=1^gc.getPeriodNames().indexOf(t);this._setActivePartValue(n)},_getDefaultOptions(){return T(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(t){let{originalEvent:e,alt:n}=t;const i=e.data||e.key;return typeof i=="string"&&i.length===1&&!n&&!bn(e)},_isSingleDigitKey(t){var e;const n=(e=t.originalEvent)===null||e===void 0?void 0:e.data;return(n==null?void 0:n.length)===1&&parseInt(n,10)},_useBeforeInputEvent:()=>X.real().android,_keyInputHandler(t,e){const n=this._input().val();this._processInputKey(e),t.preventDefault(),n!==this._input().val()&&b.trigger(this._input(),"input")},_keyboardHandler(t){let{key:e}=t.originalEvent;const n=this.callBase(t);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(is.chrome&&t.key==="Process"&&t.code.indexOf("Digit")===0?(e=t.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(t)&&this._keyInputHandler(t.originalEvent,e)),n},_maskBeforeInputHandler(t){this._maskInputHandler=null;const{inputType:e}=t.originalEvent;e==="insertCompositionText"&&(this._maskInputHandler=()=>{this._renderSelectedPart()});const n=e==="deleteContentBackward";if(n||e==="deleteContentForward"){const r=n?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(r)}}if(!this._useMaskBehavior()||!this._isSingleCharKey(t))return;const s=t.originalEvent.data;return this._keyInputHandler(t,s),!0},_keyPressHandler(t){const{originalEvent:e}=t;(e==null?void 0:e.inputType)==="insertCompositionText"&&this._isSingleDigitKey(t)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(t),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(t){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(t))?this._searchString(t):this._searchNumber(t)},_isAllSelected(){const t=this._caret();return t.end-t.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;const t=this._strategy.getDisplayFormat(this.option("displayFormat"));return ve(t)&&!ee._getPatternByFormat(t)?this._formatPattern=t:this._formatPattern=SB(n=>ee.format(n,t)),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){const t=this.option("type")==="time"?new Date(null):new Date;this._maskValue=t,this._initialMaskValue=t,this._renderDateParts()}},_partLimitsReached(t){const e=String(t).length,n=this._getActivePartProp("pattern").length,s=n===1?e:Math.min(n,e),r=this._searchValue.length===s,o=parseInt(`${this._searchValue}0`)>t;return r||o},_searchNumber(t){const{max:e}=this._getActivePartLimits(),n=String(e).length;this._searchValue=(this._searchValue+t).substr(-n),isNaN(this._searchValue)&&(this._searchValue=t),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(t){if(!isNaN(parseInt(this._getActivePartProp("text"))))return;const e=this._getActivePartProp("limits")(this._maskValue),n=this._searchValue+t.toLowerCase(),i=e.max-e.min;for(let s=0;s<=i;s++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(s+1),this._getActivePartProp("text").toLowerCase().indexOf(n)===0){this._searchValue=n;return}this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(t))},_clearSearchValue(){this._searchValue=""},_revertPart(t){if(!this._isAllSelected()){const e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(t)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&this.option("mode")==="text"},_prepareRegExpInfo(){this._regExpInfo=bB(this._getFormatPattern(),ee);const{regexp:t}=this._regExpInfo,{source:e}=t,{flags:n}=t,i=new RegExp(/(\{[0-9]+,?[0-9]*\})/),s=e.split(i).map(r=>i.test(r)?r:Ge.convertDigits(r,!1)).join("");this._regExpInfo.regexp=new RegExp(s,n)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(!this._useMaskBehavior())return;const t=this.option("text")||this._getDisplayedText(this._maskValue);t&&(this._dateParts=ute(t,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())},_detachMaskEvents(){b.off(this._input(),".dateBoxMask")},_attachMaskEvents(){b.on(this._input(),K("dxclick","dateBoxMask"),this._maskClickHandler.bind(this)),b.on(this._input(),K("paste","dateBoxMask"),this._maskPasteHandler.bind(this)),b.on(this._input(),K("drop","dateBoxMask"),()=>{this._renderSelectedPart()}),b.on(this._input(),K("compositionend","dateBoxMask"),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&b.on(this._input(),K("beforeinput","dateBoxMask"),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(t){this._useMaskBehavior()&&this._partIncrease(t.delta>0?1:-1,t)},_selectNextPart(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!this.option("text")||this._disposed)return;t&&(this._initialMaskValue=new Date(this._maskValue));let e=pn(this._activePartIndex+t,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(e===0&&t<0||e===this._dateParts.length-1&&t>0)){this._selectNextPart(t>=0?t+1:t-1);return}e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))},_getRealLimitsPattern(){if(this._getActivePartProp("pattern")[0]==="d")return"dM"},_getActivePartLimits(t){return this._getActivePartProp("limits")(this._maskValue,t&&this._getRealLimitsPattern())},_getActivePartValue(t){t=t||this._maskValue;const e=this._getActivePartProp("getter");return ie(e)?e(t):t[e]()},_addLeadingZeroes(t){const e=this._searchValue.match(/^0+/),n=this._getActivePartLimits(),i=String(n.max).length;return((e&&e[0]||"")+String(t)).substr(-i)},_setActivePartValue(t,e){e=e||this._maskValue;const n=this._getActivePartProp("setter"),i=this._getActivePartLimits();t=Or(t,i.min,i.max)?t:t%10,t=this._addLeadingZeroes(pn(t,i.min,i.max)),ie(n)?n(e,t):e[n](t),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(t){if(!(!this._dateParts||!this._dateParts[this._activePartIndex]))return this._dateParts[this._activePartIndex][t]},_loadMaskValue(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dateOption("value");this._maskValue=t&&new Date(t),this._initialMaskValue=t&&new Date(t)},_saveMaskValue(){const t=this._maskValue&&new Date(this._maskValue);t&&this.option("type")==="date"&&t.setHours(0,0,0,0),this._initialMaskValue=new Date(t),this.dateOption("value",t)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(t){this.callBase(t),this._useMaskBehavior()&&this.option("text",t)},_partIncrease(t,e){this._setNewDateIfEmpty();const{max:n,min:i}=this._getActivePartLimits(e);let s=t+this._getActivePartValue();s>n?s=this._applyLimits(s,{limitBase:i,limitClosest:n,max:n}):s<i&&(s=this._applyLimits(s,{limitBase:n,limitClosest:i,max:n})),this._setActivePartValue(s)},_applyLimits(t,e){let{limitBase:n,limitClosest:i,max:s}=e;const r=(t-i)%s;return r?n+r-1*il(r):i},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=dte(this._dateParts,this._caret().start),this._isAllSelected()||(M(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(t){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(t){const e=this._replaceSelectedText(this.option("text"),this._caret(),ID(t)),n=ee.parse(e,this._getFormatPattern());n&&this._isDateValid(n)&&(this._maskValue=n,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),t.preventDefault()},_isDateValid:t=>er(t)&&!isNaN(t),_isValueDirty(){const t=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(t&&t.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&b.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(t){this._useMaskBehavior()&&!t.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(t),this._selectFirstPart(t)):this.callBase(t)},_valueChangeEventHandler(t){const e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(t),e?this._maskValue===null&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(t)},_optionChanged(t){switch(t.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(t),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(t),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(t)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},clear(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});re("dxDateBox",$F);const xR="dx-responsivebox-screen-",FF=ia.inherit({_getDefaultOptions(){return T(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init(){this.option("screenByWidth")||this._options.silent("screenByWidth",gw),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:()=>"dx-box-item",_itemDataKey:()=>"dxBoxItemData",_initMarkup(){this.callBase(),this.$element().addClass("dx-responsivebox")},_renderItems(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged(t){const e=this._findItemElementByItem(t);e.length&&(this._refreshItem(e,t),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize(){const t=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(xR+t),this.option("currentScreenFactor",t)},_removeScreenSizeClass(){const t=this.option("currentScreenFactor");t&&this.$element().removeClass(xR+t)},_prepareGrid(){const t=this._grid=[];this._prepareRowsAndCols(),N(this._rows,()=>{const e=[];t.push(e),N(this._cols,()=>{e.push(this._createEmptyCell())})})},getSingleColumnRows(){const t=this.option("rows"),e=this._screenItems.length;if(t.length){const n=this._filterByScreen(t),i=[];for(let s=0;s<e;s++){const r=this._defaultSizeConfig();s<n.length&&M(n[s].shrink)&&(r.shrink=n[s].shrink),i.push(r)}return i}return this._defaultSizeConfig(e)},_prepareRowsAndCols(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems(){this._screenItems.sort((t,e)=>t.location.row-e.location.row||t.location.col-e.location.col),N(this._screenItems,(t,e)=>{T(e.location,{row:t,col:0,rowspan:1,colspan:1})})},_sizesByScreen(t){return Yn(this._filterByScreen(t),e=>T(this._defaultSizeConfig(),e))},_createDefaultSizeConfig:()=>({ratio:1,baseSize:0,minSize:0,maxSize:0}),_defaultSizeConfig(t){const e=this._createDefaultSizeConfig();if(!arguments.length)return e;const n=[];for(let i=0;i<t;i++)n.push(e);return n},_filterByScreen(t){const e=this._screenRegExp();return Ci(t,n=>!n.screen||e.test(n.screen))},_screenRegExp(){const t=this._getCurrentScreen();return new RegExp(`(^|\\s)${t}($|\\s)`,"i")},_getCurrentScreen(){const t=this._screenWidth();return this.option("screenByWidth")(t)},_screenWidth:()=>ae()?me(pe()):1920,_createEmptyCell:()=>({item:{},location:{colspan:1,rowspan:1}}),_spreadItems(){N(this._screenItems,(t,e)=>{const n=e.location||{},i=n.col,s=n.row,r=this._grid[s],o=r&&r[i];this._occupyCells(o,e)})},_itemsByScreen(){return this.option("items").reduce((t,e)=>{let n=e.location||{};return n=Ce(n)?[n]:n,this._filterByScreen(n).forEach(i=>{t.push({item:e,location:T({rowspan:1,colspan:1},i)})}),t},[])},_occupyCells(t,e){!t||this._isItemCellOccupied(t,e)||(T(t,e),this._markSpanningCell(t))},_isItemCellOccupied(t,e){if(!ti(t.item))return!0;let n=!1;return this._loopOverSpanning(e.location,i=>{n=n||!ti(i.item)}),n},_loopOverSpanning(t,e){const n=t.row+t.rowspan-1,i=t.col+t.colspan-1,s=Math.min(n,this._rows.length-1),r=Math.min(i,this._cols.length-1);t.rowspan-=n-s,t.colspan-=i-r;for(let o=t.row;o<=s;o++)for(let a=t.col;a<=r;a++)(o!==t.row||a!==t.col)&&e(this._grid[o][a])},_markSpanningCell(t){this._loopOverSpanning(t.location,e=>{T(e,{item:t.item,spanningCell:t})})},_linkNodeToItem(){N(this._itemElements(),(t,e)=>{const n=m(e),i=n.data("dxBoxItemData");i.box||(i.node=n.children())})},_layoutItems(){const t=this._grid.length,e=t&&this._grid[0].length;if(!t&&!e)return;const n=this._layoutBlock({direction:"col",row:{start:0,end:t-1},col:{start:0,end:e-1}}),i=this._prepareBoxConfig(n.box||{direction:"row",items:[T(n,{ratio:1})]});T(i,this._rootBoxConfig(i.items)),this._$root=m("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,Go,i)},_rootBoxConfig(t){return{width:"100%",height:"100%",items:N(t,(n,i)=>{this._needApplyAutoBaseSize(i)&&T(i,{baseSize:"auto"})}),itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:t=>!t.baseSize&&(!t.minSize||t.minSize==="auto")&&(!t.maxSize||t.maxSize==="auto"),_prepareBoxConfig(t){return T(t||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock(t){return this._isSingleItem(t)?this._itemByCell(t.row.start,t.col.start):this._layoutDirection(t)},_isSingleItem(t){const e=this._grid[t.row.start][t.col.start].location,n=t.row.end-t.row.start===e.rowspan-1,i=t.col.end-t.col.start===e.colspan-1;return n&&i},_itemByCell(t,e){const n=this._grid[t][e];return n.spanningCell?null:n.item},_layoutDirection(t){const e=[],{direction:n}=t,i=this._crossDirection(n);let s;for(;s=this._nextBlock(t);){if(this._isBlockIndivisible(t.prevBlockOptions,s))throw it.Error("E1025");const r=this._layoutBlock({direction:i,row:s.row,col:s.col,prevBlockOptions:t});r&&(T(r,this._blockSize(s,i)),e.push(r)),t[i].start=s[i].end+1}return{box:this._prepareBoxConfig({direction:n,items:e})}},_isBlockIndivisible:(t,e)=>t&&t.col.start===e.col.start&&t.col.end===e.col.end&&t.row.start===e.row.start&&t.row.end===e.row.end,_crossDirection:t=>t==="col"?"row":"col",_nextBlock(t){const{direction:e}=t,n=this._crossDirection(e),i=t[e].start,s=t[e].end,r=t[n].start;if(r>t[n].end)return null;let o=1;for(let l=r;l<r+o;l++){let c=1;for(let p=i;p<=s;p++){const f=this._cellByDirection(e,p,l);c=Math.max(c,f.location[`${n}span`])}const u=l+c,d=r+o;u>d&&(o+=u-d)}const a={};return a[e]={start:i,end:s},a[n]={start:r,end:r+o-1},a},_cellByDirection(t,e,n){return t==="col"?this._grid[n][e]:this._grid[e][n]},_blockSize(t,e){const n=e==="row"?"auto":0,i=e==="row"?this._rows:this._cols,s=T(this._createDefaultSizeConfig(),{ratio:0});for(let r=t[e].start;r<=t[e].end;r++){const o=i[r];s.ratio+=o.ratio,s.baseSize+=o.baseSize,s.minSize+=o.minSize,s.maxSize+=o.maxSize,M(o.shrink)&&(s.shrink=o.shrink)}return s.minSize=s.minSize?s.minSize:n,s.maxSize=s.maxSize?s.maxSize:"auto",this._isSingleColumnScreen()&&(s.baseSize="auto"),s},_update(t){const e=this._$root;this._renderItems(),e&&(t?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot(t){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(t)},_dispose(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots(){this._assistantRoots&&N(this._assistantRoots,(t,e)=>{m(e).remove()})},_clearItemNodeTemplates(){N(this.option("items"),function(){delete this.node})},_attachClickEvent:B,_optionChanged(t){switch(t.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(t),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(t);break;case"currentScreenFactor":break;default:this.callBase(t)}},_dimensionChanged(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint(){this._update()}});re("dxResponsiveBox",FF);function hte(t){let{item:e,$parent:n,rootElementCssClassList:i,validationGroup:s,createComponentCallback:r}=t;const o=m("<div>").appendTo(n).addClass(i.join(" ")).addClass("dx-field-button-item").css("textAlign",pte(e.horizontalAlignment));n.css("justifyContent",fte(e.verticalAlignment));const a=m("<div>").appendTo(o);return{$rootElement:o,buttonInstance:r(a,"dxButton",T({validationGroup:s},e.buttonOptions))}}function pte(t){return M(t)?t:"right"}function fte(t){switch(t){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}function wR(t){let{$parent:e,rootElementCssClassList:n}=t;return m("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(n.join(" ")).appendTo(e)}const mte=ze.inherit({ctor(t,e){this.editor=t,this.validator=e,this.validationRequestsCallbacks=[];const n=i=>{this.validationRequestsCallbacks.forEach(s=>s(i))};t.validationRequest.add(n),t.on("disposing",()=>{t.validationRequest.remove(n)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(t){this.editor.option({validationErrors:t.brokenRules,validationStatus:t.status})},reset(){this.editor.clear()},focus(){this.editor.focus()}}),GS=us.inherit({_initOptions(t){this.callBase.apply(this,arguments),this.option(Qe.initValidationOptions(t))},_getDefaultOptions(){return T(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=at(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){const t=this._findGroup();this._groupWasInit||this.on("disposing",e=>{Qe.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==t)&&(Qe.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=t,Qe.registerValidatorInGroup(t,this))},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{validationGroup:!0})},_getEditor(){const t=this.$element()[0];return st(t,"dx-validation-target")},_initAdapter(){const t=this._getEditor();let e=this.option("adapter");if(!e){if(t){e=new mte(t,this),e.validationRequestsCallbacks.push(i=>{this._validationInfo.skipValidation||this.validate(i)}),this.option("adapter",e);return}throw it.Error("E0120")}const n=e.validationRequestsCallbacks;n&&n.push(i=>{this.validate(i)})},_toggleRTLDirection(t){var e;const n=((e=this.option("adapter"))===null||e===void 0||(e=e.editor)===null||e===void 0?void 0:e.option("rtlEnabled"))??t;this.callBase(n)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){const t=this._getEditor();if(t){const n=(this.option("validationRules")||[]).some(i=>{let{type:s}=i;return s==="required"})||null;t.isInitialized()&&t.setAria("required",n),t.option("_onMarkupRendered",()=>{t.setAria("required",n)})}},_visibilityChanged(t){t&&this._initGroupRegistration()},_optionChanged(t){switch(t.name){case"validationGroup":this._initGroupRegistration();return;case"validationRules":this._resetValidationRules(),this._toggleAccessibilityAttributes(),this.option("isValid")!==void 0&&this.validate();return;case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(Qe.synchronizeValidationOptions(t,this.option()));break;default:this.callBase(t)}},_getValidationRules(){return this._validationRules||(this._validationRules=Yn(this.option("validationRules"),(t,e)=>T({},t,{validator:this,index:e}))),this._validationRules},_findGroup(){const t=this.$element();return this.option("validationGroup")||Qe.findGroup(t,this._modelByElement(t))},_resetValidationRules(){delete this._validationRules},validate(t){const e=this.option("adapter"),n=this.option("name"),i=e.bypass&&e.bypass(),s=t&&t.value!==void 0?t.value:e.getValue(),r=e.getCurrentValidationError&&e.getCurrentValidationError(),o=this._getValidationRules(),a=this._validationInfo&&this._validationInfo.result;if(a&&a.status==="pending"&&a.value===s)return T({},a);let l;return i?l={isValid:!0,status:"valid"}:r&&r.editorSpecific?(r.validator=this,l={isValid:!1,status:"invalid",brokenRule:r,brokenRules:[r]}):l=Qe.validate(s,o,n),l.id=new Et().toString(),this._applyValidationResult(l,e),l.complete&&l.complete.then(c=>{c.id===this._validationInfo.result.id&&this._applyValidationResult(c,e)}),T({},this._validationInfo.result)},reset(){const t=this.option("adapter"),e={id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null};this._validationInfo.skipValidation=!0,t.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult(e,t)},_updateValidationResult(t){if(!this._validationInfo.result||this._validationInfo.result.id!==t.id){const e=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=T({},t,{complete:e})}else for(const e in t)e!=="id"&&e!=="complete"&&(this._validationInfo.result[e]=t[e])},_applyValidationResult(t,e){const n=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(t.validator=this,this._updateValidationResult(t),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status==="pending"){this._validationInfo.deferred||(this._validationInfo.deferred=j(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()),this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);return}this._validationInfo.result.status!=="pending"&&(n(t),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(t),this._validationInfo.deferred=null))},focus(){const t=this.option("adapter");t&&t.focus&&t.focus()},_useTemplates:()=>!1});re("dxValidator",GS);const gte="dx-form",Zv="dx-form-group",_te="dx-form-group-caption",yte="dx-form-group-custom-caption",SR="dx-col-",HF="dx-field-item",bR="dx-layout-manager-one-col",NF="dx-field-item-label-content",vte="dx-layout-manager",zF="dx-field-item-label",R0="dx-field-item-content",Cte="dx-single-column-item-content",WF="dx-root-simple-item",Dte="dx-form-group-content",xte="dx-field-item-has-group",wte="dx-field-item-has-tabs",Ste="dx-form-group-with-caption",ER="dx-field-item-tab",TR="dx-group-colcount-",IR="group-col-count",bte="dx-form-validation-summary",Ete="dx-form-styling-mode-underlined",O0="simple",Tte=["dxTagBox","dxRangeSlider","dxDateRangeBox"],Ite=["dxRangeSlider","dxSlider"],Ate=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function kte(t){let{$parent:e,rootElementCssClassList:n,formOrLayoutManager:i,createComponentCallback:s,item:r,template:o,labelTemplate:a,name:l,formLabelLocation:c,requiredMessageTemplate:u,validationGroup:d,editorValue:p,canAssignUndefinedValueToEditor:f,editorValidationBoundary:g,editorStylingMode:y,showColonAfterLabel:v,managerLabelLocation:C,itemId:x,managerMarkOptions:S,labelMode:O,onLabelTemplateRendered:H}=t;const F=M(r.isRequired)?r.isRequired:!!Pte(r.validationRules),I=r.itemType===O0,w=r.helpText?`dx-${new Et}`:null,A=Mte({item:r,id:x,isRequired:F,managerMarkOptions:S,showColonAfterLabel:v,labelLocation:C,formLabelMode:O,labelTemplate:a,onLabelTemplateRendered:H}),k=A.visible&&(A.text||A.labelTemplate&&I),{location:P,labelID:$}=A,R=P!=="top"&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(r.editorType),Ae=Ote({editorType:r.editorType,editorValue:p,defaultEditorName:r.dataField,canAssignUndefinedValueToEditor:f,externalEditorOptions:r.editorOptions,editorInputId:x,editorValidationBoundary:g,editorStylingMode:y,formLabelMode:O,labelText:A.textWithoutColon,labelMark:A.markOptions.showRequiredMark?" "+A.markOptions.requiredMark:""}),Qt=A.markOptions.showOptionalMark&&!A.visible&&Ae.labelMode!=="hidden"&&!M(r.helpText)?A.markOptions.optionalMark:r.helpText;return{$parent:e,rootElementCssClassList:n,formOrLayoutManager:i,createComponentCallback:s,labelOptions:A,labelNeedBaselineAlign:R,labelLocation:P,needRenderLabel:k,item:r,isSimpleItem:I,isRequired:F,template:o,helpID:w,labelID:$,name:l,helpText:Qt,formLabelLocation:c,requiredMessageTemplate:u,validationGroup:d,editorOptions:Ae}}function Rte(t){let{showRequiredMark:e,requiredMark:n,showOptionalMark:i,optionalMark:s}=t;return!e&&!i?"":" "+(e?n:s)}function GF(t,e){let{showRequiredMark:n,requiredMark:i,showOptionalMark:s,optionalMark:r}=t;return{showRequiredMark:n&&e,requiredMark:i,showOptionalMark:s&&!e,optionalMark:r}}function Ote(t){let{editorType:e,defaultEditorName:n,editorValue:i,canAssignUndefinedValueToEditor:s,externalEditorOptions:r,editorInputId:o,editorValidationBoundary:a,editorStylingMode:l,formLabelMode:c,labelText:u,labelMark:d}=t;const p={};(i!==void 0||s)&&(p.value=i),Tte.includes(e)&&(p.value=p.value||[]);let f=r==null?void 0:r.labelMode;M(f)||(f=c==="outside"?"hidden":c);const g=(r==null?void 0:r.stylingMode)||l,y=Ite.includes(e),v=T(!0,p,r,{inputAttr:{id:o},validationBoundary:a,stylingMode:g,label:y?r==null?void 0:r.label:u,labelMode:f,labelMark:d});return r&&(v.dataSource&&(v.dataSource=r.dataSource),v.items&&(v.items=r.items)),n&&!v.name&&(v.name=n),v}function Pte(t){let e;return t&&t.length&&N(t,(n,i)=>{if(i.type==="required")return e=!0,!1}),e}function Mte(t){let{item:e,id:n,isRequired:i,managerMarkOptions:s,showColonAfterLabel:r,labelLocation:o,labelTemplate:a,formLabelMode:l,onLabelTemplateRendered:c}=t;const u=Ate.includes(e.editorType),d=T({showColon:r,location:o,id:n,visible:l==="outside"||u&&l!=="hidden",isRequired:i},e?e.label:{},{markOptions:GF(s,i),labelTemplate:a,onLabelTemplateRendered:c});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(e.editorType)&&(d.labelID=`dx-label-${new Et}`),!d.text&&e.dataField&&(d.text=gV(e.dataField)),d.text&&(d.textWithoutColon=d.text,d.text+=d.showColon?":":""),d}const Vte="dx-field-item-required-mark",Bte="dx-field-item-optional-mark";function Lte(t){let{text:e,id:n,location:i,alignment:s,labelID:r=null,markOptions:o={},labelTemplate:a,labelTemplateData:l,onLabelTemplateRendered:c}=t;if((!M(e)||e.length<=0)&&!M(a))return null;const u=m("<label>").addClass(`${zF} dx-field-item-label-location-${i}`).attr("for",n).attr("id",r).css("textAlign",s),d=m("<span>").addClass(NF);let p=m("<span>").addClass("dx-field-item-label-text").text(e);return a&&(p=m("<div>").addClass("dx-field-item-custom-label-content"),l.text=e,a.render({container:se(p),model:l,onRendered(){c==null||c()}})),u.append(d.append(p,$te(o)))}function $te(t){const e=Rte(t);return e===""?null:m("<span>").addClass(t.showRequiredMark?Vte:Bte).text(e)}function Fte(t,e,n){const i=`${e} > .${zF}:not(.dx-field-item-label-location-top) > .${NF}`,s=t.find(i),r=s.length;let o,a,l=0;for(a=0;a<r;a++)o=Hte(s[a]),o>l&&(l=o);for(a=0;a<r;a++)s[a].style.width=`${l}px`}function Hte(t){let e=0;const n=t.children.length;for(let i=0;i<n;i++){const s=t.children[i];e+=s.offsetWidth}return e}const UF="dx-field-item-content-wrapper",Nte="dx-template-wrapper",P0="dx-validation-target",zte="dx-invalid";function Wte(t){let{$parent:e,rootElementCssClassList:n,formOrLayoutManager:i,createComponentCallback:s,labelOptions:r,labelNeedBaselineAlign:o,labelLocation:a,needRenderLabel:l,formLabelLocation:c,item:u,editorOptions:d,isSimpleItem:p,isRequired:f,template:g,helpID:y,labelID:v,name:C,helpText:x,requiredMessageTemplate:S,validationGroup:O}=t;const H=m("<div>").addClass(n.join(" ")).appendTo(e);H.addClass(f?"dx-field-item-required":"dx-field-item-optional"),p&&H.addClass("dx-flex-layout"),p&&o&&H.addClass("dx-field-item-label-align");const F=m("<div>");F.data("dx-form-item",u),F.addClass(R0).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[c]);let I=null;if(l&&(r.labelTemplate&&(r.labelTemplateData=RR(u,d,i)),I=Lte(r)),I){const{editorType:P}=u;H.append(I),(a==="top"||a==="left")&&H.append(F),a==="right"&&H.prepend(F),a==="top"?H.addClass("dx-label-v-align"):H.addClass("dx-label-h-align"),(P==="dxCheckBox"||P==="dxSwitch")&&b.on(I,_n,()=>{b.trigger(F.children(),_n)});const R=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(P),Ae=r.alignment;!g&&R&&a==="top"&&(Ae==="left"||!Ae)&&F.addClass("dx-toggle-controls-paddings")}else H.append(F);let w;if(g)g.render({container:se(F),model:RR(u,d,i),onRendered(){const P=AR(F),$=Gte(P);kR($)}});else{const P=m("<div>").appendTo(F);try{w=s(P,u.editorType,d),w.setAria("describedby",y),v&&w.setAria("labelledby",v),w.setAria("required",f)}catch($){it.log("E1035",$.message)}}const A=AR(F),k=A&&A.data(P0);if(k){const P=u.label&&u.label.text,$=P?null:C,R=P?u.label.text:$&&gV($);let Ae;if(p)if(u.validationRules)Ae=u.validationRules;else{const vt=jm(S,R||"");Ae=u.isRequired?[{type:"required",message:vt}]:null}Array.isArray(Ae)&&Ae.length&&s(A,GS,{validationRules:Ae,validationGroup:O,dataGetter:()=>({formItem:u})}),kR(k)}return x&&p&&F.parent().append(m("<div>").addClass(UF).append(F).append(m("<div>").addClass("dx-field-item-help-text").attr("id",y).text(x))),{$fieldEditorContainer:F,$rootElement:H,widgetInstance:w}}function AR(t){const e=t.children().first();return e.hasClass(Nte)?e.children().first():e}function Gte(t){var e;return(t==null?void 0:t.data(P0))||(t==null||(e=t.parent)===null||e===void 0||(e=e.call(t))===null||e===void 0?void 0:e.data(P0))}function kR(t){if(t&&ii()){const e=`.${UF}`,n=i=>{let{element:s,component:r}=i;const{isValid:o,validationMessageMode:a}=r.option();m(s).parents(e).toggleClass(zte,o===!1&&(r._isFocused()||a==="always"))};t.on("optionChanged",i=>{i.name==="isValid"&&n(i)}),t.on("focusIn",n).on("focusOut",n).on("enterKey",n)}}function RR(t,e,n){return{dataField:t.dataField,editorType:t.editorType,editorOptions:e,component:n,name:t.name}}class KF{constructor(){this._map={}}_findWidgetInstance(e){let n;return N(this._map,(i,s)=>{let{widgetInstance:r,item:o}=s;if(e(o))return n=r,!1}),n}_findFieldByCondition(e,n){let i;return N(this._map,(s,r)=>{if(e(r))return i=n==="guid"?s:r[n],!1}),i}clear(){this._map={}}removeItemsByItems(e){N(e.getItems(),n=>this.removeItemByKey(n))}removeItemByKey(e){delete this._map[e]}add(e){const n=e.guid||new Et;return this._map[n]=e,n}addItemsOrExtendFrom(e){e.each((n,i)=>{this._map[n]?(i.widgetInstance&&(this._map[n].widgetInstance=i.widgetInstance),this._map[n].$itemContainer=i.$itemContainer):this.add({item:i.item,widgetInstance:i.widgetInstance,guid:n,$itemContainer:i.$itemContainer})})}extendRunTimeItemInfoByKey(e,n){this._map[e]&&(this._map[e]=T(this._map[e],n))}findWidgetInstanceByItem(e){return this._findWidgetInstance(n=>n===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(n=>{let{path:i}=n;return i===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(n=>{let{path:i}=n;return i===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(n=>e===n.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(n=>e===(ve(n)?n:n.dataField))}findItemContainerByItem(e){for(const n in this._map)if(this._map[n].item===e)return this._map[n].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(n=>{let{item:i}=n;return i===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(n=>{let{item:i}=n;return i===e},"preparedItem")}getItems(){return this._map}each(e){N(this._map,(n,i)=>{e(n,i)})}removeItemsByPathStartWith(e){Object.keys(this._map).filter(s=>this._map[s].path?this._map[s].path.indexOf(e,0)>-1:!1).forEach(s=>this.removeItemByKey(s))}}const Ute=Kt.inherit({_getDefaultOptions(){return T(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:q.format("dxForm-optionalMark"),requiredMessage:q.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init(){const t=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new KF,this._updateReferencedOptions(t),this._initDataAndItems(t)},_dispose(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems(t){this._syncDataWithItems(),this._updateItems(t)},_syncDataWithItems(){const t=this.option("layoutData"),e=this.option("items");M(e)&&e.forEach(n=>{if(n.dataField&&this._getDataByField(n.dataField)===void 0){let i;n.editorOptions&&(i=n.editorOptions.value),(M(i)||n.dataField in t)&&this._updateFieldValue(n.dataField,i)}})},_getDataByField(t){return t?this.option(`layoutData.${t}`):null},_isCheckboxUndefinedStateEnabled(t){let{allowIndeterminateState:e,editorType:n,dataField:i}=t;if(e===!0&&n==="dxCheckBox"){const s=["layoutData",...i.split(".")],r=s.pop(),o=this.option(s.join("."));return o&&r in o}return!1},_updateFieldValue(t,e){const n=this.option("layoutData");let i=e;!Xi.isWrapped(n[t])&&M(t)?this.option(`layoutData.${t}`,i):Xi.isWritableWrapped(n[t])&&(i=ie(i)?i():i,n[t](i)),this._triggerOnFieldDataChanged({dataField:t,value:i})},_triggerOnFieldDataChanged(t){this._createActionByOption("onFieldDataChanged")(t)},_updateItems(t){const e=this,n=this.option("items"),i=M(n),s=e.option("customizeItem"),r=i?n:this._generateItemsByData(t);if(M(r)){const o=[];N(r,(a,l)=>{e._isAcceptableItem(l)&&(l=e._processItem(l),s&&s(l),ue(l)&&Xi.unwrap(l.visible)!==!1&&o.push(l))}),(!e._itemWatchers.length||!i)&&e._updateItemWatchers(r),this._setItems(o),this._sortItems()}},_cleanItemWatchers(){this._itemWatchers.forEach(t=>{t()}),this._itemWatchers=[]},_updateItemWatchers(t){const e=this,n=e._getWatch();t.forEach(i=>{ue(i)&&M(i.visible)&&ie(n)&&e._itemWatchers.push(n(()=>Xi.unwrap(i.visible),()=>{e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData(t){const e=[];return M(t)&&N(t,n=>{e.push({dataField:n})}),e},_isAcceptableItem(t){const e=t.dataField||t,n=this._getDataByField(e);return!(ie(n)&&!Xi.isWrapped(n))},_processItem(t){if(typeof t=="string"&&(t={dataField:t}),typeof t=="object"&&!t.itemType&&(t.itemType=O0),!M(t.editorType)&&M(t.dataField)){const e=this._getDataByField(t.dataField);t.editorType=M(e)?this._getEditorTypeByDataType(as(e)):"dxTextBox"}return t.editorType==="dxCheckBox"&&(t.allowIndeterminateState=t.allowIndeterminateState??!0),t},_getEditorTypeByDataType(t){switch(t){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems(){b9(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes(){this._items.sort((t,e)=>{const n=t.visibleIndex,i=e.visibleIndex;let s;return n>i?s=1:n<i?s=-1:s=0,s})},_initMarkup(){this._itemsRunTimeInfo.clear(),this.$element().addClass(vte),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox(){const t=this,e=[];if(t._items&&t._items.length){const n=t._getColCount(),i=m("<div>").appendTo(t.$element());t._prepareItemsWithMerging(n);const s=t._generateLayoutItems();t._responsiveBox=t._createComponent(i,FF,t._getResponsiveBoxConfig(s,n,e)),ae()||t._renderTemplates(e)}},_itemStateChangedHandler(t){this._refresh()},_renderTemplates(t){const e=this;let n=0;t.forEach(i=>{var s;let{item:r}=i;r!=null&&(s=r.label)!==null&&s!==void 0&&s.template&&n++}),N(t,(i,s)=>{switch(s.itemType){case"empty":wR(s);break;case"button":e._renderButtonItem(s);break;default:e._renderFieldItem(s,n)}})},_getResponsiveBoxConfig(t,e,n){const i=this,s=i.option("colCountByScreen"),r=s&&s.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged(){const o=i.option("onLayoutChanged"),a=i.isSingleColumnMode();o&&(i.$element().toggleClass(bR,a),o(a))},onContentReady(o){ae()&&i._renderTemplates(n),i.option("onLayoutChanged")&&i.$element().toggleClass(bR,i.isSingleColumnMode(o.component))},itemTemplate(o,a,l){if(!o.location)return;const c=m(l),u=o.location.row*e,d=i._items[o.location.col+u];if(!d)return;const p=[d.cssClass];c.toggleClass(Cte,i.isSingleColumnMode(this)),o.location.row===0&&p.push("dx-first-row"),o.location.col===0&&p.push("dx-first-col"),d.itemType===O0&&i.option("isRoot")&&c.addClass(WF);const f=o.location.col===e-1||o.location.col+o.location.colspan===e,g=i._getRowsCount(),y=o.location.row===g-1;f&&p.push("dx-last-col"),y&&p.push("dx-last-row"),d.itemType!=="empty"&&(p.push(HF),p.push(i.option("cssItemClass")),M(d.col)&&p.push(`dx-col-${d.col}`)),n.push({itemType:d.itemType,item:d,$parent:c,rootElementCssClassList:p})},cols:i._generateRatio(e),rows:i._generateRatio(i._getRowsCount(),!0),dataSource:t,screenByWidth:i.option("screenByWidth"),singleColumnScreen:r?!1:"xs"}},_getColCount(){let t=this.option("colCount");const e=this.option("colCountByScreen");if(e){let n=this.option("form").getTargetScreenFactor();n||(n=ae()?oV(this.option("screenByWidth")):"lg"),t=e[n]||t}if(t==="auto"){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=t=this._getMaxColCount()}return t<1?1:t},_getMaxColCount(){if(!ae())return 1;const t=this.option("minColWidth"),e=me(this.$element()),n=this._items.length,i=Math.floor(e/t)||1;return n<i?n:i},isCachedColCountObsolete(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging(t){const e=this._items.slice(0);let n,i,s=[],r,o;for(o=0;o<e.length;o++)if(n=e[o],s.push(n),(this.option("alignItemLabels")||n.alignItemLabels||n.colSpan)&&(n.col=this._getColByIndex(s.length-1,t)),n.colSpan>1&&n.col+n.colSpan<=t){for(i=[],r=0;r<n.colSpan-1;r++)i.push({merged:!0});s=s.concat(i)}else delete n.colSpan;this._setItems(s)},_getColByIndex:(t,e)=>t%e,_setItems(t){this._items=t,this._cashedColCount=null},_generateLayoutItems(){const t=this._items,e=this._getColCount(),n=[];let i,s;for(s=0;s<t.length;s++)if(i=t[s],!i.merged){const r={location:{row:parseInt(s/e),col:this._getColByIndex(s,e)}};M(i.disabled)&&(r.disabled=i.disabled),M(i.visible)&&(r.visible=i.visible),M(i.colSpan)&&(r.location.colspan=i.colSpan),M(i.rowSpan)&&(r.location.rowspan=i.rowSpan),n.push(r)}return n},_renderEmptyItem(t){wR({$container:t})},_renderButtonItem(t){let{item:e,$parent:n,rootElementCssClassList:i}=t;const{$rootElement:s,buttonInstance:r}=hte({item:e,$parent:n,rootElementCssClassList:i,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:r,guid:e.guid,$itemContainer:s})},_renderFieldItem(t,e){var n,i;let{item:s,$parent:r,rootElementCssClassList:o}=t;const a=this._getDataByField(s.dataField);let l=!1;if(a===void 0){const{allowIndeterminateState:g,editorType:y,dataField:v}=s;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:g,editorType:y,dataField:v})}const c=s.dataField||s.name,u=this._getFormOrThis(),{$fieldEditorContainer:d,widgetInstance:p,$rootElement:f}=Wte(kte({$parent:r,rootElementCssClassList:o,item:s,name:c,editorValue:a,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:s.template?this._getTemplate(s.template):null,labelTemplate:(n=s.label)!==null&&n!==void 0&&n.template?this._getTemplate(s.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(c),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(u,e)&&u._alignLabels(this,this.isSingleColumnMode(u))}}));(i=this.option("onFieldItemRendered"))===null||i===void 0||i(),p&&s.dataField&&this._bindDataField(p,s.dataField,s.editorType,d),this._itemsRunTimeInfo.add({item:s,widgetInstance:p,guid:s.guid,$itemContainer:f})},_incTemplateRenderedCallCount(){this._labelTemplateRenderedCallCount=(this._labelTemplateRenderedCallCount??0)+1},_shouldAlignLabelsOnTemplateRendered(t,e){return t.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis(){return this.option("form")||this},_bindDataField(t,e,n,i){const s=this._getFormOrThis();t.on("enterKey",r=>{s._createActionByOption("onEditorEnterKey")(T(r,{dataField:e}))}),this._createWatcher(t,i,e),this.linkEditorToDataField(t,e,n)},_createWatcher(t,e,n){const i=this,s=i._getWatch();if(!ie(s))return;const r=s(()=>i._getDataByField(n),()=>{const o=i._getDataByField(n);if(t.NAME==="dxTagBox"){const a=t.option("value");if(o!==a&&function(l,c){if(!Array.isArray(l)||!Array.isArray(c)||l.length!==c.length)return!1;for(let u=0;u<l.length;u++)if(l[u]!==c[u])return!1;return!0}(o,a))return}t.option("value",o)},{deep:!0,skipImmediate:!0},{createWatcherDataField:n});b.on(e,_l,r)},_getWatch(){if(!M(this._watch)){const t=this.option("form");this._watch=t&&t.option("integrationOptions.watchMethod")}return this._watch},_createComponent(t,e,n){const i=this.option("readOnly");let s=Object.hasOwn(n,"readOnly");const r=this.callBase(t,e,L({},n,{readOnly:s?n.readOnly:i}));let o=!1;return r.on("optionChanged",a=>{a.name==="readOnly"&&!o&&(s=!0)}),this.on("optionChanged",a=>{a.name==="readOnly"&&!s&&(o=!0,r.option(a.name,a.value),o=!1)}),r},_generateRatio(t,e){const n=[];let i,s;for(s=0;s<t;s++)i={ratio:1},e&&(i.baseSize="auto"),n.push(i);return n},_getRowsCount(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions(t){const e=this.option("layoutData");ue(e)&&Object.getOwnPropertyNames(e).forEach(n=>delete this._optionsByReference[`layoutData.${n}`]),ue(t)&&Object.getOwnPropertyNames(t).forEach(n=>this._optionsByReference[`layoutData.${n}`]=!0)},_clearWidget(t){this._disableEditorValueChangedHandler=!0,t.clear(),this._disableEditorValueChangedHandler=!1,t.option("isValid",!0)},_optionChanged(t){if(t.fullName.search("layoutData.")!==0)switch(t.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(t.value),this.option("items")?ti(t.value)||this._itemsRunTimeInfo.each((e,n)=>{if(M(n.item)){const{dataField:i}=n.item;if(i&&M(n.widgetInstance)){const r=lt(i)(t.value),{allowIndeterminateState:o,editorType:a}=n.item;r!==void 0||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:o,editorType:a,dataField:i})?n.widgetInstance.option("value",r):this._clearWidget(n.widgetInstance)}}}):(this._initDataAndItems(t.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(t.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":this.option("colCount")==="auto"&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(t),this.option("colCount")==="auto"&&this._resetColCount();break;default:this.callBase(t)}},_resetColCount(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(t,e){this.on("optionChanged",n=>{n.fullName===`layoutData.${e}`&&t._setOptionWithoutOptionChange("value",n.value)}),t.on("valueChanged",n=>{const i=ue(n.value)||Array.isArray(n.value);!this._disableEditorValueChangedHandler&&!(i&&n.value===n.previousValue)&&this._updateFieldValue(e,n.value)})},_dimensionChanged(){this.option("colCount")==="auto"&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData(t,e){const n=this;ue(t)?N(t,(i,s)=>{n._updateFieldValue(i,s)}):typeof t=="string"&&n._updateFieldValue(t,e)},getEditor(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},isSingleColumnMode(t){const e=this._responsiveBox||t;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo(){return this._itemsRunTimeInfo}});re("dxLayoutManager",Ute);const Kte="dx-validationsummary-item",jte="dx-validationsummary-item-data",jF=ia.inherit({_getDefaultOptions(){return T(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){const t=this.$element(),e=this.option("validationGroup")||Qe.findGroup(t,this._modelByElement(t)),n=Qe.addGroup(e,!0);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),n.on("validated",this.groupSubscription)},_unsubscribeGroup(){const t=Qe.getGroupConfig(this._validationGroup);t&&t.off("validated",this.groupSubscription)},_getOrderedItems(t,e){let n=[];return N(t,(i,s)=>{const r=Ci(e,o=>{if(o.validator===s)return!0});r.length&&(n=n.concat(r))}),n},_groupValidationHandler(t){const e=this._getOrderedItems(t.validators,Yn(t.brokenRules,n=>({text:n.message,validator:n.validator,index:n.index})));this.validators=t.validators,N(this.validators,(n,i)=>{if(i._validationSummary!==this){let s=this._itemValidationHandler.bind(this);const r=function(){i.off("validated",s),i._validationSummary=null,s=null};i.on("validated",s),i.on("disposing",r),i._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(t){let{isValid:e,validator:n,brokenRules:i}=t,s=this.option("items"),r=!1,o=0;for(;o<s.length;){const a=s[o];if(a.validator===n){const l=Ci(i||[],c=>c.index===a.index)[0];if(e||!l){s.splice(o,1),r=!0;continue}l.message!==a.text&&(a.text=l.message,r=!0)}o++}N(i,(a,l)=>{Ci(s,u=>u.validator===n&&u.index===l.index)[0]||(s.push({text:l.message,validator:n,index:l.index}),r=!0)}),r&&(s=this._getOrderedItems(this.validators,s),this.option("items",s))},_initMarkup(){this.$element().addClass("dx-validationsummary"),this.callBase()},_optionChanged(t){t.name==="validationGroup"?this._initGroupRegistration():this.callBase(t)},_itemClass:()=>Kte,_itemDataKey:()=>jte,_postprocessRenderItem(t){b.on(t.itemElement,"click",()=>{t.itemData.validator&&t.itemData.validator.focus&&t.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});re("dxValidationSummary",jF);class qte extends us{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),Qe.addGroup(this,!1)}_initMarkup(){const e=this.$element();e.addClass("dx-validationgroup"),e.find(".dx-validator").each((n,i)=>{GS.getInstance(m(i))._initGroupRegistration()}),e.find(".dx-validationsummary").each((n,i)=>{jF.getInstance(m(i)).refreshValidationGroup()}),super._initMarkup()}validate(){return Qe.validateGroup(this)}reset(){return Qe.resetGroup(this)}_dispose(){Qe.removeGroup(this),this.$element().removeClass("dx-validationgroup"),super._dispose()}_useTemplates(){return!1}}re("dxValidationGroup",qte);const Sf={move(t,e){Ft(t,{left:e})}},Qv={moveTo(t,e,n,i){Tt.animate(t,{type:"slide",to:{left:e},duration:n,complete:i})},complete(t){Tt.stop(t,!0)}},OR=t=>+t,Yte=t=>Gn(t).left,qF=FS.inherit({_activeStateUnit:".dx-multiview-item",_supportedKeys(){return T(this.callBase(),{pageUp:B,pageDown:B})},_getDefaultOptions(){return T(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}}])},_itemClass:()=>"dx-multiview-item",_itemDataKey:()=>"dxMultiViewItemData",_itemContainer(){return this._$itemContainer},_itemElements(){return this._itemContainer().children(this._itemSelector())},_itemWidth(){return this._itemWidthValue||(this._itemWidthValue=me(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache(){delete this._itemWidthValue},_itemsCount(){return this.option("items").length},_normalizeIndex(t){const e=this._itemsCount();return t<0&&(t+=e),t>=e&&(t-=e),t},_getRTLSignCorrection(){return this.option("rtlEnabled")?-1:1},_init(){this.callBase.apply(this,arguments);const t=this.$element();t.addClass("dx-multiview"),this._$wrapper=m("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(t),this._$itemContainer=m("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup(){this._deferredItems=[],this.callBase();const t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted(t,e){this.callBase(t,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted(t){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(t.index,0,null)},_executeItemRenderAction(t,e,n){t=(this.option("items")||[]).indexOf(e),this.callBase(t,e,n)},_renderItemContent(t){const e=j(),n=this,{callBase:i}=this,s=j();return s.done(()=>{const r=i.call(n,t);e.resolve(r)}),this._deferredItems[t.index]=s,this.option("deferRendering")||s.resolve(),e.promise()},_render(){this.callBase(),Wr(()=>{const t=this._getSelectedItemIndices();this._updateItems(t[0])})},_getElementAria:()=>({role:"group",roledescription:q.format("dxMultiView-elementAriaRoleDescription"),label:q.format("dxMultiView-elementAriaLabel")}),_setElementAria(){const t=this._getElementAria();this.setAria(t,this.$element())},_setItemsAria(){const t=this._itemElements(),e=this._itemsCount();t.each((n,i)=>{const s=this._getItemAria({itemIndex:n,itemsCount:e});this.setAria(s,m(i))})},_getItemAria(t){let{itemIndex:e,itemsCount:n}=t;return{role:"group",roledescription:q.format("dxMultiView-itemAriaRoleDescription"),label:q.format("dxMultiView-itemAriaLabel",e+1,n)}},_updateItems(t,e){this._updateItemsPosition(t,e),this._updateItemsVisibility(t,e)},_modifyByChanges(){this.callBase.apply(this,arguments);const t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_updateItemsPosition(t,e){const n=this._itemElements(),i=M(e)?-this._animationDirection(e,t):void 0,s=n.eq(t);Sf.move(s,0),M(e)&&Sf.move(n.eq(e),100*i+"%")},_updateItemsVisibility(t,e){this._itemElements().each((i,s)=>{const r=m(s),o=i!==t&&i!==e;o||this._renderSpecificItem(i),r.toggleClass("dx-multiview-item-hidden",o),this.setAria("hidden",o||void 0,r)})},_renderSpecificItem(t){const e=this._itemElements().eq(t),n=e.find(this._itemContentClass()).length>0;M(t)&&!n&&(this._deferredItems[t].resolve(),Ji(e))},_refreshItem(t,e){this.callBase(t,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:B,_updateSelection(t,e){const n=t[0],i=e[0];Qv.complete(this._$itemContainer),this._updateItems(i,n);const s=this._animationDirection(n,i);this._animateItemContainer(s*this._itemWidth(),()=>{Sf.move(this._$itemContainer,0),this._updateItems(n),me(this._$itemContainer)})},_animateItemContainer(t,e){const n=this.option("animationEnabled")?200:0;Qv.moveTo(this._$itemContainer,t,n,e)},_animationDirection(t,e){const n=Yte(this._$itemContainer),i=(e-t)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return il(n!==0?n:i)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),xh,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:t=>this._swipeStartHandler(t.event),onUpdated:t=>this._swipeUpdateHandler(t.event),onEnd:t=>this._swipeEndHandler(t.event)})},_findBoundaryIndices(){const t=this.option("items");let e,n;t.forEach((i,s)=>{!!(i!=null&&i.disabled)||(e??(e=s),n=s)}),this._boundaryIndices={firstAvailableIndex:e??0,lastAvailableIndex:n??t.length-1,firstTrueIndex:0,lastTrueIndex:t.length-1}},_swipeStartHandler(t){Qv.complete(this._$itemContainer);const e=this.option("selectedIndex"),n=this.option("loop"),{firstAvailableIndex:i,lastAvailableIndex:s}=this._boundaryIndices,r=this.option("rtlEnabled");t.maxLeftOffset=OR(n||(r?e>i:e<s)),t.maxRightOffset=OR(n||(r?e<s:e>i)),this._swipeDirection=null},_swipeUpdateHandler(t){const{offset:e}=t,n=il(e)*this._getRTLSignCorrection();if(Sf.move(this._$itemContainer,e*this._itemWidth()),n!==this._swipeDirection){this._swipeDirection=n;const i=this.option("selectedIndex"),s=this._normalizeIndex(i-n);this._updateItems(i,s)}},_findNextAvailableIndex(t,e){const{items:n,loop:i}=this.option(),{firstAvailableIndex:s,lastAvailableIndex:r,firstTrueIndex:o,lastTrueIndex:a}=this._boundaryIndices,l=[o,s].includes(t),c=[a,r].includes(t);if(i){if(l&&e<0)return r;if(c&&e>0)return s}for(let u=t+e;u>=s&&u<=r;u+=e)if(!!!n[u].disabled)return u;return t},_swipeEndHandler(t){const e=t.targetOffset*this._getRTLSignCorrection();if(e){const n=this._findNextAvailableIndex(this.option("selectedIndex"),-e);this.option("selectedIndex",n);const i=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",se(i))}else this._animateItemContainer(0,B)},_getItemFocusLoopSignCorrection(){return this._itemFocusLooped?-1:1},_moveFocus(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem(t){const e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.last()),e},_nextItem(t){const e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.first()),e},_dimensionChanged(){this._clearItemWidthCache()},_visibilityChanged(t){t&&this._dimensionChanged()},_updateSwipeDisabledState(){const t=this._getSwipeDisabledState();xh.getInstance(this.$element()).option("disabled",t)},_dispose(){delete this._boundaryIndices,this.callBase()},_optionChanged(t){const{value:e}=t;switch(t.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(t);break;default:this.callBase(t)}}});re("dxMultiView",qF);function YF(t){return t.scrollWidth-t.clientWidth}function Zte(t){return t.scrollHeight-t.clientHeight}function Qte(t,e){return Math.round(t)<=e}function Xte(t,e,n){return Math.round(YF(t)-e)<=n}function Jte(t,e){return Math.round(t)<=e}function ene(t,e,n,i){return Math.round(Zte(t)-e-n)<=i}const PR="dx-tabs-expanded",tne=hu.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge(t){if(this._$element.children(".dx-badge").remove(),!t)return;const e=m("<div>").addClass("dx-tabs-item-badge").addClass("dx-badge").text(t);this._$element.append(e)}}),MR={vertical:"dx-tabs-vertical",horizontal:"dx-tabs-horizontal"},VR={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},Ju={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},Xv={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},Jv={horizontal:"horizontal",vertical:"vertical"},bf={top:"top",right:"right",bottom:"bottom",left:"left"},BR={horizontal:"horizontal",vertical:"vertical"},Wl={top:"top",end:"end",bottom:"bottom",start:"start"},LR={primary:"primary",secondary:"secondary"},US=FS.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions(){return T(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:Jv.horizontal,iconPosition:Wl.start,stylingMode:LR.primary,activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:t=>t?t.badge:void 0,_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules(){const t=xi();return this.callBase().concat([{device:()=>X.real().deviceType!=="desktop",options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>qn(t),options:{iconPosition:Wl.top,stylingMode:LR.secondary}},{device:()=>Un(t),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:Wl.top}}])},_init(){const{orientation:t,stylingMode:e,scrollingEnabled:n}=this.option(),i=this._getIndicatorPosition();this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(n),this._toggleOrientationClass(t),this._toggleIndicatorPositionClass(i),this._toggleIconPositionClass(),this._toggleStylingModeClass(e),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(t,e){const n=Ce(t)?t==null?void 0:t.text:t;if(M(n)){const i=m("<span>").addClass("dx-tab-text-span");i.text(n);const s=m("<span>").addClass("dx-tab-text-span-pseudo");s.text(n),s.appendTo(i),i.appendTo(e)}M(t.html)&&e.html(t.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new ea((t,e)=>{this._prepareDefaultItemTemplate(e,t);const n=Ch(e.icon);n&&n.prependTo(t);const i=m("<div>").addClass("dx-tab-text");t.wrapInner(i)},["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(t,e){const{itemData:n,container:i,index:s}=e;return this._deferredTemplates[s]=j(),t.render({model:n,container:i,index:s,onRendered:()=>this._deferredTemplates[s].resolve()})},_itemClass:()=>"dx-tab",_selectedItemClass:()=>"dx-tab-selected",_itemDataKey:()=>"dxTabData",_initMarkup(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass("dx-overflow-hidden")},_render(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){Ne.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling(){const t=["dx-tabs-stretched",PR,"dx-overflow-hidden"];if(this.$element().removeClass(t.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());const e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){const n=YF(m(this.getScrollable().container()).get(0));e.scrollTo({left:n})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass("dx-tabs-stretched"),this.$element().removeClass("dx-tabs-nav-buttons").addClass(PR))},_isVertical(){return this.option("orientation")===Jv.vertical},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){const t=this._getVisibleItems(),e=this._getSummaryItemsSize("width",t,!0),n=me(this.$element());return[e,n].includes(0)?!1:e>n-1},_isItemsHeightExceeded(){const t=this._getVisibleItems(),e=this._getSummaryItemsSize("height",t,!0),n=Re(this.$element());return e-1>n},_needStretchItems(){const t=this._getVisibleItems(),e=me(this.$element()),n=[];N(t,(o,a)=>{n.push(et(a,!0))});const i=Math.max.apply(null,n),s=e/t.length;return i>s+1},_cleanNavButtons(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple(){this._inkRipple=h$()},_getPointerEvent:()=>ot.up,_toggleActiveState(t,e,n){if(this.callBase.apply(this,arguments),!this._inkRipple)return;const i={element:t,event:n};e?this._inkRipple.showWave(i):this._inkRipple.hideWave(i)},_renderMultiple(){this.option("selectionMode")==="multiple"&&this.option("selectOnFocus",!1)},_renderWrapper(){this._$wrapper=m("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?BR.vertical:BR.horizontal},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){const t=this.$element().wrapInner(m("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(t,Qs,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem(t){if(!this._scrollable)return;const e=this._editStrategy.getItemElement(t);this._scrollable.scrollToElement(e)},_renderNavButtons(){const{showNavButtons:t,rtlEnabled:e}=this.option();if(this.$element().toggleClass("dx-tabs-nav-buttons",t),!t)return;this._leftButton=this._createNavButton(-30,e?"chevronnext":"chevronprev");const n=this._leftButton.$element();n.addClass("dx-tabs-nav-button-left"),this.$element().prepend(n),this._rightButton=this._createNavButton(30,e?"chevronprev":"chevronnext");const i=this._rightButton.$element();i.addClass("dx-tabs-nav-button-right"),this.$element().append(i)},_updateNavButtonsAriaDisabled(){[this._leftButton,this._rightButton].forEach(e=>{e==null||e.$element().attr({"aria-disabled":null})})},_updateNavButtonsState(){const t=this._isVertical(),e=this.getScrollable();if(t){var n,i;(n=this._leftButton)===null||n===void 0||n.option("disabled",Jte(e.scrollTop(),1)),(i=this._rightButton)===null||i===void 0||i.option("disabled",ene(m(e.container()).get(0),e.scrollTop(),0,1))}else{var s,r;(s=this._leftButton)===null||s===void 0||s.option("disabled",Qte(e.scrollLeft(),1)),(r=this._rightButton)===null||r===void 0||r.option("disabled",Xte(m(e.container()).get(0),e.scrollLeft(),1))}this._updateNavButtonsAriaDisabled()},_updateScrollPosition(t,e){this._scrollable.update(),this._scrollable.scrollBy(t/e)},_createNavButton(t,e){const n=this._createAction(()=>{this._holdInterval=setInterval(()=>{this._updateScrollPosition(t,5)},5)}),i=K(hh.name,"dxNavButton"),s=K(ot.up,"dxNavButton"),r=K(ot.out,"dxNavButton"),o=this._createComponent(m("<div>").addClass("dx-tabs-nav-button"),Kn,{focusStateEnabled:!1,icon:e,integrationOptions:{},elementAttr:{role:null,"aria-label":null,"aria-disabled":null},onClick:()=>{this._updateScrollPosition(t,1)}}),a=o.$element();return b.on(a,i,{timeout:300},l=>{n({event:l})}),b.on(a,s,()=>{this._clearInterval()}),b.on(a,r,()=>{this._clearInterval()}),o},_clearInterval(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection(t){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(t[0]))},_visibilityChanged(t){t&&this._dimensionChanged()},_dimensionChanged(){this._renderScrolling()},_itemSelectHandler(t){this.option("selectionMode")==="single"&&this.isItemSelected(t.currentTarget)||this.callBase(t)},_clean(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(t){this.$element().toggleClass(MR.vertical,t)},_toggleTabsHorizontalClass(t){this.$element().toggleClass(MR.horizontal,t)},_getIndicatorPositionClass:t=>VR[t],_getIndicatorPosition(){const{_indicatorPosition:t,rtlEnabled:e}=this.option();if(t)return t;const n=this._isVertical();return e?n?bf.left:bf.bottom:n?bf.right:bf.bottom},_toggleIndicatorPositionClass(t){const e=this._getIndicatorPositionClass(t);this._toggleElementClasses(VR,e)},_toggleScrollingEnabledClass(t){this.$element().toggleClass("dx-tabs-scrolling-enabled",!!t)},_toggleOrientationClass(t){const e=t===Jv.vertical;this._toggleTabsVerticalClass(e),this._toggleTabsHorizontalClass(!e)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case Wl.top:return Ju.top;case Wl.end:return Ju.end;case Wl.bottom:return Ju.bottom;default:return Ju.start}},_toggleIconPositionClass(){const t=this._getTabsIconPositionClass();this._toggleElementClasses(Ju,t)},_toggleStylingModeClass(t){const e=Xv[t]??Xv.primary;this._toggleElementClasses(Xv,e)},_toggleElementClasses(t,e){for(const n in t)this.$element().removeClass(t[n]);this.$element().addClass(e)},_toggleFocusedDisabledNextClass(t,e){this._itemElements().eq(t).toggleClass("dx-focused-disabled-next-tab",e)},_toggleFocusedDisabledPrevClass(t,e){this._itemElements().eq(t).toggleClass("dx-focused-disabled-prev-tab",e)},_toggleFocusedDisabledClasses(t){const{selectedIndex:e}=this.option();this._itemElements().removeClass("dx-focused-disabled-next-tab").removeClass("dx-focused-disabled-prev-tab");const n=e-1,i=e+1,s=m(t).index(),r=this._itemElements().eq(i).hasClass("dx-state-disabled"),o=this._itemElements().eq(n).hasClass("dx-state-disabled"),a=r&&s===i,l=o&&s===n;this._toggleFocusedDisabledNextClass(e,a),this._toggleFocusedDisabledPrevClass(e,l)},_updateFocusedElement(){const{focusStateEnabled:t,selectedIndex:e}=this.option(),n=this._itemElements();if(t&&n.length){const i=n.get(e);this.option({focusedElement:i})}},_optionChanged(t){switch(t.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(t.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(t.name,t.value);break;case"width":case"height":this.callBase(t),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(t);break;case"focusedElement":this._toggleFocusedDisabledClasses(t.value),this.callBase(t),this._scrollToItem(t.value);break;case"rtlEnabled":{this.callBase(t);const e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e);break}case"orientation":{this._toggleOrientationClass(t.value);const e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e),ae()&&this._updateScrollable();break}case"iconPosition":this._toggleIconPositionClass(),ae()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(t.value),ae()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(t.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(t),this._updateFocusedElement();break;default:this.callBase(t)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(t,e){this.callBase(t,e),this._renderScrolling()},getScrollable(){return this._scrollable}});US.ItemClass=tne;re("dxTabs",US);class nne extends hu{_renderWatchers(){return this._startWatcher("badge",B),super._renderWatchers()}}const Gl={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},va={top:"top",right:"right",bottom:"bottom",left:"left"},ine={top:"bottom",right:"left",bottom:"top",left:"right"},$R={horizontal:"horizontal",vertical:"vertical"},FR={top:"top",end:"end",bottom:"bottom",start:"start"},HR={primary:"primary",secondary:"secondary"},KS=qF.inherit({_getDefaultOptions(){return T(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:va.top,iconPosition:FR.start,stylingMode:HR.primary,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:t=>t?t.badge:void 0,_tabsIndicatorPosition:null})},_defaultOptionsRules(){const t=xi();return this.callBase().concat([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!rl,options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>qn(t),options:{stylingMode:HR.secondary}},{device:()=>ii(t),options:{iconPosition:FR.top}}])},_init(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(t,e){const n=Ch(t==null?void 0:t.icon);n&&e.append(n);const i=Ce(t)?t==null?void 0:t.title:t;if(M(i)&&!Ce(i)){const s=m("<span>").addClass("dx-tab-text-span");s.append(W.createTextNode(i));const r=m("<span>").addClass("dx-tab-text-span-pseudo");r.append(W.createTextNode(i)),r.appendTo(s),s.appendTo(e)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new ea((t,e)=>{this._prepareTabsItemTemplate(e,t);const n=m("<div>").addClass("dx-tab-text");t.wrapInner(n)},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout(){if(this._tabs)return;const t=this.$element();this._$tabContainer=m("<div>").addClass("dx-tabpanel-tabs").appendTo(t);const e=m("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,US,this._tabConfig()),this._$container=m("<div>").addClass("dx-tabpanel-container").appendTo(t),this._$container.append(this._$wrapper)},_refreshActiveDescendant(){if(!this._tabs)return;const t=this._tabs,e=t.itemElements(),n=m(e[t.option("selectedIndex")]),i=this.getFocusedItemId();this.setAria("controls",void 0,m(e)),this.setAria("controls",i,n)},_getTabsIndicatorPosition(){const{_tabsIndicatorPosition:t,tabsPosition:e}=this.option();return t??ine[e]},_tabConfig(){const t=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:(function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}).bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:(function(e){if(e.name==="focusedElement")if(e.value){const n=m(e.value),i=this._itemElements().eq(n.index());this.option("focusedElement",se(i))}else this.option("focusedElement",e.value)}).bind(this),onFocusIn:(function(e){this._focusInHandler(e.event)}).bind(this),onFocusOut:(function(e){this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)}).bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:t}},_renderFocusTarget(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){const{tabsPosition:t}=this.option();return[va.right,va.left].includes(t)?$R.vertical:$R.horizontal},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case va.right:return Gl.right;case va.bottom:return Gl.bottom;case va.left:return Gl.left;case va.top:default:return Gl.top}},_toggleTabPanelTabsPositionClass(){for(const e in Gl)this.$element().removeClass(Gl[e]);const t=this._getTabPanelTabsPositionClass();this.$element().addClass(t)},_updateTabsOrientation(){const t=this._getTabsOrientation();this._setTabsOption("orientation",t)},_toggleWrapperFocusedClass(t){this._toggleFocusClass(t,this._$wrapper)},_toggleDisabledFocusedClass(t){this._focusTarget().toggleClass("dx-disabled-focused-tab",t)},_updateFocusState(t,e){this.callBase(t,e);const n=t.target===this._tabs._focusTarget().get(0),i=t.target===this._focusTarget().get(0);if(n&&this._toggleFocusClass(e,this._focusTarget()),n||i){const s=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(e&&!s),this._toggleDisabledFocusedClass(e&&s)}i&&this._toggleFocusClass(e,this._tabs.option("focusedElement"))},_focusOutHandler(t){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(t),this._isFocusOutHandlerExecuting=!1},_setTabsOption(t,e){this._tabs&&this._tabs.option(t,e)},_visibilityChanged(t){t&&this._tabs._dimensionChanged()},registerKeyHandler(t,e){this.callBase(t,e),this._tabs&&this._tabs.registerKeyHandler(t,e)},repaint(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){const t=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",t)},_optionChanged(t){const{name:e,value:n,fullName:i}=t;switch(e){case"dataSource":default:this.callBase(t);break;case"items":this._setTabsOption(e,this.option(e)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(t);break;case"width":this.callBase(t),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(i,n),this.callBase(t),this.option("focusStateEnabled")===!0){const s=this.option("selectedIndex"),r=this._itemElements().eq(s);this.option("focusedElement",se(r))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(i,n),this.callBase(t);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(i,n);break;case"focusedElement":{const s=n&&m(n).index(),r=n&&this._tabs._itemElements().eq(s);if(this._setTabsOption("focusedElement",se(r)),n){const o=this._isDisabled(n);this._toggleWrapperFocusedClass(!o),this._toggleDisabledFocusedClass(o)}this.callBase(t);break}case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",n);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",n);break;case"stylingMode":this._setTabsOption("stylingMode",n);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",n)}}});KS.ItemClass=nne;re("dxTabPanel",KS);class Sl{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){ze.abstract()}}const M0=(t,e)=>`${e?"tabs":"items"}[${t}]`,ZF=(t,e)=>M(t)&&M(e)?`${t}.${e}`:t||e,V0=t=>t?t.replace(/\s/g,""):void 0,sne=(t,e)=>t?t.dataField===e||t.name===e||V0(t.title)===e||t.itemType==="group"&&V0(t.caption)===e:!1,hd=(t,e)=>`${t}.${e}`,NR=t=>{const e=t.split(".");return e[e.length-1].replace(/\[\d+]/,"")},rne=t=>{const e=t.split("."),n=[...e];for(let i=e.length-1;i>=0;i--){if(QF(e[i]))return n.join(".");n.splice(i,1)}return""},QF=t=>t.indexOf("tabs")>-1,XF=(t,e,n)=>{const i=t.indexOf(e);if(i>-1)return M0(i,n);for(let s=0;s<t.length;s++){const r=t[s],o=r.tabs||r.items;if(o){const a=XF(o,e,r.tabs);if(a)return ZF(M0(s,n),a)}}};function one(t){let{form:e,$formElement:n,formOptions:i,items:s,validationGroup:r,extendedLayoutManagerOptions:o,onFieldDataChanged:a,onContentReady:l,onDisposing:c,onFieldItemRendered:u}=t;const d={form:e,items:s,$formElement:n,validationGroup:r,onFieldDataChanged:a,onContentReady:l,onDisposing:c,onFieldItemRendered:u,validationBoundary:i.scrollingEnabled?n:void 0,scrollingEnabled:i.scrollingEnabled,showRequiredMark:i.showRequiredMark,showOptionalMark:i.showOptionalMark,requiredMark:i.requiredMark,optionalMark:i.optionalMark,requiredMessage:i.requiredMessage,screenByWidth:i.screenByWidth,layoutData:i.formData,labelLocation:i.labelLocation,customizeItem:i.customizeItem,minColWidth:i.minColWidth,showColonAfterLabel:i.showColonAfterLabel,onEditorEnterKey:i.onEditorEnterKey,labelMode:i.labelMode};return T(d,{isRoot:o.isRoot,colCount:o.colCount,alignItemLabels:o.alignItemLabels,cssItemClass:o.cssItemClass,colCountByScreen:o.colCountByScreen,onLayoutChanged:o.onLayoutChanged,width:o.width})}class ane extends Sl{tryExecute(){const{value:e}=this._options,n=this.findInstance();return n?(n.option(e),!0):!1}}class zR extends Sl{tryExecute(){const e=this.findInstance();if(e){const{optionName:n,item:i,value:s}=this._options,r=this._itemsRunTimeInfo.findItemIndexByItem(i);if(r>=0)return e.option(hd(`items[${r}]`,n),s),!0}return!1}}class lne extends Sl{tryExecute(){return!1}}class cne extends Sl{tryExecute(){const e=this.findPreparedItem();return e!=null&&e._prepareGroupItemTemplate&&e._renderGroupContentTemplate?(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),!0):!1}}class une extends Sl{tryExecute(){const e=this.findInstance();if(e){const{value:n}=this._options;return e.option("dataSource",n),!0}return!1}}class dne extends Sl{tryExecute(){const{item:e}=this._options,n=this.findInstance(),i=n&&st(n.$element()[0],"dxValidator");if(i&&e){const s=a=>a.type==="required",r=(i.option("validationRules")||[]).some(s),o=(e.validationRules||[]).some(s);if(!r&&!o||r&&o)return i.option("validationRules",e.validationRules),!0}return!1}}class hne extends Sl{tryExecute(){const e=this.findItemContainer(),{previousValue:n,value:i}=this._options;return e?(e.removeClass(n).addClass(i),!0):!1}}const pne=(t,e)=>{switch(t){case"editorOptions":case"buttonOptions":return new ane(e);case"validationRules":return new dne(e);case"cssClass":return new hne(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new zR(T(e,{optionName:t}));case"tabs":return new une(e);case"template":{var n,i;const s=(e==null||(n=e.item)===null||n===void 0?void 0:n.itemType)??((i=e.itemsRunTimeInfo.findPreparedItemByItem(e==null?void 0:e.item))===null||i===void 0?void 0:i.itemType);return s==="simple"?new lne(e):s==="group"?new cne(e):new zR(T(e,{optionName:t}))}default:return null}},fne=["items","isRequired","validationRules","visible"],jS=Kt.inherit({_init(){this.callBase(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new KF,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions(){return T(this.callBase(),{formID:`dx-${new Et}`,formData:{},colCount:1,screenByWidth:gw,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:q.format("dxForm-optionalMark"),requiredMessage:q.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:Me().editorStylingMode,labelMode:"outside",isDirty:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>ii(),options:{labelLocation:"top"}},{device:()=>Un(),options:{showColonAfterLabel:!1}}])},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:t=>parseInt(t.attr(IR)),_applyLabelsWidthByCol(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=n.inOneColumn?HF:SR+e,s=n.excludeTabbed?`:not(.${ER})`:"";Fte(t,`.${i}${s}`)},_applyLabelsWidth(t,e,n,i,s){i=n?1:i||this._getGroupColCount(t);const r={excludeTabbed:e,inOneColumn:n};let o;for(o=0;o<i;o++)this._applyLabelsWidthByCol(t,o,r,s)},_getGroupElementsInColumn(t,e,n){const i=M(n)?`.${TR}${n}`:"",s=`.${SR}${e} > .${R0} > .${Zv}${i}`;return t.find(s)},_applyLabelsWidthWithGroups(t,e,n,i){if(this.option("alignRootItemLabels")===!0){const r=t.find(`.${WF}`);for(let o=0;o<e;o++)this._applyLabelsWidthByCol(r,o,n,i)}if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(t,e,n,i);else{const r=this.$element().find(`.${Zv}`);let o;for(o=0;o<r.length;o++)this._applyLabelsWidth(r.eq(o),n,void 0,void 0,i)}},_applyLabelsWidthWithNestedGroups(t,e,n,i){const s={excludeTabbed:n};let r,o,a,l;for(r=0;r<e;r++)for(l=this._getGroupElementsInColumn(t,r),this._applyLabelsWidthByCol(l,0,s,i),o=0;o<this._groupsColCount.length;o++){l=this._getGroupElementsInColumn(t,r,this._groupsColCount[o]);const c=this._getGroupColCount(l);for(a=1;a<c;a++)this._applyLabelsWidthByCol(l,a,s,i)}},_labelLocation(){return this.option("labelLocation")},_alignLabelsInColumn(t){let{layoutManager:e,inOneColumn:n,$container:i,excludeTabbed:s,items:r}=t;if(!ae()||this._labelLocation()==="top")return;const o=GF(e._getMarkOptions());n?this._applyLabelsWidth(i,s,!0,void 0,o):this._checkGrouping(r)?this._applyLabelsWidthWithGroups(i,e._getColCount(),s,o):this._applyLabelsWidth(i,s,!1,e._getColCount(),o)},_prepareFormData(){M(this.option("formData"))||this.option("formData",{})},_setStylingModeClass(){this.option("stylingMode")==="underlined"&&this.$element().addClass(Ete)},_initMarkup(){Qe.addGroup(this._getValidationGroup(),!1),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass(gte),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription(){if(ae()){const t=this.$element().get(0);Ka.unobserve(t),Ka.observe(t,()=>{this._resizeHandler()})}},_resizeHandler(){this._cachedLayoutManagers.length&&N(this._cachedLayoutManagers,(t,e)=>{var n;(n=e.option("onLayoutChanged"))===null||n===void 0||n(e.isSingleColumnMode())})},_getCurrentScreenFactor(){return ae()?oV(this.option("screenByWidth")):"lg"},_clearCachedInstances(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels(t,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:t,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),Ji(this.$element().find(`.${EL}`))},_clean(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,Ka.unobserve(this.$element().get(0))},_renderScrollable(){const t=this.option("useNativeScrolling");this._scrollable=new Qs(this.$element(),{useNative:!!t,useSimulatedScrollbar:!t,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent(){return this.option("scrollingEnabled")?m(this._scrollable.content()):this.$element()},_clearValidationSummary(){var t;(t=this._$validationSummary)===null||t===void 0||t.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=m("<div>").addClass(bte).appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(t,e,n,i){if(t){const s=[];for(let r=0;r<t.length;r++){let o=t[r];const a=ZF(n,M0(r,i)),l={item:o,itemIndex:r,path:a},c=this._itemsRunTimeInfo.add(l);if(ve(o)&&(o={dataField:o}),ue(o)){const u=L({},o);l.preparedItem=u,u.guid=c,this._tryPrepareGroupItemCaption(u),this._tryPrepareGroupItem(u),this._tryPrepareTabbedItem(u,a),this._tryPrepareItemTemplate(u),e&&(u.cssItemClass=ER),u.items&&(u.items=this._prepareItems(u.items,e,a)),s.push(u)}else s.push(o)}return s}},_tryPrepareGroupItemCaption(t){t.itemType==="group"&&(t._prepareGroupCaptionTemplate=e=>{t.captionTemplate&&(t.groupCaptionTemplate=this._getTemplate(e)),t.captionTemplate=this._itemGroupTemplate.bind(this,t)},t._prepareGroupCaptionTemplate(t.captionTemplate))},_tryPrepareGroupItem(t){t.itemType==="group"&&(t.alignItemLabels=rt(t.alignItemLabels,!0),t._prepareGroupItemTemplate=e=>{t.template&&(t.groupContentTemplate=this._getTemplate(e)),t.template=this._itemGroupTemplate.bind(this,t)},t._prepareGroupItemTemplate(t.template))},_tryPrepareTabbedItem(t,e){t.itemType==="tabbed"&&(t.template=this._itemTabbedTemplate.bind(this,t),t.tabs=this._prepareItems(t.tabs,!0,e,!0))},_tryPrepareItemTemplate(t){t.template&&(t.template=this._getTemplate(t.template))},_checkGrouping(t){if(t){for(let e=0;e<t.length;e++)if(t[e].itemType==="group")return!0}},_renderLayout(){const t=this;let e=t.option("items");const n=t._getContent();e=t._prepareItems(e),t._rootLayoutManager=t._renderLayoutManager(n,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:t.option("colCount"),alignItemLabels:t.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged(i){t._alignLabels.bind(t)(t._rootLayoutManager,i)},onContentReady(i){t._alignLabels(i.component,i.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:t=>t.items||[],_itemTabbedTemplate(t,e,n){const i=m("<div>").appendTo(n),s=T({},t.tabPanelOptions,{dataSource:t.tabs,onItemRendered:a=>{var l,c;(l=t.tabPanelOptions)===null||l===void 0||(c=l.onItemRendered)===null||c===void 0||c.call(l,a),Aw(a.itemElement)},itemTemplate:(a,l,c)=>{const u=m(c),d=rt(a.alignItemLabels,!0),p=this._renderLayoutManager(u,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(a),{colCount:a.colCount,alignItemLabels:d,screenByWidth:this.option("screenByWidth"),colCountByScreen:a.colCountByScreen,cssItemClass:a.cssItemClass,onLayoutChanged:f=>{this._alignLabelsInColumn({$container:u,layoutManager:p,items:a.items,inOneColumn:f})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(a.guid,{layoutManager:p}),d&&this._alignLabelsInColumn({$container:u,layoutManager:p,items:a.items,inOneColumn:p.isSingleColumnMode()})}}),r=(a,l)=>{Array.isArray(a)&&a.forEach(c=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(c.guid,{widgetInstance:l}))},o=this._createComponent(i,KS,s);m(n).parent().addClass(wte),o.on("optionChanged",a=>{a.fullName==="dataSource"&&r(a.value,a.component)}),r([{guid:t.guid},...t.tabs??[]],o)},_itemGroupCaptionTemplate(t,e,n){if(t.groupCaptionTemplate){const i=m("<div>").addClass(yte).attr("id",n).appendTo(e);t._renderGroupCaptionTemplate=()=>{const s={component:this,caption:t.caption,name:t.name};t.groupCaptionTemplate.render({model:s,container:se(i)})},t._renderGroupCaptionTemplate();return}t.caption&&m("<span>").addClass(_te).text(t.caption).attr("id",n).appendTo(e)},_itemGroupContentTemplate(t,e){const n=m("<div>").addClass(Dte).appendTo(e);if(t.groupContentTemplate)t._renderGroupContentTemplate=()=>{n.empty();const i={formData:this.option("formData"),component:this};t.groupContentTemplate.render({model:i,container:se(n)})},t._renderGroupContentTemplate();else{const i=this._renderLayoutManager(n,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(t),{colCount:t.colCount,colCountByScreen:t.colCountByScreen,alignItemLabels:t.alignItemLabels,cssItemClass:t.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(t.guid,{layoutManager:i});const s=i._getColCount();this._groupsColCount.includes(s)||this._groupsColCount.push(s),e.addClass(TR+s),e.attr(IR,s)}},_itemGroupTemplate(t,e,n){const{id:i}=e.editorOptions.inputAttr,s=m("<div>").toggleClass(Ste,M(t.caption)&&t.caption.length).addClass(Zv).appendTo(n),r={role:"group",labelledby:i};this.setAria(r,s),m(n).parent().addClass(xte),this._itemGroupCaptionTemplate(t,s,i),this._itemGroupContentTemplate(t,s)},_createLayoutManagerOptions(t,e){return one({form:this,formOptions:this.option(),$formElement:this.$element(),items:t,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:n=>{this._isDataUpdating||this._triggerOnFieldDataChanged(n)},onContentReady:n=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(n.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(n)},onDisposing:n=>{let{component:i}=n;const s=i.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(s)},onFieldItemRendered:()=>{var n;(n=this._validationSummary)===null||n===void 0||n.refreshValidationGroup()}})},_renderLayoutManager(t,e){const n={lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:T(n,e.colCountByScreen)});const i=m("<div>");i.appendTo(t);const s=this._createComponent(i,"dxLayoutManager",e);return s.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(s),s},_getValidationGroup(){return this.option("validationGroup")||this},_createComponent(t,e,n){return n=n||{},this._extendConfig(n,{readOnly:this.option("readOnly")}),this.callBase(t,e,n)},_attachSyncSubscriptions(){const t=this;t.on("optionChanged",e=>{const n=e.fullName;n==="formData"&&(M(e.value)||t._options.silent("formData",e.value={}),t._triggerOnFieldDataChangedByDataSet(e.value)),t._cachedLayoutManagers.length&&N(t._cachedLayoutManagers,(i,s)=>{n==="formData"&&(t._isDataUpdating=!0,s.option("layoutData",e.value),t._isDataUpdating=!1),(e.name==="readOnly"||e.name==="disabled")&&s.option(n,e.value)})})},_optionChanged(t){const e=t.fullName.split(".");e.length>1&&e[0].search("items")!==-1&&this._itemsOptionChangedHandler(t)||e.length>1&&e[0].search("formData")!==-1&&this._formDataOptionChangedHandler(t)||this._defaultOptionChangedHandler(t)},_defaultOptionChangedHandler(t){switch(t.name){case"formData":this.option("items")?ti(t.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":this.option("colCount")==="auto"&&this._invalidate();break;case"width":this.callBase(t),this._rootLayoutManager.option(t.name,t.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":Qe.removeGroup(t.previousValue||this),this._invalidate();break;default:this.callBase(t)}},_itemsOptionChangedHandler(t){const e=t.fullName.split("."),{value:n}=t,i=this._getItemPath(e),s=this.option(i),r=t.fullName.replace(`${i}.`,""),o=r.split(".")[0].replace(/\[\d+]/,""),a=this._tryCreateItemOptionAction(o,s,s[o],t.previousValue,i);let l=this._tryExecuteItemOptionAction(a)||this._tryChangeLayoutManagerItemOption(t.fullName,n);if(!l&&s){this._changeItemOption(s,r,n);const c=this._generateItemsFromData(this.option("items"));this.option("items",c),l=!0}return l},_formDataOptionChangedHandler(t){const e=t.fullName.split("."),{value:n}=t,i=e.slice(1).join("."),s=this.getEditor(i);return s?s.option("value",n):this._triggerOnFieldDataChanged({dataField:i,value:n}),!0},_tryCreateItemOptionAction(t,e,n,i,s){return t==="tabs"&&(this._itemsRunTimeInfo.removeItemsByPathStartWith(`${s}.tabs`),n=this._prepareItems(n,!0,s,!0)),pne(t,{item:e,value:n,previousValue:i,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:t=>t&&t.tryExecute(),_updateValidationGroupAndSummaryIfNeeded(t){const e=NR(t);if(fne.includes(e)&&(Qe.addGroup(this._getValidationGroup(),!1),this.option("showValidationSummary"))){var n;(n=this._validationSummary)===null||n===void 0||n.refreshValidationGroup()}},_setLayoutManagerItemOption(t,e,n,i){if(this._updateLockCount>0){!t._updateLockCount&&t.beginUpdate();const r=this._itemsRunTimeInfo.findKeyByPath(i);this.postponedOperations.add(r,()=>(!t._disposed&&t.endUpdate(),j().resolve()))}const s=r=>{if(r.component.off("contentReady",s),QF(i)){const o=rne(i),a=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);a&&this._alignLabelsInColumn({items:a.option("items"),layoutManager:a,$container:a.$element(),inOneColumn:a.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};t.on("contentReady",s),t.option(e,n),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(t,e){const n=t.split("."),i=NR(t);if(i==="items"&&n.length>1){const s=this._getItemPath(n),r=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(s);if(r){this._itemsRunTimeInfo.removeItemsByItems(r.getItemsRunTimeInfo());const o=this._prepareItems(e,!1,s);return this._setLayoutManagerItemOption(r,i,o,s),!0}}else if(n.length>2){const s=n.length-2,r=this._getItemPath(n.slice(0,s)),o=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(r);if(o){const a=hd(n[s],i);if(i==="editorType"&&o.option(a)!==e)return!1;if(i==="visible"){const l=this.option(hd(r,"items"));if(l&&l.length){const c=o.option("items");l.forEach((u,d)=>{const p=c[d];p.visibleIndex=u.visibleIndex})}}return this._setLayoutManagerItemOption(o,a,e,r),!0}}return!1},_tryChangeLayoutManagerItemOptions(t,e){let n;return this.beginUpdate(),N(e,(i,s)=>{if(n=this._tryChangeLayoutManagerItemOption(hd(t,i),s),!n)return!1}),this.endUpdate(),n},_getItemPath(t){let e=t[0],n;for(n=1;n<t.length&&t[n].search(/items\[\d+]|tabs\[\d+]/)!==-1;n++)e+=`.${t[n]}`;return e},_triggerOnFieldDataChanged(t){this._updateIsDirty(t.dataField),this._createActionByOption("onFieldDataChanged")(t)},_triggerOnFieldDataChangedByDataSet(t){t&&ue(t)&&Object.keys(t).forEach(e=>{this._triggerOnFieldDataChanged({dataField:e,value:t[e]})})},_updateFieldValue(t,e){if(M(this.option("formData"))){const n=this.getEditor(t);this.option(`formData.${t}`,e),n&&n.option("value")!==e&&n.option("value",e)}},_generateItemsFromData(t){const e=this.option("formData"),n=[];return!t&&M(e)&&N(e,i=>{n.push({dataField:i})}),t&&N(t,(i,s)=>{ue(s)?n.push(s):n.push({dataField:s})}),n},_getItemByField(t,e){const n=this,i=ue(t)?t:n._getFieldParts(t),{fieldName:s}=i,{fieldPath:r}=i;let o;return e.length&&N(e,(a,l)=>{const{itemType:c}=l;if(r.length){const u=r.slice();l=n._getItemByFieldPath(u,s,l)}else if(c==="group"&&!(l.caption||l.name)||c==="tabbed"&&!l.name){const u=n._getSubItemField(c);l.items=n._generateItemsFromData(l.items),l=n._getItemByField({fieldName:s,fieldPath:r},l[u])}if(sne(l,s))return o=l,!1}),o},_getFieldParts(t){let e=t,n=e.indexOf(".");const i=[];for(;n!==-1;)i.push(e.substr(0,n)),e=e.substr(n+1),n=e.indexOf(".");return{fieldName:e,fieldPath:i.reverse()}},_getItemByFieldPath(t,e,n){const i=this,{itemType:s}=n,r=i._getSubItemField(s),o=s==="group"||s==="tabbed"||n.title;let a;do if(o){const l=n.name||n.caption||n.title,c=M(l),u=V0(l);let d;if(n[r]=i._generateItemsFromData(n[r]),c&&(d=t.pop()),!t.length&&(a=i._getItemByField(e,n[r]),a))break;(!c||c&&u===d)&&t.length&&(a=i._searchItemInEverySubItem(t,e,n[r]))}else break;while(t.length&&!M(a));return a},_getSubItemField:t=>t==="tabbed"?"tabs":"items",_searchItemInEverySubItem(t,e,n){const i=this;let s;return N(n,(r,o)=>{if(s=i._getItemByFieldPath(t.slice(),e,o),s)return!1}),s||(s=!1),s},_changeItemOption(t,e,n){ue(t)&&(t[e]=n)},_dimensionChanged(){const t=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==t&&(this._isColCountChanged(this._lastMarkupScreenFactor,t)&&(this._targetScreenFactor=t,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=t)},_isColCountChanged(t,e){let n=!1;return N(this._cachedColCountOptions,(i,s)=>{if(s.colCountByScreen[t]!==s.colCountByScreen[e])return n=!0,!1}),n},_refresh(){b.trigger(this.$element().find(".dx-state-focused > :not(.dx-dropdowneditor-input-wrapper) input, .dx-state-focused textarea"),"change"),this.callBase()},_updateIsDirty(t){const e=this.getEditor(t);e&&(e.option("isDirty")?this._dirtyFields.add(t):this._dirtyFields.delete(t),this.option("isDirty",!!this._dirtyFields.size))},updateRunTimeInfoForEachEditor(t){this._itemsRunTimeInfo.each((e,n)=>{const{widgetInstance:i}=n;M(i)&&Fi.isEditor(i)&&t(i)})},_clear(){this.updateRunTimeInfoForEachEditor(t=>{t.clear(),t.option("isValid",!0)}),Qe.resetGroup(this._getValidationGroup())},_updateData(t,e,n){const i=this,s=n?e:t;ue(s)?N(s,(r,o)=>{i._updateData(n?`${t}.${r}`:r,o,ue(o))}):ve(t)&&i._updateFieldValue(t,e)},registerKeyHandler(t,e){this.callBase(t,e),this._itemsRunTimeInfo.each((n,i)=>{M(i.widgetInstance)&&i.widgetInstance.registerKeyHandler(t,e)})},_focusTarget(){return this.$element().find(`.${R0} [tabindex]`).first()},_visibilityChanged(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose(){this._clearAutoColCountChangedTimeout(),Qe.removeGroup(this._getValidationGroup()),this.callBase()},clear(){this._clear()},resetValues(){this._clear()},reset(t){this.updateRunTimeInfoForEachEditor(e=>{const n=e.option("name");t&&n in t?e.reset(t[n]):e.reset()}),this._renderValidationSummary()},updateData(t,e){this._updateData(t,e)},getEditor(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},getButton(t){return this._itemsRunTimeInfo.findWidgetInstanceByName(t)},updateDimensions(){const t=this,e=j();return t._scrollable?t._scrollable.update().done(()=>{e.resolveWith(t)}):e.resolveWith(t),e.promise()},itemOption(t,e,n){const i=this._generateItemsFromData(this.option("items")),s=this._getItemByField(t,i),r=XF(i,s);if(s)switch(arguments.length){case 1:return s;case 3:{const o=this._tryCreateItemOptionAction(e,s,n,s[e],r);this._changeItemOption(s,e,n);const a=hd(r,e);!this._tryExecuteItemOptionAction(o)&&!this._tryChangeLayoutManagerItemOption(a,n)&&this.option("items",i);break}default:if(ue(e)&&!this._tryChangeLayoutManagerItemOptions(r,e)){let o;N(e,(a,l)=>{const c=this._tryCreateItemOptionAction(a,s,l,s[a],r);this._changeItemOption(s,a,l),!o&&!this._tryExecuteItemOptionAction(c)&&(o=!0)}),o&&this.option("items",i)}}},validate(){return Qe.validateGroup(this._getValidationGroup())},getItemID(t){return`dx_${this.option("formID")}_${t||new Et}`},getTargetScreenFactor(){return this._targetScreenFactor}});re("dxForm",jS);const mne="dx-recurrence-editor",gne="dx-recurrence-editor-container",Ca="dx-recurrence-repeat-end",_ne="dx-recurrence-radiogroup-repeat-type",yne="dx-recurrence-numberbox-repeat-count",vne="dx-recurrence-datebox-until-date",Cne="dx-recurrence-button-group",WR="dx-recurrence-selectbox-freq",eC="dx-recurrence-numberbox-interval",GR="dx-recurrence-repeat-on",Dne="dx-recurrence-numberbox-day-of-month",xne="dx-recurrence-selectbox-month-of-year",fm=[{recurrence:"dxScheduler-recurrenceHourly",value:"hourly"},{recurrence:"dxScheduler-recurrenceDaily",value:"daily"},{recurrence:"dxScheduler-recurrenceWeekly",value:"weekly"},{recurrence:"dxScheduler-recurrenceMonthly",value:"monthly"},{recurrence:"dxScheduler-recurrenceYearly",value:"yearly"}],wne=fm.map(t=>({text:()=>q.format(t.recurrence),value:t.value})),Sne=[{type:"never"},{type:"until"},{type:"count"}],ed=["SU","MO","TU","WE","TH","FR","SA"],Ul=()=>qn(xi())?"filled":void 0;class bne{constructor(e){this._recurrenceProcessor=ks(),this._recurrenceProcessor=ks(),this._recurrenceRule=this._recurrenceProcessor.evalRecurrenceRule(e).rule}makeRules(e){this._recurrenceRule=this._recurrenceProcessor.evalRecurrenceRule(e).rule}makeRule(e,n){if(!n||Array.isArray(n)&&!n.length){delete this._recurrenceRule[e];return}M(e)&&(e==="until"&&delete this._recurrenceRule.count,e==="count"&&delete this._recurrenceRule.until,this._recurrenceRule[e]=n)}getRepeatEndRule(){const e=this._recurrenceRule;return"count"in e?"count":"until"in e?"until":"never"}getRecurrenceString(){return this._recurrenceProcessor.getRecurrenceString(this._recurrenceRule)}getRules(){return this._recurrenceRule}getDaysFromByDayRule(){return this._recurrenceProcessor.daysFromByDayRule(this._recurrenceRule)}}class Ene extends Fi{_getDefaultOptions(){const e=super._getDefaultOptions();return T(e,{value:null,startDate:new Date,firstDayOfWeek:void 0})}_getFirstDayOfWeek(){const e=this.option("firstDayOfWeek");return M(e)?e:ee.firstDayOfWeekIndex()}_createComponent(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._extendConfig(i,{readOnly:this.option("readOnly")}),super._createComponent(e,n,i)}_init(){super._init(),this._recurrenceRule=new bne(this.option("value"))}_render(){super._render(),this.$element().addClass(mne),this._$container=m("<div>").addClass(gne).appendTo(this.$element()),this._prepareEditors(),this._renderEditors(this._$container)}getEditorByField(e){let n=this.getRecurrenceForm().getEditor(e);if(!M(n))switch(e){case"byday":n=this._weekEditor;break;case"count":n=this._repeatCountEditor;break;case"until":n=this._repeatUntilDate}return n}_prepareEditors(){const e=(this._recurrenceRule.getRules().freq||fm[1].value).toLowerCase();return this._editors=[this._createFreqEditor(e),this._createIntervalEditor(e),this._createRepeatOnLabel(e),{itemType:"group",cssClass:GR,colCount:2,colCountByScreen:{xs:2},items:this._createRepeatOnEditor(e)},{itemType:"group",items:this._createRepeatEndEditor()}],this._editors}_createFreqEditor(e){return{dataField:"freq",name:"FREQ",editorType:"dxSelectBox",cssClass:WR,editorOptions:{stylingMode:Ul(),items:wne,value:e,field:"freq",valueExpr:"value",displayExpr:"text",layout:"horizontal",elementAttr:{class:WR},onValueChanged:n=>this._valueChangedHandler(n)},label:{text:q.format("dxScheduler-editorLabelRecurrence")}}}_createIntervalEditor(e){const n=this._recurrenceRule.getRules().interval||1;return{itemType:"group",colCount:2,cssClass:`${eC}-wrapper`,colCountByScreen:{xs:2},items:[{dataField:"interval",editorType:"dxNumberBox",editorOptions:{stylingMode:Ul(),format:"#",width:70,min:1,field:"interval",value:n,showSpinButtons:!0,useLargeSpinButtons:!1,elementAttr:{class:eC},onValueChanged:i=>this._valueChangedHandler(i)},label:{text:q.format("dxScheduler-recurrenceRepeatEvery")}},{name:"intervalLabel",cssClass:`${eC}-label`,template:()=>q.format(`dxScheduler-recurrenceRepeat${e.charAt(0).toUpperCase()}${e.substr(1).toLowerCase()}`)}]}}_createRepeatOnLabel(e){return{itemType:"group",cssClass:`${GR}-label`,items:[{name:"repeatOnLabel",colSpan:2,template:()=>q.format("dxScheduler-recurrenceRepeatOn"),visible:e&&e!=="daily"&&e!=="hourly"}]}}_createRepeatOnEditor(e){return[this._createByDayEditor(e),this._createByMonthEditor(e),this._createByMonthDayEditor(e)]}_createByDayEditor(e){return{dataField:"byday",colSpan:2,template:(n,i)=>{const s=this._getFirstDayOfWeek(),r=this._daysOfWeekByRules(),o=ee.getDayNames("abbreviated"),a=ed.slice(s).concat(ed.slice(0,s)),l=o.slice(s).concat(o.slice(0,s)).map((c,u)=>({text:c,key:a[u]}));this._$repeatOnWeek=m("<div>").addClass(Cne).appendTo(i),this._weekEditor=this._createComponent(this._$repeatOnWeek,IS,{items:l,field:"byday",selectionMode:"multiple",selectedItemKeys:r,keyExpr:"key",onSelectionChanged:c=>{const u=c.component.option("selectedItemKeys"),d=u!=null&&u.length?u:this._getDefaultByDayValue();this._recurrenceRule.makeRule("byday",d),this._changeEditorValue()}})},visible:e==="weekly",label:{visible:!1}}}_createByMonthEditor(e){const n=ee.getMonthNames("wide"),i=[...Array(12)].map((s,r)=>({value:`${r+1}`,text:n[r]}));return{dataField:"bymonth",editorType:"dxSelectBox",editorOptions:{stylingMode:Ul(),field:"bymonth",items:i,value:this._monthOfYearByRules(),width:120,displayExpr:"text",valueExpr:"value",elementAttr:{class:xne},onValueChanged:s=>this._valueChangedHandler(s)},visible:e==="yearly",label:{visible:!1}}}_createByMonthDayEditor(e){return{dataField:"bymonthday",editorType:"dxNumberBox",editorOptions:{stylingMode:Ul(),min:1,max:31,format:"#",width:70,field:"bymonthday",showSpinButtons:!0,useLargeSpinButtons:!1,value:this._dayOfMonthByRules(),elementAttr:{class:Dne},onValueChanged:n=>this._valueChangedHandler(n)},visible:e==="monthly"||e==="yearly",label:{visible:!1}}}_createRepeatEndEditor(){const e=this._recurrenceRule.getRepeatEndRule();return[{dataField:"repeatEnd",editorType:"dxRadioGroup",editorOptions:{items:Sne,value:e,valueExpr:"type",field:"repeatEnd",itemTemplate:n=>n.type==="count"?this._renderRepeatCountEditor():n.type==="until"?this._renderRepeatUntilEditor():this._renderDefaultRepeatEnd(),layout:"vertical",elementAttr:{class:_ne},onValueChanged:n=>this._repeatEndValueChangedHandler(n)},label:{text:q.format("dxScheduler-recurrenceEnd")}}]}_renderEditors(e){this._recurrenceForm=this._createComponent(e,jS,{items:this._editors,showValidationSummary:!1,scrollingEnabled:!0,showColonAfterLabel:!1,labelLocation:"top"}),this._disableRepeatEndParts()}_setAriaDescribedBy(e,n){const i=`label-${new Et}`;e.setAria("describedby",i),e.setAria("id",i,n)}getRecurrenceForm(){return this._recurrenceForm}changeValueByVisibility(e){e?this.option("value")||this._handleDefaults():(this._recurrenceRule.makeRules(""),this.option("value",""))}_handleDefaults(){this._recurrenceRule.makeRule("freq",fm[1].value),this._changeEditorValue()}_changeEditorValue(){this.option("value",this._recurrenceRule.getRecurrenceString()||"")}_daysOfWeekByRules(){let e=this._recurrenceRule.getDaysFromByDayRule();return e.length||(e=this._getDefaultByDayValue()),e}_getDefaultByDayValue(){const n=this.option("startDate").getDay();return[ed[n]]}_dayOfMonthByRules(){let e=this._recurrenceRule.getRules().bymonthday;return e||(e=this.option("startDate").getDate()),e}_monthOfYearByRules(){let e=this._recurrenceRule.getRules().bymonth;return e||(e=this.option("startDate").getMonth()+1),String(e)}_renderDefaultRepeatEnd(){const e=m("<div>").addClass(Ca+"-wrapper");return m("<div>").text(q.format("dxScheduler-recurrenceNever")).addClass(Ca+"-label").appendTo(e),e}_repeatEndValueChangedHandler(e){const{value:n}=e;this._disableRepeatEndParts(n),n==="until"&&this._recurrenceRule.makeRule(n,this._getUntilValue()),n==="count"&&this._recurrenceRule.makeRule(n,this._repeatCountEditor.option("value")),n==="never"&&(this._recurrenceRule.makeRule("count",""),this._recurrenceRule.makeRule("until","")),this._changeEditorValue()}_disableRepeatEndParts(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._recurrenceRule.getRepeatEndRule();e==="until"&&(this._repeatCountEditor.option("disabled",!0),this._repeatUntilDate.option("disabled",!1)),e==="count"&&(this._repeatCountEditor.option("disabled",!1),this._repeatUntilDate.option("disabled",!0)),e==="never"&&(this._repeatCountEditor.option("disabled",!0),this._repeatUntilDate.option("disabled",!0))}_renderRepeatCountEditor(){const e=this._recurrenceRule.getRules().count||1,n=m("<div>").addClass(Ca+"-wrapper");return m("<div>").text(q.format("dxScheduler-recurrenceAfter")).addClass(Ca+"-label").appendTo(n),this._$repeatCountEditor=m("<div>").addClass(yne).appendTo(n),m("<div>").text(q.format("dxScheduler-recurrenceRepeatCount")).addClass(Ca+"-label").appendTo(n),this._repeatCountEditor=this._createComponent(this._$repeatCountEditor,xg,{stylingMode:Ul(),field:"count",format:"#",width:70,min:1,showSpinButtons:!0,useLargeSpinButtons:!1,value:e,onValueChanged:this._repeatCountValueChangeHandler.bind(this)}),n}_repeatCountValueChangeHandler(e){if(this._recurrenceRule.getRepeatEndRule()==="count"){const{value:n}=e;this._recurrenceRule.makeRule("count",n),this._changeEditorValue()}}_formatUntilDate(e){return this._recurrenceRule.getRules().until&&V.sameDate(this._recurrenceRule.getRules().until,e)?e:V.setToDayEnd(e)}_renderRepeatUntilEditor(){const e=this._getUntilValue(),n=m("<div>").addClass(Ca+"-wrapper");return m("<div>").text(q.format("dxScheduler-recurrenceOn")).addClass(Ca+"-label").appendTo(n),this._$repeatDateEditor=m("<div>").addClass(vne).appendTo(n),this._repeatUntilDate=this._createComponent(this._$repeatDateEditor,$F,{stylingMode:Ul(),field:"until",value:e,type:"date",onValueChanged:this._repeatUntilValueChangeHandler.bind(this),calendarOptions:{firstDayOfWeek:this._getFirstDayOfWeek()},useMaskBehavior:!0}),n}_repeatUntilValueChangeHandler(e){if(this._recurrenceRule.getRepeatEndRule()==="until"){const n=this._formatUntilDate(new Date(e.value)),s=this.option("getStartDateTimeZone")(),r=s?Gs.fromAppointmentToSource:Gs.fromGridToSource,o=this.option("timeZoneCalculator").createDate(n,{path:r,appointmentTimeZone:s});this._recurrenceRule.makeRule("until",o),this._changeEditorValue()}}_valueChangedHandler(e){const{value:n,previousValue:i}=e,s=e.component.option("field");this.option("visible")?(this._recurrenceRule.makeRule(s,n),s==="freq"&&(this._makeRepeatOnRule(n),this._changeRepeatOnVisibility(n,i)),this._changeEditorValue()):this.option("value","")}_makeRepeatOnRule(e){(e==="daily"||e==="hourly")&&(this._recurrenceRule.makeRule("byday",""),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("bymonthday","")),e==="weekly"&&(this._recurrenceRule.makeRule("byday",this._daysOfWeekByRules()),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("bymonthday","")),e==="monthly"&&(this._recurrenceRule.makeRule("bymonthday",this._dayOfMonthByRules()),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("byday","")),e==="yearly"&&(this._recurrenceRule.makeRule("bymonthday",this._dayOfMonthByRules()),this._recurrenceRule.makeRule("bymonth",this._monthOfYearByRules()),this._recurrenceRule.makeRule("byday",""))}_optionChanged(e){var n,i,s,r;switch(e.name){case"readOnly":(n=this._recurrenceForm)===null||n===void 0||n.option("readOnly",e.value),(i=this._repeatCountEditor)===null||i===void 0||i.option("readOnly",e.value),(s=this._weekEditor)===null||s===void 0||s.option("readOnly",e.value),(r=this._repeatUntilDate)===null||r===void 0||r.option("readOnly",e.value),super._optionChanged(e);break;case"value":this._recurrenceRule.makeRules(e.value),this._changeRepeatIntervalLabel(),this._disableRepeatEndParts(),this._changeEditorsValue(this._recurrenceRule.getRules()),super._optionChanged(e);break;case"startDate":this._makeRepeatOnRule(this._recurrenceRule.getRules().freq),M(this._recurrenceRule.getRecurrenceString())&&this._changeEditorValue();break;case"firstDayOfWeek":if(this._weekEditor){const o=ee.getDayNames("abbreviated"),a=ed.slice(e.value).concat(ed.slice(0,e.value)),l=o.slice(e.value).concat(o.slice(0,e.value)).map((c,u)=>({text:c,key:a[u]}));this._weekEditor.option("items",l)}this._$repeatDateEditor&&this._repeatUntilDate.option("calendarOptions.firstDayOfWeek",this._getFirstDayOfWeek());break;default:super._optionChanged(e)}}_changeRepeatOnVisibility(e,n){e!==n&&(this._recurrenceForm.itemOption("byday","visible",!1),this._recurrenceForm.itemOption("bymonthday","visible",!1),this._recurrenceForm.itemOption("bymonth","visible",!1),this._recurrenceForm.itemOption("repeatOnLabel","visible",e&&e!=="daily"&&e!=="hourly"),e==="weekly"&&this._recurrenceForm.itemOption("byday","visible",!0),e==="monthly"&&this._recurrenceForm.itemOption("bymonthday","visible",!0),e==="yearly"&&(this._recurrenceForm.itemOption("bymonthday","visible",!0),this._recurrenceForm.itemOption("bymonth","visible",!0)))}_changeRepeatIntervalLabel(){const{freq:e}=this._recurrenceRule.getRules();e&&this._recurrenceForm.itemOption("intervalLabel","template",q.format(`dxScheduler-recurrenceRepeat${e.charAt(0).toUpperCase()}${e.substr(1).toLowerCase()}`))}_changeEditorsValue(e){this._recurrenceForm.getEditor("freq").option("value",(e.freq||fm[1].value).toLowerCase()),this._changeDayOfWeekValue(),this._changeDayOfMonthValue(),this._changeMonthOfYearValue(),this._changeIntervalValue(e.interval),this._changeRepeatCountValue(),this._changeRepeatEndValue(),this._changeRepeatUntilValue()}_changeIntervalValue(e){this._recurrenceForm.getEditor("interval").option("value",e||1)}_changeRepeatEndValue(){const e=this._recurrenceRule.getRepeatEndRule();this._recurrenceForm.getEditor("repeatEnd").option("value",e)}_changeDayOfWeekValue(){if(this._recurrenceForm.itemOption("byday").visible){const n=this._daysOfWeekByRules();this.getEditorByField("byday").option("selectedItemKeys",n)}}_changeDayOfMonthValue(){if(this._recurrenceForm.itemOption("bymonthday").visible){const n=this._dayOfMonthByRules();this._recurrenceForm.getEditor("bymonthday").option("value",n)}}_changeMonthOfYearValue(){if(this._recurrenceForm.itemOption("bymonth").visible){const n=this._monthOfYearByRules();this._recurrenceForm.getEditor("bymonth").option("value",n)}}_changeRepeatCountValue(){const e=this._recurrenceRule.getRules().count||1;this._repeatCountEditor.option("value",e)}_changeRepeatUntilValue(){this._repeatUntilDate.option("value",this._getUntilValue())}_getUntilValue(){const e=this._recurrenceRule.getRules().until;if(!e)return this._formatUntilDate(new Date);const i=this.option("getStartDateTimeZone")(),s=i?Gs.fromSourceToAppointment:Gs.fromSourceToGrid;return this.option("timeZoneCalculator").createDate(e,{path:s,appointmentTimeZone:i})}toggle(){this._freqEditor.focus()}setAria(){this._switchEditor&&this._switchEditor.setAria(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}re("dxRecurrenceEditor",Ene);const qS=function(t,e,n){const i=m(t),s=n?i.scrollLeft():i.scrollTop(),r=n?"Width":"Height",o=i.prop(`scroll${r}`),a=i.prop(`client${r}`),l=o-a-s|0;if(s===0&&l===0)return!1;const c=s===0&&e>=0,u=l===0&&e<=0,d=s>0&&l>0;if(c||u||d)return!0},Tne=function(t,e){const n=m(t);return{validate(i){if(Wn(i)&&(s=i.target,m(s).is(t)))return qS(n,-i.delta,i.shiftKey)?(i._needSkipEvent=!0,!0):!1;var s}}},Ine=kS.inherit({_getDefaultOptions(){return T(this.callBase(),{spellcheck:!0,minHeight:void 0,maxHeight:void 0,autoResizeEnabled:!1})},_initMarkup(){this.$element().addClass("dx-textarea"),this.callBase(),this.setAria("multiline","true")},_renderContentImpl(){this._updateInputHeight(),this.callBase()},_renderInput(){this.callBase(),this._renderScrollHandler()},_createInput(){const t=m("<textarea>");return this._applyInputAttributes(t,this.option("inputAttr")),this._updateInputAutoResizeAppearance(t),t},_setInputMinHeight:B,_renderScrollHandler(){this._eventY=0;const t=this._input(),e=Tne(t);b.on(t,K(Ea.init,this.NAME),e,B),b.on(t,K(ot.down,this.NAME),this._pointerDownHandler.bind(this)),b.on(t,K(ot.move,this.NAME),this._pointerMoveHandler.bind(this))},_pointerDownHandler(t){this._eventY=At(t).y},_pointerMoveHandler(t){const e=At(t).y,n=this._eventY-e;qS(this._input(),n)&&(t.isScrollingEvent=!0,t.stopPropagation()),this._eventY=e},_renderDimensions(){const t=this.$element(),e=t.get(0),n=this._getOptionValue("width",e),i=this._getOptionValue("height",e),s=this.option("minHeight"),r=this.option("maxHeight");t.css({minHeight:s!==void 0?s:"",maxHeight:r!==void 0?r:"",width:n,height:i})},_resetDimensions(){this.$element().css({height:"",minHeight:"",maxHeight:""})},_renderEvents(){this.option("autoResizeEnabled")&&b.on(this._input(),K("input paste",this.NAME),this._updateInputHeight.bind(this)),this.callBase()},_refreshEvents(){b.off(this._input(),K("input paste",this.NAME)),this.callBase()},_getHeightDifference(t){return Ac(this._$element.get(0),!1)+Ac(this._$textEditorContainer.get(0),!1)+Ac(this._$textEditorInputContainer.get(0),!0)+ww("height",pe().getComputedStyle(t.get(0))).margin},_updateInputHeight(){if(!ae())return;const t=this._input(),e=this.option("height"),n=e===void 0&&this.option("autoResizeEnabled");if(!(n||e===void 0&&this.option("minHeight"))){t.css("height","");return}this._resetDimensions(),this._$element.css("height",tt(this._$element)),t.css("height",0);const s=this._getHeightDifference(t);this._renderDimensions();const r=this._getBoundaryHeight("minHeight"),o=this._getBoundaryHeight("maxHeight");let a=t[0].scrollHeight;if(r!==void 0&&(a=Math.max(a,r-s)),o!==void 0){const l=o-s,c=a>l;a=Math.min(a,l),this._updateInputAutoResizeAppearance(t,!c)}t.css("height",a),n&&this._$element.css("height","auto")},_getBoundaryHeight(t){const e=this.option(t);if(M(e))return typeof e=="number"?e:vV(e,this.$element().get(0).parentElement,this._$element.get(0))},_renderInputType:B,_visibilityChanged(t){t&&this._updateInputHeight()},_updateInputAutoResizeAppearance(t,e){if(t){const n=rt(e,this.option("autoResizeEnabled"));t.toggleClass("dx-texteditor-input-auto-resize",n)}},_dimensionChanged(){this.option("visible")&&this._updateInputHeight()},_optionChanged(t){switch(t.name){case"autoResizeEnabled":this._updateInputAutoResizeAppearance(this._input(),t.value),this._refreshEvents(),this._updateInputHeight();break;case"value":case"height":this.callBase(t),this._updateInputHeight();break;case"minHeight":case"maxHeight":this._renderDimensions(),this._updateInputHeight();break;case"visible":this.callBase(t),t.value&&this._updateInputHeight();break;default:this.callBase(t)}}});re("dxTextArea",Ine);function Ef(t,e){return(t||e)&&!(t&&e)}const Ane=WS.inherit({_supportedKeys(){const t=this.callBase(),e=i=>this._list._keyboardHandler(i),n=this.option("rtlEnabled");return T({},t,{backspace(i){if(!this._isCaretAtTheStart())return;this._processKeyboardEvent(i),this._isTagRemoved=!0;const s=this._$focusedTag||this._tagElements().last();this._$focusedTag&&this._moveTagFocus("prev",!0),s.length!==0&&(this._preserveFocusedTag=!0,this._removeTagElement(s),delete this._preserveFocusedTag)},upArrow:(i,s)=>i.altKey||!this._list?t.upArrow.call(this,i):e(s),downArrow:(i,s)=>i.altKey||!this._list?t.downArrow.call(this,i):e(s),del(i){if(!this._$focusedTag||!this._isCaretAtTheStart())return;this._processKeyboardEvent(i),this._isTagRemoved=!0;const s=this._$focusedTag;this._moveTagFocus("next",!0),this._preserveFocusedTag=!0,this._removeTagElement(s),delete this._preserveFocusedTag},enter(i,s){const r=this._list&&this._list.option("focusedElement")!==null;if(this.option("acceptCustomValue")&&!r){i.preventDefault(),this._searchValue()!==""&&this._customItemAddedHandler(i);return}this.option("opened")&&(this._saveValueChangeEvent(i),e(s),i.preventDefault())},space(i,s){const r=this.option("opened"),o=this._shouldRenderSearchEvent();r&&!o&&(this._saveValueChangeEvent(i),e(s),i.preventDefault())},leftArrow(i){if(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&n&&!this._$focusedTag)return;i.preventDefault();const s=n?"next":"prev";this._moveTagFocus(s),!this.option("multiline")&&this._scrollContainer(s)},rightArrow(i){if(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&!n&&!this._$focusedTag)return;i.preventDefault();const s=n?"prev":"next";this._moveTagFocus(s),!this.option("multiline")&&this._scrollContainer(s)}})},_processKeyboardEvent(t){t.preventDefault(),t.stopPropagation(),this._saveValueChangeEvent(t)},_isEmpty(){return this._getValue().length===0},_updateTagsContainer(t){this._$tagsContainer=t.addClass("dx-tag-container")},_allowSelectItemByTab:()=>!1,_isCaretAtTheStart(){const t=cF(this._input());return(t==null?void 0:t.start)===0&&t.end===0},_updateInputAriaActiveDescendant(t){this.setAria("activedescendant",t,this._input())},_moveTagFocus(t,e){if(!this._$focusedTag){const i=this._tagElements();this._$focusedTag=t==="next"?i.first():i.last(),this._toggleFocusClass(!0,this._$focusedTag),this._updateInputAriaActiveDescendant(this._$focusedTag.attr("id"));return}const n=this._$focusedTag[t](".dx-tag");n.length>0?(this._replaceFocusedTag(n),this._updateInputAriaActiveDescendant(n.attr("id"))):(e||t==="next"&&this._isEditable())&&(this._clearTagFocus(),this._updateInputAriaActiveDescendant())},_replaceFocusedTag(t){this._toggleFocusClass(!1,this._$focusedTag),this._$focusedTag=t,this._toggleFocusClass(!0,this._$focusedTag)},_clearTagFocus(){this._$focusedTag&&(this._toggleFocusClass(!1,this._$focusedTag),this._updateInputAriaActiveDescendant(),delete this._$focusedTag)},_focusClassTarget(t){return t&&t.length&&t[0]!==this._focusTarget()[0]?t:this.callBase()},_getLabelContainer(){return this._$tagsContainer},_getFieldElement(){return this._input()},_scrollContainer(t){if(this.option("multiline")||!ae()||!this._$tagsContainer)return;const e=this._getScrollPosition(t);this._$tagsContainer.scrollLeft(e)},_getScrollPosition(t){return t==="start"||t==="end"?this._getBorderPosition(t):this._$focusedTag?this._getFocusedTagPosition(t):this._getBorderPosition("end")},_getBorderPosition(t){const e=this.option("rtlEnabled"),n=Ef(t==="end",e),i=e?-1:1;return Ef(n,!e)?0:i*(this._$tagsContainer.get(0).scrollWidth-et(this._$tagsContainer))},_getFocusedTagPosition(t){const e=this.option("rtlEnabled"),n=Ef(t==="next",e);let{left:i}=this._$focusedTag.position(),s=this._$tagsContainer.scrollLeft();return n&&(i+=et(this._$focusedTag,!0)-et(this._$tagsContainer)),Ef(n,i<0)&&(s+=i),s},_setNextValue:B,_getDefaultOptions(){return T(this.callBase(),{value:[],showDropDownButton:!1,maxFilterQueryLength:1500,tagTemplate:"tag",selectAllText:q.format("dxList-selectAll"),hideSelectedItems:!1,selectedItems:[],selectAllMode:"page",onSelectAllValueChanged:null,maxDisplayedTags:void 0,showMultiTagOnly:!0,onMultiTagPreparing:null,multiline:!0,useSubmitBehavior:!0})},_init(){this.callBase(),this._selectedItems=[],this._initSelectAllValueChangedAction()},_initActions(){this.callBase(),this._initMultiTagPreparingAction()},_initMultiTagPreparingAction(){this._multiTagPreparingAction=this._createActionByOption("onMultiTagPreparing",{beforeExecute:t=>{this._multiTagPreparingHandler(t.args[0])},excludeValidators:["disabled","readOnly"]})},_multiTagPreparingHandler(t){const{length:e}=this._getValue();this.option("showMultiTagOnly")?t.text=q.getFormatter("dxTagBox-selected")(e):t.text=q.getFormatter("dxTagBox-moreSelected")(e-this.option("maxDisplayedTags")+1)},_initDynamicTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({tag:new ea((t,e)=>{const n=m("<div>").addClass("dx-tag-content");m("<span>").text(e.text??e).appendTo(n),m("<div>").addClass("dx-tag-remove-button").appendTo(n),t.append(n)},["text"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter})})},_toggleSubmitElement(t){t?(this._renderSubmitElement(),this._setSubmitValue()):(this._$submitElement&&this._$submitElement.remove(),delete this._$submitElement)},_renderSubmitElement(){this.option("useSubmitBehavior")&&(this._$submitElement=m("<select>").attr({multiple:"multiple","aria-label":"Selected items"}).css("display","none").appendTo(this.$element()))},_setSubmitValue(){if(!this.option("useSubmitBehavior"))return;const t=this._getValue(),e=[];for(let n=0,i=t.length;n<i;n++){const s=this._shouldUseDisplayValue(t[n]);e.push(m("<option>").val(s?this._displayGetter(t[n]):t[n]).attr("selected","selected"))}this._getSubmitElement().empty().append(e)},_initMarkup(){this._tagElementsCache=m();const t=!this.option("multiline");this.$element().addClass("dx-tagbox").toggleClass("dx-tagbox-only-select",!(this.option("searchEnabled")||this.option("acceptCustomValue"))).toggleClass("dx-tagbox-single-line",t),this.setAria({role:"application",roledescription:"tagbox"},this.$element()),this._initTagTemplate(),this.callBase()},_getNewLabelId(t,e,n){return t?n?t===e?void 0:t.split(" ").filter(i=>i!==e).join(" "):`${t} ${e}`:e},_updateElementAria(t,e){if(!t){this.setAria("labelledby",void 0,this.$element());return}const i=this.$element().attr("aria-labelledby"),s=this._getNewLabelId(i,t,e);this.setAria("labelledby",s,this.$element())},_render(){this.callBase(),this._renderTagRemoveAction(),this._renderSingleLineScroll(),this._scrollContainer("start")},_initTagTemplate(){this._tagTemplate=this._getTemplateByOption("tagTemplate")},_renderField(){const t=!M(this.option("fieldTemplate"));this.$element().toggleClass("dx-tagbox-default-template",t).toggleClass("dx-tagbox-custom-template",!t),this.callBase()},_renderTagRemoveAction(){const t=this._createAction(this._removeTagHandler.bind(this)),e=K(_n,"dxTagBoxTagRemove");b.off(this._$tagsContainer,e),b.on(this._$tagsContainer,e,".dx-tag-remove-button",n=>{t({event:n})})},_renderSingleLineScroll(){const t=K("dxmousewheel",this.NAME),e=this.$element(),n=this.option("multiline");if(b.off(e,t),X.real().deviceType!=="desktop"){this._$tagsContainer&&this._$tagsContainer.css("overflowX",n?"":"auto");return}n||b.on(e,t,this._tagContainerMouseWheelHandler.bind(this))},_tagContainerMouseWheelHandler(t){const e=this._$tagsContainer.scrollLeft(),n=-.3*t.delta;if(!bn(t)&&qS(this._$tagsContainer,n,!0))return this._$tagsContainer.scrollLeft(e+n),!1},_renderEvents(){this.callBase();const t=this._input(),e=K("keydown",this.NAME);b.on(t,e,n=>{const i=tn(n);!this._isControlKey(i)&&this._isEditable()&&this._clearTagFocus()})},_popupWrapperClass(){return`${this.callBase()} dx-tagbox-popup-wrapper`},_renderInput(){this.callBase(),this._renderPreventBlurOnInputClick()},_renderPreventBlurOnInputClick(){const t=K("mousedown","dxTagBox");b.off(this._inputWrapper(),t),b.on(this._inputWrapper(),t,e=>{e.target!==this._input()[0]&&this._isFocused()&&e.preventDefault()})},_renderInputValueImpl(){return this._renderMultiSelect()},_loadInputValue:()=>Ne(),_clearTextValue(){this._input().val(""),this._toggleEmptinessEventHandler(),this.option("text","")},_focusInHandler(t){this._preventNestedFocusEvent(t)||this._scrollContainer("end"),this.callBase(t)},_renderInputValue(){return this.option("displayValue",this._searchValue()),this.callBase()},_restoreInputText(t){t||this._clearTextValue()},_focusOutHandler(t){this._preventNestedFocusEvent(t)||(this._clearTagFocus(),this._scrollContainer("start")),this.callBase(t)},_initSelectAllValueChangedAction(){this._selectAllValueChangeAction=this._createActionByOption("onSelectAllValueChanged")},_renderList(){this.callBase(),this._setListDataSourceFilter()},_canListHaveFocus(){return this.option("applyValueMode")==="useButtons"},_listConfig(){const t=this.option("showSelectionControls")?"all":"multiple";return T(this.callBase(),{maxFilterLengthInRequest:this.option("maxFilterQueryLength"),selectionMode:t,selectAllText:this.option("selectAllText"),onSelectAllValueChanged:e=>{let{value:n}=e;this._selectAllValueChangeAction({value:n})},selectAllMode:this.option("selectAllMode"),selectedItems:this._selectedItems,onFocusedItemChanged:null})},_renderMultiSelect(){const t=j();return this._updateTagsContainer(this._$textEditorInputContainer),this._renderInputSize(),this._renderTags().done(()=>{this._popup&&this._popup.refreshPosition(),t.resolve()}).fail(t.reject),t.promise()},_listItemClickHandler(t){!this.option("showSelectionControls")&&this._clearTextValue(),this.option("applyValueMode")!=="useButtons"&&(this.callBase(t),this._saveValueChangeEvent(void 0))},_shouldClearFilter(){const t=this.callBase();return!this.option("showSelectionControls")&&t},_renderInputSize(){const t=this._input(),e=t.val(),n=ve(e)&&e;let i="",s;const r=this.option("searchEnabled")||this.option("acceptCustomValue");if(n&&r){const o=OV(t,e,{includePaddings:!0});o.insertAfter(t),i=et(o)+5,o.remove()}else e||(s=1);t.css("width",i),t.attr("size",s??"")},_renderInputSubstitution(){this.callBase(),this._updateWidgetHeight()},_getValue(){return this.option("value")||[]},_multiTagRequired(){const t=this._getValue(),e=this.option("maxDisplayedTags");return M(e)&&t.length>e},_renderMultiTag(t){const e=`dx-${new Et}`,n=m("<div>").attr("id",e).addClass("dx-tag").addClass("dx-tagbox-multi-tag"),i={multiTagElement:se(n),selectedItems:this.option("selectedItems")};if(this._multiTagPreparingAction(i),i.cancel)return!1;n.data("dxTagData",i.text),n.insertBefore(t),this._tagTemplate.render({model:i.text,container:se(n)});const s=i.text;return this._setTagAria(n,s),this._updateElementAria(e),n},_getFilter(t){const e=this._dataController.filter(),n=t.getCombinedFilter(this.option("valueExpr"),e),i=encodeURI(JSON.stringify(n)).length,s=this.option("maxFilterQueryLength");if(i<=s)return n;it.log("W1019",s)},_getFilteredItems(t){var e,n;(e=this._loadFilteredItemsPromise)===null||e===void 0||e.reject();const i=new t0(t),s=(n=this._list)===null||n===void 0?void 0:n.option("selectedItems"),r=!!s&&this._list._dataController.isLoaded(),o=s||this.option("selectedItems"),a=i.getLocalFilter(this._valueGetter),l=o.filter(a),c=l.length===t.length,u=j(),d=this._dataController;if((!this._isDataSourceChanged||r)&&c)return u.resolve(l).promise();const{customQueryParams:p,expand:f,select:g}=d.loadOptions(),y=this._getFilter(i);return d.loadFromStore({filter:y,customQueryParams:p,expand:f,select:g}).done((v,C)=>{if(this._isDataSourceChanged=!1,this._disposed){u.reject();return}const{data:x}=Fw(v,C),S=d.applyMapFunction(x);u.resolve(S.filter(a))}).fail(u.reject),this._loadFilteredItemsPromise=u,u.promise()},_createTagsData(t,e){const n=[],i={},s=this._valueGetterExpr()==="this",r={};e.forEach(l=>{const c=s?JSON.stringify(l):this._valueGetter(l);r[c]=l});const o=[];t.forEach((l,c)=>{const u=r[s?JSON.stringify(l):l];if(s&&!M(u))o.push(this._loadItem(l,i).always(d=>{const p=this._createTagData(d,l);n.splice(c,0,p)}));else{const d=this._createTagData(u,l);n.splice(c,0,d)}});const a=j();return Ne.apply(this,o).always(()=>{a.resolve(n)}),a.promise()},_createTagData(t,e){if(M(t))return this._selectedItems.push(t),t;const n=this.option("selectedItem");return this._valueGetter(n)===e?n:e},_isGroupedData(){return this.option("grouped")&&!this._dataController.group()},_getItemsByValues(t){const e=[];return t.forEach(n=>{const i=this._getItemFromPlain(n);M(i)&&e.push(i)}),e},_getFilteredGroupedItems(t){const e=j();return this._filteredGroupedItemsLoadPromise&&this._dataController.cancel(this._filteredGroupedItemsLoadPromise.operationId),this._dataController.items().length?e.resolve(this._getItemsByValues(t)):this._filteredGroupedItemsLoadPromise=this._dataController.load().done(()=>{e.resolve(this._getItemsByValues(t))}).fail(()=>{e.resolve([])}).always(()=>{this._filteredGroupedItemsLoadPromise=void 0}),e.promise()},_loadTagsData(){const t=this._getValue(),e=j();return this._selectedItems=[],(this._isGroupedData()?this._getFilteredGroupedItems(t):this._getFilteredItems(t)).done(i=>{this._createTagsData(t,i).always(r=>{e.resolve(r)})}).fail(e.reject.bind(this)),e.promise()},_renderTags(){const t=j();let e=!1;return this._shouldGetItemsFromPlain(this._valuesToUpdate)&&(this._selectedItems=this._getItemsFromPlain(this._valuesToUpdate),this._selectedItems.length===this._valuesToUpdate.length&&(this._renderTagsImpl(this._selectedItems),e=!0,t.resolve())),e||this._loadTagsData().done(n=>{if(this._disposed){t.reject();return}this._renderTagsImpl(n),t.resolve()}).fail(t.reject),t.promise()},_renderTagsImpl(t){this._renderTagsCore(t),this._renderEmptyState(),this._preserveFocusedTag||this._clearTagFocus()},_shouldGetItemsFromPlain(t){return t&&this._dataController.isLoaded()&&t.length<=this._getPlainItems().length},_getItemsFromPlain(t){let e=this._getSelectedItemsFromList(t);if(e.length===0&&t.length>0||e.length<t.length){const i=this._getPlainItems();e=this._filterSelectedItems(i,t)}return e},_getSelectedItemsFromList(t){var e;const n=(e=this._list)===null||e===void 0?void 0:e.option("selectedItems");let i=[];return t.length===(n==null?void 0:n.length)&&(i=this._filterSelectedItems(n,t)),i},_filterSelectedItems(t,e){return t.filter(i=>{let s;for(let r=0;r<e.length;r++)if(s=e[r],ue(s)){if(this._isValueEquals(i,s))return!0}else if(this._isValueEquals(this._valueGetter(i),s))return!0;return!1},this)},_integrateInput(){this._isInputReady.resolve(),this.callBase();const t=this.$element().find(".dx-texteditor-input-container");this._updateTagsContainer(t),this._renderTagRemoveAction()},_renderTagsCore(t){var e;(e=this._isInputReady)===null||e===void 0||e.reject(),this._isInputReady=j(),this._renderField(),this.option("selectedItems",this._selectedItems.slice()),this._cleanTags(),this._input().length>0&&this._isInputReady.resolve(),Ne(this._isInputReady).done(()=>{this._renderTagsElements(t)})},_renderTagsElements(t){const e=this._multiTagRequired()&&this._renderMultiTag(this._input()),n=this.option("showMultiTagOnly"),i=this.option("maxDisplayedTags");t.forEach((s,r)=>{if(e&&n||e&&!n&&r-i>=-1)return!1;this._renderTag(s,e||this._input())}),this._isFocused()&&this._scrollContainer("end"),this._refreshTagElements()},_cleanTags(){if(this._multiTagRequired())this._tagElements().remove();else{const t=this._tagElements(),e=this._getValue();N(t,(n,i)=>{const s=m(i),r=s.data("dxTagData");e!=null&&e.includes(r)||s.remove()})}this._updateElementAria()},_renderEmptyState(){const t=!(this._getValue().length||this._selectedItems.length||this._searchValue());this._toggleEmptiness(t),this._renderDisplayText()},_renderDisplayText(){this._renderInputSize()},_refreshTagElements(){this._tagElementsCache=this.$element().find(".dx-tag")},_tagElements(){return this._tagElementsCache},_applyTagTemplate(t,e){this._tagTemplate.render({model:t,container:se(e)})},_renderTag(t,e){const n=this._valueGetter(t);if(!M(n))return;let i=this._getTag(n);const s=this._displayGetter(t),r=this._getItemModel(t,s);if(i)M(s)&&(i.empty(),this._applyTagTemplate(r,i)),i.removeClass("dx-tag-custom"),this._updateElementAria(i.attr("id"));else{const o=`dx-${new Et}`;i=this._createTag(n,e,o),this._setTagAria(i,M(s)?s:n),M(t)?this._applyTagTemplate(r,i):(i.addClass("dx-tag-custom"),this._applyTagTemplate(n,i)),this._updateElementAria(o)}},_setTagAria(t,e){const n={role:"button",label:e,roledescription:q.format("dxTagBox-tagRoleDescription")};this.setAria(n,t)},_getItemModel(t,e){return ue(t)&&M(e)?t:rt(e,"")},_getTag(t){const e=this._tagElements(),n=e.length;let i=!1;for(let s=0;s<n;s++){const r=e[s],o=st(r,"dxTagData");if(t===o||Bi(t,o)){i=m(r);break}}return i},_createTag:(t,e,n)=>m("<div>").attr("id",n).addClass("dx-tag").data("dxTagData",t).insertBefore(e),_toggleEmptinessEventHandler(){this._toggleEmptiness(!this._getValue().length&&!this._searchValue().length)},_customItemAddedHandler(t){this.callBase(t),this._clearTextValue()},_removeTagHandler(t){const e=t.event;e.stopPropagation(),this._saveValueChangeEvent(e);const n=m(e.target).closest(".dx-tag");this._removeTagElement(n)},_removeTagElement(t){if(t.hasClass("dx-tagbox-multi-tag")){this.option("showMultiTagOnly")?this.clear():this.option("value",this._getValue().slice(0,this.option("maxDisplayedTags")));return}const e=t.data("dxTagData"),n=t.attr("id");this._removeTagWithUpdate(e),this._updateElementAria(n,!0),this._refreshTagElements()},_updateField:B,_removeTagWithUpdate(t){const e=this._getValue().slice();this._removeTag(e,t),this.option("value",e),this.option("selectedItem",null),e.length===0&&this._clearTagFocus()},_getCurrentValue(){return this._lastValue()},_selectionChangeHandler(t){if(this.option("applyValueMode")==="useButtons")return;const e=this._getValue().slice();if(N(t.removedItems||[],(n,i)=>{this._removeTag(e,this._valueGetter(i))}),N(t.addedItems||[],(n,i)=>{this._addTag(e,this._valueGetter(i))}),this._updateWidgetHeight(),!Bi(this._list.option("selectedItemKeys"),this.option("value"))){const n=this._list._getSelectionChangeEvent();n&&this._saveValueChangeEvent(n),this.option("value",e)}this._list._saveSelectionChangeEvent(void 0)},_removeTag(t,e){const n=this._valueIndex(e,t);n>=0&&t.splice(n,1)},_addTag(t,e){this._valueIndex(e)<0&&t.push(e)},_fieldRenderData(){return this._selectedItems.slice()},_completeSelection(t){this.option("showSelectionControls")||this._setValue(t)},_setValue(t){var e;if(t===null)return;const n=this.option("applyValueMode")==="useButtons",i=this._valueIndex(t),s=(n?((e=this._list)===null||e===void 0?void 0:e.option("selectedItemKeys"))||[]:this._getValue()).slice();if(i>=0?s.splice(i,1):s.push(t),n){var r;(r=this._list)===null||r===void 0||r.option("selectedItemKeys",s)}else this.option("value",s)},_isSelectedValue(t,e){return this._valueIndex(t,null,e)>-1},_valueIndex(t,e,n){let i=-1;return n&&typeof t!="object"&&(n.indexByValues||(n.indexByValues={},e=e||this._getValue(),e.forEach((s,r)=>{n.indexByValues[s]=r})),t in n.indexByValues)?n.indexByValues[t]:(e=e||this._getValue(),N(e,(s,r)=>{if(this._isValueEquals(t,r))return i=s,!1}),i)},_lastValue(){const t=this._getValue();return t[t.length-1]??null},_shouldRenderSearchEvent(){return this.option("searchEnabled")||this.option("acceptCustomValue")},_searchHandler(t){this.option("searchEnabled")&&t&&!this._isTagRemoved&&(this.callBase(arguments),this._setListDataSourceFilter()),this._updateWidgetHeight(),delete this._isTagRemoved},_updateWidgetHeight(){const t=this.$element(),e=Re(t);this._renderInputSize();const n=Re(t);this._popup&&this.option("opened")&&this._isEditable()&&n!==e&&this._popup.repaint()},_refreshSelected(){var t;!((t=this._list)===null||t===void 0)&&t.getDataSource()&&this._list.option("selectedItems",this._selectedItems)},_resetListDataSourceFilter(){const t=this._dataController;delete this._userFilter,t.filter(null),t.reload()},_setListDataSourceFilter(){if(!this.option("hideSelectedItems")||!this._list)return;const t=this._dataController,e=this._valueGetterExpr();if(ve(e)&&e!=="this"){const n=this._dataSourceFilterExpr();this._userFilter===void 0&&(this._userFilter=t.filter()||null),this._userFilter&&n.push(this._userFilter),n.length?t.filter(n):t.filter(null)}else t.filter(this._dataSourceFilterFunction.bind(this));t.load()},_dataSourceFilterExpr(){const t=[];return this._getValue().forEach(e=>t.push(["!",[this._valueGetterExpr(),e]])),t},_dataSourceFilterFunction(t){const e=this._valueGetter(t);let n=!0;return N(this._getValue(),(i,s)=>{if(this._isValueEquals(s,e))return n=!1,!1}),n},_dataSourceChangedHandler(){this._isDataSourceChanged=!0,this.callBase.apply(this,arguments)},_applyButtonHandler(t){this._saveValueChangeEvent(t.event),this.option("value",this._getSortedListValues()),this._clearTextValue(),this.callBase(),this._cancelSearchIfNeed()},_getSortedListValues(){const t=this._getListValues(),e=this.option("value")||[],n=t.length?S9(e,t):[],i=n.length?e0(t,e):t;return n.concat(i)},_getListValues(){return this._list?this._getPlainItems(this._list.option("selectedItems")).map(t=>this._valueGetter(t)):[]},_setListDataSource(){const t=this._getValue();this.callBase(),t!==this.option("value")&&this.option("value",t),this._refreshSelected()},_renderOpenedState(){this.callBase(),this.option("applyValueMode")==="useButtons"&&!this.option("opened")&&this._refreshSelected()},clear(){this._restoreInputText();const t=this._getDefaultOptions().value,e=this.option("value");t&&t.length===0&&e&&t.length===e.length||this.callBase()},_clean(){this.callBase(),delete this._defaultTagTemplate,delete this._valuesToUpdate,delete this._tagTemplate},_getSelectedItemsDifference(t,e){if(!t.length)return{addedItems:[],removedItems:e.slice()};if(!e.length)return{addedItems:t.slice(),removedItems:[]};const n=e.reduce((s,r)=>{const o=this._valueGetter(r);return s[o]=r,s},{}),i=[];return t.forEach(s=>{const r=this._valueGetter(s);n[r]||i.push(s),delete n[r]}),{addedItems:i,removedItems:Object.values(n)}},_optionChanged(t){const{name:e,value:n,previousValue:i}=t;switch(e){case"onSelectAllValueChanged":this._initSelectAllValueChangedAction();break;case"onMultiTagPreparing":this._initMultiTagPreparingAction(),this._renderTags();break;case"hideSelectedItems":n?this._setListDataSourceFilter():this._resetListDataSourceFilter();break;case"useSubmitBehavior":this._toggleSubmitElement(n);break;case"displayExpr":this.callBase(t),this._initTemplates(),this._invalidate();break;case"tagTemplate":this._initTagTemplate(),this._invalidate();break;case"selectAllText":this._setListOption("selectAllText",this.option("selectAllText"));break;case"readOnly":case"disabled":this.callBase(t),!n&&this._refreshEvents();break;case"value":this._valuesToUpdate=n,this.callBase(t),this._valuesToUpdate=void 0,this._setListDataSourceFilter();break;case"maxDisplayedTags":case"showMultiTagOnly":this._renderTags();break;case"selectAllMode":this._setListOption(e,n);break;case"selectedItem":case"maxFilterQueryLength":break;case"selectedItems":this._selectionChangedAction(this._getSelectedItemsDifference(n,i));break;case"multiline":this.$element().toggleClass("dx-tagbox-single-line",!n),this._renderSingleLineScroll();break;default:this.callBase(t)}},_getActualSearchValue(){return this.callBase()||this._searchValue()},_popupHidingHandler(){this.callBase(),this._clearFilter()}});re("dxTagBox",Ane);const kne=Fi.inherit({_supportedKeys(){const t=this.option("rtlEnabled"),e=function(i){i.preventDefault(),this._clickAction({event:i})},n=function(i,s){s.preventDefault(),s.stopPropagation(),this._saveValueChangeEvent(s),this._animateValue(i)};return T(this.callBase(),{space:e,enter:e,leftArrow:n.bind(this,!!t),rightArrow:n.bind(this,!t)})},_useTemplates:()=>!1,_getDefaultOptions(){return T(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:q.format("dxSwitch-switchedOnText"),switchedOffText:q.format("dxSwitch-switchedOffText"),value:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}}])},_feedbackHideTimeout:0,_animating:!1,_initMarkup(){this._renderContainers(),this.$element().addClass("dx-switch").append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","switch"),this._renderSwipeable(),this.callBase(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()},_getInnerOffset(t,e){return 100*((e-this._offsetDirection()*+!t)/2)+"%"},_getHandleOffset(t,e){return this.option("rtlEnabled")&&(t=!t),t?`${100*-e-100}%`:100*-e+"%"},_renderSwitchInner(){this._$switchInner=m("<div>").addClass("dx-switch-inner").appendTo(this._$switchContainer),this._$handle=m("<div>").addClass("dx-switch-handle").appendTo(this._$switchInner)},_renderLabels(){this._$labelOn=m("<div>").addClass("dx-switch-on").prependTo(this._$switchInner),this._$labelOff=m("<div>").addClass("dx-switch-off").appendTo(this._$switchInner),this._setLabelsText()},_renderContainers(){this._$switchContainer=m("<div>").addClass("dx-switch-container"),this._$switchWrapper=m("<div>").addClass("dx-switch-wrapper").append(this._$switchContainer)},_renderSwipeable(){this._createComponent(this.$element(),xh,{elastic:!1,immediate:!0,onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._getItemSizeFunc.bind(this)})},_getItemSizeFunc(){return et(this._$switchContainer,!0)-ke(this._$handle.get(0)).width},_renderSubmitElement(){this._$submitElement=m("<input>").attr("type","hidden").appendTo(this.$element())},_getSubmitElement(){return this._$submitElement},_offsetDirection(){return this.option("rtlEnabled")?-1:1},_renderPosition(t,e){const n=this._getInnerOffset(t,e),i=this._getHandleOffset(t,e);this._$switchInner.css("transform",` translateX(${n})`),this._$handle.css("transform",` translateX(${i})`)},_validateValue(){const t=this.option("value");typeof t!="boolean"&&this._options.silent("value",!!t)},_renderClick(){const t=K(_n,this.NAME),e=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),b.off(e,t),b.on(e,t,n=>{this._clickAction({event:n})})},_clickHandler(t){const e=t.event;this._saveValueChangeEvent(e),!(this._animating||this._swiping)&&this._animateValue(!this.option("value"))},_animateValue(t){const e=this.option("value"),n=t;if(e===n)return;this._animating=!0;const i=this._getInnerOffset(e,0),s=this._getInnerOffset(n,0),r=this._getHandleOffset(e,0),o=this._getHandleOffset(n,0),a=this,l={},c={},u={},d={};l.transform=` translateX(${i})`,c.transform=` translateX(${s})`,u.transform=` translateX(${r})`,d.transform=` translateX(${o})`,this.$element().toggleClass("dx-switch-on-value",n),Tt.animate(this._$handle,{from:u,to:d,duration:100}),Tt.animate(this._$switchInner,{from:l,to:c,duration:100,complete(){a._animating=!1,a.option("value",n)}})},_swipeStartHandler(t){const e=this.option("value"),n=this.option("rtlEnabled"),i=n?0:1,s=n?1:0;t.event.maxLeftOffset=e?i:s,t.event.maxRightOffset=e?s:i,this._swiping=!0,this._feedbackDeferred=j(),DL(this._feedbackDeferred),this._toggleActiveState(this.$element(),this.option("activeStateEnabled"))},_swipeUpdateHandler(t){this._renderPosition(this.option("value"),t.event.offset)},_swipeEndHandler(t){const e=this,n=this._offsetDirection(),i={},s={},r=this._getInnerOffset(e.option("value"),t.event.targetOffset),o=this._getHandleOffset(e.option("value"),t.event.targetOffset);i.transform=` translateX(${r})`,s.transform=` translateX(${o})`,Tt.animate(this._$handle,{to:s,duration:100}),Tt.animate(this._$switchInner,{to:i,duration:100,complete(){e._swiping=!1;const a=e.option("value")+n*t.event.targetOffset;e._saveValueChangeEvent(t.event),e.option("value",!!a),e._feedbackDeferred.resolve(),e._toggleActiveState(e.$element(),!1)}})},_renderValue(){this._validateValue();const t=this.option("value");this._renderPosition(t,0),this.$element().toggleClass("dx-switch-on-value",t),this._getSubmitElement().val(t),this.setAria({checked:t,label:t?this.option("switchedOnText"):this.option("switchedOffText")})},_setLabelsText(){this._$labelOn&&this._$labelOn.text(this.option("switchedOnText")),this._$labelOff&&this._$labelOff.text(this.option("switchedOffText"))},_visibilityChanged(t){t&&this.repaint()},_optionChanged(t){switch(t.name){case"width":delete this._marginBound,this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),this.callBase(t);break;default:this.callBase(t)}}});re("dxSwitch",kne);class Rne{constructor(){this.counter=0}isFree(){return this.counter===0}take(){this.counter+=1}release(){this.counter-=1,this.counter<0&&(this.counter=0)}}const Xl={Main:"mainGroup",Recurrence:"recurrenceGroup"},gr={form:"e2e-dx-scheduler-form",textEditor:"e2e-dx-scheduler-form-text",descriptionEditor:"e2e-dx-scheduler-form-description",startDateEditor:"e2e-dx-scheduler-form-start-date",endDateEditor:"e2e-dx-scheduler-form-end-date",startDateTimeZoneEditor:"e2e-dx-scheduler-form-start-date-timezone",endDateTimeZoneEditor:"e2e-dx-scheduler-form-end-date-timezone",allDaySwitch:"e2e-dx-scheduler-form-all-day-switch",recurrenceSwitch:"e2e-dx-scheduler-form-recurrence-switch"},tC=()=>qn(xi())?"filled":void 0,One=(t,e)=>new Date(new Date(t).setHours(e)),Pne=(t,e,n)=>{!(e===null||!!e)&&(n===null||!!n)&&t.option("value",n)},Mne=(t,e,n)=>{var i;n.itemOption(Xl.Recurrence,"visible",e),(i=n.getEditor(t))===null||i===void 0||i.changeValueByVisibility(e)};class Vne{constructor(e){this.scheduler=e,this.form=null,this.semaphore=new Rne}get dxForm(){return this.form}set readOnly(e){this.form.option("readOnly",e);const{recurrenceRuleExpr:n}=this.scheduler.getDataAccessors().expr,i=this.form.getEditor(n);i==null||i.option("readOnly",e)}get formData(){return this.form.option("formData")}set formData(e){this.form.option("formData",e)}create(e,n,i){const{allowTimeZoneEditing:s}=this.scheduler.getEditingConfig(),r=this.scheduler.getDataAccessors(),{expr:o}=r,a=!!Be.getField(r,"recurrenceRule",i),l=a?1:2,c=[...this._createMainItems(o,e,n,s),...this.scheduler.createResourceEditorModel()];n(a);const u=[{itemType:"group",name:Xl.Main,colCountByScreen:{lg:2,xs:1},colSpan:l,items:c},{itemType:"group",name:Xl.Recurrence,visible:a,colSpan:l,items:this._createRecurrenceEditor(o)}],d=m("<div>");this.scheduler.createComponent(d,jS,{items:u,showValidationSummary:!0,scrollingEnabled:!0,colCount:"auto",colCountByScreen:{lg:2,xs:1},formData:i,showColonAfterLabel:!1,labelLocation:"top",onInitialized:p=>{this.form=p.component},customizeItem:p=>{if(this.form&&p.itemType==="group"){const f=this.scheduler.getDataAccessors().expr,g=new Date(this.formData[f.startDateExpr]),y=new Date(this.formData[f.endDateExpr]),v=p.items.find(x=>x.dataField===f.startDateTimeZoneExpr),C=p.items.find(x=>x.dataField===f.endDateTimeZoneExpr);v&&(v.editorOptions.dataSource=this.createTimeZoneDataSource(g)),C&&(C.editorOptions.dataSource=this.createTimeZoneDataSource(y))}},screenByWidth:p=>p<600||X.current().deviceType!=="desktop"?"xs":"lg",elementAttr:{class:gr.form}})}createTimeZoneDataSource(e){return new Zs({store:De.getTimeZones(e),paginate:!0,pageSize:10})}_createAppointmentAdapter(e){return ct(e,this.scheduler.getDataAccessors())}_dateBoxValueChanged(e,n,i){Pne(e.component,e.value,e.previousValue);const s=je.deserializeDate(e.value),r=je.deserializeDate(e.previousValue),o=this.form.getEditor(n),a=je.deserializeDate(o.option("value"));if(this.semaphore.isFree()&&a&&s&&i(a,s)){const l=r?a.getTime()-r.getTime():0;o.option("value",new Date(s.getTime()+l))}}_createTimezoneEditor(e,n,i,s,r,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;const l=q.format("dxScheduler-noTimezoneTitle");return{name:this.normalizeEditorName(e),dataField:e,editorType:"dxSelectBox",visibleIndex:i,colSpan:s,cssClass:o,label:{text:" "},editorOptions:{displayExpr:"title",valueExpr:"id",placeholder:l,searchEnabled:!0,onValueChanged:c=>{const{form:u}=this,d=u.getEditor(n);r&&d.option("value",c.value)}},visible:a}}_createDateBoxItems(e,n){const i=n?2:1,s=this.scheduler.getFirstDayOfWeek();return[this.createDateBoxEditor(e.startDateExpr,i,s,"dxScheduler-editorLabelStartDate",gr.startDateEditor,r=>{this._dateBoxValueChanged(r,e.endDateExpr,(o,a)=>o<a)}),this._createTimezoneEditor(e.startDateTimeZoneExpr,e.endDateTimeZoneExpr,1,i,!0,gr.startDateTimeZoneEditor,n),this.createDateBoxEditor(e.endDateExpr,i,s,"dxScheduler-editorLabelEndDate",gr.endDateEditor,r=>{this._dateBoxValueChanged(r,e.startDateExpr,(o,a)=>a<o)}),this._createTimezoneEditor(e.endDateTimeZoneExpr,e.startDateTimeZoneExpr,3,i,!1,gr.endDateTimeZoneEditor,n)]}_changeFormItemDateType(e,n,i){const s=this.getEditorPath(e,n),r=this.form.itemOption(s).editorOptions,a=L({},r,{type:i?"date":"datetime"});this.form.itemOption(s,"editorOptions",a)}_createMainItems(e,n,i,s){return[{name:this.normalizeEditorName(e.textExpr),dataField:e.textExpr,cssClass:gr.textEditor,editorType:"dxTextBox",colSpan:2,label:{text:q.format("dxScheduler-editorLabelTitle")},editorOptions:{stylingMode:tC()}},{itemType:"group",colSpan:2,colCountByScreen:{lg:2,xs:1},items:this._createDateBoxItems(e,s)},{itemType:"group",colSpan:2,colCountByScreen:{lg:2,xs:2},items:[{name:this.normalizeEditorName(e.allDayExpr),dataField:e.allDayExpr,cssClass:`dx-appointment-form-switch ${gr.allDaySwitch}`,editorType:"dxSwitch",label:{text:q.format("dxScheduler-allDay"),location:"right"},editorOptions:{onValueChanged:r=>{const{value:o}=r,a=this.form.getEditor(e.startDateExpr),l=this.form.getEditor(e.endDateExpr),c=je.deserializeDate(a.option("value"));if(this.semaphore.isFree()&&c)if(o){const u=V.trimTime(c);a.option("value",new Date(u)),l.option("value",new Date(u))}else{const u=One(c,this.scheduler.getStartDayHour()),d=this.scheduler.getCalculatedEndDate(u);a.option("value",u),l.option("value",d)}this._changeFormItemDateType(e.startDateExpr,"Main",o),this._changeFormItemDateType(e.endDateExpr,"Main",o)}}},{editorType:"dxSwitch",dataField:"repeat",cssClass:`dx-appointment-form-switch ${gr.recurrenceSwitch}`,name:"visibilityChanged",label:{text:q.format("dxScheduler-editorLabelRecurrence"),location:"right"},editorOptions:{onValueChanged:r=>{const{form:o}=this,a=r.value?1:2;o.itemOption(Xl.Main,"colSpan",a),o.itemOption(Xl.Recurrence,"colSpan",a),Mne(e.recurrenceRuleExpr,r.value,o),i(r.value),n()}}}]},{itemType:"empty",colSpan:2},{name:this.normalizeEditorName(e.descriptionExpr),dataField:e.descriptionExpr,cssClass:gr.descriptionEditor,editorType:"dxTextArea",colSpan:2,label:{text:q.format("dxScheduler-editorLabelDescription")},editorOptions:{stylingMode:tC()}},{itemType:"empty",colSpan:2}]}_createRecurrenceEditor(e){return[{name:this.normalizeEditorName(e.recurrenceRuleExpr),dataField:e.recurrenceRuleExpr,editorType:"dxRecurrenceEditor",editorOptions:{firstDayOfWeek:this.scheduler.getFirstDayOfWeek(),timeZoneCalculator:this.scheduler.getTimeZoneCalculator(),getStartDateTimeZone:()=>this._createAppointmentAdapter(this.formData).startDateTimeZone},label:{text:" ",visible:!1}}]}setEditorsType(e){const{startDateExpr:n,endDateExpr:i}=this.scheduler.getDataAccessors().expr,s=this.getEditorPath(n,"Main"),r=this.getEditorPath(i,"Main"),o=this.form.itemOption(s),a=this.form.itemOption(r);if(o&&a){const l=o.editorOptions,c=a.editorOptions;l.type=c.type=e?"date":"datetime",this.form.itemOption(s,"editorOptions",l),this.form.itemOption(r,"editorOptions",c)}}updateRecurrenceEditorStartDate(e,n){const i={startDate:e};this.setEditorOptions(n,"Recurrence",i)}setEditorOptions(e,n,i){const s=this.getEditorPath(e,n),r=this.form.itemOption(s);r&&this.form.itemOption(s,"editorOptions",T({},r.editorOptions,i))}setTimeZoneEditorDataSource(e,n){const i=this.createTimeZoneDataSource(e);this.setEditorOptions(n,"Main",{dataSource:i})}updateFormData(e){this.semaphore.take(),this.form.option("formData",e);const n=this.scheduler.getDataAccessors(),{expr:i}=n,s=Be.getField(n,"startDate",e),r=Be.getField(n,"endDate",e),o=Be.getField(n,"allDay",e),a=new Date(s),l=new Date(r);this.setTimeZoneEditorDataSource(a,i.startDateTimeZoneExpr),this.setTimeZoneEditorDataSource(l,i.endDateTimeZoneExpr),this.updateRecurrenceEditorStartDate(a,i.recurrenceRuleExpr),this.setEditorsType(o),this.semaphore.release()}createDateBoxEditor(e,n,i,s,r,o){return{editorType:"dxDateBox",name:this.normalizeEditorName(e),dataField:e,colSpan:n,cssClass:r,label:{text:q.format(s)},validationRules:[{type:"required"}],editorOptions:{stylingMode:tC(),width:"100%",calendarOptions:{firstDayOfWeek:i},onValueChanged:o,useMaskBehavior:!0}}}getEditorPath(e,n){const i=this.normalizeEditorName(e);return`${Xl[n]}.${i}`}normalizeEditorName(e){return e&&e.replace(/\./g,"_")}}const Rd={DEFAULT:485,RECURRENCE:970,FULLSCREEN:1e3,MOBILE:{DEFAULT:350,FULLSCREEN:500}},JF=()=>X.current().deviceType!=="desktop",Bne=()=>X.current().platform==="ios",nC={AFTER:"after",BEFORE:"before"},Lne=()=>({doneButton:{shortcut:"done",options:{text:q.format("Done")},location:nC.AFTER},cancelButton:{shortcut:"cancel",location:Bne()?nC.BEFORE:nC.AFTER}}),$ne=(t,e)=>{const n=[],i=Lne();return t&&n.push(L({},i.doneButton,{onClick:e})),n.push(i.cancelButton),n},Fne=()=>{const t=pe(),e=t&&me(t);return e?JF()?e<Rd.MOBILE.FULLSCREEN:e<Rd.FULLSCREEN:!1},Hne=t=>JF()?Rd.MOBILE.DEFAULT:t?Rd.RECURRENCE:Rd.DEFAULT;let Ya=null;const Nne=function(t){return new HS(m("<div>").appendTo(t&&t.container||tr()),t)},eH=function(){Ya&&(Ya.$element().remove(),Ya=null)};function tH(t){return eH(),Ya=Nne(t),Ya.show()}function bg(){return Ya?Ya.hide().done(eH).promise():new j().resolve()}const up=t=>t.valueExpr||"id",YS=t=>t.displayExpr||"text",aa=t=>t.fieldExpr||t.field,W_=t=>{if(t instanceof Zs)return t;const e=L({},p_(t),{pageSize:0});return Array.isArray(t)||(e.filter=t.filter),new Zs(e)},dp=t=>{let e=0;const n=(i,s,r,o)=>{r=r||[];for(let l=0;l<i.items.length;l++){var a;const c=i.items[l],u={name:i.name,value:c.id,title:c.text,data:(a=i.data)===null||a===void 0?void 0:a[l],children:[],parent:o||null},d=s+1;t[d]&&n(t[d],d,u.children,u),u.children.length||(u.leafIndex=e,e++),r.push(u)}return r};return n(t[0],0)},nH=(t,e)=>{const n=dp(e),i=(o,a)=>{for(let l=0;l<o.length;l++){if(o[l].leafIndex===a)return o[l];const c=i(o[l].children,a);if(c)return c}},s=(o,a)=>(a=a||[],a.push(o.value),o.parent&&s(o.parent,a),a),r=i(n,t);return s(r).reverse()},Pc=(t,e)=>{const n=[];if(Kr(e)){if(t<0)return;const i=nH(t,e);for(let s=0;s<e.length;s++)n.push({name:e[s].name,id:i[s]})}return n},mm=t=>t.reduce((e,n)=>{let{name:i,id:s}=n;return L({},e,{[i]:s})},{}),UR=t=>{const e=Kr(t);return[...new Array(e)].map((n,i)=>{const s=Pc(i,t);return mm(s)})},zne=(t,e)=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.name===t)return i.data}return[]},Wne=(t,e)=>t.map(n=>{const i=aa(n),s=zne(i,e);return{editorOptions:{dataSource:s.length?s:W_(n.dataSource),displayExpr:YS(n),valueExpr:up(n),stylingMode:qn(xi())?"filled":"outlined"},dataField:i,editorType:n.allowMultiple?"dxTagBox":"dxSelectBox",label:{text:n.label||i}}}),iH=(t,e)=>{const n=t.find(i=>aa(i)===e);return!!(n!=null&&n.allowMultiple)},G_=(t,e)=>t.filter(n=>{const i=aa(n);return e.indexOf(i)>-1}),Gne=(t,e)=>{const n=e||[],i=t.find(r=>r.useColorAsDefault);if(i)return i;const s=n.length?G_(t,n):t;return s[s.length-1]},Une=(t,e,n,i)=>{const s=new j;return t.filter(r=>aa(r)===n&&M(r.dataSource)).forEach(r=>{const o=W_(r.dataSource),a=up(r);e.has(n)||e.set(n,o.load()),e.get(n).done(l=>{const c=lt(a),u=l.filter(d=>Bi(c(d),i));s.resolve(u[0])}).fail(()=>{e.delete(n),s.reject()})}),s.promise()},U_=(t,e,n)=>t[n][e],Kne=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i={0:e};n.length&&t.loadedResources.length&&(i=jne(t,e,t.loadedResources));let s=0;t.loadedResources.forEach((r,o)=>{o?s*=r.items.length:s=r.items.length});for(let r=0;r<s;r++){const o=r.toString();i[o]||(i[o]=[])}return i},jne=(t,e,n)=>{const i=dp(n),s={};return e.forEach(r=>{const o=ZS((a,l)=>U_(t.dataAccessors,a,l),i,r);for(let a=0;a<o.length;a++)s[o[a]]||(s[o[a]]=[]),s[o[a]].push(Jo({},r,!0))}),s},ZS=(t,e,n,i)=>{i=i||[];for(let s=0;s<e.length;s++)qne(t,n,e[s].name,e[s].value)&&(M(e[s].leafIndex)&&i.push(e[s].leafIndex),e[s].children&&ZS(t,e[s].children,n,i));return i},qne=(t,e,n,i)=>{const s=t(n,"getter")(e);return B$(na(s),i)},Yne=(t,e,n)=>{const i=dp(t);return sH(e,i,n)},sH=(t,e,n,i)=>(i=i?i.children:[],e.forEach((s,r)=>{let o=!1;const a=s.name,l=s.value,c=s.title,u=s.data,d=t(a,"getter");n.forEach(p=>{if(!o){const f=d(p);Array.isArray(f)?f.includes(l)&&(i.push({name:a,value:l,title:c,data:u,children:[]}),o=!0):f===l&&(i.push({name:a,value:l,title:c,data:u,children:[]}),o=!0)}}),o&&s.children&&s.children.length&&sH(t,s.children,n,i[r])}),i),Zne=(t,e,n)=>{if(!n||!n.length)return t;const i={},s=[];return n.forEach(o=>{N(o,(a,l)=>{i[a]=l})}),t.filter(o=>{let{name:a}=o;return M(i[a])}).forEach(o=>s.push(T({},o))),s.forEach(o=>{const{items:a,data:l,name:c}=o,u=G_(e,[c])[0]||{},d=up(u),p=[],f=[];n.filter(g=>M(g[c])).forEach(g=>{N(g,(y,v)=>{if(!p.filter(C=>C.id===v&&C[d]===y).length){const C=a.filter(S=>S.id===v),x=l.filter(S=>S[d]===v);p.push(...C),f.push(...x)}})}),o.items=p,o.data=f}),s},Qne=(t,e,n,i)=>{const s=e.setter;for(const r in i){const o=i[r],a=iH(t,r)?na(o):o;s[r](n,a)}},Xne=(t,e,n,i)=>{const s=new j,o=(G_(t,[n])[0]||{}).colorExpr||"color",a=lt(o);return Une(t,e,n,i).done(l=>s.resolve(a(l))).fail(()=>s.reject()),s.promise()},Jne=(t,e)=>{const{resources:n,dataAccessors:i,loadedResources:s,resourceLoaderMap:r}=t,{groupIndex:o,groups:a,itemData:l}=e,c=Gne(n||[],a);if(c){const u=aa(c),d=Pc(o,s),p=U_(i,u,"getter");let g=na(p(l))[0];for(let y=0;y<d.length;y++)if(d[y].name===u){g=d[y].id;break}return Xne(n,r,u,g)}return new j().resolve().promise()},KR=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e={getter:{},setter:{}};return t.forEach(n=>{const i=aa(n);e.getter[i]=lt(i),e.setter[i]=uw(i)}),e},eie=(t,e)=>{const n=lt(up(t)),i=lt(YS(t));return e.map(s=>{const r={id:n(s),text:i(s)};return s.color&&(r.color=s.color),r})},jR=(t,e,n)=>{const i=new j,s=[],r=t||[],o=e||[];let a=[];return G_(o,r).forEach(l=>{const c=new j,u=aa(l);s.push(c);const d=W_(l.dataSource).load();n.set(u,d),d.done(p=>{const f=eie(l,p);c.resolve({name:u,items:f,data:p})}).fail(()=>c.reject())}),s.length?(Ne.apply(null,s).done(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];a=c.some(p=>p.items.length===0)?[]:c,i.resolve(a)}).fail(()=>i.reject()),i.promise()):i.resolve(a)},qR=(t,e,n)=>{const i={};return N(e.resources.getter,s=>{const r=e.resources.getter[s](t);if(M(r)){const a=iH(n,s)?na(r):r;i[s]=a}}),i},rH=V.dateToMilliseconds,YR="dx-scheduler-appointment-popup",tie=rH("day"),nie={height:"auto",maxHeight:"100%",showCloseButton:!1,showTitle:!1,preventScrollEvents:!1,enableBodyScroll:!1,defaultOptionsRules:[{device:()=>X.current().android,options:{showTitle:!1}}],_ignorePreventScrollEventsDeprecation:!0},$a={CREATE:0,UPDATE:1,EXCLUDE_FROM_SERIES:2};class iie{constructor(e,n){this.scheduler=e,this.form=n,this.popup=null,this.state={action:null,lastEditData:null,saveChangesLocker:!1,appointment:{data:null}}}get visible(){return this.popup?this.popup.option("visible"):!1}show(e,n){if(this.state.appointment.data=e,this.state.action=n.action,this.state.excludeInfo=n.excludeInfo,!this.popup){const i=this._createPopupConfig();this.popup=this._createPopup(i)}this.popup.option("toolbarItems",$ne(n.isToolbarVisible,i=>this._doneButtonClickHandler(i))),this.popup.show()}hide(){this.popup.hide()}dispose(){var e;(e=this.popup)===null||e===void 0||e.$element().remove()}_createPopup(e){const n=m("<div>").addClass(YR).appendTo(this.scheduler.getElement());return this.scheduler.createComponent(n,xl,e)}_createPopupConfig(){return L({},nie,{onHiding:()=>this.scheduler.focus(),contentTemplate:()=>this._createPopupContent(),onShowing:e=>this._onShowing(e),wrapperAttr:{class:YR}})}_onShowing(e){this._updateForm();const n={form:this.form.dxForm,popup:this.popup,appointmentData:this.state.appointment.data,cancel:!1};this.scheduler.getAppointmentFormOpening()(n),this.scheduler.processActionResult(n,i=>{i?e.cancel=!0:this.updatePopupFullScreenMode()})}_createPopupContent(){return this._createForm(),this.form.dxForm.$element()}_createFormData(e){const n=this._createAppointmentAdapter(e),i=this.scheduler.getDataAccessors(),s=this.scheduler.getResources(),r=qR(e,i,s);return L({},e,r,{repeat:!!n.recurrenceRule})}_createForm(){const e=this.state.appointment.data,n=this._createFormData(e);this.form.create(this.triggerResize.bind(this),this.changeSize.bind(this),n)}_isReadOnly(e){const n=this._createAppointmentAdapter(e);return e&&n.disabled?!0:this.state.action===$a.CREATE?!1:!this.scheduler.getEditingConfig().allowUpdating}_createAppointmentAdapter(e){return ct(e,this.scheduler.getDataAccessors(),this.scheduler.getTimeZoneCalculator())}_updateForm(){const{data:e}=this.state.appointment,n=this._createAppointmentAdapter(this._createFormData(e));n.startDate&&(n.startDate=n.calculateStartDate("toAppointment")),n.endDate&&(n.endDate=n.calculateEndDate("toAppointment"));const i=n.clone().source();this.form.readOnly=this._isReadOnly(i),this.form.updateFormData(i)}triggerResize(){this.popup&&Ji(this.popup.$element())}changeSize(e){if(this.popup){const n=Fne(),i=n?"100%":Hne(e);this.popup.option("fullScreen",n),this.popup.option("maxWidth",i)}}updatePopupFullScreenMode(){if(this.form.dxForm&&this.visible){const{formData:e}=this.form,n=this.scheduler.getDataAccessors(),i=Be.getField(n,"recurrenceRule",e);this.changeSize(i)}}saveChangesAsync(e){const n=new j,i=this.form.dxForm.validate();return e&&this._showLoadPanel(),Ne(i&&i.complete||i).done(s=>{if(s&&!s.isValid){bg(),n.resolve(!1);return}const{repeat:r}=this.form.formData,o=this._createAppointmentAdapter(this.form.formData),a=o.clone({pathTimeZone:"fromAppointment"}),l=!r&&!!a.recurrenceRule;this._addMissingDSTTime(o,a),l&&(a.recurrenceRule="");const c=a.source();switch(delete c.repeat,this.state.action){case $a.CREATE:this.scheduler.addAppointment(c).done(n.resolve);break;case $a.UPDATE:this.scheduler.updateAppointment(this.state.appointment.data,c).done(n.resolve);break;case $a.EXCLUDE_FROM_SERIES:this.scheduler.updateAppointment(this.state.excludeInfo.sourceAppointment,this.state.excludeInfo.updatedAppointment),this.scheduler.addAppointment(c).done(n.resolve)}n.done(()=>{bg(),this.state.lastEditData=c})}),n.promise()}_doneButtonClickHandler(e){e.cancel=!0,this.saveEditDataAsync()}saveEditDataAsync(){const e=new j;return this._tryLockSaveChanges()&&Ne(this.saveChangesAsync(!0)).done(()=>{if(this.state.lastEditData){const n=this._createAppointmentAdapter(this.state.lastEditData),{startDate:i,endDate:s,allDay:r}=n,o=i.getTime(),a=s.getTime(),l=r||a-o>=tie,c=this.scheduler.getDataAccessors(),u=this.scheduler.getResources(),d=qR(this.state.lastEditData,c,u);this.scheduler.updateScrollPosition(i,d,l),this.state.lastEditData=null}this._unlockSaveChanges(),e.resolve()}),e.promise()}_showLoadPanel(){const e=this.popup.$overlayContent();tH({container:e,position:{of:e}})}_tryLockSaveChanges(){return this.state.saveChangesLocker===!1?(this.state.saveChangesLocker=!0,!0):!1}_unlockSaveChanges(){this.state.saveChangesLocker=!1}_addMissingDSTTime(e,n){const i=this.scheduler.getTimeZoneCalculator();n.startDate=this._addMissingDSTShiftToDate(i,e.startDate,n.startDate),n.endDate&&(n.endDate=this._addMissingDSTShiftToDate(i,e.endDate,n.endDate))}_addMissingDSTShiftToDate(e,n,i){var s,r;const o=(s=e.getOffsets(n))===null||s===void 0?void 0:s.common,a=(r=e.getOffsets(i))===null||r===void 0?void 0:r.common,l=o-a;return l?new Date(i.getTime()+l*rH("hour")):i}}const ZR={dateFilter:0,userFilter:1};class sie{constructor(e){this.options=e}get dataAccessors(){return this.options.dataAccessors}get dataSourceFilter(){return this.options.dataSourceFilter}get dateSerializationFormat(){return this.options.dateSerializationFormat}get forceIsoDateParsing(){return M(this.options.forceIsoDateParsing)?this.options.forceIsoDateParsing:!0}makeDateFilter(e,n){const{startDateExpr:i,endDateExpr:s,recurrenceRuleExpr:r}=this.dataAccessors.expr,o=[[[s,">=",e],[i,"<",n]],"or",[r,"startswith","freq"],"or",[[s,e],[i,e]]];return r||o.splice(1,2),o}combineFilters(e,n){const i=[];return e&&i.push(e),n&&i.push(n),this.serializeRemoteFilter(i)}serializeRemoteFilter(e){if(!Array.isArray(e))return e;const{startDateExpr:n,endDateExpr:i}=this.dataAccessors.expr,s=T([],e);if(ve(s[0])&&this.forceIsoDateParsing&&s.length>1&&(s[0]===n||s[0]===i)){const r=s[s.length-1];s[s.length-1]=je.serializeDate(new Date(r),this.dateSerializationFormat)}for(let r=0;r<s.length;r+=1)s[r]=this.serializeRemoteFilter(s[r]);return s}getUserFilter(e){return!this.dataSourceFilter||Bi(this.dataSourceFilter,e)?void 0:this.dataSourceFilter.length>0&&Bi(this.dataSourceFilter[ZR.dateFilter],e)?this.dataSourceFilter[ZR.userFilter]:this.dataSourceFilter}combine(e,n){const[i,s]=_0(e,n),r=this.makeDateFilter(i,s),o=this.getUserFilter(r);return this.combineFilters(r,o)}}const rie=t=>new sie(t).combine(t.min,t.max),Tf={updating:"updating",push:"push"};class oie{constructor(e){this.setDataSource(e),this._updatedAppointmentKeys=[]}get keyName(){return this._dataSource.store().key()}get isDataSourceInit(){return!!this._dataSource}_getStoreKey(e){return this._dataSource.store().keyOf(e)}setDataSource(e){this._dataSource=e,this.cleanState(),this._initStoreChangeHandlers()}_initStoreChangeHandlers(){const e=this._dataSource,n=e==null?void 0:e.store();n&&(n.on(Tf.updating,i=>{const s=n.key();s?this._updatedAppointmentKeys.push({key:s,value:i}):this._updatedAppointment=i}),n.on(Tf.push,i=>{const s=e.items(),r=n.key();i.forEach(o=>{if(s.filter(l=>l[r]===o.key).length!==0)this._updatedAppointmentKeys.push({key:r,value:o.key});else{const{data:l}=o;l&&s.push(l)}}),e.load()}))}getUpdatedAppointment(){return this._updatedAppointment}getUpdatedAppointmentKeys(){return this._updatedAppointmentKeys}cleanState(){this._updatedAppointment=null,this._updatedAppointmentKeys=[]}add(e){return this._dataSource.store().insert(e).done(()=>this._dataSource.load())}update(e,n){const i=this._getStoreKey(e),s=new j;return this._dataSource.store().update(i,n).done(r=>this._dataSource.load().done(()=>s.resolve(r)).fail(s.reject)).fail(s.reject),s.promise()}remove(e){const n=this._getStoreKey(e);return this._dataSource.store().remove(n).done(()=>this._dataSource.load())}destroy(){var e;const n=(e=this._dataSource)===null||e===void 0?void 0:e.store();n&&(n.off(Tf.updating),n.off(Tf.push))}}const oH=V.dateToMilliseconds,aH={virtual:"virtual",standard:"standard"};class lH{constructor(e){this.options=e,this.dataAccessors=this.options.dataAccessors,this._init()}get strategyName(){return aH.standard}get timeZoneCalculator(){return this.options.timeZoneCalculator}get viewStartDayHour(){return this.options.startDayHour}get viewEndDayHour(){return this.options.endDayHour}get timezone(){return this.options.timezone}get firstDayOfWeek(){return this.options.firstDayOfWeek}get showAllDayPanel(){return this.options.showAllDayPanel}get loadedResources(){return this._resolveOption("loadedResources")}get supportAllDayRow(){return this._resolveOption("supportAllDayRow")}get viewType(){return this._resolveOption("viewType")}get viewDirection(){return this._resolveOption("viewDirection")}get dateRange(){return this._resolveOption("dateRange")}get groupCount(){return this._resolveOption("groupCount")}get viewDataProvider(){return this._resolveOption("viewDataProvider")}get allDayPanelMode(){return this._resolveOption("allDayPanelMode")}_resolveOption(e){const n=this.options[e];return typeof n=="function"?n():n}_init(){this.setDataAccessors(this.dataAccessors)}filter(e){const[n,i]=this.dateRange,{viewOffset:s}=this.options,r=!this.showAllDayPanel&&this.supportAllDayRow?!1:void 0;return this.filterLoadedAppointments({startDayHour:this.viewStartDayHour,endDayHour:this.viewEndDayHour,viewOffset:s,viewStartDayHour:this.viewStartDayHour,viewEndDayHour:this.viewEndDayHour,min:n,max:i,resources:this.loadedResources,allDay:r,supportMultiDayAppointments:B_(this.viewType),firstDayOfWeek:this.firstDayOfWeek},e)}hasAllDayAppointments(e,n){const i=e.map(r=>ct(r,this.dataAccessors,this.timeZoneCalculator));let s=!1;return N(i,(r,o)=>{if(Oc(o,this.allDayPanelMode))return s=!0,!1}),s}setDataAccessors(e){this.dataAccessors=e}_createAllDayAppointmentFilter(){return[[e=>Oc(e,this.allDayPanelMode)]]}_createCombinedFilter(e){const n=new Date(e.min),i=new Date(e.max),{startDayHour:s,endDayHour:r,viewOffset:o,viewStartDayHour:a,viewEndDayHour:l,resources:c,firstDayOfWeek:u,checkIntersectViewport:d,supportMultiDayAppointments:p}=e,[f,g]=_0(n,i),y=M(this.dataAccessors.getter.recurrenceRule);return[[v=>{if(!(v.visible??!0))return!1;const{allDay:x,hasRecurrenceRule:S}=v,O=he.addOffsets(v.startDate,[-o]),H=he.addOffsets(v.endDate,[-o]),F=Oc(v,this.allDayPanelMode);if(!S&&!(H>=f&&O<g||V.sameDate(H,f)&&V.sameDate(O,f)))return!1;const I=DS(v),w=I||F;if(c!=null&&c.length&&!this._filterAppointmentByResources(v.rawAppointment,c)||F&&e.allDay===!1)return!1;if(S){const A=FZ(v,this.timeZoneCalculator,this.timezone);if(!this._filterAppointmentByRRule(L({},v,{recurrenceException:A,allDay:F}),n,i,s,r,u))return!1}return!(!x&&p&&w&&H<n&&(!y||y&&!S)||!x&&M(s)&&(!y||!e.isVirtualScrolling)&&!VZ(O,H,s,F,I)||!x&&M(r)&&!BZ({startDate:O,endDate:H,startDayHour:s,endDayHour:r,viewOffset:o,viewStartDayHour:a,viewEndDayHour:l,allDay:F,severalDays:I,min:n,max:i,checkIntersectViewport:d})||!x&&(!w||p)&&H<n&&y&&!S)}]]}_createAppointmentFilter(e){return this._createCombinedFilter(e)}_filterAppointmentByResources(e,n){const i=(r,o)=>{const a=this.dataAccessors.resources.getter[r];let l;ie(a)&&(l=a(e));const c=na(l),u=Yn(n[o].items,d=>{let{id:p}=d;return p});for(let d=0;d<c.length;d++)if(B$(u,c[d]))return!0;return!1};let s=!1;for(let r=0;r<n.length;r++){const o=n[r].name;if(s=i(o,r),!s)return!1}return s}_filterAppointmentByRRule(e,n,i,s,r,o){const{recurrenceRule:a}=e,{recurrenceException:l}=e,{allDay:c}=e;let u=!0;const d=e.startDate,p=e.endDate,f=ks();if(c||$Z(d,p,s,r)){const[g,y]=_0(n,i);n=g,i=new Date(y.getTime()-oH("minute"))}if(a&&!f.isValidRecurrenceRule(a)&&(u=p>n&&d<=i),u&&f.isValidRecurrenceRule(a)){const{viewOffset:g}=this.options;u=f.hasRecurrence({rule:a,exception:l,start:d,end:p,min:he.addOffsets(n,[g]),max:he.addOffsets(i,[g]),firstDayOfWeek:o,appointmentTimezoneOffset:this.timeZoneCalculator.getOriginStartDateOffsetInMs(d,e.startDateTimeZone,!1)})}return u}filterLoadedAppointments(e,n){return this.filterPreparedItems(e,n).map(s=>{let{rawAppointment:r}=s;return r})}filterPreparedItems(e,n){const i=this._createAppointmentFilter(e);return As(n).filter(i).toArray()}filterAllDayAppointments(e){const n=this._createAllDayAppointmentFilter();return As(e).filter(n).toArray().map(i=>{let{rawAppointment:s}=i;return s})}}class aie extends lH{get strategyName(){return aH.virtual}get resources(){return this.options.resources}filter(e){const{viewOffset:n}=this.options,i=oH("hour"),s=ol(this.viewType),r=s&&this.viewDirection==="horizontal",o=!this.supportAllDayRow,a=this.showAllDayPanel||o,l=this.viewDataProvider.getLastViewDateByEndDayHour(this.viewEndDayHour),c=he.addOffsets(l,[n]),u=[];return this.viewDataProvider.getCompletedGroupsInfo().forEach(p=>{const{groupIndex:f}=p,g=p.startDate,y=new Date(Math.min(p.endDate.getTime(),c.getTime())),v=s?g.getHours():this.viewStartDayHour,C=s?v+g.getMinutes()/60+(y.getTime()-g.getTime())/i:this.viewEndDayHour,x=this._getPrerenderFilterResources(f),S=this.viewDataProvider.hasGroupAllDayPanel(f),O=o||!!a&&S;u.push({isVirtualScrolling:!0,startDayHour:v,endDayHour:C,viewOffset:n,viewStartDayHour:this.viewStartDayHour,viewEndDayHour:this.viewEndDayHour,min:he.addOffsets(g,[-n]),max:he.addOffsets(y,[-n]),supportMultiDayAppointments:B_(this.viewType),allDay:O,resources:x,firstDayOfWeek:this.firstDayOfWeek,checkIntersectViewport:r})}),this.filterLoadedAppointments({filterOptions:u,groupCount:this.groupCount},e)}filterPreparedItems(e,n){let{filterOptions:i,groupCount:s}=e;const r=[];let o=n;return s>0&&(o=o.filter(l=>{let{rawAppointment:c}=l;for(let u=0;u<i.length;++u){const{resources:d}=i[u];if(this._filterAppointmentByResources(c,d))return!0}})),i.forEach(l=>{r.length&&r.push("or");const c=this._createAppointmentFilter(l);r.push(c)}),As(o).filter(r).toArray()}hasAllDayAppointments(e,n){return this.filterAllDayAppointments(n).length>0}_getPrerenderFilterResources(e){const n=this.viewDataProvider.getCellsGroup(e);return Zne(this.loadedResources,this.resources,[n])}}const iC={virtual:"virtual",standard:"standard"};class lie{constructor(e){this.options=e,this.dataSource=this.options.dataSource,this.dataAccessors=this.options.dataAccessors,this.timeZoneCalculator=this.options.timeZoneCalculator,this.appointmentDataSource=new oie(this.dataSource),this.initFilterStrategy()}get keyName(){return this.appointmentDataSource.keyName}get isDataSourceInit(){return!!this.dataSource}get filterStrategyName(){return this.options.getIsVirtualScrolling()?iC.virtual:iC.standard}getFilterStrategy(){return(!this.filterStrategy||this.filterStrategy.strategyName!==this.filterStrategyName)&&this.initFilterStrategy(),this.filterStrategy}initFilterStrategy(){const e={resources:this.options.resources,dataAccessors:this.dataAccessors,startDayHour:this.options.startDayHour,endDayHour:this.options.endDayHour,viewOffset:this.options.viewOffset,showAllDayPanel:this.options.showAllDayPanel,timeZoneCalculator:this.options.timeZoneCalculator,loadedResources:this.options.getLoadedResources,supportAllDayRow:this.options.getSupportAllDayRow,viewType:this.options.getViewType,viewDirection:this.options.getViewDirection,dateRange:this.options.getDateRange,groupCount:this.options.getGroupCount,viewDataProvider:this.options.getViewDataProvider,allDayPanelMode:this.options.allDayPanelMode};this.filterStrategy=this.filterStrategyName===iC.virtual?new aie(e):new lH(e)}setDataSource(e){this.dataSource=e,this.initFilterStrategy(),this.appointmentDataSource.setDataSource(this.dataSource)}updateDataAccessors(e){this.dataAccessors=e,this.initFilterStrategy()}filter(e){return this.getFilterStrategy().filter(e)}filterByDate(e,n,i,s){if(!this.dataSource||!i)return;const r=this.dataSource.filter(),o=rie({dataSourceFilter:r,dataAccessors:this.dataAccessors,min:e,max:n,dateSerializationFormat:s,forceIsoDateParsing:Me().forceIsoDateParsing});this.dataSource.filter(o)}hasAllDayAppointments(e,n){return this.getFilterStrategy().hasAllDayAppointments(e,n)}filterLoadedAppointments(e,n){return this.getFilterStrategy().filterLoadedAppointments(e,n)}calculateAppointmentEndDate(e,n){return this.getFilterStrategy().calculateAppointmentEndDate(e,n)}cleanState(){this.appointmentDataSource.cleanState()}getUpdatedAppointment(){return this.appointmentDataSource._updatedAppointment}getUpdatedAppointmentKeys(){return this.appointmentDataSource._updatedAppointmentKeys}add(e){return this.appointmentDataSource.add(e)}update(e,n){return this.appointmentDataSource.update(e,n)}remove(e){return this.appointmentDataSource.remove(e)}destroy(){this.appointmentDataSource.destroy()}}const cie={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},uie=["shading","target","$arrow"],_r={left:-1,top:-1,center:0,right:1,bottom:1},cH={top:{my:"bottom center",at:"top center",collision:"fit flip"},bottom:{my:"top center",at:"bottom center",collision:"fit flip"},right:{my:"left center",at:"right center",collision:"flip fit"},left:{my:"right center",at:"left center",collision:"flip fit"}},die={h:10,v:10};class hie extends pS{constructor(e){let{shading:n,target:i,$arrow:s}=e,r=Mt(e,uie);super(r),this._props=L({},this._props,{shading:n,target:i}),this._$arrow=s,this._positionSide=void 0,this.updatePosition(this._props.position)}positionWrapper(){this._props.shading&&this._$wrapper.css({top:0,left:0})}updateTarget(e){this._props.target=e,this.updatePosition(this._props.position)}_renderBoundaryOffset(){}_getContainerPosition(){const e=dw(this._position.offset||"");let{h:n,v:i}=e;const s=this._isVerticalSide(),r=this._isHorizontalSide();if(s||r){const a=(this._isPopoverInside()?-1:1)*_r[this._positionSide],l=s?Re(this._$arrow):me(this._$arrow),c=this._getContentBorderWidth(this._positionSide),u=a*(l-c);s?i+=u:n+=u}return T({},this._position,{offset:`${n} ${i}`})}_getContentBorderWidth(e){const n=this._$content.css(cie[e]);return parseInt(n)||0}_isPopoverInside(){const e=fi.setup.normalizeAlign(this._position.my),n=fi.setup.normalizeAlign(this._position.at);return e.h===n.h&&e.v===n.v}_isVerticalSide(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._positionSide;return e==="top"||e==="bottom"}_isHorizontalSide(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._positionSide;return e==="left"||e==="right"}_getDisplaySide(e){const n=fi.setup.normalizeAlign(e.my),i=fi.setup.normalizeAlign(e.at),s=_r[n.h]===_r[i.h]&&_r[n.v]===_r[i.v]?-1:1,r=Math.abs(_r[n.h]-s*_r[i.h]),o=Math.abs(_r[n.v]-s*_r[i.v]);return r>o?i.h:i.v}_normalizePosition(e){const n={of:this._props.target,boundaryOffset:die};let i;return M(e)?i=T(!0,{},n,this._positionToObject(e)):i=n,this._positionSide=this._getDisplaySide(i),i}_positionToObject(e){return ve(e)?T({},cH[e]):e}}const QR={left:"right",top:"bottom",right:"left",bottom:"top",center:"center"},uH=function(t){return ue(t)?t.name:t},dH=function(t,e){const n=t.option(e);return uH(n)},pie=function(t,e){const n=t.option(e);return ue(n)&&n.delay},sC=function(t,e){const{target:n,shading:i,disabled:s,hideEvent:r}=t.option(),o=ve(n),a=i&&e==="hide",l=a?null:dH(t,`${e}Event`);if(a&&r&&it.log("W1020"),!l||s)return;const c=K(l,t.NAME),u=t._createAction((function(){const f=pie(t,`${e}Event`);this._clearEventsTimeouts(),f?this._timeouts[e]=setTimeout(()=>{t[e]()},f):t[e]()}).bind(t),{validatingTargetName:"target"}),d=function(f){u({event:f,target:m(f.currentTarget)})},p=`_${e}EventHandler`;if(o)t[p]=d,b.on(W.getDocument(),c,n,d);else{const f=se(m(n));t[p]=void 0,b.on(f,c,d)}},rC=function(t,e,n,i){let s=i||dH(t,`${n}Event`);if(!s)return;s=K(s,t.NAME);const r=`_${n}EventHandler`;t[r]?b.off(W.getDocument(),s,e,t[r]):b.off(se(m(e)),s)},QS=xl.inherit({_getDefaultOptions(){return T(this.callBase(),{target:void 0,shading:!1,position:T({},cH.bottom),hideOnOutsideClick:!0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",from:1,to:0}},showTitle:!1,width:"auto",height:"auto",dragEnabled:!1,resizeEnabled:!1,fullScreen:!1,hideOnParentScroll:!0,arrowPosition:"",arrowOffset:0,_fixWrapperPosition:!0})},_defaultOptionsRules:()=>[{device:{platform:"ios"},options:{arrowPosition:{boundaryOffset:{h:20,v:-10},collision:"fit"}}},{device:()=>!ae(),options:{animation:null}},{device:()=>ii(),options:{useFlatToolbarButtons:!0}},{device:()=>Un(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}],_init(){var t;this.callBase(),this._renderArrow(),this._timeouts={},this.$element().addClass("dx-popover"),this.$wrapper().addClass("dx-popover-wrapper");const e=(t=this.option("toolbarItems"))===null||t===void 0?void 0:t.length;this.setAria("role",e?"dialog":"tooltip")},_render(){this.callBase.apply(this,arguments),this._detachEvents(this.option("target")),this._attachEvents()},_detachEvents(t){rC(this,t,"show"),rC(this,t,"hide")},_attachEvents(){sC(this,"show"),sC(this,"hide")},_renderArrow(){this._$arrow=m("<div>").addClass("dx-popover-arrow").prependTo(this.$overlayContent())},_documentDownHandler(t){return this._isOutsideClick(t)?this.callBase(t):!0},_isOutsideClick(t){return!m(t.target).closest(this.option("target")).length},_animate(t){t&&t.to&&typeof t.to=="object"&&T(t.to,{position:this._getContainerPosition()}),this.callBase.apply(this,arguments)},_stopAnimation(){this.callBase.apply(this,arguments)},_renderTitle(){this.$wrapper().toggleClass("dx-popover-without-title",!this.option("showTitle")),this.callBase()},_renderPosition(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.callBase(),this._renderOverlayPosition(t),this._actions.onPositioned()},_renderOverlayPosition(t){this._resetOverlayPosition(t),this._updateContentSize(t);const e=this._getContainerPosition(),n=fi.setup(this.$overlayContent(),e),i=this._getSideByLocation(n);this._togglePositionClass(`dx-position-${i}`),this._toggleFlippedClass(n.h.flip,n.v.flip),(this._isHorizontalSide()||this._isVerticalSide())&&this._renderArrowPosition(i)},_resetOverlayPosition(t){this._setContentHeight(t),this._togglePositionClass(`dx-position-${this._positionController._positionSide}`),Ft(this.$overlayContent(),{left:0,top:0}),this._$arrow.css({top:"auto",right:"auto",bottom:"auto",left:"auto"})},_updateContentSize(t){if(!this.$content()||!t)return;const e=fi.calculate(this.$overlayContent(),this._getContainerPosition());if(e.h.oversize>0&&this._isHorizontalSide()&&!e.h.fit){const n=me(this.$overlayContent())-e.h.oversize;Ys(this.$overlayContent(),n)}if(e.v.oversize>0&&this._isVerticalSide()&&!e.v.fit){const n=Re(this.$overlayContent())-e.v.oversize,i=Re(this.$content())-e.v.oversize;Ai(this.$overlayContent(),n),Ai(this.$content(),i)}},_getContainerPosition(){return this._positionController._getContainerPosition()},_getHideOnParentScrollTarget(){return m(this._positionController._position.of||this.callBase())},_getSideByLocation(t){const e=t.v.flip,n=t.h.flip;return this._isVerticalSide()&&e||this._isHorizontalSide()&&n||this._isPopoverInside()?QR[this._positionController._positionSide]:this._positionController._positionSide},_togglePositionClass(t){this.$wrapper().removeClass("dx-position-left dx-position-right dx-position-top dx-position-bottom").addClass(t)},_toggleFlippedClass(t,e){this.$wrapper().toggleClass("dx-popover-flipped-horizontal",t).toggleClass("dx-popover-flipped-vertical",e)},_renderArrowPosition(t){const e=ke(this._$arrow.get(0)),n=-(this._isVerticalSide(t)?e.height:e.width);this._$arrow.css(QR[t],n);const i=this._isVerticalSide(t)?"left":"top",s=this._isVerticalSide(t)?"width":"height",r=m(this._positionController._position.of),o=fi.offset(r)||{top:0,left:0},a=fi.offset(this.$overlayContent()),l=e[s],c=a[i],u=ke(this.$overlayContent().get(0))[s],d=o[i],p=r.get(0),f=p&&!p.preventDefault?ke(p)[s]:0,g=Math.max(c,d),y=Math.min(c+u,d+f);let v;this.option("arrowPosition")==="start"?v=g-c:this.option("arrowPosition")==="end"?v=y-c-l:v=(g+y)/2-c-l/2;const C=this._positionController._getContentBorderWidth(t),x=pn(v-C+this.option("arrowOffset"),C,u-l-2*C);this._$arrow.css(i,x)},_isPopoverInside(){return this._positionController._isPopoverInside()},_setContentHeight(t){t&&this.callBase()},_getPositionControllerConfig(){const{shading:t,target:e}=this.option();return T({},this.callBase(),{target:e,shading:t,$arrow:this._$arrow})},_initPositionController(){this._positionController=new hie(this._getPositionControllerConfig())},_renderWrapperDimensions(){this.option("shading")&&this.$wrapper().css({width:"100%",height:"100%"})},_isVerticalSide(t){return this._positionController._isVerticalSide(t)},_isHorizontalSide(t){return this._positionController._isHorizontalSide(t)},_clearEventTimeout(t){clearTimeout(this._timeouts[t])},_clearEventsTimeouts(){this._clearEventTimeout("show"),this._clearEventTimeout("hide")},_clean(){this._detachEvents(this.option("target")),this.callBase.apply(this,arguments)},_optionChanged(t){switch(t.name){case"arrowPosition":case"arrowOffset":this._renderGeometry();break;case"fullScreen":t.value&&this.option("fullScreen",!1);break;case"target":t.previousValue&&this._detachEvents(t.previousValue),this._positionController.updateTarget(t.value),this._invalidate();break;case"showEvent":case"hideEvent":{const e=t.name.substring(0,4),n=uH(t.previousValue);this.hide(),rC(this,this.option("target"),e,n),sC(this,e);break}case"visible":this._clearEventTimeout(t.value?"show":"hide"),this.callBase(t);break;default:this.callBase(t)}},show(t){return t&&this.option("target",t),this.callBase()}});re("dxPopover",QS);const XS=QS.inherit({_getDefaultOptions(){return T(this.callBase(),{toolbarItems:[],showCloseButton:!1,enableBodyScroll:!0,showTitle:!1,title:null,titleTemplate:null,onTitleRendered:null,bottomTemplate:null,preventScrollEvents:!1,propagateOutsideClick:!0})},_render(){this.$element().addClass("dx-tooltip"),this.$wrapper().addClass("dx-tooltip-wrapper"),this.callBase()},_renderContent(){this.callBase(),this._toggleAriaAttributes()},_toggleAriaDescription(t){const e=m(this.option("target")),n=t?this._contentId:void 0;bt(e.get(0))||this.setAria("describedby",n,e)},_toggleAriaAttributes(){this._contentId=`dx-${new Et}`,this.$overlayContent().attr({id:this._contentId}),this._toggleAriaDescription(!0)}});re("dxTooltip",XS);let Zc=null,hH=null;const fie=function(t){t=T({position:"top"},t);const{content:e}=t;delete t.content;const n=m("<div>").html(e).appendTo(tr());hH=function(){n.remove()},Zc=new XS(n,t)},pH=function(){Zc&&(hH(),Zc=null)};function mie(t){return pH(),fie(t),Zc.show()}function gie(){return Zc?Zc.hide().done(pH).promise():j().resolve()}const XR=K(ot.enter,"dxSchedulerAppointment"),JR=K(ot.leave,"dxSchedulerAppointment");class JS extends us{get coloredElement(){return this.$element()}get rawAppointment(){return this.option("data")}_getDefaultOptions(){return T(super._getDefaultOptions(),{data:{},groupIndex:-1,groups:[],geometry:{top:0,left:0,width:0,height:0},allowDrag:!0,allowResize:!0,reduced:null,isCompact:!1,direction:"vertical",resizableConfig:{keepAspectRatio:!1},cellHeight:0,cellWidth:0,isDragSource:!1})}notifyObserver(e,n){const i=this.option("observer");i&&i.fire(e,n)}invoke(e){const n=this.option("observer");if(n)return n.fire.apply(n,arguments)}_optionChanged(e){switch(e.name){case"data":case"groupIndex":case"geometry":case"allowDrag":case"allowResize":case"reduced":case"sortedIndex":case"isCompact":case"direction":case"resizableConfig":case"cellHeight":case"cellWidth":this._invalidate();break;case"isDragSource":this._renderDragSourceClass();break;default:super._optionChanged(e)}}_getHorizontalResizingRule(){const e={head:this.option("rtlEnabled")?"right":"left",body:"",tail:this.option("rtlEnabled")?"left":"right"},n=this.option("getResizableStep"),i=n?n():0;return{handles:this.option("reduced")?e[this.option("reduced")]:"left right",minHeight:0,minWidth:this.invoke("getCellWidth"),step:i,roundStepValue:!1}}_getVerticalResizingRule(){const e=Math.round(this.invoke("getCellHeight"));return{handles:"top bottom",minWidth:0,minHeight:e,step:e,roundStepValue:!0}}_render(){super._render(),this._renderAppointmentGeometry(),this._renderEmptyClass(),this._renderReducedAppointment(),this._renderAllDayClass(),this._renderDragSourceClass(),this._renderDirection(),this.$element().data("dxAppointmentStartDate",this.option("startDate"));const e=Be.getField(this.option("dataAccessors"),"text",this.rawAppointment);this.$element().attr("title",e),this.$element().attr("role","button"),this._renderRecurrenceClass(),this._renderResizable(),this._setResourceColor()}_setResourceColor(){const e={itemData:this.rawAppointment,groupIndex:this.option("groupIndex"),groups:this.option("groups")};this.option("getAppointmentColor")(e).done(i=>{i&&(this.coloredElement.css("backgroundColor",i),this.coloredElement.addClass(J7))})}_renderAppointmentGeometry(){const e=this.option("geometry"),n=this.$element();Ft(n,{top:e.top,left:e.left}),n.css({width:e.width<0?0:e.width,height:e.height<0?0:e.height})}_renderEmptyClass(){(this.option("geometry").empty||this.option("isCompact"))&&this.$element().addClass(j7)}_renderReducedAppointment(){const e=this.option("reduced");e&&(this.$element().toggleClass(G7,!0).toggleClass(Y7[e],!0),this._renderAppointmentReducedIcon())}_renderAppointmentReducedIcon(){const e=m("<div>").addClass(U7).appendTo(this.$element()),n=this._getEndDate(),s=[q.format("dxScheduler-editorLabelEndDate"),": ",ee.format(n,"monthAndDay"),", ",ee.format(n,"year")].join("");b.off(e,XR),b.on(e,XR,()=>{mie({target:e,content:s})}),b.off(e,JR),b.on(e,JR,()=>{gie()})}_getEndDate(){const e=Be.getField(this.option("dataAccessors"),"endDate",this.rawAppointment);return e&&new Date(e)}_renderAllDayClass(){this.$element().toggleClass(q7,!!this.option("allDay"))}_renderDragSourceClass(){this.$element().toggleClass(P$,!!this.option("isDragSource"))}_renderRecurrenceClass(){const e=Be.getField(this.option("dataAccessors"),"recurrenceRule",this.rawAppointment);ks().isValidRecurrenceRule(e)&&this.$element().addClass(K7)}_renderDirection(){this.$element().addClass(Z7[this.option("direction")])}_createResizingConfig(){const e=this.option("direction")==="vertical"?this._getVerticalResizingRule():this._getHorizontalResizingRule();return this.invoke("isGroupedByDate")||(e.stepPrecision="strict"),e}_renderResizable(){this.option("allowResize")&&this._createComponent(this.$element(),fS,T(this._createResizingConfig(),this.option("resizableConfig")))}_useTemplates(){return!1}}re("dxSchedulerAppointment",JS);class _ie extends JS{get coloredElement(){return this.$element().find(`.${wn.AGENDA_MARKER}`)}_getDefaultOptions(){return T(super._getDefaultOptions(),{createPlainResourceListAsync:new j})}_renderResourceList(e,n){n.forEach(i=>{const s=m("<div>").addClass(wn.AGENDA_RESOURCE_LIST_ITEM).appendTo(e);m("<div>").text(`${i.label}:`).appendTo(s),m("<div>").addClass(wn.AGENDA_RESOURCE_LIST_ITEM_VALUE).text(i.values.join(", ")).appendTo(s)})}_render(){super._render(),this.option("createPlainResourceListAsync")(this.rawAppointment).done(n=>{const i=this.$element().find(`.${wn.APPOINTMENT_CONTENT_DETAILS}`),s=m("<div>").addClass(wn.AGENDA_RESOURCE_LIST).appendTo(i);this._renderResourceList(s,n)})}}const fH=` ${q.format("dxScheduler-allDay")}: `,yie=(t,e)=>{const n=m(W.createDocumentFragment());m("<div>").text(t.text).addClass(wn.APPOINTMENT_TITLE).appendTo(n),e.html&&n.html(e.html);const i=m("<div>").addClass(wn.APPOINTMENT_CONTENT_DETAILS).appendTo(n);return m("<div>").addClass(wn.APPOINTMENT_DATE).text(t.formatDate).appendTo(i),e.isRecurrence&&m("<span>").addClass(`${wn.RECURRING_ICON} dx-icon-repeat`).appendTo(n),e.isAllDay&&m("<div>").text(fH).addClass(wn.ALL_DAY_CONTENT).prependTo(i),n},vie=(t,e)=>{const n=m(W.createDocumentFragment()),i=m("<div>").addClass("dx-scheduler-agenda-appointment-left-layout").appendTo(n),s=m("<div>").addClass("dx-scheduler-agenda-appointment-right-layout").appendTo(n),r=m("<div>").addClass(wn.AGENDA_MARKER).appendTo(i);e.isRecurrence&&m("<span>").addClass(`${wn.RECURRING_ICON} dx-icon-repeat`).appendTo(r),m("<div>").addClass(wn.APPOINTMENT_TITLE).text(t.text).appendTo(s);const o=m("<div>").addClass(wn.APPOINTMENT_CONTENT_DETAILS).appendTo(s);return m("<div>").addClass(wn.APPOINTMENT_DATE).text(t.formatDate).appendTo(o),e.isAllDay&&m("<div>").text(fH).addClass(wn.ALL_DAY_CONTENT).prependTo(o),n},mH=t=>{const{cellHeight:e,cellWidth:n,viewDataProvider:i,relativeAppointmentRect:s,appointmentSettings:r,rtlEnabled:o}=t,a=Math.floor(s.top/e),l=Math.round(s.left/n);return i.getCellData(a,l,r.allDay,o)},Cie=t=>{const{cellWidth:e,cellCountInRow:n,relativeAppointmentRect:i,viewDataProvider:s,appointmentSettings:r,handles:o}=t,a=mH(t),l=Math.round(i.width/e),c=a.index+(l-1),{sourceAppointment:u}=r.info,{allDay:d}=r.info.appointment;if(o.left)return{startDate:a.startDate,endDate:a.startDate>u.endDate?a.startDate:u.endDate};const p=Math.floor(c/n),f=c%n,g=s.getCellData(p,f,d),y=t.considerTime?g.startDate:g.endDate;return{startDate:y<u.startDate?y:u.startDate,endDate:y}},Die=t=>{const{viewDataProvider:e,cellCountInRow:n,appointmentSettings:i,handles:s,cellWidth:r,relativeAppointmentRect:o}=t,a=mH(t),{sourceAppointment:l}=i.info,{allDay:c}=i.info.appointment;if(s.right){const d=a.index,p=Math.round(o.width/r),f=d-p+1,g=Math.floor(d/n),y=e.getCellData(g,f,c,!0);return{startDate:y.startDate,endDate:y.startDate>l.endDate?y.startDate:l.endDate}}const u=t.considerTime?a.startDate:a.endDate;return{startDate:u<l.startDate?u:l.startDate,endDate:u}},xie=(t,e)=>{const n=t.left-e.left,i=t.top-e.top,s=n<0?t.width+n:t.width,r=i<0?t.height+i:t.height;return{left:Math.max(0,n),top:Math.max(0,i),width:s,height:r}},wie=t=>{const{appointmentSettings:e,isVerticalGroupedWorkSpace:n,DOMMetaData:i}=t,s=e.allDay&&!n?[i.allDayPanelCellsMeta]:i.dateTableCellsMeta,{positionByMap:r}=e,{height:o,width:a}=s[r.rowIndex][r.columnIndex],l=s[r.rowIndex].length;return{cellWidth:a,cellHeight:o,cellCountInRow:l}},Sie=t=>{const{appointmentSettings:e}=t,n=xie(t.appointmentRect,t.parentAppointmentRect),i=wie(t),s=!t.isDateAndTimeView||e.allDay,r=L({},t,i,{considerTime:s,relativeAppointmentRect:n});return t.rtlEnabled?Die(r):Cie(r)},bie="dx-scheduler-scrollable-appointments",eO=K(BS,"dxSchedulerAppointment"),tO=V.dateToMilliseconds;class gH extends ia{get isAgendaView(){return this.invoke("isCurrentViewAgenda")}get isVirtualScrolling(){return this.invoke("isVirtualScrolling")}get appointmentDataProvider(){return this.option("getAppointmentDataProvider")()}constructor(e,n){super(e,n),this._virtualAppointments={}}option(e,n){return super.option(...arguments)}notifyObserver(e,n){const i=this.option("observer");i&&i.fire(e,n)}invoke(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];const r=this.option("observer");if(r)return r.fire.apply(r,arguments)}_dispose(){clearTimeout(this._appointmentClickTimeout),super._dispose()}_supportedKeys(){const e=super._supportedKeys(),n=this._$currentAppointment;return T(e,{escape:(function(){if(this.resizeOccur){var i,s,r;this.moveAppointmentBack(),this.resizeOccur=!1,(i=n.dxResizable("instance"))===null||i===void 0||i._detachEventHandlers(),(s=n.dxResizable("instance"))===null||s===void 0||s._attachEventHandlers(),(r=n.dxResizable("instance"))===null||r===void 0||r._toggleResizingClass(!1)}}).bind(this),del:(function(i){if(this.option("allowDelete")){i.preventDefault();const s=this._getItemData(i.target);this.notifyObserver("onDeleteButtonPress",{data:s,target:i.target})}}).bind(this),tab:function(i){const s=this._getAccessAppointments();let o=s.filter(".dx-state-focused").data(Dr).sortedIndex;const a=s.length-1;if(o>0&&i.shiftKey||o<a&&!i.shiftKey){i.preventDefault(),i.shiftKey?o--:o++;const l=this._getAppointmentByIndex(o);this._resetTabIndex(l),b.trigger(l,"focus")}}})}_getAppointmentByIndex(e){return this._getAccessAppointments().filter((i,s)=>st(s,Dr).sortedIndex===e).eq(0)}_getAccessAppointments(){return this._itemElements().filter(":visible").not(".dx-state-disabled")}_resetTabIndex(e){this._focusTarget().attr("tabIndex",-1),e.attr("tabIndex",this.option("tabIndex"))}_moveFocus(){}_focusTarget(){return this._itemElements()}_renderFocusTarget(){const e=this._getAppointmentByIndex(0);this._resetTabIndex(e)}_focusInHandler(e){super._focusInHandler(e),this._$currentAppointment=m(e.target),this.option("focusedElement",se(m(e.target)))}_focusOutHandler(e){const n=this._getAppointmentByIndex(0);this.option("focusedElement",se(n)),super._focusOutHandler(e)}_eventBindingTarget(){return this._itemContainer()}_getDefaultOptions(){return T(super._getDefaultOptions(),{noDataText:null,activeStateEnabled:!0,hoverStateEnabled:!0,tabIndex:0,fixedContainer:null,allDayContainer:null,allowDrag:!0,allowResize:!0,allowAllDayResize:!0,onAppointmentDblClick:null,_collectorOffset:0,groups:[],resources:[]})}_optionChanged(e){switch(e.name){case"items":this._cleanFocusState(),this._clearDropDownItems(),this._clearDropDownItemsElements(),this._repaintAppointments(e.value),this._renderDropDownAppointments(),this._attachAppointmentsEvents();break;case"fixedContainer":case"allDayContainer":case"onAppointmentDblClick":case"allowDelete":break;case"allowDrag":case"allowResize":case"allowAllDayResize":this._invalidate();break;case"focusedElement":this._resetTabIndex(m(e.value)),super._optionChanged(e);break;case"focusStateEnabled":this._clearDropDownItemsElements(),this._renderDropDownAppointments(),super._optionChanged(e);break;default:super._optionChanged(e)}}_isAllDayAppointment(e){return e.settings.length&&e.settings[0].allDay||!1}_isRepaintAppointment(e){return!M(e.needRepaint)||e.needRepaint===!0}_isRepaintAll(e){if(this.isAgendaView)return!0;for(let n=0;n<e.length;n++)if(!this._isRepaintAppointment(e[n]))return!1;return!0}_applyFragment(e,n){e.children().length>0&&this._getAppointmentContainer(n).append(e)}_onEachAppointment(e,n,i,s){const r=()=>{e.needRepaint=!1,this._clearItem(e),this._renderItem(n,e,i)};(e==null?void 0:e.needRemove)===!0?this._clearItem(e):(s||this._isRepaintAppointment(e))&&r()}_repaintAppointments(e){this._renderByFragments((n,i)=>{const s=this._isRepaintAll(e);s&&(this._getAppointmentContainer(!0).html(""),this._getAppointmentContainer(!1).html("")),!e.length&&this._cleanItemContainer(),e.forEach((r,o)=>{const a=this._isAllDayAppointment(r)?i:n;this._onEachAppointment(r,o,a,s)})})}_renderByFragments(e){if(this.isVirtualScrolling){const n=m(W.createDocumentFragment()),i=m(W.createDocumentFragment());e(n,i),this._applyFragment(n,!1),this._applyFragment(i,!0)}else e(this._getAppointmentContainer(!1),this._getAppointmentContainer(!0))}_attachAppointmentsEvents(){this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent(),this._attachAppointmentDblClick(),this._renderFocusState(),this._attachFeedbackEvents(),this._attachHoverEvents()}_clearItem(e){const n=this._findItemElementByItem(e.itemData);n.length&&N(n,(i,s)=>{s.detach(),s.remove()})}_clearDropDownItems(){this._virtualAppointments={}}_clearDropDownItemsElements(){this.invoke("clearCompactAppointments")}_findItemElementByItem(e){const n=[],i=this;return this.itemElements().each(function(){const s=m(this);s.data(i._itemDataKey())===e&&n.push(s)}),n}_itemClass(){return Q7}_itemContainer(){const e=super._itemContainer();let n=e;const i=this.option("allDayContainer");return i&&(n=e.add(i)),n}_cleanItemContainer(){super._cleanItemContainer();const e=this.option("allDayContainer");e&&e.empty(),this._virtualAppointments={}}_clean(){super._clean(),delete this._$currentAppointment,delete this._initialSize,delete this._initialCoordinates}_init(){super._init(),this.$element().addClass(bie),this._preventSingleAppointmentClick=!1}_renderAppointmentTemplate(e,n,i){var s;const r={isAllDay:n.allDay,isRecurrence:n.recurrenceRule,html:Ce(n)&&n.html?n.html:void 0},o=this.invoke("getTextAndFormatDate",i.appointmentData,((s=this._currentAppointmentSettings)===null||s===void 0?void 0:s.agendaSettings)||i.targetedAppointmentData,"TIME");e.append(this.isAgendaView?vie(o,r):yie(o,r)),this.isAgendaView||e.parent().prepend(m("<div>").addClass(wn.STRIP))}_executeItemRenderAction(e,n,i){const s=this._getItemRenderAction();s&&s(this.invoke("mapAppointmentFields",{itemData:n,itemElement:i})),delete this._currentAppointmentSettings}_itemClickHandler(e){super._itemClickHandler(e,{},{afterExecute:(function(n){this._processItemClick(n.args[0].event)}).bind(this)})}_processItemClick(e){const n=m(e.currentTarget),i=this._getItemData(n);if(e.type==="keydown"||F6(e)){this.notifyObserver("showEditAppointmentPopup",{data:i,target:n});return}this._appointmentClickTimeout=setTimeout(()=>{!this._preventSingleAppointmentClick&&rK(n)&&this.notifyObserver("showAppointmentTooltip",{data:i,target:n}),this._preventSingleAppointmentClick=!1},300)}_extendActionArgs(e){const n=super._extendActionArgs(e);return this.invoke("mapAppointmentFields",n)}_render(){super._render(),this._attachAppointmentDblClick()}_attachAppointmentDblClick(){const e=this,n=e._itemSelector(),i=this._itemContainer();b.off(i,eO,n),b.on(i,eO,n,s=>{e._itemDXEventHandler(s,"onAppointmentDblClick",{},{afterExecute(r){e._dblClickHandler(r.args[0].event)}})})}_dblClickHandler(e){const n=m(e.currentTarget),i=this._getItemData(n);clearTimeout(this._appointmentClickTimeout),this._preventSingleAppointmentClick=!0,this.notifyObserver("showEditAppointmentPopup",{data:i,target:n})}_renderItem(e,n,i){const{itemData:s}=n,r=[];for(let o=0;o<n.settings.length;o++){const a=n.settings[o];this._currentAppointmentSettings=a;const l=super._renderItem(e,s,i);l.data(Dr,a),r.push(l)}return r}_getItemContent(e){return e.data(Dr,this._currentAppointmentSettings),super._getItemContent(e)}_createItemByTemplate(e,n){const{itemData:i,container:s,index:r}=n;return e.render({model:{appointmentData:i,targetedAppointmentData:this.invoke("getTargetedAppointmentData",i,m(s).parent())},container:s,index:r})}_getAppointmentContainer(e){const n=this.option("allDayContainer");let i=this.itemsContainer().not(n);return e&&n&&(i=n),i}_postprocessRenderItem(e){this._renderAppointment(e.itemElement,this._currentAppointmentSettings)}_renderAppointment(e,n){e.data(Dr,n),this._applyResourceDataAttr(e);const i=this._getItemData(e),s=this.invoke("getAppointmentGeometry",n),r=this.option("allowResize")&&(!M(n.skipResizing)||ve(n.skipResizing)),o=this.option("allowDrag"),{allDay:a}=n;if(this.invoke("setCellDataCacheAlias",this._currentAppointmentSettings,s),n.virtual){const c={itemData:i,groupIndex:n.groupIndex,groups:this.option("groups")},u=this.option("getAppointmentColor")(c);this._processVirtualAppointment(n,e,i,u)}else{var l;const c={data:i,groupIndex:n.groupIndex,observer:this.option("observer"),geometry:s,direction:n.direction||"vertical",allowResize:r,allowDrag:o,allDay:a,reduced:n.appointmentReduced,isCompact:n.isCompact,startDate:new Date((l=n.info)===null||l===void 0?void 0:l.appointment.startDate),cellWidth:this.invoke("getCellWidth"),cellHeight:this.invoke("getCellHeight"),resizableConfig:this._resizableConfig(i,n),groups:this.option("groups"),getAppointmentColor:this.option("getAppointmentColor"),getResourceDataAccessors:this.option("getResourceDataAccessors")};if(this.isAgendaView){const u=this.option("getAgendaResourceProcessor")();c.createPlainResourceListAsync=d=>u.createListAsync(d)}this._createComponent(e,this.isAgendaView?_ie:JS,L({},c,{dataAccessors:this.option("dataAccessors"),getResizableStep:this.option("getResizableStep")}))}}_applyResourceDataAttr(e){const n=this.option("getResourceDataAccessors")(),i=this._getItemData(e);N(n.getter,s=>{const r=n.getter[s](i);if(M(r)){const o=`data-${fI(s.toLowerCase())}-`;na(r).forEach(a=>e.attr(o+fI(a),!0))}})}_resizableConfig(e,n){return{area:this._calculateResizableArea(n,e),onResizeStart:(function(i){if(this.resizeOccur=!0,this._$currentAppointment=m(i.element),this.invoke("needRecalculateResizableArea")){const s=this._calculateResizableArea(this._$currentAppointment.data(Dr),this._$currentAppointment.data("dxItemData"));i.component.option("area",s),i.component._renderDragOffsets(i.event)}this._initialSize={width:i.width,height:i.height},this._initialCoordinates=Gn(this._$currentAppointment)}).bind(this),onResizeEnd:(function(i){this.resizeOccur=!1,this._resizeEndHandler(i)}).bind(this)}}_calculateResizableArea(e,n){const i=this.$element().closest(".dx-scrollable-content");return this.invoke("getResizableAppointmentArea",{coordinates:{left:e.left,top:0,groupIndex:e.groupIndex},allDay:e.allDay})||i}_resizeEndHandler(e){const n=m(e.element),{allDay:i,info:s}=n.data("dxAppointmentSettings"),r=this._getItemData(n),o=this.invoke("getViewOffsetMs");let a;if(i)a=this.resizeAllDay(e);else{const l=this._getEndResizeAppointmentStartDate(e,r,s.appointment),{endDate:c}=s.appointment,u=he.addOffsets(l,[-o]),d=he.addOffsets(c,[-o]);a=this._getDateRange(e,u,d),a.startDate=he.addOffsets(a.startDate,[o]),a.endDate=he.addOffsets(a.endDate,[o])}this.updateResizedAppointment(n,a,this.option("dataAccessors"),this.option("timeZoneCalculator"))}resizeAllDay(e){const n=m(e.element),i=this.option("timeZoneCalculator"),s=this.option("dataAccessors");return Sie({handles:e.handles,appointmentSettings:n.data("dxAppointmentSettings"),isVerticalViewDirection:this.option("isVerticalViewDirection")(),isVerticalGroupedWorkSpace:this.option("isVerticalGroupedWorkSpace")(),appointmentRect:ke(n[0]),parentAppointmentRect:ke(n.parent()[0]),viewDataProvider:this.option("getViewDataProvider")(),isDateAndTimeView:this.option("isDateAndTimeView")(),startDayHour:this.invoke("getStartDayHour"),endDayHour:this.invoke("getEndDayHour"),timeZoneCalculator:i,dataAccessors:s,rtlEnabled:this.option("rtlEnabled"),DOMMetaData:this.option("getDOMElementsMetaData")(),viewOffset:this.invoke("getViewOffsetMs")})}updateResizedAppointment(e,n,i,s){const r=this._getItemData(e),o=ct(r,i,s).clone();o.startDate=new Date(n.startDate),o.endDate=new Date(n.endDate),this.notifyObserver("updateAppointmentAfterResize",{target:r,data:o.clone({pathTimeZone:"fromGrid"}).source(),$appointment:e})}_getEndResizeAppointmentStartDate(e,n,i){const s=this.option("timeZoneCalculator"),r=ct(n,this.option("dataAccessors"),s);let{startDate:o}=i;const a=ks(),{recurrenceRule:l,startDateTimeZone:c}=r,u=this.invoke("isAllDay",n),d=a.isValidRecurrenceRule(l);return!e.handles.top&&!d&&!u&&(o=s.createDate(r.startDate,{appointmentTimeZone:c,path:"toGrid"})),o}_getDateRange(e,n,i){const s=this._getItemData(e.element),r=this.invoke("getDeltaTime",e,this._initialSize,s),o=this.invoke("getRenderingStrategyDirection");let a=!1;const l=this.invoke("isAllDay",s),c=this.invoke("needCorrectAppointmentDates")&&!l;let u,d;return o!=="vertical"||l?a=this.option("rtlEnabled")?e.handles.right:e.handles.left:a=e.handles.top,a?(u=c?this._correctStartDateByDelta(n,r):n.getTime()-r,u+=De.getTimezoneOffsetChangeInMs(n,i,u,i),d=i.getTime()):(u=n.getTime(),d=c?this._correctEndDateByDelta(i,r):i.getTime()+r,d-=De.getTimezoneOffsetChangeInMs(n,i,n,d)),{startDate:new Date(u),endDate:new Date(d)}}_correctEndDateByDelta(e,n){const i=this.invoke("getEndDayHour"),s=this.invoke("getStartDayHour"),r=new Date(e),o=new Date(e),a=new Date(e);o.setHours(s,0,0,0),r.setHours(i,0,0,0),a>r&&a.setHours(i,0,0,0);let l=a.getTime()+n;const c=(i-s)*tO("hour"),u=n>0?Math.ceil(n/c):Math.floor(n/c);if(l>r.getTime()||l<=o.getTime()){const d=r.getTime()-a.getTime(),p=n-d,f=new Date(a).setDate(a.getDate()+u),g=new Date(f);g.setHours(s,0,0,0),l=g.getTime()+p-c*(u-1)}return l}_correctStartDateByDelta(e,n){const i=this.invoke("getEndDayHour"),s=this.invoke("getStartDayHour"),r=new Date(e),o=new Date(e),a=new Date(e);o.setHours(s,0,0,0),r.setHours(i,0,0,0),a<o&&a.setHours(s,0,0,0);let l=a.getTime()-n;const c=(i-s)*tO("hour"),u=n>0?Math.ceil(n/c):Math.floor(n/c);if(l<o.getTime()||l>=r.getTime()){const d=a.getTime()-o.getTime(),p=n-d,f=new Date(a.setDate(a.getDate()-u));f.setHours(i,0,0,0),l=f.getTime()-p+c*(u-1)}return l}_processVirtualAppointment(e,n,i,s){const r=e.virtual,o=r.index;M(this._virtualAppointments[o])||(this._virtualAppointments[o]={coordinates:{top:r.top,left:r.left},items:{data:[],colors:[],settings:[]},isAllDay:!!r.isAllDay,buttonColor:s}),e.targetedAppointmentData=this.invoke("getTargetedAppointmentData",i,n),this._virtualAppointments[o].items.settings.push(e),this._virtualAppointments[o].items.data.push(i),this._virtualAppointments[o].items.colors.push(s),n.remove()}_renderContentImpl(){super._renderContentImpl(),this._renderDropDownAppointments()}_renderDropDownAppointments(){this._renderByFragments((e,n)=>{N(this._virtualAppointments,i=>{const s=this._virtualAppointments[i],r=s.items,o=s.coordinates,a=s.isAllDay?n:e,{left:l}=o,c=this.invoke("getDropDownAppointmentWidth",s.isAllDay),u=this.invoke("getDropDownAppointmentHeight"),d=this.option("rtlEnabled")?c:0;this.notifyObserver("renderCompactAppointments",{$container:a,coordinates:{top:o.top,left:l+d},items:r,buttonColor:s.buttonColor,width:c-this.option("_collectorOffset"),height:u,onAppointmentClick:this.option("onItemClick"),allowDrag:this.option("allowDrag"),cellWidth:this.invoke("getCellWidth"),isCompact:this.invoke("isAdaptive")||this._isGroupCompact(s)})})})}_isGroupCompact(e){return!e.isAllDay&&this.invoke("supportCompactDropDownAppointments")}_sortAppointmentsByStartDate(e){return tF(e,this.option("dataAccessors"))}_processRecurrenceAppointment(e,n,i){const s=Be.getField(this.option("dataAccessors"),"recurrenceRule",e),r={parts:[],indexes:[]};if(s){const o=e.settings||e,a=new Date(Be.getField(this.option("dataAccessors"),"startDate",o)),l=Be.getField(this.option("dataAccessors"),"startDateTimeZone",e),c=new Date(Be.getField(this.option("dataAccessors"),"endDate",o)),u=c.getTime()-a.getTime(),d=Be.getField(this.option("dataAccessors"),"recurrenceException",e),p=this.invoke("getStartViewDate"),f=this.invoke("getEndViewDate"),g=this.option("timeZoneCalculator"),y=ks().generateDates({rule:s,exception:d,start:a,end:c,min:p,max:f,appointmentTimezoneOffset:g.getOriginStartDateOffsetInMs(a,l,!1)}),v=e.settings?1:y.length;for(let C=0;C<v;C++){const x=T({},e,!0);if(y[C]){const S=this._applyStartDateToObj(y[C],{});this._applyEndDateToObj(new Date(y[C].getTime()+u),S),x.settings=S}else x.settings=o;r.parts.push(x),i||this._processLongAppointment(x,r)}r.indexes.push(n)}return r}_processLongAppointment(e,n){const i=this.splitAppointmentByDay(e),s=i.length,r=this.invoke("getEndViewDate").getTime(),o=this.invoke("getStartViewDate").getTime(),a=this.option("timeZoneCalculator");if(n=n||{parts:[]},s>1){T(e,i[0]);for(let l=1;l<s;l++){let c=Be.getField(this.option("dataAccessors"),"startDate",i[l].settings).getTime();c=a.createDate(c,{path:"toGrid"}),c<r&&c>o&&n.parts.push(i[l])}}return n}_reduceRecurrenceAppointments(e,n){N(e,(i,s)=>{n.splice(s-i,1)})}_combineAppointments(e,n){n.length&&e.push(...n),this._sortAppointmentsByStartDate(e)}_applyStartDateToObj(e,n){return Be.setField(this.option("dataAccessors"),"startDate",n,e),n}_applyEndDateToObj(e,n){return Be.setField(this.option("dataAccessors"),"endDate",n,e),n}moveAppointmentBack(e){const n=this._$currentAppointment,i=this._initialSize,s=this._initialCoordinates;e&&(this._removeDragSourceClassFromDraggedAppointment(),Fh(e.cancel)?e.cancel.resolve(!0):e.cancel=!0),n&&!e&&(s&&(Ft(n,s),delete this._initialSize),i&&(NU(n,i.width),Sw(n,i.height),delete this._initialCoordinates))}focus(){if(this._$currentAppointment){const e=se(this._$currentAppointment);this.option("focusedElement",e),b.trigger(e,"focus")}}splitAppointmentByDay(e){const n=e.settings||e,i=this.option("dataAccessors"),s=new Date(Be.getField(i,"startDate",n));let r=V.makeDate(s),o=V.makeDate(Be.getField(i,"endDate",n));const a=this.invoke("getEndViewDate"),l=this.invoke("getStartDayHour"),c=this.invoke("getEndDayHour"),u=this.option("timeZoneCalculator"),d=ct(e,i,u),p=DS(d),f=[];for(r=u.createDate(r,{path:"toGrid"}),o=u.createDate(o,{path:"toGrid"}),r.getHours()<=c&&r.getHours()>=l&&!p&&(f.push(this._applyStartDateToObj(new Date(r),{appointmentData:e})),r.setDate(r.getDate()+1));p&&r.getTime()<o.getTime()&&r<a;){const g=new Date(r),y=new Date(r);this._checkStartDate(g,s,l),this._checkEndDate(y,o,c);const v=Jo({},e,!0),C={};this._applyStartDateToObj(g,C),this._applyEndDateToObj(y,C),v.settings=C,f.push(v),r=V.trimTime(r),r.setDate(r.getDate()+1),r.setHours(l)}return f}_checkStartDate(e,n,i){!V.sameDate(e,n)||e.getHours()<=i?e.setHours(i,0,0,0):e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}_checkEndDate(e,n,i){!V.sameDate(e,n)||e.getHours()>i?e.setHours(i,0,0,0):e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}_removeDragSourceClassFromDraggedAppointment(){this._itemElements().filter(`.${P$}`).each((n,i)=>{m(i).dxSchedulerAppointment("instance").option("isDragSource",!1)})}_setDragSourceAppointment(e,n){const i=this._findItemElementByItem(e),{startDate:s,endDate:r}=n.info.sourceAppointment,{groupIndex:o}=n;i.forEach(a=>{const{info:l,groupIndex:c}=a.data(Dr),{startDate:u,endDate:d}=l.sourceAppointment,p=a.dxSchedulerAppointment("instance"),f=s.getTime()===u.getTime()&&r.getTime()===d.getTime()&&o===c;p.option("isDragSource",f)})}updateResizableArea(){const e=this.$element().find(".dx-scheduler-appointment.dx-resizable"),n=Ci(e,i=>{const r=m(i).dxResizable("instance"),{area:o,handles:a}=r.option();return(a==="right left"||a==="left right")&&Ce(o)});N(n,(i,s)=>{const r=m(s),o=Gn(r),a=this._getItemData(r),l=this._calculateResizableArea({left:o.left},a);r.dxResizable("instance").option("area",l)})}}re("dxSchedulerAppointments",gH);class Eie{constructor(e,n){let{key:i}=n;this._isSharedDataSource=!1,this._keyExpr=i,this.updateDataSource(e)}_updateDataSource(e){if(e)if(e instanceof Zs)this._isSharedDataSource=!0,this._dataSource=e;else{const n=p_(e);this._dataSource=new Zs(T(!0,{},{},n))}}_updateDataSourceByItems(e){this._dataSource=new Zs({store:new $w({key:this.key(),data:e}),pageSize:0})}_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?this._isSharedDataSource=!1:this._dataSource.dispose(),delete this._dataSource)}load(){return this._dataSource.load()}loadSingle(e,n){if(!this._dataSource)return new j().reject();let i=e,s=n;return arguments.length<2&&(s=e,i=this.key()),this._dataSource.loadSingle(i,s)}loadFromStore(e){return this.store().load(e)}loadNextPage(){return this.pageIndex(1+this.pageIndex()),this.load()}loadOptions(){return this._dataSource.loadOptions()}userData(){return this._dataSource._userData}cancel(e){this._dataSource.cancel(e)}cancelAll(){this._dataSource.cancelAll()}filter(e){return this._dataSource.filter(e)}addSearchFilter(e){this._dataSource._addSearchFilter(e)}group(e){return this._dataSource.group(e)}paginate(){return this._dataSource.paginate()}pageSize(){return this._dataSource._pageSize}pageIndex(e){return e===void 0?this._dataSource.pageIndex(void 0):this._dataSource.pageIndex(e)}resetDataSource(){this._disposeDataSource()}resetDataSourcePageIndex(){this.pageIndex()&&(this.pageIndex(0),this.load())}updateDataSource(e,n){const i=e??this.items();n&&(this._keyExpr=n),this._disposeDataSource(),Array.isArray(i)?this._updateDataSourceByItems(i):this._updateDataSource(i)}totalCount(){return this._dataSource.totalCount()}isLastPage(){return this._dataSource.isLastPage()||!this._dataSource._pageSize}isLoading(){return this._dataSource.isLoading()}isLoaded(){return this._dataSource.isLoaded()}searchValue(e){return this._dataSource.searchValue(e)}searchOperation(e){return this._dataSource.searchOperation(e)}searchExpr(e){return this._dataSource.searchExpr(e)}select(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this._dataSource.select(n)}key(){var e;const n=(e=this._dataSource)===null||e===void 0?void 0:e.key();return M(n)&&this._keyExpr==="this"?n:this._keyExpr}keyOf(e){return this.store().keyOf(e)}store(){return this._dataSource.store()}items(){var e;return(e=this._dataSource)===null||e===void 0?void 0:e.items()}applyMapFunction(e){return this._dataSource._applyMapFunction(e)}getDataSource(){return this._dataSource??null}reload(){return this._dataSource.reload()}on(e,n){this._dataSource.on(e,n)}off(e,n){this._dataSource.off(e,n)}}const Tie="dx-dropdownbutton-content",Iie=Kt.inherit({_getDefaultOptions(){return T(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:q.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,template:null,text:"",type:"normal",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),T(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataController(),this._compileKeyGetter(),this._compileDisplayGetter(),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initDataController(){const t=this.option("dataSource");this._dataController=new Eie(t??this.option("items"),{key:this.option("keyExpr")})},_initTemplates(){this._templateManager.addDefaultTemplates({content:new nr(t=>{const e=m(t.container),n=m("<div>").appendTo(e);this._list=this._createComponent(n,z_,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_compileKeyGetter(){this._keyGetter=lt(this._dataController.key())},_compileDisplayGetter(){this._displayGetter=lt(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass("dx-dropdownbutton"),this._renderButtonGroup(),this._updateArrowClass(),M(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:B,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var t;(t=this._loadSingleDeferred)===null||t===void 0||t.reject();const e=j();if(this._list&&this._lastSelectedItemData!==void 0){const i=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(i)}this._lastSelectedItemData=void 0;const n=this.option("selectedItemKey");return this._dataController.loadSingle(n).done(e.resolve).fail(()=>{e.reject(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(t){let{previousValue:e,value:n}=t;this._selectionChangedAction({item:n,previousItem:e})},_fireItemClickAction(t){let{event:e,itemElement:n,itemData:i}=t;return this._itemClickAction({event:e,itemElement:n,itemData:this._actionItem||i})},_getButtonTemplate(){const{template:t,splitButton:e,showArrowIcon:n}=this.option();return t||(e||!n?"content":(i,s)=>{let{text:r,icon:o}=i;const a=Ch(o),l=r?m("<span>").text(r).addClass("dx-button-text"):void 0,c=Ch("spindown").addClass("dx-icon-right");m(s).append(a,l,c)})},_getActionButtonConfig(){const{icon:t,text:e,type:n,splitButton:i}=this.option(),s={text:e,icon:t,type:n,template:this._getButtonTemplate(),elementAttr:{class:"dx-dropdownbutton-action"}};return i&&(s.elementAttr.role="menuitem"),s},_getSpinButtonConfig(){const{type:t}=this.option();return{type:t,icon:"spindown",elementAttr:{class:"dx-dropdownbutton-toggle",role:"menuitem"}}},_getButtonGroupItems(){const{splitButton:t}=this.option(),e=[this._getActionButtonConfig()];return t&&e.push(this._getSpinButtonConfig()),e},_buttonGroupItemClick(t){let{event:e,itemData:n}=t;const i=n.elementAttr.class==="dx-dropdownbutton-action";n.elementAttr.class==="dx-dropdownbutton-toggle"?this.toggle():i&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_getButtonGroupOptions(){const{accessKey:t,focusStateEnabled:e,hoverStateEnabled:n,splitButton:i,stylingMode:s,tabIndex:r}=this.option();return T({items:this._getButtonGroupItems(),width:"100%",height:"100%",selectionMode:"none",focusStateEnabled:e,hoverStateEnabled:n,stylingMode:s,accessKey:t,tabIndex:r,elementAttr:{role:i?"menu":"group"},onItemClick:this._buttonGroupItemClick.bind(this),onKeyboardHandled:a=>this._keyboardHandler(a)},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){const t=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return t.empty(),this._popupContentId=`dx-${new Et}`,this.setAria("id",this._popupContentId,t),e.render({container:se(t),model:this.option("items")||this._dataController.getDataSource()})},_popupOptions(){const t=this.option("rtlEnabled")?"right":"left";return T({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{const n=this.$element();return!m(e.target).closest(".dx-dropdownbutton").is(n)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>Cg(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:`${t} top`,at:`${t} bottom`},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){const t=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:M(t)&&e?[t]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._dataController.key(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataController.getDataSource(),onItemClick:n=>{this.option("useSelectMode")||(this._lastSelectedItemData=n.itemData),this.option("selectedItemKey",this._keyGetter(n.itemData)),this._fireItemClickAction(n)!==!1&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){const t=m("<div>");this.$element().append(t),this._popup=this._createComponent(t,xl,this._popupOptions()),this._popup.$content().addClass(Tie),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.$overlayContent().attr("aria-label","Dropdown"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._updateAriaAttributes(!1)},_popupOptionChanged(t){const e=Kt.getOptionsFromContainer(t);this._setPopupOption(e);const n=Object.keys(e);(n.includes("width")||n.includes("height"))&&this._dimensionChanged()},_dimensionChanged(){RS(this.option("dropDownOptions.width"))===void 0&&this._setPopupOption("width",()=>Cg(this.$element()))},_setPopupOption(t,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._updateAriaAttributes(!0)},_setElementAria(t){const e={owns:t?this._popupContentId:void 0};this.setAria(e,this.$element())},_setButtonsAria(t){const e={expanded:t,haspopup:"listbox"},n={};this.option("text")||(n.label="dropdownbutton"),this._getButtons().each((i,s)=>{i===0?this.setAria(L({},n,e),m(s)):this.setAria(e,m(s))})},_updateAriaAttributes(t){this._setElementAria(t),this._setButtonsAria(t)},_getButtons(){return this._buttonGroup.$element().find(".dx-button")},_renderButtonGroup(){const t=this._buttonGroup&&this._buttonGroup.$element()||m("<div>");this._buttonGroup||this.$element().append(t),this._buttonGroup=this._createComponent(t,IS,this._getButtonGroupOptions()),this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._updateAriaAttributes(this.option("opened"))},_updateArrowClass(){const t=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",t)},toggle(t){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(t)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(t,e){this._list&&this._list.option(t,e)},_getDisplayValue(t){const n=!ue(t)?t:this._displayGetter(t);return ue(n)?"":String(rt(n,""))},_updateActionButton(t){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(t),icon:Ce(t)?t.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",t),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(t))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(t){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&M(t)?[t]:[]);const e=this.option("selectedItem");this._loadSelectedItem().always(n=>{this._updateActionButton(n),this._displayGetter(e)!==this._displayGetter(n)&&this._fireSelectionChangedAction({previousValue:e,value:n})})},_updateButtonGroup(t,e){this._buttonGroup.option(t,e),this._updateAriaAttributes(this.option("opened"))},_actionButtonOptionChanged(t){let{name:e,value:n}=t;const i={};i[e]=n,this._updateButtonGroup("items[0]",T({},this._getActionButtonConfig(),i)),this._popup&&this._popup.repaint()},_selectModeChanged(t){if(t){this._setListOption("selectionMode","single");const e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",M(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(t){const e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[t]),M(e)&&this._loadSelectedItem().done(n=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",n)}).fail(n=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataController(t){this._dataController.updateDataSource(t,this.option("keyExpr")),this._updateKeyExpr()},_updateKeyExpr(){this._compileKeyGetter(),this._setListOption("keyExpr",this._dataController.key())},focus(){this._buttonGroup.focus()},_optionChanged(t){var e;const{name:n,value:i}=t;switch(n){case"useSelectMode":this._selectModeChanged(i);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(n,i),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataController();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,t);break;case"dropDownOptions":if(t.fullName==="dropDownOptions.visible")break;t.value.visible!==void 0&&delete t.value.visible,this._popupOptionChanged(t),this._innerWidgetOptionChanged(this._popup,t);break;case"opened":this.toggle(i);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(n,i),this._updateButtonGroup(n,i),this.callBase(t);break;case"items":this._updateDataController(this.option("items")),this._updateItemCollection(n);break;case"dataSource":this._dataController.updateDataSource(i),this._updateKeyExpr(),this._updateItemCollection(n);break;case"icon":case"text":this._actionButtonOptionChanged(t);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(t),(e=this._popup)===null||e===void 0||e.repaint();break;case"stylingMode":case"tabIndex":this._updateButtonGroup(n,i);break;case"type":this._updateButtonGroup("items",this._getButtonGroupItems());break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(n,i);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(i);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;case"template":this._renderButtonGroup();break;default:this.callBase(t)}},getDataSource(){return this._dataController.getDataSource()}});re("dxDropDownButton",Iie);const Aie=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"],kie=function(t){const e=t.data&&t.data(),n=e&&e.dxComponents,i=n&&n[0];return i&&e[i]};function Eg(t,e){var n;if(!t)return;const i=t._findItemElementByItem(e);if(!i.length)return;const s=t._getItemData(i),r=!!((n=s.options)!==null&&n!==void 0&&n.disabled||s.disabled||t.option("disabled")),{widget:o}=s;if(o&&Aie.includes(o)){const c=i.find(o.toLowerCase().replace("dx",".dx-"));if(c.length){var a,l;const u=kie(c);if(!u)return;let d=(a=u._focusTarget)===null||a===void 0?void 0:a.call(u);o==="dxDropDownButton"?d=d&&d.find(".dx-buttongroup"):d=d??m(u.element());const p=(l=s.options)===null||l===void 0?void 0:l.tabIndex;r?d.attr("tabIndex",-1):d.attr("tabIndex",p??0)}}}class Rie{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){return this._toolbar.option("items")??[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar._itemElements(),!0)}_arrangeItems(){const e=this._toolbar._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0);if(!e.length)return;const n=me(this._toolbar.$element()),i=et(e)-me(e);e.css("maxWidth",n-i)}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}class Oie extends zS{_init(){super._init(),this._activeStateUnit=".dx-toolbar-menu-action:not(.dx-toolbar-hidden-button-group)"}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){const e=this._itemContainer();N(["before","center","after","menu"],(n,i)=>{const s=`_$${i}Section`;this[s]||(this[s]=m("<div>").addClass("dx-toolbar-menu-section")),this[s].appendTo(e)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".dx-scrollview-content").attr("role","menu")}_updateSections(){const e=this.$element().find(".dx-toolbar-menu-section");e.removeClass("dx-toolbar-menu-last-section"),e.not(":empty").eq(-1).addClass("dx-toolbar-menu-last-section")}_renderItem(e,n,i,s){const r=n.location??"menu",o=this[`_$${r}Section`],a=super._renderItem(e,n,o,s);return this._getItemTemplateName({itemData:n})&&a.addClass("dx-toolbar-menu-custom"),(r==="menu"||n.widget==="dxButton"||n.widget==="dxButtonGroup"||n.isAction)&&a.addClass("dx-toolbar-menu-action"),n.widget==="dxButton"&&a.addClass("dx-toolbar-hidden-button"),n.widget==="dxButtonGroup"&&a.addClass("dx-toolbar-hidden-button-group"),a.addClass(n.cssClass),a}_getItemTemplateName(e){const n=super._getItemTemplateName(e),i=e.itemData;return i&&i.menuItemTemplate||n}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,n,i){m(e.target).closest(".dx-toolbar-menu-action").length&&super._itemClickHandler(e,n,i)}_clean(){this._getSections().empty(),super._clean()}}class Pie extends bL{_supportedKeys(){var e;let n={};return(!this.option("opened")||!((e=this._list)!==null&&e!==void 0&&e.option("focusedElement")))&&(n=this._button._supportedKeys()),T(super._supportedKeys(),n,{tab(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return L({},super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>ii(),options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new Qw("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){const e=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(e,Kn,{icon:"overflow",template:"content",stylingMode:qn()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:n=>{this.option("opened",!this.option("opened")),this._buttonClickAction(n)}})}_toggleActiveState(e,n,i){this._button._toggleActiveState(e,n,i)}_toggleMenuVisibility(e){var n,i;const s=e??!((n=this._popup)!==null&&n!==void 0&&n.option("visible"));e&&this._renderPopup(),(i=this._popup)===null||i===void 0||i.toggle(s),this.setAria("expanded",s)}_renderPopup(){if(this._$popup)return;this._$popup=m("<div>").appendTo(this.$element());const{rtlEnabled:e,container:n,animation:i}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(s){let{component:r}=s;r.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,preventScrollEvents:!1,contentTemplate:s=>this._renderList(s),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top "+(e?"left":"right"),at:"bottom "+(e?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:i,onOptionChanged:s=>{let{name:r,value:o}=s;r==="visible"&&this.option("opened",o)},container:n,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:s=>this._closeOutsideDropDownHandler(s),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}_getMaxHeight(){const e=this.$element(),n=e.offset().top,i=tt(pe()),s=Math.max(n,i-n-tt(e));return Math.min(i,s-3-10)}_closeOutsideDropDownHandler(e){return!m(e.target).closest(this.$element()).length}_renderList(e){const n=m(e);n.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(n,Oie,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:i=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(i)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(e,n,i){var s;(s=this._list)===null||s===void 0||s._itemOptionChanged(e,n,i),Eg(this._list,e)}_getListDataSource(){return this.option("dataSource")??this.option("items")}_setListDataSource(){var e;(e=this._list)===null||e===void 0||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){var n;super._toggleVisibility(e),(n=this._button)===null||n===void 0||n.option("visible",e)}_optionChanged(e){var n,i,s;const{name:r,value:o}=e;switch(r){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":(n=this._list)===null||n===void 0||n.option(r,this._getTemplate(o));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":(i=this._list)===null||i===void 0||i.option(r,o),super._optionChanged(e);break;case"onItemRendered":(s=this._list)===null||s===void 0||s.option(r,o);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(o),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(r,o);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(e=>Eg(this._list,e))}}const oC="dx-toolbar-item-invisible";class Mie{constructor(e){this._toolbar=e}_initMarkup(){Wr(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(!this._hasVisibleMenuItems())return;this._renderMenuButtonContainer();const e=m("<div>").appendTo(this._overflowMenuContainer()),n=this._toolbar._createActionByOption("onItemClick"),i=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,Pie,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>i,onItemClick:s=>{n(s)},container:this._toolbar.option("menuContainer"),onOptionChanged:s=>{let{name:r,value:o}=s;r==="opened"&&this._toolbar.option("overflowMenuVisible",o),r==="items"&&this._updateMenuVisibility(o)}})}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=m("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){const n=e??this._getMenuItems(),i=n.length&&this._hasVisibleMenuItems(n);this._toggleMenuVisibility(i)}_toggleMenuVisibility(e){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass("dx-state-invisible",!e)}_renderMenuItems(){Wr(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){return Ci(this._toolbar.option("items")??[],e=>!this._toolbar._isMenuItem(e))}_getHiddenItems(){return this._toolbar._itemContainer().children(`.dx-toolbar-item-auto-hide.${oC}`).not(".dx-state-invisible")}_getMenuItems(){const e=Ci(this._toolbar.option("items")??[],s=>this._toolbar._isMenuItem(s)),n=this._getHiddenItems();return this._restoreItems=this._restoreItems??[],[...[].slice.call(n).map(s=>{const r=this._toolbar._getItemData(s),o=m(s),a=o.children();return T({menuItemTemplate:()=>(this._restoreItems.push({container:o,item:a}),m("<div>").addClass("dx-toolbar-item-auto-hide").append(a))},r)}),...e]}_hasVisibleMenuItems(e){const n=e??this._toolbar.option("items");let i=!1;const s=lt("visible"),r=lt("locateInMenu");return N(n,(o,a)=>{const l=s(a,{functionsAsIs:!0}),c=r(a,{functionsAsIs:!0});(l!==!1&&(c==="auto"||c==="always")||a.location==="menu")&&(i=!0)}),i}_arrangeItems(){this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),N(this._restoreItems??[],(n,i)=>{m(i.container).append(i.item)}),this._restoreItems=[];const e=me(this._toolbar.$element());return this._hideOverflowItems(e),e}_hideOverflowItems(e){const n=this._toolbar.$element().find(".dx-toolbar-item-auto-hide");if(!n.length)return;const i=e??me(this._toolbar.$element());m(n).removeClass(oC);let s=this._getItemsWidth();for(;n.length&&i<s;)n.eq(-1).addClass(oC),s=this._getItemsWidth(),n.splice(-1,1)}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,n,i){if((n==="disabled"||n==="options.disabled")&&this._toolbar._isMenuItem(e)){var s;(s=this._menu)===null||s===void 0||s._itemOptionChanged(e,n,i);return}this.renderMenuItems()}_renderItem(e,n){e.locateInMenu==="auto"&&n.addClass("dx-toolbar-item-auto-hide")}_optionChanged(e,n){var i,s,r,o,a;switch(e){case"disabled":(i=this._menu)===null||i===void 0||i.option(e,n);break;case"overflowMenuVisible":(s=this._menu)===null||s===void 0||s.option("opened",n);break;case"onItemClick":(r=this._menu)===null||r===void 0||r.option(e,n);break;case"menuContainer":(o=this._menu)===null||o===void 0||o.option("container",n);break;case"menuItemTemplate":(a=this._menu)===null||a===void 0||a.option("itemTemplate",n)}}}class _H extends TL{_getDefaultOptions(){return L({},super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){e!=="height"&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new Rie(this):new Mie(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,n,i,s){const r=super._renderItem(e,n,i,s);this._layoutStrategy._renderItem(n,r);const{widget:o,showText:a}=n;return o==="dxButton"&&a==="inMenu"&&r.toggleClass("dx-toolbar-text-auto-hide"),r}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(this.$element().is(":hidden"))return;const e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}_itemOptionChanged(e,n,i,s){this._isMenuItem(e)||super._itemOptionChanged(e,n,i,s),this._layoutStrategy._itemOptionChanged(e,n,i),(n==="disabled"||n==="options.disabled")&&Eg(this,e),n==="location"&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(e=>Eg(this,e))}_isMenuItem(e){return e.location==="menu"||e.locateInMenu==="always"}_isToolbarItem(e){return e.location===void 0||e.locateInMenu==="never"}_optionChanged(e){const{name:n,value:i}=e;switch(this._layoutStrategy._optionChanged(n,i),n){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged(e),this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}updateDimensions(){this._dimensionChanged()}}re("dxToolbar",_H);const Vie="dx-scheduler-navigator-calendar",Bie="dx-scheduler-navigator-calendar-popover";class yH extends Kt{show(e){this._isMobileLayout()||this._overlay.option("target",e),this._overlay.show()}hide(){this._overlay.hide()}_keyboardHandler(e){var n;(n=this._calendar)===null||n===void 0||n._keyboardHandler(e)}_init(){super._init(),this.$element()}_render(){super._render(),this._renderOverlay()}_renderOverlay(){this.$element().addClass(Bie);const e=this._isMobileLayout(),n=e?xl:QS;this._overlay=this._createComponent(this.$element(),n,{contentTemplate:()=>this._createOverlayContent(),onShown:()=>this._calendar.focus(),defaultOptionsRules:[{device:()=>e,options:{fullScreen:!0,showCloseButton:!1,toolbarItems:[{shortcut:"cancel"}],_ignorePreventScrollEventsDeprecation:!0,preventScrollEvents:!1,enableBodyScroll:!1}}]})}_createOverlayContent(){const e=m("<div>").addClass(Vie);return this._calendar=this._createComponent(e,VS,this._getCalendarOptions()),this._isMobileLayout()?this._createScrollable(e).$element():e}_createScrollable(e){const n=this._createComponent("<div>",Qs,{height:"auto",direction:"both"});return n.$content().append(e),n}_optionChanged(e){var n;let{name:i,value:s}=e;i==="value"&&((n=this._calendar)===null||n===void 0||n.option("value",s))}_getCalendarOptions(){return{value:this.option("value"),min:this.option("min"),max:this.option("max"),firstDayOfWeek:this.option("firstDayOfWeek"),focusStateEnabled:this.option("focusStateEnabled"),onValueChanged:this.option("onValueChanged"),skipFocusCheck:!0,tabIndex:this.option("tabIndex")}}_isMobileLayout(){return!X.current().generic}}re("dxSchedulerCalendarPopup",yH);const{trimTime:Lie}=V,$ie="dx-scheduler-navigator",Fie="dx-scheduler-navigator-previous",Hie="dx-scheduler-navigator-caption",Nie="dx-scheduler-navigator-next",zie=(t,e)=>{const n=[Wie(t),Gie(t),Uie(t)],i=ii()?"text":"contained";return L({widget:"dxButtonGroup",cssClass:$ie,options:{items:n,stylingMode:i,selectionMode:"none",onItemClick:s=>{s.itemData.clickHandler(s)}}},e)},Wie=t=>({key:"previous",icon:"chevronprev",elementAttr:{class:Fie},clickHandler:()=>t._updateDateByDirection(-1),onContentReady:e=>{const n=e.component;n.option("disabled",If(t)),t._addEvent("min",()=>{n.option("disabled",If(t))}),t._addEvent("currentDate",()=>{n.option("disabled",If(t))}),t._addEvent("startViewDate",()=>{n.option("disabled",If(t))})}}),Gie=t=>({key:"calendar",text:t.captionText,elementAttr:{class:Hie},clickHandler:e=>t._showCalendar(e),onContentReady:e=>{const n=e.component;t._addEvent("currentView",()=>{n.option("text",t.captionText)}),t._addEvent("currentDate",()=>{n.option("text",t.captionText)}),t._addEvent("startViewDate",()=>{n.option("text",t.captionText)}),t._addEvent("views",()=>{n.option("text",t.captionText)}),t._addEvent("firstDayOfWeek",()=>{n.option("text",t.captionText)})}}),Uie=t=>({key:"next",icon:"chevronnext",elementAttr:{class:Nie},clickHandler:()=>t._updateDateByDirection(1),onContentReady:e=>{const n=e.component;n.option("disabled",Af(t)),t._addEvent("min",()=>{n.option("disabled",Af(t))}),t._addEvent("currentDate",()=>{n.option("disabled",Af(t))}),t._addEvent("startViewDate",()=>{n.option("disabled",Af(t))})}}),If=t=>{let e=t.option("min");if(!e)return!1;e=new Date(e);const n=t._getCaption();return e=Lie(e),t._getNextDate(-1,n.endDate)<e},Af=t=>{let e=t.option("max");if(!e)return!1;e=new Date(e);const n=t._getCaption();return e=e.setHours(23,59,59),t._getNextDate(1,n.startDate)>e},{correctDateWithUnitBeginning:Kie,getFirstWeekDate:jie,getLastMonthDay:vH,addDateInterval:bl}=V,{format:jr}=ee,CH={milliseconds:1},qie={days:1},Yie={days:7},Zie=t=>bl(t,CH,-1),Qie=t=>bl(t,CH,1),K_=t=>bl(t,qie,1),DH=t=>bl(t,Yie,1),Xie=t=>{const e=vH(t);return bl(t,{days:e},1)},eb=t=>t.getDay()===6||t.getDay()===0,Jie=t=>{let e=new Date(t);for(;eb(e);)e=K_(e);return e},ese=t=>{let e=new Date(t),n=0;for(;n<5;)eb(e)||n++,e=K_(e);return e},tse=(t,e)=>bl(t,{days:e},1),nse=t=>{const e=ise(t),n=sse(e,t);return{startDate:e,endDate:n}},ise=t=>{const{date:e,step:n,firstDayOfWeek:i}=t;switch(n){case"day":case"week":case"month":return Kie(e,n,!1,i);case"workWeek":const s=jie(e,i);return Jie(s);case"agenda":return new Date(e)}},sse=(t,e)=>{const{intervalCount:n,step:i,agendaDuration:s}=e;let r,o,a=new Date(t);for(let l=0;l<n;l++)r=a,o=rse(r,i,s),a=ose(o,i);return o},rse=(t,e,n)=>{let i;switch(e){case"day":i=K_(t);break;case"week":i=DH(t);break;case"month":i=Xie(t);break;case"workWeek":i=ese(t);break;case"agenda":i=tse(t,n)}return Zie(i)},ose=(t,e)=>{let n=Qie(t);if(e==="workWeek")for(;eb(n);)n=K_(n);return n},ase=(t,e)=>{const{date:n,step:i,intervalCount:s,agendaDuration:r}=t;let o;switch(i){case"day":o=1*s;break;case"week":case"workWeek":o=7*s;break;case"agenda":o=r;break;case"month":return lse(n,s,e)}return bl(n,{days:o},e)},lse=(t,e,n)=>{const i=t.getDate(),s=new Date(new Date(t.getTime()).setDate(1)),r=new Date(s.setMonth(s.getMonth()+e*n)),o=vH(r),a=i<o?i:o,l=new Date(new Date(t.getTime()).setDate(a));return new Date(l.setMonth(l.getMonth()+e*n))},tb=t=>{const e=t?"abbreviated":"wide",n=ee.getMonthNames(e);return i=>{const s=jr(i,"day"),r=n[i.getMonth()];return`${s} ${r}`}},nO=t=>{const n=ee.getMonthNames("abbreviated")[t.getMonth()],i=jr(t,"year");return`${n} ${i}`},B0=t=>e=>{const i=tb(t)(e),s=jr(e,"year");return`${i} ${s}`},cse=(t,e)=>{const n=jr(t,B0(!0)),i=jr(e,B0(!0));return`${n}-${i}`},use=(t,e,n)=>{const i=t.getMonth()!==e.getMonth(),s=i||n,r=i?tb(s):"d",o=jr(t,r),a=jr(e,B0(s));return`${o}-${a}`},dse=(t,e,n)=>{const r=tb(e==="agenda"?n:!1)(t),o=jr(t,"year");return`${r} ${o}`},hse=(t,e,n)=>t.getFullYear()!==e.getFullYear()?cse(t,e):use(t,e,n),pse=(t,e)=>{if(V.sameMonth(t,e))return jr(t,"monthandyear");const i=V.sameYear(t,e)?ee.getMonthNames("abbreviated")[t.getMonth()]:nO(t),s=nO(e);return`${i}-${s}`},fse=(t,e,n,i)=>V.sameDate(t,e)?dse(t,i,n):i==="month"?pse(t,e):hse(t,e,n),mse=(t,e,n)=>{const{startDate:i,endDate:s}=nse(t);let r=fse(i,s,e,t.step);return ie(n)&&(r=n({startDate:i,endDate:s,text:r})),{startDate:i,endDate:s,text:r}},gse={day:"day",week:"week",workWeek:"workWeek",month:"month",timelineDay:"day",timelineWeek:"week",timelineWorkWeek:"workWeek",timelineMonth:"month",agenda:"agenda"},_se=t=>gse[j_(t)],j_=t=>ue(t)&&t.type?t.type:t,Qc=t=>ue(t)?t.name?t.name:t.type:t,yse=t=>{if(t.name)return t.name;const e=Uc(t.type||t,!0);return q.format(`dxScheduler-switcher${e}`)},vse=t=>Object.values(_t).includes(t),xH=t=>{t.forEach(e=>{const n=j_(e);vse(n)||Te.log("W0008",n)})},wH=t=>(xH(t),t.map(e=>{const n=yse(e),i=j_(e),s=Qc(e);return{text:n,name:s,view:{text:n,type:i,name:s}}})),iO=(t,e)=>t.length===1&&t[0].name===e,SH="dx-scheduler-view-switcher",Cse="dx-scheduler-view-switcher-dropdown-button",Dse="dx-scheduler-view-switcher-dropdown-button-content",bH=t=>{const e=wH(t.views);let n=Qc(t.currentView);return n=e.some(s=>s.name===n)?n:void 0,{selectedView:n,views:e}},xse=(t,e)=>{const{selectedView:n,views:i}=bH(t),s=qn()?"outlined":"contained";return L({widget:"dxButtonGroup",locateInMenu:"auto",cssClass:SH,options:{items:i,keyExpr:"name",selectedItemKeys:[n],stylingMode:s,onItemClick:r=>{const{view:o}=r.itemData;t._updateCurrentView(o)},onContentReady:r=>{const o=r.component;t._addEvent("currentView",a=>{o.option("selectedItemKeys",[Qc(a)])})}}},e)},wse=(t,e)=>{const{selectedView:n,views:i}=bH(t),s=iO(i,n);return L({widget:"dxDropDownButton",locateInMenu:"never",cssClass:SH,options:{items:i,useSelectMode:!0,keyExpr:"name",selectedItemKey:n,displayExpr:"text",showArrowIcon:!s,elementAttr:{class:Cse},onItemClick:r=>{const{view:o}=r.itemData;t._updateCurrentView(o)},onContentReady:r=>{const o=r.component;t._addEvent("currentView",a=>{const l=wH(t.views);iO(l,a)&&t.repaint(),o.option("selectedItemKey",Qc(a))})},dropDownOptions:{onShowing:r=>{s&&(r.cancel=!0)},width:"max-content",_wrapperClassExternal:Dse}}},e)},sO="defaultElement",Sse="viewSwitcher",bse="dateNavigator",Ese="dx-scheduler-header";class EH extends Kt{get views(){return this.option("views")}get captionText(){return this._getCaption().text}get intervalOptions(){const e=_se(this.currentView),n=this.option("intervalCount"),i=this.option("firstDayOfWeek"),s=this.option("agendaDuration");return{step:e,intervalCount:n,firstDayOfWeek:i,agendaDuration:s}}_getDefaultOptions(){return T(super._getDefaultOptions(),{_useShortDateFormat:!X.real().generic||X.isSimulator()})}_createEventMap(){this.eventMap=new Map([["currentView",[e=>{this.currentView=E0.getCurrentView(Qc(e),this.option("views"))}]],["items",[this.repaint.bind(this)]],["views",[xH]],["currentDate",[this._getCalendarOptionUpdater("value")]],["min",[this._getCalendarOptionUpdater("min")]],["max",[this._getCalendarOptionUpdater("max")]],["tabIndex",[this.repaint.bind(this)]],["focusStateEnabled",[this.repaint.bind(this)]],["useDropDownViewSwitcher",[this.repaint.bind(this)]]])}_addEvent(e,n){this.eventMap.has(e)||this.eventMap.set(e,[]);const i=this.eventMap.get(e);this.eventMap.set(e,[...i,n])}_optionChanged(e){const{name:n,value:i}=e;this.eventMap.has(n)&&this.eventMap.get(n).forEach(r=>{r(i)})}_init(){super._init(),this._createEventMap(),this.$element().addClass(Ese),this.currentView=E0.getCurrentView(Qc(this.option("currentView")),this.option("views"))}_render(){super._render(),this._createEventMap(),this._renderToolbar()}_renderToolbar(){const e=this._createToolbarConfig(),n=m("<div>");n.appendTo(this.$element()),this._toolbar=this._createComponent(n,_H,e)}_createToolbarConfig(){return{items:this.option("items").map(i=>this._parseItem(i))}}_parseItem(e){if(this._isDefaultItem(e)){const i=e[sO];switch(i){case Sse:return this.option("useDropDownViewSwitcher")?wse(this,e):xse(this,e);case bse:return this._renderCalendar(),zie(this,e);default:Te.log(`Unknown default element type: ${i}`)}}return e}_callEvent(e,n){this.eventMap.has(e)&&this.eventMap.get(e).forEach(s=>s(n))}_updateCurrentView(e){this.option("onCurrentViewChange")(e.name),this._callEvent("currentView",e)}_updateCalendarValueAndCurrentDate(e){this._updateCurrentDate(e),this._calendar.option("value",e)}_updateCurrentDate(e){this.option("onCurrentDateChange")(e),this._callEvent("currentDate",e)}_renderCalendar(){this._calendar=this._createComponent("<div>",yH,{value:this.option("currentDate"),min:this.option("min"),max:this.option("max"),firstDayOfWeek:this.option("firstDayOfWeek"),focusStateEnabled:this.option("focusStateEnabled"),tabIndex:this.option("tabIndex"),onValueChanged:e=>{this._updateCurrentDate(e.value),this._calendar.hide()}}),this._calendar.$element().appendTo(this.$element())}_getCalendarOptionUpdater(e){return n=>{this._calendar&&this._calendar.option(e,n)}}_getNextDate(e){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)??this.option("currentDate"),s=L({},this.intervalOptions,{date:i});return ase(s,e)}_isMonth(){const{currentView:e}=this;return j_(e)==="month"}_getDisplayedDate(){const e=this.option("startViewDate");return this._isMonth()?DH(e):new Date(e)}_getCaption(){let e=this.option("currentDate");this.option("startViewDate")&&(e=this._getDisplayedDate()),e=V.trimTime(e);const n=L({},this.intervalOptions,{date:e}),i=this.option("customizeDateNavigatorText"),s=this.option("_useShortDateFormat");return mse(n,s,i)}_updateDateByDirection(e){const n=this._getNextDate(e);this._updateCalendarValueAndCurrentDate(n)}_showCalendar(e){this._calendar.show(e.element)}_hideCalendar(){this._calendar.hide()}_isDefaultItem(e){return Object.prototype.hasOwnProperty.call(e,sO)}}re("dxSchedulerHeader",EH);class TH{constructor(e){this.isVirtualScrolling=!1,this.options=e}get DOMMetaData(){return this.options.DOMMetaData}get appointments(){return this.options.dateSettings}get viewDataProvider(){return this.options.viewDataProvider}get positionHelper(){return this.options.positionHelper}get startViewDate(){return this.options.startViewDate}get viewStartDayHour(){return this.options.viewStartDayHour}get viewEndDayHour(){return this.options.viewEndDayHour}get cellDuration(){return this.options.cellDuration}get getPositionShift(){return this.options.getPositionShiftCallback}get groupCount(){return this.options.groupCount}get rtlEnabled(){return this.options.rtlEnabled}get isVerticalGrouping(){return this.options.isVerticalGroupOrientation}get showAllDayPanel(){return this.options.showAllDayPanel}get supportAllDayRow(){return this.options.supportAllDayRow}get isGroupedAllDayPanel(){return this.options.isGroupedAllDayPanel}calculateCellPositions(e,n,i){const s=[];return this.appointments.forEach((r,o)=>{this.getCoordinateInfos({appointment:r,groupIndices:e,isAllDayRowAppointment:n,isRecurrentAppointment:i}).forEach(l=>{l&&s.push(this._prepareObject(l,o))})}),s}getCoordinateInfos(e){const{appointment:n,isAllDayRowAppointment:i,groupIndices:s,recurrent:r}=e,{startDate:o}=n,a=r?void 0:n.source.groupIndex;return this.getCoordinatesByDateInGroup(o,s,i,a)}_prepareObject(e,n){return e.dateSettingIndex=n,{coordinates:e,dateSettingIndex:n}}getCoordinatesByDate(e,n,i){const s=n||0,r={groupIndex:s,startDate:e,isAllDay:i},o=this.viewDataProvider.findCellPositionInMap(r,!0);if(!o)return;const a=this.getCellPosition(o,i&&!this.isVerticalGrouping),l=this.viewDataProvider.getGroupEdgeIndices(s),{top:c}=this.getCellPosition({columnIndex:o.columnIndex,rowIndex:l.firstRowIndex},i&&!this.isVerticalGrouping),u=i?0:this.getTimeShiftRatio(o,e),d=this.getPositionShift(u,i),p=this.positionHelper.getHorizontalMax(s,e),f=this.positionHelper.getVerticalMax({groupIndex:s,isVirtualScrolling:this.isVirtualScrolling,showAllDayPanel:this.showAllDayPanel,supportAllDayRow:this.supportAllDayRow,isGroupedAllDayPanel:this.isGroupedAllDayPanel,isVerticalGrouping:this.isVerticalGrouping});return{positionByMap:o,cellPosition:a.left+d.cellPosition,top:a.top+d.top,left:a.left+d.left,rowIndex:a.rowIndex,columnIndex:a.columnIndex,hMax:p,vMax:f,vMin:c,groupIndex:s}}getCoordinatesByDateInGroup(e,n,i,s){const r=[];if(this.viewDataProvider.isSkippedDate(e))return r;let o=[s];return M(s)||(o=this.groupCount?n:[0]),o.forEach(a=>{const l=this.getCoordinatesByDate(e,a,i);l&&r.push(l)}),r}getCellPosition(e,n){const{dateTableCellsMeta:i,allDayPanelCellsMeta:s}=this.DOMMetaData,{columnIndex:r,rowIndex:o}=e,a=n?s[r]:i[o][r],l=L({},a);return this.rtlEnabled&&(l.left+=a.width),l&&(l.rowIndex=e.rowIndex,l.columnIndex=e.columnIndex),l}getTimeShiftRatio(e,n){const{cellDuration:i,viewOffset:s}=this.options,{rowIndex:r,columnIndex:o}=e,a=this.viewDataProvider.viewDataMap.dateTableMap[r][o],l=he.addOffsets(a.cellData.startDate,[-s]);return(n.getTime()-l.getTime())/i%1}}class Tse extends TH{constructor(){super(...arguments),this.isVirtualScrolling=!0}calculateCellPositions(e,n,i){const s=n?this.appointments:this.appointments.filter(r=>{let{source:o,startDate:a,endDate:l}=r;return this.viewDataProvider.isGroupIntersectDateInterval(o.groupIndex,a,l)});return i?this.createRecurrentAppointmentInfos(s,n):super.calculateCellPositions(e,n,i)}createRecurrentAppointmentInfos(e,n){const i=[];return e.forEach((s,r)=>{let{source:o,startDate:a}=s;const l=this.getCoordinatesByDate(a,o.groupIndex,n);l&&i.push(this._prepareObject(l,r))}),i}}class Ise{constructor(e){this.options=e}calculateCellPositions(e,n,i){return(this.options.isVirtualScrolling?new Tse(this.options):new TH(this.options)).calculateCellPositions(e,n,i)}}const Ase=t=>{const{startDate:e,endDate:n,allDay:i,format:s}=t,r=s||IH(e,n,i);return AH(e,n,r)},IH=(t,e,n,i)=>n?"DATE":i&&V.sameDate(t,e)?"TIME":"DATETIME",AH=(t,e,n)=>{const i=t.getDate()===e.getDate();switch(n){case"DATETIME":return[ee.format(t,"monthandday")," ",ee.format(t,"shorttime")," - ",i?"":`${ee.format(e,"monthandday")} `,ee.format(e,"shorttime")].join("");case"TIME":return`${ee.format(t,"shorttime")} - ${ee.format(e,"shorttime")}`;case"DATE":return`${ee.format(t,"monthandday")}${i?"":` - ${ee.format(e,"monthandday")}`}`}},Da=V.dateToMilliseconds;class kH{constructor(e){this.options=e}get rawAppointment(){return this.options.rawAppointment}get timeZoneCalculator(){return this.options.timeZoneCalculator}get viewDataProvider(){return this.options.viewDataProvider}get appointmentTakesAllDay(){return this.options.appointmentTakesAllDay}get supportAllDayRow(){return this.options.supportAllDayRow}get isAllDayRowAppointment(){return this.options.isAllDayRowAppointment}get timeZone(){return this.options.timeZone}get dateRange(){return this.options.dateRange}get firstDayOfWeek(){return this.options.firstDayOfWeek}get viewStartDayHour(){return this.options.viewStartDayHour}get viewEndDayHour(){return this.options.viewEndDayHour}get endViewDate(){return this.options.endViewDate}get viewType(){return this.options.viewType}get isGroupedByDate(){return this.options.isGroupedByDate}get isVerticalOrientation(){return this.options.isVerticalGroupOrientation}get dataAccessors(){return this.options.dataAccessors}get loadedResources(){return this.options.loadedResources}get isDateAppointment(){return!ol(this.viewType)&&this.appointmentTakesAllDay}getIntervalDuration(){return this.appointmentTakesAllDay?this.options.allDayIntervalDuration:this.options.intervalDuration}generate(e){const{isRecurrent:n}=e,i=this._getGroupIndices(this.rawAppointment);let s=this._createAppointments(e,i);s=this._getProcessedByAppointmentTimeZone(s,e),this._canProcessNotNativeTimezoneDates(e)&&(s=this._getProcessedNotNativeTimezoneDates(s,e));let r=this._createGridAppointmentList(s,e);const o=this._getAppointmentsFirstViewDate(r);return r=this._fillNormalizedStartDate(r,o),r=this._cropAppointmentsByStartDayHour(r,o),r=this._fillNormalizedEndDate(r,this.rawAppointment),this._needSeparateLongParts()&&(r=this._separateLongParts(r,e)),r=this.shiftSourceAppointmentDates(r),{dateSettings:r,itemGroupIndices:i,isRecurrent:n}}shiftSourceAppointmentDates(e){const{viewOffset:n}=this.options;return e.map(i=>L({},i,{source:L({},i.source,{startDate:he.addOffsets(i.source.startDate,[n]),endDate:he.addOffsets(i.source.endDate,[n])})}))}_getProcessedByAppointmentTimeZone(e,n){if(!ti(n.startDateTimeZone)||!ti(n.endDateTimeZone)){const s={startDate:this.timeZoneCalculator.getOffsets(n.startDate,n.startDateTimeZone),endDate:this.timeZoneCalculator.getOffsets(n.endDate,n.endDateTimeZone)};e.forEach(r=>{const o=this.timeZoneCalculator.getOffsets(r.startDate,n.startDateTimeZone),a=this.timeZoneCalculator.getOffsets(r.endDate,n.endDateTimeZone),l=s.startDate.appointment-o.appointment,c=s.endDate.appointment-a.appointment;o.appointment!==o.common&&(r.startDate=new Date(r.startDate.getTime()+l*Da("hour"))),a.appointment!==a.common&&(r.endDate=new Date(r.endDate.getTime()+c*Da("hour")))})}return e}_createAppointments(e,n){let i=this._createRecurrenceAppointments(e,n);return!e.isRecurrent&&i.length===0&&i.push({startDate:e.startDate,endDate:e.endDate}),i=i.map(s=>{var r;const o=(r=s.endDate)===null||r===void 0?void 0:r.getTime();return s.startDate.getTime()===o&&s.endDate.setTime(o+Da("minute")),L({},s,{exceptionDate:new Date(s.startDate)})}),i}_canProcessNotNativeTimezoneDates(e){return!!ti(this.timeZone)||!e.isRecurrent?!1:!De.isEqualLocalTimeZone(this.timeZone,e.startDate)}_getProcessedNotNativeDateIfCrossDST(e,n){if(n<0){const i=new Date(e),s=new Date(i);s.setHours(s.getHours()-1);const r=this.timeZoneCalculator.getOffsets(i).common,o=this.timeZoneCalculator.getOffsets(s).common;if(r!==o)return 0}return n}_getCommonOffset(e){return this.timeZoneCalculator.getOffsets(e).common}_getProcessedNotNativeTimezoneDates(e,n){return e.map(i=>{let s=this._getCommonOffset(n.startDate)-this._getCommonOffset(i.startDate),r=this._getCommonOffset(n.endDate)-this._getCommonOffset(i.endDate);if(s===0&&r===0)return i;s=this._getProcessedNotNativeDateIfCrossDST(i.startDate,s),r=this._getProcessedNotNativeDateIfCrossDST(i.endDate,r);const o=new Date(i.startDate.getTime()+s*Da("hour"));let a=new Date(i.endDate.getTime()+r*Da("hour"));const l=this.timeZoneCalculator.createDate(o,{path:"toGrid"}),c=this.timeZoneCalculator.createDate(a,{path:"toGrid"});return n.duration>c.getTime()-l.getTime()&&(a=new Date(o.getTime()+n.duration)),L({},i,{startDate:o,endDate:a,exceptionDate:new Date(o)})})}_needSeparateLongParts(){return this.isVerticalOrientation?this.isGroupedByDate:this.isGroupedByDate&&this.appointmentTakesAllDay}normalizeEndDateByViewEnd(e,n){let i=new Date(n.getTime());if(!(ol(this.viewType)&&this.appointmentTakesAllDay)){const l=V.roundToHour(this.endViewDate);i>l&&(i=l)}const r=this.viewEndDayHour,o=Be.getField(this.dataAccessors,"allDay",e),a=new Date(new Date(n.getTime()).setHours(r,0,0,0));return(i.getTime()>a.getTime()||o&&i.getHours()<r)&&(i=a),i}_fillNormalizedEndDate(e,n){return e.map(i=>L({},i,{normalizedEndDate:this.normalizeEndDateByViewEnd(n,i.endDate)}))}_separateLongParts(e,n){let i=[];return e.forEach(s=>{const r=new Date(this.dateRange[1]),{startDate:o,normalizedEndDate:a}=s,c=V.getDatesOfInterval(o,a,{milliseconds:this.getIntervalDuration()}).filter(u=>new Date(u)<r).map(u=>{const d=new Date(new Date(u).setMilliseconds(n.duration)),p=this.normalizeEndDateByViewEnd(this.rawAppointment,d);return{startDate:u,endDate:d,normalizedEndDate:p,source:s.source}});i=i.concat(c)}),i}_createGridAppointmentList(e,n){return e.map(i=>{const s=n.startDate.getTimezoneOffset()-i.startDate.getTimezoneOffset();s!==0&&this._canProcessNotNativeTimezoneDates(n)&&(i.startDate=he.addOffsets(i.startDate,[s*Da("minute")]),i.endDate=he.addOffsets(i.endDate,[s*Da("minute")]),i.exceptionDate=new Date(i.startDate));const r=i.endDate.getTime()-i.startDate.getTime(),o=this.timeZoneCalculator.createDate(i.startDate,{path:"toGrid"}),a=he.addOffsets(o,[r]);return{startDate:o,endDate:a,allDay:n.allDay||!1,source:i}})}_createExtremeRecurrenceDates(e){let n=this.appointmentTakesAllDay?V.trimTime(this.dateRange[0]):this.dateRange[0],i=this.dateRange[1];if(this.timeZone){n=this.timeZoneCalculator.createDate(n,{path:"fromGrid"}),i=this.timeZoneCalculator.createDate(i,{path:"fromGrid"});const s=De.getDaylightOffsetInMs(n,i);s&&(i=new Date(i.getTime()+s))}return[n,i]}_createRecurrenceOptions(e,n){const{viewOffset:i}=this.options,s=he.addOffsets(e.startDate,[i]),r=he.addOffsets(e.endDate,[i]),[o,a]=this._createExtremeRecurrenceDates(n),l=he.addOffsets(o,[i]),c=he.addOffsets(a,[i]);return{rule:e.recurrenceRule,exception:e.recurrenceException,min:l,max:c,firstDayOfWeek:this.firstDayOfWeek,start:s,end:r,appointmentTimezoneOffset:this.timeZoneCalculator.getOriginStartDateOffsetInMs(s,e.rawAppointment.startDateTimeZone,!0),getPostProcessedException:u=>{if(ti(this.timeZone)||De.isEqualLocalTimeZone(this.timeZone,u))return u;const d=this.timeZoneCalculator.getOffsets(s).common,p=this.timeZoneCalculator.getOffsets(u).common;let f=d-p;return f=this._getProcessedNotNativeDateIfCrossDST(u,f),new Date(u.getTime()-f*V.dateToMilliseconds("hour"))}}}_createRecurrenceAppointments(e,n){const{duration:i}=e,{viewOffset:s}=this.options,r=this._createRecurrenceOptions(e);return ks().generateDates(r).map(a=>{const l=De.createUTCDateWithLocalOffset(a);l.setTime(l.getTime()+i);const c=De.createDateFromUTCWithLocalOffset(l);return{startDate:new Date(a),endDate:c}}).map(a=>{let{startDate:l,endDate:c}=a;return{startDate:he.addOffsets(l,[-s]),endDate:he.addOffsets(c,[-s])}})}_getAppointmentsFirstViewDate(e){const{viewOffset:n}=this.options;return e.map(i=>{const s=this._getAppointmentFirstViewDate(L({},i,{startDate:he.addOffsets(i.startDate,[n]),endDate:he.addOffsets(i.endDate,[n])}));if(!s)return i.startDate;const r=he.addOffsets(s,[-n]);return r>i.startDate?r:i.startDate})}_fillNormalizedStartDate(e,n,i){return e.map((s,r)=>L({},s,{startDate:this._getAppointmentResultDate({appointment:s,rawAppointment:i,startDate:new Date(s.startDate),startDayHour:this.viewStartDayHour,firstViewDate:n[r]})}))}_cropAppointmentsByStartDayHour(e,n){return e.filter((i,s)=>n[s]?this.appointmentTakesAllDay?!0:i.endDate>i.startDate:!1)}_getAppointmentResultDate(e){const{appointment:n,startDayHour:i,firstViewDate:s}=e;let{startDate:r}=e,o;return this.appointmentTakesAllDay?o=V.normalizeDate(r,s):(r<s&&(r=s),o=V.normalizeDate(n.startDate,r)),this.isDateAppointment?o:V.roundDateByStartDayHour(o,i)}_getAppointmentFirstViewDate(e){const n=e.source.groupIndex||0,{startDate:i,endDate:s}=e;return this.isAllDayRowAppointment||e.allDay?this.viewDataProvider.findAllDayGroupCellStartDate(n):this.viewDataProvider.findGroupCellStartDate(n,i,s,this.isDateAppointment)}_getGroupIndices(e){let n=[];if(e&&this.loadedResources.length){const i=dp(this.loadedResources);n=ZS((s,r)=>U_(this.options.dataAccessors.resources,s,r),i,e)}return n}}class kse extends kH{get groupCount(){return Kr(this.loadedResources)}_createRecurrenceAppointments(e,n){const{duration:i}=e,s=[];return(this.groupCount?n:[0]).forEach(o=>{const a=this._createRecurrenceOptions(e,o),c=ks().generateDates(a).map(u=>{const d=new Date(u),p=De.createUTCDateWithLocalOffset(u);p.setTime(p.getTime()+i);const f=De.createDateFromUTCWithLocalOffset(p);return{startDate:d,endDate:f,groupIndex:o}});s.push(...c)}),s}_updateGroupIndices(e,n){const i=[];return n.forEach(s=>{this.viewDataProvider.getGroupStartDate(s)&&e.forEach(o=>{const a=T({},o);a.groupIndex=s,i.push(a)})}),i}_getGroupIndices(e){var n;let i=super._getGroupIndices(e);const s=this.viewDataProvider.getGroupIndices();return(n=i)!==null&&n!==void 0&&n.length||(i=[0]),i.filter(r=>s.indexOf(r)!==-1)}_createAppointments(e,n){const i=super._createAppointments(e,n);return e.isRecurrent?i:this._updateGroupIndices(i,n)}}class Rse{constructor(e){this.options=e,this.appointmentAdapter=ct(this.rawAppointment,this.dataAccessors,this.timeZoneCalculator)}get rawAppointment(){return this.options.rawAppointment}get dataAccessors(){return this.options.dataAccessors}get timeZoneCalculator(){return this.options.timeZoneCalculator}get isAllDayRowAppointment(){return this.options.appointmentTakesAllDay&&this.options.supportAllDayRow}get groups(){return this.options.groups}get dateSettingsStrategy(){const e=L({},this.options,{isAllDayRowAppointment:this.isAllDayRowAppointment});return this.options.isVirtualScrolling?new kse(e):new kH(e)}create(){const{dateSettings:e,itemGroupIndices:n,isRecurrent:i}=this._generateDateSettings(),s=this._calculateCellPositions(e,n);return this._prepareAppointmentInfos(e,s,i)}_generateDateSettings(){return this.dateSettingsStrategy.generate(this.appointmentAdapter)}_calculateCellPositions(e,n){return new Ise(L({},this.options,{dateSettings:e})).calculateCellPositions(n,this.isAllDayRowAppointment,this.appointmentAdapter.isRecurrent)}_prepareAppointmentInfos(e,n,i){const s=[];return n.forEach(r=>{let{coordinates:o,dateSettingIndex:a}=r;const l=e[a],c=this._getAppointmentDateText(l),u={appointment:l,sourceAppointment:l.source,dateText:c,isRecurrent:i};s.push(L({},o,{info:u}))}),s}_getAppointmentDateText(e){const{startDate:n,endDate:i,allDay:s}=e;return Ase({startDate:n,endDate:i,allDay:s,format:"TIME"})}}class RH{constructor(e){this._renderingStrategy=e}getDropDownAppointmentWidth(e,n){return n||!M(n)?75*this._renderingStrategy.cellWidth/100:24}getCollectorTopOffset(e){return 3}getCollectorLeftOffset(){return 3}getAppointmentDefaultOffset(){return this._renderingStrategy._isCompactTheme()?22:this._renderingStrategy.appointmentOffset}getDynamicAppointmentCountPerCell(){const e=this._renderingStrategy,{cellHeight:n}=e,i=Math.floor((n-e._getAppointmentDefaultOffset())/e._getAppointmentDefaultHeight())||this._getAppointmentMinCount();return e.allDaySupported()?{allDay:e.groupOrientation==="vertical"?i:this._renderingStrategy.appointmentCountPerCell,simple:this._calculateDynamicAppointmentCountPerCell()||this._getAppointmentMinCount()}:i}getDropDownAppointmentHeight(){}_getAppointmentMinCount(){return 1}_calculateDynamicAppointmentCountPerCell(){return Math.floor(this._renderingStrategy._getAppointmentMaxWidth()/50)}_getAppointmentDefaultWidth(){return 40}}class Ose extends RH{getDropDownAppointmentWidth(e,n){return this.getDropDownButtonAdaptiveSize()}getDropDownButtonAdaptiveSize(){return 28}getCollectorTopOffset(e){const n=this._renderingStrategy;return n.allDaySupported()&&e?(n.allDayHeight-n.getDropDownButtonAdaptiveSize())/2:this._renderingStrategy.cellHeight-40}getCollectorLeftOffset(){const e=this._renderingStrategy.getDropDownAppointmentWidth();return(this._renderingStrategy.cellWidth-e)/2}getAppointmentDefaultOffset(){return 35}getDynamicAppointmentCountPerCell(){return this._renderingStrategy.allDaySupported()?{allDay:0,simple:this._calculateDynamicAppointmentCountPerCell()||this._getAppointmentMinCount()}:0}getDropDownAppointmentHeight(){return 28}_getAppointmentMinCount(){return 0}_getAppointmentDefaultWidth(){return this._renderingStrategy.allDaySupported()?30:super._getAppointmentDefaultWidth()}_calculateDynamicAppointmentCountPerCell(){return Math.floor(this._renderingStrategy._getAppointmentMaxWidth()/this._renderingStrategy._getAppointmentDefaultWidth())}}const kf=V.dateToMilliseconds;class nb{constructor(e){this.options=e,this._initPositioningStrategy()}get isAdaptive(){return this.options.adaptivityEnabled}get rtlEnabled(){return this.options.rtlEnabled}get startDayHour(){return this.options.startDayHour}get endDayHour(){return this.options.endDayHour}get maxAppointmentsPerCell(){return this.options.maxAppointmentsPerCell}get cellWidth(){return this.options.cellWidth}get cellHeight(){return this.options.cellHeight}get allDayHeight(){return this.options.allDayHeight}get resizableStep(){return this.options.resizableStep}get isGroupedByDate(){return this.options.isGroupedByDate}get visibleDayDuration(){return this.options.visibleDayDuration}get viewStartDayHour(){return this.options.viewStartDayHour}get viewEndDayHour(){return this.options.viewEndDayHour}get cellDuration(){return this.options.cellDuration}get cellDurationInMinutes(){return this.options.cellDurationInMinutes}get leftVirtualCellCount(){return this.options.leftVirtualCellCount}get topVirtualCellCount(){return this.options.topVirtualCellCount}get positionHelper(){return this.options.positionHelper}get showAllDayPanel(){return this.options.showAllDayPanel}get isGroupedAllDayPanel(){return this.options.isGroupedAllDayPanel}get groupOrientation(){return this.options.groupOrientation}get rowCount(){return this.options.rowCount}get groupCount(){return this.options.groupCount}get currentDate(){return this.options.currentDate}get appointmentCountPerCell(){return this.options.appointmentCountPerCell}get appointmentOffset(){return this.options.appointmentOffset}get allowResizing(){return this.options.allowResizing}get allowAllDayResizing(){return this.options.allowAllDayResizing}get viewDataProvider(){return this.options.viewDataProvider}get dataAccessors(){return this.options.dataAccessors}get timeZoneCalculator(){return this.options.timeZoneCalculator}get intervalCount(){return this.options.intervalCount}get allDayPanelMode(){return this.options.allDayPanelMode}get isVirtualScrolling(){return this.options.isVirtualScrolling}_correctCollectorCoordinatesInAdaptive(e,n){e.top+=this.getCollectorTopOffset(n),e.left+=this.getCollectorLeftOffset()}_initPositioningStrategy(){this._positioningStrategy=this.isAdaptive?new Ose(this):new RH(this)}getPositioningStrategy(){return this._positioningStrategy}getAppointmentMinSize(){return 2}keepAppointmentSettings(){return!1}getDeltaTime(e,n,i){}getAppointmentGeometry(e){return e}needCorrectAppointmentDates(){return!0}getDirection(){return"horizontal"}createTaskPositionMap(e,n){delete this._maxAppointmentCountPerCell;const i=e==null?void 0:e.length;if(!i)return;const s=[];for(let a=0;a<i;a++){let l=this._getItemPosition(e[a]);l.length&&this.rtlEnabled&&(l=this._correctRtlCoordinates(l)),l.forEach(c=>{c.leftVirtualCellCount=this.leftVirtualCellCount,c.topVirtualCellCount=this.topVirtualCellCount,c.leftVirtualWidth=this.leftVirtualCellCount*this.cellWidth,c.topVirtualHeight=this.topVirtualCellCount*this.cellHeight}),s.push(l)}const r=this._getSortedPositions(s),o=this._getResultPositions(r);return this._getExtendedPositionMap(s,o)}_getDeltaWidth(e,n){const i=this.resizableStep||this.getAppointmentMinSize(),s=n.width;return Math.round((e.width-s)/i)}_correctRtlCoordinates(e){const n=e[0].width||this._getAppointmentMaxWidth();return e.forEach(i=>{i.appointmentReduced||(i.left-=n)}),e}_getAppointmentMaxWidth(){return this.cellWidth}_getItemPosition(e){const n=this.shiftAppointmentByViewOffset(e),i=this.generateAppointmentSettings(n),s=this.isAllDay(n);let r=[];for(let o=0;o<i.length;o++){const a=this.calculateAppointmentHeight(n,i[o]),l=this.calculateAppointmentWidth(n,i[o]);let c=l,u=null,d=[],p=i[o].rowIndex,f=i[o].columnIndex;if(this._needVerifyItemSize()||s){const g=i[o].hMax;this.isAppointmentGreaterThan(g,{left:i[o].left,width:l})&&(u="head",p=i[o].rowIndex,f=i[o].columnIndex,c=this._reduceMultiWeekAppointment(l,{left:i[o].left,right:g}),d=this._getAppointmentParts({sourceAppointmentWidth:l,reducedWidth:c,height:a},i[o]),this.rtlEnabled&&(i[o].left=g))}T(i[o],{height:a,width:c,allDay:s,rowIndex:p,columnIndex:f,appointmentReduced:u}),r=this._getAppointmentPartsPosition(d,i[o],r)}return r}_getAppointmentPartsPosition(e,n,i){return e.length?(e.unshift(n),i=i.concat(e)):i.push(n),i}getAppointmentSettingsGenerator(e){return new Rse(L({rawAppointment:e,appointmentTakesAllDay:this.isAppointmentTakesAllDay(e),getPositionShiftCallback:this.getPositionShift.bind(this)},this.options))}generateAppointmentSettings(e){return this.getAppointmentSettingsGenerator(e).create()}isAppointmentTakesAllDay(e){const n=ct(e,this.dataAccessors,this.timeZoneCalculator);return Oc(n,this.allDayPanelMode)}_getAppointmentParts(e,n){return[]}_getCompactAppointmentParts(e){const n=this.cellWidth||this.getAppointmentMinSize();return Math.round(e/n)}_reduceMultiWeekAppointment(e,n){return this.rtlEnabled?e=Math.floor(n.left-n.right):e=n.right-Math.floor(n.left),e}calculateAppointmentHeight(e,n){return 0}calculateAppointmentWidth(e,n){return 0}isAppointmentGreaterThan(e,n){let i=n.left+n.width-e;return this.rtlEnabled&&(i=e+n.width-n.left),i>this.cellWidth/2}isAllDay(e){return!1}cropAppointmentWidth(e,n){return this.isGroupedByDate?n:e}_getSortedPositions(e,n){const i=[],s=o=>Math.round(100*o)/100,r=(o,a,l,c,u,d,p,f)=>({i:o,j:a,top:s(l),left:s(c),bottom:s(u),right:s(d),cellPosition:p,allDay:f});for(let o=0,a=e.length;o<a;o++)for(let l=0,c=e[o].length;l<c;l++){const{top:u,left:d,height:p,width:f,cellPosition:g,allDay:y}=e[o][l];i.push(r(o,l,u,d,u+p,d+f,g,y))}return i.sort((o,a)=>this._sortCondition(o,a))}_sortCondition(e,n){}_getConditions(e,n){const i=this._isSomeEdge(e,n);return{columnCondition:i||this._normalizeCondition(e.left,n.left),rowCondition:i||this._normalizeCondition(e.top,n.top),cellPositionCondition:i||this._normalizeCondition(e.cellPosition,n.cellPosition)}}_rowCondition(e,n){const i=this._getConditions(e,n);return i.columnCondition||i.rowCondition}_columnCondition(e,n){const i=this._getConditions(e,n);return i.rowCondition||i.columnCondition}_isSomeEdge(e,n){return e.i===n.i&&e.j===n.j}_normalizeCondition(e,n){const i=e-n;return Math.abs(i)>1?i:0}_isItemsCross(e,n){const i=!!e.allDay==!!n.allDay,s=e.allDay&&n.allDay;if(i){const r=this._getOrientation(s);return this._checkItemsCrossing(e,n,r)}return!1}_checkItemsCrossing(e,n,i){const s=Math.floor(e[i[0]]),r=Math.floor(e[i[1]]),o=Math.ceil(n[i[0]]),a=Math.ceil(n[i[1]]);return Math.abs(e[i[2]]-n[i[2]])<=1&&(s<=o&&r>o||s<a&&r>=a||s===o&&r===a)}_getOrientation(e){return e?["left","right","top"]:["top","bottom","left"]}_getResultPositions(e){const n=[];let i,s=0,r,o,a,l=0,c={};const u=(g,y)=>g.some(C=>C===y)?u(g,++y):y,d=(g,y)=>{const v=y||0;return{index:v,i:g.i,j:g.j,left:g.left,right:g.right,top:g.top,bottom:g.bottom,allDay:g.allDay,sortedIndex:this._skipSortedIndex(v)?null:s++}},p=g=>{c.items=[d(g)],c.left=g.left,c.right=g.right,c.top=g.top,c.bottom=g.bottom,c.allDay=g.allDay},f=g=>{g.forEach(y=>{n.push({index:y.index,count:l+1,i:y.i,j:y.j,sortedIndex:y.sortedIndex})})};for(i=0;i<e.length;i++)r=e[i],o=[],c.items?this._isItemsCross(c,r)?(c.items.forEach(g=>{this._isItemsCross(g,r)&&o.push(g.index)}),a=o.length?u(o,0):0,c.items.push(d(r,a)),l=Math.max(a,l),c.left=Math.min(c.left,r.left),c.right=Math.max(c.right,r.right),c.top=Math.min(c.top,r.top),c.bottom=Math.max(c.bottom,r.bottom),c.allDay=r.allDay):(f(c.items),c={},p(r),l=0):p(r);return c.items&&f(c.items),n.sort((g,y)=>{const v=g.j-y.j;return g.i-y.i||v})}_skipSortedIndex(e){return e>this._getMaxAppointmentCountPerCell()-1}_findIndexByKey(e,n,i,s,r){let o=0;for(let a=0,l=e.length;a<l;a++)if(e[a][n]===s&&e[a][i]===r){o=a;break}return o}_getExtendedPositionMap(e,n){let i=0;const s=[];for(let r=0,o=e.length;r<o;r++){const a=[];for(let l=0,c=e[r].length;l<c;l++)e[r][l].index=n[i].index,e[r][l].sortedIndex=n[i].sortedIndex,e[r][l].count=n[i++].count,a.push(e[r][l]),this._checkLongCompactAppointment(e[r][l],a);s.push(a)}return s}_checkLongCompactAppointment(e,n){return this._splitLongCompactAppointment(e,n),n}_splitLongCompactAppointment(e,n){const i=this._getMaxAppointmentCountPerCellByType(e.allDay);let s=0;if(i!==void 0&&e.index>i-1){e.isCompact=!0,s=this._getCompactAppointmentParts(e.width);for(let r=1;r<s;r++){const o=T(!0,{},e);o.left=this._getCompactLeftCoordinate(e.left,r),o.columnIndex+=r,o.sortedIndex=null,n.push(o)}}return n}_adjustDurationByDaylightDiff(e,n,i){const{viewOffset:s}=this.options,r=he.addOffsets(n,[s]),o=he.addOffsets(i,[s]),a=De.getDaylightOffset(r,o),l=this._needAdjustDuration(a)?this._calculateDurationByDaylightDiff(e,a):e;return l<=Math.abs(a)?e:l}_needAdjustDuration(e){return e!==0}_calculateDurationByDaylightDiff(e,n){return e+n*kf("minute")}_getCollectorLeftOffset(e){if(e||!this.isApplyCompactAppointmentOffset())return 0;const n=this.getDropDownAppointmentWidth(this.intervalCount,e),i=this._isCompactTheme()?1:5;return this.cellWidth-n-i}_markAppointmentAsVirtual(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this._getMaxAppointmentCountPerCellByType(n);if(e.count-i>0){const{top:s,left:r}=e,o=this.isAdaptive||!n&&this.supportCompactDropDownAppointments();e.virtual={left:r+this._getCollectorLeftOffset(n),top:s,width:this.getDropDownAppointmentWidth(this.intervalCount,n),height:this.getDropDownAppointmentHeight(),index:this._generateAppointmentCollectorIndex(e,n),isAllDay:n,groupIndex:e.groupIndex,isCompact:o}}}isApplyCompactAppointmentOffset(){return this.supportCompactDropDownAppointments()}supportCompactDropDownAppointments(){return!0}_generateAppointmentCollectorIndex(e,n){let{groupIndex:i,rowIndex:s,columnIndex:r}=e;return`${i}-${s}-${r}-${n}`}_getMaxAppointmentCountPerCellByType(e){const n=this._getMaxAppointmentCountPerCell();return ue(n)?e?n.allDay:n.simple:n}getDropDownAppointmentWidth(e,n){return this.getPositioningStrategy().getDropDownAppointmentWidth(e,n)}getDropDownAppointmentHeight(){return this.getPositioningStrategy().getDropDownAppointmentHeight()}getDropDownButtonAdaptiveSize(){return 28}getCollectorTopOffset(e){return this.getPositioningStrategy().getCollectorTopOffset(e)}getCollectorLeftOffset(){return this.getPositioningStrategy().getCollectorLeftOffset()}getAppointmentDataCalculator(){}getVerticalAppointmentHeight(e,n,i){let s=i;if(ut(this.maxAppointmentsPerCell)){const r=this._getDynamicAppointmentCountPerCell(),o=r.allDay||r,a=Math.max(n,o);s=Math.min(a,i)}return e/s}_customizeCoordinates(e,n,i,s,r){const{index:o,count:a}=e,l=this.getVerticalAppointmentHeight(n,a,i),u=e.top+o*l+s,{width:d}=e,{left:p}=e;return e.isCompact&&(this.isAdaptive&&this._correctCollectorCoordinatesInAdaptive(e,r),this._markAppointmentAsVirtual(e,r)),{height:l,width:d,top:u,left:p,empty:this._isAppointmentEmpty(n,d)}}_isAppointmentEmpty(e,n){return e<this._getAppointmentMinHeight()||n<this._getAppointmentMinWidth()}_calculateGeometryConfig(e){const n=this.maxAppointmentsPerCell,i=this._getOffsets(),s=this._getAppointmentDefaultOffset();let r=this._getAppointmentCount(n,e),o=this._getDefaultRatio(e,r),a=this._getMaxHeight();ut(r)||(r=e.count,o=(a-i.unlimited)/a);let l=(1-o)*a;return(n==="auto"||ut(n))&&(o=1,a-=s,l=s),{height:o*a,appointmentCountPerCell:r,offset:l}}_getAppointmentCount(e,n){}_getDefaultRatio(e,n){}_getOffsets(){}_getMaxHeight(){}_needVerifyItemSize(){return!1}_getMaxAppointmentCountPerCell(){if(!this._maxAppointmentCountPerCell){const e=this.maxAppointmentsPerCell;let n;ut(e)&&(n=e),e==="auto"&&(n=this._getDynamicAppointmentCountPerCell()),e==="unlimited"&&(n=void 0),this._maxAppointmentCountPerCell=n}return this._maxAppointmentCountPerCell}_getDynamicAppointmentCountPerCell(){return this.getPositioningStrategy().getDynamicAppointmentCountPerCell()}allDaySupported(){return!1}_isCompactTheme(){return(xi()||"").split(".").pop()==="compact"}_getAppointmentDefaultOffset(){return this.getPositioningStrategy().getAppointmentDefaultOffset()}_getAppointmentDefaultHeight(){return this._getAppointmentHeightByTheme()}_getAppointmentMinHeight(){return this._getAppointmentDefaultHeight()}_getAppointmentHeightByTheme(){return this._isCompactTheme()?18:20}_getAppointmentDefaultWidth(){return this.getPositioningStrategy()._getAppointmentDefaultWidth()}_getAppointmentMinWidth(){return this._getAppointmentDefaultWidth()}_needVerticalGroupBounds(e){return!1}_needHorizontalGroupBounds(){return!1}getAppointmentDurationInMs(e,n,i){if(i){const v=n.getTime()-e.getTime();return Math.ceil(v/kf("day"))*this.visibleDayDuration}const s=kf("hour"),r=V.trimTime(e),o=V.trimTime(n),l=(o-r)/kf("day")+1,c=this.endDayHour-this.startDayHour,u=c*l,d=(e-r)/s,p=Math.max(0,d-this.startDayHour),f=Math.max(0,(n-o)/s-this.startDayHour),g=Math.max(0,c-f);return(u-(p+g))*s}getPositionShift(e,n){return{top:e*this.cellHeight,left:0,cellPosition:0}}shiftAppointmentByViewOffset(e){const{viewOffset:n}=this.options,i=this.dataAccessors.expr.startDateExpr,s=this.dataAccessors.expr.endDateExpr;let r=new Date(Be.getField(this.dataAccessors,"startDate",e));r=he.addOffsets(r,[-n]);let o=new Date(Be.getField(this.dataAccessors,"endDate",e));return o=he.addOffsets(o,[-n]),L({},e,{[i]:r,[s]:o})}}class Pse extends nb{get instance(){return this.options.instance}get agendaDuration(){return this.options.agendaDuration}getAppointmentMinSize(){}getDeltaTime(){}keepAppointmentSettings(){return!0}getAppointmentGeometry(e){return e}groupAppointmentByResources(e){const n=this.instance._getCurrentViewOption("groups"),i={loadedResources:this.options.loadedResources,resources:this.options.resources,dataAccessors:this.dataAccessors.resources};return Kne(i,e,n)}createTaskPositionMap(e){let n,i;if(this.calculateRows(e,this.agendaDuration,this.currentDate),e.length){n=this.instance.fire("getAgendaVerticalStepHeight"),i=this.groupAppointmentByResources(e);let o=[];N(i,(a,l)=>{let c=[],u=[];N(l,(d,p)=>{const f=this.instance.getAppointmentsInstance()._processRecurrenceAppointment(p,d);let g=null;f.indexes.length||(g=this.instance.getAppointmentsInstance()._processLongAppointment(p),c=c.concat(g.parts)),c=c.concat(f.parts),u=u.concat(f.indexes)}),this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(u,l),this.instance.getAppointmentsInstance()._combineAppointments(l,c),o=o.concat(l)}),Array.prototype.splice.apply(e,[0,e.length].concat(o))}const s=[];let r=0;return e.forEach((o,a)=>{s.push([{height:n,width:"100%",sortedIndex:r++,groupIndex:this._calculateGroupIndex(a,i),agendaSettings:o.settings}]),delete o.settings}),s}_calculateGroupIndex(e,n){let i,s=0;for(const r in n){const o=n[r].length;if(e>=s&&e<s+o){i=Number(r);break}s+=o}return i}_getDeltaWidth(e,n){}_getAppointmentMaxWidth(){return this.cellWidth}_needVerifyItemSize(){return!1}_getAppointmentParts(e,n){}_reduceMultiWeekAppointment(){}calculateAppointmentHeight(){return 0}calculateAppointmentWidth(){return 0}isAppointmentGreaterThan(e,n){}isAllDay(){return!1}_sortCondition(){}_rowCondition(e,n){}_columnCondition(e,n){}_findIndexByKey(e,n,i,s,r){}_markAppointmentAsVirtual(){}getDropDownAppointmentWidth(){}getCollectorLeftOffset(){}getCollectorTopOffset(){}replaceWrongAppointmentEndDate(e,n,i){const s=ct(e,this.dataAccessors,this.timeZoneCalculator);eF(s,n,i,this.cellDuration,this.dataAccessors)}calculateRows(e,n,i,s){this._rows=[],i=V.trimTime(new Date(i));const r=this.groupAppointmentByResources(e);return N(r,(o,a)=>{const l=[],c={indexes:[],parts:[]};if(!a.length)return this._rows.push([]),!0;N(a,(d,p)=>{const f=Be.getField(this.dataAccessors,"startDate",p),g=Be.getField(this.dataAccessors,"endDate",p);this.replaceWrongAppointmentEndDate(p,f,g),s&&delete p.settings;const y=this.instance.getAppointmentsInstance()._processRecurrenceAppointment(p,d,!1);c.parts=c.parts.concat(y.parts),c.indexes=c.indexes.concat(y.indexes)}),this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(c.indexes,a),a.push(...c.parts);const u=a.length;for(let d=0;d<n;d++){const p=new Date(i);p.setMilliseconds(p.getMilliseconds()+864e5*d),l[d]===void 0&&(l[d]=0);for(let f=0;f<u;f++){const g=a[f].settings||a[f],y=ct(a[f],this.dataAccessors,this.timeZoneCalculator),v=DS(y),C=Be.getField(this.dataAccessors,"recurrenceRule",a[f]);(this.instance.fire("dayHasAppointment",p,g,!0)||!C&&v&&this.instance.fire("dayHasAppointment",p,a[f],!0))&&(l[d]+=1)}}this._rows.push(l)}),this._rows}_iterateRow(e,n,i){for(let s=0;s<e.length;s++)if(n.counter+=e[s],n.counter>=i){n.indexInRow=s;break}}getDateByIndex(e,n,i){const s={counter:0,indexInRow:0};e++;for(let r=0;r<n.length&&(this._iterateRow(n[r],s,e),!s.indexInRow);r++);return new Date(new Date(i).setDate(i.getDate()+s.indexInRow))}getAppointmentDataCalculator(){return(e,n)=>{const i=e.index(),s=this.instance.getStartViewDate(),r=this.getDateByIndex(i,this._rows,s),o=new Date(n);return{startDate:new Date(r.setHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()))}}}}const aC=V.dateToMilliseconds;class OH extends nb{_needVerifyItemSize(){return!0}calculateAppointmentWidth(e,n){const i=this.cellWidth||this.getAppointmentMinSize(),s=Be.getField(this.dataAccessors,"allDay",e),{startDate:r,endDate:o,normalizedEndDate:a}=n.info.appointment;let l=this.getAppointmentDurationInMs(r,a,s);l=this._adjustDurationByDaylightDiff(l,r,a);const c=this.cellDurationInMinutes*aC("minute"),u=C0(r,o,e.allDay,this.viewDataProvider),d=(l-u*aC("hour"))/c;return this.cropAppointmentWidth(d*i,i)}_needAdjustDuration(e){return e<0}getAppointmentGeometry(e){const n=this._customizeAppointmentGeometry(e);return super.getAppointmentGeometry(n)}_customizeAppointmentGeometry(e){const n=this._calculateGeometryConfig(e);return this._customizeCoordinates(e,n.height,n.appointmentCountPerCell,n.offset)}_getOffsets(){return{unlimited:0,auto:0}}_getCompactLeftCoordinate(e,n){const i=this.cellWidth||this.getAppointmentMinSize();return e+i*n}_getMaxHeight(){return this.cellHeight||this.getAppointmentMinSize()}_getAppointmentCount(e,n){return this._getMaxAppointmentCountPerCellByType(!1)}_getAppointmentDefaultHeight(){return 60}_getAppointmentMinHeight(){return 35}_sortCondition(e,n){return this._columnCondition(e,n)}_getOrientation(){return["left","right","top"]}getDropDownAppointmentWidth(e,n){return this.cellWidth-4}getDeltaTime(e,n){let i=0;const s=e.width-n.width;return i=aC("minute")*Math.round(s/this.cellWidth*this.cellDurationInMinutes),i}isAllDay(e){return Be.getField(this.dataAccessors,"allDay",e)}_isItemsCross(e,n){const i=this._getOrientation();return this._checkItemsCrossing(e,n,i)}getPositionShift(e){const n=super.getPositionShift(e);let i=this.cellWidth*e;return this.rtlEnabled&&(i*=-1),i+=n.left,{top:0,left:i,cellPosition:i}}supportCompactDropDownAppointments(){return!1}}const PH=t=>{const{dateTableCellsMeta:e}=t,n=e==null?void 0:e.length;if(!n)return{width:0,height:0};const i=n>1?1:0,s=e[i][0];return{width:s.width,height:s.height}},Mse=(t,e,n,i)=>{const{dateTableCellsMeta:s}=i,r=s[0];if(!r)return 0;const{columnIndex:o}=e.getLastGroupCellPosition(t),a=r[o];return a?n?a.left:a.left+a.width:0},ib=t=>PH(t).height,q_=t=>PH(t).width,Sh=(t,e,n)=>{if(!t)return 0;if(e){const{dateTableCellsMeta:s}=n;return(s==null?void 0:s.length)?s[0][0].height:0}const{allDayPanelCellsMeta:i}=n;return i!=null&&i.length?i[0].height:0},sb=(t,e,n,i)=>Mse(t||0,e,n,i),Vse=(t,e,n)=>{const{isVirtualScrolling:i,rtlEnabled:s,DOMMetaData:r}=n,o=q_(r);let a=e.getCellCount(n)*o;i&&(a=e.groupedDataMap.dateTableGroupedMap[t][0].length*o);const l=sb(t,e,s,r),c=l[t];return c&&(s?a=c-l[t+1]:t===0?a=c:a=c-l[t-1]),a};class Bse{get viewDataProvider(){return this.options.viewDataProvider}get rtlEnabled(){return this.options.rtlEnabled}get isGroupedByDate(){return this.options.isGroupedByDate}get groupCount(){return this.options.groupCount}get DOMMetaData(){return this.options.getDOMMetaDataCallback()}constructor(e){this.options=e,this.groupStrategy=this.options.isVerticalGrouping?new MH(this.options):new Lse(this.options)}getHorizontalMax(e){const n=i=>sb(i,this.viewDataProvider,this.rtlEnabled,this.DOMMetaData);if(this.isGroupedByDate){const i=this.viewDataProvider.getViewPortGroupCount();return Math.max(n(e),n(i-1))}return n(e)}getResizableStep(){const e=q_(this.DOMMetaData);return this.isGroupedByDate?this.groupCount*e:e}getVerticalMax(e){return this.groupStrategy.getVerticalMax(e)}getOffsetByAllDayPanel(e){return this.groupStrategy.getOffsetByAllDayPanel(e)}getGroupTop(e){return this.groupStrategy.getGroupTop(e)}}class MH{constructor(e){this.options=e}get viewDataProvider(){return this.options.viewDataProvider}get isGroupedByDate(){return this.options.isGroupedByDate}get rtlEnabled(){return this.options.rtlEnabled}get groupCount(){return this.options.groupCount}get DOMMetaData(){return this.options.getDOMMetaDataCallback()}getOffsetByAllDayPanel(e){let{groupIndex:n,supportAllDayRow:i,showAllDayPanel:s}=e,r=0;return i&&s&&(r=Sh(s,!0,this.DOMMetaData)*(n+1)),r}getVerticalMax(e){let n=this._getMaxAllowedVerticalPosition(L({},e,{viewDataProvider:this.viewDataProvider,rtlEnabled:this.rtlEnabled,DOMMetaData:this.DOMMetaData}));return n+=this.getOffsetByAllDayPanel(e),n}getGroupTop(e){let{groupIndex:n,showAllDayPanel:i,isGroupedAllDayPanel:s}=e;const r=this.viewDataProvider.getRowCountInGroup(n);return this._getMaxAllowedVerticalPosition({groupIndex:n,viewDataProvider:this.viewDataProvider,showAllDayPanel:i,isGroupedAllDayPanel:s,isVerticalGrouping:!0,DOMMetaData:this.DOMMetaData})-ib(this.DOMMetaData)*r}_getAllDayHeight(e){return Sh(e,!0,this.DOMMetaData)}_getMaxAllowedVerticalPosition(e){let{groupIndex:n,showAllDayPanel:i,isGroupedAllDayPanel:s}=e;const{rowIndex:r}=this.viewDataProvider.getLastGroupCellPosition(n),{dateTableCellsMeta:o}=this.DOMMetaData,a=o[r];if(!a)return 0;let l=a[0].top+a[0].height;return s&&(l-=(n+1)*this._getAllDayHeight(i)),l}}class Lse extends MH{getOffsetByAllDayPanel(){return 0}getVerticalMax(e){const{isVirtualScrolling:n,groupIndex:i}=e,s=n?i:0;return this._getMaxAllowedVerticalPosition(L({},e,{groupIndex:s}))}getGroupTop(){return 0}_getAllDayHeight(e){return Sh(e,!1,this.DOMMetaData)}}class VH extends OH{calculateAppointmentWidth(e,n){const{startDate:i,normalizedEndDate:s}=n.info.appointment,r=V.trimTime(i),o=this.cellWidth||this.getAppointmentMinSize(),a=Math.ceil(this._getDurationInDays(r,s));let l=this.cropAppointmentWidth(a*o,o);if(this.isVirtualScrolling){const c=this.viewDataProvider.getSkippedDaysCount(n.groupIndex,r,s,a);l-=c*o}return l}_columnCondition(e,n){const i=this._getConditions(e,n);return i.rowCondition||i.columnCondition||i.cellPositionCondition}_getDurationInDays(e,n){return this._adjustDurationByDaylightDiff(n.getTime()-e.getTime(),e,n)/V.dateToMilliseconds("day")||1}getDeltaTime(e,n){return 864e5*this._getDeltaWidth(e,n)}isAllDay(){return!1}createTaskPositionMap(e,n){return n||tF(e,this.dataAccessors),super.createTaskPositionMap(e)}_getSortedPositions(e,n){let i=super._getSortedPositions(e);return n||(i=As(i).sortBy("top").thenBy("left").thenBy("cellPosition").thenBy("i").toArray()),i}needCorrectAppointmentDates(){return!1}getPositionShift(e){return{top:0,left:0,cellPosition:e*this.cellWidth}}}const $se=V.dateToMilliseconds;class Fse extends VH{get endViewDate(){return this.options.endViewDate}get adaptivityEnabled(){return this.options.adaptivityEnabled}get DOMMetaData(){return this.options.DOMMetaData}_getLeftPosition(e){const n=this.getGroupWidth(e.groupIndex);return this._calculateMultiWeekAppointmentLeftOffset(e.hMax,n)}_getChunkCount(e,n,i,s){const{groupIndex:r,info:{appointment:{startDate:o}}}=s,a=e-n+i,l=Math.ceil(a/i),c=this._tryGetRowIndexInView(o);if(c!==void 0){const d=this.viewDataProvider.getRowCountInGroup(r)-c;return l<=d?l:d}return l}_tryGetRowIndexInView(e){var n;const i=this.viewDataProvider.getColumnsCount();if(((n=this.options.dataRange)===null||n===void 0?void 0:n.length)<1||!i)return;const[s]=this.options.dateRange,r=$se("day"),o=e.getTime()-s.getTime();return Math.floor(o/r/i)}_getChunkWidths(e,n,i){const s=e.reducedWidth,r=Math.floor(e.sourceAppointmentWidth),o=r-s;return[s,r,o]}_getTailChunkSettings(e,n,i){const s=e%n||n,r=i+(n-s),o=this.rtlEnabled?r:i;return[s,o]}_getAppointmentParts(e,n){const i=[],s=Math.round(this.getGroupWidth(n.groupIndex)),[r,o,a]=this._getChunkWidths(e,n,s),l=this._getLeftPosition(n),{endDate:c}=n.info.appointment,u=this.endViewDate>c,d=this._getChunkCount(o,r,s,n),[p,f]=this._getTailChunkSettings(a,s,l);for(let g=1;g<d;g++){const y=n.top+this.cellHeight*g,v=u&&g===d-1;i.push(L({},n,{top:y,left:v?f:l,height:e.height,width:v?p:s,appointmentReduced:v?"tail":"body",rowIndex:++n.rowIndex,columnIndex:0}))}return i}_calculateMultiWeekAppointmentLeftOffset(e,n){return this.rtlEnabled?e:e-n}getGroupWidth(e){return Vse(e,this.viewDataProvider,{intervalCount:this.options.intervalCount,currentDate:this.options.currentDate,viewType:this.options.viewType,hoursInterval:this.options.hoursInterval,startDayHour:this.options.startDayHour,endDayHour:this.options.endDayHour,isVirtualScrolling:this.isVirtualScrolling,rtlEnabled:this.rtlEnabled,DOMMetaData:this.DOMMetaData})}_getAppointmentDefaultHeight(){return this._getAppointmentHeightByTheme()}_getAppointmentMinHeight(){return this._getAppointmentDefaultHeight()}createTaskPositionMap(e){return super.createTaskPositionMap(e,!0)}_getSortedPositions(e){return super._getSortedPositions(e,!0)}_getDefaultRatio(){return .6}_getOffsets(){return{unlimited:26,auto:30}}getDropDownAppointmentWidth(e,n){if(this.adaptivityEnabled)return this.getDropDownButtonAdaptiveSize();const i=e>1?60:36;return this.cellWidth-i}needCorrectAppointmentDates(){return!1}_needVerticalGroupBounds(){return!1}_needHorizontalGroupBounds(){return!0}}const Rf=V.dateToMilliseconds;class BH extends nb{getDeltaTime(e,n,i){let s=0;if(this.isAllDay(i))s=this._getDeltaWidth(e,n)*Rf("day");else{const r=e.height-n.height;s=Rf("minute")*Math.round(r/this.cellHeight*this.cellDurationInMinutes)}return s}_correctCollectorCoordinatesInAdaptive(e,n){if(n)super._correctCollectorCoordinatesInAdaptive(e,n);else if(this._getMaxAppointmentCountPerCellByType()===0){const{cellHeight:i}=this,{cellWidth:s}=this;e.top+=(i-this.getDropDownButtonAdaptiveSize())/2,e.left+=(s-this.getDropDownButtonAdaptiveSize())/2}}getAppointmentGeometry(e){let n=null;return e.allDay?n=this._getAllDayAppointmentGeometry(e):n=this.isAdaptive&&e.isCompact?this._getAdaptiveGeometry(e):this._getVerticalAppointmentGeometry(e),super.getAppointmentGeometry(n)}_getAdaptiveGeometry(e){const n=this._calculateGeometryConfig(e);return this._customizeCoordinates(e,n.height,n.appointmentCountPerCell,n.offset)}_getItemPosition(e){const n=this.isAllDay(e);if(n)return super._getItemPosition(e);const i=super.shiftAppointmentByViewOffset(e),s=ct(i,this.dataAccessors,this.timeZoneCalculator),r=!!s.recurrenceRule,o=s.calculateStartDate("toGrid"),a=s.calculateEndDate("toGrid"),l=a-o,c=this.options.startViewDate<o,u=!De.isSameAppointmentDates(o,a),d=this.generateAppointmentSettings(i);let p=[];for(let f=0;f<d.length;f++){const g=d[f],y=this.calculateAppointmentHeight(i,g),v=this.calculateAppointmentWidth(i,g);let C=y,x=null,S=[];const O=g.vMax;if(this._isMultiViewAppointment(g,y)||u&&!r){const H=V.trimTime(o),F=V.trimTime(g.info.appointment.startDate);(H<=F||r)&&(C=this._reduceMultiDayAppointment(y,{top:g.top,bottom:O}),S=this._getAppointmentParts({sourceAppointmentHeight:y,reducedHeight:C,width:v},g));const{startDate:w,normalizedEndDate:A}=g.info.appointment;x=A-w<l?c?"head":"body":c?"head":"tail"}T(g,{height:C,width:v,allDay:n,appointmentReduced:x}),p=this._getAppointmentPartsPosition(S,g,p)}return p}_isMultiViewAppointment(e,n){let{vMax:i,top:s}=e;const r=OI(n,2),o=OI(i-s,2);return r>o}_reduceMultiDayAppointment(e,n){return Math.min(e,n.bottom-Math.floor(n.top))}_getGroupHeight(){return this.cellHeight*this.rowCount}_getGroupTopOffset(e){const{groupIndex:n}=e,i=Math.max(0,this.positionHelper.getGroupTop({groupIndex:n,showAllDayPanel:this.showAllDayPanel,isGroupedAllDayPanel:this.isGroupedAllDayPanel})),s=this.positionHelper.getOffsetByAllDayPanel({groupIndex:n,supportAllDayRow:this.allDaySupported(),showAllDayPanel:this.showAllDayPanel});return e.top-i-s}_getTailHeight(e,n){if(!this.isVirtualScrolling)return e.sourceAppointmentHeight-e.reducedHeight;const i=this._getGroupTopOffset(n),{sourceAppointmentHeight:s}=e,r=this._getGroupHeight();return i+s-r}_getAppointmentParts(e,n){const{width:i}=e,s=[];let r=Math.max(0,this.positionHelper.getGroupTop({groupIndex:n.groupIndex,showAllDayPanel:this.showAllDayPanel,isGroupedAllDayPanel:this.isGroupedAllDayPanel}));const o=this.isGroupedByDate?this.groupCount:1,a=this.cellWidth*o,l=this.positionHelper.getOffsetByAllDayPanel({groupIndex:n.groupIndex,supportAllDayRow:this.allDaySupported(),showAllDayPanel:this.showAllDayPanel});r+=l;const c=this.getAppointmentMinSize(),{hMax:u,vMax:d,vMin:p}=n,f=this.isVirtualScrolling?d:d-p,g=this.options.endViewDate>n.info.appointment.endDate;let y=Math.round(n.left+a),v=this._getTailHeight(e,n),{columnIndex:C}=n;for(;v>0&&y<u;){v=Math.max(c,v),C+=o;const x=Math.min(v,f);s.push(L({},n,{top:r,left:y,height:x,width:i,appointmentReduced:"body",rowIndex:0,columnIndex:C})),y+=a,v-=f}return g&&s.length>0&&(s[s.length-1].appointmentReduced="tail"),s}_getMinuteHeight(){return this.cellHeight/this.cellDurationInMinutes}_getCompactLeftCoordinate(e,n){const i=this.cellWidth||this.getAppointmentMinSize();return e+(1+i)*n}_getVerticalAppointmentGeometry(e){const n=this._calculateVerticalGeometryConfig(e);return this._customizeVerticalCoordinates(e,n.width,n.appointmentCountPerCell,n.offset)}_customizeVerticalCoordinates(e,n,i,s,r){const o=Math.max(n/i,n/e.count),{height:a}=e,l=e.left+e.index*o,{top:c}=e;return e.isCompact&&this._markAppointmentAsVirtual(e,r),{height:a,width:o,top:c,left:l,empty:this._isAppointmentEmpty(a,n)}}_calculateVerticalGeometryConfig(e){const n=this.maxAppointmentsPerCell,i=this._getOffsets(),s=this._getAppointmentDefaultOffset();let r=this._getAppointmentCount(n,e),o=this._getDefaultRatio(e,r),a=this._getMaxWidth();r||(r=e.count,o=(a-i.unlimited)/a);let l=(1-o)*a;return(n==="auto"||ut(n))&&(o=1,a-=s,l=0),{width:o*a,appointmentCountPerCell:r,offset:l}}_getMaxWidth(){return this.cellWidth}isAllDay(e){return Oc(ct(e,this.dataAccessors,this.timeZoneCalculator),this.allDayPanelMode)}_getAppointmentMaxWidth(){return this.cellWidth-this._getAppointmentDefaultOffset()}calculateAppointmentWidth(e,n){if(!this.isAllDay(e))return 0;const{startDate:i,endDate:s,normalizedEndDate:r}=n.info.appointment,o=V.trimTime(i),a=this.cellWidth||this.getAppointmentMinSize(),l=(r.getTime()-o.getTime())/Rf("hour"),c=C0(o,s,e.allDay,this.viewDataProvider);let u=Math.ceil((l-c)/24)*a;return u=this.cropAppointmentWidth(u,a),u}calculateAppointmentHeight(e,n){if(this.isAllDay(e))return 0;const{startDate:i,normalizedEndDate:s}=n.info.appointment,r=Be.getField(this.dataAccessors,"allDay",e),o=this.getAppointmentDurationInMs(i,s,r),a=60*C0(i,s,e.allDay,this.viewDataProvider);return(this._adjustDurationByDaylightDiff(o,i,s)/Rf("minute")-a)*this._getMinuteHeight()}getDirection(){return"vertical"}_sortCondition(e,n){if(!!e.allDay!=!!n.allDay)return e.allDay?1:-1;const i=e.allDay&&n.allDay;return this.groupOrientation==="vertical"&&i?this._columnCondition(e,n):this._rowCondition(e,n)}allDaySupported(){return!0}_getAllDayAppointmentGeometry(e){const n=this._calculateGeometryConfig(e);return this._customizeCoordinates(e,n.height,n.appointmentCountPerCell,n.offset,!0)}_calculateGeometryConfig(e){(!this.allowResizing||!this.allowAllDayResizing)&&(e.skipResizing=!0);const n=super._calculateGeometryConfig(e),i=Math.min(n.appointmentCountPerCell,this._getDynamicAppointmentCountPerCell().allDay);return e.allDay&&e.count<=i&&(n.offset=0),n}_getAppointmentCount(e,n){return e!=="auto"&&n.count===1&&!ut(e)?n.count:this._getMaxAppointmentCountPerCellByType(n.allDay)}_getDefaultRatio(e,n){return e.count>this.appointmentCountPerCell?.65:1}_getOffsets(){return{unlimited:5,auto:20}}_getMaxHeight(){return this.allDayHeight||this.getAppointmentMinSize()}_needVerticalGroupBounds(e){return!e}_needHorizontalGroupBounds(){return!1}getPositionShift(e,n){return!n&&this.isAdaptive&&this._getMaxAppointmentCountPerCellByType(n)===0?{top:0,left:0,cellPosition:0}:super.getPositionShift(e,n)}}class Hse extends BH{isApplyCompactAppointmentOffset(){return this.isAdaptive&&this._getMaxAppointmentCountPerCellByType()===0?!1:this.supportCompactDropDownAppointments()}}const Nse={horizontal:OH,horizontalMonth:Fse,horizontalMonthLine:VH,vertical:BH,week:Hse,agenda:Pse};class zse{initRenderingStrategy(e){const n=Nse[e.appointmentRenderingStrategyName];this.renderingStrategy=new n(e)}generate(e,n){const{viewOffset:i}=n,s=e?e.slice():[];this.initRenderingStrategy(n);const o=this.getRenderingStrategy().createTaskPositionMap(s),a=this.postProcess(s,o),l=this.unshiftViewModelAppointmentsByViewOffset(a,i);return{positionMap:o,viewModel:l}}postProcess(e,n){const i=this.getRenderingStrategy();return e.map((s,r)=>{i.keepAppointmentSettings()||delete s.settings;const o=n[r];o.forEach(l=>{l.direction=i.getDirection()==="vertical"&&!l.allDay?"vertical":"horizontal"});const a={itemData:s,settings:o};return a.needRepaint=!0,a.needRemove=!1,a})}makeRenovatedViewModels(e,n,i){const s=this.getRenderingStrategy(),r=[],o=[],a=[],l=n&&!i;e.forEach(d=>{let{itemData:p,settings:f}=d;f.forEach(g=>{const y=this.prepareViewModel(g,s,p);g.isCompact?a.push({compactViewModel:g.virtual,appointmentViewModel:y}):g.allDay&&l?o.push(y):r.push(y)})});const c=this.prepareCompactViewModels(a,n);return L({allDay:o,regular:r},c)}prepareViewModel(e,n,i){const s=n.getAppointmentGeometry(e);return{key:aZ(s),appointment:i,geometry:L({},s,{leftVirtualWidth:e.leftVirtualWidth,topVirtualHeight:e.topVirtualHeight}),info:L({},e.info,{allDay:e.allDay,direction:e.direction,appointmentReduced:e.appointmentReduced,groupIndex:e.groupIndex})}}getCompactViewModelFrame(e){return{isAllDay:!!e.isAllDay,isCompact:e.isCompact,groupIndex:e.groupIndex,geometry:{left:e.left,top:e.top,width:e.width,height:e.height},items:{colors:[],data:[],settings:[]}}}prepareCompactViewModels(e,n){const i={},s={};e.forEach(l=>{let{compactViewModel:c,appointmentViewModel:u}=l;const{index:d,isAllDay:p}=c,f=p&&n?s:i;f[d]||(f[d]=this.getCompactViewModelFrame(c));const{settings:g,data:y,colors:v}=f[d].items;g.push(u),y.push(u.appointment),v.push(u.info.resourceColor)});const r=l=>Object.keys(l).map(c=>L({key:c},l[c])),o=r(s),a=r(i);return{allDayCompact:o,regularCompact:a}}getRenderingStrategy(){return this.renderingStrategy}unshiftViewModelAppointmentsByViewOffset(e,n){const i=new Set;for(const r of e)for(const o of r.settings??[]){var s;const a=o==null||(s=o.info)===null||s===void 0?void 0:s.appointment;a&&!i.has(a)&&(a.startDate=he.addOffsets(a.startDate,[n]),a.endDate=he.addOffsets(a.endDate,[n]),a.normalizedEndDate=he.addOffsets(a.normalizedEndDate,[n]),i.add(a))}return e}}const Wse=V.dateToMilliseconds;class Gse{constructor(e){this.instance=e,this.appointmentViewModel=new zse}get appointmentRenderingStrategyName(){return oZ(this.instance.currentViewType)}getCellDimensions(e){if(this.instance._workSpace)return{width:this.instance._workSpace.getCellWidth(),height:this.instance._workSpace.getCellHeight(),allDayHeight:this.instance._workSpace.getAllDayHeight()}}_getRenderingStrategyOptions(){const e=this.instance.getWorkSpace(),{virtualScrollingDispatcher:n}=this.instance.getWorkSpace(),{cellCountInsideLeftVirtualCell:i,cellCountInsideTopVirtualRow:s}=n,r=Kr(this.instance.option("loadedResources")),o=e.getDOMElementsMetaData(),a=Sh(e.option("showAllDayPanel"),e._isVerticalGroupedWorkSpace(),o),l=e._getRowCount(),{positionHelper:c,viewDataProvider:u}=e,d=u.getVisibleDayDuration(e.option("startDayHour"),e.option("endDayHour"),e.option("hoursInterval")),p=G$(e.type,e.option("startDayHour"),e.option("endDayHour"),e.option("hoursInterval"));return{resources:this.instance.option("resources"),loadedResources:this.instance.option("loadedResources"),getAppointmentColor:this.instance.createGetAppointmentColor(),dataAccessors:this.instance._dataAccessors,appointmentRenderingStrategyName:this.appointmentRenderingStrategyName,adaptivityEnabled:this.instance.option("adaptivityEnabled"),rtlEnabled:this.instance.option("rtlEnabled"),startDayHour:this.instance._getCurrentViewOption("startDayHour"),endDayHour:this.instance._getCurrentViewOption("endDayHour"),viewOffset:this.instance._getCurrentViewOption("offset")*Wse("minute"),maxAppointmentsPerCell:this.instance._getCurrentViewOption("maxAppointmentsPerCell"),currentDate:this.instance.option("currentDate"),isVirtualScrolling:this.instance.isVirtualScrolling(),leftVirtualCellCount:i,topVirtualCellCount:s,intervalCount:e.option("intervalCount"),hoursInterval:e.option("hoursInterval"),showAllDayPanel:e.option("showAllDayPanel"),isGroupedAllDayPanel:e.isGroupedAllDayPanel(),groups:this.instance._getCurrentViewOption("groups"),groupCount:r,rowCount:l,appointmentCountPerCell:this.instance.option("_appointmentCountPerCell"),appointmentOffset:this.instance.option("_appointmentOffset"),allowResizing:this.instance._allowResizing(),allowAllDayResizing:this.instance._allowAllDayResizing(),startViewDate:e.getStartViewDate(),groupOrientation:e._getRealGroupOrientation(),cellWidth:q_(o),cellHeight:ib(o),allDayHeight:a,resizableStep:c.getResizableStep(),visibleDayDuration:d,allDayPanelMode:this.instance._getCurrentViewOption("allDayPanelMode"),timeZoneCalculator:this.instance.timeZoneCalculator,timeZone:this.instance.option("timeZone"),firstDayOfWeek:this.instance.getFirstDayOfWeek(),viewStartDayHour:this.instance._getCurrentViewOption("startDayHour"),viewEndDayHour:this.instance._getCurrentViewOption("endDayHour"),viewType:e.type,endViewDate:e.getEndViewDate(),positionHelper:c,isGroupedByDate:e.isGroupedByDate(),cellDuration:p,cellDurationInMinutes:e.option("cellDuration"),viewDataProvider:e.viewDataProvider,supportAllDayRow:e.supportAllDayRow(),dateRange:e.getDateRange(),intervalDuration:e.getIntervalDuration(),allDayIntervalDuration:e.getIntervalDuration(!0),isVerticalGroupOrientation:e.isVerticalOrientation(),DOMMetaData:o,instance:this.instance,agendaDuration:e.option("agendaDuration")}}createAppointmentsMap(e){const n=this._getRenderingStrategyOptions(),{viewModel:i,positionMap:s}=this.appointmentViewModel.generate(e,n);return this._positionMap=s,i}_isDataChanged(e){const{appointmentDataProvider:n}=this.instance;return n.getUpdatedAppointment()===e||n.getUpdatedAppointmentKeys().some(s=>e[s.key]===s.value)}_isAppointmentShouldAppear(e,n){return e.needRepaint&&n.needRemove}_isSettingChanged(e,n){if(e.length!==n.length)return!0;const i=(s,r)=>{const o=s[r],a=o.leftVirtualCellCount||0,l=o.topVirtualCellCount||0,c=o.columnIndex+a,u=o.rowIndex+l,d=o.reduced?o.hMax:void 0,p=o.reduced?o.vMax:void 0;return L({},o,{columnIndex:c,rowIndex:u,positionByMap:void 0,topVirtualCellCount:void 0,leftVirtualCellCount:void 0,leftVirtualWidth:void 0,topVirtualHeight:void 0,hMax:d,vMax:p,info:{}})};for(let s=0;s<e.length;s++){const r=i(e,s),o=i(n,s);if(o&&(o.sortedIndex=r.sortedIndex),!Bi(r,o))return!0}return!1}_getAssociatedSourceAppointment(e,n){for(let i=0;i<n.length;i++){const s=n[i];if(s.itemData===e.itemData)return s}return null}_getDeletedAppointments(e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s];this._getAssociatedSourceAppointment(r,e)||(r.needRemove=!0,i.push(r))}return i}getRepaintedAppointments(e,n){return n.length===0||this.appointmentRenderingStrategyName==="agenda"?e:(e.forEach(i=>{const s=this._getAssociatedSourceAppointment(i,n);if(s){const r=this._isDataChanged(i.itemData),o=this._isSettingChanged(i.settings,s.settings),a=this._isAppointmentShouldAppear(i,s);i.needRepaint=r||o||a}}),e.concat(this._getDeletedAppointments(e,n)))}getRenderingStrategyInstance(){if(!this.appointmentViewModel.getRenderingStrategy()){const n=this._getRenderingStrategyOptions();this.appointmentViewModel.initRenderingStrategy(n)}return this.appointmentViewModel.getRenderingStrategy()}}class LH{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];this.appointment=e,this.targetedAppointment=n,this.color=i,this.settings=s}}const rb="dx-scheduler-appointment-collector",Use=`${rb}-compact`,Kse=`${rb}-content`;class jse{constructor(e){this.instance=e,this.elements=[]}render(e){const{isCompact:n,items:i,buttonColor:s}=e,r=this._createTemplate(i.data.length,n),a=this._createCompactButton(r,e).$element();return this._makeBackgroundColor(a,i.colors,s),this._makeBackgroundDarker(a),this.elements.push(a),a.data("items",this._createTooltipInfos(i)),a}clear(){this.elements.forEach(e=>{e.detach(),e.remove()}),this.elements=[]}_createTooltipInfos(e){return e.data.map((n,i)=>{var s;const r=ct(n,this.instance._dataAccessors,this.instance.timeZoneCalculator).clone();if(((s=e.settings)===null||s===void 0?void 0:s.length)>0){const{info:o}=e.settings[i];r.startDate=o.sourceAppointment.startDate,r.endDate=o.sourceAppointment.endDate}return new LH(n,r.source(),e.colors[i],e.settings[i])})}_onButtonClick(e,n){const i=m(e.element);this.instance.showAppointmentTooltipCore(i,i.data("items"),this._getExtraOptionsForTooltip(n,i))}_getExtraOptionsForTooltip(e,n){return{clickEvent:this._clickEvent(e.onAppointmentClick).bind(this),dragBehavior:e.allowDrag&&this._createTooltipDragBehavior(n).bind(this),dropDownAppointmentTemplate:this.instance.option().dropDownAppointmentTemplate,isButtonClick:!0}}_clickEvent(e){return n=>{const i=this.instance._createEventArgs(n);e(i)}}_createTooltipDragBehavior(e){return n=>{const i=m(n.element),s=m(this.instance.element()),r=this.instance.getWorkSpace(),o=Gn(e),a={filter:`.${eZ}`,isSetCursorOffset:!0,initialPosition:o,getItemData:l=>{var c;return(c=m(l).data(g0))===null||c===void 0?void 0:c.appointment},getItemSettings:(l,c)=>c.itemSettings};r._createDragBehaviorBase(i,s,a)}}_getCollectorOffset(e,n){return n-e-this._getCollectorRightOffset()}_getCollectorRightOffset(){return this.instance.getRenderingStrategyInstance()._isCompactTheme()?1:5}_makeBackgroundDarker(e){e.css("boxShadow",`inset ${ke(e.get(0)).width}px 0 0 0 rgba(0, 0, 0, 0.3)`)}_makeBackgroundColor(e,n,i){Ne.apply(null,n).done((function(){this._makeBackgroundColorCore(e,i,[...arguments])}).bind(this))}_makeBackgroundColorCore(e,n,i){n&&n.done(s=>{const r=lZ(s,i);r&&e.css("backgroundColor",r)})}_setPosition(e,n){Ft(e,{top:n.top,left:n.left})}_createCompactButton(e,n){const i=this._createCompactButtonElement(n);return this.instance._createComponent(i,Kn,{type:"default",width:n.width,height:n.height,onClick:s=>this._onButtonClick(s,n),template:this._renderTemplate(e,n.items,n.isCompact)})}_createCompactButtonElement(e){let{isCompact:n,$container:i,coordinates:s}=e;const r=m("<div>").addClass(rb).toggleClass(Use,n).appendTo(i);return this._setPosition(r,s),r}_renderTemplate(e,n,i){return new nr(s=>e.render({model:{appointmentCount:n.data.length,isCompact:i},container:s.container}))}_createTemplate(e,n){return this._initButtonTemplate(e,n),this.instance._getAppointmentTemplate("appointmentCollectorTemplate")}_initButtonTemplate(e,n){this.instance._templateManager.addDefaultTemplates({appointmentCollector:new nr(i=>this._createButtonTemplate(e,m(i.container),n))})}_createButtonTemplate(e,n,i){const s=i?e:q.getFormatter("dxScheduler-moreAppointments")(e);return n.append(m("<span>").text(s)).addClass(Kse)}}const Nn={dataAccessors:{getAppointmentSettings:t=>m(t).data(Dr),getAppointmentInfo:t=>{const e=Nn.dataAccessors.getAppointmentSettings(t);return e==null?void 0:e.info},create:(t,e,n,i)=>{const s=e?L({},e):{getter:{},setter:{},expr:{}};return N(t,(r,o)=>{if(o){const l=lt(o),c=uw(o);let u,d,p;a=r,(a==="startDate"||a==="endDate")&&(u=f=>{let g=l(f);return n&&(g=je.deserializeDate(g)),g},d=(f,g)=>{if(i)p=i;else if(n&&!p){const v=l(f);p=je.getDateSerializationFormat(v)}const y=je.serializeDate(g,p);c(f,y)}),s.getter[r]=u||l,s.setter[r]=d||c,s.expr[`${r}Expr`]=o}else delete s.getter[r],delete s.setter[r],delete s.expr[`${r}Expr`];var a}),s}},DOM:{getHeaderHeight:t=>t?t._$element&&parseInt(tt(t._$element),10):0},renovation:{renderComponent:(t,e,n,i,s)=>{let r=t[i];if(r){const o=r.$element(),a=o.get(0).style,{height:l}=a,{width:c}=a;r.option(s),l&&Ai(o,l),c&&Ys(o,c)}else{const o=se(e);r=t._createComponent(o,n,s),t[i]=r}}}},qse=V.dateToMilliseconds,rO={isCurrentViewAgenda(){return this.currentViewType==="agenda"},currentViewUpdated(t){this.option("currentView",t)},currentDateUpdated(t){this.option("currentDate",t)},getOption(t){return this.option(t)},getWorkspaceOption(t){return this.getWorkSpace().option(t)},isVirtualScrolling(){return this.isVirtualScrolling()},setCellDataCacheAlias(t,e){this._workSpace.setCellDataCacheAlias(t,e)},isGroupedByDate(){return this.getWorkSpace().isGroupedByDate()},showAppointmentTooltip(t){const e=this.getTargetedAppointment(t.data,t.target);this.showAppointmentTooltip(t.data,t.target,e)},hideAppointmentTooltip(){this.hideAppointmentTooltip()},showEditAppointmentPopup(t){const e=this.getTargetedAppointment(t.data,t.target);this.showAppointmentPopup(t.data,!1,e)},updateAppointmentAfterResize(t){const e=Nn.dataAccessors.getAppointmentInfo(t.$appointment),{exceptionDate:n}=e.sourceAppointment;this._checkRecurringAppointment(t.target,t.data,n,()=>{this._updateAppointment(t.target,t.data,function(){this._appointments.moveAppointmentBack()})})},getUpdatedData(t){return this._getUpdatedData(t)},updateAppointmentAfterDrag(t){let{event:e,element:n,rawAppointment:i,newCellIndex:s,oldCellIndex:r}=t;const o=Nn.dataAccessors.getAppointmentInfo(n),a=ct(i,this._dataAccessors,this.timeZoneCalculator),l=ct(T({},i,this._getUpdatedData(i)),this._dataAccessors,this.timeZoneCalculator),c=l.source(),u=l.allDay,d=a.allDay,p=this._workSpace.supportAllDayRow()&&(d&&!u||!d&&u),f=e.fromComponent!==e.toComponent;if(s===-1){f||this._appointments.moveAppointmentBack(e);return}s!==r||f||p?this._checkRecurringAppointment(i,c,o.sourceAppointment.exceptionDate,()=>{this._updateAppointment(i,c,function(){this._appointments.moveAppointmentBack(e)},e)},void 0,void 0,e):this._appointments.moveAppointmentBack(e)},onDeleteButtonPress(t){const e=this.getTargetedAppointment(t.data,m(t.target));this.checkAndDeleteAppointment(t.data,e),this.hideAppointmentTooltip()},getTextAndFormatDate(t,e,n){const i=ct(t,this._dataAccessors,this.timeZoneCalculator),s=ct(e||t,this._dataAccessors,this.timeZoneCalculator),r=this.timeZoneCalculator.createDate(s.startDate,{path:"toGrid"}),o=this.timeZoneCalculator.createDate(s.endDate,{path:"toGrid"}),a=n||IH(r,o,s.allDay,this.currentViewType!=="month");return{text:s.text||i.text,formatDate:AH(r,o,a)}},_createAppointmentTitle(t){return Ce(t)?t.text:String(t)},getResizableAppointmentArea(t){const{allDay:e}=t,n=this._getCurrentViewOption("groups");if(n&&n.length){if(e||this.getLayoutManager().getRenderingStrategyInstance()._needHorizontalGroupBounds()){const i=this._workSpace.getGroupBounds(t.coordinates);return{left:i.left,right:i.right,top:0,bottom:0}}if(this.getLayoutManager().getRenderingStrategyInstance()._needVerticalGroupBounds(e)&&this._workSpace._isVerticalGroupedWorkSpace()){const i=this._workSpace.getGroupBounds(t.coordinates);return{left:0,right:0,top:i.top,bottom:i.bottom}}}},needRecalculateResizableArea(){return this.getWorkSpace().needRecalculateResizableArea()},getAppointmentGeometry(t){return this.getLayoutManager().getRenderingStrategyInstance().getAppointmentGeometry(t)},isAllDay(t){return this.getLayoutManager().getRenderingStrategyInstance().isAllDay(t)},getDeltaTime(t,e,n){return this.getLayoutManager().getRenderingStrategyInstance().getDeltaTime(t,e,n)},getDropDownAppointmentWidth(t){return this.getLayoutManager().getRenderingStrategyInstance().getDropDownAppointmentWidth(this._getViewCountConfig().intervalCount,t)},getDropDownAppointmentHeight(){return this.getLayoutManager().getRenderingStrategyInstance().getDropDownAppointmentHeight()},getCellWidth(){return this.getWorkSpace().getCellWidth()},getCellHeight(){return this.getWorkSpace().getCellHeight()},getMaxAppointmentCountPerCellByType(t){return this.getRenderingStrategyInstance()._getMaxAppointmentCountPerCellByType(t)},needCorrectAppointmentDates(){return this.getRenderingStrategyInstance().needCorrectAppointmentDates()},getRenderingStrategyDirection(){return this.getRenderingStrategyInstance().getDirection()},updateAppointmentEndDate(t){const{endDate:e}=t,n=this._getCurrentViewOption("endDayHour"),i=this._getCurrentViewOption("startDayHour");let s=e;return e.getHours()>=n?s.setHours(n,0,0,0):!t.isSameDate&&i>0&&60*e.getHours()+e.getMinutes()<60*i&&(s=new Date(s.getTime()-qse("day")),s.setHours(n,0,0,0)),s},renderCompactAppointments(t){this._compactAppointmentsHelper.render(t)},clearCompactAppointments(){this._compactAppointmentsHelper.clear()},supportCompactDropDownAppointments(){return this.getLayoutManager().getRenderingStrategyInstance().supportCompactDropDownAppointments()},getGroupCount(){return this._workSpace._getGroupCount()},mapAppointmentFields(t){const{itemData:e,itemElement:n,targetedAppointment:i}=t,s=i||this.getTargetedAppointment(e,n);return{appointmentData:t.itemData,appointmentElement:t.itemElement,targetedAppointmentData:s}},dayHasAppointment(t,e,n){return this.dayHasAppointment(t,e,n)},getLayoutManager(){return this._layoutManager},getAgendaVerticalStepHeight(){return this.getWorkSpace().getAgendaVerticalStepHeight()},getAgendaDuration(){return this._getCurrentViewOption("agendaDuration")},getStartViewDate(){return this.getStartViewDate()},getEndViewDate(){return this.getEndViewDate()},forceMaxAppointmentPerCell(){return this.forceMaxAppointmentPerCell()},onAgendaReady(t){const e=this.getAppointmentsInstance()._itemElements();let n=0;const i=function(s,r){const o=r+n-1;e.eq(o).addClass(X7),n+=r};for(let s=0;s<t.length;s++)N(t[s],i)},getTimezone(){return this._getTimezoneOffsetByOption()},getTargetedAppointmentData(t,e){return this.getTargetedAppointment(t,e)},getEndDayHour(){return this._workSpace.option("endDayHour")||this.option("endDayHour")},getStartDayHour(){return this._workSpace.option("startDayHour")||this.option("startDayHour")},getViewOffsetMs(){return this.getViewOffsetMs()},isAdaptive(){return this.option("adaptivityEnabled")},removeDroppableCellClass(){this._workSpace.removeDroppableCellClass()}},Yse=t=>Number.isInteger(t),$H=function(t,e){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0)?t>e:t>=e},Zse=function(t,e){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0)?t<e:t<=e},Qse=(t,e)=>{let[n,i]=e;return t>=n&&t<=i},FH=(t,e)=>t%e===0;class Xse{constructor(e){this.validators=e}validate(e){const n=Object.entries(this.validators).reduce((i,s)=>{let[r,o]=s;const a=o.validate(e);return a!==!0&&(i[r]=a),i},{});return Object.keys(n).length>0?n:!0}}class Jse{constructor(e,n){this.validatorNameToErrorCodeMap=e,this.globalErrorHandler=n}handleValidationResult(e){if(e===!0)return;const i=[...Object.keys(e).reduce((s,r)=>{const o=this.validatorNameToErrorCodeMap[r];return o&&s.add(o),s},new Set)];i.forEach((s,r)=>{r===i.length-1?this.globalErrorHandler.throwError(s):this.globalErrorHandler.logError(s)})}}class Kl{constructor(e,n){this.valueSelector=e,this.rules=n}validate(e){const n=this.valueSelector(e),i=this.rules.reduce((s,r)=>{const o=r(n);return o!==!0&&(s[r.name]=o),s},{});return Object.keys(i).length?i:!0}}const El=(t,e)=>(Object.defineProperty(e,"name",{value:t,writable:!1}),e),Of=El("mustBeInteger",t=>Yse(t)||`${t} must be an integer.`),ere=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return El("mustBeGreaterThan",n=>$H(n,t,e)||`${n} must be ${e?">":">="} than ${t}.`)},lC=t=>El("mustBeInRange",e=>Qse(e,t)||`${e} must be in range [${t[0]}, ${t[1]}].`),tre=t=>El("mustBeDivisibleBy",e=>FH(e,t)||`${e} must be divisible by ${t}.`),nre=El("endDayHourGreaterThanStartDayHour",t=>{let{startDayHour:e,endDayHour:n}=t;return $H(n,e)||`endDayHour: ${n} must be greater that startDayHour: ${e}.`}),ire=El("visibleIntervalMustBeDivisibleByCellDuration",t=>{let{cellDuration:e,startDayHour:n,endDayHour:i}=t;const s=60*(i-n);return FH(s,e)||`endDayHour - startDayHour: ${s} (minutes), must be divisible by cellDuration: ${e} (minutes).`}),sre=El("cellDurationMustBeLessThanVisibleInterval",t=>{let{cellDuration:e,startDayHour:n,endDayHour:i}=t;const s=60*(i-n);return Zse(e,s,!1)||`endDayHour - startDayHour: ${s} (minutes), must be greater or equal the cellDuration: ${e} (minutes).`});class rre extends Xse{constructor(){super({startDayHour:new Kl(e=>{let{startDayHour:n}=e;return n},[Of,lC([0,24])]),endDayHour:new Kl(e=>{let{endDayHour:n}=e;return n},[Of,lC([0,24])]),offset:new Kl(e=>{let{offset:n}=e;return n},[Of,lC([-1440,1440]),tre(5)]),cellDuration:new Kl(e=>{let{cellDuration:n}=e;return n},[Of,ere(0)]),startDayHourAndEndDayHour:new Kl(e=>e,[nre]),cellDurationAndVisibleInterval:new Kl(e=>e,[ire,sre])})}}const ore={logError:t=>{it.log(t)},throwError:t=>{throw it.Error(t)}};class are extends Jse{constructor(){super({startDayHour:"E1058",endDayHour:"E1058",startDayHourAndEndDayHour:"E1058",offset:"E1061",cellDuration:"E1062",cellDurationAndVisibleInterval:"E1062"},ore)}}class lre{constructor(e,n){this.rawAppointment=e,this.promise=n}}class cre{get resourceDeclarations(){return this._resourceDeclarations}set resourceDeclarations(e){this._resourceDeclarations=e,this.isLoaded=!1,this.isLoading=!1,this.resourceMap.clear(),this.appointmentPromiseQueue=[]}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this._resourceDeclarations=e,this.isLoaded=!1,this.isLoading=!1,this.resourceMap=new Map,this.appointmentPromiseQueue=[]}_pushAllResources(){this.appointmentPromiseQueue.forEach(e=>{let{promise:n,rawAppointment:i}=e;const s=[];this.resourceMap.forEach((r,o)=>{const a={label:r.label,values:[]};o in i&&na(i[o]).forEach(l=>a.values.push(r.map.get(l))),a.values.length&&s.push(a)}),n.resolve(s)}),this.appointmentPromiseQueue=[]}_onPullResource(e,n,i,s,r){const o=new Map;r.forEach(a=>o.set(a[n],a[i])),this.resourceMap.set(e,{label:s,map:o})}_hasResourceDeclarations(e){return e.length===0?(this.appointmentPromiseQueue.forEach(n=>{let{promise:i}=n;return i.resolve([])}),this.appointmentPromiseQueue=[],!1):!0}_tryPullResources(e,n){if(!this.isLoading){this.isLoading=!0;const i=[];e.forEach(s=>{const r=new j().done(a=>this._onPullResource(aa(s),up(s),YS(s),s.label,a));i.push(r);const o=W_(s.dataSource);o.isLoaded()?r.resolve(o.items()):o.load().done(a=>r.resolve(a)).fail(()=>r.reject())}),Ne.apply(null,i).done(()=>{this.isLoaded=!0,this.isLoading=!1,this._pushAllResources()}).fail(()=>n.reject())}}initializeState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.resourceDeclarations=e}createListAsync(e){const n=new j;return this.appointmentPromiseQueue.push(new lre(e,n)),this._hasResourceDeclarations(this.resourceDeclarations)&&(this.isLoaded?this._pushAllResources():this._tryPullResources(this.resourceDeclarations,n)),n.promise()}}function ure(){let t,e;return{promise:new Promise((i,s)=>{t=i,e=s}),resolve:t,reject:e}}const la="dx-tooltip-appointment-item",dre=`${la}-content`,hre=`${la}-content-subject`,pre=`${la}-content-date`,fre=`${la}-marker`,mre=`${la}-marker-body`,gre=`${la}-delete-button-container`,_re=`${la}-delete-button`;class HH{constructor(e){this.asyncTemplatePromises=new Set,this._tooltip=null,this._options=e,this._extraOptions=null}show(e,n,i){this._canShowTooltip(n)&&(this.hide(),this._extraOptions=i,this._showCore(e,n))}_showCore(e,n){this._tooltip?(this._shouldUseTarget()&&this._tooltip.option("target",e),this._list.option("dataSource",n)):this._tooltip=this._createTooltip(e,n),this._prepareBeforeVisibleChanged(n),this._tooltip.option("visible",!0)}_prepareBeforeVisibleChanged(e){}_getContentTemplate(e){return n=>{const i=m("<div>");m(n).append(i),this._list=this._createList(i,e)}}isAlreadyShown(e){if(this._tooltip&&this._tooltip.option("visible"))return this._tooltip.option("target")[0]===e[0]}_onShown(){this._list.option("focusStateEnabled",this._extraOptions.focusStateEnabled)}dispose(){}hide(){this._tooltip&&this._tooltip.option("visible",!1)}_shouldUseTarget(){return!0}_createTooltip(e,n){}_canShowTooltip(e){return!!e.length}_createListOption(e){return{dataSource:e,onContentReady:this._onListRender.bind(this),onItemClick:n=>this._onListItemClick(n),onItemContextMenu:this._onListItemContextMenu.bind(this),itemTemplate:(n,i)=>this._renderTemplate(n.appointment,n.targetedAppointment,i,n.color),_swipeEnabled:!1,pageLoadMode:"scrollBottom"}}_onListRender(e){}_createTooltipElement(e){return m("<div>").appendTo(this._options.container).addClass(e)}_createList(e,n){return this._options.createComponent(e,PF,this._createListOption(n))}_renderTemplate(e,n,i,s){const r=this._createItemListContent(e,n,s);this._options.addDefaultTemplates({[this._getItemListTemplateName()]:new nr(a=>{const l=m(a.container);return l.append(r),l})});const o=this._options.getAppointmentTemplate(`${this._getItemListTemplateName()}Template`);return this._createFunctionTemplate(o,e,n,i)}_createFunctionTemplate(e,n,i,s){const r=!!this._extraOptions.isButtonClick,o=this._isEmptyDropDownAppointmentTemplate();return new nr(a=>{const{promise:l,resolve:c}=ure();return this.asyncTemplatePromises.add(l),e.render({model:o?{appointmentData:n,targetedAppointmentData:i,isButtonClicked:r}:n,container:a.container,index:s,onRendered:()=>{this.asyncTemplatePromises.delete(l),c()}})})}_getItemListTemplateName(){return this._isEmptyDropDownAppointmentTemplate()?"appointmentTooltip":"dropDownAppointment"}_isEmptyDropDownAppointmentTemplate(){return!this._extraOptions.dropDownAppointmentTemplate||this._extraOptions.dropDownAppointmentTemplate==="dropDownAppointment"}_onListItemClick(e){this.hide(),this._extraOptions.clickEvent&&this._extraOptions.clickEvent(e),this._options.showAppointmentPopup(e.itemData.appointment,!1,e.itemData.targetedAppointment)}_onListItemContextMenu(e){}_createItemListContent(e,n,i){const{editing:s}=this._extraOptions,r=m("<div>").addClass(la);return r.append(this._createItemListMarker(i)),r.append(this._createItemListInfo(this._options.createFormattedDateText(e,n))),!this._options.getAppointmentDisabled(e)&&(s&&s.allowDeleting===!0||s===!0)&&r.append(this._createDeleteButton(e,n)),r}_createItemListMarker(e){const n=m("<div>").addClass(fre),i=m("<div>").addClass(mre);return n.append(i),e&&e.done(s=>i.css("background",s)),n}_createItemListInfo(e){const n=m("<div>").addClass(dre),i=m("<div>").addClass(hre).text(e.text),s=m("<div>").addClass(pre).text(e.formatDate);return n.append(i).append(s)}_createDeleteButton(e,n){const i=m("<div>").addClass(gre),s=m("<div>").addClass(_re);return i.append(s),this._options.createComponent(s,Kn,{icon:"trash",stylingMode:"text",onClick:r=>{this.hide(),r.event.stopPropagation(),this._options.checkAndDeleteAppointment(e,n)}}),i}}const oO="dx-scheduler-appointment-tooltip-wrapper";class yre extends HH{_prepareBeforeVisibleChanged(e){this._tooltip.option("position",{my:"bottom",at:"top",boundary:this._getBoundary(e),offset:this._extraOptions.offset,collision:"fit flipfit"})}_getBoundary(e){return this._options.isAppointmentInAllDayPanel(e[0].appointment)?this._options.container:this._options.getScrollableContainer()}_onShown(){super._onShown(),this._extraOptions.isButtonClick&&(this._list.focus(),this._list.option("focusedElement",null))}_createListOption(e,n){const i=super._createListOption(e,n);return i.showScrollbar=rl?"always":"onHover",i}_createTooltip(e,n){const i=this._createTooltipElement(oO);return this._options.createComponent(i,XS,{target:e,maxHeight:200,rtlEnabled:this._extraOptions.rtlEnabled,onShown:this._onShown.bind(this),contentTemplate:this._getContentTemplate(n),wrapperAttr:{class:oO}})}_onListRender(e){return this._extraOptions.dragBehavior&&this._extraOptions.dragBehavior(e)}_onListItemContextMenu(e){const n=this._options.createEventArgs(e);this._options.onItemContextMenu(n)}}const cC={slidePanel:"dx-scheduler-overlay-panel",scrollableContent:".dx-scrollable-content"},Mc={PHONE:250,TABLET:"90%",DEFAULT:"auto"},NH={PHONE:"100%",TABLET:"80%"},vre={show:{type:"slide",duration:300,from:{position:{my:"top",at:"bottom",of:pe()}},to:{position:{my:"center",at:"center",of:pe()}}},hide:{type:"slide",duration:300,to:{position:{my:"top",at:"bottom",of:pe()}},from:{position:{my:"center",at:"center",of:pe()}}}},Cre=t=>({shading:!1,width:NH.PHONE,height:t>Mc.PHONE?Mc.PHONE:Mc.DEFAULT,position:{my:"bottom",at:"bottom",of:pe()}}),Dre=t=>{const e=.9*Re(pe());return{shading:!0,width:NH.TABLET,height:t>e?Mc.TABLET:Mc.DEFAULT,position:{my:"center",at:"center",of:pe()}}};class xre extends HH{_shouldUseTarget(){return!1}setTooltipConfig(){const e=me(pe())>700,n=tt(this._list.$element().find(cC.scrollableContent));this._tooltip.option(e?Dre(n):Cre(n))}async _onShowing(){this._tooltip.option("height",Mc.DEFAULT),this.setTooltipConfig(),await Promise.all([...this.asyncTemplatePromises]),this.setTooltipConfig()}_createTooltip(e,n){const i=this._createTooltipElement(cC.slidePanel);return this._options.createComponent(i,Dl,{target:pe(),hideOnOutsideClick:!0,animation:vre,onShowing:()=>this._onShowing(),onShown:this._onShown.bind(this),contentTemplate:this._getContentTemplate(n),wrapperAttr:{class:cC.slidePanel}})}}class wre{constructor(){this.VERTICAL="vertical",this.HORIZONTAL="horizontal"}insertAllDayRow(e,n,i){if(e[i]){let s=e[i].find("tr");s.length||(s=m(W.createElement("tr")),s.append(e[i].get(0))),n.appendChild(s.get?s.get(0):s)}}makeTable(e){const n=W.createElement("tbody"),i=[];let s;const r=e.groupCount?e.rowCount/e.groupCount:e.rowCount;let o=0;const{allDayElements:a}=e,{groupIndex:l}=e,{rowCount:c}=e;m(e.container).append(n),a&&(this.insertAllDayRow(a,n,0),o++);for(let d=0;d<c;d++){s=W.createElement("tr"),n.appendChild(s);const p=(d+1)%r===0;e.rowClass&&(s.className=e.rowClass);for(let f=0;f<e.cellCount;f++){var u;const g=W.createElement("td");s.appendChild(g),e.cellClass&&(ie(e.cellClass)?g.className=e.cellClass(d,f):g.className=e.cellClass);let y,v,C;if(e.getCellData&&(y=e.getCellData(g,d,f,l),v=y.key,C=y.value,v&&st(g,v,C)),(u=e.setAdditionalClasses)===null||u===void 0||u.call(e,m(g),C),e.cellTemplate&&e.cellTemplate.render){const x=e.getTemplateData?e.getTemplateData(d):{},S={model:L({text:e.getCellText?e.getCellText(d,f):"",date:e.getCellDate?e.getCellDate(d):void 0},x),container:se(m(g)),index:d*e.cellCount+f};C&&(C.startDate&&(S.model.startDate=C.startDate),C.endDate&&(S.model.endDate=C.endDate),C.groups&&(S.model.groups=C.groups),C.allDay&&(S.model.allDay=C.allDay)),i.push(e.cellTemplate.render.bind(e.cellTemplate,S))}else e.getCellText&&m("<div>").text(e.getCellText(d,f)).addClass(e.getCellTextClass).appendTo(m(g))}a&&p&&(this.insertAllDayRow(a,n,o),o++)}return i}makeGroupedTable(e,n,i,s,r,o,a){let l=[];return e===this.VERTICAL?l=this._makeVerticalGroupedRows(n,i,r,o):l=this._makeHorizontalGroupedRows(n,i,s,r,a),l}makeGroupedTableFromJSON(e,n,i){let s;const r=[];let o=0;i=i||{};const a=i.cellTag||"td",l=i.childrenField||"children",c=i.titleField||"title",{groupTableClass:u}=i,{groupRowClass:d}=i,{groupCellClass:p}=i,{groupCellCustomContent:f}=i;function g(v){return v[l]?v[l].length:0}function y(v,C,x,S){const O={element:W.createElement(a),childCount:C};p&&(O.element.className=p);const H=W.createTextNode(v);return typeof f=="function"?f(O.element,H,x,S):O.element.appendChild(H),O}return function(){s=W.createElement("table"),u&&(s.className=u)}(),function v(C){for(let x=0;x<C.length;x++){const S=g(C[x]),O=y(C[x][c],S,x,C[x]);r[o]||(r[o]=[]),r[o].push(O),S?v(C[x][l]):o++}}(n),r.forEach(v=>{const C=W.createElement("tr");d&&(C.className=d);const x=[];for(let S=v.length-1;S>=0;S--){const O=v[S+1];let H=v[S].childCount;O&&O.childCount&&(H*=O.childCount),x.push(H)}x.reverse(),v.forEach((S,O)=>{x[O]&&S.element.setAttribute("rowSpan",x[O]),C.appendChild(S.element)}),s.appendChild(C)}),s}_makeFlexGroupedRowCells(e,n,i,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;const o=[],{items:a}=e,l=a.length;for(let c=0;c<n*r;c++)for(let u=0;u<l;u++){let d=m("<div>");const p={};if(s&&s.render){const g={model:a[u],container:se(d),index:c*l+u};e.data&&(g.model.data=e.data[u]),p.template=s.render.bind(s,g)}else d.text(a[u].text).attr("title",a[u].text).addClass("dx-scheduler-group-header-content"),d=m("<div>").append(d);const f=ie(i.groupHeaderClass)?i.groupHeaderClass(u):i.groupHeaderClass;p.element=d.addClass(f),o.push(p)}return o}_makeVerticalGroupedRows(e,n,i,s){const r=[];let o=1;const a=[],l=function(d){d.template&&r.push(d.template)};for(let d=0;d<e.length;d++){d>0&&(o=e[d-1].items.length*o);const p=this._makeFlexGroupedRowCells(e[d],o,n,i);p.forEach(l),a.push(p)}const c=[],u=a.length;for(let d=0;d<u;d++)c.push(m("<div>").addClass(n.groupHeaderRowClass));for(let d=u-1;d>=0;d--){const p=a[d].length;for(let f=0;f<p;f++)c[d].append(a[d][f].element)}return{elements:m("<div>").addClass("dx-scheduler-group-flex-container").append(c),cellTemplates:r}}_makeHorizontalGroupedRows(e,n,i,s,r){let o=1;const a=e.length,l=[],c=[],u=r?i:1,d=function(f){return f.template&&c.push(f.template),f.element};for(let f=0;f<a;f++){f>0&&(o=e[f-1].items.length*o);const g=this._makeGroupedRowCells(e[f],o,n,s,u);l.push(m("<tr>").addClass(n.groupRowClass).append(g.map(d)))}const p=l[a-1].find("th").length;for(let f=0;f<a;f++){const g=l[f].find("th");let y=p/g.length;r||(y*=i),(y>1&&u===1||r&&a>1)&&g.attr("colSpan",y)}return{elements:l,cellTemplates:c}}_makeGroupedRowCells(e,n,i,s,r){r=r||1,n*=r;const o=[],{items:a}=e,l=a.length;for(let c=0;c<n;c++)for(let u=0;u<l;u++){let d=m("<div>");const p={};if(s&&s.render){const g={model:a[u],container:se(d),index:c*l+u};e.data&&(g.model.data=e.data[u]),p.template=s.render.bind(s,g)}else d.text(a[u].text),d=m("<div>").append(d);d.addClass(i.groupHeaderContentClass);let f;ie(i.groupHeaderClass)?f=i.groupHeaderClass(u):f=i.groupHeaderClass,p.element=m("<th>").addClass(f).append(d),o.push(p)}return o}}const ob={tableCreator:new wre};function uC(t){const e=t();let n={};return function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r={top:i.top!==void 0?Math.ceil(i.top):void 0,left:i.left!==void 0?Math.ceil(i.left):void 0},o=r.top===n.top&&r.left===n.left;!s&&o||(n=r,e.scrollTo(i))}}const Sre=(t,e)=>Object.keys(t).length!==Object.keys(e).length?!1:Object.keys(t).every(n=>t[n]===e[n]),bre=["isEqual"],Ere=t=>!!t.toArray,Tre=(t,e)=>{const n={template:e,model:L({},t)},i=t.data??{},{isEqual:s}=i,r=Mt(i,bre);return s&&(n.model.data=r,n.isEqual=s),n},Ire=(t,e)=>{const{data:n,index:i}=t.model??{data:{}};n&&Object.keys(n).forEach(r=>{n[r]&&W.isNode(n[r])&&(n[r]=se(m(n[r])))});const s=t.template.render(L({container:e,transclude:t.transclude},{renovated:t.renovated},t.transclude?{}:{model:n},!t.transclude&&Number.isFinite(i)?{index:i}:{}));return s===void 0?[]:Ere(s)?s.toArray():[m(s).get(0)]},Are=(t,e)=>{e.forEach(n=>{!!!t.find(s=>n===s)&&n.parentNode&&m(n).remove()})};let aO=class extends I_{constructor(e){super(e),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const e=Mi(this.$LI,!0);if(!(e!=null&&e.parentNode))return()=>{};const n=e.parentNode,i=m(n),s=i.contents().toArray(),r=Ire(this.props,se(i));return PV(m(e),m(r)),()=>{const o=m(n).contents().toArray();Are(s,o),n.appendChild(e)}}shouldComponentUpdate(e){const{template:n,model:i}=this.props,{template:s,model:r,isEqual:o}=e,a=o??Sre;if(n!==s)return!0;if(!M(i)||!M(r))return i!==r;const{data:l,index:c}=i,{data:u,index:d}=r;return c!==d?!0:!a(l,u)}createEffects(){return[new Wt(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}};const nt=t=>t&&(t.defaultProps?e=>Li(fe(2,t,L({},e))):t),dC=t=>Array.isArray(t)?[...t]:L({},t),zH=(t,e,n)=>{const i=n.length>0&&e&&t!==e?dC(e):dC(t),s=n[0];return n.length>1?i[s]=zH(t[s],e==null?void 0:e[s],n.slice(1)):s&&(Ce(t[s])?i[s]=dC(t[s]):i[s]=t[s]),i},kre=(t,e,n,i)=>{const s=e[n],r=t[n],o=t;Ce(s)||n!==i&&Array.isArray(s)?o[n]=zH(s,r,ml(i).slice(1)):o[n]=s},hC=(t,e)=>n=>{Object.prototype.hasOwnProperty.call(t,n)&&t[n]===void 0&&(t[n]=e(n))};class Tl extends us{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(e,n){super(e,n),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){const n=this.getSupportedKeyNames().length>0,i=typeof this._viewComponent.prototype.keyDown=="function";if(n&&!i)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var e;return(e=this._viewRef)===null||e===void 0?void 0:e.current}_checkContentReadyOption(e){const n=this._getContentReadyOptions().reduce((i,s)=>(i[s]=!0,i),{});return this._checkContentReadyOption=i=>!!n[i],this._checkContentReadyOption(e)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const e=this._getViewComponentDefaultProps();return T(!0,super._getDefaultOptions(),e,this._propsInfo.twoWay.reduce((n,i)=>{let[s,r,o]=i;return L({},n,{[s]:e[r],[o]:a=>this.option(s,a)})},{}),this._propsInfo.templates.reduce((n,i)=>L({},n,{[i]:null}),{}))}_getUnwrappedOption(){const e={};return Object.keys(this.option()).forEach(n=>{e[n]=this.option(n)}),e}_initializeComponent(){var e;super._initializeComponent(),(e=this._templateManager)===null||e===void 0||e.addDefaultTemplates(this.getDefaultTemplates());const n=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(n),this._propsInfo.templates.forEach(i=>{this._componentTemplates[i]=this._createTemplateComponent(this._props[i])}),Object.keys(this._getActionConfigsFull()).forEach(i=>this._addAction(i)),this._viewRef=ts(),this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const e=this.getProps();this._renderWrapper(e)}_renderWrapper(e){const n=this.$element()[0];this._isNodeReplaced||Zi.onPreRender(),Zi.render(this._viewComponent,e,n,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,Zi.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(e,n){this._options.silent(e,n)}_render(){}_removeWidget(){Zi.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const e=this.$element()[0];if(!this._elementAttr){const{attributes:s}=e,r=Array.from(s).filter(o=>{var a;return!this._propsInfo.templates.includes(o.name)&&((a=s[o.name])===null||a===void 0?void 0:a.specified)}).reduce((o,a)=>{let{name:l,value:c}=a;const u=o,d=l in e;return u[l]=c===""&&d?e[l]:c,u},{});this._elementAttr=r,this._storedClasses=e.getAttribute("class")||""}const n=e.style,i={};for(let s=0;s<n.length;s+=1)i[n[s]]=n.getPropertyValue(n[s]);return this._elementAttr.style=i,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(e){const{allowNull:n,twoWay:i,elements:s,props:r}=this._propsInfo,o=this._getViewComponentDefaultProps(),a=Object.keys(o),l=this._getDefaultOptions(),{ref:c,children:u,onKeyboardHandled:d}=e,f={ref:c,children:u,onKeyDown:d?(g,y)=>{d(y)}:void 0};return[...r,...this._getAdditionalProps()].forEach(g=>{Object.prototype.hasOwnProperty.call(e,g)&&(f[g]=e[g])}),n.forEach(hC(f,()=>null)),a.forEach(hC(f,g=>l[g])),i.forEach(g=>{let[y,v]=g;hC(f,()=>l[v])(y)}),s.forEach(g=>{if(g in f){const y=f[g];Is(y)&&(f[g]=this._patchElementParam(y))}}),f}getSupportedKeyNames(){return[]}prepareStyleProp(e){return typeof e.style=="string"?L({},e,{style:{},cssText:e.style}):e}getProps(){const{elementAttr:e}=this.option(),n=this._patchOptionValues(L({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach(i=>{n[i]=this._componentTemplates[i]}),this.prepareStyleProp(L({},n,this.elementAttr,e,{className:[...(this.elementAttr.class??"").split(" "),...((e==null?void 0:e.class)??"").split(" ")].filter((i,s,r)=>i&&r.indexOf(i)===s).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return L({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const e=Object.values(this._templatesInfo),n={};return e.forEach(i=>{n[i]="dx-renovation-template-mock"}),n}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(e){const n=Object.entries(this._templatesInfo).reduce((i,s)=>{let[r,o]=s;return L({},i,{[r]:e[r]??o})},{});return L({},e,n)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const e={};return this.getSupportedKeyNames().forEach(i=>{e[i]=s=>this.viewRef.keyDown(D_.createKeyDownOptions(s))}),e}_addAction(e,n){let i=n;if(!i){const s=this._createActionByOption(e,this._getActionConfigsFull()[e]);i=r=>(Object.keys(r).forEach(o=>{M(r[o])&&W.isNode(r[o])&&(r[o]=se(m(r[o])))}),s(r))}this._actionsMap[e]=i}_optionChanged(e){const{name:n,fullName:i,value:s,previousValue:r}=e;kre(this._props,this.option(),n,i),this._propsInfo.templates.includes(n)&&s!==r&&(this._componentTemplates[n]=this._createTemplateComponent(s)),n&&this._getActionConfigsFull()[n]&&this._addAction(n),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(i),super._optionChanged(e),this._invalidate()}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?Zi.createElement(aO,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(e){if(!e)return;const n=this._getTemplate(e);if(!(ve(n)&&n==="dx-renovation-template-mock"))return i=>Zi.createElement(aO,Tre(i,n))}_wrapKeyDownHandler(e){return n=>{const{originalEvent:i,keyName:s,which:r}=n,o=this.customKeyHandlers,a=o[s]||o[r];return a!==void 0&&!a.bind(this)(i,n)?(i.cancel=!0,i):e==null?void 0:e(i,n)}}_toPublicElement(e){return se(m(e))}_patchElementParam(e){try{const n=m(e),i=n==null?void 0:n.get(0);return i!=null&&i.nodeType?i:e}catch{return e}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return L({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(e,n){this.customKeyHandlers[e]=n}setAria(e,n){this._aria[e]=n,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}}Tl.IS_RENOVATED_WIDGET=!1;Tl.IS_RENOVATED_WIDGET=!0;class ab extends ds{createEffects(){return[hs()]}render(){const e=q.format("dxScheduler-allDay");return Ve(1,"div","dx-scheduler-all-day-title",e,0)}}ab.defaultProps={};class WH extends Tl{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:[],props:[]}}get _viewComponent(){return ab}}re("dxAllDayPanelTitle",WH);const Rre={allDayPanelHeight:25},Ore="dx-scheduler-date-table-cell",Pre="dx-scheduler-date-table-row",Mre="dx-scheduler-all-day-table-cell",mi={className:"",isFirstGroupCell:!1,isLastGroupCell:!1,startDate:new Date,endDate:new Date,allDay:!1,text:"",index:0,contentTemplateProps:{data:{},index:0}};class Y_ extends ht{render(){const{className:e,isFirstGroupCell:n,isLastGroupCell:i,children:s,ariaLabel:r}=this.props,o=gn.getGroupCellClasses(n,i,e);return Ve(1,"td",o,s,0,{"aria-label":r})}}Y_.defaultProps=mi;const lb=L({},mi,{otherMonth:!1,today:!1,firstDayOfMonth:!1,isSelected:!1,isFocused:!1});class hp extends ht{constructor(){super(...arguments),this.dataCellTemplateProps=null}getDataCellTemplateProps(){if(this.dataCellTemplateProps!==null)return this.dataCellTemplateProps;const{allDay:e,contentTemplateProps:n,endDate:i,groupIndex:s,groups:r,index:o,startDate:a}=this.props;return this.dataCellTemplateProps={data:L({startDate:a,endDate:i,groups:r,groupIndex:r?s:void 0,text:"",allDay:!!e||void 0},n==null?void 0:n.data),index:o},this.dataCellTemplateProps}componentWillUpdate(e){(this.props.allDay!==e.allDay||this.props.contentTemplateProps!==e.contentTemplateProps||this.props.endDate!==e.endDate||this.props.groupIndex!==e.groupIndex||this.props.groups!==e.groups||this.props.index!==e.index||this.props.startDate!==e.startDate)&&(this.dataCellTemplateProps=null)}render(){const{viewContext:e,allDay:n,className:i,isFocused:s,isSelected:r,isFirstGroupCell:o,isLastGroupCell:a,dataCellTemplate:l,children:c}=this.props,{view:{type:u},crossScrollingEnabled:d}=e,p=gn.getCellSizeHorizontalClass(u,d),f=gn.getCellSizeVerticalClass(!!n),g=gn.combineClasses({[p]:!0,[f]:!0,[Ore]:!n,"dx-state-focused":r,"dx-scheduler-focused-cell":s,[i??""]:!0}),y=r?"Add appointment":void 0,v=this.getDataCellTemplateProps(),C=nt(l);return fe(2,Y_,{className:g,viewContext:e,isFirstGroupCell:o,isLastGroupCell:a,ariaLabel:y,startDate:mi.startDate,endDate:mi.endDate,index:mi.index,children:ri([!C&&c,!!C&&C({index:v.index,data:v.data})],0)})}}hp.defaultProps=lb;class GH extends ht{render(){const{className:e,viewContext:n,dataCellTemplate:i,endDate:s,groupIndex:r,groups:o,index:a,isFirstGroupCell:l,isFocused:c,isLastGroupCell:u,isSelected:d,startDate:p}=this.props,f=nt(i);return fe(2,hp,{className:`${Mre} ${e}`,viewContext:n,startDate:p,endDate:s,groups:o,groupIndex:r,allDay:!0,isFirstGroupCell:l,isLastGroupCell:u,index:a,dataCellTemplate:f,isSelected:d,isFocused:c})}}GH.defaultProps=lb;const UH={};class KH extends ht{render(){const{children:e,className:n,colSpan:i,styles:s}=this.props;return Ve(1,"td",n,e,0,{style:Cl(s),colSpan:i})}}KH.defaultProps=UH;class jH extends ht{render(){const{children:e,className:n,colSpan:i,styles:s}=this.props;return Ve(1,"th",n,e,0,{style:Cl(s),colSpan:i})}}jH.defaultProps=UH;const bh={width:0,isHeaderCell:!1};class Tg extends ht{render(){const{colSpan:e,isHeaderCell:n,width:i,styles:s}=this.props,r=gn.addWidthToStyle(i,s);return fe(2,n?jH:KH,{className:"dx-scheduler-virtual-cell",styles:r,colSpan:e})}}Tg.defaultProps=bh;const Us={className:"",leftVirtualCellWidth:0,rightVirtualCellWidth:0,isHeaderRow:!1};class Uo extends ht{render(){const{children:e,className:n,isHeaderRow:i,leftVirtualCellCount:s,leftVirtualCellWidth:r,rightVirtualCellCount:o,rightVirtualCellWidth:a,styles:l}=this.props,c=!!s,u=!!o;return Ve(1,"tr",n,[c&&s!=null&&_k(s,1e3).map((d,p)=>fe(2,Tg,{className:`left-virtual-cell-${p}`,width:r*(d/s),colSpan:d,isHeaderCell:i??bh.isHeaderCell})),e,u&&o!=null&&_k(o,1e3).map((d,p)=>fe(2,Tg,{className:`right-virtual-cell-${p}`,width:a*(d/o),colSpan:d,isHeaderCell:i??bh.isHeaderCell}))],0,{style:Cl(l)})}}Uo.defaultProps=Us;const Za={viewData:[],isVerticalGroupOrientation:!1,className:"",leftVirtualCellWidth:0,rightVirtualCellWidth:0};class cb extends ht{render(){const{className:e,viewData:n,viewContext:i,leftVirtualCellWidth:s,rightVirtualCellWidth:r,leftVirtualCellCount:o,rightVirtualCellCount:a,isVerticalGroupOrientation:l,dataCellTemplate:c}=this.props,u=gn.combineClasses({"dx-scheduler-all-day-table-row":!0,[e??""]:!!e}),d=nt(c);return fe(2,Uo,{leftVirtualCellWidth:s,rightVirtualCellWidth:r,leftVirtualCellCount:o,rightVirtualCellCount:a,className:u,children:n.map(p=>{let{endDate:f,groupIndex:g,groups:y,index:v,isFirstGroupCell:C,isFocused:x,isLastGroupCell:S,isSelected:O,key:H,startDate:F}=p;return fe(2,GH,{viewContext:i,isFirstGroupCell:!l&&C,isLastGroupCell:!l&&S,startDate:F,endDate:f,groups:y,groupIndex:g,index:v,dataCellTemplate:d,isSelected:O??!1,isFocused:x??!1},H)})})}}cb.defaultProps=Za;const ub={viewData:{groupedData:[],leftVirtualCellCount:0,rightVirtualCellCount:0,topVirtualRowCount:0,bottomVirtualRowCount:0},leftVirtualCellWidth:0,rightVirtualCellWidth:0,topVirtualRowHeight:0,bottomVirtualRowHeight:0,addDateTableClass:!0,addVerticalSizesClassToRows:!0},Ta=L({},Us,{leftVirtualCellWidth:0,rightVirtualCellWidth:0,cellsCount:1});class L0 extends ht{constructor(){super(...arguments),this.virtualCells=null}getVirtualCells(){if(this.virtualCells!==null)return this.virtualCells;const{cellsCount:e}=this.props;return this.virtualCells=[...Array(e)],this.virtualCells}componentWillUpdate(e){this.props.cellsCount!==e.cellsCount&&(this.virtualCells=null)}render(){const{className:e,leftVirtualCellCount:n,leftVirtualCellWidth:i,rightVirtualCellCount:s,rightVirtualCellWidth:r,styles:o,height:a}=this.props,l=`dx-scheduler-virtual-row ${e}`,c=gn.addHeightToStyle(a,o),u=this.getVirtualCells();return fe(2,Uo,{className:l,styles:c,leftVirtualCellWidth:i,rightVirtualCellWidth:r,leftVirtualCellCount:n,rightVirtualCellCount:s,children:u.map((d,p)=>fe(2,Tg,{width:bh.width,isHeaderCell:bh.isHeaderCell},p.toString()))})}}L0.defaultProps=Ta;const Vre={topVirtualRowHeight:0,bottomVirtualRowHeight:0,leftVirtualCellWidth:0,rightVirtualCellWidth:0,virtualCellsCount:0};class Z_ extends ht{getResultStyles(){const{height:e,width:n,styles:i}=this.props,s=gn.addHeightToStyle(e,i);return gn.addWidthToStyle(n,s)}render(){const{className:e,topVirtualRowHeight:n,bottomVirtualRowHeight:i,children:s,leftVirtualCellCount:r,leftVirtualCellWidth:o,rightVirtualCellCount:a,rightVirtualCellWidth:l,tableRef:c,virtualCellsCount:u}=this.props,d=!!n,p=!!i,f=this.getResultStyles();return Ve(1,"table",e,Ve(1,"tbody",null,[d&&fe(2,L0,{height:n,cellsCount:u??Ta.cellsCount,leftVirtualCellWidth:o??Ta.leftVirtualCellWidth,rightVirtualCellWidth:l??Ta.rightVirtualCellWidth,leftVirtualCellCount:r,rightVirtualCellCount:a}),s,p&&fe(2,L0,{height:i,cellsCount:u??Ta.cellsCount,leftVirtualCellWidth:o??Ta.leftVirtualCellWidth,rightVirtualCellWidth:l??Ta.rightVirtualCellWidth,leftVirtualCellCount:r,rightVirtualCellCount:a})],0),2,{style:Cl(f)},null,c)}}Z_.defaultProps=Vre;class qH extends ds{constructor(){super(...arguments),this.allDayPanelData=null}createEffects(){return[hs()]}getAllDayPanelData(){return this.allDayPanelData!==null?this.allDayPanelData:(this.allDayPanelData=this.props.viewData.groupedData[0].allDayPanel,this.allDayPanelData)}componentWillUpdate(e){super.componentWillUpdate(),this.props.viewData!==e.viewData&&(this.allDayPanelData=null)}render(){const{viewData:e,viewContext:n,width:i,tableRef:s,dataCellTemplate:r}=this.props,o=this.getAllDayPanelData(),a=nt(r);return fe(2,Z_,{className:"dx-scheduler-all-day-table",height:o?void 0:Rre.allDayPanelHeight,width:i,tableRef:s,children:fe(2,cb,{viewData:o??Za.viewData,viewContext:n,leftVirtualCellWidth:e.leftVirtualCellWidth??Za.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??Za.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount,dataCellTemplate:a})})}}qH.defaultProps=ub;const gm=L({},ub,{cellTemplate:hp});class YH extends ht{render(){const{viewData:e,viewContext:n,addVerticalSizesClassToRows:i,cellTemplate:s,dataCellTemplate:r}=this.props,o=gn.combineClasses({[Pre]:!0,"dx-scheduler-cell-sizes-vertical":i}),a=nt(s),l=nt(r);return ri(e.groupedData.map(c=>{let{allDayPanel:u,dateTable:d,isGroupedAllDayPanel:p,key:f}=c;return ri([p&&fe(2,cb,{viewData:u??Za.viewData,viewContext:n,dataCellTemplate:l,isVerticalGroupOrientation:!0,leftVirtualCellWidth:e.leftVirtualCellWidth??Za.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??Za.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount}),d.map(g=>{let{cells:y,key:v}=g;return fe(2,Uo,{className:o,leftVirtualCellWidth:e.leftVirtualCellWidth??Us.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??Us.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount,children:y.map(C=>{let{key:x,endDate:S,firstDayOfMonth:O,groupIndex:H,groups:F,index:I,isFirstGroupCell:w,isFocused:A,isLastGroupCell:k,isSelected:P,otherMonth:$,startDate:R,text:Ae,today:vt}=C;return a({key:x,viewContext:n,isFirstGroupCell:w,isLastGroupCell:k,startDate:R,endDate:S,groups:F,groupIndex:H,index:I,dataCellTemplate:l,text:Ae,today:vt,otherMonth:$,firstDayOfMonth:O,isSelected:P,isFocused:A})})},v)})],0,f)}),0)}}YH.defaultProps=gm;const Bre=["viewData","viewContext","tableRef","addDateTableClass","width","cellTemplate","dataCellTemplate","groupOrientation","addVerticalSizesClassToRows"],ZH=L({},ub,{cellTemplate:hp});class db extends ds{createEffects(){return[hs()]}render(){const e=this.props,{viewData:n,viewContext:i,tableRef:s,addDateTableClass:r,width:o,cellTemplate:a,dataCellTemplate:l,groupOrientation:c,addVerticalSizesClassToRows:u}=e,d=Mt(e,Bre),p=r?"dx-scheduler-date-table":void 0,f=n.topVirtualRowHeight??0,g=n.bottomVirtualRowHeight??0,y=n.leftVirtualCellWidth??0,v=n.rightVirtualCellWidth??0,C=n.groupedData[0].dateTable[0].cells.length,x=nt(a),S=nt(l);return Li(fe(2,Z_,L({},d,{tableRef:s,topVirtualRowHeight:f,bottomVirtualRowHeight:g,leftVirtualCellWidth:y,rightVirtualCellWidth:v,leftVirtualCellCount:n.leftVirtualCellCount,rightVirtualCellCount:n.rightVirtualCellCount,virtualCellsCount:C,className:p,width:o,children:fe(2,YH,{viewData:n,viewContext:i,cellTemplate:x,dataCellTemplate:S,leftVirtualCellWidth:y,rightVirtualCellWidth:v,groupOrientation:c,addVerticalSizesClassToRows:u,topVirtualRowHeight:gm.topVirtualRowHeight,bottomVirtualRowHeight:gm.bottomVirtualRowHeight,addDateTableClass:gm.addDateTableClass})})))}}db.defaultProps=ZH;class Q_ extends Tl{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=L({},this._optionsByReference,{dataCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["cellTemplate","dataCellTemplate"],props:["viewData","viewContext","cellTemplate","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return db}}re("dxDateTableLayoutBase",Q_);class QH extends Q_{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dataCellTemplate"],props:["viewData","viewContext","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return qH}}re("dxAllDayTable",QH);class XH extends ht{constructor(){super(...arguments),this.contentTemplateProps=null}getContentTemplateProps(){if(this.contentTemplateProps!==null)return this.contentTemplateProps;const{index:e,text:n}=this.props;return this.contentTemplateProps={data:{text:n},index:e},this.contentTemplateProps}componentWillUpdate(e){(this.props.index!==e.index||this.props.text!==e.text)&&(this.contentTemplateProps=null)}render(){const{viewContext:e,dataCellTemplate:n,endDate:i,groupIndex:s,groups:r,index:o,isFirstGroupCell:a,isFocused:l,isLastGroupCell:c,isSelected:u,startDate:d,text:p,className:f,firstDayOfMonth:g,otherMonth:y,today:v}=this.props,C=gn.combineClasses({"dx-scheduler-date-table-other-month":!!y,"dx-scheduler-date-table-current-date":!!v,"dx-scheduler-date-table-first-of-month":!!g,[f??""]:!!f}),x=this.getContentTemplateProps(),S=nt(n);return fe(2,hp,{className:C,viewContext:e,dataCellTemplate:S,startDate:d,endDate:i,text:p,groups:r,groupIndex:s,index:o,isFirstGroupCell:a,isLastGroupCell:c,isSelected:u,isFocused:l,contentTemplateProps:x,children:Ve(1,"div","dx-scheduler-date-table-cell-text",p,0)})}}XH.defaultProps=lb;const Lre=["viewData","viewContext","addDateTableClass","addVerticalSizesClassToRows","dataCellTemplate","groupOrientation","tableRef","width"];class JH extends ds{createEffects(){return[hs()]}render(){const e=this.props,{viewData:n,viewContext:i,addDateTableClass:s,addVerticalSizesClassToRows:r,dataCellTemplate:o,groupOrientation:a,tableRef:l,width:c}=e,u=Mt(e,Lre),d=nt(o);return Li(fe(2,db,L({},u,{viewData:n,viewContext:i,groupOrientation:a,addDateTableClass:s,dataCellTemplate:d,cellTemplate:XH,tableRef:l,addVerticalSizesClassToRows:r,width:c})))}}JH.defaultProps=ZH;class eN extends Q_{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["cellTemplate","dataCellTemplate"],props:["viewData","viewContext","cellTemplate","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return JH}}re("dxMonthDateTableLayout",eN);const hb={groupPanelData:{groupPanelItems:[],baseColSpan:1},groupByDate:!1,styles:{}},tN={id:0,text:"",data:{id:0},className:""},nN={groupItems:[],className:""},iN=L({},tN,{isFirstGroupCell:!1,isLastGroupCell:!1,colSpan:1});class sN extends ht{render(){const{cellTemplate:e,colSpan:n,color:i,data:s,id:r,index:o,text:a,className:l,isFirstGroupCell:c,isLastGroupCell:u}=this.props,d=gn.combineClasses({"dx-scheduler-group-header":!0,"dx-scheduler-first-group-cell":c,"dx-scheduler-last-group-cell":u,[l??""]:!!l}),p=nt(e);return Ve(1,"th",d,Ve(1,"div","dx-scheduler-group-header-content",p?p({data:{data:s,id:r,color:i,text:a},index:o}):Ve(1,"div",null,a,0),0),2,{colSpan:n})}}sN.defaultProps=iN;class rN extends ht{render(){const{cellTemplate:e,className:n,groupItems:i}=this.props,s=nt(e);return Ve(1,"tr",`dx-scheduler-group-row ${n}`,i.map((r,o)=>{let{colSpan:a,color:l,data:c,id:u,isFirstGroupCell:d,isLastGroupCell:p,key:f,text:g}=r;return fe(2,sN,{text:g,id:u,data:c,index:o,color:l,colSpan:a??iN.colSpan,isFirstGroupCell:!!d,isLastGroupCell:!!p,cellTemplate:s},f)}),0)}}rN.defaultProps=nN;class oN extends ht{constructor(){super(...arguments),this._groupPanelItems=null}getGroupPanelItems(){if(this._groupPanelItems!==null)return this._groupPanelItems;const{groupPanelData:{baseColSpan:e,groupPanelItems:n}}=this.props,i=n.reduceRight((s,r,o)=>{const a=s,l=r.length,c=o===n.length-1?e:s[o+1],d=(o===n.length-1?l:n[o+1].length)/l;return a[o]=d*c,a},[...new Array(n.length)]);return this._groupPanelItems=n.map((s,r)=>{const o=i[r];return s.map(a=>L({},a,{colSpan:o}))}),this._groupPanelItems}componentWillUpdate(e){this.props.groupPanelData!==e.groupPanelData&&(this._groupPanelItems=null)}render(){const{resourceCellTemplate:e}=this.props,n=this.getGroupPanelItems(),i=nt(e);return ri(n.map(s=>fe(2,rN,{groupItems:s,cellTemplate:i},s[0].key)),0)}}oN.defaultProps=hb;class aN extends ht{render(){const{className:e,data:n,id:i,color:s,text:r,index:o,cellTemplate:a}=this.props,l=nt(a);return Ve(1,"div",`dx-scheduler-group-header ${e}`,l?l({data:{data:n,id:i,color:s,text:r},index:o}):Ve(1,"div","dx-scheduler-group-header-content",r,0),0)}}aN.defaultProps=tN;class lN extends ht{render(){const{className:e,groupItems:n,cellTemplate:i}=this.props,s=nt(i);return Ve(1,"div",`dx-scheduler-group-row ${e}`,n.map((r,o)=>{let{color:a,data:l,id:c,key:u,text:d}=r;return fe(2,aN,{text:d,id:c,data:l,index:o,color:a,cellTemplate:s},u)}),0)}}lN.defaultProps=nN;class cN extends ht{render(){const{className:e,elementRef:n,groupPanelData:i,resourceCellTemplate:s,height:r,styles:o}=this.props,a=Cl(gn.addHeightToStyle(r,o)),l=nt(s);return Ve(1,"div",e,Ve(1,"div","dx-scheduler-group-flex-container",i.groupPanelItems.map(c=>fe(2,lN,{groupItems:c,cellTemplate:l},c[0].key)),0),2,{style:a},null,n)}}cN.defaultProps=hb;const Od=L({},hb,{groups:[],groupOrientation:V$});class Ig extends ds{createEffects(){return[hs()]}render(){const{className:e,viewContext:n,elementRef:i,groupPanelData:s,height:r,resourceCellTemplate:o,groupOrientation:a,groups:l,styles:c}=this.props,u=nt(o),p=V_(l,a)?cN:oN;return fe(2,p,{viewContext:n,height:r,resourceCellTemplate:u,className:e,groupPanelData:s,elementRef:i,styles:c,groups:Od.groups,groupOrientation:Od.groupOrientation,groupByDate:Od.groupByDate})}}Ig.defaultProps=Od;class uN extends Tl{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=L({},this._optionsByReference,{resourceCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["resourceCellTemplate"],props:["viewContext","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return Ig}}re("dxGroupPanel",uN);const $re={text:"",splitText:!1};class dN extends ht{constructor(){super(...arguments),this._textCache=null}getTextParts(){if(this._textCache!==null)return this._textCache;const{text:e}=this.props;return this._textCache=e?e.split(" "):[""],this._textCache}componentWillUpdate(e){this.props.text!==e.text&&(this._textCache=null)}render(){const{splitText:e,text:n}=this.props,i=this.getTextParts();return ri(e?i.map(s=>Ve(1,"div","dx-scheduler-header-panel-cell-date",Ve(1,"span",null,s,0),2)):n,0)}}dN.defaultProps=$re;const hN=L({},mi,{today:!1,colSpan:1,isWeekDayCell:!1,splitText:!1,isTimeCellTemplate:!1});class pb extends ht{render(){const{viewContext:{view:{type:e},crossScrollingEnabled:n},colSpan:i,dateCellTemplate:s,groupIndex:r,groups:o,index:a,isTimeCellTemplate:l,splitText:c,startDate:u,text:d,timeCellTemplate:p,className:f,isFirstGroupCell:g,isLastGroupCell:y,isWeekDayCell:v,today:C}=this.props,x=gn.getCellSizeHorizontalClass(e,n),S=gn.combineClasses({"dx-scheduler-header-panel-cell":!0,[x]:!0,"dx-scheduler-header-panel-current-time-cell":C,"dx-scheduler-header-panel-week-cell":v,[f??""]:!!f}),O=gn.getGroupCellClasses(g,y,S),H=!l&&!!s||l&&!!p,F=nt(p),I=nt(s),w=H?ri([l&&F&&F({data:{date:u,text:d,groups:o,groupIndex:r},index:a}),!l&&I&&I({data:{date:u,text:d,groups:o,groupIndex:r},index:a})],0):fe(2,dN,{splitText:c,text:d});return Ve(1,"th",O,w,0,{colSpan:i,title:d})}}pb.defaultProps=hN;const{isMaterialBased:Fre}=XQ.getThemeType(),pN={groupOrientation:"horizontal",groupByDate:!1,groups:[]};class fN extends ht{render(){const{viewContext:e,dateCellTemplate:n,dateHeaderData:{dataMap:i,leftVirtualCellCount:s,leftVirtualCellWidth:r,rightVirtualCellCount:o,rightVirtualCellWidth:a},groupByDate:l,groupOrientation:c,groups:u}=this.props,d=cp(u,c)&&!l,p=nt(n);return ri(i.map((f,g)=>fe(2,Uo,{className:"dx-scheduler-header-row",leftVirtualCellWidth:r,leftVirtualCellCount:s,rightVirtualCellWidth:a,rightVirtualCellCount:o,isHeaderRow:!0,children:f.map(y=>{let{colSpan:v,endDate:C,groupIndex:x,groups:S,index:O,isFirstGroupCell:H,isLastGroupCell:F,key:I,startDate:w,text:A,today:k}=y;return fe(2,pb,{viewContext:e,startDate:w,endDate:C,groups:d?S:void 0,groupIndex:d?x:void 0,today:k??!1,isWeekDayCell:!1,isTimeCellTemplate:!1,index:O,text:A,isFirstGroupCell:H,isLastGroupCell:F,dateCellTemplate:p,colSpan:v,splitText:Fre},I)})},g.toString())),0)}}fN.defaultProps=pN;const mN=L({},Od,{isRenderDateHeader:!0,dateHeaderTemplate:fN});class fb extends ds{createEffects(){return[hs()]}render(){const{viewContext:e,dateHeaderData:n,groupByDate:i,groupOrientation:s,groupPanelData:r,groups:o,isRenderDateHeader:a,dateCellTemplate:l,dateHeaderTemplate:c,resourceCellTemplate:u,timeCellTemplate:d}=this.props,p=cp(o,s),f=nt(l),g=nt(c),y=nt(u),v=nt(d);return Ve(1,"thead",null,[p&&!i&&fe(2,Ig,{viewContext:e,groupPanelData:r,groups:o,groupByDate:i,groupOrientation:s,resourceCellTemplate:y}),a&&g({viewContext:e,groupByDate:i,dateHeaderData:n,groupOrientation:s,groups:o,dateCellTemplate:f,timeCellTemplate:v}),i&&fe(2,Ig,{viewContext:e,groupPanelData:r,groups:o,groupByDate:i,groupOrientation:s,resourceCellTemplate:y})],0)}}fb.defaultProps=mN;class X_ extends Tl{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=L({},this._optionsByReference,{dateHeaderData:!0,resourceCellTemplate:!0,dateCellTemplate:!0,timeCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dateCellTemplate","timeCellTemplate","dateHeaderTemplate","resourceCellTemplate"],props:["viewContext","dateHeaderData","isRenderDateHeader","dateCellTemplate","timeCellTemplate","dateHeaderTemplate","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return fb}}re("dxHeaderPanelLayout",X_);const{isMaterialBased:Hre}=O$();class gN extends ht{render(){const{viewContext:e,groupByDate:n,groupOrientation:i,groups:s,dateHeaderData:r,dateCellTemplate:o,timeCellTemplate:a}=this.props,{dataMap:l,isMonthDateHeader:c,leftVirtualCellCount:u,leftVirtualCellWidth:d,rightVirtualCellCount:p,rightVirtualCellWidth:f,weekDayLeftVirtualCellCount:g,weekDayLeftVirtualCellWidth:y,weekDayRightVirtualCellCount:v,weekDayRightVirtualCellWidth:C}=r,x=cp(s,i)&&!n,S=nt(o),O=nt(a);return ri(l.map((H,F)=>{const I=l.length,w=I-1===F,A=I>1&&F===0,k=Hre&&(c||A);let P=u,$=p,R=f,Ae=d;return A&&(P=g,$=v,R=C,Ae=y),fe(2,Uo,{className:"dx-scheduler-header-row",leftVirtualCellWidth:Ae??Us.leftVirtualCellWidth,leftVirtualCellCount:P,rightVirtualCellWidth:R??Us.rightVirtualCellWidth,rightVirtualCellCount:$,children:H.map(vt=>{let{colSpan:Qt,endDate:an,groupIndex:ne,groups:_e,index:we,isFirstGroupCell:ft,isLastGroupCell:Je,key:pt,startDate:wi,text:Si,today:be}=vt;return fe(2,pb,{viewContext:e,startDate:wi,endDate:an,groups:x?_e:void 0,groupIndex:x?ne:void 0,today:be??hN.today,index:we,text:Si,isFirstGroupCell:ft,isLastGroupCell:Je,isWeekDayCell:A,colSpan:Qt,splitText:k,dateCellTemplate:S,timeCellTemplate:O,isTimeCellTemplate:w},pt)})},F.toString())}),0)}}gN.defaultProps=pN;class _N extends ds{createEffects(){return[hs()]}render(){const{viewContext:e,dateCellTemplate:n,dateHeaderData:i,groupByDate:s,groupOrientation:r,groupPanelData:o,groups:a,isRenderDateHeader:l,resourceCellTemplate:c,timeCellTemplate:u}=this.props,d=nt(n),p=nt(c),f=nt(u);return fe(2,fb,{viewContext:e,dateHeaderData:i,groupPanelData:o,groupByDate:s,groups:a,groupOrientation:r,isRenderDateHeader:l,dateHeaderTemplate:gN,resourceCellTemplate:p,dateCellTemplate:d,timeCellTemplate:f})}}_N.defaultProps=mN;class yN extends X_{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dateCellTemplate","timeCellTemplate","dateHeaderTemplate","resourceCellTemplate"],props:["viewContext","dateHeaderData","isRenderDateHeader","dateCellTemplate","timeCellTemplate","dateHeaderTemplate","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return _N}}re("dxTimelineHeaderPanelLayout",yN);class vN extends ht{constructor(){super(...arguments),this.timeCellTemplateProps=null}getTimeCellTemplateProps(){if(this.timeCellTemplateProps!==null)return this.timeCellTemplateProps;const{groupIndex:e,groups:n,index:i,startDate:s,text:r}=this.props;return this.timeCellTemplateProps={data:{date:s,groups:n,groupIndex:e,text:r},index:i},this.timeCellTemplateProps}componentWillUpdate(e){(this.props.groupIndex!==e.groupIndex||this.props.groups!==e.groups||this.props.index!==e.index||this.props.startDate!==e.startDate||this.props.text!==e.text)&&(this.timeCellTemplateProps=null)}render(){const{className:e,viewContext:n,highlighted:i,isFirstGroupCell:s,isLastGroupCell:r,text:o,timeCellTemplate:a}=this.props,l=gn.getCellSizeVerticalClass(!1),c=gn.combineClasses({"dx-scheduler-time-panel-cell":!0,[l]:!0,"dx-scheduler-time-panel-current-time-cell":!!i,[e??""]:!0}),u=this.getTimeCellTemplateProps(),d=nt(a);return fe(2,Y_,{className:c,viewContext:n,isFirstGroupCell:s,isLastGroupCell:r,startDate:mi.startDate,endDate:mi.endDate,index:mi.index,children:d?d({index:u.index,data:u.data}):Ve(1,"div",null,o,0)})}}vN.defaultProps=mi;const Nre=["timePanelData","viewContext","tableRef","timeCellTemplate"],zre={timePanelData:{groupedData:[],leftVirtualCellCount:0,rightVirtualCellCount:0,topVirtualRowCount:0,bottomVirtualRowCount:0}};class CN extends ds{createEffects(){return[hs()]}render(){const e=this.props,{timePanelData:n,viewContext:i,tableRef:s,timeCellTemplate:r}=e,o=Mt(e,Nre),{topVirtualRowHeight:a,bottomVirtualRowHeight:l}=n,c=nt(r);return Li(fe(2,Z_,L({},o,{className:"dx-scheduler-time-panel",topVirtualRowHeight:a??0,bottomVirtualRowHeight:l??0,virtualCellsCount:1,tableRef:s,children:n.groupedData.map(u=>{let{dateTable:d,groupIndex:p,isGroupedAllDayPanel:f,key:g}=u;return ri([f&&fe(2,Uo,{leftVirtualCellWidth:Us.leftVirtualCellWidth,rightVirtualCellWidth:Us.rightVirtualCellWidth,children:fe(2,Y_,{className:"dx-scheduler-time-panel-title-cell",viewContext:i,startDate:mi.startDate,endDate:mi.endDate,index:mi.index,children:fe(2,ab)})}),d.map(y=>{let{groups:v,highlighted:C,index:x,isFirstGroupCell:S,isLastGroupCell:O,key:H,startDate:F,text:I}=y;return fe(2,Uo,{className:"dx-scheduler-time-panel-row",leftVirtualCellWidth:Us.leftVirtualCellWidth,rightVirtualCellWidth:Us.rightVirtualCellWidth,children:fe(2,vN,{viewContext:i,startDate:F,endDate:mi.endDate,text:I,groups:v,groupIndex:p,isFirstGroupCell:S,isLastGroupCell:O,index:x,timeCellTemplate:c,highlighted:C})},H)})],0,g)})})))}}CN.defaultProps=zre;class DN extends Tl{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=L({},this._optionsByReference,{timeCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["timeCellTemplate"],props:["viewContext","groupOrientation","timePanelData","timeCellTemplate"]}}get _viewComponent(){return CN}}re("dxTimePanelTableLayout",DN);class xN extends Kt{notifyObserver(e,n){const i=this.option("observer");i&&i.fire(e,n)}invoke(){const e=this.option("observer");if(e)return e.fire.apply(e,arguments)}}const lO=pe(),ir="dxDraggable",Wre=K(uS,ir),Gre=K(O_,ir),Ure=K(dS,ir),Kre=K(op,ir),jre=K(ap,ir),qre=K(ot.down,ir),Yre=K("keydown",ir);let pC,Pf;const $0=t=>({x:t.pageX-m(lO).scrollLeft(),y:t.pageY-m(lO).scrollTop()});class cO{constructor(e,n){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=n,e==="vertical"?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,n){let i=!1;e.some(s=>{const r=m(s),o=r.hasClass("dx-overlay-wrapper"),a=r.hasClass("dx-overlay-content");return o||a?!0:(i=this._trySetScrollable(s,n),i)}),i||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return(e.css(this._overFlowAttr)==="auto"||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil(this._sizeAttr==="width"?me(e):Re(e))}_trySetScrollable(e,n){const i=this,s=m(e);let r;const o=i._component.option("scrollSensitivity");let a=i.isScrollable(s);return a&&(r=i._calculateDistanceToBorders(s,n),o>r[i._limitProps.start]?i._preventScroll||(i._scrollSpeed=-i._calculateScrollSpeed(r[i._limitProps.start]),i._$scrollableAtPointer=s):o>r[i._limitProps.end]?i._preventScroll||(i._scrollSpeed=i._calculateScrollSpeed(r[i._limitProps.end]),i._$scrollableAtPointer=s):(a=!1,i._preventScroll=!1)),a}_calculateDistanceToBorders(e,n){const i=e.get(0);let s;return i?(s=ke(i),{left:n.x-s.left,top:n.y-s.top,right:s.right-n.x,bottom:s.bottom-n.y}):{}}_calculateScrollSpeed(e){const n=this._component,i=n.option("scrollSensitivity"),s=n.option("scrollSpeed");return Math.ceil(((i-e)/i)**2*s)}scrollByStep(){const e=this;if(e._$scrollableAtPointer&&e._scrollSpeed){if(e._$scrollableAtPointer.hasClass("dx-scrollable-container")){const i=e._$scrollableAtPointer.closest(".dx-scrollable"),s=i.data("dxScrollable")||i.data("dxScrollView");if(s){const r=s.scrollOffset()[e._limitProps.start]+e._scrollSpeed;s.scrollTo({[e._limitProps.start]:r})}}else{const i=e._$scrollableAtPointer[e._scrollValue]()+e._scrollSpeed;e._$scrollableAtPointer[e._scrollValue](i)}const n=e._component._dragMoveArgs;n&&e._component._dragMoveHandler(n)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,n){if(!e)return!1;const i=ke(e.get(0)),s=i[this._limitProps.start],r=i[this._sizeAttr],o=$0(n),a=this._sizeAttr==="width"?o.x:o.y;return a<s||a>s+r}}const Zre=SF.inherit({ctor(t){this.callBase(),this._strategy=t},_step(){const t=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;t&&t.scrollByStep(),e&&e.scrollByStep()}}),wN=us.inherit({reset:B,dragMove:B,dragEnter:B,dragLeave:B,dragEnd(t){return this._getSourceDraggable()._fireRemoveEvent(t),j().resolve()},_fireRemoveEvent:B,_getDefaultOptions(){return T(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),T(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new Zre(this),this._horizontalScrollHelper=new cO("horizontal",this),this._verticalScrollHelper=new cO("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset(t){return ue(t)&&(t={h:t.x,v:t.y}),t=cu(t).map(e=>parseFloat(e)),{left:t[0],top:t.length===1?t[0]:t[1]}},_getNormalizedCursorOffset(t,e){return ie(t)&&(t=t.call(this,e)),this._normalizeCursorOffset(t)},_calculateElementOffset(t){let e,n;const{event:i}=t,s=m(t.itemElement),r=m(t.dragElement),o=this._dragElementIsCloned(),a=this.option("cursorOffset");let l={left:0,top:0};const c=this._initialLocate=Gn(r);return(o||t.initialOffset||a)&&(e=t.initialOffset||s.offset(),a&&(l=this._getNormalizedCursorOffset(a,t),isFinite(l.left)&&(e.left=i.pageX),isFinite(l.top)&&(e.top=i.pageY)),n=r.offset(),e.top-=n.top+(l.top||0)-c.top,e.left-=n.left+(l.left||0)-c.left),e},_initPosition(t){const e=m(t.dragElement),n=this._calculateElementOffset(t);n&&this._move(n,e),this._startPosition=Gn(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(t){const e=this.NAME;return xw(e)+(t?`-${t}`:"")},_getItemsSelector(){return this.option("filter")||""},_$content(){const t=this.$element(),e=t.children(".dx-template-wrapper");return e.length?e:t},_attachEventHandlers(){if(this.option("disabled"))return;let t=this._$content(),e=this._getItemsSelector();const n=this.option("allowMoveByClick"),i={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(s,r)=>{const o=this.option("group"),a=this._getSourceDraggable().option("group"),l=this._getScrollable(s);return this._verticalScrollHelper.isOutsideScrollable(l,r)||this._horizontalScrollHelper.isOutsideScrollable(l,r)?!1:a&&a===o}};n&&(t=this._getArea(),b.on(t,qre,i,this._pointerDownHandler.bind(this))),e[0]===">"&&(e=e.slice(1)),b.on(t,Wre,e,i,this._dragStartHandler.bind(this)),b.on(t,Gre,i,this._dragMoveHandler.bind(this)),b.on(t,Ure,i,this._dragEndHandler.bind(this)),b.on(t,Kre,i,this._dragEnterHandler.bind(this)),b.on(t,jre,i,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&b.on(t,Yre,this._keydownHandler.bind(this))},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(t,e){return{container:se(e),model:{itemData:this.option("itemData"),itemElement:se(t)}}},_createDragElement(t){let e=t;const n=this.option("clone"),i=this._getContainer();let s=this.option("dragTemplate");return s?(s=this._getTemplate(s),e=m("<div>").appendTo(i),s.render(this._getDragTemplateArgs(t,e))):n&&(e=m("<div>").appendTo(i),t.clone().css({width:t.css("width"),height:t.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==t.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){b.off(this._$content(),`.${ir}`),b.off(this._getArea(),`.${ir}`)},_move(t,e){Ft(e||this._$dragElement,t)},_getDraggableElement(t){const e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();let i=m(t&&t.target);const s=this._getItemsSelector();if(s[0]===">"){const r=this._$content().find(s);r.is(i)||(i=i.closest(r))}return i},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(t){if(NB(t))return;const e={},n=this.$element(),i=this.option("dragDirection");(i==="horizontal"||i==="both")&&(e.left=t.pageX-n.offset().left+Gn(n).left-me(n)/2),(i==="vertical"||i==="both")&&(e.top=t.pageY-n.offset().top+Gn(n).top-Re(n)/2),this._move(e,n),this._getAction("onDragMove")(this._getEventArgs(t))},_isValidElement(t,e){const n=this.option("handle"),i=m(t.originalEvent&&t.originalEvent.target);return n&&!i.closest(n).length||!e.length?!1:!e.is(".dx-state-disabled, .dx-state-disabled *")},_dragStartHandler(t){const e=this._getDraggableElement(t);if(this.dragInProgress=!0,!this._isValidElement(t,e)){t.cancel=!0;return}if(this._$sourceElement)return;const n=this._getDragStartArgs(t,e);if(this._getAction("onDragStart")(n),n.cancel){t.cancel=!0;return}this.option("itemData",n.itemData),this._setSourceDraggable(),this._$sourceElement=e;let i=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),i=this._getDraggableElementOffset(i.left,i.top));const s=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(s.children());const r=s.css("position")==="fixed";this._initPosition(T({},n,{dragElement:s.get(0),initialOffset:r&&i})),this._getAction("onDraggableElementShown")(L({},n,{dragElement:s}));const o=this._getArea(),a=this._getAreaOffset(o),l=this._getBoundOffset(),c=et(o),u=tt(o),d=me(s),p=Re(s),f=s.offset().left-a.left,g=s.offset().top-a.top;o.length&&(t.maxLeftOffset=f-l.left,t.maxRightOffset=c-f-d-l.right,t.maxTopOffset=g-l.top,t.maxBottomOffset=u-g-p-l.bottom),this.option("autoScroll")&&this._startAnimator()},_getAreaOffset(t){return t&&fi.offset(t)||{left:0,top:0}},_toggleDraggingClass(t){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),t)},_toggleDragSourceClass(t,e){const n=e||this._$sourceElement;n&&n.toggleClass(this._addWidgetPrefix("source"),t)},_setGestureCoverCursor(t){m(".dx-gesture-cover").css("cursor",t.css("cursor"))},_getBoundOffset(){let t=this.option("boundOffset");return ie(t)&&(t=t.call(this)),F2(t)},_getArea(){let t=this.option("boundary");return ie(t)&&(t=t.call(this)),m(t)},_getContainer(){let t=this.option("container");return t===void 0&&(t=tr()),m(t)},_getDraggableElementOffset(t,e){var n,i;const s=this._initScrollTop,r=this._initScrollLeft,o=this._getScrollableScrollTop(),a=this._getScrollableScrollLeft(),c=m(this.element()).css("position")==="fixed",u={left:(((n=this._startPosition)===null||n===void 0?void 0:n.left)??0)+t,top:(((i=this._startPosition)===null||i===void 0?void 0:i.top)??0)+e};return c||this._hasClonedDraggable()?u:{left:ut(a)?u.left+a-r:u.left,top:ut(o)?u.top+o-s:u.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(t){if(this._dragMoveArgs=t,!this._$dragElement){t.cancel=!0;return}const e=this._getDraggableElementOffset(t.offset.x,t.offset.y);this._move(e),this._updateScrollable(t);const n=this._getEventArgs(t);if(this._getAction("onDragMove")(n),n.cancel===!0)return;this._getTargetDraggable().dragMove(t,scrollBy)},_updateScrollable(t){const e=this;if(e.option("autoScroll")){const n=$0(t),i=W.elementsFromPoint(n.x,n.y,this.$element().get(0));e._verticalScrollHelper.updateScrollable(i,n),e._horizontalScrollHelper.updateScrollable(i,n)}},_getScrollable(t){let e;return t.parents().toArray().some(n=>{const i=m(n);return this._horizontalScrollHelper.isScrollable(i)||this._verticalScrollHelper.isScrollable(i)?(e=i,!0):!1}),e},_getScrollableScrollTop(){var t;return((t=this._getScrollable(m(this.element())))===null||t===void 0?void 0:t.scrollTop())??0},_getScrollableScrollLeft(){var t;return((t=this._getScrollable(m(this.element())))===null||t===void 0?void 0:t.scrollLeft())??0},_defaultActionArgs(){const t=this.callBase.apply(this,arguments),e=this.option("component");return e&&(t.component=e,t.element=e.element()),t},_getEventArgs(t){const e=this._getSourceDraggable(),n=this._getTargetDraggable();return{event:t,itemData:e.option("itemData"),itemElement:se(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:n.option("component")||n,fromData:e.option("data"),toData:n.option("data")}},_getDragStartArgs(t,e){const n=this._getEventArgs(t);return{event:n.event,itemData:n.itemData,itemElement:e,fromData:n.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(t){const e=j(),n=this._getEventArgs(t),i=this._getEventArgs(t),s=this._getTargetDraggable();let r=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(n)}finally{Ne(vi(n.cancel)).done(o=>{if(!o&&(s!==this&&s._getAction("onDrop")(i),!i.cancel)){r=!1,Ne(vi(s.dragEnd(n))).always(e.resolve);return}e.resolve()}).fail(e.resolve),e.done(()=>{r&&this._revertItemToInitialPosition(),this._resetDragOptions(s)})}},_isTargetOverAnotherDraggable(t){const e=this._getSourceDraggable();if(this===e)return!1;const n=e._$dragElement,i=e.$element(),s=this.$element(),r=$0(t),a=W.elementsFromPoint(r.x,r.y,this.element()).filter(d=>{const p=m(d);return p.hasClass(this._addWidgetPrefix())?!p.closest(n).length:!1})[0],l=this._getSourceElement(),c=a===i.get(0),u=m(a).closest(l).length;return!a||a===s.get(0)&&!c&&!u},_dragEnterHandler(t){this._fireDragEnterEvent(t),this._isTargetOverAnotherDraggable(t)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(t)},_dragLeaveHandler(t){this._fireDragLeaveEvent(t),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(t)},_keydownHandler(t){this.dragInProgress&&t.key==="Escape"&&this._keydownEscapeHandler(t)},_keydownEscapeHandler(t){var e;if(!this._getSourceElement())return;const i=this._getEventArgs(t);if(this._getAction("onDragCancel")(i),i.cancel)return;this.dragInProgress=!1,(e=Pf)===null||e===void 0||e._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();const s=this._getTargetDraggable();this._resetDragOptions(s),this._attachEventHandlers()},_getAction(t){return this[`_${t}Action`]||this._createActionByOption(t)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new Rr}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());const t=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&m(e.render({container:this.element(),transclude:t}))},_optionChanged(t){const{name:e}=t;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this[`_${e}Action`]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(t)}},_getTargetDraggable(){return pC||this},_getSourceDraggable(){return Pf||this},_setTargetDraggable(){const t=this.option("group"),e=this._getSourceDraggable();t&&t===e.option("group")&&(pC=this)},_setSourceDraggable(){Pf=this},_resetSourceDraggable(){Pf=null},_resetTargetDraggable(){pC=null},_resetDragOptions(t){this.reset(),t.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(t){const e=this._getEventArgs(t);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(t){const e=this._getEventArgs(t);this._getAction("onDragLeave")(e)}});re(ir,wN);function Qre(t){return t.NAME==="dxScheduler"}const Xre="dx-scheduler-appointment";class Jre{constructor(e){this.scheduler=e,this.workspace=this.scheduler._workSpace,this.appointments=this.scheduler._appointments,this.initialPosition={left:0,top:0},this.appointmentInfo=null,this.dragBetweenComponentsPromise=null}isAllDay(e){return e.data("dxAppointmentSettings").allDay}onDragStart(e){const{itemSettings:n,itemData:i,initialPosition:s}=e;this.initialPosition=s,this.appointmentInfo={appointment:i,settings:n},this.appointments.notifyObserver("hideAppointmentTooltip")}onDragMove(e){e.fromComponent!==e.toComponent&&this.appointments.notifyObserver("removeDroppableCellClass")}getAppointmentElement(e){const n=e.event.data&&e.event.data.itemElement||e.itemElement;return m(n)}onDragEnd(e){const n=this.getAppointmentElement(e),i=this.appointments._getItemData(n);this.appointments._getAppointmentContainer(this.isAllDay(n)).append(n);const r=this.workspace.getDroppableCellIndex(),o=this.workspace.getCellIndexByCoordinates(this.initialPosition);this.appointments.notifyObserver("updateAppointmentAfterDrag",{event:e,element:n,rawAppointment:i,newCellIndex:r,oldCellIndex:o})}onDragCancel(){this.removeDroppableClasses()}getItemData(e){const n=m(e).data(g0),i=n==null?void 0:n.appointment,s=this.appointments._getItemData(e);return i||s}getItemSettings(e){const n=m(e).data(g0);return n&&n.settings||[]}createDragStartHandler(e,n){return i=>{i.itemData=this.getItemData(i.itemElement),i.itemSettings=this.getItemSettings(i.itemElement),n.onDragStart&&n.onDragStart(i),i.cancel||e.onDragStart(i)}}createDragMoveHandler(e,n){return i=>{n.onDragMove&&n.onDragMove(i),i.cancel||e.onDragMove(i)}}createDragEndHandler(e,n){return i=>{const s=this.appointments.invoke("getUpdatedData",i.itemData);if(this.appointmentInfo=null,i.toItemData=T({},i.itemData,s),n.onDragEnd&&n.onDragEnd(i),i.cancel||(e.onDragEnd(i),i.fromComponent!==i.toComponent&&n.onRemove&&n.onRemove(i)),i.cancel===!0&&this.removeDroppableClasses(),i.cancel!==!0&&Qre(i.toComponent)){const r=i.toComponent._getDragBehavior();r.dragBetweenComponentsPromise=new j}}}createDropHandler(e){return n=>{const i=this.appointments.invoke("getUpdatedData",n.itemData);n.itemData=T({},n.itemData,i),n.fromComponent!==n.toComponent&&e.onAdd&&e.onAdd(n),this.dragBetweenComponentsPromise&&this.dragBetweenComponentsPromise.resolve()}}addTo(e,n){const i=this.scheduler.option("appointmentDragging")||{},s=T({component:this.scheduler,contentTemplate:null,filter:`.${Xre}`,immediate:!1,onDragStart:this.onDragStart.bind(this),onDragMove:this.onDragMove.bind(this),onDragEnd:this.onDragEnd.bind(this),onDragCancel:this.onDragCancel.bind(this)},n);this.appointments._createComponent(e,wN,T({},s,i,{onDragStart:this.createDragStartHandler(s,i),onDragMove:this.createDragMoveHandler(s,i),onDragEnd:this.createDragEndHandler(s,i),onDrop:this.createDropHandler(i),onCancelByEsc:!0}))}updateDragSource(e,n){const{appointmentInfo:i}=this;if(i||e){const s=e||i.appointment,r=n||i.settings;this.appointments._setDragSourceAppointment(s,r)}}removeDroppableClasses(){this.appointments._removeDragSourceClassFromDraggedAppointment(),this.workspace.removeDroppableCellClass()}}const uO="dx-scheduler-date-time-shader";class SN{constructor(e){this._workSpace=e,this._$container=this._workSpace._dateTableScrollable.$content()}render(){this.initShaderElements(),this.renderShader(),this._shader.forEach(e=>{this._$container.append(e)})}initShaderElements(){this._$shader=this.createShader(),this._shader=[],this._shader.push(this._$shader)}renderShader(){}createShader(){return m("<div>").addClass(uO)}clean(){this._$container&&this._$container.find(`.${uO}`).remove()}}const dO="dx-scheduler-date-time-shader-all-day",eoe="dx-scheduler-date-time-shader-top",toe="dx-scheduler-date-time-shader-bottom";class noe extends SN{renderShader(){let e=this._getShaderHeight();const n=this._getShaderMaxHeight(),i=e>n;e>n&&(e=n),Ai(this._$shader,e);const s=this._workSpace._getGroupCount()||1;this._workSpace.isGroupedByDate()?this._renderGroupedByDateShaderParts(s,e,n,i):this._renderShaderParts(s,e,n,i)}_renderShaderParts(e,n,i,s){for(let r=0;r<e;r++){const o=this._getShaderWidth(r);this._renderTopShader(this._$shader,n,o,r),!s&&this._renderBottomShader(this._$shader,i,n,o,r),this._renderAllDayShader(o,r)}}_renderGroupedByDateShaderParts(e,n,i,s){const r=this._getShaderWidth(0);let o=r-this._workSpace.getCellWidth();n<0&&(n=0,o=r),this._renderTopShader(this._$shader,n,r*e,0),!s&&this._renderBottomShader(this._$shader,i,n,o*e+this._workSpace.getCellWidth(),0),this._renderAllDayShader(r*e,0)}_renderTopShader(e,n,i,s){this._$topShader=m("<div>").addClass(eoe),i&&Ys(this._$topShader,i),n&&Ai(this._$topShader,n),this._$topShader.css("marginTop",this._getShaderTopOffset(s)),this._$topShader.css("left",this._getShaderOffset(s,i)),e.append(this._$topShader)}_renderBottomShader(e,n,i,s,r){this._$bottomShader=m("<div>").addClass(toe);const o=i<0?s:s-this._workSpace.getCellWidth(),a=i<0?n:n-i;Ys(this._$bottomShader,o),Ai(this._$bottomShader,a),this._$bottomShader.css("left",this._getShaderOffset(r,s-this._workSpace.getCellWidth())),e.append(this._$bottomShader)}_renderAllDayShader(e,n){this._workSpace.option("showAllDayPanel")&&(this._$allDayIndicator=m("<div>").addClass(dO),Ai(this._$allDayIndicator,this._workSpace.getAllDayHeight()),Ys(this._$allDayIndicator,e),this._$allDayIndicator.css("left",this._getShaderOffset(n,e)),this._workSpace._$allDayPanel.prepend(this._$allDayIndicator))}_getShaderOffset(e,n){return this._workSpace.getGroupedStrategy().getShaderOffset(e,n)}_getShaderTopOffset(e){return this._workSpace.getGroupedStrategy().getShaderTopOffset(e)}_getShaderHeight(){return this._workSpace.getGroupedStrategy().getShaderHeight()}_getShaderMaxHeight(){return this._workSpace.getGroupedStrategy().getShaderMaxHeight()}_getShaderWidth(e){return this._workSpace.getGroupedStrategy().getShaderWidth(e)}clean(){super.clean(),this._workSpace&&this._workSpace._$allDayPanel&&this._workSpace._$allDayPanel.find(`.${dO}`).remove()}}class bN{constructor(){this._cache=new Map}get size(){return this._cache.size}clear(){this._cache.clear()}get(e,n){return!this._cache.has(e)&&n&&this.set(e,n()),this._cache.get(e)}set(e,n){M(n)&&this._cache.set(e,n)}}class ioe{handleArrowClick(e){const{key:n,focusedCellPosition:i,edgeIndices:s,getCellDataByPosition:r,isAllDayPanelCell:o}=e;let a;switch(n){case"down":a=this.getCellFromNextRowPosition(i,"next",s);break;case"up":a=this.getCellFromNextRowPosition(i,"prev",s);break;case"left":a=this.getCellFromNextColumnPosition(L({},e,{direction:"prev"}));break;case"right":a=this.getCellFromNextColumnPosition(L({},e,{direction:"next"}))}const l=r(a.rowIndex,a.columnIndex,o);return this.moveToCell(L({},e,{currentCellData:l}))}getCellFromNextRowPosition(e,n,i){const{columnIndex:s,rowIndex:r}=e,a=r+(n==="next"?1:-1),l=a>=0&&a<=i.lastRowIndex?a:r;return{columnIndex:s,rowIndex:l}}getCellFromNextColumnPosition(e){const{focusedCellPosition:n,direction:i,edgeIndices:s,isRTL:r,isGroupedByDate:o,groupCount:a,isMultiSelection:l,viewType:c}=e,{columnIndex:u,rowIndex:d}=n,{firstColumnIndex:p,lastColumnIndex:f,firstRowIndex:g,lastRowIndex:y}=s,v=o&&l?a:1,C=r?-1:1,x=i==="next"?C*v:-1*C*v,S=u+x;return S>=p&&S<=f?{columnIndex:S,rowIndex:d}:ol(c)?n:this._processEdgeCell({nextColumnIndex:S,rowIndex:d,columnIndex:u,firstColumnIndex:p,lastColumnIndex:f,firstRowIndex:g,lastRowIndex:y,step:v})}_processEdgeCell(e){const{nextColumnIndex:n,rowIndex:i,columnIndex:s,firstColumnIndex:r,lastColumnIndex:o,firstRowIndex:a,lastRowIndex:l,step:c}=e;let u=n,d=i;const p=n<r,f=n>o;if(p){const g=o-(c-s%c-1),y=i-1,v=y>=a;d=v?y:i,u=v?g:s}if(f){const g=r+s%c,y=i+1,v=y<=l;d=v?y:i,u=v?g:s}return{columnIndex:u,rowIndex:d}}moveToCell(e){const{isMultiSelection:n,isMultiSelectionAllowed:i,focusedCellData:s,currentCellData:r}=e;return n&&i?this._getNextCellData(r,s):r}_getNextCellData(e,n,i){return i?n:this._isValidNextFocusedCell(e,n)?e:n}_isValidNextFocusedCell(e,n){if(!n)return!0;const{groupIndex:i,allDay:s}=n,{groupIndex:r,allDay:o}=e;return i===r&&s===o}}class soe{constructor(e){this._viewDataProvider=e,this._focusedCell=null,this._selectedCells=null,this._firstSelectedCell=null,this._prevFocusedCell=null,this._prevSelectedCells=null}get viewDataProvider(){return this._viewDataProvider}get focusedCell(){const e=this._focusedCell;if(!e)return;const{groupIndex:n,startDate:i,allDay:s}=e,r={groupIndex:n,startDate:i,isAllDay:s,index:e.index};return{coordinates:this.viewDataProvider.findCellPositionInMap(r),cellData:e}}setFocusedCell(e,n,i){if(e>=0){const s=this._viewDataProvider.getCellData(e,n,i);this._focusedCell=s}}setSelectedCells(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const i=this._viewDataProvider,{rowIndex:s,columnIndex:r,allDay:o}=e;if(s<0)return;const a=n?i.getCellData(n.rowIndex,n.columnIndex,n.allDay):this._firstSelectedCell,l=i.getCellData(s,r,o);this._firstSelectedCell=a,this._selectedCells=this._viewDataProvider.getCellsBetween(a,l)}setSelectedCellsByData(e){this._selectedCells=e}getSelectedCells(){return this._selectedCells}releaseSelectedAndFocusedCells(){this.releaseSelectedCells(),this.releaseFocusedCell()}releaseSelectedCells(){this._prevSelectedCells=this._selectedCells,this._prevFirstSelectedCell=this._firstSelectedCell,this._selectedCells=null,this._firstSelectedCell=null}releaseFocusedCell(){this._prevFocusedCell=this._focusedCell,this._focusedCell=null}restoreSelectedAndFocusedCells(){this._selectedCells=this._selectedCells||this._prevSelectedCells,this._focusedCell=this._focusedCell||this._prevFocusedCell,this._firstSelectedCell=this._firstSelectedCell||this._prevFirstSelectedCell,this._prevSelectedCells=null,this._prevFirstSelectedCell=null,this._prevFocusedCell=null}clearSelectedAndFocusedCells(){this._prevSelectedCells=null,this._selectedCells=null,this._prevFocusedCell=null,this._focusedCell=null}}const hO=K("scroll","dxSchedulerVirtualScrolling"),Jl={vertical:"vertical",horizontal:"horizontal",both:"both",none:"none"},roe=Jl.both;class ooe{constructor(e){this.options=e,e&&(this._rowHeight=this.getCellHeight(),this._cellWidth=this.getCellWidth(),this._createVirtualScrollingBase())}get isRTL(){return this.options.isRTL()}get verticalVirtualScrolling(){return this._verticalVirtualScrolling}set verticalVirtualScrolling(e){this._verticalVirtualScrolling=e}get horizontalVirtualScrolling(){return this._horizontalVirtualScrolling}set horizontalVirtualScrolling(e){this._horizontalVirtualScrolling=e}get document(){return W.getDocument()}get height(){return this.options.getSchedulerHeight()}get width(){return this.options.getSchedulerWidth()}get rowHeight(){return this._rowHeight}set rowHeight(e){this._rowHeight=e}get outlineCount(){return this.options.getScrolling().outlineCount}get cellWidth(){return this._cellWidth}set cellWidth(e){this._cellWidth=e}get viewportWidth(){const e=this.width&&this.options.getViewWidth();return e>0?e:this.options.getWindowWidth()}get viewportHeight(){const e=this.height&&this.options.getViewHeight();return e>0?e:this.options.getWindowHeight()}get cellCountInsideTopVirtualRow(){var e;return((e=this.verticalScrollingState)===null||e===void 0?void 0:e.virtualItemCountBefore)||0}get cellCountInsideLeftVirtualCell(){var e;return((e=this.horizontalScrollingState)===null||e===void 0?void 0:e.virtualItemCountBefore)||0}get cellCountInsideRightVirtualCell(){var e;return((e=this.horizontalScrollingState)===null||e===void 0?void 0:e.virtualItemCountAfter)||0}get topVirtualRowsCount(){return this.cellCountInsideTopVirtualRow>0?1:0}get leftVirtualCellsCount(){const e=this.isRTL?this.cellCountInsideRightVirtualCell:this.cellCountInsideLeftVirtualCell;return Math.ceil(e/1e3)}get virtualRowOffset(){var e;return((e=this.verticalScrollingState)===null||e===void 0?void 0:e.virtualItemSizeBefore)||0}get virtualCellOffset(){var e;return((e=this.horizontalScrollingState)===null||e===void 0?void 0:e.virtualItemSizeBefore)||0}get scrollingState(){var e,n;return{vertical:(e=this.verticalVirtualScrolling)===null||e===void 0?void 0:e.state,horizontal:(n=this.horizontalVirtualScrolling)===null||n===void 0?void 0:n.state}}get verticalScrollingState(){return this.scrollingState.vertical}get horizontalScrollingState(){return this.scrollingState.horizontal}get scrollingOrientation(){const e=this.options.getScrolling();return e.mode==="standard"?Jl.none:e.orientation||roe}get verticalScrollingAllowed(){return this.scrollingOrientation===Jl.vertical||this.scrollingOrientation===Jl.both}get horizontalScrollingAllowed(){return this.scrollingOrientation===Jl.horizontal||this.scrollingOrientation===Jl.both}setViewOptions(e){this.options=e,this.verticalVirtualScrolling&&(this.verticalVirtualScrolling.options=e,this.verticalVirtualScrolling.itemSize=this.rowHeight,this.verticalVirtualScrolling.viewportSize=this.viewportHeight),this.horizontalVirtualScrolling&&(this.horizontalVirtualScrolling.options=e,this.verticalVirtualScrolling.itemSize=this.cellWidth,this.verticalVirtualScrolling.viewportSize=this.viewportWidth)}getRenderState(){var e,n;const i=((e=this.verticalVirtualScrolling)===null||e===void 0?void 0:e.getRenderState())||{},s=((n=this.horizontalVirtualScrolling)===null||n===void 0?void 0:n.getRenderState())||{};return L({},i,s)}getCellHeight(){const e=this.options.getCellHeight(),n=e>0?e:50;return Math.floor(n)}getCellWidth(){let e=this.options.getCellWidth();const n=this.options.getCellMinWidth();(!e||e<n)&&(e=n);const i=e>0?e:1;return Math.floor(i)}calculateCoordinatesByDataAndPosition(e,n,i,s,r){const{rowIndex:o,columnIndex:a}=n,{startDate:l,endDate:c,allDay:u}=e,d=i.getTime(),p=l.getTime(),f=c.getTime(),g=u||!s?0:(d-p)/(f-p),y=this.getCellWidth(),v=this.getCellHeight(),C=r?(o+g)*v:o*v;let x=r?a*y:(a+g)*y;return this.isRTL&&(x=this.options.getScrollableOuterWidth()-x),{top:C,left:x}}dispose(){this._onScrollHandler&&b.off(this.document,hO,this._onScrollHandler)}createVirtualScrolling(){const e=!!this.verticalVirtualScrolling,n=!!this.horizontalVirtualScrolling;(this.verticalScrollingAllowed!==e||this.horizontalScrollingAllowed!==n)&&(this._rowHeight=this.getCellHeight(),this._cellWidth=this.getCellWidth(),this._createVirtualScrollingBase())}_createVirtualScrollingBase(){this.verticalScrollingAllowed&&(this.verticalVirtualScrolling=new aoe(L({},this.options,{viewportHeight:this.viewportHeight,rowHeight:this.rowHeight,outlineCount:this.outlineCount}))),this.horizontalScrollingAllowed&&(this.horizontalVirtualScrolling=new loe(L({},this.options,{viewportWidth:this.viewportWidth,cellWidth:this.cellWidth,outlineCount:this.outlineCount})))}isAttachWindowScrollEvent(){return(this.horizontalScrollingAllowed||this.verticalScrollingAllowed)&&!this.height}attachScrollableEvents(){this.isAttachWindowScrollEvent()&&this._attachWindowScroll()}_attachWindowScroll(){const e=pe();this._onScrollHandler=this.options.createAction(()=>{const{scrollX:n,scrollY:i}=e;(n>=10||i>=10)&&this.handleOnScrollEvent({left:n,top:i})}),b.on(this.document,hO,this._onScrollHandler)}handleOnScrollEvent(e){if(e){var n,i;const{left:o,top:a}=e,l=M(a)&&((n=this.verticalVirtualScrolling)===null||n===void 0?void 0:n.updateState(a)),c=M(o)&&((i=this.horizontalVirtualScrolling)===null||i===void 0?void 0:i.updateState(o));if(l||c){var s,r;(s=(r=this.options).updateRender)===null||s===void 0||s.call(r)}}}updateDimensions(e){const n=this.getCellHeight(),i=this.verticalScrollingAllowed&&n!==this.rowHeight;(i||e)&&this.verticalVirtualScrolling&&(this.rowHeight=n,this.verticalVirtualScrolling.viewportSize=this.viewportHeight,this.verticalVirtualScrolling.reinitState(n,e));const s=this.getCellWidth(),r=this.horizontalScrollingAllowed&&s!==this.cellWidth;if((r||e)&&this.horizontalVirtualScrolling&&(this.cellWidth=s,this.horizontalVirtualScrolling.viewportSize=this.viewportWidth,this.horizontalVirtualScrolling.reinitState(s,e)),i||r){var o,a;(o=(a=this.options).updateGrid)===null||o===void 0||o.call(a)}}}class EN{constructor(e){this.options=e,this._state=this.defaultState,this.viewportSize=this.options.viewportSize,this._itemSize=this.options.itemSize,this._position=-1,this._itemSizeChanged=!1,this.updateState(0)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSizeChanged=this._itemSize!==e,this._itemSize=e}get state(){return this._state}set state(e){this._state=e}get startIndex(){return this.state.startIndex}get pageSize(){return Math.ceil(this.viewportSize/this.itemSize)}get outlineCount(){return M(this.options.outlineCount)?this.options.outlineCount:Math.floor(this.pageSize/2)}get groupCount(){return this.options.getGroupCount()}get isVerticalGrouping(){return this.options.isVerticalGrouping()}get defaultState(){return{prevPosition:0,startIndex:-1,itemCount:0,virtualItemCountBefore:0,virtualItemCountAfter:0,outlineCountBefore:0,outlineCountAfter:0,virtualItemSizeBefore:0,virtualItemSizeAfter:0,outlineSizeBefore:0,outlineSizeAfter:0}}get maxScrollPosition(){return this.getTotalItemCount()*this.itemSize-this.viewportSize}get position(){return this._position}set position(e){this._position=e}needUpdateState(e){const{prevPosition:n,startIndex:i}=this.state;if(i<0)return!0;let r=!1;if(this._validateAndSavePosition(e)){if(e===0||e===this.maxScrollPosition)return!0;const a=Math.floor(n/this.itemSize),l=Math.floor(e/this.itemSize);r=Math.abs(a-l)>=this.outlineCount}return r}_validateAndSavePosition(e){if(!M(e))return!1;const n=this.position!==e;return this.position=e,n}_correctPosition(e){return e>=0?Math.min(e,this.maxScrollPosition):-1}updateState(e,n){if(e=this._correctPosition(e),!this.needUpdateState(e)&&!n)return!1;const i=this._calcItemInfoBefore(e),s=this._calcItemDeltaBefore(i),{outlineCountAfter:r,virtualItemCountAfter:o,itemCountWithAfter:a}=this._calcItemInfoAfter(s),{virtualItemCountBefore:l,outlineCountBefore:c}=i,u=c+a+r,d=Math.floor(e/this.itemSize);return this.state.prevPosition=d*this.itemSize,this.state.startIndex=d-c,this.state.virtualItemCountBefore=l,this.state.outlineCountBefore=c,this.state.itemCount=u,this.state.outlineCountAfter=r,this.state.virtualItemCountAfter=o,this._updateStateCore(),!0}reinitState(e,n){const{position:i}=this;this.itemSize=e,this.updateState(0,n),i>0&&this.updateState(i,n)}_calcItemInfoBefore(e){let n=Math.floor(e/this.itemSize);const i=Math.min(n,this.outlineCount);return n-=i,{virtualItemCountBefore:n,outlineCountBefore:i}}_calcItemDeltaBefore(e){const{virtualItemCountBefore:n,outlineCountBefore:i}=e;return this.getTotalItemCount()-n-i}getTotalItemCount(){throw"getTotalItemCount method should be implemented"}getRenderState(){throw"getRenderState method should be implemented"}_calcItemInfoAfter(e){const n=e>=this.pageSize?this.pageSize:e;let i=e-n;const s=i>0?Math.min(i,this.outlineCount):0;return i>0&&(i-=s),{virtualItemCountAfter:i,outlineCountAfter:s,itemCountWithAfter:n}}_updateStateCore(){const{state:e}=this,{virtualItemCountBefore:n}=e,{virtualItemCountAfter:i}=e,{outlineCountBefore:s}=e,{outlineCountAfter:r}=e,o=e.virtualItemSizeBefore,a=e.virtualItemSizeAfter,l=e.outlineSizeBefore,c=e.outlineSizeAfter,u=this.itemSize*n,d=this.itemSize*i,p=this.itemSize*s,f=this.itemSize*r,g=o+l,y=u+p,v=a+c,C=d+f,x=g<y,S=v<C;(this._itemSizeChanged||x||S)&&this._updateStateVirtualItems(u,d)}_updateStateVirtualItems(e,n){const{state:i}=this;i.virtualItemSizeBefore=e,i.virtualItemSizeAfter=n}}class aoe extends EN{constructor(e){super(L({},e,{itemSize:e.rowHeight,viewportSize:e.viewportHeight}))}get prevTopPosition(){return this.state.prevPosition}get rowCount(){return this.state.itemCount}get topVirtualRowCount(){return this.state.virtualItemCountBefore}get bottomVirtualRowCount(){return this.state.virtualItemCountAfter}getTotalItemCount(){return this.options.getTotalRowCount(this.groupCount,this.isVerticalGrouping)}getRenderState(){return{topVirtualRowHeight:this.state.virtualItemSizeBefore,bottomVirtualRowHeight:this.state.virtualItemSizeAfter,startRowIndex:this.state.startIndex,rowCount:this.state.itemCount,startIndex:this.state.startIndex}}}class loe extends EN{constructor(e){super(L({},e,{itemSize:e.cellWidth,viewportSize:e.viewportWidth}))}get isRTL(){return this.options.isRTL()}getTotalItemCount(){return this.options.getTotalCellCount(this.groupCount,this.isVerticalGrouping)}getRenderState(){return{leftVirtualCellWidth:this.state.virtualItemSizeBefore,rightVirtualCellWidth:this.state.virtualItemSizeAfter,startCellIndex:this.state.startIndex,cellCount:this.state.itemCount,cellWidth:this.itemSize}}_updateStateVirtualItems(e,n){if(!this.isRTL)super._updateStateVirtualItems(e,n);else{const{state:i}=this;i.virtualItemSizeAfter=e,i.virtualItemSizeBefore=n,i.startIndex=this.getTotalItemCount()-this.startIndex-this.state.itemCount}}}class coe{constructor(e){this._workspace=e,this._renderAppointmentTimeoutID=null}getRenderTimeout(){return 15}get workspace(){return this._workspace}updateRender(){this._renderGrid(),this._renderAppointments()}_renderGrid(){this.workspace.renderWorkSpace(!1)}_renderAppointments(){const e=this.getRenderTimeout();e>=0?(clearTimeout(this._renderAppointmentTimeoutID),this._renderAppointmentTimeoutID=setTimeout(()=>this.workspace.updateAppointments(),e)):this.workspace.updateAppointments()}}const TN=1;class uoe{constructor(e){this._workSpace=e}prepareCellIndexes(e,n,i){return this._workSpace.isGroupedByDate()?{rowIndex:e.rowIndex,columnIndex:e.columnIndex*this._workSpace._getGroupCount()+n}:{rowIndex:e.rowIndex,columnIndex:e.columnIndex+n*this._workSpace._getCellCount()}}getGroupIndex(e,n){const i=this._workSpace.isGroupedByDate(),s=this._workSpace._getGroupCount();return i?n%s:Math.floor(n/this._workSpace._getCellCount())}calculateHeaderCellRepeatCount(){return this._workSpace._getGroupCount()||1}insertAllDayRowsIntoDateTable(){return!1}getTotalCellCount(e){return e=e||1,this._workSpace._getCellCount()*e}getTotalRowCount(){return this._workSpace._getRowCount()}calculateTimeCellRepeatCount(){return 1}getWorkSpaceMinWidth(){return ke(this._workSpace.$element().get(0)).width-this._workSpace.getTimePanelWidth()-2*TN}getAllDayOffset(){return this._workSpace.getAllDayHeight()}getGroupCountClass(e){}getLeftOffset(){return this._workSpace.getTimePanelWidth()}_createGroupBoundOffset(e,n,i){const s=i/2,r=e?e.offset().left-s:0,o=n?n.offset().left+i+s:0;return{left:r,right:o,top:0,bottom:0}}_getGroupedByDateBoundOffset(e,n){const i=e.length-1,s=e.eq(0),r=e.eq(i);return this._createGroupBoundOffset(s,r,n)}getGroupBoundsOffset(e,n,i,s,r){if(this._workSpace.isGroupedByDate())return this._getGroupedByDateBoundOffset(n,i);let o,a;const l=this._workSpace.getCellIndexByCoordinates(s),c=s.groupIndex||Math.floor(l/e),u=r.dateTableGroupedMap[c];if(u){const d=u[0].length,p=u[0][0].position,f=u[0][d-1].position;o=n.eq(p.columnIndex),a=n.eq(f.columnIndex)}return this._createGroupBoundOffset(o,a,i)}shiftIndicator(e,n,i,s){const r=this._getIndicatorOffset(s),o=i?i-r:r;e.css("left",o),e.css("top",n)}_getIndicatorOffset(e){return this._workSpace.isGroupedByDate()?this._calculateGroupByDateOffset(e):this._calculateOffset(e)}_calculateOffset(e){const n=this._workSpace.getIndicatorOffset(e),i=this._workSpace._getCellCount()*this._workSpace.getRoundedCellWidth(e-1,0)*e;return n+i}_calculateGroupByDateOffset(e){return this._workSpace.getIndicatorOffset(0)*this._workSpace._getGroupCount()+this._workSpace.getRoundedCellWidth(e-1,0)*e}getShaderOffset(e,n){const i=this._workSpace._getCellCount()*this._workSpace.getRoundedCellWidth(e-1)*e;return this._workSpace.option("rtlEnabled")?ke(this._workSpace._dateTableScrollable.$content().get(0)).width-i-this._workSpace.getTimePanelWidth()-n:i}getShaderTopOffset(e){return-this.getShaderMaxHeight()*(e>0?1:0)}getShaderHeight(){return this._workSpace.getIndicationHeight()}getShaderMaxHeight(){return ke(this._workSpace._dateTableScrollable.$content().get(0)).height}getShaderWidth(e){return this._workSpace.getIndicationWidth(e)}getScrollableScrollTop(e){return e?0:this._workSpace.getScrollable().scrollTop()}addAdditionalGroupCellClasses(e,n,i,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return e=this._addLastGroupCellClass(e,n,r),this._addFirstGroupCellClass(e,n,r)}_addLastGroupCellClass(e,n,i){if(i)return`${e} ${um}`;if(this._workSpace.isGroupedByDate()){if(n%this._workSpace._getGroupCount()===0)return`${e} ${um}`}else if(n%this._workSpace._getCellCount()===0)return`${e} ${um}`;return e}_addFirstGroupCellClass(e,n,i){if(i)return`${e} ${dm}`;if(this._workSpace.isGroupedByDate()){if((n-1)%this._workSpace._getGroupCount()===0)return`${e} ${dm}`}else if((n-1)%this._workSpace._getCellCount()===0)return`${e} ${dm}`;return e}}class pO{constructor(e){this._workSpace=e,this.cache=new bN}prepareCellIndexes(e,n,i){let s=e.rowIndex+n*this._workSpace._getRowCount();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(s+=n,i||(s+=1)),{rowIndex:s,columnIndex:e.columnIndex}}getGroupIndex(e){return Math.floor(e/this._workSpace._getRowCount())}calculateHeaderCellRepeatCount(){return 1}insertAllDayRowsIntoDateTable(){return this._workSpace.option("showAllDayPanel")}getTotalCellCount(){return this._workSpace._getCellCount()}getTotalRowCount(){return this._workSpace._getRowCount()*this._workSpace._getGroupCount()}calculateTimeCellRepeatCount(){return this._workSpace._getGroupCount()||1}getWorkSpaceMinWidth(){let e=this._workSpace._getWorkSpaceWidth();const i=ke(this._workSpace.$element().get(0)).width-this._workSpace.getTimePanelWidth()-this._workSpace.getGroupTableWidth()-2*TN;return e<i&&(e=i),e}getAllDayOffset(){return 0}getGroupCountClass(e){return L$(e)}getLeftOffset(){return this._workSpace.getTimePanelWidth()+this._workSpace.getGroupTableWidth()}getGroupBoundsOffset(e,n){let[i,s]=n;return this.cache.get(`groupBoundsOffset${e}`,()=>{const r=this._workSpace.option("startDayHour"),o=this._workSpace.option("endDayHour"),a=this._workSpace.option("hoursInterval"),l=_S(r,o)/a*this._workSpace.getCellHeight(),c=this.getScrollableScrollTop(),u=ke(this._workSpace._$headerPanelContainer.get(0)).height;let d=e*l+u+this._workSpace.option("getHeaderHeight")()-c;this._workSpace.option("showAllDayPanel")&&this._workSpace.supportAllDayRow()&&(d+=this._workSpace.getCellHeight()*(e+1));const p=d+l,{left:f}=i.getBoundingClientRect(),{right:g}=s.getBoundingClientRect();return this._groupBoundsOffset={left:f,right:g,top:d,bottom:p},this._groupBoundsOffset})}shiftIndicator(e,n,i,s){const r=this._workSpace.getIndicatorOffset(0),o=this._workSpace.option("crossScrollingEnabled")?0:this._workSpace.getGroupTableWidth(),a=i?i-r:r;let l=this._workSpace._getRowCount()*this._workSpace.getCellHeight()*s;this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(l+=this._workSpace.getAllDayHeight()*(s+1)),e.css("left",a+o),e.css("top",n+l)}getShaderOffset(e,n){const i=this._workSpace.option("crossScrollingEnabled")?0:this._workSpace.getGroupTableWidth();return this._workSpace.option("rtlEnabled")?ke(this._$container.get(0)).width-i-this._workSpace.getWorkSpaceLeftOffset()-n:i}getShaderTopOffset(e){return 0}getShaderHeight(){let e=this._workSpace.getIndicationHeight();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(e+=this._workSpace.getCellHeight()),e}getShaderMaxHeight(){let e=this._workSpace._getRowCount()*this._workSpace.getCellHeight();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(e+=this._workSpace.getCellHeight()),e}getShaderWidth(){return this._workSpace.getIndicationWidth(0)}getScrollableScrollTop(){return this._workSpace.getScrollable().scrollTop()}addAdditionalGroupCellClasses(e,n,i,s){return e=this._addLastGroupCellClass(e,i+1),this._addFirstGroupCellClass(e,i+1)}_addLastGroupCellClass(e,n){return n%this._workSpace._getRowCount()===0?`${e} ${um}`:e}_addFirstGroupCellClass(e,n){return(n-1)%this._workSpace._getRowCount()===0?`${e} ${dm}`:e}}const doe=["startDate","endDate","isFirstGroupCell","isLastGroupCell"];class hoe{constructor(e){this._viewDataGenerator=e}getCompleteDateHeaderMap(e,n){const{isGenerateWeekDaysHeaderData:i}=e,s=[];if(i){const o=this._generateWeekDaysHeaderRowMap(e,n);s.push(o)}const r=this._generateHeaderDateRow(e,n);return s.push(r),s}_generateWeekDaysHeaderRowMap(e,n){const{isGroupedByDate:i,groups:s,groupOrientation:r,startDayHour:o,endDayHour:a,hoursInterval:l,isHorizontalGrouping:c,intervalCount:u,viewOffset:d}=e,p=this._viewDataGenerator.getCellCountInDay(o,a,l),f=Nv(s,r),g=n[0][0].allDay?1:0,y=i?f*p:p,v=Kr(s),C=c&&!i?v:1,S=this._viewDataGenerator.daysInInterval*u*C,O=[];for(let H=0;H<S;H+=1){const F=n[g][H*y],I=De.addOffsetsWithoutDST(F.startDate,-d);O.push(L({},F,{colSpan:y,text:$_(I),isFirstGroupCell:!1,isLastGroupCell:!1}))}return O}_generateHeaderDateRow(e,n){const{today:i,isGroupedByDate:s,groupOrientation:r,groups:o,headerCellTextFormat:a,getDateForHeaderText:l,interval:c,startViewDate:u,startDayHour:d,endDayHour:p,hoursInterval:f,intervalCount:g,currentDate:y,viewType:v,viewOffset:C}=e,x=Nv(o,r),S=n[0][0].allDay?1:0,O=s?x:1,H=r==="vertical",F=this._viewDataGenerator.getCellCount({intervalCount:g,currentDate:y,viewType:v,hoursInterval:f,startDayHour:d,endDayHour:p}),I=this._viewDataGenerator.getCellCountInDay(d,p,f),w=s?n[S].filter((k,P)=>P%x===0):n[S],A=!B_(v)||v===_t.TIMELINE_MONTH;return w.map((k,P)=>{let{startDate:$,isFirstGroupCell:R,isLastGroupCell:Ae}=k,vt=Mt(k,doe);const Qt=De.addOffsetsWithoutDST($,-C),an=A?Qt:$,ne=cZ(P%F,an,a,l,{interval:c,startViewDate:u,startDayHour:d,cellCountInDay:I,viewOffset:C});return L({},vt,{startDate:$,text:ne,today:V.sameDate(Qt,i),colSpan:O,isFirstGroupCell:s||R&&!H,isLastGroupCell:s||Ae&&!H})})}generateDateHeaderData(e,n,i){const{isGenerateWeekDaysHeaderData:s,cellWidth:r,isProvideVirtualCellsWidth:o,startDayHour:a,endDayHour:l,hoursInterval:c,isMonthDateHeader:u}=i,d=[];let p={};const f=r||0;s&&(p=this._generateDateHeaderDataRow(i,e,n,this._viewDataGenerator.getCellCountInDay(a,l,c),0,f),d.push(p.dateRow));const g=this._generateDateHeaderDataRow(i,e,n,1,s?1:0,f);return d.push(g.dateRow),{dataMap:d,leftVirtualCellWidth:o?g.leftVirtualCellWidth:void 0,rightVirtualCellWidth:o?g.rightVirtualCellWidth:void 0,leftVirtualCellCount:g.leftVirtualCellCount,rightVirtualCellCount:g.rightVirtualCellCount,weekDayLeftVirtualCellWidth:p.leftVirtualCellWidth,weekDayRightVirtualCellWidth:p.rightVirtualCellWidth,weekDayLeftVirtualCellCount:p.leftVirtualCellCount,weekDayRightVirtualCellCount:p.rightVirtualCellCount,isMonthDateHeader:u}}_generateDateHeaderDataRow(e,n,i,s,r,o){const{startCellIndex:a,cellCount:l,isProvideVirtualCellsWidth:c,groups:u,groupOrientation:d,isGroupedByDate:p}=e,f=Nv(u,d),g=p?f*s:s,y=Math.floor(a/g),v=H$(l,i),C=Math.ceil((a+v)/g),x=yS(i),S=n[r].slice(y,C),O=y*g,H=O*o,F=x-C*g,I=F*o;return{dateRow:S,leftVirtualCellCount:O,leftVirtualCellWidth:c?H:void 0,rightVirtualCellCount:F,rightVirtualCellWidth:c?I:void 0}}}const fO=V.dateToMilliseconds;class mO{constructor(e,n,i,s){this.groupedDataMap=e.generateGroupedDataMap(n),this.completeViewDataMap=i,this._viewOptions=s}getGroupStartDate(e){var n;const i=this.getFirstGroupRow(e);return(i==null||(n=i[0])===null||n===void 0||(n=n.cellData)===null||n===void 0?void 0:n.startDate)??null}getGroupEndDate(e){const n=this.getLastGroupRow(e);if(n){const i=n.length-1,{cellData:s}=n[i],{endDate:r}=s;return r}}findGroupCellStartDate(e,n,i,s){const r=this.getGroupFromDateTableGroupMap(e),o=(c,u)=>{const{cellData:d}=r[c][u];let{startDate:p,endDate:f}=d;if(s&&(p=V.trimTime(p),f=V.setToDayEnd(p)),V.intervalsOverlap({firstMin:n,firstMax:i,secondMin:p,secondMax:f}))return p},a=(()=>{const c=r[0].length;for(let u=0;u<c;++u)for(let d=0;d<r.length;++d){const p=o(d,u);if(p)return p}})(),l=(()=>{for(let c=0;c<r.length;++c){const u=r[c];for(let d=0;d<u.length;++d){const p=o(c,d);if(p)return p}}})();return a>l?l:a}findAllDayGroupCellStartDate(e){var n;const i=this.getGroupFromDateTableGroupMap(e),s=i==null||(n=i[0])===null||n===void 0||(n=n[0])===null||n===void 0?void 0:n.cellData;return(s==null?void 0:s.startDate)??null}findCellPositionInMap(e,n){const{groupIndex:i,startDate:s,isAllDay:r,index:o}=e,{allDayPanelGroupedMap:a,dateTableGroupedMap:l}=this.groupedDataMap,{viewOffset:c}=this._viewOptions,u=r&&!this._viewOptions.isVerticalGrouping?a[i]?[a[i]]:[]:l[i]||[];for(let d=0;d<u.length;d+=1){const p=u[d];for(let f=0;f<p.length;f+=1){const g=p[f],y=g.cellData,v=n?L({},y,{startDate:he.addOffsets(g.cellData.startDate,[-c]),endDate:he.addOffsets(g.cellData.endDate,[-c])}):y;if(this._isSameGroupIndexAndIndex(v,i,o)&&this.isStartDateInCell(s,r,v,y))return g.position}}}isStartDateInCell(e,n,i,s){let{startDate:r,endDate:o,allDay:a}=i,{startDate:l,endDate:c}=s;const{viewType:u}=this._viewOptions,d=this.getCellSecondIntervalOffset(l,c),p=d!==0;switch(!0){case!ol(u):case(n&&a):return V.sameDate(e,r);case(!n&&!p):return e>=r&&e<o;case(!n&&p):return this.isStartDateInTwoIntervalsCell(e,d,r,o);default:return!1}}getCellSecondIntervalOffset(e,n){const i=he.addOffsets(e,[fO("hour")]),s=De.getDaylightOffset(e,n),r=De.getDaylightOffset(e,i),o=s!==0,a=r<0;return!o&&a?Math.abs(r*fO("minute")):0}isStartDateInTwoIntervalsCell(e,n,i,s){const r=he.addOffsets(i,[n]),o=he.addOffsets(s,[n]),a=e>=i&&e<s,l=e>=r&&e<o;return a||l}_isSameGroupIndexAndIndex(e,n,i){return e.groupIndex===n&&(i===void 0||e.index===i)}getCellsGroup(e){const{dateTableGroupedMap:n}=this.groupedDataMap,i=n[e];if(i){const{cellData:s}=i[0][0];return s.groups}}getCompletedGroupsInfo(){const{dateTableGroupedMap:e}=this.groupedDataMap;return e.map(n=>{const i=n[0][0],{allDay:s,groupIndex:r}=i.cellData;return{allDay:s,groupIndex:r,startDate:this.getGroupStartDate(r),endDate:this.getGroupEndDate(r)}}).filter(n=>{let{startDate:i}=n;return!!i})}getGroupIndices(){return this.getCompletedGroupsInfo().map(e=>{let{groupIndex:n}=e;return n})}getGroupFromDateTableGroupMap(e){const{dateTableGroupedMap:n}=this.groupedDataMap;return n[e]}getFirstGroupRow(e){const n=this.getGroupFromDateTableGroupMap(e);if(n){const{cellData:i}=n[0][0];return i.allDay?n[1]:n[0]}}getLastGroupRow(e){const{dateTableGroupedMap:n}=this.groupedDataMap,i=n[e];if(i){const s=i.length-1;return i[s]}}getLastGroupCellPosition(e){const n=this.getLastGroupRow(e);return n==null?void 0:n[(n==null?void 0:n.length)-1].position}getRowCountInGroup(e){const n=this.getLastGroupRow(e),i=n.length;return(n[i-1].cellData.index+1)/n.length}}const td=(t,e)=>{if(!Number.isInteger(t))throw Error(`Passed integer value ${t} is not an integer.`);if(!Number.isInteger(e))throw Error(`Passed module value ${e} is not an integer.`);if(e<=0)throw Error(`Passed module value ${e} must be > 0.`);const n=t%e;switch(!0){case n===0:return 0;case n>0:return n;case n<0:return e+n;default:throw Error(`Unexpected division (${t} % ${e}) occurred.`)}},poe=["allDay","startDate","endDate","groups","groupIndex","isFirstGroupCell","isLastGroupCell","index"],xa=V.dateToMilliseconds;class foe{constructor(e){this._viewDataGenerator=e}getCompleteTimePanelMap(e,n){const{startViewDate:i,cellDuration:s,startDayHour:r,isVerticalGrouping:o,intervalCount:a,currentDate:l,viewType:c,hoursInterval:u,endDayHour:d,viewOffset:p,today:f,showCurrentTimeIndicator:g}=e,y=n.length-1,v=n[y][n[y].length-1].endDate,C=this._viewDataGenerator.getRowCount({intervalCount:a,currentDate:l,viewType:c,hoursInterval:u,startDayHour:r,endDayHour:d}),x=this._viewDataGenerator.getCellCount({intervalCount:a,currentDate:l,viewType:c,hoursInterval:u,startDayHour:r,endDayHour:d});let S=0,O=0;return n.map((H,F)=>{const I=H[0],{allDay:w,startDate:A,groups:k,groupIndex:P,isFirstGroupCell:$,isLastGroupCell:R,index:Ae}=I,vt=Mt(I,poe),Qt=w?!1:this.isTimeCellShouldBeHighlighted(f,p,{startViewDate:i,realEndViewDate:v,showCurrentTimeIndicator:g},{date:A,index:O,duration:Math.round(s),isFirst:O===0,isLast:this.isLastCellInGroup(n,F)});w?(S+=1,O=0):O+=1;const an=(F-S)%C;return L({},vt,{startDate:A,allDay:w,highlighted:Qt,text:vg.getTimePanelCellText(an,A,i,s,r,p),groups:o?k:void 0,groupIndex:o?P:void 0,isFirstGroupCell:o&&$,isLastGroupCell:o&&R,index:Math.floor(Ae/x)})})}generateTimePanelData(e,n){const{startRowIndex:i,rowCount:s,topVirtualRowHeight:r,bottomVirtualRowHeight:o,isGroupedAllDayPanel:a,isVerticalGrouping:l,isAllDayPanelVisible:c}=n,d=i+(l||!c?0:1),p=v0(s,e),f=e.slice(d,d+p),g={topVirtualRowHeight:r,bottomVirtualRowHeight:o,isGroupedAllDayPanel:a},{previousGroupedData:y}=this._generateTimePanelDataFromMap(f,l);return g.groupedData=y,g}_generateTimePanelDataFromMap(e,n){return e.reduce((i,s)=>{let{previousGroupIndex:r,previousGroupedData:o}=i;const a=s.groupIndex;return a!==r&&o.push({dateTable:[],isGroupedAllDayPanel:K$(!!s.allDay,n),groupIndex:a,key:j$(a,n)}),s.allDay?o[o.length-1].allDayPanel=s:o[o.length-1].dateTable.push(s),{previousGroupIndex:a,previousGroupedData:o}},{previousGroupIndex:-1,previousGroupedData:[]})}isTimeCellShouldBeHighlighted(e,n,i,s){let{startViewDate:r,realEndViewDate:o,showCurrentTimeIndicator:a}=i;const l=he.addOffsets(e,[n]),c=he.addOffsets(r,[n]);if(!a||l<c||l>=o)return!1;const u=this.getLocalDateTimeInMs(l),[d,p]=this.getHighlightedInterval(s);return d<p?u>=d&&u<p:u>=d&&u<xa("day")||u>=0&&u<p}getHighlightedInterval(e){let{date:n,index:i,duration:s,isFirst:r,isLast:o}=e;const a=this.getLocalDateTimeInMs(n),l=i%2===0;switch(!0){case(r||o&&!l):return[a,td(a+s,xa("day"))];case l:return[td(a-s,xa("day")),td(a+s,xa("day"))];default:return[a,td(a+2*s,xa("day"))]}}getLocalDateTimeInMs(e){const n=e.getTime()-e.getTimezoneOffset()*xa("minute");return td(n,xa("day"))}isLastCellInGroup(e,n){if(n===e.length-1)return!0;const{groupIndex:i}=e[n][0],{groupIndex:s,allDay:r}=e[n+1][0];return r||s!==i}}const jl=V.dateToMilliseconds;class pp{constructor(){this.daysInInterval=1,this.isWorkView=!1,this.tableAllDay=!1}isSkippedDate(e){return!1}_calculateStartViewDate(e){}getStartViewDate(e){return this._calculateStartViewDate(e)}getCompleteViewDataMap(e){const{groups:n,isGroupedByDate:i,isHorizontalGrouping:s,isVerticalGrouping:r,intervalCount:o,currentDate:a,viewType:l,startDayHour:c,endDayHour:u,hoursInterval:d}=e;this._setVisibilityDates(e),this.setHiddenInterval(c,u,d);const p=UR(n),f=this.getCellCount({intervalCount:o,currentDate:a,viewType:l,startDayHour:c,endDayHour:u,hoursInterval:d}),g=this.getRowCount({intervalCount:o,currentDate:a,viewType:l,hoursInterval:d,startDayHour:c,endDayHour:u});let y=[];const v=this._generateAllDayPanelData(e,g,f),C=this._generateViewCellsData(e,g,f);return v&&y.push(v),y.push(...C),s&&!i&&(y=this._transformViewDataMapForHorizontalGrouping(y,p)),r&&(y=this._transformViewDataMapForVerticalGrouping(y,p)),i&&(y=this._transformViewDataMapForGroupingByDate(y,p)),this._addKeysToCells(y)}_transformViewDataMapForHorizontalGrouping(e,n){const i=e.map(s=>s.slice());return n.slice(1).forEach((s,r)=>{const o=r+1;e.forEach((a,l)=>{const c=a.map(u=>L({},u,{groups:s,groupIndex:o}));i[l].push(...c)})}),i}_transformViewDataMapForVerticalGrouping(e,n){const i=e.map(s=>s.slice());return n.slice(1).forEach((s,r)=>{const o=r+1,a=e.map(l=>l.map(u=>L({},u,{groupIndex:o,groups:s})));i.push(...a)}),i}_transformViewDataMapForGroupingByDate(e,n){const i=n.slice(1),s=i.length;return e.map(o=>o.reduce((l,c)=>[...l,L({},c,{isFirstGroupCell:!0,isLastGroupCell:s===0}),...i.map((d,p)=>L({},c,{groups:d,groupIndex:p+1,isFirstGroupCell:!1,isLastGroupCell:p===s-1}))],[]))}_addKeysToCells(e){const n=e[0].length,{currentViewDataMap:i}=e.reduce((s,r,o)=>{let{allDayPanelsCount:a,currentViewDataMap:l}=s;const c=r[0].allDay,u=(o-a)*n,d=c?a+1:a;return l[o].forEach((p,f)=>{p.key=u+f}),{allDayPanelsCount:d,currentViewDataMap:l}},{allDayPanelsCount:0,currentViewDataMap:e});return i}generateViewDataMap(e,n){const{rowCount:i,startCellIndex:s,startRowIndex:r,cellCount:o,isVerticalGrouping:a,isAllDayPanelVisible:l}=n,c=(g,y,v,C)=>{const x=C!==void 0?v+C:void 0;return g.slice(v,x).map((S,O)=>({cellData:S,position:{rowIndex:y,columnIndex:O}}))};let u=r,d=[];this._isStandaloneAllDayPanel(a,l)&&(u++,d=c(e[0],0,s,o));const p=v0(i,e),f=e.slice(u,u+p).map((g,y)=>c(g,y,s,o));return{allDayPanelMap:d,dateTableMap:f}}_isStandaloneAllDayPanel(e,n){return!e&&n}getViewDataFromMap(e,n,i){const{topVirtualRowHeight:s,bottomVirtualRowHeight:r,leftVirtualCellWidth:o,rightVirtualCellWidth:a,cellCount:l,rowCount:c,startRowIndex:u,startCellIndex:d,isProvideVirtualCellsWidth:p,isGroupedAllDayPanel:f,isVerticalGrouping:g,isAllDayPanelVisible:y}=i,{allDayPanelMap:v,dateTableMap:C}=n,{groupedData:x}=C.reduce((I,w)=>{let{previousGroupIndex:A,groupedData:k}=I;const P=w.map(vt=>{let{cellData:Qt}=vt;return Qt}),$=P[0],R=$.allDay,Ae=$.groupIndex;return Ae!==A&&k.push({dateTable:[],isGroupedAllDayPanel:K$(!!R,g),groupIndex:Ae,key:j$(Ae,g)}),R?k[k.length-1].allDayPanel=P:k[k.length-1].dateTable.push({cells:P,key:P[0].key-d}),{groupedData:k,previousGroupIndex:Ae}},{previousGroupIndex:-1,groupedData:[]});this._isStandaloneAllDayPanel(g,y)&&(x[0].allDayPanel=v.map(I=>{let{cellData:w}=I;return w}));const S=yS(e),O=U$(e),H=H$(l,e),F=v0(c,e);return{groupedData:x,topVirtualRowHeight:s,bottomVirtualRowHeight:r,leftVirtualCellWidth:p?o:void 0,rightVirtualCellWidth:p?a:void 0,isGroupedAllDayPanel:f,leftVirtualCellCount:d,rightVirtualCellCount:l===void 0?0:S-d-H,topVirtualRowCount:u,bottomVirtualRowCount:O-u-F}}_generateViewCellsData(e,n,i){const s=[];for(let r=0;r<n;r+=1)s.push(this._generateCellsRow(e,!1,r,n,i));return s}_generateAllDayPanelData(e,n,i){return e.isAllDayPanelVisible?this._generateCellsRow(e,!0,0,n,i):null}_generateCellsRow(e,n,i,s,r){const o=[];for(let a=0;a<r;++a){const l=this.getCellData(i,a,e,n);l.index=i*r+a,l.isFirstGroupCell=this._isFirstGroupCell(i,a,e,s,r),l.isLastGroupCell=this._isLastGroupCell(i,a,e,s,r),o.push(l)}return o}getCellData(e,n,i,s){return s?this.prepareAllDayCellData(i,e,n):this.prepareCellData(i,e,n)}prepareCellData(e,n,i){const{groups:s,startDayHour:r,endDayHour:o,hoursInterval:a}=e,l=UR(s),c=this.getDateByCellIndices(e,n,i,this.getCellCountInDay(r,o,a)),u=this.getCellEndDate(c,e),d={startDate:c,endDate:u,allDay:this.tableAllDay,groupIndex:0};return l.length>0&&(d.groups=l[0]),d}prepareAllDayCellData(e,n,i){const s=this.prepareCellData(L({},e,{viewOffset:0}),n,i),{viewOffset:r}=e,o=V.trimTime(s.startDate),a=he.addOffsets(o,[r]);return L({},s,{startDate:a,endDate:a,allDay:!0})}getDateByCellIndices(e,n,i,s){let{startViewDate:r}=e;const{startDayHour:o,interval:a,firstDayOfWeek:l,intervalCount:c,viewOffset:u}=e,d=r.getHours()!==Math.floor(o);if(d){const O=hZ(r,o);r=new Date(O.getTime()-jl("day"))}const p=this.getCellCount(e),f=this.getRowCount(e),g=this._calculateCellIndex(n,i,f,p),y=this.getMillisecondsOffset(g,a,s),v=this.isWorkView?this.getTimeOffsetByColumnIndex(i,this.getFirstDayOfWeek(l),p,c):0,C=r.getTime(),x=new Date(C+y+v+u),S=d?0:V.getTimezonesDifference(r,x);return x.setTime(x.getTime()+S),x}getMillisecondsOffset(e,n,i){const r=Math.floor(e/i)*this.hiddenInterval;return n*e+r}getTimeOffsetByColumnIndex(e,n,i,s){const r=Math.max(0,n-1),o=i/s;return 2*Math.floor((e+r)/o)*jl("day")}calculateEndDate(e,n,i){return this.getCellEndDate(e,{interval:n})}_calculateCellIndex(e,n,i,s){return dZ(e,n,i)}generateGroupedDataMap(e){const{allDayPanelMap:n,dateTableMap:i}=e,{previousGroupedDataMap:s}=i.reduce((o,a)=>{const{previousGroupedDataMap:l,previousRowIndex:c,previousGroupIndex:u}=o,{groupIndex:d}=a[0].cellData,p=d===u?c+1:0;return a.forEach(f=>{const{groupIndex:g}=f.cellData;l[g]||(l[g]=[]),l[g][p]||(l[g][p]=[]),l[g][p].push(f)}),{previousGroupedDataMap:l,previousRowIndex:p,previousGroupIndex:d}},{previousGroupedDataMap:[],previousRowIndex:-1,previousGroupIndex:-1}),r=[];return n==null||n.forEach(o=>{const{groupIndex:a}=o.cellData;r[a]||(r[a]=[]),r[a].push(o)}),{allDayPanelGroupedMap:r,dateTableGroupedMap:s}}_isFirstGroupCell(e,n,i,s,r){const{groupOrientation:o,groups:a,isGroupedByDate:l}=i,c=Kr(a);return l?n%c===0:o===gk?n%r===0:e%s===0}_isLastGroupCell(e,n,i,s,r){const{groupOrientation:o,groups:a,isGroupedByDate:l}=i,c=Kr(a);return l?(n+1)%c===0:o===gk?(n+1)%r===0:(e+1)%s===0}markSelectedAndFocusedCells(e,n){const{selectedCells:i,focusedCell:s}=n;if(!i&&!s)return e;const{allDayPanelMap:r,dateTableMap:o}=e,a=o.map(c=>this._markSelectedAndFocusedCellsInRow(c,i,s));return{allDayPanelMap:this._markSelectedAndFocusedCellsInRow(r,i,s),dateTableMap:a}}_markSelectedAndFocusedCellsInRow(e,n,i){return e.map(s=>{const{index:r,groupIndex:o,allDay:a,startDate:l}=s.cellData,c=n.findIndex(d=>{let{index:p,groupIndex:f,allDay:g,startDate:y}=d;return o===f&&(r===p||p===void 0&&l.getTime()===y.getTime())&&!!a==!!g}),u=!!i&&r===i.cellData.index&&o===i.cellData.groupIndex&&a===i.cellData.allDay;return!u&&c===-1?s:L({},s,{cellData:L({},s.cellData,{isSelected:c>-1,isFocused:u})})})}getInterval(e){return e*jl("hour")}_getIntervalDuration(e){return jl("day")*e}_setVisibilityDates(e){}getCellCountInDay(e,n,i){const s=_S(e,n)/i;return Math.ceil(s)}getCellCount(e){const{intervalCount:n,viewType:i,startDayHour:s,endDayHour:r,hoursInterval:o}=e,a=this.getCellCountInDay(s,r,o),l=y0(i)?a:1;return this.daysInInterval*n*l}getRowCount(e){const{viewType:n,startDayHour:i,endDayHour:s,hoursInterval:r}=e,o=this.getCellCountInDay(i,s,r);return y0(n)?1:o}setHiddenInterval(e,n,i){this.hiddenInterval=jl("day")-this.getVisibleDayDuration(e,n,i)}getVisibleDayDuration(e,n,i){const s=this.getCellCountInDay(e,n,i);return i*s*jl("hour")}getFirstDayOfWeek(e){return e}getCellEndDate(e,n){const i=Math.round(n.interval);return De.addOffsetsWithoutDST(e,i)}}class moe extends pp{_calculateStartViewDate(e){return qQ.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount))}}const gO=V.dateToMilliseconds;class goe extends pp{constructor(){super(...arguments),this.tableAllDay=void 0}getCellData(e,n,i,s){const{indicatorTime:r,timeZoneCalculator:o,intervalCount:a,viewOffset:l}=i,c=super.getCellData(e,n,i,!1),u=De.addOffsetsWithoutDST(c.startDate,-l);return c.today=this.isCurrentDate(u,r,o),c.otherMonth=this.isOtherMonth(u,this._minVisibleDate,this._maxVisibleDate),c.firstDayOfMonth=z$(u,a),c.text=wo.getCellText(u,a),c}isCurrentDate(e,n,i){return V.sameDate(e,q$(n,i))}isOtherMonth(e,n,i){return!V.dateInRange(e,n,i,"date")}_calculateCellIndex(e,n,i,s){return wo.calculateCellIndex(e,n,i,s)}calculateEndDate(e,n,i){return oa(e,i)}getInterval(){return gO("day")}_calculateStartViewDate(e){return wo.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,e.intervalCount,this.getFirstDayOfWeek(e.firstDayOfWeek))}_setVisibilityDates(e){const{intervalCount:n,startDate:i,currentDate:s}=e,r=V.getFirstMonthDate(i),o=wo.getViewStartByOptions(i,s,n,r);this._minVisibleDate=new Date(o.setDate(1));const a=new Date(o.setMonth(o.getMonth()+n));this._maxVisibleDate=new Date(a.setDate(0))}getCellCount(){return 7}getRowCount(e){const n=new Date(e.currentDate);n.setDate(1);const i=new Date(n);return i.setMonth(i.getMonth()+e.intervalCount),i.setDate(0),xoe(n,i,e.firstDayOfWeek??ee.firstDayOfWeekIndex())}getCellCountInDay(){return 1}setHiddenInterval(){this.hiddenInterval=0}getCellEndDate(e,n){const{startDayHour:i,endDayHour:s}=n,r=(s-i)*gO("hour");return De.addOffsetsWithoutDST(e,r)}}const _O=V.dateToMilliseconds;class _oe extends pp{_calculateCellIndex(e,n,i,s){return wo.calculateCellIndex(e,n,i,s)}calculateEndDate(e,n,i){return oa(e,i)}getInterval(){return _O("day")}_calculateStartViewDate(e){return QQ.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,e.intervalCount)}getCellCount(e){const{intervalCount:n}=e,i=new Date(e.currentDate);let s=0;for(let r=1;r<=n;r++)s+=new Date(i.getFullYear(),i.getMonth()+r,0).getDate();return s}setHiddenInterval(){this.hiddenInterval=0}getCellEndDate(e,n){const{startDayHour:i,endDayHour:s}=n,r=(s-i)*_O("hour");return De.addOffsetsWithoutDST(e,r)}}class IN extends pp{constructor(){super(...arguments),this.daysInInterval=7}_getIntervalDuration(e){return vg.getIntervalDuration(e)}_calculateStartViewDate(e){return vg.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount),this.getFirstDayOfWeek(e.firstDayOfWeek))}}class yoe extends IN{constructor(){super(...arguments),this.daysInInterval=5,this.isWorkView=!0}isSkippedDate(e){return Z$(e)}_calculateStartViewDate(e){return YQ.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount),this.getFirstDayOfWeek(e.firstDayOfWeek))}getFirstDayOfWeek(e){return e||0}}const mb=7,voe=864e5,yO=t=>{switch(t){case _t.MONTH:return new goe;case _t.TIMELINE_MONTH:return new _oe;case _t.DAY:case _t.TIMELINE_DAY:return new moe;case _t.WEEK:case _t.TIMELINE_WEEK:return new IN;case _t.WORK_WEEK:case _t.TIMELINE_WORK_WEEK:return new yoe;default:return new pp}};function AN(t,e){const n=new Date(t);let i=n.getDay()-e;return i<0&&(i+=mb),n.setDate(n.getDate()-i),n}function Coe(t,e){const n=AN(t,e);return n.setDate(n.getDate()+mb-1),n}function Doe(t,e){const n=V.trimTime(e).getTime()-V.trimTime(t).getTime();return Math.round(n/voe)+1}function xoe(t,e,n){const i=AN(t,n),s=Coe(e,n),r=Doe(i,s)/mb;return Math.max(r,6)}const woe=["groups","groupOrientation","groupByDate","isAllDayPanelVisible","viewOffset"];class Soe{constructor(e){this.viewType=e,this.viewDataGenerator=yO(e),this.viewData={},this.completeViewDataMap=[],this.completeDateHeaderMap=[],this.viewDataMap={},this._groupedDataMapProvider=null}get groupedDataMap(){return this._groupedDataMapProvider.groupedDataMap}get hiddenInterval(){return this.viewDataGenerator.hiddenInterval}isSkippedDate(e){return this.viewDataGenerator.isSkippedDate(e)}update(e,n){this.viewDataGenerator=yO(e.viewType);const{viewDataGenerator:i}=this,s=new hoe(i),r=new foe(i),o=this._transformRenderOptions(e);o.interval=this.viewDataGenerator.getInterval(o.hoursInterval),this._options=o,n&&(this.completeViewDataMap=i.getCompleteViewDataMap(o),this.completeDateHeaderMap=s.getCompleteDateHeaderMap(o,this.completeViewDataMap),o.isGenerateTimePanelData&&(this.completeTimePanelMap=r.getCompleteTimePanelMap(o,this.completeViewDataMap))),this.viewDataMap=i.generateViewDataMap(this.completeViewDataMap,o),this.updateViewData(o),this._groupedDataMapProvider=new mO(this.viewDataGenerator,this.viewDataMap,this.completeViewDataMap,{isVerticalGrouping:o.isVerticalGrouping,viewType:o.viewType,viewOffset:e.viewOffset}),this.dateHeaderData=s.generateDateHeaderData(this.completeDateHeaderMap,this.completeViewDataMap,o),o.isGenerateTimePanelData&&(this.timePanelData=r.generateTimePanelData(this.completeTimePanelMap,o))}createGroupedDataMapProvider(){this._groupedDataMapProvider=new mO(this.viewDataGenerator,this.viewDataMap,this.completeViewDataMap,{isVerticalGrouping:this._options.isVerticalGrouping,viewType:this._options.viewType})}updateViewData(e){const n=this._transformRenderOptions(e);this.viewDataMapWithSelection=this.viewDataGenerator.markSelectedAndFocusedCells(this.viewDataMap,n),this.viewData=this.viewDataGenerator.getViewDataFromMap(this.completeViewDataMap,this.viewDataMapWithSelection,n)}_transformRenderOptions(e){const{groups:n,groupOrientation:i,groupByDate:s,isAllDayPanelVisible:r,viewOffset:o}=e,a=Mt(e,woe);return L({},a,{startViewDate:this.viewDataGenerator._calculateStartViewDate(e),isVerticalGrouping:V_(n,i),isHorizontalGrouping:cp(n,i),isGroupedByDate:pZ(n,i,s),isGroupedAllDayPanel:W$(n,i,r),groups:n,groupOrientation:i,isAllDayPanelVisible:r,viewOffset:o})}getGroupPanelData(e){const n=this._transformRenderOptions(e);if(n.groups.length>0){const i=this.getCellCount(n);return mZ(n.groups,i,n.isGroupedByDate,n.isGroupedByDate?1:i)}}getGroupStartDate(e){return this._groupedDataMapProvider.getGroupStartDate(e)}getGroupEndDate(e){return this._groupedDataMapProvider.getGroupEndDate(e)}findGroupCellStartDate(e,n,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return this._groupedDataMapProvider.findGroupCellStartDate(e,n,i,s)}findAllDayGroupCellStartDate(e){return this._groupedDataMapProvider.findAllDayGroupCellStartDate(e)}findCellPositionInMap(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._groupedDataMapProvider.findCellPositionInMap(e,n)}hasAllDayPanel(){const{viewData:e}=this.viewDataMap,{allDayPanel:n}=e.groupedData[0];return!e.isGroupedAllDayPanel&&(n==null?void 0:n.length)>0}getCellsGroup(e){return this._groupedDataMapProvider.getCellsGroup(e)}getCompletedGroupsInfo(){return this._groupedDataMapProvider.getCompletedGroupsInfo()}getGroupIndices(){return this._groupedDataMapProvider.getGroupIndices()}getLastGroupCellPosition(e){return this._groupedDataMapProvider.getLastGroupCellPosition(e)}getRowCountInGroup(e){return this._groupedDataMapProvider.getRowCountInGroup(e)}getCellData(e,n,i,s){const r=i&&!this._options.isVerticalGrouping?this.viewDataMap.allDayPanelMap:this.viewDataMap.dateTableMap[e],o=s?r.length-1-n:n,{cellData:a}=r[o];return a}getCellsByGroupIndexAndAllDay(e,n){const i=this._getRowCountWithAllDayRows(),s=this._options.isAllDayPanelVisible,r=this._options.isVerticalGrouping?e*i:0,o=this._options.isVerticalGrouping?(e+1)*i-1:i,a=s&&!n?r+1:r,l=n?a:o;return this.completeViewDataMap.slice(a,l+1).map(c=>c.filter(u=>{let{groupIndex:d}=u;return e===d}))}getCellCountWithGroup(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const{dateTableGroupedMap:i}=this.groupedDataMap;return i.filter((s,r)=>r<=e).reduce((s,r)=>s+r[n].length,0)}hasGroupAllDayPanel(e){var n;if(this._options.isVerticalGrouping){var i;return!!((i=this.groupedDataMap.dateTableGroupedMap[e])!==null&&i!==void 0&&i[0][0].cellData.allDay)}return((n=this.groupedDataMap.allDayPanelGroupedMap[e])===null||n===void 0?void 0:n.length)>0}isGroupIntersectDateInterval(e,n,i){const s=this.getGroupStartDate(e),r=this.getGroupEndDate(e);return n<r&&i>s}findGlobalCellPosition(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{completeViewDataMap:s}=this,r=this._options.isAllDayPanelVisible;for(let o=0;o<s.length;o+=1){const a=s[o];for(let l=0;l<a.length;l+=1){const c=a[l],{startDate:u,endDate:d,groupIndex:p,allDay:f}=c;if(n===p&&i===!!f&&this._compareDatesAndAllDay(e,u,d,i))return{position:{columnIndex:l,rowIndex:r&&!this._options.isVerticalGrouping?o-1:o},cellData:c}}}}_compareDatesAndAllDay(e,n,i,s){return s?V.sameDate(e,n):e>=n&&e<i}getSkippedDaysCount(e,n,i,s){const{dateTableGroupedMap:r}=this._groupedDataMapProvider.groupedDataMap,o=r[e];let a=0;for(let p=0;p<o.length;p+=1)for(let f=0;f<o[p].length;f+=1){const g=o[p][f].cellData;n.getTime()<g.endDate.getTime()&&i.getTime()>g.startDate.getTime()&&(a+=1)}const l=o[o.length-1][o[0].length-1].cellData,c=V.trimTime(l.startDate),u=Math.floor((i.getTime()-c.getTime())/V.dateToMilliseconds("day")),d=u>0?u:0;return s-a-d}getColumnsCount(){const{dateTableMap:e}=this.viewDataMap;return e?e[0].length:0}getViewEdgeIndices(e){return e?{firstColumnIndex:0,lastColumnIndex:this.viewDataMap.allDayPanelMap.length-1,firstRowIndex:0,lastRowIndex:0}:{firstColumnIndex:0,lastColumnIndex:this.viewDataMap.dateTableMap[0].length-1,firstRowIndex:0,lastRowIndex:this.viewDataMap.dateTableMap.length-1}}getGroupEdgeIndices(e,n){const i=this.groupedDataMap.dateTableGroupedMap[e],s=i[0].length,r=i.length,o=i[0][0].position.columnIndex,a=i[0][s-1].position.columnIndex;return n?{firstColumnIndex:o,lastColumnIndex:a,firstRowIndex:0,lastRowIndex:0}:{firstColumnIndex:o,lastColumnIndex:a,firstRowIndex:i[0][0].position.rowIndex,lastRowIndex:i[r-1][0].position.rowIndex}}isSameCell(e,n){const{startDate:i,groupIndex:s,allDay:r,index:o}=e,{startDate:a,groupIndex:l,allDay:c,index:u}=n;return i.getTime()===a.getTime()&&s===l&&r===c&&o===u}getLastViewDate(){const{completeViewDataMap:e}=this,n=e.length-1;return e[n][e[n].length-1].endDate}getStartViewDate(){return this._options.startViewDate}getIntervalDuration(e){return this.viewDataGenerator._getIntervalDuration(e)}getLastCellEndDate(){const e=new Date(this.getLastViewDate().getTime()-V.dateToMilliseconds("minute"));return he.addOffsets(e,[-this._options.viewOffset])}getLastViewDateByEndDayHour(e){const n=this.getLastCellEndDate(),i=V.dateTimeFromDecimal(e),s=new Date(n.setHours(i.hours,i.minutes));return this._adjustEndDateByDaylightDiff(n,s)}_adjustEndDateByDaylightDiff(e,n){const i=De.getDaylightOffsetInMs(e,n),s=new Date(n.getTime()-i);return new Date(s.getTime()-V.dateToMilliseconds("minute"))}getCellCountInDay(e,n,i){return this.viewDataGenerator.getCellCountInDay(e,n,i)}getCellCount(e){return this.viewDataGenerator.getCellCount(e)}getRowCount(e){return this.viewDataGenerator.getRowCount(e)}getVisibleDayDuration(e,n,i){return this.viewDataGenerator.getVisibleDayDuration(e,n,i)}_getRowCountWithAllDayRows(){const e=this._options.isAllDayPanelVisible?1:0;return this.getRowCount(this._options)+e}getFirstDayOfWeek(e){return this.viewDataGenerator.getFirstDayOfWeek(e)}setViewOptions(e){this._options=this._transformRenderOptions(e)}getViewOptions(){return this._options}getViewPortGroupCount(){const{dateTableGroupedMap:e}=this.groupedDataMap;return(e==null?void 0:e.length)||0}getCellsBetween(e,n){const[i,s]=this.normalizeCellsOrder(e,n),{index:r}=i,{index:o}=s,a=this.getCellsByGroupIndexAndAllDay(i.groupIndex??0,s.allDay??!1);return y0(this.viewType)?this.getCellsBetweenHorizontalView(a,r,o):this.getCellsBetweenVerticalView(a,r,o)}getCellsBetweenHorizontalView(e,n,i){return e.reduce((s,r)=>s.concat(r.filter(o=>{let{index:a}=o;return n<=a&&a<=i})),[])}getCellsBetweenVerticalView(e,n,i){var s;const r=[],o=e.length,a=((s=e[0])===null||s===void 0?void 0:s.length)??0;let l=!1;for(let c=0;c<a;c+=1)for(let u=0;u<o;u+=1){const d=e[u][c],{index:p}=d;if(p===n&&(l=!0),l&&r.push(d),p===i)return r}return r}normalizeCellsOrder(e,n){return e.startDate>n.startDate?[n,e]:[e,n]}}const{tableCreator:nd}=ob,{abstract:boe}=xN,Ag=V.dateToMilliseconds,Eoe="dx-scheduler-work-space",Toe="dx-scheduler-work-space-grouped",Ioe="dx-scheduler-work-space-vertical-grouped",vO="dx-scheduler-work-space-vertical-group-table",Aoe="dx-scheduler-work-space-both-scrollbar",koe="dx-scheduler-work-space-count",Roe="dx-scheduler-work-space-group-by-date",Ooe="dx-scheduler-work-space-odd-cells",CO="dx-scheduler-time-panel-cell",Poe="dx-scheduler-time-panel-row",fC="dx-scheduler-all-day-panel",F0="dx-scheduler-all-day-table",Moe="dx-scheduler-all-day-appointments",DO="dx-scheduler-all-day-title",xr="dx-scheduler-all-day-table-cell",Voe="dx-scheduler-all-day-table-row",Boe="dx-scheduler-work-space-all-day",Loe="dx-scheduler-work-space-all-day-collapsed",xO="dx-scheduler-work-space-mouse-selection",mC="dx-scheduler-cell-sizes-horizontal",wO="dx-scheduler-cell-sizes-vertical",$oe="dx-scheduler-header-panel",Foe="dx-scheduler-header-panel-cell",Hoe="dx-scheduler-header-row",SO="dx-scheduler-group-header",ys="dx-scheduler-date-table-cell",Noe="dx-scheduler-virtual-row",_m="dx-scheduler-date-table-droppable-cell",bO=K(ot.down,"dxSchedulerWorkSpace"),ql={ENTER:K(op,"dxSchedulerDateTable"),DROP:K(P_,"dxSchedulerDateTable"),LEAVE:K(ap,"dxSchedulerDateTable")},EO=K(_n,"dxSchedulerDateTable"),TO=K(ot.down,"dxSchedulerDateTable"),gC=K(ot.up,"dxSchedulerDateTable"),IO=K(ot.move,"dxSchedulerDateTable"),AO="dxCellData",kO=Ag("day"),zoe=Ag("hour"),Mf=`.${mS} td, .${F0} td`,Woe=`.${ys}, .${xr}`,RO={renderComponents:{header:!0,timePanel:!0,dateTable:!0,allDayPanel:!0},generateNewData:!0};class kN extends xN{constructor(){super(...arguments),this.viewDirection="vertical"}get type(){return""}get viewDataProvider(){return this._viewDataProvider||(this._viewDataProvider=new Soe(this.type)),this._viewDataProvider}get cache(){return this._cache||(this._cache=new bN),this._cache}get cellsSelectionState(){if(!this._cellsSelectionState){this._cellsSelectionState=new soe(this.viewDataProvider);const e=this.option("selectedCellData");if((e==null?void 0:e.length)>0){const n=e.map(i=>{const{groups:s}=i;if(!s||this._getGroupCount()===0)return L({},i,{groupIndex:0});const r=this._getGroupIndexByResourceId(s);return L({},i,{groupIndex:r})});this._cellsSelectionState.setSelectedCellsByData(n)}}return this._cellsSelectionState}get cellsSelectionController(){return this._cellsSelectionController||(this._cellsSelectionController=new ioe),this._cellsSelectionController}get isAllDayPanelVisible(){return this._isShowAllDayPanel()&&this.supportAllDayRow()}get verticalGroupTableClass(){return vO}get renovatedHeaderPanelComponent(){return X_}get timeZoneCalculator(){return this.option("timeZoneCalculator")}get isDefaultDraggingMode(){return this.option("draggingMode")==="default"}_supportedKeys(){const e=function(i){i.preventDefault(),i.stopPropagation();const s=this.cellsSelectionState.getSelectedCells();if(s!=null&&s.length){const r=s.map(o=>this._getCellByData(o)).filter(o=>!!o);i.target=r,this._showPopup=!0,this._cellClickAction({event:i,cellElement:m(r),cellData:s[0]})}},n=(i,s)=>{var r;i.preventDefault(),i.stopPropagation();const o=(r=this.cellsSelectionState.focusedCell)===null||r===void 0?void 0:r.cellData;if(o){const a=o.allDay&&!this._isVerticalGroupedWorkSpace(),l=i.shiftKey,c=this.option("allowMultipleCellSelection"),u=this._isRTL(),d=this._getGroupCount(),p=this.isGroupedByDate(),f=this._isHorizontalGroupedWorkSpace(),g=this.viewDataProvider.findCellPositionInMap(L({},o,{isAllDay:o.allDay})),y=f&&l&&!p?this.viewDataProvider.getGroupEdgeIndices(o.groupIndex,a):this.viewDataProvider.getViewEdgeIndices(a),v=this.cellsSelectionController.handleArrowClick({focusedCellPosition:g,edgeIndices:y,isRTL:u,isGroupedByDate:p,groupCount:d,isMultiSelection:l,isMultiSelectionAllowed:c,viewType:this.type,key:s,getCellDataByPosition:this.viewDataProvider.getCellData.bind(this.viewDataProvider),isAllDayPanelCell:a,focusedCellData:o});this._processNextSelectedCell(v,o,l&&c)}};return T(super._supportedKeys(),{enter:e,space:e,downArrow:i=>{n(i,"down")},upArrow:i=>{n(i,"up")},rightArrow:i=>{n(i,"right")},leftArrow:i=>{n(i,"left")}})}_isRTL(){return this.option("rtlEnabled")}_moveToCell(e,n){if(!M(e)||!e.length)return;const i=this.option("allowMultipleCellSelection"),s=this._getFullCellData(e),r=this.cellsSelectionState.focusedCell.cellData,o=this.cellsSelectionController.moveToCell({isMultiSelection:n,isMultiSelectionAllowed:i,currentCellData:s,focusedCellData:r,isVirtualCell:e.hasClass(ff)});this._processNextSelectedCell(o,r,i&&n)}_processNextSelectedCell(e,n,i){const s=this.viewDataProvider.findCellPositionInMap({startDate:e.startDate,groupIndex:e.groupIndex,isAllDay:e.allDay,index:e.index});if(!this.viewDataProvider.isSameCell(n,e)){const r=e.allDay&&!this._isVerticalGroupedWorkSpace()?this._dom_getAllDayPanelCell(s.columnIndex):this._dom_getDateCell(s),o=e.allDay;this._setSelectedCellsStateAndUpdateSelection(o,s,i,r),this._dateTableScrollable.scrollToElement(r)}}_setSelectedCellsStateAndUpdateSelection(e,n,i,s){const r={rowIndex:n.rowIndex,columnIndex:n.columnIndex,allDay:e};this.cellsSelectionState.setFocusedCell(r.rowIndex,r.columnIndex,e),i?this.cellsSelectionState.setSelectedCells(r):this.cellsSelectionState.setSelectedCells(r,r),this.updateCellsSelection(),this._updateSelectedCellDataOption(this.cellsSelectionState.getSelectedCells(),s)}_hasAllDayClass(e){return e.hasClass(xr)}_focusInHandler(e){if(m(e.target).is(this._focusTarget())&&this._isCellClick!==!1){if(delete this._isCellClick,delete this._contextMenuHandled,super._focusInHandler.apply(this,arguments),this.cellsSelectionState.restoreSelectedAndFocusedCells(),!this.cellsSelectionState.focusedCell){const n={columnIndex:0,rowIndex:0,allDay:this._isVerticalGroupedWorkSpace()&&this.isAllDayPanelVisible};this.cellsSelectionState.setFocusedCell(n.rowIndex,n.columnIndex,n.allDay),this.cellsSelectionState.setSelectedCells(n,n)}this.updateCellsSelection(),this._updateSelectedCellDataOption(this.cellsSelectionState.getSelectedCells())}}_focusOutHandler(){super._focusOutHandler.apply(this,arguments),!this._contextMenuHandled&&!this._disposed&&(this.cellsSelectionState.releaseSelectedAndFocusedCells(),this.viewDataProvider.updateViewData(this.generateRenderOptions()),this.updateCellsSelection())}_focusTarget(){return this.$element()}_isVerticalGroupedWorkSpace(){var e;return!!((e=this.option("groups"))!==null&&e!==void 0&&e.length)&&this.option("groupOrientation")==="vertical"}_isHorizontalGroupedWorkSpace(){var e;return!!((e=this.option("groups"))!==null&&e!==void 0&&e.length)&&this.option("groupOrientation")==="horizontal"}_isWorkSpaceWithCount(){return this.option("intervalCount")>1}_isWorkspaceWithOddCells(){return this.option("hoursInterval")===.5&&!this.isVirtualScrolling()}_getRealGroupOrientation(){return this._isVerticalGroupedWorkSpace()?"vertical":"horizontal"}createRAllDayPanelElements(){this._$allDayPanel=m("<div>").addClass(fC),this._$allDayTitle=m("<div>").appendTo(this._$headerPanelEmptyCell)}_dateTableScrollableConfig(){let e={useKeyboard:!1,bounceEnabled:!1,updateManually:!0,onScroll:()=>{var n;(n=this._groupedStrategy.cache)===null||n===void 0||n.clear()}};if(this._needCreateCrossScrolling()&&(e=T(e,this._createCrossScrollingConfig(e))),this.isVirtualScrolling()&&(this.virtualScrollingDispatcher.horizontalScrollingAllowed||this.virtualScrollingDispatcher.height)){const n=e.onScroll;e=L({},e,{onScroll:i=>{n==null||n(i),this.virtualScrollingDispatcher.handleOnScrollEvent(i==null?void 0:i.scrollOffset)}})}return e}_createCrossScrollingConfig(e){let{onScroll:n}=e;return{direction:"both",onScroll:i=>{n==null||n(),this._scrollSync.sidebar({top:i.scrollOffset.top}),this._scrollSync.header({left:i.scrollOffset.left})},onEnd:()=>{this.option("onScrollEnd")()}}}_headerScrollableConfig(){return{useKeyboard:!1,showScrollbar:"never",direction:"horizontal",useNative:!1,updateManually:!0,bounceEnabled:!1,onScroll:e=>{this._scrollSync.dateTable({left:e.scrollOffset.left})}}}_visibilityChanged(e){this.cache.clear(),e&&this._updateGroupTableHeight(),e&&this._needCreateCrossScrolling()&&this._setTableSizes()}_setTableSizes(){this.cache.clear(),this._attachTableClasses();let e=this.getCellWidth();e<this.getCellMinWidth()&&(e=this.getCellMinWidth());const n=this.getWorkSpaceMinWidth(),i=this._getGroupCount(),s=this._getTotalCellCount(i);let r=e*s;r<n&&(r=n),Ys(this._$headerPanel,r),Ys(this._$dateTable,r),this._$allDayTable&&Ys(this._$allDayTable,r),this._attachHeaderTableClasses(),this._updateGroupTableHeight(),this._updateScrollable()}getWorkSpaceMinWidth(){return this._groupedStrategy.getWorkSpaceMinWidth()}_dimensionChanged(){this._isVisible()&&(this.option("crossScrollingEnabled")&&this._setTableSizes(),this.updateHeaderEmptyCellWidth(),this._updateScrollable(),this.cache.clear())}_needCreateCrossScrolling(){return this.option("crossScrollingEnabled")}_getElementClass(){return B()}_getRowCount(){return this.viewDataProvider.getRowCount({intervalCount:this.option("intervalCount"),currentDate:this.option("currentDate"),viewType:this.type,hoursInterval:this.option("hoursInterval"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour")})}_getCellCount(){return this.viewDataProvider.getCellCount({intervalCount:this.option("intervalCount"),currentDate:this.option("currentDate"),viewType:this.type,hoursInterval:this.option("hoursInterval"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour")})}isRenovatedRender(){return this.renovatedRenderSupported()&&this.option("renovateRender")}_isVirtualModeOn(){return this.option("scrolling.mode")==="virtual"}isVirtualScrolling(){return this.isRenovatedRender()&&this._isVirtualModeOn()}_initVirtualScrolling(){this.virtualScrollingDispatcher&&(this.virtualScrollingDispatcher.dispose(),this.virtualScrollingDispatcher=null),this.virtualScrollingDispatcher=new ooe(this._getVirtualScrollingDispatcherOptions()),this.virtualScrollingDispatcher.attachScrollableEvents(),this.renderer=new coe(this)}onDataSourceChanged(e){}isGroupedAllDayPanel(){return W$(this.option("groups"),this.option("groupOrientation"),this.isAllDayPanelVisible)}generateRenderOptions(e){var n;const s=this._getGroupCount()>0?this.option("groupOrientation"):this._getDefaultGroupStrategy();return L({groupByDate:this.option("groupByDate"),startRowIndex:0,startCellIndex:0,groupOrientation:s,today:(n=this._getToday)===null||n===void 0?void 0:n.call(this),groups:this.option("groups"),isProvideVirtualCellsWidth:e,isAllDayPanelVisible:this.isAllDayPanelVisible,selectedCells:this.cellsSelectionState.getSelectedCells(),focusedCell:this.cellsSelectionState.focusedCell,headerCellTextFormat:this._getFormat(),getDateForHeaderText:(o,a)=>a,viewOffset:this.option("viewOffset"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),cellDuration:this.getCellDuration(),viewType:this.type,intervalCount:this.option("intervalCount"),hoursInterval:this.option("hoursInterval"),currentDate:this.option("currentDate"),startDate:this.option("startDate"),firstDayOfWeek:this.option("firstDayOfWeek"),showCurrentTimeIndicator:this.option("showCurrentTimeIndicator")},this.virtualScrollingDispatcher.getRenderState())}renovatedRenderSupported(){return!0}_updateGroupTableHeight(){this._isVerticalGroupedWorkSpace()&&ae()&&this._setHorizontalGroupHeaderCellsHeight()}updateHeaderEmptyCellWidth(){if(ae()&&this._isRenderHeaderPanelEmptyCell()){const e=this.getTimePanelWidth(),n=this.getGroupTableWidth();this._$headerPanelEmptyCell.css("width",e+n)}}_isGroupsSpecified(e){var n;return((n=this.option("groups"))===null||n===void 0?void 0:n.length)&&e}_getGroupIndexByResourceId(e){const n=this.option("groups"),i=dp(n);return i.length?this._getGroupIndexRecursively(i,e):0}_getGroupIndexRecursively(e,n){const i=e[0].name,s=n[i];return e.reduce((r,o)=>{let{leafIndex:a,value:l,children:c}=o;const u=s===l;return u&&a!==void 0?a:u?this._getGroupIndexRecursively(c,n):r},0)}_getViewStartByOptions(){return L_(this.option("startDate"),this.option("currentDate"),this._getIntervalDuration(),this.option("startDate")?this._calculateViewStartDate():void 0)}_getIntervalDuration(){return this.viewDataProvider.getIntervalDuration(this.option("intervalCount"))}_getHeaderDate(){return this.getStartViewDate()}_calculateViewStartDate(){return uZ(this.option("startDate"))}_firstDayOfWeek(){return this.viewDataProvider.getFirstDayOfWeek(this.option("firstDayOfWeek"))}_attachEvents(){this._createSelectionChangedAction(),this._attachClickEvent(),this._attachContextMenuEvent()}_attachClickEvent(){const e=this,n=this._createAction(r=>{e._pointerDownHandler(r.event)});this._createCellClickAction();const i=`.${ys},.${xr}`,s=this.$element();b.off(s,bO),b.off(s,EO),b.on(s,bO,r=>{if(Gr(r)&&r.which>1){r.preventDefault();return}n({event:r})}),b.on(s,EO,i,r=>{const o=m(r.target);e._cellClickAction({event:r,cellElement:se(o),cellData:e.getCellData(o)})})}_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick",{afterExecute:e=>this._cellClickHandler(e.args[0].event)})}_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")}_cellClickHandler(e){this._showPopup&&(delete this._showPopup,this._handleSelectedCellsClick())}_pointerDownHandler(e){const n=m(e.target);if(!n.hasClass(ys)&&!n.hasClass(xr)){this._isCellClick=!1;return}if(this._isCellClick=!0,n.hasClass("dx-scheduler-focused-cell"))this._showPopup=!0;else{const i=this._getCoordinatesByCell(n),s=this._hasAllDayClass(n);this._setSelectedCellsStateAndUpdateSelection(s,i,!1,n)}}_handleSelectedCellsClick(){const e=this.cellsSelectionState.getSelectedCells(),n=e[0],i=e[e.length-1],s={startDate:n.startDate,endDate:i.endDate};i.allDay!==void 0&&(s.allDay=i.allDay),this.option("onSelectedCellsClick")(s,i.groups)}_attachContextMenuEvent(){this._createContextMenuAction();const e=`.${ys},.${xr}`,n=this.$element(),i=K(uL,this.NAME);b.off(n,i,e),b.on(n,i,e,this._contextMenuHandler.bind(this))}_contextMenuHandler(e){const n=m(e.target);this._contextMenuAction({event:e,cellElement:se(n),cellData:this.getCellData(n)}),this._contextMenuHandled=!0}_createContextMenuAction(){this._contextMenuAction=this._createActionByOption("onCellContextMenu")}_getGroupHeaderContainer(){return this._isVerticalGroupedWorkSpace()?this._$groupTable:this._$thead}_getDateHeaderContainer(){return this._$thead}_getCalculateHeaderCellRepeatCount(){return this._groupedStrategy.calculateHeaderCellRepeatCount()}_updateScrollable(){var e,n;this._dateTableScrollable.update(),(e=this._headerScrollable)===null||e===void 0||e.update(),(n=this._sidebarScrollable)===null||n===void 0||n.update()}_getTimePanelRowCount(){return this._getCellCountInDay()}_getCellCountInDay(){const e=this.option("hoursInterval"),n=this.option("startDayHour"),i=this.option("endDayHour");return this.viewDataProvider.getCellCountInDay(n,i,e)}_getTotalCellCount(e){return this._groupedStrategy.getTotalCellCount(e)}_getTotalRowCount(e,n){let i=this._groupedStrategy.getTotalRowCount(e);return n&&this.isAllDayPanelVisible&&(i+=e),i}_getGroupIndex(e,n){return this._groupedStrategy.getGroupIndex(e,n)}calculateEndDate(e){const{viewDataGenerator:n}=this.viewDataProvider;return n.calculateEndDate(e,n.getInterval(this.option("hoursInterval")),this.option("endDayHour"))}_getGroupCount(){return Kr(this.option("groups"))}_attachTablesEvents(){const e=this.$element();this._attachDragEvents(e),this._attachPointerEvents(e)}_detachDragEvents(e){b.off(e,ql.ENTER),b.off(e,ql.LEAVE),b.off(e,ql.DROP)}_attachDragEvents(e){this._detachDragEvents(e),b.on(e,ql.ENTER,Mf,{checkDropTarget:(n,i)=>!this._isOutsideScrollable(n,i)},n=>{this.preventDefaultDragging||(this.removeDroppableCellClass(),m(n.target).addClass(_m))}),b.on(e,ql.LEAVE,()=>{this.preventDefaultDragging||this.removeDroppableCellClass()}),b.on(e,ql.DROP,Mf,()=>{var n,i;if(this.dragBehavior){if(!((n=this.dragBehavior)!==null&&n!==void 0&&n.dragBetweenComponentsPromise)){this.dragBehavior.removeDroppableClasses();return}(i=this.dragBehavior.dragBetweenComponentsPromise)===null||i===void 0||i.then(()=>{this.dragBehavior.removeDroppableClasses()})}})}_attachPointerEvents(e){let n=!1;b.off(e,IO),b.off(e,TO),b.on(e,TO,Mf,i=>{Gr(i)&&i.which===1&&(n=!0,this.$element().addClass(xO),b.off(W.getDocument(),gC),b.on(W.getDocument(),gC,()=>{n=!1,this.$element().removeClass(xO)}))}),b.on(e,IO,Mf,i=>{n&&this._dateTableScrollable&&!this._dateTableScrollable.option("scrollByContent")&&(i.preventDefault(),i.stopPropagation(),this._moveToCell(m(i.target),!0))})}_getFormat(){return boe()}getWorkArea(){return this._$dateTableContainer}getScrollable(){return this._dateTableScrollable}getScrollableScrollTop(){return this._dateTableScrollable.scrollTop()}getGroupedScrollableScrollTop(e){return this._groupedStrategy.getScrollableScrollTop(e)}getScrollableScrollLeft(){return this._dateTableScrollable.scrollLeft()}getScrollableOuterWidth(){return this._dateTableScrollable.scrollWidth()}getScrollableContainer(){return m(this._dateTableScrollable.container())}getHeaderPanelHeight(){return this._$headerPanel&&tt(this._$headerPanel,!0)}getTimePanelWidth(){return this._$timePanel&&ke(this._$timePanel.get(0)).width}getGroupTableWidth(){return this._$groupTable?et(this._$groupTable):0}getWorkSpaceLeftOffset(){return this._groupedStrategy.getLeftOffset()}_getCellCoordinatesByIndex(e){const n=Math.floor(e/this._getRowCount()),i=e-this._getRowCount()*n;return{columnIndex:n,rowIndex:i}}_getDateGenerationOptions(){var e;return{startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),isWorkView:this.viewDataProvider.viewDataGenerator.isWorkView,interval:(e=this.viewDataProvider.viewDataGenerator)===null||e===void 0?void 0:e.getInterval(this.option("hoursInterval")),startViewDate:this.getStartViewDate(),firstDayOfWeek:this._firstDayOfWeek()}}_getIntervalBetween(e,n){const i=this.getStartViewDate(),s=this.option("startDayHour")*zoe,r=V.getTimezonesDifference(i,e),o=e.getTime()-i.getTime()-r,a=this._getDaysOfInterval(o,s),l=this._getWeekendsCount(a);let c=(a-l)*kO;if(!n){const{hiddenInterval:u}=this.viewDataProvider,d=this.getVisibleDayDuration();c=o-a*u-l*d}return c}_getWeekendsCount(e){return 0}_getDaysOfInterval(e,n){return Math.floor((e+n)/kO)}_updateIndex(e){return e*this._getRowCount()}_getDroppableCell(){return this._getDateTables().find(`.${_m}`)}_getWorkSpaceWidth(){return this.cache.get("workspaceWidth",()=>{if(this._needCreateCrossScrolling())return ke(this._$dateTable.get(0)).width;const e=ke(this.$element().get(0)).width,n=this.getTimePanelWidth(),i=this.getGroupTableWidth();return e-n-i})}_getCellByCoordinates(e,n,i){const s=this._groupedStrategy.prepareCellIndexes(e,n,i);return this._dom_getDateCell(s)}_dom_getDateCell(e){return this._$dateTable.find(`tr:not(.${Noe})`).eq(e.rowIndex).find(`td:not(.${ff})`).eq(e.columnIndex)}_dom_getAllDayPanelCell(e){return this._$allDayPanel.find("tr").eq(0).find("td").eq(e)}_getCells(e,n){const i=e?xr:ys;if(n==="vertical"){let s=[];for(let r=1;;r++){const o=this.$element().find(`tr .${i}:nth-child(${r})`);if(!o.length)break;s=s.concat(o.toArray())}return m(s)}return this.$element().find(`.${i}`)}_getFirstAndLastDataTableCell(){const e=this.isVirtualScrolling()?`.${ys}, .${ff}`:`.${ys}`,n=this.$element().find(e);return[n[0],n[n.length-1]]}_getAllCells(e){if(this._isVerticalGroupedWorkSpace())return this._$dateTable.find(`td:not(.${ff})`);const n=e&&this.supportAllDayRow()?xr:ys;return this.$element().find(`.${n}`)}_setHorizontalGroupHeaderCellsHeight(){const{height:e}=ke(this._$dateTable.get(0));Sw(this._$groupTable,e)}_getGroupHeaderCells(){return this.$element().find(`.${SO}`)}_getScrollCoordinates(e,n,i,s,r){const o=i||new Date(this.option("currentDate")),a=this.option("startDayHour"),l=this.option("endDayHour");e<a&&(e=a),e>=l&&(e=l-1),o.setHours(e,n,0,0);const c=this.viewDataProvider.findGlobalCellPosition(o,s,r),{position:u,cellData:d}=c;return this.virtualScrollingDispatcher.calculateCoordinatesByDataAndPosition(d,u,o,ol(this.type),this.viewDirection==="vertical")}_isOutsideScrollable(e,n){const i=this._dateTableScrollable.$element(),s=ke(i.get(0)),r=pe(),o=!m(e).closest(i).length,a=n.pageX<s.left||n.pageX>s.left+s.width+(r.scrollX||0),l=n.pageY<s.top||n.pageY>s.top+s.height+(r.scrollY||0);return o&&!a?!1:l||a}setCellDataCache(e,n,i){const s=JSON.stringify({rowIndex:e.rowIndex,columnIndex:e.columnIndex,groupIndex:n});this.cache.set(s,this.getCellData(i))}setCellDataCacheAlias(e,n){const i=JSON.stringify({rowIndex:e.rowIndex,columnIndex:e.columnIndex,groupIndex:e.groupIndex}),s=JSON.stringify({top:n.top,left:n.left});this.cache.set(s,this.cache.get(i))}supportAllDayRow(){return!0}keepOriginalHours(){return!1}_filterCellDataFields(e){return T(!0,{},{startDate:e.startDate,endDate:e.endDate,groups:e.groups,groupIndex:e.groupIndex,allDay:e.allDay})}getCellData(e){const n=this._getFullCellData(e)||{};return this._filterCellDataFields(n)}_getFullCellData(e){if(e[0])return this._getDataByCell(e)}_getVirtualRowOffset(){return this.virtualScrollingDispatcher.virtualRowOffset}_getVirtualCellOffset(){return this.virtualScrollingDispatcher.virtualCellOffset}_getDataByCell(e){const n=e.parent().index()-this.virtualScrollingDispatcher.topVirtualRowsCount,i=e.index()-this.virtualScrollingDispatcher.leftVirtualCellsCount,{viewDataProvider:s}=this,r=this._hasAllDayClass(e);return s.getCellData(n,i,r)||void 0}isGroupedByDate(){return this.option("groupByDate")&&this._isHorizontalGroupedWorkSpace()&&this._getGroupCount()>0}getCellIndexByDate(e,n){const{viewDataGenerator:i}=this.viewDataProvider,s=n?864e5:i.getInterval(this.option("hoursInterval")),r=$$(this.getStartViewDate(),this.option("startDayHour")),o=this._getIntervalBetween(e,n)+r;let a=Math.floor(o/s);return n&&(a=this._updateIndex(a)),a<0&&(a=0),a}getDroppableCellIndex(){const e=this._getDroppableCell(),n=e.parent();return n.index()*n.find("td").length+e.index()}getDataByDroppableCell(){const e=this.getCellData(m(this._getDroppableCell())),{allDay:n}=e,{startDate:i}=e,{endDate:s}=e;return{startDate:i,endDate:s,allDay:n,groups:e.groups}}getDateRange(){return[this.getStartViewDate(),this.getEndViewDateByEndDayHour()]}getCellMinWidth(){return 75}getRoundedCellWidth(e,n,i){if(e<0||!ae())return 0;const s=this.$element().find(`.${m0}`).eq(0);let r=0;const o=s.find(`.${ys}`),a=this._getCellCount()*e;i=i||this._getCellCount(),M(n)||(n=a);for(let l=n;l<a+i;l++){const c=m(o).eq(l).get(0),u=c?ke(c).width:0;r+=u}return r/(a+i-n)}getCellWidth(){return q_(this.getDOMElementsMetaData())}getCellHeight(){return ib(this.getDOMElementsMetaData())}getAllDayHeight(){return Sh(this.option("showAllDayPanel"),this._isVerticalGroupedWorkSpace(),this.getDOMElementsMetaData())}getMaxAllowedPosition(e){return sb(e,this.viewDataProvider,this.option("rtlEnabled"),this.getDOMElementsMetaData())}getAllDayOffset(){return this._groupedStrategy.getAllDayOffset()}getCellIndexByCoordinates(e,n){const{horizontalScrollingState:i,verticalScrollingState:s}=this.virtualScrollingDispatcher,r=(i==null?void 0:i.itemCount)??this._getTotalCellCount(this._getGroupCount()),o=this.getCellWidth(),a=n?this.getAllDayHeight():this.getCellHeight(),l=(i==null?void 0:i.virtualItemSizeBefore)??0,c=(s==null?void 0:s.virtualItemSizeBefore)??0,u=Math.floor(Math.floor(e.top-c)/Math.floor(a));let d=(e.left-l)/o;return d=Math.floor(d+.05),this._isRTL()&&(d=r-d-1),r*u+d}getStartViewDate(){return this.viewDataProvider.getStartViewDate()}getEndViewDate(){return this.viewDataProvider.getLastCellEndDate()}getEndViewDateByEndDayHour(){return this.viewDataProvider.getLastViewDateByEndDayHour(this.option("endDayHour"))}getCellDuration(){return G$(this.type,this.option("startDayHour"),this.option("endDayHour"),this.option("hoursInterval"))}getIntervalDuration(e){return e?Ag("day"):this.getCellDuration()}getVisibleDayDuration(){const e=this.option("startDayHour"),n=this.option("endDayHour"),i=this.option("hoursInterval");return this.viewDataProvider.getVisibleDayDuration(e,n,i)}getGroupBounds(e){const n=this._groupedStrategy instanceof pO?this.getGroupBoundsVertical(e.groupIndex):this.getGroupBoundsHorizontal(e);return this._isRTL()?this.getGroupBoundsRtlCorrection(n):n}getGroupBoundsVertical(e){const n=this._getFirstAndLastDataTableCell();return this._groupedStrategy.getGroupBoundsOffset(e,n)}getGroupBoundsHorizontal(e){const n=this._getCellCount(),i=this._getCells(),s=this.getCellWidth(),{groupedDataMap:r}=this.viewDataProvider;return this._groupedStrategy.getGroupBoundsOffset(n,i,s,e,r)}getGroupBoundsRtlCorrection(e){const n=this.getCellWidth();return L({},e,{left:e.right-2*n,right:e.left+2*n})}needRecalculateResizableArea(){return this._isVerticalGroupedWorkSpace()&&this.getScrollable().scrollTop()!==0}getCellDataByCoordinates(e,n){const i=JSON.stringify({top:e.top,left:e.left});return this.cache.get(i,()=>{const s=this._getCells(n),r=this.getCellIndexByCoordinates(e,n),o=s.eq(r);return this.getCellData(o)})}getVisibleBounds(){const e={},n=this.getScrollable().$element(),i=this.getCellHeight(),s=this.getScrollableScrollTop()/i,r=s+Re(n)/i;return e.top={hours:Math.floor(s*this.option("hoursInterval"))+this.option("startDayHour"),minutes:s%2?30:0},e.bottom={hours:Math.floor(r*this.option("hoursInterval"))+this.option("startDayHour"),minutes:Math.floor(r)%2?30:0},e}updateScrollPosition(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=this.timeZoneCalculator.createDate(e,{path:"toGrid"}),r=i&&this.isAllDayPanelVisible;this.needUpdateScrollPosition(s,n,r)&&this.scrollTo(s,n,r,!1)}needUpdateScrollPosition(e,n,i){const s=this._getCellsInViewport(i),r=this._isGroupsSpecified(n)?this._getGroupIndexByResourceId(n):0,o=e.getTime(),a=V.trimTime(e).getTime();return s.reduce((l,c)=>{const{startDate:u,endDate:d,groupIndex:p}=this.getCellData(c),f=u.getTime(),g=d.getTime();return(!i&&f<=o&&o<g||i&&a===f)&&r===p?!1:l},!0)}_getCellsInViewport(e){const n=this.getScrollable().$element(),i=this.getCellHeight(),s=this.getCellWidth(),r=this._getTotalCellCount(this._getGroupCount()),o=this.getScrollableScrollTop(),a=this.getScrollableScrollLeft(),l=o/i-this.virtualScrollingDispatcher.topVirtualRowsCount;let c=Math.floor(l);o%i!==0&&(c+=1);const u=a/s;let d=Math.floor(u);a%s!==0&&(d+=1);const p=Math.floor(l+Re(n)/i),f=Math.floor(u+me(n)/s),g=this._getAllCells(e),y=[];return g.each(function(v){const C=m(this),x=v%r,S=v/r;d<=x&&x<f&&c<=S&&S<p&&y.push(C)}),y}scrollToTime(e,n,i){if(!this._isValidScrollDate(i))return;const s=this._getScrollCoordinates(e,n,i),r=this.getScrollable();r.scrollBy({top:s.top-r.scrollTop(),left:0})}scrollTo(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(!this._isValidScrollDate(e,s))return;const r=this._getGroupCount()&&n?this._getGroupIndexByResourceId(n):0,o=i&&this.isAllDayPanelVisible,a=this._getScrollCoordinates(e.getHours(),e.getMinutes(),e,r,o),l=this.getScrollable(),c=l.$element(),u=this.getCellWidth(),d=this.option("rtlEnabled")?u:0,p=Re(c),f=me(c),g=this.getCellHeight(),y=(f-u)/2,v=(p-g)/2,C=a.left-l.scrollLeft()-y-d;let x=a.top-l.scrollTop()-v;o&&!this._isVerticalGroupedWorkSpace()&&(x=0),this.option("templatesRenderAsynchronously")?setTimeout(()=>{l.scrollBy({left:C,top:x})}):l.scrollBy({left:C,top:x})}_isValidScrollDate(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const i=this.getStartViewDate(),s=this.getEndViewDate();return e<i||e>s?(n&&it.log("W1008",e),!1):!0}needApplyCollectorOffset(){return!1}removeDroppableCellClass(e){const n=e||this._getDroppableCell();n==null||n.removeClass(_m)}_getCoordinatesByCell(e){const n=e.index()-this.virtualScrollingDispatcher.leftVirtualCellsCount;let i=e.parent().index();const s=this._hasAllDayClass(e),r=this._isVerticalGroupedWorkSpace();return s&&!r||(i-=this.virtualScrollingDispatcher.topVirtualRowsCount),{rowIndex:i,columnIndex:n}}_isShowAllDayPanel(){return this.option("showAllDayPanel")}_getTimePanelCells(){return this.$element().find(`.${CO}`)}_getRDateTableProps(){return{viewData:this.viewDataProvider.viewData,viewContext:this.getR1ComponentsViewContext(),dataCellTemplate:this.option("dataCellTemplate"),addDateTableClass:!this.option("crossScrollingEnabled")||this.isVirtualScrolling(),groupOrientation:this.option("groupOrientation"),addVerticalSizesClassToRows:!1}}getR1ComponentsViewContext(){return{view:{type:this.type},crossScrollingEnabled:!!this.option("crossScrollingEnabled")}}_updateSelectedCellDataOption(e,n){const i=e.map(s=>{let{startDate:r,endDate:o,allDay:a,groupIndex:l,groups:c}=s;return{startDate:r,endDate:o,allDay:a,groupIndex:l,groups:c}});this.option("selectedCellData",i),this._selectionChangedAction({selectedCellData:i})}_getCellByData(e){const{startDate:n,groupIndex:i,allDay:s,index:r}=e,o=this.viewDataProvider.findCellPositionInMap({startDate:n,groupIndex:i,isAllDay:s,index:r});if(o)return s&&!this._isVerticalGroupedWorkSpace()?this._dom_getAllDayPanelCell(o.columnIndex):this._dom_getDateCell(o)}getDOMElementsMetaData(){return this.cache.get("cellElementsMeta",()=>({dateTableCellsMeta:this._getDateTableDOMElementsInfo(),allDayPanelCellsMeta:this._getAllDayPanelDOMElementsInfo()}))}_getDateTableDOMElementsInfo(){const e=this._getAllCells(!1);if(!e.length||!ae())return[[{}]];const n=this._getDateTable(),i=ke(n.get(0)),s=this.viewDataProvider.getColumnsCount(),r=[];return e.each((o,a)=>{const l=Math.floor(o/s);r.length===l&&r.push([]),this._addCellMetaData(r[l],a,i)}),r}_getAllDayPanelDOMElementsInfo(){const e=[];if(this.isAllDayPanelVisible&&!this._isVerticalGroupedWorkSpace()&&ae()){const n=this._getAllCells(!0);if(!n.length)return[{}];const i=this._$allDayPanel,s=ke(i.get(0));n.each((r,o)=>{this._addCellMetaData(e,o,s)})}return e}_addCellMetaData(e,n,i){const s=ke(n);e.push({left:s.left-i.left,top:s.top-i.top,width:s.width,height:s.height})}_oldRender_getAllDayCellData(e){return(n,i,s)=>{const r=s%this._getCellCount(),o=this._getDateGenerationOptions(!0);let a=this.viewDataProvider.viewDataGenerator.getDateByCellIndices(o,i,r,this._getCellCountInDay());a=V.trimTime(a);let l=e||0;this.isGroupedByDate()?l=Math.floor(s%this._getGroupCount()):this._isHorizontalGroupedWorkSpace()&&(l=Math.floor(s/this._getCellCount()));const c={startDate:a,endDate:a,allDay:!0,groupIndex:l},u=Pc(l,this.option("groups"));return u.length&&(c.groups=mm(u)),{key:AO,value:c}}}renderRWorkSpace(){let{header:e,timePanel:n,dateTable:i,allDayPanel:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:RO.renderComponents;e&&this.renderRHeaderPanel(),n&&this.renderRTimeTable(),i&&this.renderRDateTable(),s&&this.renderRAllDayPanel()}renderRDateTable(){Nn.renovation.renderComponent(this,this._$dateTable,Q_,"renovatedDateTable",this._getRDateTableProps())}renderRGroupPanel(){var e;const n={viewContext:this.getR1ComponentsViewContext(),groups:this.option("groups"),groupOrientation:this.option("groupOrientation"),groupByDate:this.isGroupedByDate(),resourceCellTemplate:this.option("resourceCellTemplate"),className:this.verticalGroupTableClass,groupPanelData:this.viewDataProvider.getGroupPanelData(this.generateRenderOptions())};(e=this.option("groups"))!==null&&e!==void 0&&e.length?(this._attachGroupCountClass(),Nn.renovation.renderComponent(this,this._getGroupHeaderContainer(),uN,"renovatedGroupPanel",n)):this._detachGroupCountClass()}renderRAllDayPanel(){if(this.isAllDayPanelVisible&&!this.isGroupedAllDayPanel()){var n;this._toggleAllDayVisibility(!1);const i=L({viewData:this.viewDataProvider.viewData,viewContext:this.getR1ComponentsViewContext(),dataCellTemplate:this.option("dataCellTemplate"),startCellIndex:0},((n=this.virtualScrollingDispatcher.horizontalVirtualScrolling)===null||n===void 0?void 0:n.getRenderState())||{});Nn.renovation.renderComponent(this,this._$allDayTable,QH,"renovatedAllDayPanel",i),Nn.renovation.renderComponent(this,this._$allDayTitle,WH,"renovatedAllDayPanelTitle",{})}this._toggleAllDayVisibility(!0)}renderRTimeTable(){Nn.renovation.renderComponent(this,this._$timePanel,DN,"renovatedTimePanel",{viewContext:this.getR1ComponentsViewContext(),timePanelData:this.viewDataProvider.timePanelData,timeCellTemplate:this.option("timeCellTemplate"),groupOrientation:this.option("groupOrientation")})}renderRHeaderPanel(){var e;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(e=this.option("groups"))!==null&&e!==void 0&&e.length?this._attachGroupCountClass():this._detachGroupCountClass(),Nn.renovation.renderComponent(this,this._$thead,this.renovatedHeaderPanelComponent,"renovatedHeaderPanel",{viewContext:this.getR1ComponentsViewContext(),dateHeaderData:this.viewDataProvider.dateHeaderData,groupPanelData:this.viewDataProvider.getGroupPanelData(this.generateRenderOptions()),dateCellTemplate:this.option("dateCellTemplate"),timeCellTemplate:this.option("timeCellTemplate"),groups:this.option("groups"),groupByDate:this.isGroupedByDate(),groupOrientation:this.option("groupOrientation"),resourceCellTemplate:this.option("resourceCellTemplate"),isRenderDateHeader:n})}initDragBehavior(e){if(!this.dragBehavior&&e){this.dragBehavior=new Jre(e);const n=m(e.element());this._createDragBehavior(this.getWorkArea(),n),this._isVerticalGroupedWorkSpace()||this._createDragBehavior(this._$allDayPanel,n)}}_createDragBehavior(e,n){const i={getItemData:(s,r)=>r._getItemData(s),getItemSettings:s=>s.data(Dr)};this._createDragBehaviorBase(e,n,i)}_createDragBehaviorBase(e,n,i){const s=this.$element().find(`.${mk}`);this.dragBehavior.addTo(e,Goe(s,n,this.isDefaultDraggingMode,this.dragBehavior,()=>{this.isDefaultDraggingMode||(this.preventDefaultDragging=!1)},()=>{this.isDefaultDraggingMode||(this.preventDefaultDragging=!0)},()=>this._getDroppableCell(),()=>this._getDateTables(),()=>this.removeDroppableCellClass(),()=>this.getCellWidth(),i))}_isRenderHeaderPanelEmptyCell(){return this._isVerticalGroupedWorkSpace()}_dispose(){super._dispose(),this.virtualScrollingDispatcher.dispose()}_getDefaultOptions(){return T(super._getDefaultOptions(),{currentDate:new Date,intervalCount:1,startDate:null,firstDayOfWeek:void 0,startDayHour:0,endDayHour:24,viewOffset:0,hoursInterval:.5,activeStateEnabled:!0,hoverStateEnabled:!0,groups:[],showAllDayPanel:!0,allDayExpanded:!1,onCellClick:null,crossScrollingEnabled:!1,dataCellTemplate:null,timeCellTemplate:null,resourceCellTemplate:null,dateCellTemplate:null,allowMultipleCellSelection:!0,indicatorTime:new Date,indicatorUpdateInterval:5*Ag("minute"),shadeUntilCurrentTime:!0,groupOrientation:"horizontal",selectedCellData:[],groupByDate:!1,scrolling:{mode:"standard"},allDayPanelMode:"all",renovateRender:!0,height:void 0,draggingMode:"outlook",onScrollEnd:()=>{},getHeaderHeight:void 0,onRenderAppointments:()=>{},onShowAllDayPanel:()=>{},onSelectedCellsClick:()=>{},timeZoneCalculator:void 0,schedulerHeight:void 0,schedulerWidth:void 0})}_optionChanged(e){switch(e.name){case"startDayHour":case"endDayHour":case"viewOffset":case"dateCellTemplate":case"resourceCellTemplate":case"dataCellTemplate":case"timeCellTemplate":case"hoursInterval":case"firstDayOfWeek":case"currentDate":case"startDate":this._cleanWorkSpace();break;case"groups":this._cleanView(),this._removeAllDayElements(),this._initGrouping(),this.repaint();break;case"groupOrientation":this._initGroupedStrategy(),this._createAllDayPanelElements(),this._removeAllDayElements(),this._cleanWorkSpace(),this._toggleGroupByDateClass();break;case"showAllDayPanel":this._isVerticalGroupedWorkSpace()?(this._cleanView(),this._removeAllDayElements(),this._initGrouping(),this.repaint()):this.isRenovatedRender()?this.renderWorkSpace():this._toggleAllDayVisibility(!0);break;case"allDayExpanded":this._changeAllDayVisibility(),this._attachTablesEvents(),this._updateScrollable();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"onCellClick":this._createCellClickAction();break;case"onCellContextMenu":this._attachContextMenuEvent();break;case"intervalCount":this._cleanWorkSpace(),this._toggleWorkSpaceCountClass();break;case"groupByDate":this._cleanWorkSpace(),this._toggleGroupByDateClass();break;case"crossScrollingEnabled":this._toggleHorizontalScrollClass(),this._dateTableScrollable.option(this._dateTableScrollableConfig());break;case"allDayPanelMode":this.updateShowAllDayPanel(),this.updateAppointments();break;case"width":super._optionChanged(e),this._dimensionChanged();break;case"timeZoneCalculator":case"allowMultipleCellSelection":case"selectedCellData":break;case"renovateRender":case"scrolling":this.repaint();break;case"schedulerHeight":case"schedulerWidth":this.virtualScrollingDispatcher.updateDimensions(!0);break;default:super._optionChanged(e)}}updateShowAllDayPanel(){const e=this.option("allDayPanelMode")==="hidden";this.option("onShowAllDayPanel")(!e)}_getVirtualScrollingDispatcherOptions(){return{getCellHeight:this.getCellHeight.bind(this),getCellWidth:this.getCellWidth.bind(this),getCellMinWidth:this.getCellMinWidth.bind(this),isRTL:this._isRTL.bind(this),getSchedulerHeight:()=>this.option("schedulerHeight"),getSchedulerWidth:()=>this.option("schedulerWidth"),getViewHeight:()=>this.$element().height?this.$element().height():Re(this.$element()),getViewWidth:()=>this.$element().width?this.$element().width():me(this.$element()),getWindowHeight:()=>pe().innerHeight,getWindowWidth:()=>pe().innerWidth,getScrolling:()=>this.option("scrolling"),getScrollableOuterWidth:this.getScrollableOuterWidth.bind(this),getScrollable:this.getScrollable.bind(this),createAction:this._createAction.bind(this),updateRender:this.updateRender.bind(this),updateGrid:this.updateGrid.bind(this),getGroupCount:this._getGroupCount.bind(this),isVerticalGrouping:this._isVerticalGroupedWorkSpace.bind(this),getTotalRowCount:this._getTotalRowCount.bind(this),getTotalCellCount:this._getTotalCellCount.bind(this)}}_cleanWorkSpace(){this._cleanView(),this._toggleGroupedClass(),this._toggleWorkSpaceWithOddCells(),this.virtualScrollingDispatcher.updateDimensions(!0),this._renderView(),this.option("crossScrollingEnabled")&&this._setTableSizes(),this.cache.clear()}_init(){this._scrollSync={},this._viewDataProvider=null,this._cellsSelectionState=null,this._activeStateUnit=Woe,super._init(),this._initGrouping(),this._toggleHorizontalScrollClass(),this._toggleWorkSpaceCountClass(),this._toggleGroupByDateClass(),this._toggleWorkSpaceWithOddCells(),this.$element().addClass(Eoe).addClass(this._getElementClass())}_initPositionHelper(){this.positionHelper=new Bse({key:this.option("key"),viewDataProvider:this.viewDataProvider,viewStartDayHour:this.option("startDayHour"),viewEndDayHour:this.option("endDayHour"),cellDuration:this.getCellDuration(),groupedStrategy:this._groupedStrategy,isGroupedByDate:this.isGroupedByDate(),rtlEnabled:this.option("rtlEnabled"),startViewDate:this.getStartViewDate(),isVerticalGrouping:this._isVerticalGroupedWorkSpace(),groupCount:this._getGroupCount(),isVirtualScrolling:this.isVirtualScrolling(),getDOMMetaDataCallback:this.getDOMElementsMetaData.bind(this)})}_initGrouping(){this._initGroupedStrategy(),this._toggleGroupingDirectionClass(),this._toggleGroupByDateClass()}isVerticalOrientation(){var e;return((e=this.option("groups"))!==null&&e!==void 0&&e.length?this.option("groupOrientation"):this._getDefaultGroupStrategy())==="vertical"}_initGroupedStrategy(){const e=this.isVerticalOrientation()?pO:uoe;this._groupedStrategy=new e(this)}_getDefaultGroupStrategy(){return"horizontal"}_toggleHorizontalScrollClass(){this.$element().toggleClass(Aoe,this.option("crossScrollingEnabled"))}_toggleGroupByDateClass(){this.$element().toggleClass(Roe,this.isGroupedByDate())}_toggleWorkSpaceCountClass(){this.$element().toggleClass(koe,this._isWorkSpaceWithCount())}_toggleWorkSpaceWithOddCells(){this.$element().toggleClass(Ooe,this._isWorkspaceWithOddCells())}_toggleGroupingDirectionClass(){this.$element().toggleClass(Ioe,this._isVerticalGroupedWorkSpace())}_getDateTableCellClass(e,n){const i=`${ys} ${mC} ${wO}`;return this._groupedStrategy.addAdditionalGroupCellClasses(i,n+1,e,n)}_getGroupHeaderClass(e){const n=SO;return this._groupedStrategy.addAdditionalGroupCellClasses(n,e+1)}_initWorkSpaceUnits(){this._$headerPanelContainer=m("<div>").addClass("dx-scheduler-header-panel-container"),this._$headerTablesContainer=m("<div>").addClass("dx-scheduler-header-tables-container"),this._$headerPanel=m("<table>"),this._$thead=m("<thead>").appendTo(this._$headerPanel),this._$headerPanelEmptyCell=m("<div>").addClass("dx-scheduler-header-panel-empty-cell"),this._$allDayTable=m("<table>"),this._$fixedContainer=m("<div>").addClass(mk),this._$allDayContainer=m("<div>").addClass(Moe),this._$dateTableScrollableContent=m("<div>").addClass("dx-scheduler-date-table-scrollable-content"),this._$sidebarScrollableContent=m("<div>").addClass("dx-scheduler-side-bar-scrollable-content"),this._initAllDayPanelElements(),this.isRenovatedRender()?this.createRAllDayPanelElements():this._createAllDayPanelElements(),this._$timePanel=m("<table>").addClass(M$),this._$dateTable=m("<table>"),this._$dateTableContainer=m("<div>").addClass("dx-scheduler-date-table-container"),this._$groupTable=m("<div>").addClass(vO)}_initAllDayPanelElements(){this._allDayTitles=[],this._allDayTables=[],this._allDayPanels=[]}_initDateTableScrollable(){const e=m("<div>").addClass("dx-scheduler-date-table-scrollable");this._dateTableScrollable=this._createComponent(e,Qs,this._dateTableScrollableConfig()),this._scrollSync.dateTable=uC(()=>this._dateTableScrollable)}_createWorkSpaceElements(){this.option("crossScrollingEnabled")?this._createWorkSpaceScrollableElements():this._createWorkSpaceStaticElements()}_createWorkSpaceStaticElements(){if(this._$dateTableContainer.append(this._$dateTable),this._isVerticalGroupedWorkSpace())this._$dateTableContainer.append(this._$allDayContainer),this._$dateTableScrollableContent.append(this._$groupTable,this._$timePanel,this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$headerTablesContainer.append(this._$headerPanel);else{var e;this._$dateTableScrollableContent.append(this._$timePanel,this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$headerTablesContainer.append(this._$headerPanel,this._$allDayPanel),(e=this._$allDayPanel)===null||e===void 0||e.append(this._$allDayContainer,this._$allDayTable)}this._appendHeaderPanelEmptyCellIfNecessary(),this._$headerPanelContainer.append(this._$headerTablesContainer),this.$element().append(this._$fixedContainer,this._$headerPanelContainer,this._dateTableScrollable.$element())}_createWorkSpaceScrollableElements(){if(this.$element().append(this._$fixedContainer),this._$flexContainer=m("<div>").addClass("dx-scheduler-work-space-flex-container"),this._createHeaderScrollable(),this._headerScrollable.$content().append(this._$headerPanel),this._appendHeaderPanelEmptyCellIfNecessary(),this._$headerPanelContainer.append(this._$headerTablesContainer),this.$element().append(this._$headerPanelContainer),this.$element().append(this._$flexContainer),this._createSidebarScrollable(),this._$flexContainer.append(this._dateTableScrollable.$element()),this._$dateTableContainer.append(this._$dateTable),this._$dateTableScrollableContent.append(this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._isVerticalGroupedWorkSpace())this._$dateTableContainer.append(this._$allDayContainer),this._$sidebarScrollableContent.append(this._$groupTable,this._$timePanel);else{var e;this._headerScrollable.$content().append(this._$allDayPanel),(e=this._$allDayPanel)===null||e===void 0||e.append(this._$allDayContainer,this._$allDayTable),this._$sidebarScrollableContent.append(this._$timePanel)}this._sidebarScrollable.$content().append(this._$sidebarScrollableContent)}_appendHeaderPanelEmptyCellIfNecessary(){this._isRenderHeaderPanelEmptyCell()&&this._$headerPanelContainer.append(this._$headerPanelEmptyCell)}_createHeaderScrollable(){const e=m("<div>").addClass("dx-scheduler-header-scrollable").appendTo(this._$headerTablesContainer);this._headerScrollable=this._createComponent(e,Qs,this._headerScrollableConfig()),this._scrollSync.header=uC(()=>this._headerScrollable)}_createSidebarScrollable(){const e=m("<div>").addClass("dx-scheduler-sidebar-scrollable").appendTo(this._$flexContainer);this._sidebarScrollable=this._createComponent(e,Qs,{useKeyboard:!1,showScrollbar:"never",direction:"vertical",useNative:!1,updateManually:!0,bounceEnabled:!1,onScroll:n=>{this._scrollSync.dateTable({top:n.scrollOffset.top})}}),this._scrollSync.sidebar=uC(()=>this._sidebarScrollable)}_attachTableClasses(){if(this._addTableClass(this._$dateTable,mS),this._isVerticalGroupedWorkSpace()){const e=this._getGroupCount();for(let n=0;n<e;n++)this._addTableClass(this._allDayTables[n],F0)}else this.isRenovatedRender()||this._addTableClass(this._$allDayTable,F0)}_attachHeaderTableClasses(){this._addTableClass(this._$headerPanel,$oe)}_addTableClass(e,n){e&&!e.hasClass(n)&&e.addClass(n)}_initMarkup(){this.cache.clear(),this._initWorkSpaceUnits(),this._initVirtualScrolling(),this._initDateTableScrollable(),this._createWorkSpaceElements(),super._initMarkup(),this.option("crossScrollingEnabled")||(this._attachTableClasses(),this._attachHeaderTableClasses()),this._toggleGroupedClass(),this._renderView(),this._attachEvents()}_render(){super._render(),this._renderDateTimeIndication(),this._setIndicationUpdateInterval()}_toggleGroupedClass(){this.$element().toggleClass(Toe,this._getGroupCount()>0)}_renderView(){this.isRenovatedRender()?this._isVerticalGroupedWorkSpace()&&this.renderRGroupPanel():this._applyCellTemplates(this._renderGroupHeader()),this.renderWorkSpace(),this.isRenovatedRender()&&this.virtualScrollingDispatcher.updateDimensions(),this._updateGroupTableHeight(),this.updateHeaderEmptyCellWidth(),this._shader=new noe(this)}updateCellsSelection(){const e=this.generateRenderOptions();this.viewDataProvider.updateViewData(e),this.renderRWorkSpace({timePanel:!0,dateTable:!0,allDayPanel:!0})}_renderDateTimeIndication(){return B()}renderCurrentDateTimeLineAndShader(){return B()}renderCurrentDateTimeIndication(){return B()}_setIndicationUpdateInterval(){return B()}_detachGroupCountClass(){[...hm].forEach(e=>{this.$element().removeClass(e)})}_attachGroupCountClass(){const e=this._groupedStrategy.getGroupCountClass(this.option("groups"));this.$element().addClass(e)}_getDateHeaderTemplate(){return this.option("dateCellTemplate")}_toggleAllDayVisibility(e){const n=this._isShowAllDayPanel();this.$element().toggleClass(Boe,n),this._changeAllDayVisibility(),e&&this._updateScrollable()}_changeAllDayVisibility(){this.cache.clear(),this.$element().toggleClass(Loe,!this.option("allDayExpanded")&&this._isShowAllDayPanel())}_getDateTables(){return this._$dateTable.add(this._$allDayTable)}_getDateTable(){return this._$dateTable}_removeAllDayElements(){this._$allDayTable&&this._$allDayTable.remove(),this._$allDayTitle&&this._$allDayTitle.remove()}_cleanView(){var e;if(this.cache.clear(),this._cleanTableWidths(),this.cellsSelectionState.clearSelectedAndFocusedCells(),!this.isRenovatedRender()){var n,i;this._$thead.empty(),this._$dateTable.empty(),this._$timePanel.empty(),this._$groupTable.empty(),(n=this._$allDayTable)===null||n===void 0||n.empty(),(i=this._$sidebarTable)===null||i===void 0||i.empty()}(e=this._shader)===null||e===void 0||e.clean(),delete this._interval}_clean(){b.off(W.getDocument(),gC),this._disposeRenovatedComponents(),super._clean()}_cleanTableWidths(){this._$headerPanel.css("width",""),this._$dateTable.css("width",""),this._$allDayTable&&this._$allDayTable.css("width","")}_disposeRenovatedComponents(){var e,n,i,s,r;(e=this.renovatedAllDayPanel)===null||e===void 0||e.dispose(),this.renovatedAllDayPanel=void 0,(n=this.renovatedDateTable)===null||n===void 0||n.dispose(),this.renovatedDateTable=void 0,(i=this.renovatedTimePanel)===null||i===void 0||i.dispose(),this.renovatedTimePanel=void 0,(s=this.renovatedGroupPanel)===null||s===void 0||s.dispose(),this.renovatedGroupPanel=void 0,(r=this.renovatedHeaderPanel)===null||r===void 0||r.dispose(),this.renovatedHeaderPanel=void 0}getGroupedStrategy(){return this._groupedStrategy}getFixedContainer(){return this._$fixedContainer}getAllDayContainer(){return this._$allDayContainer}updateRender(){this.renderer.updateRender()}updateGrid(){this.renderer._renderGrid()}updateAppointments(){var e;this.option("onRenderAppointments")(),(e=this.dragBehavior)===null||e===void 0||e.updateDragSource()}_createAllDayPanelElements(){const e=this._getGroupCount();if(this._isVerticalGroupedWorkSpace()&&e!==0)for(let n=0;n<e;n++){const i=m("<div>").addClass(DO).text(q.format("dxScheduler-allDay"));this._allDayTitles.push(i),this._$allDayTable=m("<table>"),this._allDayTables.push(this._$allDayTable),this._$allDayPanel=m("<div>").addClass(fC).append(this._$allDayTable),this._allDayPanels.push(this._$allDayPanel)}else this._$allDayTitle=m("<div>").addClass(DO).text(q.format("dxScheduler-allDay")).appendTo(this.$element()),this._$allDayTable=m("<table>"),this._$allDayPanel=m("<div>").addClass(fC).append(this._$allDayTable)}renderWorkSpace(){let{generateNewData:e,renderComponents:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:RO;this.cache.clear(),this.viewDataProvider.update(this.generateRenderOptions(),e),this.isRenovatedRender()?this.renderRWorkSpace(n):(this._renderDateHeader(),this._renderTimePanel(),this._renderGroupAllDayPanel(),this._renderDateTable(),this._renderAllDayPanel()),this._initPositionHelper()}_renderGroupHeader(){const e=this._getGroupHeaderContainer(),n=this._getGroupCount();let i=[];if(n){const s=this._makeGroupRows(this.option("groups"),this.option("groupByDate"));this._attachGroupCountClass(),e.append(s.elements),i=s.cellTemplates}else this._detachGroupCountClass();return i}_applyCellTemplates(e){e==null||e.forEach(n=>{n()})}_makeGroupRows(e,n){const i=this._isVerticalGroupedWorkSpace()?nd.VERTICAL:nd.HORIZONTAL;return nd.makeGroupedTable(i,e,{groupHeaderRowClass:Yc,groupRowClass:Yc,groupHeaderClass:this._getGroupHeaderClass.bind(this),groupHeaderContentClass:gS},this._getCellCount()||1,this.option("resourceCellTemplate"),this._getGroupCount(),n)}_renderDateHeader(){const e=this._getDateHeaderContainer(),n=m("<tr>").addClass(Hoe),i=this._getCellCount(),s=this._getDateHeaderTemplate(),r=this._getCalculateHeaderCellRepeatCount(),o=[],a=this.isGroupedByDate();if(a){const l=a?this._getGroupCount():1;for(let c=0;c<i;c++){const u=c*r;this._renderDateHeaderTemplate(n,c,u,s,o).attr("colSpan",l)}e.prepend(n)}else{for(let l=0;l<r;l++)for(let c=0;c<i;c++){const u=l*i+c;this._renderDateHeaderTemplate(n,c,u,s,o)}e.append(n)}return this._applyCellTemplates(o),n}_renderDateHeaderTemplate(e,n,i,s,r){const o=this.isGroupedByDate()?Math.floor(i/this._getGroupCount()):i,{completeDateHeaderMap:a}=this.viewDataProvider,{text:l,startDate:c}=a[a.length-1][o],u=m("<th>").addClass(this._getHeaderPanelCellClass(n)).attr("title",l);return s!=null&&s.render?r.push(s.render.bind(s,{model:L({text:l,date:c},this._getGroupsForDateHeaderTemplate(i)),index:i,container:se(u)})):u.text(l),e.append(u),u}_getGroupsForDateHeaderTemplate(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i,s;if(this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()){i=this._getGroupIndex(0,e*n);const r=Pc(i,this.option("groups"));s=mm(r)}return{groups:s,groupIndex:i}}_getHeaderPanelCellClass(e){const n=`${Foe} ${mC}`;return this._groupedStrategy.addAdditionalGroupCellClasses(n,e+1,void 0,void 0,this.isGroupedByDate())}_renderAllDayPanel(e){let n=this._getCellCount();this._isVerticalGroupedWorkSpace()||(n*=this._getGroupCount()||1);const i=this._renderTableBody({container:this._allDayPanels.length?se(this._allDayTables[e]):se(this._$allDayTable),rowCount:1,cellCount:n,cellClass:this._getAllDayPanelCellClass.bind(this),rowClass:Voe,cellTemplate:this.option("dataCellTemplate"),getCellData:this._oldRender_getAllDayCellData(e),groupIndex:e},!0);this._toggleAllDayVisibility(!0),this._applyCellTemplates(i)}_renderGroupAllDayPanel(){if(this._isVerticalGroupedWorkSpace()){const e=this._getGroupCount();for(let n=0;n<e;n++)this._renderAllDayPanel(n)}}_getAllDayPanelCellClass(e,n){const i=`${xr} ${mC}`;return this._groupedStrategy.addAdditionalGroupCellClasses(i,n+1)}_renderTimePanel(){const e=this._groupedStrategy.calculateTimeCellRepeatCount(),n=(i,s)=>{let r=0;this.isAllDayPanelVisible&&(r=1),this.isGroupedAllDayPanel()&&(r=Math.ceil((i+1)/this._getRowCount()));const o=i+r;return this.viewDataProvider.completeTimePanelMap[o][s]};this._renderTableBody({container:se(this._$timePanel),rowCount:this._getTimePanelRowCount()*e,cellCount:1,cellClass:this._getTimeCellClass.bind(this),rowClass:Poe,cellTemplate:this.option("timeCellTemplate"),getCellText:i=>n(i,"text"),getCellDate:i=>n(i,"startDate"),groupCount:this._getGroupCount(),allDayElements:this._insertAllDayRowsIntoDateTable()?this._allDayTitles:void 0,getTemplateData:(i=>{if(!this._isVerticalGroupedWorkSpace())return{};const s=this._getGroupIndex(i,0),r=Pc(s,this.option("groups")),o=mm(r);return{groupIndex:s,groups:o}}).bind(this)})}_getTimeCellClass(e){const n=`${CO} ${wO}`;return this._isVerticalGroupedWorkSpace()?this._groupedStrategy.addAdditionalGroupCellClasses(n,e,e):n}_renderDateTable(){const e=this._getGroupCount();this._renderTableBody({container:se(this._$dateTable),rowCount:this._getTotalRowCount(e),cellCount:this._getTotalCellCount(e),cellClass:this._getDateTableCellClass.bind(this),rowClass:m0,cellTemplate:this.option("dataCellTemplate"),getCellData:(n,i,s)=>{const r=this.isGroupedAllDayPanel();let o=i;if(r){const l=this._getRowCount(),c=Math.ceil(i/l);o+=c}const{cellData:a}=this.viewDataProvider.viewDataMap.dateTableMap[o][s];return{value:this._filterCellDataFields(a),fullValue:a,key:AO}},allDayElements:this._insertAllDayRowsIntoDateTable()?this._allDayPanels:void 0,groupCount:e,groupByDate:this.option("groupByDate")})}_insertAllDayRowsIntoDateTable(){return this._groupedStrategy.insertAllDayRowsIntoDateTable()}_renderTableBody(e,n){let i=[];return n?i=nd.makeTable(e):this._applyCellTemplates(nd.makeTable(e)),i}}const Goe=(t,e,n,i,s,r,o,a,l,c,u)=>{const d={dragElement:void 0,itemData:void 0},p=()=>{const{itemData:g}=d;return g?lt("disabled")(g):!0},f=u.isSetCursorOffset?()=>{const g=m(d.dragElement);return{x:me(g)/2,y:Re(g)/2}}:void 0;return{container:t,dragTemplate:()=>d.dragElement,onDragStart:g=>{n||r();const y=g.cancel,{event:v}=g,C=m(g.itemElement),x=g.component._appointments;d.itemData=u.getItemData(g.itemElement,x);const S=u.getItemSettings(C,g),{initialPosition:O}=u;p()||(v.data=v.data||{},y||(S.isCompact||i.updateDragSource(d.itemData,S),d.dragElement=((H,F,I)=>{const w=I.option("items").length;return F.isCompact=!1,F.virtual=!1,I._renderItem(w,{itemData:H,settings:[F]})[0]})(d.itemData,S,x),v.data.itemElement=d.dragElement,v.data.initialPosition=O??Gn(m(d.dragElement)),v.data.itemData=d.itemData,v.data.itemSettings=S,i.onDragStart(v.data),Yh(m(d.dragElement))))},onDragMove:()=>{if(n)return;const g=(()=>{const x=me(d.dragElement),S=c(),O=x>S,H=x<=10,F=m(d.dragElement).parent().get(0),I=ke(F),w=I.left,A=I.top;return O?W.elementsFromPoint(w+10,A+10,F):H?W.elementsFromPoint(w,A,F):W.elementsFromPoint(w+x/2,A+10,F)})(),y=!!g.find(x=>x===e.get(0)),v=a(),C=g.find(x=>{const{classList:S}=x;return v.find(x).length===1&&(S.contains(ys)||S.contains(xr))});C?(o().is(C)||l(),m(C).addClass(_m)):y||l()},onDragEnd:g=>{var y;n||s(),p()||i.onDragEnd(g),(y=d.dragElement)===null||y===void 0||y.remove(),l()},cursorOffset:f,filter:u.filter}},{tableCreator:OO}=ob,Uoe="dx-scheduler-agenda",Koe="dx-scheduler-agenda-date",PO="dx-scheduler-group-table",joe="dx-scheduler-time-panel-row",qoe="dx-scheduler-time-panel-cell",Yoe="dx-scheduler-agenda-nodata",Zoe="dx-scheduler-date-table-last-row";class RN extends kN{get type(){return _t.AGENDA}get renderingStrategy(){return this.invoke("getLayoutManager").getRenderingStrategyInstance()}get appointmentDataProvider(){return this.option("getAppointmentDataProvider")()}getStartViewDate(){return this._startViewDate}_init(){super._init(),this._activeStateUnit=void 0}_getDefaultOptions(){return T(super._getDefaultOptions(),{agendaDuration:7,rowHeight:60,noDataText:""})}_optionChanged(e){const{name:n}=e,{value:i}=e;switch(n){case"agendaDuration":break;case"noDataText":case"rowHeight":this._recalculateAgenda(this._rows);break;case"groups":!i||!i.length?this._$groupTable&&(this._$groupTable.remove(),this._$groupTable=null,this._detachGroupCountClass()):this._$groupTable||(this._initGroupTable(),this._dateTableScrollable.$content().prepend(this._$groupTable)),super._optionChanged(e);break;default:super._optionChanged(e)}}_renderFocusState(){return B()}_renderFocusTarget(){return B()}_cleanFocusState(){return B()}supportAllDayRow(){return!1}_isVerticalGroupedWorkSpace(){return!1}_getElementClass(){return Uoe}_calculateStartViewDate(){return jQ.calculateStartViewDate(this.option("currentDate"),this.option("startDayHour"))}_getRowCount(){return this.option("agendaDuration")}_getCellCount(){return 1}_getTimePanelRowCount(){return this.option("agendaDuration")}_renderAllDayPanel(){return B()}_toggleAllDayVisibility(){return B()}_initWorkSpaceUnits(){this._initGroupTable(),this._$timePanel=m("<table>").addClass(M$),this._$dateTable=m("<table>").addClass(mS),this._$dateTableScrollableContent=m("<div>").addClass("dx-scheduler-date-table-scrollable-content"),this._$dateTableContainer=m("<div>").addClass("dx-scheduler-date-table-container")}_initGroupTable(){const e=this.option("groups");e&&e.length&&(this._$groupTable=m("<table>").addClass(PO))}_renderView(){this._startViewDate=this._calculateStartViewDate(),this._rows=[],this._initPositionHelper()}_recalculateAgenda(e){let n=[];if(this._cleanView(),this._rowsIsEmpty(e)){this._renderNoData();return}this._rows=e,this._$groupTable&&(n=this._renderGroupHeader(),this._setGroupHeaderCellsHeight()),this._renderTimePanel(),this._renderDateTable(),this.invoke("onAgendaReady",e),this._applyCellTemplates(n),this._dateTableScrollable.update()}_renderNoData(){this._$noDataContainer=m("<div>").addClass(Yoe).html(this.option("noDataText")),this._dateTableScrollable.$content().append(this._$noDataContainer)}_setTableSizes(){return B()}_toggleHorizontalScrollClass(){return B()}_createCrossScrollingConfig(e){return B()}_setGroupHeaderCellsHeight(){const e=this._getGroupHeaderCells().filter((i,s)=>!s.getAttribute("rowSpan")),n=this._removeEmptyRows(this._rows);if(n.length)for(let i=0;i<e.length;i++){const s=e.eq(i).find(".dx-scheduler-group-header-content");Sw(s,this._getGroupRowHeight(n[i]))}}_rowsIsEmpty(e){let n=!0;for(let i=0;i<e.length;i++){const s=e[i];for(let r=0;r<s.length;r++)if(s[r]){n=!1;break}}return n}_attachGroupCountClass(){const e=L$(this.option("groups"));this.$element().addClass(e)}_removeEmptyRows(e){const n=[];for(let s=0;s<e.length;s++)e[s].length&&(i=e[s],!!i.some(r=>r>0))&&n.push(e[s]);var i;return n}_getGroupHeaderContainer(){return this._$groupTable}_makeGroupRows(){const e=Yne(this.option("loadedResources"),(o,a)=>U_(this.option("getResourceDataAccessors")(),o,a),this.option("getFilteredItems")()),n=this.option("resourceCellTemplate"),i=gS,s=[],r=OO.makeGroupedTableFromJSON(OO.VERTICAL,e,{cellTag:"th",groupTableClass:PO,groupRowClass:Yc,groupCellClass:this._getGroupHeaderClass(),groupCellCustomContent(o,a,l,c){const u=W.createElement("div");if(u.className=i,n&&n.render)s.push(n.render.bind(n,{model:{data:c.data,id:c.value,color:c.color,text:a.textContent},container:se(m(u)),index:l}));else{const d=W.createElement("div");d.appendChild(a),u.appendChild(d)}o.appendChild(u)},cellTemplate:n});return{elements:m(r).find(`.${Yc}`),cellTemplates:s}}_cleanView(){this._$dateTable.empty(),this._$timePanel.empty(),this._$groupTable&&this._$groupTable.empty(),this._$noDataContainer&&(this._$noDataContainer.empty(),this._$noDataContainer.remove(),delete this._$noDataContainer)}_createWorkSpaceElements(){this._createWorkSpaceStaticElements()}_createWorkSpaceStaticElements(){this._$dateTableContainer.append(this._$dateTable),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$groupTable&&this._$dateTableScrollableContent.prepend(this._$groupTable),this._$dateTableScrollableContent.append(this._$timePanel,this._$dateTableContainer),this.$element().append(this._dateTableScrollable.$element())}_renderDateTable(){this._renderTableBody({container:se(this._$dateTable),rowClass:m0,cellClass:this._getDateTableCellClass()})}_attachTablesEvents(){return B()}_attachEvents(){return B()}_cleanCellDataCache(){return B()}isIndicationAvailable(){return!1}_prepareCellTemplateOptions(e,n,i,s){const r=this.option("groups"),o={},a=!!r.length;(a&&nH(i,r)||[]).forEach((u,d)=>{const p=r[d].name;o[p]=u});const c=a?this._getGroupIndexByResourceId(o):void 0;return{model:{text:e,date:n,groups:o,groupIndex:c},container:se(s),index:i}}_renderTableBody(e,n){const i=[],s=e.cellTemplate;this._$rows=[];let r;const o=(function(a,l){if(l){let c,u,d;const p=m("<tr>"),f=m("<td>");if(Ai(f,this._getRowHeight(l)),e.getStartDate&&(c=e.getStartDate&&e.getStartDate(a),u=ee.format(c,"d"),d=ee.format(c,ES)),s&&s.render){const g=this._prepareCellTemplateOptions(`${u} ${d}`,c,r,f);i.push(s.render.bind(s,g))}else u&&d&&f.addClass(Koe).text(`${u} ${d}`);e.rowClass&&p.addClass(e.rowClass),e.cellClass&&f.addClass(e.cellClass),p.append(f),this._$rows.push(p)}}).bind(this);for(r=0;r<this._rows.length;r++)N(this._rows[r],o),this._setLastRowClass();m(e.container).append(m("<tbody>").append(this._$rows)),this._applyCellTemplates(i)}_setLastRowClass(){this._rows.length>1&&this._$rows.length&&this._$rows[this._$rows.length-1].addClass(Zoe)}_renderTimePanel(){this._renderTableBody({container:se(this._$timePanel),rowCount:this._getTimePanelRowCount(),cellCount:1,rowClass:joe,cellClass:qoe,cellTemplate:this.option("dateCellTemplate"),getStartDate:this._getTimePanelStartDate.bind(this)})}_getTimePanelStartDate(e){const n=new Date(this.option("currentDate"));return new Date(n.setDate(n.getDate()+e))}_getRowHeight(e){const n=this.option("rowHeight"),i=5*(e-1);return e?n*e+i+20:0}_getGroupRowHeight(e){if(!e)return;let n=0;for(let i=0;i<e.length;i++)n+=this._getRowHeight(e[i]);return n}_calculateRows(e){return this.renderingStrategy.calculateRows(e,this.option("agendaDuration"),this.option("currentDate"))}onDataSourceChanged(e){super.onDataSourceChanged(),this._renderView();const n=this._calculateRows(e);this._recalculateAgenda(n)}getAgendaVerticalStepHeight(){return this.option("rowHeight")}getEndViewDate(){const e=new Date(this.option("currentDate")),n=this.option("agendaDuration");e.setHours(this.option("endDayHour"));const i=e.setDate(e.getDate()+n-1)-6e4;return new Date(i)}getEndViewDateByEndDayHour(){return this.getEndViewDate()}getCellDataByCoordinates(){return{startDate:null,endDate:null}}updateScrollPosition(e){const n=this.timeZoneCalculator.createDate(e,{path:"toGrid"}),i=this.getVisibleBounds(),s=n.getHours(),r=n.getMinutes();this.needUpdateScrollPosition(s,r,i,n)&&this.scrollToTime(s,r,n)}needUpdateScrollPosition(e,n,i,s){let r=!1;return(e<i.top.hours||e>i.bottom.hours)&&(r=!0),e===i.top.hours&&n<i.top.minutes&&(r=!0),e===i.bottom.hours&&n>i.top.minutes&&(r=!0),r}renovatedRenderSupported(){return!1}_setSelectedCellsByCellData(){}_getIntervalDuration(){return V.dateToMilliseconds("day")*this.option("intervalCount")}getDOMElementsMetaData(){return{dateTableCellsMeta:[[{}]],allDayPanelCellsMeta:[{}]}}}re("dxSchedulerAgenda",RN);class Qoe extends SN{renderShader(){const e=this._workSpace._isHorizontalGroupedWorkSpace()?this._workSpace._getGroupCount():1;for(let n=0;n<e;n+=1){const i=n===0,s=i?this._$shader:this.createShader();this._workSpace.isGroupedByDate()?this._customizeGroupedByDateShader(s,n):this._customizeShader(s,n),!i&&this._shader.push(s)}}_customizeShader(e,n){const i=this._workSpace.getIndicationWidth();if(this._applyShaderWidth(e,i),n>=1){const s=this._workSpace,r=s._getCellCount()*s.getCellWidth();e.css("left",r)}else e.css("left",0)}_applyShaderWidth(e,n){const i=ke(this._$container.get(0)).width;n>i&&(n=i),n>0&&Ys(e,n)}_customizeGroupedByDateShader(e,n){const i=this._workSpace.getIndicationCellCount(),s=Math.floor(i),r=i-s,o=n===0,a=this._workSpace,l=o?a.getIndicationWidth():r*a.getCellWidth();let c;this._applyShaderWidth(e,l),o?c=a._getCellCount()*a.getCellWidth()*n:c=a.getCellWidth()*s*a._getGroupCount()+n*a.getCellWidth(),e.css("left",c)}}const Yl=V.dateToMilliseconds,_C="dx-scheduler-time-panel-current-time-cell";class J_ extends kN{_getToday(){const e=this.option("viewOffset"),n=q$(this.option("indicatorTime"),this.timeZoneCalculator);return he.addOffsets(n,[-e])}isIndicationOnView(){if(this.option("showCurrentTimeIndicator")){const e=this._getToday(),n=V.trimTime(this.getEndViewDate());return V.dateInRange(e,this.getStartViewDate(),new Date(n.getTime()+Yl("day")))}return!1}isIndicationAvailable(){return ae()?this._getToday()>=V.trimTime(new Date(this.getStartViewDate())):!1}isIndicatorVisible(){const e=this._getToday(),n=new Date(this.getEndViewDate().getTime()+Yl("minute")-1),i=new Date(this.getStartViewDate());return i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),V.dateInRange(e,i,n)}_renderIndicator(e,n,i,s){const r=this.isGroupedByDate(),o=r?1:s;for(let a=0;a<o;a++){const l=this._createIndicator(i);Ys(l,r?this.getCellWidth()*s:this.getCellWidth()),this._groupedStrategy.shiftIndicator(l,e,n,a)}}_createIndicator(e){const n=m("<div>").addClass("dx-scheduler-date-time-indicator");return e.append(n),n}_getRtlOffset(e){return this.option("rtlEnabled")?ke(this._dateTableScrollable.$content().get(0)).width-this.getTimePanelWidth()-e:0}_setIndicationUpdateInterval(){!this.option("showCurrentTimeIndicator")||this.option("indicatorUpdateInterval")===0||(this._clearIndicatorUpdateInterval(),this._indicatorInterval=setInterval(()=>{this.renderCurrentDateTimeIndication()},this.option("indicatorUpdateInterval")))}_clearIndicatorUpdateInterval(){this._indicatorInterval&&(clearInterval(this._indicatorInterval),delete this._indicatorInterval)}_isVerticalShader(){return!0}getIndicationWidth(e){const n=this.getCellWidth()*this._getCellCount();let i=this._getIndicatorDuration();i>this._getCellCount()&&(i=this._getCellCount());const s=i*this.getRoundedCellWidth(e,e*this._getCellCount(),i);return n<s?n:s}getIndicatorOffset(e){const n=this._getIndicatorDuration()-1;return n*this.getRoundedCellWidth(e,e*this._getCellCount(),n)}_getIndicatorDuration(){const e=this._getToday(),n=new Date(this.getStartViewDate());let i=e.getTime()-n.getTime();return this.option("type")==="workWeek"&&(i-=this._getWeekendsCount(Math.round(i/Yl("day")))*Yl("day")),Math.ceil((i+1)/Yl("day"))}getIndicationHeight(){const e=De.getDateWithoutTimezoneChange(this._getToday()),n=this.getCellHeight(),i=new Date(this.getStartViewDate());return this.isIndicationOnView()&&i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),(e.getTime()-i.getTime())/this.getCellDuration()*n}_dispose(){this._clearIndicatorUpdateInterval(),super._dispose.apply(this,arguments)}renderCurrentDateTimeIndication(){this.renderCurrentDateTimeLineAndShader(),this.isRenovatedRender()&&this.renderWorkSpace({generateNewData:!0,renderComponents:{header:!0,timePanel:!0}})}renderCurrentDateTimeLineAndShader(){var e;this._cleanDateTimeIndicator(),(e=this._shader)===null||e===void 0||e.clean(),this._renderDateTimeIndication()}_isCurrentTimeHeaderCell(e){if(this.isIndicationOnView()){const{completeDateHeaderMap:n}=this.viewDataProvider,i=n[n.length-1][e].startDate;return V.sameDate(i,this._getToday())}return!1}_getHeaderPanelCellClass(e){const n=super._getHeaderPanelCellClass(e);return this._isCurrentTimeHeaderCell(e)?`${n} ${cm}`:n}_cleanView(){super._cleanView(),this._cleanDateTimeIndicator()}_dimensionChanged(){super._dimensionChanged(),this.renderCurrentDateTimeLineAndShader()}_cleanDateTimeIndicator(){this.$element().find(".dx-scheduler-date-time-indicator").remove()}_cleanWorkSpace(){super._cleanWorkSpace(),this._renderDateTimeIndication(),this._setIndicationUpdateInterval()}_optionChanged(e){switch(e.name){case"showCurrentTimeIndicator":case"indicatorTime":this._cleanWorkSpace();break;case"indicatorUpdateInterval":this._setIndicationUpdateInterval();break;case"showAllDayPanel":case"allDayExpanded":case"crossScrollingEnabled":super._optionChanged(e),this.renderCurrentDateTimeIndication();break;case"shadeUntilCurrentTime":this.renderCurrentDateTimeIndication();break;default:super._optionChanged(e)}}_getDefaultOptions(){return T(super._getDefaultOptions(),{showCurrentTimeIndicator:!0,indicatorTime:new Date,indicatorUpdateInterval:5*Yl("minute"),shadeUntilCurrentTime:!0})}_getCurrentTimePanelCellIndices(){const e=this._getTimePanelRowCount(),n=this._getToday(),i=this.getCellIndexByDate(n),{rowIndex:s}=this._getCellCoordinatesByIndex(i);if(s===void 0)return[];let r;s===0?r=[s]:r=s%2===0?[s-1,s]:[s,s+1];const o=this._isVerticalGroupedWorkSpace()?this._getGroupCount():1;return[...new Array(o)].reduce((a,l,c)=>[...a,...r.map(u=>e*c+u)],[])}_renderDateTimeIndication(){if(!this.isIndicationAvailable()||(this.option("shadeUntilCurrentTime")&&this._shader.render(),!this.isIndicationOnView()||!this.isIndicatorVisible()))return;const e=this._getGroupCount()||1,n=this._dateTableScrollable.$content(),i=this.getIndicationHeight(),s=this._getRtlOffset(this.getCellWidth());this._renderIndicator(i,s,n,e),this.isRenovatedRender()||this._setCurrentTimeCells()}_setCurrentTimeCells(){const e=this._getTimePanelCells();this._getCurrentTimePanelCellIndices().forEach(i=>{e.eq(i).addClass(_C)})}_cleanCurrentTimeCells(){this.$element().find(`.${_C}`).removeClass(_C)}}re("dxSchedulerWorkSpace",J_);const{tableCreator:yC}=ob,Xoe="dx-scheduler-timeline",MO="dx-scheduler-group-table",Joe="dx-scheduler-work-space-horizontal-grouped",VO="dx-scheduler-header-panel-cell",BO="dx-scheduler-header-panel-week-cell",eae="dx-scheduler-header-row",tae="horizontal",ao=V.dateToMilliseconds;class ey extends J_{constructor(){super(...arguments),this.viewDirection="horizontal"}get verticalGroupTableClass(){return MO}get renovatedHeaderPanelComponent(){return yN}getGroupTableWidth(){return this._$sidebarTable?et(this._$sidebarTable):0}_getTotalRowCount(e){return this._isHorizontalGroupedWorkSpace()?this._getRowCount():(e=e||1,this._getRowCount()*e)}_getFormat(){return"shorttime"}_getWorkSpaceHeight(){return this.option("crossScrollingEnabled")&&ae()?ke(this._$dateTable.get(0)).height:ke(this.$element().get(0)).height}_dateTableScrollableConfig(){const e=super._dateTableScrollableConfig(),n={direction:tae};return this.option("crossScrollingEnabled")?e:T(e,n)}_needCreateCrossScrolling(){return!0}_headerScrollableConfig(){const e=super._headerScrollableConfig();return T(e,{scrollByContent:!0})}supportAllDayRow(){return!1}_getGroupHeaderContainer(){return this._isHorizontalGroupedWorkSpace()?this._$thead:this._$sidebarTable}_insertAllDayRowsIntoDateTable(){return!1}_needRenderWeekHeader(){return!1}_incrementDate(e){e.setDate(e.getDate()+1)}getIndicationCellCount(){const e=this._getTimeDiff();return this._calculateDurationInCells(e)}_getTimeDiff(){let e=this._getToday();const n=this._getIndicationFirstViewDate(),i=this.getStartViewDate(),s=De.getDaylightOffsetInMs(i,e);return s&&(e=new Date(e.getTime()+s)),e.getTime()-n.getTime()}_calculateDurationInCells(e){const n=this._getToday(),i=Math.floor(e/ao("day"));let s=(e-i*ao("day")-this.option("startDayHour")*ao("hour"))/this.getCellDuration();return n.getHours()>this.option("endDayHour")&&(s=this._getCellCountInDay()),s<0&&(s=0),i*this._getCellCountInDay()+s}getIndicationWidth(){if(this.isGroupedByDate()){const e=this.getIndicationCellCount(),n=Math.floor(e),i=e-n;return this.getCellWidth()*(n*this._getGroupCount()+i)}return this.getIndicationCellCount()*this.getCellWidth()}_isVerticalShader(){return!1}_isCurrentTimeHeaderCell(){return!1}_setTableSizes(){super._setTableSizes();const e=this._getWorkSpaceMinHeight();Ai(this._$sidebarTable,e),Ai(this._$dateTable,e),this.virtualScrollingDispatcher.updateDimensions()}_getWorkSpaceMinHeight(){let e=this._getWorkSpaceHeight();const n=tt(this._$flexContainer,!0);return e<n&&(e=n),e}_getCellCoordinatesByIndex(e){return{columnIndex:e%this._getCellCount(),rowIndex:0}}_getCellByCoordinates(e,n){const i=this._groupedStrategy.prepareCellIndexes(e,n);return this._$dateTable.find("tr").eq(i.rowIndex).find("td").eq(i.columnIndex)}_getWorkSpaceWidth(){return et(this._$dateTable,!0)}_getIndicationFirstViewDate(){return V.trimTime(new Date(this.getStartViewDate()))}_getIntervalBetween(e,n){const i=this.option("startDayHour"),s=this.option("endDayHour"),r=this.getStartViewDate(),o=r.getTime(),a=(24-s+i)*ao("hour"),l=V.getTimezonesDifference(r,e),c=e.getTime(),u=c-o-l,d=Math.floor(u/ao("day")),p=u-d*ao("day");let f=0;const g=this._getCellCountInDay()*(d-this._getWeekendsCount(d)),y=c-V.trimTime(new Date(e)).getTime();let v=g*this.option("hoursInterval")*ao("hour");return n||(e.getHours()<i?f=p-a+y:e.getHours()>=i&&e.getHours()<s?f=p:e.getHours()>=i&&e.getHours()>=s?f=p-(y-s*ao("hour")):d||(v=u),v+=f),v}_getWeekendsCount(e){return 0}getAllDayContainer(){return null}getTimePanelWidth(){return 0}getIntervalDuration(e){return this.getCellDuration()}getCellMinWidth(){return 0}getWorkSpaceLeftOffset(){return 0}scrollToTime(e,n,i){const s=this._getScrollCoordinates(e,n,i),r=this.getScrollable(),o=this.option("rtlEnabled")?ke(this.getScrollableContainer().get(0)).width:0;this.option("templatesRenderAsynchronously")?setTimeout(()=>{r.scrollBy({left:s.left-r.scrollLeft()-o,top:0})}):r.scrollBy({left:s.left-r.scrollLeft()-o,top:0})}renderRAllDayPanel(){}renderRTimeTable(){}_renderGroupAllDayPanel(){}generateRenderOptions(e){const n=super.generateRenderOptions(!0);return L({},n,{isGenerateWeekDaysHeaderData:this._needRenderWeekHeader(),getDateForHeaderText:ZQ.getDateForHeaderText})}_init(){super._init(),this.$element().addClass(Xoe),this._$sidebarTable=m("<div>").addClass(MO)}_getDefaultGroupStrategy(){return"vertical"}_toggleGroupingDirectionClass(){this.$element().toggleClass(Joe,this._isHorizontalGroupedWorkSpace())}_getDefaultOptions(){return T(super._getDefaultOptions(),{groupOrientation:"vertical"})}_createWorkSpaceElements(){this._createWorkSpaceScrollableElements()}_toggleAllDayVisibility(){return B()}_changeAllDayVisibility(){return B()}_getDateHeaderTemplate(){return this.option("timeCellTemplate")}_renderView(){let e;this.isRenovatedRender()||(e=this._renderGroupHeader()),this.renderWorkSpace(),this.isRenovatedRender()&&this.virtualScrollingDispatcher.updateDimensions(),this._shader=new Qoe(this),this._$sidebarTable.appendTo(this._sidebarScrollable.$content()),this.isRenovatedRender()&&this._isVerticalGroupedWorkSpace()&&this.renderRGroupPanel(),this.updateHeaderEmptyCellWidth(),this._applyCellTemplates(e)}_setHorizontalGroupHeaderCellsHeight(){return B()}_getTimePanelCells(){return this.$element().find(`.${VO}:not(.${BO})`)}_getCurrentTimePanelCellIndices(){const e=this._getCellCount(),n=this._getToday(),i=this.getCellIndexByDate(n),{columnIndex:s}=this._getCellCoordinatesByIndex(i);if(s===void 0)return[];const r=this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()?this._getGroupCount():1;return[...new Array(r)].map((o,a)=>e*a+s)}_renderTimePanel(){return B()}_renderAllDayPanel(){return B()}_createAllDayPanelElements(){return B()}_renderDateHeader(){const e=super._renderDateHeader();if(this._needRenderWeekHeader()){const n=new Date(this.getStartViewDate());let i=new Date(n);const s=[],r=this._getGroupCount(),o=this._getCellCountInDay(),a=this.isGroupedByDate()?o*r:o,l=this.option("dateCellTemplate"),c=this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()?r:1,u=this.viewDataProvider.viewDataGenerator.daysInInterval*this.option("intervalCount"),d=u*c;for(let f=0;f<d;f++){const g=m("<th>"),y=$_(i);if(l){const v={model:L({text:y,date:new Date(i)},this._getGroupsForDateHeaderTemplate(f,a)),container:g,index:f};l.render(v)}else g.text(y);g.addClass(VO).addClass(BO).attr("colSpan",a),s.push(g),f%u===u-1?i=new Date(n):this._incrementDate(i)}const p=m("<tr>").addClass(eae).append(s);e.before(p)}}_renderIndicator(e,n,i,s){let r;const o=this.getIndicationWidth();if(this.option("groupOrientation")==="vertical")r=this._createIndicator(i),Ai(r,ke(i.get(0)).height),r.css("left",n?n-o:o);else for(let a=0;a<s;a++){const l=this.isGroupedByDate()?a*this.getCellWidth():this._getCellCount()*this.getCellWidth()*a;r=this._createIndicator(i),Ai(r,ke(i.get(0)).height),r.css("left",n?n-o-l:o+l)}}_makeGroupRows(e,n){const i=this.option("groupOrientation")==="vertical"?yC.VERTICAL:yC.HORIZONTAL;return yC.makeGroupedTable(i,e,{groupRowClass:Yc,groupHeaderRowClass:Yc,groupHeaderClass:this._getGroupHeaderClass.bind(this),groupHeaderContentClass:gS},this._getCellCount()||1,this.option("resourceCellTemplate"),this._getTotalRowCount(this._getGroupCount()),n)}_setCurrentTimeCells(){const e=this._getTimePanelCells();this._getCurrentTimePanelCellIndices().forEach(i=>{e.eq(i).addClass(cm)})}_cleanCurrentTimeCells(){this.$element().find(`.${cm}`).removeClass(cm)}}re("dxSchedulerTimeline",ey);const nae="dx-scheduler-timeline-day";class ON extends ey{get type(){return _t.TIMELINE_DAY}_getElementClass(){return nae}_needRenderWeekHeader(){return this._isWorkSpaceWithCount()}}re("dxSchedulerTimelineDay",ON);const iae="dx-scheduler-timeline-month";class PN extends ey{constructor(){super(...arguments),this.viewDirection="horizontal"}get type(){return _t.TIMELINE_MONTH}get renovatedHeaderPanelComponent(){return X_}_renderView(){super._renderView(),this._updateScrollable()}_getElementClass(){return iae}_getDateHeaderTemplate(){return this.option("dateCellTemplate")}_calculateDurationInCells(e){return e/this.getCellDuration()}isIndicatorVisible(){return!0}_getFormat(){return $_}_getIntervalBetween(e){const n=this.getStartViewDate(),i=V.getTimezonesDifference(n,e);return e.getTime()-(n.getTime()-36e5*this.option("startDayHour"))-i}_getViewStartByOptions(){return wo.getViewStartByOptions(this.option("startDate"),this.option("currentDate"),this.option("intervalCount"),V.getFirstMonthDate(this.option("startDate")))}generateRenderOptions(){const e=super.generateRenderOptions(!0);return L({},e,{getDateForHeaderText:(n,i)=>i})}keepOriginalHours(){return!0}}re("dxSchedulerTimelineMonth",PN);const sae="dx-scheduler-timeline-week";class gb extends ey{get type(){return _t.TIMELINE_WEEK}_getElementClass(){return sae}_getHeaderPanelCellWidth(e){return ke(e.children().first().get(0)).width}_needRenderWeekHeader(){return!0}_incrementDate(e){e.setDate(e.getDate()+1)}}re("dxSchedulerTimelineWeek",gb);const rae="dx-scheduler-timeline-work-week";class MN extends gb{get type(){return _t.TIMELINE_WORK_WEEK}constructor(){super(...arguments),this._getWeekendsCount=Q$}_getElementClass(){return rae}_incrementDate(e){e.getDay()===5&&e.setDate(e.getDate()+2),super._incrementDate(e)}}re("dxSchedulerTimelineWorkWeek",MN);class VN extends J_{_getFormat(){return $_}generateRenderOptions(){const e=super.generateRenderOptions();return L({},e,{isGenerateTimePanelData:!0})}_isRenderHeaderPanelEmptyCell(){return!0}}const oae="dx-scheduler-work-space-day";class BN extends VN{get type(){return _t.DAY}_getElementClass(){return oae}_renderDateHeader(){return this.option("intervalCount")===1?null:super._renderDateHeader()}renderRHeaderPanel(){this.option("intervalCount")===1?super.renderRHeaderPanel(!1):super.renderRHeaderPanel(!0)}}re("dxSchedulerWorkSpaceDay",BN);const aae="dx-scheduler-work-space-month",lae="dx-scheduler-date-table-current-date",cae="dx-scheduler-date-table-cell-text",uae="dx-scheduler-date-table-first-of-month",dae="dx-scheduler-date-table-other-month",hae=V.dateToMilliseconds;class LN extends J_{get type(){return _t.MONTH}_getElementClass(){return aae}_getFormat(){return ES}_getIntervalBetween(e){const n=this.getStartViewDate(),i=V.getTimezonesDifference(n,e);return e.getTime()-(n.getTime()-36e5*this.option("startDayHour"))-i}_getDateGenerationOptions(){return L({},super._getDateGenerationOptions(),{cellCountInDay:1})}getCellWidth(){return this.cache.get("cellWidth",()=>{let e=0;const n=this._getCells().slice(0,7);return n.each((i,s)=>{e+=ae()?ke(s).width:0}),n.length===0?void 0:e/7})}_insertAllDayRowsIntoDateTable(){return!1}_getCellCoordinatesByIndex(e){const n=Math.floor(e/this._getCellCount()),i=e-this._getCellCount()*n;return{rowIndex:n,columnIndex:i}}_needCreateCrossScrolling(){return this.option("crossScrollingEnabled")||this._isVerticalGroupedWorkSpace()}_getViewStartByOptions(){return wo.getViewStartByOptions(this.option("startDate"),this.option("currentDate"),this.option("intervalCount"),V.getFirstMonthDate(this.option("startDate")))}_updateIndex(e){return e}isIndicationAvailable(){return!1}getIntervalDuration(){return hae("day")}getTimePanelWidth(){return 0}supportAllDayRow(){return!1}keepOriginalHours(){return!0}getWorkSpaceLeftOffset(){return 0}needApplyCollectorOffset(){return!0}_getHeaderDate(){return this._getViewStartByOptions()}scrollToTime(){return B()}renderRAllDayPanel(){}renderRTimeTable(){}renderRDateTable(){Nn.renovation.renderComponent(this,this._$dateTable,eN,"renovatedDateTable",this._getRDateTableProps())}_createWorkSpaceElements(){this._isVerticalGroupedWorkSpace()?this._createWorkSpaceScrollableElements():super._createWorkSpaceElements()}_toggleAllDayVisibility(){return B()}_changeAllDayVisibility(){return B()}_renderTimePanel(){return B()}_renderAllDayPanel(){return B()}_setMonthClassesToCell(e,n){e.toggleClass(lae,n.isCurrentDate).toggleClass(uae,n.firstDayOfMonth).toggleClass(dae,n.otherMonth)}_createAllDayPanelElements(){}_renderTableBody(e){e.getCellText=(n,i)=>{const s=this.viewDataProvider.completeViewDataMap[n][i].startDate;return wo.getCellText(s,this.option("intervalCount"))},e.getCellTextClass=cae,e.setAdditionalClasses=this._setMonthClassesToCell.bind(this),super._renderTableBody(e)}}re("dxSchedulerWorkSpaceMonth",LN);const pae="dx-scheduler-work-space-week";class _b extends VN{get type(){return _t.WEEK}_getElementClass(){return pae}_calculateViewStartDate(){return vg.calculateViewStartDate(this.option("startDate"),this._firstDayOfWeek())}}re("dxSchedulerWorkSpaceWeek",_b);const fae="dx-scheduler-work-space-work-week";class $N extends _b{get type(){return _t.WORK_WEEK}constructor(){super(...arguments),this._getWeekendsCount=Q$}_getElementClass(){return fae}}re("dxSchedulerWorkSpaceWorkWeek",$N);const mae=V.dateToMilliseconds,ty="dx-scheduler",gae=`${ty}-small`,_ae=`${ty}-adaptive`,yae=`${ty}-readonly`,vae="yyyyMMddTHHmmss",Cae=`${vae}Z`,Dae={day:{workSpace:BN,renderingStrategy:"vertical"},week:{workSpace:_b,renderingStrategy:"vertical"},workWeek:{workSpace:$N,renderingStrategy:"vertical"},month:{workSpace:LN,renderingStrategy:"horizontalMonth"},timelineDay:{workSpace:ON,renderingStrategy:"horizontal"},timelineWeek:{workSpace:gb,renderingStrategy:"horizontal"},timelineWorkWeek:{workSpace:MN,renderingStrategy:"horizontal"},timelineMonth:{workSpace:PN,renderingStrategy:"horizontalMonthLine"},agenda:{workSpace:RN,renderingStrategy:"agenda"}},cn={ADDING:"onAppointmentAdding",ADDED:"onAppointmentAdded",DELETING:"onAppointmentDeleting",DELETED:"onAppointmentDeleted",UPDATING:"onAppointmentUpdating",UPDATED:"onAppointmentUpdated"},id={SERIES:"editSeries",OCCURENCE:"editOccurence",CANCEL:"cancel"};let yb=class extends Kt{_getDefaultOptions(){const e=T(super._getDefaultOptions(),{views:["day","week"],currentView:"day",currentDate:V.trimTime(new Date),min:void 0,max:void 0,dateSerializationFormat:void 0,firstDayOfWeek:void 0,groups:[],resources:[],loadedResources:[],resourceLoaderMap:new Map,dataSource:null,customizeDateNavigatorText:void 0,appointmentTemplate:"item",dropDownAppointmentTemplate:"dropDownAppointment",appointmentCollectorTemplate:"appointmentCollector",dataCellTemplate:null,timeCellTemplate:null,resourceCellTemplate:null,dateCellTemplate:null,startDayHour:0,endDayHour:24,offset:0,editing:{allowAdding:!0,allowDeleting:!0,allowDragging:!0,allowResizing:!0,allowUpdating:!0,allowTimeZoneEditing:!1},showAllDayPanel:!0,showCurrentTimeIndicator:!0,shadeUntilCurrentTime:!1,indicatorUpdateInterval:3e5,indicatorTime:void 0,recurrenceEditMode:"dialog",cellDuration:30,maxAppointmentsPerCell:"auto",selectedCellData:[],groupByDate:!1,onAppointmentRendered:null,onAppointmentClick:null,onAppointmentDblClick:null,onAppointmentContextMenu:null,onCellClick:null,onCellContextMenu:null,onAppointmentAdding:null,onAppointmentAdded:null,onAppointmentUpdating:null,onAppointmentUpdated:null,onAppointmentDeleting:null,onAppointmentDeleted:null,onAppointmentFormOpening:null,onAppointmentTooltipShowing:null,appointmentTooltipTemplate:"appointmentTooltip",appointmentPopupTemplate:"appointmentPopup",crossScrollingEnabled:!1,useDropDownViewSwitcher:!1,startDateExpr:"startDate",endDateExpr:"endDate",textExpr:"text",descriptionExpr:"description",allDayExpr:"allDay",recurrenceRuleExpr:"recurrenceRule",recurrenceExceptionExpr:"recurrenceException",disabledExpr:"disabled",remoteFiltering:!1,timeZone:"",startDateTimeZoneExpr:"startDateTimeZone",endDateTimeZoneExpr:"endDateTimeZone",noDataText:q.format("dxCollectionWidget-noDataText"),adaptivityEnabled:!1,allowMultipleCellSelection:!0,scrolling:{mode:"standard"},allDayPanelMode:"all",renovateRender:!0,_draggingMode:"outlook",_appointmentTooltipOffset:{x:0,y:0},_appointmentTooltipButtonsPosition:"bottom",_appointmentTooltipOpenButtonText:q.format("dxScheduler-openAppointment"),_appointmentCountPerCell:2,_collectorOffset:0,_appointmentOffset:26,toolbar:[{location:"before",defaultElement:"dateNavigator"},{location:"after",defaultElement:"viewSwitcher"}]});return T(!0,e,{integrationOptions:{useDeferUpdateForTemplates:!1}})}get filteredItems(){return this._filteredItems||(this._filteredItems=[]),this._filteredItems}set filteredItems(e){this._filteredItems=e}get preparedItems(){return this._preparedItems||(this._preparedItems=[]),this._preparedItems}set preparedItems(e){this._preparedItems=e}get currentView(){return E0.getCurrentView(this.option("currentView"),this.option("views"))}get currentViewType(){return ue(this.currentView)?this.currentView.type:this.currentView}get timeZoneCalculator(){return this._timeZoneCalculator||(this._timeZoneCalculator=W7(this.option("timeZone"))),this._timeZoneCalculator}_setDeprecatedOptions(){super._setDeprecatedOptions(),T(this._deprecatedOptions,{dropDownAppointmentTemplate:{since:"19.2",message:"appointmentTooltipTemplate"}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>X.real().deviceType==="desktop"&&!X.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!X.current().generic,options:{useDropDownViewSwitcher:!0,editing:{allowDragging:!1,allowResizing:!1}}},{device:()=>ii(),options:{useDropDownViewSwitcher:!0,dateCellTemplate(e,n,i){const{text:s}=e;s.split(" ").forEach((r,o)=>{const a=m("<span>").text(r).addClass("dx-scheduler-header-panel-cell-date");m(i).append(a),o||m(i).append(" ")})},_appointmentTooltipButtonsPosition:"top",_appointmentTooltipOpenButtonText:null,_appointmentCountPerCell:1,_collectorOffset:20,_appointmentOffset:30}},{device:()=>Un(),options:{_appointmentTooltipOffset:{x:0,y:11}}}])}_postponeDataSourceLoading(e){this.postponedOperations.add("_reloadDataSource",this._reloadDataSource.bind(this),e)}_postponeResourceLoading(){const e=this.postponedOperations.add("loadResources",()=>{const i=this._getCurrentViewOption("groups");return jR(i,this.option("resources"),this.option("resourceLoaderMap"))}),n=new j;return e.done(i=>{this.option("loadedResources",i),n.resolve(i)}),this._postponeDataSourceLoading(e),n.promise()}_optionChanged(e){var n,i,s;this.validateOptions();let{value:r}=e;const{name:o}=e;switch(e.name){case"customizeDateNavigatorText":this._updateOption("header",o,r);break;case"firstDayOfWeek":this._updateOption("workSpace",o,r),this._updateOption("header",o,r);break;case"currentDate":r=this._dateOption(o),r=V.trimTime(new Date(r)),this.option("selectedCellData",[]),this._workSpace.option(o,new Date(r)),(n=this._header)===null||n===void 0||n.option(o,new Date(r)),(i=this._header)===null||i===void 0||i.option("startViewDate",this.getStartViewDate()),this._appointments.option("items",[]),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break;case"dataSource":this._initDataSource(),this.appointmentDataProvider.setDataSource(this._dataSource),this._postponeResourceLoading().done(()=>{this._filterAppointmentsByDate(),this._updateOption("workSpace","showAllDayPanel",this.option("showAllDayPanel"))});break;case"min":case"max":r=this._dateOption(o),this._updateOption("header",o,new Date(r)),this._updateOption("workSpace",o,new Date(r));break;case"views":if(this._getCurrentViewOptions())this.repaint();else{var a;(a=this._header)===null||a===void 0||a.option(o,r)}break;case"useDropDownViewSwitcher":(s=this._header)===null||s===void 0||s.option(o,r);break;case"currentView":this._appointments.option({items:[],allowDrag:this._allowDragging(),allowResize:this._allowResizing(),itemTemplate:this._getAppointmentTemplate("appointmentTemplate")}),this._postponeResourceLoading().done(l=>{var c;this._refreshWorkSpace(l),(c=this._header)===null||c===void 0||c.option(this._headerConfig()),this._filterAppointmentsByDate(),this._appointments.option("allowAllDayResize",r!=="day")}),this.postponedOperations.callPostponedOperations();break;case"appointmentTemplate":this._appointments.option("itemTemplate",r);break;case"dateCellTemplate":case"resourceCellTemplate":case"dataCellTemplate":case"timeCellTemplate":this.repaint();break;case"groups":this._postponeResourceLoading().done(l=>{this._refreshWorkSpace(l),this._filterAppointmentsByDate()});break;case"resources":this._dataAccessors.resources=KR(this.option("resources")),this.agendaResourceProcessor.initializeState(this.option("resources")),this.updateInstances(),this.option("resourceLoaderMap").clear(),this._postponeResourceLoading().done(l=>{this._appointments.option("items",[]),this._refreshWorkSpace(l),this._filterAppointmentsByDate(),this._createAppointmentPopupForm()});break;case"startDayHour":case"endDayHour":this.updateInstances(),this._appointments.option("items",[]),this._updateOption("workSpace",o,r),this._appointments.repaint(),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break;case"offset":this.updateInstances(),this._appointments.option("items",[]),this._updateOption("workSpace","viewOffset",this.normalizeViewOffsetValue(r)),this._appointments.repaint(),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break;case cn.ADDING:case cn.ADDED:case cn.UPDATING:case cn.UPDATED:case cn.DELETING:case cn.DELETED:case"onAppointmentFormOpening":case"onAppointmentTooltipShowing":this._actions[o]=this._createActionByOption(o);break;case"onAppointmentRendered":this._appointments.option("onItemRendered",this._getAppointmentRenderedAction());break;case"onAppointmentClick":this._appointments.option("onItemClick",this._createActionByOption(o));break;case"onAppointmentDblClick":this._appointments.option(o,this._createActionByOption(o));break;case"onAppointmentContextMenu":this._appointments.option("onItemContextMenu",this._createActionByOption(o)),this._appointmentTooltip._options.onItemContextMenu=this._createActionByOption(o);break;case"noDataText":case"allowMultipleCellSelection":case"selectedCellData":case"accessKey":case"onCellClick":case"onCellContextMenu":this._workSpace.option(o,r);break;case"crossScrollingEnabled":this._postponeResourceLoading().done(l=>{this._appointments.option("items",[]),this._refreshWorkSpace(l),this._readyToRenderAppointments&&this._appointments.option("items",this._getAppointmentsToRepaint())});break;case"cellDuration":this._updateOption("workSpace",o,r),this._appointments.option("items",[]),this._readyToRenderAppointments&&(this._updateOption("workSpace","hoursInterval",r/60),this._appointments.option("items",this._getAppointmentsToRepaint()));break;case"tabIndex":case"focusStateEnabled":this._updateOption("header",o,r),this._updateOption("workSpace",o,r),this._appointments.option(o,r),super._optionChanged(e);break;case"width":this._updateOption("header",o,r),this.option("crossScrollingEnabled")&&this._updateOption("workSpace","width",r),this._updateOption("workSpace","schedulerWidth",r),super._optionChanged(e),this._dimensionChanged(null,!0);break;case"height":super._optionChanged(e),this._dimensionChanged(null,!0),this._updateOption("workSpace","schedulerHeight",r);break;case"editing":{this._initEditing();const l=this._editing;this._bringEditingModeToAppointments(l),this.hideAppointmentTooltip(),this._cleanPopup();break}case"showAllDayPanel":this.updateInstances(),this.repaint();break;case"showCurrentTimeIndicator":case"indicatorTime":case"indicatorUpdateInterval":case"shadeUntilCurrentTime":case"groupByDate":this._updateOption("workSpace",o,r),this.repaint();break;case"appointmentDragging":case"appointmentTooltipTemplate":case"appointmentPopupTemplate":case"recurrenceEditMode":case"remoteFiltering":case"timeZone":this.updateInstances(),this.repaint();break;case"dropDownAppointmentTemplate":case"appointmentCollectorTemplate":case"_appointmentTooltipOffset":case"_appointmentTooltipButtonsPosition":case"_appointmentTooltipOpenButtonText":case"_appointmentCountPerCell":case"_collectorOffset":case"_appointmentOffset":this.repaint();break;case"dateSerializationFormat":case"maxAppointmentsPerCell":break;case"startDateExpr":case"endDateExpr":case"startDateTimeZoneExpr":case"endDateTimeZoneExpr":case"textExpr":case"descriptionExpr":case"allDayExpr":case"recurrenceRuleExpr":case"recurrenceExceptionExpr":case"disabledExpr":this._updateExpression(o,r),this.appointmentDataProvider.updateDataAccessors(this._dataAccessors),this._initAppointmentTemplate(),this.repaint();break;case"adaptivityEnabled":this._toggleAdaptiveClass(),this.repaint();break;case"scrolling":this.option("crossScrollingEnabled",this._isHorizontalVirtualScrolling()||this.option("crossScrollingEnabled")),this._updateOption("workSpace",e.fullName,r);break;case"allDayPanelMode":this.updateInstances(),this._updateOption("workSpace",e.fullName,r);break;case"renovateRender":this._updateOption("workSpace",o,r);break;case"_draggingMode":this._workSpace.option("draggingMode",r);break;case"toolbar":this._header?this._header.option("items",r):this.repaint();break;case"loadedResources":case"resourceLoaderMap":break;default:super._optionChanged(e)}}_dateOption(e){const n=this._getCurrentViewOption(e);return je.deserializeDate(n)}_getSerializationFormat(e){const n=this._getCurrentViewOption(e);if(typeof n=="number")return"number";if(ve(n))return je.getDateSerializationFormat(n)}_bringEditingModeToAppointments(e){const n={allowDelete:e.allowUpdating&&e.allowDeleting};this._isAgenda()||(n.allowDrag=e.allowDragging,n.allowResize=e.allowResizing,n.allowAllDayResize=e.allowResizing&&this._supportAllDayResizing()),this._appointments.option(n),this.repaint()}_isAgenda(){return this.getLayoutManager().appointmentRenderingStrategyName==="agenda"}_allowDragging(){return this._editing.allowDragging&&!this._isAgenda()}_allowResizing(){return this._editing.allowResizing&&!this._isAgenda()}_allowAllDayResizing(){return this._editing.allowResizing&&this._supportAllDayResizing()}_supportAllDayResizing(){return this.currentViewType!=="day"||this.currentView.intervalCount>1}_isAllDayExpanded(){return this.option("showAllDayPanel")&&this.appointmentDataProvider.hasAllDayAppointments(this.filteredItems,this.preparedItems)}_getTimezoneOffsetByOption(e){return De.calculateTimezoneByValue(this.option("timeZone"),e)}_filterAppointmentsByDate(){const e=this._workSpace.getDateRange(),n=this.timeZoneCalculator.createDate(e[0],{path:"fromGrid"}),i=this.timeZoneCalculator.createDate(e[1],{path:"fromGrid"});this.appointmentDataProvider.filterByDate(n,i,this.option("remoteFiltering"),this.option("dateSerializationFormat"))}_reloadDataSource(){const e=new j;return this._dataSource?(this._dataSource.load().done(()=>{bg(),this._fireContentReadyAction(e)}).fail(()=>{bg(),e.reject()}),this._dataSource.isLoading()&&tH({container:this.$element(),position:{of:this.$element()}})):this._fireContentReadyAction(e),e.promise()}_fireContentReadyAction(e){const n=super._fireContentReadyAction.bind(this),i=()=>{n(),e==null||e.resolve()};if(this._workSpaceRecalculation){var s;(s=this._workSpaceRecalculation)===null||s===void 0||s.done(()=>{i()})}else i()}_dimensionChanged(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=typeof this.option("height")=="number",s=typeof this.option("width")=="number";if(!this._isVisible())return;this._toggleSmallClass();const r=this.getWorkSpace();if(!this._isAgenda()&&this.filteredItems&&r&&(n||!i||!s)){r.option("allDayExpanded",this._isAllDayExpanded()),r._dimensionChanged();const o=this.getLayoutManager().createAppointmentsMap(this.filteredItems);this._appointments.option("items",o)}this.hideAppointmentTooltip(),this._appointmentPopup.triggerResize(),this._appointmentPopup.updatePopupFullScreenMode()}_clean(){this._cleanPopup(),super._clean()}_toggleSmallClass(){const{width:e}=ke(this.$element().get(0));this.$element().toggleClass(gae,e<400)}_toggleAdaptiveClass(){this.$element().toggleClass(_ae,this.option("adaptivityEnabled"))}_visibilityChanged(e){e&&this._dimensionChanged(null,!0)}_dataSourceOptions(){return{paginate:!1}}_initAllDayPanel(){this.option("allDayPanelMode")==="hidden"&&this.option("showAllDayPanel",!1)}_init(){this._initExpressions({startDate:this.option("startDateExpr"),endDate:this.option("endDateExpr"),startDateTimeZone:this.option("startDateTimeZoneExpr"),endDateTimeZone:this.option("endDateTimeZoneExpr"),allDay:this.option("allDayExpr"),text:this.option("textExpr"),description:this.option("descriptionExpr"),recurrenceRule:this.option("recurrenceRuleExpr"),recurrenceException:this.option("recurrenceExceptionExpr"),disabled:this.option("disabledExpr")}),super._init(),this._initAllDayPanel(),this._initDataSource(),this._customizeDataSourceLoadOptions(),this.$element().addClass(ty),this._initEditing(),this.updateInstances(),this._initActions(),this._compactAppointmentsHelper=new jse(this),this._asyncTemplatesTimers=[],this._dataSourceLoadedCallback=at(),this._subscribes=rO,this.agendaResourceProcessor=new cre(this.option("resources")),this._optionsValidator=new rre,this._optionsValidatorErrorHandler=new are}createAppointmentDataProvider(){var e;(e=this.appointmentDataProvider)===null||e===void 0||e.destroy(),this.appointmentDataProvider=new lie({dataSource:this._dataSource,dataAccessors:this._dataAccessors,timeZoneCalculator:this.timeZoneCalculator,dateSerializationFormat:this.option("dateSerializationFormat"),resources:this.option("resources"),startDayHour:this._getCurrentViewOption("startDayHour"),endDayHour:this._getCurrentViewOption("endDayHour"),viewOffset:this.getViewOffsetMs(),appointmentDuration:this._getCurrentViewOption("cellDuration"),allDayPanelMode:this._getCurrentViewOption("allDayPanelMode"),showAllDayPanel:this.option("showAllDayPanel"),getLoadedResources:()=>this.option("loadedResources"),getIsVirtualScrolling:()=>this.isVirtualScrolling(),getSupportAllDayRow:()=>this._workSpace.supportAllDayRow(),getViewType:()=>this._workSpace.type,getViewDirection:()=>this._workSpace.viewDirection,getDateRange:()=>this._workSpace.getDateRange(),getGroupCount:()=>this._workSpace._getGroupCount(),getViewDataProvider:()=>this._workSpace.viewDataProvider})}updateInstances(){this._timeZoneCalculator=null,this.getWorkSpace()&&this.createAppointmentDataProvider()}_customizeDataSourceLoadOptions(){var e;(e=this._dataSource)===null||e===void 0||e.on("customizeStoreLoadOptions",n=>{let{storeLoadOptions:i}=n;i.startDate=this.getStartViewDate(),i.endDate=this.getEndViewDate()})}_initTemplates(){this._initAppointmentTemplate(),this._templateManager.addDefaultTemplates({appointmentTooltip:new Rr,dropDownAppointment:new Rr}),super._initTemplates()}_initAppointmentTemplate(){const{expr:e}=this._dataAccessors,n=s=>lt(`appointmentData.${s}`),i=s=>r=>{const o=s(r);return o instanceof Date?o.valueOf():o};this._templateManager.addDefaultTemplates({item:new ea((s,r,o)=>this.getAppointmentsInstance()._renderAppointmentTemplate(s,r,o),["html","text","startDate","endDate","allDay","description","recurrenceRule","recurrenceException","startDateTimeZone","endDateTimeZone"],this.option("integrationOptions.watchMethod"),{text:n(e.textExpr),startDate:i(n(e.startDateExpr)),endDate:i(n(e.endDateExpr)),startDateTimeZone:n(e.startDateTimeZoneExpr),endDateTimeZone:n(e.endDateTimeZoneExpr),allDay:n(e.allDayExpr),recurrenceRule:n(e.recurrenceRuleExpr)})})}_renderContent(){this._renderContentImpl()}_updatePreparedItems(e){this.preparedItems=NQ(e,this._dataAccessors,this._getCurrentViewOption("cellDuration"),this.timeZoneCalculator)}_dataSourceChangedHandler(e){this._readyToRenderAppointments&&this._workSpaceRecalculation.done(()=>{this._updatePreparedItems(e),this._renderAppointments(),this.getWorkSpace().onDataSourceChanged(this.filteredItems)})}isVirtualScrolling(){var e;const n=this.getWorkSpace();if(n)return n.isVirtualScrolling();const i=this._getCurrentViewOptions(),s=this.option("scrolling");return(s==null?void 0:s.mode)==="virtual"||(i==null||(e=i.scrolling)===null||e===void 0?void 0:e.mode)==="virtual"}_filterAppointments(){this.filteredItems=this.appointmentDataProvider.filter(this.preparedItems)}_renderAppointments(){const e=this.getWorkSpace();this._filterAppointments(),e.option("allDayExpanded",this._isAllDayExpanded());let n=[];this._isVisible()&&(n=this._getAppointmentsToRepaint()),this._appointments.option("items",n),this.appointmentDataProvider.cleanState()}_getAppointmentsToRepaint(){const e=this.getLayoutManager(),n=e.createAppointmentsMap(this.filteredItems);return e.getRepaintedAppointments(n,this.getAppointmentsInstance().option("items"))}_initExpressions(e){this._dataAccessors=Nn.dataAccessors.create(e,this._dataAccessors,Me().forceIsoDateParsing,this.option("dateSerializationFormat")),this._dataAccessors.resources=KR(this.option("resources"))}_updateExpression(e,n){const i={};i[e.replace("Expr","")]=n,this._initExpressions(i)}getResourceDataAccessors(){return this._dataAccessors.resources}_initEditing(){const e=this.option("editing");this._editing={allowAdding:!!e,allowUpdating:!!e,allowDeleting:!!e,allowResizing:!!e,allowDragging:!!e},ue(e)&&(this._editing=T(this._editing,e)),this._editing.allowDragging=this._editing.allowDragging&&this._editing.allowUpdating,this._editing.allowResizing=this._editing.allowResizing&&this._editing.allowUpdating,this.$element().toggleClass(yae,this._isReadOnly())}_isReadOnly(){let e=!0;const n=this._editing;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e=e&&!n[i]);return e}_dispose(){var e;this._appointmentTooltip&&this._appointmentTooltip.dispose(),(e=this._recurrenceDialog)===null||e===void 0||e.hide(id.CANCEL),this.hideAppointmentPopup(),this.hideAppointmentTooltip(),this._asyncTemplatesTimers.forEach(clearTimeout),this._asyncTemplatesTimers=[],super._dispose()}_initActions(){this._actions={onAppointmentAdding:this._createActionByOption(cn.ADDING),onAppointmentAdded:this._createActionByOption(cn.ADDED),onAppointmentUpdating:this._createActionByOption(cn.UPDATING),onAppointmentUpdated:this._createActionByOption(cn.UPDATED),onAppointmentDeleting:this._createActionByOption(cn.DELETING),onAppointmentDeleted:this._createActionByOption(cn.DELETED),onAppointmentFormOpening:this._createActionByOption("onAppointmentFormOpening"),onAppointmentTooltipShowing:this._createActionByOption("onAppointmentTooltipShowing")}}_getAppointmentRenderedAction(){return this._createActionByOption("onAppointmentRendered",{excludeValidators:["disabled","readOnly"]})}_renderFocusTarget(){return B()}_initMarkup(){if(super._initMarkup(),this._renderMainContainer(),this._renderHeader(),this._layoutManager=new Gse(this),this._appointments=this._createComponent("<div>",gH,this._appointmentsConfig()),this._appointments.option("itemTemplate",this._getAppointmentTemplate("appointmentTemplate")),this._appointmentTooltip=new(this.option("adaptivityEnabled")?xre:yre)(this._getAppointmentTooltipOptions()),this._createAppointmentPopupForm(),this._isDataSourceLoaded()||this._isDataSourceLoading())this._initMarkupCore(this.option("loadedResources")),this._dataSourceChangedHandler(this._dataSource.items()),this._fireContentReadyAction();else{const e=this._getCurrentViewOption("groups");jR(e,this.option("resources"),this.option("resourceLoaderMap")).done(n=>{this.option("loadedResources",n),this._initMarkupCore(n),this._reloadDataSource()})}}_createAppointmentPopupForm(){var e;if(this._appointmentForm){var n;(n=this._appointmentForm.form)===null||n===void 0||n.dispose()}this._appointmentForm=this.createAppointmentForm(),(e=this._appointmentPopup)===null||e===void 0||e.dispose(),this._appointmentPopup=this.createAppointmentPopup(this._appointmentForm)}_renderMainContainer(){this._mainContainer=m("<div>").addClass("dx-scheduler-container"),this.$element().append(this._mainContainer)}createAppointmentForm(){const e={createResourceEditorModel:()=>Wne(this.option("resources"),this.option("loadedResources")),getDataAccessors:()=>this._dataAccessors,createComponent:(n,i,s)=>this._createComponent(n,i,s),getEditingConfig:()=>this._editing,getFirstDayOfWeek:()=>this.option("firstDayOfWeek"),getStartDayHour:()=>this.option("startDayHour"),getCalculatedEndDate:n=>this._workSpace.calculateEndDate(n),getTimeZoneCalculator:()=>this.timeZoneCalculator};return new Vne(e)}createAppointmentPopup(e){const n={getElement:()=>this.$element(),createComponent:(i,s,r)=>this._createComponent(i,s,r),focus:()=>this.focus(),getResources:()=>this.option("resources"),getEditingConfig:()=>this._editing,getTimeZoneCalculator:()=>this.timeZoneCalculator,getDataAccessors:()=>this._dataAccessors,getAppointmentFormOpening:()=>this._actions.onAppointmentFormOpening,processActionResult:(i,s)=>this._processActionResult(i,s),addAppointment:i=>this.addAppointment(i),updateAppointment:(i,s)=>this.updateAppointment(i,s),updateScrollPosition:(i,s,r)=>{this._workSpace.updateScrollPosition(i,s,r)}};return new iie(n,e)}_getAppointmentTooltipOptions(){return{createComponent:this._createComponent.bind(this),container:this.$element(),getScrollableContainer:this.getWorkSpaceScrollableContainer.bind(this),addDefaultTemplates:this._templateManager.addDefaultTemplates.bind(this._templateManager),getAppointmentTemplate:this._getAppointmentTemplate.bind(this),showAppointmentPopup:this.showAppointmentPopup.bind(this),checkAndDeleteAppointment:this.checkAndDeleteAppointment.bind(this),isAppointmentInAllDayPanel:this.isAppointmentInAllDayPanel.bind(this),createFormattedDateText:(e,n,i)=>this.fire("getTextAndFormatDate",e,n,i),getAppointmentDisabled:e=>ct(e,this._dataAccessors,this.timeZoneCalculator).disabled,onItemContextMenu:this._createActionByOption("onAppointmentContextMenu"),createEventArgs:this._createEventArgs.bind(this)}}_createEventArgs(e){const n={itemData:e.itemData.appointment,itemElement:e.itemElement,targetedAppointment:e.itemData.targetedAppointment};return T({},this.fire("mapAppointmentFields",n),{component:e.component,element:e.element,event:e.event,model:e.model})}checkAndDeleteAppointment(e,n){const i=ct(n,this._dataAccessors,this.timeZoneCalculator),s=this.fireOnAppointmentDeleting(e,i);this._checkRecurringAppointment(e,n,i.startDate,()=>{this.processDeleteAppointment(e,s)},!0)}_getExtraAppointmentTooltipOptions(){return{rtlEnabled:this.option("rtlEnabled"),focusStateEnabled:this.option("focusStateEnabled"),editing:this.option("editing"),offset:this.option("_appointmentTooltipOffset")}}isAppointmentInAllDayPanel(e){const n=this._workSpace;return this.appointmentTakesAllDay(e)&&n.supportAllDayRow()&&n.option("showAllDayPanel")}_initMarkupCore(e){this._readyToRenderAppointments=ae(),this._workSpace&&this._cleanWorkspace(),this._renderWorkSpace(e),this._appointments.option({fixedContainer:this._workSpace.getFixedContainer(),allDayContainer:this._workSpace.getAllDayContainer()}),this._waitAsyncTemplate(()=>{var n;return(n=this._workSpaceRecalculation)===null||n===void 0?void 0:n.resolve()}),this.createAppointmentDataProvider(),this._filterAppointmentsByDate(),this._validateKeyFieldIfAgendaExist()}_isDataSourceLoaded(){return this._dataSource&&this._dataSource.isLoaded()}_render(){var e;this._toggleSmallClass(),this._toggleAdaptiveClass(),(e=this.getWorkSpace())===null||e===void 0||e.updateHeaderEmptyCellWidth(),super._render()}_renderHeader(){if(this.option("toolbar").length!==0){const e=m("<div>").appendTo(this._mainContainer);this._header=this._createComponent(e,EH,this._headerConfig())}}_headerConfig(){const e=this._getCurrentViewOptions(),n=this._getViewCountConfig(),i=T({firstDayOfWeek:this.getFirstDayOfWeek(),currentView:this.option("currentView"),isAdaptive:this.option("adaptivityEnabled"),tabIndex:this.option("tabIndex"),focusStateEnabled:this.option("focusStateEnabled"),rtlEnabled:this.option("rtlEnabled"),useDropDownViewSwitcher:this.option("useDropDownViewSwitcher"),customizeDateNavigatorText:this.option("customizeDateNavigatorText"),agendaDuration:e.agendaDuration||7},e);return i.intervalCount=n.intervalCount,i.views=this.option("views"),i.min=new Date(this._dateOption("min")),i.max=new Date(this._dateOption("max")),i.currentDate=V.trimTime(new Date(this._dateOption("currentDate"))),i.onCurrentViewChange=s=>{this.option("currentView",s)},i.onCurrentDateChange=s=>{this.option("currentDate",s)},i.items=this.option("toolbar"),i.startViewDate=this.getStartViewDate(),i.todayDate=()=>this.timeZoneCalculator.createDate(new Date,{path:"toGrid"}),i}_appointmentsConfig(){return{getResources:()=>this.option("resources"),getResourceDataAccessors:this.getResourceDataAccessors.bind(this),getAgendaResourceProcessor:()=>this.agendaResourceProcessor,getAppointmentColor:this.createGetAppointmentColor(),getAppointmentDataProvider:()=>this.appointmentDataProvider,dataAccessors:this._dataAccessors,observer:this,onItemRendered:this._getAppointmentRenderedAction(),onItemClick:this._createActionByOption("onAppointmentClick"),onItemContextMenu:this._createActionByOption("onAppointmentContextMenu"),onAppointmentDblClick:this._createActionByOption("onAppointmentDblClick"),tabIndex:this.option("tabIndex"),focusStateEnabled:this.option("focusStateEnabled"),allowDrag:this._allowDragging(),allowDelete:this._editing.allowUpdating&&this._editing.allowDeleting,allowResize:this._allowResizing(),allowAllDayResize:this._allowAllDayResizing(),rtlEnabled:this.option("rtlEnabled"),currentView:this.currentView,groups:this._getCurrentViewOption("groups"),timeZoneCalculator:this.timeZoneCalculator,getResizableStep:()=>this._workSpace?this._workSpace.positionHelper.getResizableStep():0,getDOMElementsMetaData:()=>{var n;return(n=this._workSpace)===null||n===void 0?void 0:n.getDOMElementsMetaData()},getViewDataProvider:()=>{var n;return(n=this._workSpace)===null||n===void 0?void 0:n.viewDataProvider},isVerticalViewDirection:()=>this.getRenderingStrategyInstance().getDirection()==="vertical",isVerticalGroupedWorkSpace:()=>this._workSpace._isVerticalGroupedWorkSpace(),isDateAndTimeView:()=>ol(this._workSpace.type),onContentReady:()=>{var n;(n=this._workSpace)===null||n===void 0||n.option("allDayExpanded",this._isAllDayExpanded())}}}getCollectorOffset(){return this._workSpace.needApplyCollectorOffset()&&!this.option("adaptivityEnabled")?this.option("_collectorOffset"):0}getAppointmentDurationInMinutes(){return this._getCurrentViewOption("cellDuration")}_getCurrentViewType(){return this.currentViewType}_renderWorkSpace(e){var n;this._readyToRenderAppointments&&this._toggleSmallClass();const i=m("<div>").appendTo(this._mainContainer),s=this._getViewCountConfig(),r=Dae[this._getCurrentViewType()].workSpace,o=this._workSpaceConfig(e,s);this._workSpace=this._createComponent(i,r,o),this._allowDragging()&&this._workSpace.initDragBehavior(this,this._all),this._workSpace._attachTablesEvents(),this._workSpace.getWorkArea().append(this._appointments.$element()),this._recalculateWorkspace(),s.startDate&&((n=this._header)===null||n===void 0||n.option("currentDate",this._workSpace._getHeaderDate())),this._appointments.option("_collectorOffset",this.getCollectorOffset())}_getViewCountConfig(){const e=this.option("currentView"),n=this._getViewByName(e),i=n&&n.intervalCount||1,s=n&&n.startDate||null;return{intervalCount:i,startDate:s}}_getViewByName(e){const n=this.option("views");for(let i=0;i<n.length;i++)if(n[i].name===e||n[i].type===e||n[i]===e)return n[i]}_recalculateWorkspace(){this._workSpaceRecalculation=new j,this._waitAsyncTemplate(()=>{Ji(this._workSpace.$element()),this._workSpace.renderCurrentDateTimeLineAndShader()})}_workSpaceConfig(e,n){var i;const s=this._getCurrentViewOptions(),r=this.option("scrolling"),o=r.mode==="virtual"||((i=s.scrolling)===null||i===void 0?void 0:i.mode)==="virtual",a=o&&(!M(r.orientation)||["horizontal","both"].filter(u=>{var d;return r.orientation===u||((d=s.scrolling)===null||d===void 0?void 0:d.orientation)===u}).length>0),l=this.option("crossScrollingEnabled")||a||B_(this.currentViewType),c=T({resources:this.option("resources"),loadedResources:this.option("loadedResources"),getFilteredItems:()=>this.filteredItems,getResourceDataAccessors:this.getResourceDataAccessors.bind(this),noDataText:this.option("noDataText"),firstDayOfWeek:this.option("firstDayOfWeek"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),viewOffset:this.getViewOffsetMs(),tabIndex:this.option("tabIndex"),accessKey:this.option("accessKey"),focusStateEnabled:this.option("focusStateEnabled"),cellDuration:this.option("cellDuration"),showAllDayPanel:this.option("showAllDayPanel"),showCurrentTimeIndicator:this.option("showCurrentTimeIndicator"),indicatorTime:this.option("indicatorTime"),indicatorUpdateInterval:this.option("indicatorUpdateInterval"),shadeUntilCurrentTime:this.option("shadeUntilCurrentTime"),allDayExpanded:this._appointments.option("items"),crossScrollingEnabled:l,dataCellTemplate:this.option("dataCellTemplate"),timeCellTemplate:this.option("timeCellTemplate"),resourceCellTemplate:this.option("resourceCellTemplate"),dateCellTemplate:this.option("dateCellTemplate"),allowMultipleCellSelection:this.option("allowMultipleCellSelection"),selectedCellData:this.option("selectedCellData"),onSelectionChanged:u=>{this.option("selectedCellData",u.selectedCellData)},groupByDate:this._getCurrentViewOption("groupByDate"),scrolling:r,draggingMode:this.option("_draggingMode"),timeZoneCalculator:this.timeZoneCalculator,schedulerHeight:this.option("height"),schedulerWidth:this.option("width"),allDayPanelMode:this.option("allDayPanelMode"),onSelectedCellsClick:this.showAddAppointmentPopup.bind(this),onRenderAppointments:this._renderAppointments.bind(this),onShowAllDayPanel:u=>this.option("showAllDayPanel",u),getHeaderHeight:()=>Nn.DOM.getHeaderHeight(this._header),onScrollEnd:()=>this._appointments.updateResizableArea(),renovateRender:this._isRenovatedRender(o)},s);return c.observer=this,c.intervalCount=n.intervalCount,c.startDate=n.startDate,c.groups=e,c.onCellClick=this._createActionByOption("onCellClick"),c.onCellContextMenu=this._createActionByOption("onCellContextMenu"),c.currentDate=V.trimTime(new Date(this._dateOption("currentDate"))),c.hoursInterval=c.cellDuration/60,c.allDayExpanded=!1,c.dataCellTemplate=c.dataCellTemplate?this._getTemplate(c.dataCellTemplate):null,c.timeCellTemplate=c.timeCellTemplate?this._getTemplate(c.timeCellTemplate):null,c.resourceCellTemplate=c.resourceCellTemplate?this._getTemplate(c.resourceCellTemplate):null,c.dateCellTemplate=c.dateCellTemplate?this._getTemplate(c.dateCellTemplate):null,c.getAppointmentDataProvider=()=>this.appointmentDataProvider,c}_isRenovatedRender(e){return this.option("renovateRender")&&ae()||e}_waitAsyncTemplate(e){if(this._options.silent("templatesRenderAsynchronously")){const n=setTimeout(()=>{e(),clearTimeout(n)});this._asyncTemplatesTimers.push(n)}else e()}_getCurrentViewOptions(){return this.currentView}_getCurrentViewOption(e){return this.currentView&&this.currentView[e]!==void 0?this.currentView[e]:this.option(e)}_getAppointmentTemplate(e){const n=this._getCurrentViewOptions();return n&&n[e]?this._getTemplate(n[e]):this._getTemplateByOption(e)}_updateOption(e,n,i){const s=this._getCurrentViewOptions();(!s||!M(s[n]))&&this[`_${e}`].option(n,i)}_refreshWorkSpace(e){this._cleanWorkspace(),delete this._workSpace,this._renderWorkSpace(e),this._readyToRenderAppointments&&(this._appointments.option({fixedContainer:this._workSpace.getFixedContainer(),allDayContainer:this._workSpace.getAllDayContainer()}),this._waitAsyncTemplate(()=>this._workSpaceRecalculation.resolve()))}_cleanWorkspace(){this._appointments.$element().detach(),this._workSpace._dispose(),this._workSpace.$element().remove(),this.option("selectedCellData",[])}getWorkSpaceScrollable(){return this._workSpace.getScrollable()}getWorkSpaceScrollableContainer(){return this._workSpace.getScrollableContainer()}getWorkSpace(){return this._workSpace}getHeader(){return this._header}_cleanPopup(){var e;(e=this._appointmentPopup)===null||e===void 0||e.dispose()}_checkRecurringAppointment(e,n,i,s,r,o,a,l){const c=Be.getField(this._dataAccessors,"recurrenceRule",e);if(!ks().evalRecurrenceRule(c).isValid||!this._editing.allowUpdating){s();return}switch(l||this.option("recurrenceEditMode")){case"series":s();break;case"occurrence":this._excludeAppointmentFromSeries(e,n,i,r,o,a);break;default:a&&(a.cancel=new j),this._showRecurrenceChangeConfirm(r).done(d=>{d===id.SERIES&&s(),d===id.OCCURENCE&&this._excludeAppointmentFromSeries(e,n,i,r,o,a)}).fail(()=>this._appointments.moveAppointmentBack(a))}}_excludeAppointmentFromSeries(e,n,i,s,r,o){const a=KQ(e,i,this._dataAccessors,this._timeZoneCalculator),l=L({},n);delete l[this._dataAccessors.expr.recurrenceExceptionExpr],delete l[this._dataAccessors.expr.recurrenceRuleExpr];const c=this.appointmentDataProvider.keyName;delete l[c],!s&&!r&&this.addAppointment(l),r?(this._appointmentPopup.show(l,{isToolbarVisible:!0,action:$a.EXCLUDE_FROM_SERIES,excludeInfo:{sourceAppointment:e,updatedAppointment:a.source()}}),this._editAppointmentData=e):this._updateAppointment(e,a.source(),()=>{this._appointments.moveAppointmentBack(o)},o)}_createRecurrenceException(e,n){const i=[];return e.recurrenceException&&i.push(e.recurrenceException),i.push(this._getSerializedDate(n,e.startDate,e.allDay)),i.join()}_getSerializedDate(e,n,i){return i&&e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),je.serializeDate(e,Cae)}_showRecurrenceChangeConfirm(e){const n=q.format(e?"dxScheduler-confirmRecurrenceDeleteTitle":"dxScheduler-confirmRecurrenceEditTitle"),i=q.format(e?"dxScheduler-confirmRecurrenceDeleteMessage":"dxScheduler-confirmRecurrenceEditMessage"),s=q.format(e?"dxScheduler-confirmRecurrenceDeleteSeries":"dxScheduler-confirmRecurrenceEditSeries"),r=q.format(e?"dxScheduler-confirmRecurrenceDeleteOccurrence":"dxScheduler-confirmRecurrenceEditOccurrence");return this._recurrenceDialog=m7({title:n,messageHtml:i,showCloseButton:!0,showTitle:!0,buttons:[{text:s,onClick:()=>id.SERIES},{text:r,onClick:()=>id.OCCURENCE}],popupOptions:{wrapperAttr:{class:"dx-dialog"}}}),this._recurrenceDialog.show()}_getUpdatedData(e){const n=this.getViewOffsetMs(),i=C=>{if(!C)return;const x=this.timeZoneCalculator.createDate(C,{path:"fromGrid"});return he.addOffsets(x,[-n])},s=C=>!isNaN(new Date(C).getTime()),r=this.getTargetCellData(),o=ct(e,this._dataAccessors,this.timeZoneCalculator),a=i(r.startDate),l=i(r.endDate);let c=new Date(o.startDate);c=he.addOffsets(c,[-n]);let u=new Date(o.endDate);u=he.addOffsets(u,[-n]);let d=a??c;s(c)||(c=d),s(u)||(u=l);const p=u.getTime()-c.getTime();if(this._workSpace.keepOriginalHours()&&s(o.startDate)&&s(a)){const C=this.timeZoneCalculator.createDate(c,{path:"toGrid"}),x=C.getTime()-V.trimTime(C).getTime(),S=he.addOffsets(r.startDate,[-n]);d=new Date(V.trimTime(S).getTime()+x),d=this.timeZoneCalculator.createDate(d,{path:"fromGrid"})}const g=ct({},this._dataAccessors,this.timeZoneCalculator);r.allDay!==void 0&&(g.allDay=r.allDay),g.startDate=d;let y=new Date(d.getTime()+p);if(this.appointmentTakesAllDay(e)&&!g.allDay&&this._workSpace.supportAllDayRow()&&(y=this._workSpace.calculateEndDate(d)),o.allDay&&!this._workSpace.supportAllDayRow()&&!this._workSpace.keepOriginalHours()){const C=new Date(d);C.setHours(0),y=new Date(C.getTime()+p),y.getHours()!==0&&y.setHours(this._getCurrentViewOption("endDayHour"))}g.startDate=he.addOffsets(g.startDate,[n]),g.endDate=he.addOffsets(y,[n]);const v=g.source();return Qne(this.option("resources"),this.getResourceDataAccessors(),v,r.groups),v}getTargetedAppointment(e,n){const i=Nn.dataAccessors.getAppointmentSettings(n),s=Nn.dataAccessors.getAppointmentInfo(n),r=m(n).data(this._appointments._itemIndexKey()),o=ct(e,this._dataAccessors,this.timeZoneCalculator),a=o.clone();if(this._isAgenda()&&o.isRecurrent){const{agendaSettings:c}=i;a.startDate=Be.getField(this._dataAccessors,"startDate",c),a.endDate=Be.getField(this._dataAccessors,"endDate",c)}else i&&(a.startDate=s?s.sourceAppointment.startDate:o.startDate,a.endDate=s?s.sourceAppointment.endDate:o.endDate);const l=a.source();return n&&this.setTargetedAppointmentResources(l,n,r),s&&(l.displayStartDate=new Date(s.appointment.startDate),l.displayEndDate=new Date(s.appointment.endDate)),l}subscribe(e,n){this._subscribes[e]=rO[e]=n}fire(e){const n=this._subscribes[e],i=Array.prototype.slice.call(arguments);if(!ie(n))throw it.Error("E1031",e);return n.apply(this,i.slice(1))}getTargetCellData(){return this._workSpace.getDataByDroppableCell()}_updateAppointment(e,n,i,s){const r={newData:n,oldData:T({},e),cancel:!1},o=(function(a){if(i&&i.call(this),a&&a.name==="Error")throw a}).bind(this);return this._actions[cn.UPDATING](r),s&&!Fh(s.cancel)&&(s.cancel=new j),this._processActionResult(r,function(a){let l=new j;if(a)o(),l.resolve();else{this._expandAllDayPanel(n);try{l=this.appointmentDataProvider.update(e,n).done(()=>{s&&s.cancel.resolve(!1)}).always(c=>this._onDataPromiseCompleted(cn.UPDATED,c)).fail(()=>o())}catch(c){o(c),l.resolve()}}return l.promise()})}_processActionResult(e,n){const i=new j,s=r=>{Ne(vi(r)).always(i.resolve)};return fl(e.cancel)?Ne(vi(e.cancel)).always(r=>{M(r)||(r=e.cancel.state()==="rejected"),s(n.call(this,r))}):s(n.call(this,e.cancel)),i.promise()}_expandAllDayPanel(e){!this._isAllDayExpanded()&&this.appointmentTakesAllDay(e)&&this._workSpace.option("allDayExpanded",!0)}_onDataPromiseCompleted(e,n,i){const s={appointmentData:i||n};n instanceof Error?s.error=n:this._appointmentPopup.visible&&this._appointmentPopup.hide(),this._actions[e](s),this._fireContentReadyAction()}getAppointmentsInstance(){return this._appointments}getLayoutManager(){return this._layoutManager}getRenderingStrategyInstance(){return this.getLayoutManager().getRenderingStrategyInstance()}getActions(){return this._actions}appointmentTakesAllDay(e){const n=ct(e,this._dataAccessors,this.timeZoneCalculator);return Oc(n,this._getCurrentViewOption("allDayPanelMode"))}dayHasAppointment(e,n,i){const s=d=>this.timeZoneCalculator.createDate(d,{path:"toGrid"}),r=ct(n,this._dataAccessors,this.timeZoneCalculator);let o=new Date(r.startDate),a=new Date(r.endDate);if(o=s(o),a=s(a),e.getTime()===a.getTime())return o.getTime()===a.getTime();i&&(e=V.trimTime(e),o=V.trimTime(o),a=V.trimTime(a));const l=e.getTime(),c=o.getTime(),u=a.getTime();return c<=l&&l<=u}setTargetedAppointmentResources(e,n,i){const s=this._getCurrentViewOption("groups");if(s!=null&&s.length){const r=this.getResourceDataAccessors().setter,o=this._workSpace;let a,l;this._isAgenda()?(a=function(){const c=this.getLayoutManager()._positionMap[i];return Pc(c[0].groupIndex,this.getWorkSpace().option("groups"))},l=function(c,u){r[u.name](e,u.id)}):(a=function(){const c=Nn.dataAccessors.getAppointmentSettings(n)||{};return o.getCellDataByCoordinates({left:c.left,top:c.top}).groups},l=function(c,u){r[c](e,u)}),N(a.call(this),l)}}getStartViewDate(){var e;return(e=this._workSpace)===null||e===void 0?void 0:e.getStartViewDate()}getEndViewDate(){return this._workSpace.getEndViewDate()}showAddAppointmentPopup(e,n){const i=ct({},this._dataAccessors,this.timeZoneCalculator);i.allDay=e.allDay,i.startDate=this.timeZoneCalculator.createDate(e.startDate,{path:"fromGrid"}),i.endDate=this.timeZoneCalculator.createDate(e.endDate,{path:"fromGrid"});const s=T(i.source(),n);this.showAppointmentPopup(s,!0)}showAppointmentPopup(e,n,i){const s=L({},i);s&&(delete s.displayStartDate,delete s.displayEndDate);const r=ct(s||e,this._dataAccessors,this.timeZoneCalculator),o=T({},e,s),a=n??ti(e);ti(e)&&(e=this.createPopupAppointment()),a?(delete this._editAppointmentData,this._editing.allowAdding&&this._appointmentPopup.show(e,{isToolbarVisible:!0,action:$a.CREATE})):this._checkRecurringAppointment(e,o,r.startDate,()=>{this._editAppointmentData=e,this._appointmentPopup.show(e,{isToolbarVisible:this._editing.allowUpdating,action:$a.UPDATE})},!1,!0)}createPopupAppointment(){const e={},n=V.dateToMilliseconds,i=new Date(this.option("currentDate")),s=new Date(i.getTime()+this.option("cellDuration")*n("minute"));return Be.setField(this._dataAccessors,"startDate",e,i),Be.setField(this._dataAccessors,"endDate",e,s),e}hideAppointmentPopup(e){var n;(n=this._appointmentPopup)!==null&&n!==void 0&&n.visible&&(e&&this._appointmentPopup.saveChangesAsync(),this._appointmentPopup.hide())}showAppointmentTooltip(e,n,i){if(e){const s=Nn.dataAccessors.getAppointmentSettings(n),r={itemData:i||e,groupIndex:s==null?void 0:s.groupIndex,groups:this.option("groups")},a=this.createGetAppointmentColor()(r),l=new LH(e,i,a);this.showAppointmentTooltipCore(n,[l])}}createGetAppointmentColor(){return e=>{const n={resources:this.option("resources"),dataAccessors:this.getResourceDataAccessors(),loadedResources:this.option("loadedResources"),resourceLoaderMap:this.option("resourceLoaderMap")};return Jne(n,e)}}showAppointmentTooltipCore(e,n,i){const s={cancel:!1,appointments:n.map(r=>{const o={appointmentData:r.appointment,currentAppointmentData:L({},r.targetedAppointment),color:r.color};if(r.settings.info){const{startDate:a,endDate:l}=r.settings.info.appointment;o.currentAppointmentData.displayStartDate=a,o.currentAppointmentData.displayEndDate=l}return o}),targetElement:se(e)};this._createActionByOption("onAppointmentTooltipShowing")(s),this._appointmentTooltip.isAlreadyShown(e)?this.hideAppointmentTooltip():this._processActionResult(s,r=>{!r&&this._appointmentTooltip.show(e,n,L({},this._getExtraAppointmentTooltipOptions(),i))})}hideAppointmentTooltip(){this._appointmentTooltip&&this._appointmentTooltip.hide()}scrollToTime(e,n,i){it.log("W0002","dxScheduler","scrollToTime","21.1",'Use the "scrollTo" method instead'),this._workSpace.scrollToTime(e,n,i)}scrollTo(e,n,i){this._workSpace.scrollTo(e,n,i)}_isHorizontalVirtualScrolling(){const e=this.option("scrolling"),{orientation:n,mode:i}=e;return i==="virtual"&&(n==="horizontal"||n==="both")}addAppointment(e){const n=ct(e,this._dataAccessors,this.timeZoneCalculator);n.text=n.text||"";const i=n.source(!0),s={appointmentData:i,cancel:!1};return this._actions[cn.ADDING](s),this._processActionResult(s,r=>r?new j().resolve():(this._expandAllDayPanel(i),this.appointmentDataProvider.add(i).always(o=>this._onDataPromiseCompleted(cn.ADDED,o))))}updateAppointment(e,n){return this._updateAppointment(e,n)}deleteAppointment(e){const n=this.fireOnAppointmentDeleting(e);this.processDeleteAppointment(e,n)}fireOnAppointmentDeleting(e,n){const i={appointmentData:e,targetedAppointmentData:n,cancel:!1};return this._actions[cn.DELETING](i),i}processDeleteAppointment(e,n){this._processActionResult(n,function(i){i||this.appointmentDataProvider.remove(e).always(s=>this._onDataPromiseCompleted(cn.DELETED,s,e))})}deleteRecurrence(e,n,i){this._checkRecurringAppointment(e,{},n,()=>{this.processDeleteAppointment(e,{cancel:!1})},!0,!1,null,i)}focus(){this._editAppointmentData?this._appointments.focus():this._workSpace.focus()}getFirstDayOfWeek(){return M(this.option("firstDayOfWeek"))?this.option("firstDayOfWeek"):ee.firstDayOfWeekIndex()}_validateKeyFieldIfAgendaExist(){if(!this.appointmentDataProvider.isDataSourceInit)return;const e=!!this._getViewByName("agenda"),n=!!this.appointmentDataProvider.keyName;e&&!n&&it.log("W1023")}_getDragBehavior(){return this._workSpace.dragBehavior}getViewOffsetMs(){const e=this._getCurrentViewOption("offset");return this.normalizeViewOffsetValue(e)}normalizeViewOffsetValue(e){return!M(e)||this.currentViewType===_t.AGENDA?0:e*mae("minute")}validateOptions(){const e=L({},this.option(),{startDayHour:this._getCurrentViewOption("startDayHour"),endDayHour:this._getCurrentViewOption("endDayHour"),offset:this._getCurrentViewOption("offset"),cellDuration:this._getCurrentViewOption("cellDuration")}),n=this._optionsValidator.validate(e);this._optionsValidatorErrorHandler.handleValidationResult(n)}};yb.include(Hw);re("dxScheduler",yb);const H0=b.on;b.one;const ec=b.off;b.trigger;const xae=b.triggerHandler;b.Event;/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const FN=G.createContext(void 0),LO=G.createContext(void 0);function vC(){return Math.random().toString(36).substring(2)}class wae{constructor(){this._map=new Map}set({key1:e,key2:n},i){let s=this._map.get(e);s||(s=new Map,this._map.set(e,s)),s.set(n,i)}get({key1:e,key2:n}){const i=this._map.get(e);return i?i.get(n):void 0}delete({key1:e,key2:n}){const i=this._map.get(e);i&&(i.delete(n),i.size===0&&this._map.delete(e))}clear(){this._map.clear()}get empty(){return this._map.size===0}*[Symbol.iterator](){for(const[e,n]of this._map)for(const[i,s]of n)yield[{key1:e,key2:i},s]}}class Sae extends wae{}function bae(t){return t.length?`${t[0].toUpperCase()}${t.substr(1)}`:""}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */function ca(...t){return t.filter(e=>e).join(".")}function Eae(t){const e=t.split("[");return e.length===1?{isCollectionItem:!1,name:t}:{isCollectionItem:!0,name:e[0],index:Number(e[1].slice(0,-1))}}const Tae=(t,e)=>Object.keys(t).length!==Object.keys(e).length?!1:Object.keys(t).every(n=>t[n]===e[n]);/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */function N0(t,e,n){t.templates.forEach(i=>{if(i.isAnonymous){const s=ca(t.fullName,i.optionName);e[i.optionName]=s,n[s]=i}else n[i.optionName]=i})}function Xc(t,e,n){const i={};return Object.keys(t.predefinedOptions).forEach(s=>{i[s]=t.predefinedOptions[s]}),Object.keys(t.configs).forEach(s=>{i[s]=Xc(t.configs[s],e,n)}),Object.keys(t.configCollections).forEach(s=>{i[s]=t.configCollections[s].map(r=>Xc(r,e,n))}),n||Object.keys(t.initialOptions).forEach(s=>{i[s]=t.initialOptions[s]}),Object.keys(t.options).forEach(s=>{i[s]=t.options[s]}),N0(t,i,e),i}function z0(t,e){const n={},i=Xc(t,n,e);return{templates:n,options:i}}var al;(function(t){t[t.Simple=0]="Simple",t[t.Complex=1]="Complex",t[t.Array=2]="Array"})(al||(al={}));function HN(t,e){const n=e.shift();if(!n)return{value:t,type:al.Simple};if(t instanceof Object&&Object.keys(t).includes(n))return HN(t[n],e)}function Pd(t,e){const n=e.shift();if(!n)return{value:z0(t,!0).options,type:al.Complex};const i=Eae(n);if(i.name in t.options){const o=i.isCollectionItem?t.options[i.name][i.index]:t.options[i.name];return HN(o,e)}if(i.isCollectionItem){const o=t.configCollections[i.name];if(!o)return;const a=o[i.index];return a?Pd(a,e):void 0}const s=t.configs[i.name];if(s)return Pd(s,e);const r=t.configCollections[i.name];if(r)return e.length!==0?void 0:{value:r.map(o=>Xc(o,{},!0)),type:al.Array}}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */function Iae(t,e,n){const i={},s={},r={},o={};N0(t,i,s),N0(e,r,o),n.addRemovedValues(i,r,t.fullName),Object.keys(i).forEach(a=>{i[a]!==r[a]&&(n.options[ca(t.fullName,a)]=i[a])}),Object.keys(s).forEach(a=>{const l=s[a],c=o[a];c&&l.content===c.content||(n.templates[a]=l)})}function vb(t,e,n){if(!e){n.options[t.fullName]=Xc(t,n.templates,!0);return}n.addRemovedValues(t.options,e.options,t.fullName),n.addRemovedValues(t.configCollections,e.configCollections,t.fullName),n.addRemovedValues(t.configs,e.configs,t.fullName),Rae(t,e,n),Object.keys(t.configs).forEach(i=>{vb(t.configs[i],e.configs[i],n)}),Object.keys(t.options).forEach(i=>{t.options[i]!==e.options[i]&&(n.options[ca(t.fullName,i)]=t.options[i])}),Iae(t,e,n)}function Aae(t,e,n,i){Object.keys(e).filter(r=>!Object.keys(t).includes(r)).forEach(r=>{i.push(ca(n,r))})}function kae(t,e){const n={options:{},removedOptions:[],templates:{},addRemovedValues(i,s,r){Aae(i,s,r,this.removedOptions)}};return vb(t,e,n),n}function Rae(t,e,n){Object.keys(t.configCollections).forEach(i=>{const s=t.configCollections[i],r=e.configCollections[i]||[];if(!s||s.length!==r.length){const o=[];s.forEach(a=>{const l=Xc(a,n.templates,!0);o.push(l)}),n.options[ca(t.fullName,i)]=o;return}for(let o=0;o<s.length;o+=1)vb(s[o],r[o],n)})}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const W0=new Set;let NN=-1,zN=-1;function WN(){clearTimeout(NN),clearTimeout(zN)}function GN(){WN(),NN=window.setTimeout(()=>{zN=window.setTimeout(()=>{W0.forEach(t=>t.execGuards())})})}class Oae{constructor(){this.guards={},this.isUpdating=!1,this.onOptionChanged=this.onOptionChanged.bind(this),this.wrapOptionValue=this.wrapOptionValue.bind(this)}setInstance(e,n,i,s){this.instance=e,this.currentConfig=n,this.subscribableOptions=new Set(i),this.independentEvents=new Set(s),W0.add(this)}getInitialOptions(e){const n=z0(e,!1),i={};return Object.keys(n.options).forEach(s=>{i[s]=this.wrapOptionValue(s,n.options[s])}),i}getTemplateOptions(e){return z0(e,!1).templates}update(e,n){const i=[],s=({value:o,fullName:a})=>{i.push([a,o])};this.instance.on("optionChanged",s);const r=kae(e,this.currentConfig);!r.options&&!r.templates&&!r.removedOptions.length||(this.instance.beginUpdate(),this.isUpdating=!0,r.removedOptions.forEach(o=>{this.resetOption(o)}),Object.keys(n).length>0&&this.setValue("integrationOptions",{templates:n}),Object.keys(r.options).forEach(o=>{this.setValue(o,r.options[o])}),this.isUpdating=!1,this.instance.off("optionChanged",s),this.currentConfig=e,i.forEach(([o,a])=>{const l=e.options[o];Object.prototype.hasOwnProperty.call(e.options,o)&&l!==a&&this.setValue(o,l)}),this.instance.endUpdate())}onOptionChanged(e){var r;if(this.isUpdating)return;let n=Pd(this.currentConfig,e.fullName.split("."));if((!n||n.value!==e.value)&&this.callOptionChangeHandler(e.fullName,e.value),n=Pd(this.currentConfig,e.fullName.split(".")),!n)return;const{value:i,type:s}=n;if(i instanceof Array&&s===al.Array){for(let o=0;o<i.length;o+=1)if(i[o]!==((r=e.value)==null?void 0:r[o])){this.addGuard(e.fullName,i);return}}else if(s===al.Complex&&i instanceof Object)Object.keys(i).forEach(o=>{var a;i[o]!==((a=e.value)==null?void 0:a[o])&&this.addGuard(ca(e.fullName,o),i[o])});else{const o=i===e.value,a=!o&&i instanceof Object&&e.value instanceof Object&&Tae(i,e.value);if(o||a||this.instance.skipOptionsRollBack)return;this.addGuard(e.fullName,i)}}get isInstanceSet(){return!!this.instance}dispose(){W0.delete(this),Object.keys(this.guards).forEach(e=>{delete this.guards[e]}),this.instance=null}isOptionSubscribable(e){return this.subscribableOptions.has(e)}isIndependentEvent(e){return this.independentEvents.has(e)}callOptionChangeHandler(e,n){if(!this.isOptionSubscribable(e))return;const i=e.split("."),s=i[i.length-1];if(s.startsWith("on"))return;const r=`on${bae(s)}Change`;i[i.length-1]=r;const o=Pd(this.currentConfig,i);if(o){if(typeof o.value!="function")throw new Error(`Invalid value for the ${r} property.
                ${r} must be a function.`);o.value(n)}}wrapOptionValue(e,n){return e.substr(0,2)==="on"&&typeof n=="function"?(...i)=>{(!this.isUpdating||this.isIndependentEvent(e))&&n(...i)}:n}addGuard(e,n){if(this.guards[e]!==void 0)return;const i=()=>{this.setValue(e,n),delete this.guards[e]};this.guards[e]=i,GN()}execGuards(){Object.values(this.guards).forEach(e=>e())}resetOption(e){this.instance.resetOption(e)}setValue(e,n){this.guards[e]&&delete this.guards[e],this.instance.option(e,this.wrapOptionValue(e,n))}}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const UN=["style","id"],KN="className",Pae=["dropZone","dialogTrigger"],Mae={WidgetClass:{},isPortalComponent:!1,defaults:{},templateProps:[],expectedChildren:{},subscribableOptions:[],independentEvents:[],useRequestAnimationFrameFlag:!1,clearExtensions:()=>{},renderChildren:()=>{},beforeCreateWidget:()=>{},afterCreateWidget:()=>{}};function Vae(t){return t==="children"||t===KN||UN.includes(t)||Object.prototype.hasOwnProperty.call(Mae,t)}function Bae(t){var e,n;return t!=null&&t.current?(n=(e=t.current).instance)!=null&&n.call(e).element()?t.current.instance().element():t.current:t}function Lae(t,e,n){n=n||[];const i={},s={},r={},o={};return n.forEach(a=>{o[a.component]=!0,o[a.render]=!0}),Object.keys(t).forEach(a=>{const l=e?e[a]:null,c=t[a];if(!Vae(a)){if(l){i[l]=c;return}if(o[a]){r[a]=c;return}if(Pae.includes(a)){s[a]=Bae(c);return}s[a]=t[a]}}),{options:s,defaults:i,templates:r}}function $O(t){return t[KN]}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const $ae=G.memo(()=>null);/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */var Ks;(function(t){t[t.Option=0]="Option",t[t.Template=1]="Template",t[t.Unknown=2]="Unknown"})(Ks||(Ks={}));function jN(t,e){const n=t;if(!n||!n.type)return{type:Ks.Unknown};if(n.type===$ae)return{type:Ks.Template,props:n.props};const i=n.type;if(i.OptionName){let s=i.OptionName,r=i.IsCollectionItem;const o=e&&e[s];return o&&(r=o.isCollectionItem,o.optionName&&(s=o.optionName)),{type:Ks.Option,descriptor:{name:s,isCollection:!!r,templates:i.TemplateProps||[],initialValuesProps:i.DefaultsProps||{},predefinedValuesProps:i.PredefinedProps||{},expectedChildren:i.ExpectedChildren||{}},props:n.props}}return{type:Ks.Unknown}}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */function Fae(t,e,n){return e.tmplOption==="template"&&n?{optionName:e.tmplOption,isAnonymous:!0,type:"children",content:t.children}:t[e.render]?{optionName:e.tmplOption,isAnonymous:!0,type:"render",content:t[e.render]}:t[e.component]?{optionName:e.tmplOption,isAnonymous:!0,type:"component",content:t[e.component]}:null}function Hae(t){return t.name?t.component?{optionName:t.name,isAnonymous:!1,type:"component",content:t.component}:t.render?{optionName:t.name,isAnonymous:!1,type:"render",content:t.render}:{optionName:t.name,isAnonymous:!1,type:"children",content:t.children}:null}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */function Nae(t,e){const n=[],i={},s={};let r=!1;return G.Children.map(t.props.children,o=>{const a=jN(o,t.descriptor.expectedChildren);if(a.type===Ks.Unknown){o!=null&&o!==!1&&(r=!0);return}if(a.type===Ks.Template){const c=Hae(a.props);c&&n.push(c);return}if(a.descriptor.isCollection){let c=i[a.descriptor.name];c||(c=[],i[a.descriptor.name]=c);const u=G0(a,`${ca(e,a.descriptor.name)}[${c.length}]`);c.push(u);return}const l=G0(a,e);s[a.descriptor.name]=l}),{configs:s,configCollections:i,templates:n,hasTranscludedContent:r}}function G0(t,e){const n=t.descriptor.isCollection?e:ca(e,t.descriptor.name),i=Lae(t.props,t.descriptor.initialValuesProps,t.descriptor.templates),s=Nae(t,n);return t.descriptor.templates.forEach(r=>{const o=Fae(t.props,r,e.length>0?s.hasTranscludedContent:!1);o&&s.templates.push(o)}),{fullName:n,predefinedOptions:t.descriptor.predefinedValuesProps,initialOptions:i.defaults,options:i.options,templates:s.templates,configCollections:s.configCollections,configs:s.configs}}function zae(t,e){return G0({type:Ks.Option,descriptor:{name:"",isCollection:!1,...t},props:e},"")}/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const FO=(t,e,n)=>{const i={display:"none"};switch(t){case"TABLE":return G.createElement("tbody",{style:i,ref:e});case"TBODY":return G.createElement("tr",{style:i,ref:e});default:return G.createElement(n,{style:i,ref:e})}},Wae=({templateFactory:t,data:e,index:n,container:i,onRemoved:s,onRendered:r})=>{const[o,a]=G.useState(!1),l=G.useRef(!1),c=G.useMemo(()=>({lock(){l.current=!0},unlock(){l.current=!1}}),[]),u=G.useRef(),d=G.useRef(),p=G.useRef(),f=G.useCallback((v,C)=>{C!=null&&C.isUnmounting||l.current||(u.current&&ec(u.current,Hs,f),p.current&&ec(p.current,Hs,f),s())},[s]);G.useLayoutEffect(()=>{const v=u.current;return v&&v.nodeType===Node.ELEMENT_NODE?(ec(v,Hs,f),H0(v,Hs,f)):o?p.current&&(ec(p.current,Hs,f),H0(p.current,Hs,f)):a(!0),()=>{u.current&&i.appendChild(u.current),d.current&&i.appendChild(d.current),p.current&&i.appendChild(p.current),v&&ec(v,Hs,f)}},[f,o,i]),G.useEffect(()=>{r()},[r]);const g=FO(i==null?void 0:i.nodeName,v=>{d.current=v,u.current=v==null?void 0:v.previousSibling},"div"),y=o?FO(i==null?void 0:i.nodeName,v=>{p.current=v},"span"):void 0;return aw.createPortal(G.createElement(G.Fragment,null,G.createElement(FN.Provider,{value:c},t({data:e,index:n,onRendered:r}),g,y)),i)},Gae=G.memo(Wae);/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const Uae=({init:t})=>{const[e,n]=G.useState({collection:new Sae}),[i,s]=G.useState(),r=G.useRef(""),o=G.useRef({}),a=G.useCallback((g,y)=>{g.nodeType===Node.ELEMENT_NODE&&H0(g,Hs,y)},[]),l=G.useCallback((g,y)=>{g.nodeType===Node.ELEMENT_NODE&&ec(g,Hs,y)},[]),c=G.useCallback(g=>g.get?g.get(0):g,[]),u=G.useCallback((g,y)=>({key1:g,key2:y}),[]),d=G.useCallback(()=>`${vC()}${vC()}${vC()}`,[]),{collection:p}=e,f=G.useCallback(g=>({model:y,index:v,container:C,onRendered:x})=>{const S=c(C),O=u(y,S),H=()=>{p.get(O)&&(p.delete(O),n({collection:p}))},F=r.current;return p.set(O,{templateKey:g,index:v,componentKey:d(),onRendered:()=>{l(S,H),F===r.current&&(x==null||x())},onRemoved:H}),n({collection:p}),S},[l,u,p]);return G.useMemo(()=>{function g(x){switch(x.type){case"children":return()=>x.content;case"render":return S=>x.content(S.data,S.index);case"component":return S=>(S=S,G.createElement.bind(null,x.content)(S));default:return()=>G.createElement(G.Fragment)}}function y(x){const S=Object.entries(x).reduce((H,[F,I])=>({...H,[F]:g(I)}),{});return o.current=S,Object.keys(S).reduce((H,F)=>(H[F]={render:f(F)},H),{})}function v(){r.current=d(),e.collection.clear(),n({...e})}function C(x){s({onUpdated:x})}t({createDXTemplates:y,clearInstantiationModels:v,updateTemplates:C})},[t,f]),G.useEffect(()=>{i&&i.onUpdated()},[i]),e.collection.empty?null:G.createElement(G.Fragment,null,Array.from(e.collection).map(([{key1:g,key2:y},{index:v,templateKey:C,componentKey:x,onRendered:S,onRemoved:O}])=>{a(y,O);const H=o.current[C];return H?G.createElement(Gae,{key:x,templateFactory:H,data:g,index:v,container:y,onRemoved:O,onRendered:S}):null}))};/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const Hs="dxremove";Me({buyNowLink:"https://go.devexpress.com/Licensing_Installer_Watermark_DevExtremeReact.aspx"});const qN=G.forwardRef((t,e)=>{const{templateProps:n=[],defaults:i={},expectedChildren:s={},isPortalComponent:r=!1,useRequestAnimationFrameFlag:o=!1,subscribableOptions:a=[],WidgetClass:l,independentEvents:c=[],renderChildren:u,beforeCreateWidget:d=()=>{},afterCreateWidget:p=()=>{}}=t,[,f]=G.useState(0),g=G.useContext(FN),y=G.useContext(LO),v=G.useRef(),C=G.useRef(),x=G.useRef(),S=G.useRef(!1),O=G.useRef(!1),H=G.useRef(!1),F=G.useRef(new Oae),I=G.useRef(),w=G.useRef(),A=G.useRef(),k=G.useRef(),P=G.useRef(),$=G.useCallback(()=>{var be;H.current&&((be=I.current)!=null&&be.length)&&C.current&&(C.current.append(...I.current),H.current=!1),y&&C.current&&!C.current.isConnected&&y()},[I.current,C.current,H.current,y]),R=G.useCallback((be,Oe)=>{var li,Os;const Nt=be?$O(be):void 0,Zn=$O(Oe);if(Nt!==Zn){if(Nt){const zi=Nt.split(" ").filter(da=>da);zi.length&&((li=C.current)==null||li.classList.remove(...zi))}if(Zn){const zi=Zn.split(" ").filter(da=>da);zi.length&&((Os=C.current)==null||Os.classList.add(...zi))}}},[C.current]),Ae=G.useCallback(be=>{if(C.current){const Oe=C.current;Object.entries(be).forEach(([Nt,Zn])=>{Oe.style[Nt]=Zn})}},[C.current]),vt=G.useCallback(()=>zae({templates:n,initialValuesProps:i,predefinedValuesProps:{},expectedChildren:s},t),[n,i,s,t]),Qt=G.useCallback(({createDXTemplates:be,clearInstantiationModels:Oe,updateTemplates:Nt})=>{w.current=be,A.current=Oe,k.current=Nt},[w.current,A.current,k.current]),an=G.useCallback(()=>{const be={ref:Oe=>{Oe&&(C.current=Oe)}};return UN.forEach(Oe=>{Oe in t&&(be[Oe]=t[Oe])}),be},[C.current]),ne=G.useCallback(()=>{if(O.current)return;O.current=!0,(S.current?r_:ah)(()=>{var Oe;O.current=!1,(Oe=k.current)==null||Oe.call(k,()=>GN())}),WN()},[O.current,S.current,k.current]),_e=G.useCallback(be=>{var Os,zi;d(),be=be||C.current;const Oe=vt();let Nt={templatesRenderAsynchronously:!0,...F.current.getInitialOptions(Oe)};const Zn=F.current.getTemplateOptions(Oe),li=(Os=w.current)==null?void 0:Os.call(w,Zn);li&&Object.keys(li).length&&(Nt={...Nt,integrationOptions:{templates:li}}),(zi=A.current)==null||zi.call(A),v.current=new l(be,Nt),o||(S.current=v.current.option("integrationOptions.useDeferUpdateForTemplates")),F.current.setInstance(v.current,Oe,a,c),v.current.on("optionChanged",F.current.onOptionChanged),p()},[d,p,C.current,F.current,w.current,A.current,l,o,S.current,v.current,a,c,vt]),we=G.useCallback(()=>{var Zn,li;if(!((Zn=F.current)!=null&&Zn.isInstanceSet))return;R(P.current,t);const be=vt(),Oe=F.current.getTemplateOptions(be),Nt=((li=w.current)==null?void 0:li.call(w,Oe))||{};F.current.update(be,Nt),ne(),P.current=t},[F.current,P.current,w.current,ne,R,vt,t]),ft=G.useCallback(()=>{var Oe,Nt;const{style:be}=t;H.current?$():(Oe=C.current)!=null&&Oe.childNodes.length&&(I.current=Array.from((Nt=C.current)==null?void 0:Nt.childNodes)),R(void 0,t),be&&Ae(be),P.current=t},[I.current,C.current,H.current,R,Ae,t]),Je=G.useCallback(()=>{var be;if(g==null||g.lock(),v.current){const Oe={isUnmounting:!0};(be=I.current)==null||be.forEach(Nt=>{var Zn;return(Zn=Nt.parentNode)==null?void 0:Zn.removeChild(Nt)}),H.current=!0,C.current&&xae(C.current,Hs,Oe),v.current.dispose()}F.current.dispose(),g==null||g.unlock()},[g,v.current,I.current,C.current,F.current,H.current]);G.useLayoutEffect(()=>(ft(),()=>{Je()}),[]),G.useLayoutEffect(()=>{we()}),G.useImperativeHandle(e,()=>({getInstance(){return v.current},getElement(){return C.current},createWidget(be){_e(be)}}),[v.current,C.current,_e]);const pt=G.useCallback(()=>{if(u)return u();const{children:be}=t;return be},[t,u]),wi=G.useCallback(()=>x.current&&aw.createPortal(pt(),x.current),[x.current,pt]),Si=G.useCallback(()=>{const{children:be}=t;return r&&be?G.createElement("div",{ref:Oe=>{Oe&&x.current!==Oe&&(x.current=Oe,f(Math.random()))},style:{display:"contents"}}):pt()},[t,r,x.current,pt]);return G.createElement(LO.Provider,{value:$},G.createElement("div",an(),Si(),G.createElement(Uae,{init:Qt})),r&&wi())});/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */function Kae(t){var e;return!!((e=t.type)!=null&&e.isExtensionComponent)}G.forwardRef((t,e)=>{const n=G.useRef(null),i=G.useCallback(s=>{var r;(r=n.current)==null||r.createWidget(s)},[n.current]);return G.useLayoutEffect(()=>{const{onMounted:s}=t;s?s(i):i()},[]),G.useImperativeHandle(e,()=>({getInstance(){var s;return(s=n.current)==null?void 0:s.getInstance()},getElement(){var s;return(s=n.current)==null?void 0:s.getElement()},createWidget(s){i(s)}}),[n.current,i]),G.createElement(qN,{ref:n,...t})});/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const jae=G.forwardRef((t,e)=>{const n=G.useRef(null),i=G.useRef([]),s=G.useCallback(c=>{i.current.push(c)},[i.current]),r=G.useCallback(()=>{i.current.forEach(c=>{var u;return c((u=n.current)==null?void 0:u.getElement())})},[i.current,n.current]),o=G.useCallback(()=>G.Children.map(t.children,c=>c&&Kae(c)?G.cloneElement(c,{onMounted:s}):c),[t,s]),a=G.useCallback(c=>{var u;(u=n.current)==null||u.createWidget(c)},[n.current]),l=G.useCallback(()=>{t.clearExtensions&&t.clearExtensions(),i.current=[]},[i.current,t.clearExtensions]);return G.useLayoutEffect(()=>(a(),r(),()=>{l()}),[]),G.useImperativeHandle(e,()=>({getInstance(){var c;return(c=n.current)==null?void 0:c.getInstance()},getElement(){var c;return(c=n.current)==null?void 0:c.getElement()},createWidget(c){a(c)},clearExtensions(){l()}}),[n.current,a,l]),G.createElement(qN,{ref:n,renderChildren:o,...t})});/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const fp=t=>{const{children:e}=t,n=G.Children.map(e,i=>jN(i).type===Ks.Option?i:null);return G.createElement(G.Fragment,{},n)};/*!
 * devextreme-react
 * Version: 24.1.5
 * Build date: Mon Aug 12 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */const qae=G.memo(G.forwardRef((t,e)=>{const n=G.useRef(null);G.useImperativeHandle(e,()=>({instance(){var l;return(l=n.current)==null?void 0:l.getInstance()}}),[n.current]);const i=G.useMemo(()=>["currentDate","currentView"],[]),s=G.useMemo(()=>["onAppointmentAdded","onAppointmentAdding","onAppointmentClick","onAppointmentContextMenu","onAppointmentDblClick","onAppointmentDeleted","onAppointmentDeleting","onAppointmentFormOpening","onAppointmentRendered","onAppointmentTooltipShowing","onAppointmentUpdated","onAppointmentUpdating","onCellClick","onCellContextMenu","onContentReady","onDisposing","onInitialized"],[]),r=G.useMemo(()=>({defaultCurrentDate:"currentDate",defaultCurrentView:"currentView"}),[]),o=G.useMemo(()=>({appointmentDragging:{optionName:"appointmentDragging",isCollectionItem:!1},editing:{optionName:"editing",isCollectionItem:!1},resource:{optionName:"resources",isCollectionItem:!0},scrolling:{optionName:"scrolling",isCollectionItem:!1},view:{optionName:"views",isCollectionItem:!0}}),[]),a=G.useMemo(()=>[{tmplOption:"appointmentCollectorTemplate",render:"appointmentCollectorRender",component:"appointmentCollectorComponent"},{tmplOption:"appointmentTemplate",render:"appointmentRender",component:"appointmentComponent"},{tmplOption:"appointmentTooltipTemplate",render:"appointmentTooltipRender",component:"appointmentTooltipComponent"},{tmplOption:"dataCellTemplate",render:"dataCellRender",component:"dataCellComponent"},{tmplOption:"dateCellTemplate",render:"dateCellRender",component:"dateCellComponent"},{tmplOption:"dropDownAppointmentTemplate",render:"dropDownAppointmentRender",component:"dropDownAppointmentComponent"},{tmplOption:"resourceCellTemplate",render:"resourceCellRender",component:"resourceCellComponent"},{tmplOption:"timeCellTemplate",render:"timeCellRender",component:"timeCellComponent"}],[]);return G.createElement(jae,{WidgetClass:yb,ref:n,subscribableOptions:i,independentEvents:s,defaults:r,expectedChildren:o,templateProps:a,...t})})),Yae=G.memo(t=>G.createElement(fp,{...t}));Object.assign(Yae,{OptionName:"appointmentDragging"});const Zae=G.memo(t=>G.createElement(fp,{...t}));Object.assign(Zae,{OptionName:"editing"});const Qae=G.memo(t=>G.createElement(fp,{...t}));Object.assign(Qae,{OptionName:"resources",IsCollectionItem:!0});const Xae=G.memo(t=>G.createElement(fp,{...t}));Object.assign(Xae,{OptionName:"scrolling"});const Jae=G.memo(t=>G.createElement(fp,{...t}));Object.assign(Jae,{OptionName:"views",IsCollectionItem:!0,ExpectedChildren:{scrolling:{optionName:"scrolling",isCollectionItem:!1}},TemplateProps:[{tmplOption:"appointmentCollectorTemplate",render:"appointmentCollectorRender",component:"appointmentCollectorComponent"},{tmplOption:"appointmentTemplate",render:"appointmentRender",component:"appointmentComponent"},{tmplOption:"appointmentTooltipTemplate",render:"appointmentTooltipRender",component:"appointmentTooltipComponent"},{tmplOption:"dataCellTemplate",render:"dataCellRender",component:"dataCellComponent"},{tmplOption:"dateCellTemplate",render:"dateCellRender",component:"dateCellComponent"},{tmplOption:"dropDownAppointmentTemplate",render:"dropDownAppointmentRender",component:"dropDownAppointmentComponent"},{tmplOption:"resourceCellTemplate",render:"resourceCellRender",component:"resourceCellComponent"},{tmplOption:"timeCellTemplate",render:"timeCellRender",component:"timeCellComponent"}]});const ele=Di.locale.bind(Di),tle=q.load.bind(q);q.format.bind(q);Ge.format.bind(Ge);Ge.parse.bind(Ge);ee.format.bind(ee);ee.parse.bind(ee);const nle={Yes:"Tak",No:"Nie",Cancel:"Anuluj",Close:"Zamknij",Clear:"Usuń",Done:"Gotowe",Loading:"Ładowanie...",Select:"Wybierz...",Search:"Szukaj...",Back:"Wróć...",OK:"OK","dxCollectionWidget-noDataText":"Brak dostępnych danych","dxDropDownEditor-selectLabel":"Wybierz","validation-required":"Pole obowiązkowe","validation-required-formatted":"{0} jest polem obowiązkowym","validation-numeric":"Wartość musi być liczbą","validation-numeric-formatted":"{0} musi być liczbą","validation-range":"Wartość nie mieści się w prawidłowym zakresie","validation-range-formatted":"{0} nie mieści się w prawidłowym zakresie","validation-stringLength":"Długość wartości nie jest poprawna","validation-stringLength-formatted":"Długość {0} nie jest poprawna","validation-custom":"Wartość jest nieprawidłowa","validation-custom-formatted":"{0} jest nieprawidłowa","validation-async":"Wartość jest nieprawidłowa","validation-async-formatted":"{0} jest nieprawidłowa","validation-compare":"Wartość jest nieodpowiednia","validation-compare-formatted":"{0} jest nieodpowiednia","validation-pattern":"Wartość nie pasuje do wzorca","validation-pattern-formatted":"{0} nie pasuje do wzorca","validation-email":"Adres e-mail jest nieprawidłowy","validation-email-formatted":"{0} jest nieprawidłowa","validation-mask":"Wartość jest nieprawidłowa","dxLookup-searchPlaceholder":"Długość minimalna {0} znaków","dxList-pullingDownText":"Aby zaktualizować, przeciągnij w dół","dxList-pulledDownText":"Aby zaktualizować puść","dxList-refreshingText":"Zaktualiz...","dxList-pageLoadingText":"Ładowanie...","dxList-nextButtonText":"Więcej","dxList-selectAll":"Wybierz wszystko","dxList-listAriaLabel":"Items","dxList-listAriaLabel-deletable":"Deletable items","dxListEditDecorator-delete":"Usuń","dxListEditDecorator-more":"Więcej","dxScrollView-pullingDownText":"Aby zaktualizować, przeciągnij w dół","dxScrollView-pulledDownText":"Aby zaktualizować puść","dxScrollView-refreshingText":"Zaktualiz...","dxScrollView-reachBottomText":"Ładowanie...","dxDateBox-simulatedDataPickerTitleTime":"Wybierz godzinę","dxDateBox-simulatedDataPickerTitleDate":"Wybierz datę","dxDateBox-simulatedDataPickerTitleDateTime":"Wybierz datę i godzinę","dxDateBox-validation-datetime":"Wartość musi być datą lub godziną","dxDateRangeBox-invalidStartDateMessage":"Start value must be a date","dxDateRangeBox-invalidEndDateMessage":"End value must be a date","dxDateRangeBox-startDateOutOfRangeMessage":"Start date is out of range","dxDateRangeBox-endDateOutOfRangeMessage":"End date is out of range","dxDateRangeBox-startDateLabel":"Start Date","dxDateRangeBox-endDateLabel":"End Date","dxFileUploader-selectFile":"Wybierz plik","dxFileUploader-dropFile":"lub przeciągnij tutaj","dxFileUploader-bytes":"Bajty","dxFileUploader-kb":"KB","dxFileUploader-Mb":"MB","dxFileUploader-Gb":"GB","dxFileUploader-upload":"Załaduj","dxFileUploader-uploaded":"Załadowano","dxFileUploader-readyToUpload":"Gotowy do załadowania","dxFileUploader-uploadAbortedMessage":"Ładowanie anulowane","dxFileUploader-uploadFailedMessage":"Błąd podczas ładowania","dxFileUploader-invalidFileExtension":"Niedozwolony typ pliku","dxFileUploader-invalidMaxFileSize":"Plik jest zbyt duży","dxFileUploader-invalidMinFileSize":"Plik jest zbyt mały","dxRangeSlider-ariaFrom":"Od","dxRangeSlider-ariaTill":"Do","dxSwitch-switchedOnText":"WŁ","dxSwitch-switchedOffText":"WYŁ","dxForm-optionalMark":"opcjonalnie","dxForm-requiredMessage":"{0} jest polem obowiązkowym","dxNumberBox-invalidValueMessage":"Wartość musi być liczbą","dxNumberBox-noDataText":"Brak danych","dxDataGrid-emptyHeaderWithColumnChooserText":"Use {0} to display columns","dxDataGrid-emptyHeaderWithGroupPanelText":"Drag a column from the group panel here","dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText":"Use {0} or drag a column from the group panel","dxDataGrid-emptyHeaderColumnChooserText":"column chooser","dxDataGrid-columnChooserTitle":"Wybór kolumny","dxDataGrid-columnChooserEmptyText":"Przeciągnij kolumny tutaj, aby je ukryć","dxDataGrid-groupContinuesMessage":"Kontynuacja na następnej stronie","dxDataGrid-groupContinuedMessage":"Kontynuacja z poprzedniej strony","dxDataGrid-groupHeaderText":"Grupuj według tej kolumny","dxDataGrid-ungroupHeaderText":"Usuń grupowanie","dxDataGrid-ungroupAllText":"Usuń wszystkie grupowania","dxDataGrid-editingEditRow":"Edytuj","dxDataGrid-editingSaveRowChanges":"Zapisz","dxDataGrid-editingCancelRowChanges":"Anuluj","dxDataGrid-editingDeleteRow":"Usuń","dxDataGrid-editingUndeleteRow":"Przywróć","dxDataGrid-editingConfirmDeleteMessage":"Czy na pewno chcesz usunąć ten rekord?","dxDataGrid-validationCancelChanges":"Anuluj zmiany","dxDataGrid-groupPanelEmptyText":"Przeciągnij kolumnę tutaj, aby pogrupować według niej","dxDataGrid-noDataText":"Brak danych","dxDataGrid-searchPanelPlaceholder":"Szukaj...","dxDataGrid-filterRowShowAllText":"(Wszystkie)","dxDataGrid-filterRowResetOperationText":"Resetuj","dxDataGrid-filterRowOperationEquals":"Jest równe","dxDataGrid-filterRowOperationNotEquals":"Nie jest równe","dxDataGrid-filterRowOperationLess":"Mniejsze niż","dxDataGrid-filterRowOperationLessOrEquals":"Mniejsze lub równe","dxDataGrid-filterRowOperationGreater":"Większe niż","dxDataGrid-filterRowOperationGreaterOrEquals":"Większe lub równe","dxDataGrid-filterRowOperationStartsWith":"Zaczyna się od","dxDataGrid-filterRowOperationContains":"Zawiera","dxDataGrid-filterRowOperationNotContains":"Nie zawiera","dxDataGrid-filterRowOperationEndsWith":"Kończy się z","dxDataGrid-filterRowOperationBetween":"Pomiędzy","dxDataGrid-filterRowOperationBetweenStartText":"Początek","dxDataGrid-filterRowOperationBetweenEndText":"Koniec","dxDataGrid-ariaSearchBox":"Search box","dxDataGrid-applyFilterText":"Stosuj filtry","dxDataGrid-trueText":"prawda","dxDataGrid-falseText":"fałsz","dxDataGrid-sortingAscendingText":"Sortuj rosnąco","dxDataGrid-sortingDescendingText":"Sortuj malejąco","dxDataGrid-sortingClearText":"Resetuj sortowanie","dxDataGrid-ariaNotSortedColumn":"Not sorted column","dxDataGrid-ariaSortedAscendingColumn":"Column sorted in ascending order","dxDataGrid-ariaSortedDescendingColumn":"Column sorted in descending order","dxDataGrid-ariaSortIndex":"Sort index {0}","dxDataGrid-editingSaveAllChanges":"Zapisz zmiany","dxDataGrid-editingCancelAllChanges":"Anuluj zmiany","dxDataGrid-editingAddRow":"Nowy wiersz","dxDataGrid-summaryMin":"Min: {0}","dxDataGrid-summaryMinOtherColumn":"Minimum {1} wynosi {0}","dxDataGrid-summaryMax":"Maks: {0}","dxDataGrid-summaryMaxOtherColumn":"Maksimum {1} wynosi {0}","dxDataGrid-summaryAvg":"Ø: {0}","dxDataGrid-summaryAvgOtherColumn":"Średnia {1} wynosi {0}","dxDataGrid-summarySum":"Suma: {0}","dxDataGrid-summarySumOtherColumn":"Suma {1} wynosi {0}","dxDataGrid-summaryCount":"Liczba: {0}","dxDataGrid-columnFixingFix":"Ustal","dxDataGrid-columnFixingUnfix":"Rozwiąż","dxDataGrid-columnFixingLeftPosition":"Na lewo","dxDataGrid-columnFixingRightPosition":"Na prawo","dxDataGrid-exportTo":"Eksportuj","dxDataGrid-exportToExcel":"Eksportuj jako plik excel","dxDataGrid-exporting":"Eksport...","dxDataGrid-excelFormat":"Plik excel","dxDataGrid-selectedRows":"Wybrane wiersze","dxDataGrid-exportSelectedRows":"Eksportuj wybrane wiersze do {0}","dxDataGrid-exportAll":"Wszystkie dane eksportuj do {0}","dxDataGrid-headerFilterLabel":"Opcje filtra","dxDataGrid-headerFilterIndicatorLabel":"Wyświetl opcje filtra dla kolumny '{0}'","dxDataGrid-headerFilterEmptyValue":"(Wartości puste)","dxDataGrid-headerFilterOK":"OK","dxDataGrid-headerFilterCancel":"Anuluj","dxDataGrid-ariaAdaptiveCollapse":"Ukryj dodatkowe kolumny","dxDataGrid-ariaAdaptiveExpand":"Wyświetl dodatkowe kolumny","dxDataGrid-ariaColumn":"Kolumna","dxDataGrid-ariaColumnHeader":"Column header","dxDataGrid-ariaValue":"Wartość","dxDataGrid-ariaError":"Error","dxDataGrid-ariaRevertButton":"Press Escape to discard the changes","dxDataGrid-ariaFilterCell":"Komórka filtra","dxDataGrid-ariaCollapse":"Zwiń","dxDataGrid-ariaModifiedCell":"Modified","dxDataGrid-ariaDeletedCell":"Deleted","dxDataGrid-ariaEditableCell":"Editable","dxDataGrid-ariaExpand":"Rozwiń","dxDataGrid-ariaCollapsedRow":"Collapsed row","dxDataGrid-ariaExpandedRow":"Expanded row","dxDataGrid-ariaDataGrid":"Tabela danych zawierająca {0} wiersze/-y i {1} kolumn/y","dxDataGrid-ariaSearchInGrid":"Szukaj w tabeli danych","dxDataGrid-ariaSelectAll":"Wybierz wszystkie","dxDataGrid-ariaSelectRow":"Wybierz wiersz","dxDataGrid-ariaToolbar":"Pasek narzędzi tabeli danych","dxDataGrid-ariaEditForm":"Edit form","dxDataGrid-filterBuilderPopupTitle":"Generator filtrów","dxDataGrid-filterPanelCreateFilter":"Utwórz filtr","dxDataGrid-filterPanelClearFilter":"Resetuj","dxDataGrid-filterPanelFilterEnabledHint":"Aktywuj filtr","dxDataGrid-masterDetail":"Cell with details","dxTreeList-ariaTreeList":"Lista strukturalna","dxTreeList-ariaSearchInGrid":"Szukaj w liście strukturalnej","dxTreeList-ariaToolbar":"Pasek narzędzi listy strukturalnej","dxTreeList-editingAddRowToNode":"Dodaj","dxPager-infoText":"Strona {0} z {1} ({2} elementy)","dxPager-pagesCountText":"od","dxPager-pageSize":"Elementy na stronie: {0}","dxPager-pageSizesAllText":"Wszystkie/wszyscy","dxPager-page":"Strona {0}","dxPager-prevPage":"Poprzednia strona","dxPager-nextPage":"Następna strona","dxPager-ariaLabel":"Nawigacja strony","dxPager-ariaPageSize":"Page size","dxPager-ariaPageNumber":"Page number","dxPivotGrid-grandTotal":"Łącznie","dxPivotGrid-total":"{0} Łącznie","dxPivotGrid-fieldChooserTitle":"Wybór pola","dxPivotGrid-showFieldChooser":"Wyświetl wybór pola","dxPivotGrid-expandAll":"Rozwiń wszystkie","dxPivotGrid-collapseAll":"Zwiń wszystkie","dxPivotGrid-sortColumnBySummary":'"{0}" sortuj według tej kolumny',"dxPivotGrid-sortRowBySummary":'"{0}" sortuj według tego wiersza',"dxPivotGrid-removeAllSorting":"Anuluj sortowanie","dxPivotGrid-dataNotAvailable":"Usuń","dxPivotGrid-rowFields":"Pola wierszy","dxPivotGrid-columnFields":"Pola kolumn","dxPivotGrid-dataFields":"Pola danych","dxPivotGrid-filterFields":"Pole filtra","dxPivotGrid-allFields":"Wszystkie pola","dxPivotGrid-columnFieldArea":"Przeciągnij pola kolumn/y tutaj","dxPivotGrid-dataFieldArea":"Przeciągnij pola danych tutaj","dxPivotGrid-rowFieldArea":"Przeciągnij pola wiersza/-y tutaj","dxPivotGrid-filterFieldArea":"Przeciągnij pola filtra tutaj","dxScheduler-editorLabelTitle":"Dotyczy","dxScheduler-editorLabelStartDate":"Czas rozpoczęcia","dxScheduler-editorLabelEndDate":"Czas zakończenia","dxScheduler-editorLabelDescription":"Opis","dxScheduler-editorLabelRecurrence":"Powtórz","dxScheduler-openAppointment":"Otwórz termin","dxScheduler-recurrenceNever":"Nigdy","dxScheduler-recurrenceMinutely":"minutowy","dxScheduler-recurrenceHourly":"godzinowy","dxScheduler-recurrenceDaily":"dzienny","dxScheduler-recurrenceWeekly":"tygodniowy","dxScheduler-recurrenceMonthly":"miesięczny","dxScheduler-recurrenceYearly":"roczny","dxScheduler-recurrenceRepeatEvery":"Powtórz wszystkie","dxScheduler-recurrenceRepeatOn":"Powtórzyć dn.","dxScheduler-recurrenceEnd":"Koniec powtórzenia","dxScheduler-recurrenceAfter":"Do","dxScheduler-recurrenceOn":"Dnia","dxScheduler-recurrenceRepeatMinutely":"Minuta(-y)","dxScheduler-recurrenceRepeatHourly":"Godzina(-y)","dxScheduler-recurrenceRepeatDaily":"Dzień (dni)","dxScheduler-recurrenceRepeatWeekly":"Tydzień (tygodnie)","dxScheduler-recurrenceRepeatMonthly":"Miesiąc(-e)","dxScheduler-recurrenceRepeatYearly":"Rok (lata)","dxScheduler-switcherDay":"Dzień","dxScheduler-switcherWeek":"Tydzień","dxScheduler-switcherWorkWeek":"Tydzień roboczy","dxScheduler-switcherMonth":"Miesiąc","dxScheduler-switcherAgenda":"Agenda","dxScheduler-switcherTimelineDay":"Dzień na osi czasu","dxScheduler-switcherTimelineWeek":"Tydzień na osi czasu","dxScheduler-switcherTimelineWorkWeek":"Tydzień roboczy na osi czasu","dxScheduler-switcherTimelineMonth":"Miesiąc na osi czasu","dxScheduler-recurrenceRepeatOnDate":"dnia","dxScheduler-recurrenceRepeatCount":"Wydarzenia","dxScheduler-allDay":"całodniowe","dxScheduler-confirmRecurrenceEditTitle":"Edit Recurring Appointment","dxScheduler-confirmRecurrenceDeleteTitle":"Delete Recurring Appointment","dxScheduler-confirmRecurrenceEditMessage":"Czy chcesz edytować tylko ten termin, czy całą serię?","dxScheduler-confirmRecurrenceDeleteMessage":"Czy chcesz usunąć tylko ten termin, czy całą serię?","dxScheduler-confirmRecurrenceEditSeries":"Edytuj serię","dxScheduler-confirmRecurrenceDeleteSeries":"Usuń serię","dxScheduler-confirmRecurrenceEditOccurrence":"Edytuj termin","dxScheduler-confirmRecurrenceDeleteOccurrence":"Usuń termin","dxScheduler-noTimezoneTitle":"Brak strefy czasowej","dxScheduler-moreAppointments":"{0} kolejne","dxCalendar-currentDay":"Today","dxCalendar-currentMonth":"Current month","dxCalendar-currentYear":"Current year","dxCalendar-currentYearRange":"Current year range","dxCalendar-todayButtonText":"Dzisiaj","dxCalendar-ariaWidgetName":"Kalendarz","dxCalendar-previousMonthButtonLabel":"Previous month","dxCalendar-previousYearButtonLabel":"Previous year","dxCalendar-previousDecadeButtonLabel":"Previous decade","dxCalendar-previousCenturyButtonLabel":"Previous century","dxCalendar-nextMonthButtonLabel":"Next month","dxCalendar-nextYearButtonLabel":"Next year","dxCalendar-nextDecadeButtonLabel":"Next decade","dxCalendar-nextCenturyButtonLabel":"Next century","dxCalendar-captionMonthLabel":"Month selection","dxCalendar-captionYearLabel":"Year selection","dxCalendar-captionDecadeLabel":"Decade selection","dxCalendar-captionCenturyLabel":"Century selection","dxCalendar-selectedDate":"The selected date is {0}","dxCalendar-selectedDateRange":"The selected date range is from {0} to {1}","dxColorView-ariaRed":"czerwony","dxColorView-ariaGreen":"zielony","dxColorView-ariaBlue":"niebieski","dxColorView-ariaAlpha":"transparentny","dxColorView-ariaHex":"Wartość koloru","dxTagBox-selected":"{0} wybrano","dxTagBox-allSelected":"Wybrano wszystkie ({0})","dxTagBox-moreSelected":"{0} kolejne","dxTagBox-tagRoleDescription":"Tag. Press the delete button to remove this tag","vizExport-printingButtonText":"Drukuj","vizExport-titleMenuText":"Eksport/druk","vizExport-exportButtonText":"Plik {0}","dxFilterBuilder-and":"i","dxFilterBuilder-or":"lub","dxFilterBuilder-notAnd":"Nie i","dxFilterBuilder-notOr":"Nie lub","dxFilterBuilder-addCondition":"Dodaj warunek","dxFilterBuilder-addGroup":"Dodaj grupę","dxFilterBuilder-enterValueText":"<Podaj wartość>","dxFilterBuilder-filterOperationEquals":"Jest równe","dxFilterBuilder-filterOperationNotEquals":"Nie jest równe","dxFilterBuilder-filterOperationLess":"Mniejsze niż","dxFilterBuilder-filterOperationLessOrEquals":"Mniejsze lub równe","dxFilterBuilder-filterOperationGreater":"Większe niż","dxFilterBuilder-filterOperationGreaterOrEquals":"Większe lub równe","dxFilterBuilder-filterOperationStartsWith":"Zaczyna się od","dxFilterBuilder-filterOperationContains":"Zawiera","dxFilterBuilder-filterOperationNotContains":"Nie zawiera","dxFilterBuilder-filterOperationEndsWith":"Kończy się z","dxFilterBuilder-filterOperationIsBlank":"Jest pusty","dxFilterBuilder-filterOperationIsNotBlank":"Nie jest pusty","dxFilterBuilder-filterOperationBetween":"Pomiędzy","dxFilterBuilder-filterOperationAnyOf":"Jest zawarty w","dxFilterBuilder-filterOperationNoneOf":"Nie jest zawarty w","dxHtmlEditor-dialogColorCaption":"Zmień kolor czcionki","dxHtmlEditor-dialogBackgroundCaption":"Zmień kolor tła","dxHtmlEditor-dialogLinkCaption":"Dodaj link","dxHtmlEditor-dialogLinkUrlField":"URL","dxHtmlEditor-dialogLinkTextField":"Tekst","dxHtmlEditor-dialogLinkTargetField":"Otwórz link w nowym oknie","dxHtmlEditor-dialogImageCaption":"Dodaj obraz","dxHtmlEditor-dialogImageUrlField":"URL","dxHtmlEditor-dialogImageAltField":"Tekst alternatywny","dxHtmlEditor-dialogImageWidthField":"Szerokość (px)","dxHtmlEditor-dialogImageHeightField":"Wysokość obrazu (px)","dxHtmlEditor-dialogInsertTableRowsField":"Wiersze","dxHtmlEditor-dialogInsertTableColumnsField":"Kolumny","dxHtmlEditor-dialogInsertTableCaption":"Wstaw tabelę","dxHtmlEditor-dialogUpdateImageCaption":"Aktualizuj obraz","dxHtmlEditor-dialogImageUpdateButton":"Aktualizuj","dxHtmlEditor-dialogImageAddButton":"Dodaj","dxHtmlEditor-dialogImageSpecifyUrl":"Z sieci","dxHtmlEditor-dialogImageSelectFile":"Z tego urządzenia","dxHtmlEditor-dialogImageKeepAspectRatio":"Zachowaj proporcje stron","dxHtmlEditor-dialogImageEncodeToBase64":"Zakoduj jako Base64","dxHtmlEditor-heading":"Nagłówek","dxHtmlEditor-normalText":"Zwykły tekst","dxHtmlEditor-background":"Kolor tła","dxHtmlEditor-bold":"Wytłuszczenie","dxHtmlEditor-color":"Kolor czcionki","dxHtmlEditor-font":"Rodzaj czcionki","dxHtmlEditor-italic":"Kurysywa","dxHtmlEditor-link":"Dodaj link","dxHtmlEditor-image":"Dodaj obraz","dxHtmlEditor-size":"Rozmiar czcionki","dxHtmlEditor-strike":"Przekreślenie","dxHtmlEditor-subscript":"Indeks dolny","dxHtmlEditor-superscript":"Indeks górny","dxHtmlEditor-underline":"Podkreślenie","dxHtmlEditor-blockquote":"Cytat blokowy","dxHtmlEditor-header":"Wiersz nagłówka","dxHtmlEditor-increaseIndent":"Zwiększ wcięcie","dxHtmlEditor-decreaseIndent":"Zmniejsz wcięcie","dxHtmlEditor-orderedList":"Lista posortowana","dxHtmlEditor-bulletList":"Numerowanie","dxHtmlEditor-alignLeft":"Do lewej","dxHtmlEditor-alignCenter":"Wyśrodkowanie","dxHtmlEditor-alignRight":"Do prawej","dxHtmlEditor-alignJustify":"Wyjustuj","dxHtmlEditor-codeBlock":"Codeblock","dxHtmlEditor-variable":"Dodaj zmienne","dxHtmlEditor-undo":"Wstecz","dxHtmlEditor-redo":"Powtórz","dxHtmlEditor-clear":"Usuń formatowanie","dxHtmlEditor-insertTable":"Wstaw tabelę","dxHtmlEditor-insertHeaderRow":"Dodaj nagłówek","dxHtmlEditor-insertRowAbove":"Wstaw kolumnę powyżej","dxHtmlEditor-insertRowBelow":"Wstaw kolumnę poniżej","dxHtmlEditor-insertColumnLeft":"Wstaw kolumnę po lewej","dxHtmlEditor-insertColumnRight":"Wstaw kolumnę po prawej","dxHtmlEditor-deleteColumn":"Usuń kolumnę","dxHtmlEditor-deleteRow":"Usuń wiersz","dxHtmlEditor-deleteTable":"Usuń tabelę","dxHtmlEditor-cellProperties":"Właściwości komórki","dxHtmlEditor-tableProperties":"Właściwości tabeli","dxHtmlEditor-insert":"Wstaw","dxHtmlEditor-delete":"Usuń","dxHtmlEditor-border":"Ramka","dxHtmlEditor-style":"Styl","dxHtmlEditor-width":"Szerokość","dxHtmlEditor-height":"wysokość","dxHtmlEditor-borderColor":"kolor","dxHtmlEditor-tableBackground":"tło","dxHtmlEditor-dimensions":"wymiary","dxHtmlEditor-alignment":"Orientacja","dxHtmlEditor-horizontal":"poziomo","dxHtmlEditor-vertical":"pionowo","dxHtmlEditor-paddingVertical":"Odstęp w pionie","dxHtmlEditor-paddingHorizontal":"Odstęp w poziomie","dxHtmlEditor-pixels":"Piksel","dxHtmlEditor-list":"Lista","dxHtmlEditor-ordered":"Posortowane","dxHtmlEditor-bullet":"Numerowanie","dxHtmlEditor-align":"Wyrównaj","dxHtmlEditor-center":"Wyśrodkuj","dxHtmlEditor-left":"Po lewej","dxHtmlEditor-right":"Po prawej","dxHtmlEditor-indent":"Wcięcie","dxHtmlEditor-justify":"Wyjustuj","dxHtmlEditor-borderStyleNone":"none","dxHtmlEditor-borderStyleHidden":"hidden","dxHtmlEditor-borderStyleDotted":"dotted","dxHtmlEditor-borderStyleDashed":"dashed","dxHtmlEditor-borderStyleSolid":"solid","dxHtmlEditor-borderStyleDouble":"double","dxHtmlEditor-borderStyleGroove":"groove","dxHtmlEditor-borderStyleRidge":"ridge","dxHtmlEditor-borderStyleInset":"inset","dxHtmlEditor-borderStyleOutset":"outset","dxFileManager-newDirectoryName":"Bez tytułu","dxFileManager-rootDirectoryName":"Pliki","dxFileManager-errorNoAccess":"Odmowa dostępu Nie można wykonać operacji.","dxFileManager-errorDirectoryExistsFormat":"Folder {0} już istnieje.","dxFileManager-errorFileExistsFormat":"Plik {0} już istnieje.","dxFileManager-errorFileNotFoundFormat":"Nie znaleziono pliku {0}.","dxFileManager-errorDirectoryNotFoundFormat":"Nie znaleziono spisu '{0}’.","dxFileManager-errorWrongFileExtension":"Rozszerzenie pliku jest niedozwolone.","dxFileManager-errorMaxFileSizeExceeded":"Rozmiar pliku przekracza maksymalny dozwolony rozmiar.","dxFileManager-errorInvalidSymbols":"Nazwa pliku zawiera niedozwolone znaki.","dxFileManager-errorDefault":"Nieznany błąd","dxFileManager-errorDirectoryOpenFailed":"Nie można otworzyć spisu","dxFileManager-commandCreate":"Nowy spis","dxFileManager-commandRename":"Zmień nazwę","dxFileManager-commandMove":"Przesuń do","dxFileManager-commandCopy":"Kopiuj do","dxFileManager-commandDelete":"Usuń","dxFileManager-commandDownload":"Pobierz","dxFileManager-commandUpload":"Załaduj plik","dxFileManager-commandRefresh":"Aktualizuj","dxFileManager-commandThumbnails":"Miniatury","dxFileManager-commandDetails":"Widok szczegółowy","dxFileManager-commandClearSelection":"Anuluj wybór","dxFileManager-commandShowNavPane":"Włącz/wyłącz obszar nawigacji","dxFileManager-dialogDirectoryChooserMoveTitle":"Przesuń do","dxFileManager-dialogDirectoryChooserMoveButtonText":"Przesuń","dxFileManager-dialogDirectoryChooserCopyTitle":"Kopiuj do","dxFileManager-dialogDirectoryChooserCopyButtonText":"Kopiuj","dxFileManager-dialogRenameItemTitle":"Zmień nazwę","dxFileManager-dialogRenameItemButtonText":"Zapisz","dxFileManager-dialogCreateDirectoryTitle":"Nowy spis","dxFileManager-dialogCreateDirectoryButtonText":"Utwórz","dxFileManager-dialogDeleteItemTitle":"Usuń","dxFileManager-dialogDeleteItemButtonText":"Usuń","dxFileManager-dialogDeleteItemSingleItemConfirmation":"Czy na pewno chcesz usunąć {0}?","dxFileManager-dialogDeleteItemMultipleItemsConfirmation":"Czy na pewno chcesz usunąć te {0} elementy?","dxFileManager-dialogButtonCancel":"Anuluj","dxFileManager-editingCreateSingleItemProcessingMessage":"Spis zostanie utworzony w {0}","dxFileManager-editingCreateSingleItemSuccessMessage":"Utworzono spis w {0}","dxFileManager-editingCreateSingleItemErrorMessage":"Nie utworzono spisu","dxFileManager-editingCreateCommonErrorMessage":"Nie utworzono spisu","dxFileManager-editingRenameSingleItemProcessingMessage":"Nazwa elementu w {0} zostaje zmieniona na","dxFileManager-editingRenameSingleItemSuccessMessage":"Zmieniono nazwę elementu w {0} na","dxFileManager-editingRenameSingleItemErrorMessage":"Nazwa elementu nie została zmieniona","dxFileManager-editingRenameCommonErrorMessage":"Nazwa elementu nie została zmieniona","dxFileManager-editingDeleteSingleItemProcessingMessage":"Element z {0} jest usuwany","dxFileManager-editingDeleteMultipleItemsProcessingMessage":"{0} Elementy z {1} są usuwane","dxFileManager-editingDeleteSingleItemSuccessMessage":"Element z {0} został usunięty","dxFileManager-editingDeleteMultipleItemsSuccessMessage":"{0} Elementy z {1} zostały usunięte","dxFileManager-editingDeleteSingleItemErrorMessage":"Element nie został usunięty","dxFileManager-editingDeleteMultipleItemsErrorMessage":"{0} Elementy nie zostały usunięte","dxFileManager-editingDeleteCommonErrorMessage":"Niektóre elementy nie zostały usunięte","dxFileManager-editingMoveSingleItemProcessingMessage":"Element zostanie przesunięty do {0}","dxFileManager-editingMoveMultipleItemsProcessingMessage":"{0} Elementy zostaną przesunięte do {1}","dxFileManager-editingMoveSingleItemSuccessMessage":"Element został przesunięty do {0}","dxFileManager-editingMoveMultipleItemsSuccessMessage":"{0} Elementy zostały przesunięte do {1}","dxFileManager-editingMoveSingleItemErrorMessage":"Element nie został przesunięty","dxFileManager-editingMoveMultipleItemsErrorMessage":"{0} Elementy nie zostały przesunięte","dxFileManager-editingMoveCommonErrorMessage":"Niektóre elementy nie zostały przesunięte","dxFileManager-editingCopySingleItemProcessingMessage":"Element zostanie skopiowany do {0}","dxFileManager-editingCopyMultipleItemsProcessingMessage":"{0} Elementy zostaną skopiowane do {1}","dxFileManager-editingCopySingleItemSuccessMessage":"Element został skopiowany do {0}","dxFileManager-editingCopyMultipleItemsSuccessMessage":"{0} Elementy zostały skopiowane do {1}","dxFileManager-editingCopySingleItemErrorMessage":"Element nie został skopiowany","dxFileManager-editingCopyMultipleItemsErrorMessage":"{0} Elementy nie zostały skopiowane","dxFileManager-editingCopyCommonErrorMessage":"Niektóre elementy nie zostały skopiowane","dxFileManager-editingUploadSingleItemProcessingMessage":"Element zostanie załadowany do {0}","dxFileManager-editingUploadMultipleItemsProcessingMessage":"{0} Elementy zostaną załadowane do {1}","dxFileManager-editingUploadSingleItemSuccessMessage":"Element został załadowany do {0}","dxFileManager-editingUploadMultipleItemsSuccessMessage":"{0} Elementy zostały załadowane do {1}","dxFileManager-editingUploadSingleItemErrorMessage":"Element nie został załadowany","dxFileManager-editingUploadMultipleItemsErrorMessage":"{0} Elementy nie zostały załadowane","dxFileManager-editingUploadCanceledMessage":"Anulowano","dxFileManager-editingDownloadSingleItemErrorMessage":"Plik nie został załadowany","dxFileManager-editingDownloadMultipleItemsErrorMessage":"{0} Pliki nie zostały załadowane","dxFileManager-listDetailsColumnCaptionName":"Nazwisko","dxFileManager-listDetailsColumnCaptionDateModified":"Ostatnio zmieniono dnia","dxFileManager-listDetailsColumnCaptionFileSize":"Rozmiar pliku","dxFileManager-listThumbnailsTooltipTextSize":"Rozmiar","dxFileManager-listThumbnailsTooltipTextDateModified":"Ostatnio zmieniono dnia","dxFileManager-notificationProgressPanelTitle":"Postęp","dxFileManager-notificationProgressPanelEmptyListText":"Brak procesów","dxFileManager-notificationProgressPanelOperationCanceled":"Anulowano","dxDiagram-categoryGeneral":"Ogólne","dxDiagram-categoryFlowchart":"Diagram przepływu","dxDiagram-categoryOrgChart":"Schemat organizacyjny","dxDiagram-categoryContainers":"Kontener","dxDiagram-categoryCustom":"Spersonalizowany","dxDiagram-commandExportToSvg":"Eksport jako SVG","dxDiagram-commandExportToPng":"Eksport jako PNG","dxDiagram-commandExportToJpg":"Eksport jako JPEG","dxDiagram-commandUndo":"Wstecz","dxDiagram-commandRedo":"Przywróć","dxDiagram-commandFontName":"Nazwa czcionki","dxDiagram-commandFontSize":"Rozmiar czcionki","dxDiagram-commandBold":"Wytłuszczenie","dxDiagram-commandItalic":"Kurysywa","dxDiagram-commandUnderline":"Podkreślenie","dxDiagram-commandTextColor":"Kolor tekstu","dxDiagram-commandLineColor":"Kolor linii","dxDiagram-commandLineWidth":"Grubość linii","dxDiagram-commandLineStyle":"Rodzaj linii","dxDiagram-commandLineStyleSolid":"Ciągła","dxDiagram-commandLineStyleDotted":"Wykropkowana","dxDiagram-commandLineStyleDashed":"Kreskowa","dxDiagram-commandFillColor":"Kolor wypełnienia","dxDiagram-commandAlignLeft":"Do lewej","dxDiagram-commandAlignCenter":"Wyśrodkowanie","dxDiagram-commandAlignRight":"Do prawej","dxDiagram-commandConnectorLineType":"Łącznik typu linii","dxDiagram-commandConnectorLineStraight":"Prosty","dxDiagram-commandConnectorLineOrthogonal":"Prostokątny","dxDiagram-commandConnectorLineStart":"Łącznik początku linii","dxDiagram-commandConnectorLineEnd":"Łącznik końca linii","dxDiagram-commandConnectorLineNone":"Brak","dxDiagram-commandConnectorLineArrow":"Strzałka","dxDiagram-commandFullscreen":"Pełny ekran","dxDiagram-commandUnits":"Jednostki","dxDiagram-commandPageSize":"Rozmiar strony","dxDiagram-commandPageOrientation":"Orientacja strony","dxDiagram-commandPageOrientationLandscape":"Format poziomy","dxDiagram-commandPageOrientationPortrait":"Format pionowy","dxDiagram-commandPageColor":"Kolor strony","dxDiagram-commandShowGrid":"Wyświetl raster","dxDiagram-commandSnapToGrid":"Wyrównaj według rastra","dxDiagram-commandGridSize":"Rozmiar rastra","dxDiagram-commandZoomLevel":"Stopień powiększenia","dxDiagram-commandAutoZoom":"Automatyczne powiększenie","dxDiagram-commandFitToContent":"Dostosuj do zawartości","dxDiagram-commandFitToWidth":"Dostosuj do szerokości","dxDiagram-commandAutoZoomByContent":"Automatycznie dostosuj do zawartości","dxDiagram-commandAutoZoomByWidth":"Automatycznie dostosuj do szerokości","dxDiagram-commandSimpleView":"Widok zwykły","dxDiagram-commandCut":"Wytnij","dxDiagram-commandCopy":"Kopiuj","dxDiagram-commandPaste":"Wstaw","dxDiagram-commandSelectAll":"Wybierz wszystko","dxDiagram-commandDelete":"Usuń","dxDiagram-commandBringToFront":"Do przodu","dxDiagram-commandSendToBack":"Do tyłu","dxDiagram-commandLock":"Zablokuj","dxDiagram-commandUnlock":"Odblokuj","dxDiagram-commandInsertShapeImage":"Wstaw obraz...","dxDiagram-commandEditShapeImage":"Edytuj obraz...","dxDiagram-commandDeleteShapeImage":"Usuń obraz","dxDiagram-commandLayoutLeftToRight":"Od lewej do prawej","dxDiagram-commandLayoutRightToLeft":"Od prawej do lewej","dxDiagram-commandLayoutTopToBottom":"Z góry na dół","dxDiagram-commandLayoutBottomToTop":"Z dołu do góry","dxDiagram-unitIn":"w/do","dxDiagram-unitCm":"cm","dxDiagram-unitPx":"px","dxDiagram-dialogButtonOK":"OK","dxDiagram-dialogButtonCancel":"Anuluj","dxDiagram-dialogInsertShapeImageTitle":"Wstaw obraz","dxDiagram-dialogEditShapeImageTitle":"Edytuj obraz","dxDiagram-dialogEditShapeImageSelectButton":"Wybierz obraz","dxDiagram-dialogEditShapeImageLabelText":"lub umieść plik tutaj","dxDiagram-uiExport":"Eksport","dxDiagram-uiProperties":"Właściwości","dxDiagram-uiSettings":"Ustawienia","dxDiagram-uiShowToolbox":"Pokaż przybornik","dxDiagram-uiSearch":"Szukaj","dxDiagram-uiStyle":"Styl","dxDiagram-uiLayout":"Layout","dxDiagram-uiLayoutTree":"Drzewo","dxDiagram-uiLayoutLayered":"Wielowarstwowy","dxDiagram-uiDiagram":"Diagram","dxDiagram-uiText":"Tekst","dxDiagram-uiObject":"Obiekt","dxDiagram-uiConnector":"Powiązanie","dxDiagram-uiPage":"Strona","dxDiagram-shapeText":"Tekst","dxDiagram-shapeRectangle":"Prostokąt","dxDiagram-shapeEllipse":"Elipsa","dxDiagram-shapeCross":"Krzyż","dxDiagram-shapeTriangle":"Trójkąt","dxDiagram-shapeDiamond":"Romb","dxDiagram-shapeHeart":"Serce","dxDiagram-shapePentagon":"Pięciokąt","dxDiagram-shapeHexagon":"Sześciokąt","dxDiagram-shapeOctagon":"Ośmiokąt","dxDiagram-shapeStar":"Gwiazda","dxDiagram-shapeArrowLeft":"Strzałka w lewo","dxDiagram-shapeArrowUp":"Strzałka w górę","dxDiagram-shapeArrowRight":"Strzałka w prawo","dxDiagram-shapeArrowDown":"Strzałka w dół","dxDiagram-shapeArrowUpDown":"Strzałka w górę i w dół","dxDiagram-shapeArrowLeftRight":"Strzałka w lewo i w prawo","dxDiagram-shapeProcess":"Proces","dxDiagram-shapeDecision":"Decyzja","dxDiagram-shapeTerminator":"Zakończenie","dxDiagram-shapePredefinedProcess":"Predefiniowany proces","dxDiagram-shapeDocument":"Dokument","dxDiagram-shapeMultipleDocuments":"Wiele dokumentów","dxDiagram-shapeManualInput":"Wprowadzanie ręczne","dxDiagram-shapePreparation":"Przygotowanie","dxDiagram-shapeData":"Dane","dxDiagram-shapeDatabase":"Baza danych","dxDiagram-shapeHardDisk":"Dysk twardy","dxDiagram-shapeInternalStorage":"Pamięć lokalna","dxDiagram-shapePaperTape":"Taśma dziurkowana","dxDiagram-shapeManualOperation":"Przetwarzanie ręczne","dxDiagram-shapeDelay":"Zwłoka","dxDiagram-shapeStoredData":"Zapisane dane","dxDiagram-shapeDisplay":"Wyświetlanie","dxDiagram-shapeMerge":"Połącz","dxDiagram-shapeConnector":"Łącznik","dxDiagram-shapeOr":"lub","dxDiagram-shapeSummingJunction":"Węzeł sumowania","dxDiagram-shapeContainerDefaultText":"Kontener","dxDiagram-shapeVerticalContainer":"Kontener pionowy","dxDiagram-shapeHorizontalContainer":"Kontener poziomy","dxDiagram-shapeCardDefaultText":"Nazwisko osoby","dxDiagram-shapeCardWithImageOnLeft":"Karta z obrazkiem po lewej stronie","dxDiagram-shapeCardWithImageOnTop":"Karta z obrazkiem na górze","dxDiagram-shapeCardWithImageOnRight":"Karta z obrazkiem po prawej stronie","dxGantt-dialogTitle":"Tytuł","dxGantt-dialogStartTitle":"Początek","dxGantt-dialogEndTitle":"Koniec","dxGantt-dialogProgressTitle":"Postęp","dxGantt-dialogResourcesTitle":"Zasoby","dxGantt-dialogResourceManagerTitle":"Menedżer zasobów","dxGantt-dialogTaskDetailsTitle":"Szczegóły zadania","dxGantt-dialogEditResourceListHint":"Edytuj listę zasobów","dxGantt-dialogEditNoResources":"Brak zasobów","dxGantt-dialogButtonAdd":"Dodaj","dxGantt-contextMenuNewTask":"Nowe zadanie","dxGantt-contextMenuNewSubtask":"Nowe zadanie cząstkowe","dxGantt-contextMenuDeleteTask":"Usuń zadanie","dxGantt-contextMenuDeleteDependency":"Usuń zależności","dxGantt-dialogTaskDeleteConfirmation":"Zależności i zadania cząstkowe zostaną usunięte razem z tym zadaniem. Czy chcesz usunąć to zadanie?","dxGantt-dialogDependencyDeleteConfirmation":"Czy chcesz usunąć zależność z zadania?","dxGantt-dialogResourcesDeleteConfirmation":"Jeśli usuniesz ten zasób, zostanie on usunięty ze wszystkich zadań. Czy chcesz usunąć zasób? Zasób: {0}","dxGantt-dialogConstraintCriticalViolationMessage":"Zadanie, które chcesz przesunąć, jest połączone z innym zadaniem zależnością. Zmiana ta naruszyłaby reguły zależności. Jak chcesz postąpić?","dxGantt-dialogConstraintViolationMessage":"Zadanie, które chcesz przesunąć, jest połączone z innym zadaniem zależnością. Jak chcesz postąpić?","dxGantt-dialogCancelOperationMessage":"Anuluj działanie","dxGantt-dialogDeleteDependencyMessage":"Usuń zależność","dxGantt-dialogMoveTaskAndKeepDependencyMessage":"Przenieś zadanie i zachowaj zależność","dxGantt-dialogConstraintCriticalViolationSeveralTasksMessage":"Zadanie, które próbujesz przesunąć, jest powiązane z innymi zadaniami poprzez relacje zależności. Zmiana narusza zatem zasady zależności. Jak chcesz postąpić?","dxGantt-dialogConstraintViolationSeveralTasksMessage":"Zadanie, które próbujesz przesunąć, jest powiązane z innymi zadaniami poprzez relacje zależności. Jak chcesz postąpić?","dxGantt-dialogDeleteDependenciesMessage":"Usuń relacje zależności","dxGantt-dialogMoveTaskAndKeepDependenciesMessage":"Przesuń zadanie i zachowaj relacje zależności.","dxGantt-undo":"Wstecz","dxGantt-redo":"Przywróć","dxGantt-expandAll":"Rozwiń wszystko","dxGantt-collapseAll":"Zwiń wszystko","dxGantt-addNewTask":"Dodaj nowe zadanie","dxGantt-deleteSelectedTask":"Usuń wybrane zadanie","dxGantt-zoomIn":"Powiększ","dxGantt-zoomOut":"Zmniejsz","dxGantt-fullScreen":"Tryb pełnego ekranu","dxGantt-quarter":"Q{0}","dxGantt-sortingAscendingText":"Sortuj rosnąco","dxGantt-sortingDescendingText":"Sortuj malejąco","dxGantt-sortingClearText":"Resetuj sortowanie","dxGantt-showResources":"Wyświetl zasoby","dxGantt-showDependencies":"Wyświetl zależności","dxGantt-dialogStartDateValidation":"Data rozpoczęcia musi być późniejsza niż {0}","dxGantt-dialogEndDateValidation":"Data zakończenia musi być późniejsza niż {0}","dxGallery-itemName":"Gallery item","dxMultiView-elementAriaRoleDescription":"MultiView","dxMultiView-elementAriaLabel":"Use the arrow keys or swipe to navigate between views","dxMultiView-itemAriaRoleDescription":"View","dxMultiView-itemAriaLabel":"{0} of {1}","dxSplitter-resizeHandleAriaLabel":"Split bar"},ile={pl:nle};var HO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},sle=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},ZN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let p=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(p=64)),i.push(n[u],n[d],n[p],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sle(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||d==null)throw new rle;const p=r<<2|a>>4;if(i.push(p),c!==64){const f=a<<4&240|c>>2;if(i.push(f),d!==64){const g=c<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ole=function(t){const e=YN(t);return ZN.encodeByteArray(e,!0)},kg=function(t){return ole(t).replace(/\./g,"")},ale=function(t){try{return ZN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lle(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cle=()=>lle().__FIREBASE_DEFAULTS__,ule=()=>{if(typeof process>"u"||typeof HO>"u")return;const t=HO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dle=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ale(t[1]);return e&&JSON.parse(e)},Cb=()=>{try{return cle()||ule()||dle()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hle=t=>{var e,n;return(n=(e=Cb())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ple=t=>{const e=hle(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},QN=()=>{var t;return(t=Cb())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mle(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kg(JSON.stringify(n)),kg(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gle(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _le(){var t;const e=(t=Cb())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yle(){return!_le()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vle(){try{return typeof indexedDB=="object"}catch{return!1}}function Cle(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dle="FirebaseError";class mu extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Dle,Object.setPrototypeOf(this,mu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,XN.prototype.create)}}class XN{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?xle(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new mu(s,a,i)}}function xle(t,e){return t.replace(wle,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const wle=/\{\$([^}]+)}/g;function U0(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(NO(r)&&NO(o)){if(!U0(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function NO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){return t&&t._delegate?t._delegate:t}class Eh{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sle{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new fle;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ele(e))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ia){return this.instances.has(e)}getOptions(e=Ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ble(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ia){return this.component?this.component.multipleInstances?e:Ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ble(t){return t===Ia?void 0:t}function Ele(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tle{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Sle(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const Ile={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Ale=Ue.INFO,kle={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Rle=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=kle[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class JN{constructor(e){this.name=e,this._logLevel=Ale,this._logHandler=Rle,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ile[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Ole=(t,e)=>e.some(n=>t instanceof n);let zO,WO;function Ple(){return zO||(zO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mle(){return WO||(WO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ez=new WeakMap,K0=new WeakMap,tz=new WeakMap,CC=new WeakMap,Db=new WeakMap;function Vle(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n($o(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ez.set(n,t)}).catch(()=>{}),Db.set(e,t),e}function Ble(t){if(K0.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});K0.set(t,e)}let j0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return K0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $o(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Lle(t){j0=t(j0)}function $le(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(DC(this),e,...n);return tz.set(i,e.sort?e.sort():[e]),$o(i)}:Mle().includes(t)?function(...e){return t.apply(DC(this),e),$o(ez.get(this))}:function(...e){return $o(t.apply(DC(this),e))}}function Fle(t){return typeof t=="function"?$le(t):(t instanceof IDBTransaction&&Ble(t),Ole(t,Ple())?new Proxy(t,j0):t)}function $o(t){if(t instanceof IDBRequest)return Vle(t);if(CC.has(t))return CC.get(t);const e=Fle(t);return e!==t&&(CC.set(t,e),Db.set(e,t)),e}const DC=t=>Db.get(t);function Hle(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=$o(o);return i&&o.addEventListener("upgradeneeded",l=>{i($o(o.result),l.oldVersion,l.newVersion,$o(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Nle=["get","getKey","getAll","getAllKeys","count"],zle=["put","add","delete","clear"],xC=new Map;function GO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xC.get(e))return xC.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=zle.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Nle.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return xC.set(e,r),r}Lle(t=>({...t,get:(e,n,i)=>GO(e,n)||t.get(e,n,i),has:(e,n)=>!!GO(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wle{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Gle(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Gle(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const q0="@firebase/app",UO="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new JN("@firebase/app"),Ule="@firebase/app-compat",Kle="@firebase/analytics-compat",jle="@firebase/analytics",qle="@firebase/app-check-compat",Yle="@firebase/app-check",Zle="@firebase/auth",Qle="@firebase/auth-compat",Xle="@firebase/database",Jle="@firebase/database-compat",ece="@firebase/functions",tce="@firebase/functions-compat",nce="@firebase/installations",ice="@firebase/installations-compat",sce="@firebase/messaging",rce="@firebase/messaging-compat",oce="@firebase/performance",ace="@firebase/performance-compat",lce="@firebase/remote-config",cce="@firebase/remote-config-compat",uce="@firebase/storage",dce="@firebase/storage-compat",hce="@firebase/firestore",pce="@firebase/vertexai-preview",fce="@firebase/firestore-compat",mce="firebase",gce="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="[DEFAULT]",_ce={[q0]:"fire-core",[Ule]:"fire-core-compat",[jle]:"fire-analytics",[Kle]:"fire-analytics-compat",[Yle]:"fire-app-check",[qle]:"fire-app-check-compat",[Zle]:"fire-auth",[Qle]:"fire-auth-compat",[Xle]:"fire-rtdb",[Jle]:"fire-rtdb-compat",[ece]:"fire-fn",[tce]:"fire-fn-compat",[nce]:"fire-iid",[ice]:"fire-iid-compat",[sce]:"fire-fcm",[rce]:"fire-fcm-compat",[oce]:"fire-perf",[ace]:"fire-perf-compat",[lce]:"fire-rc",[cce]:"fire-rc-compat",[uce]:"fire-gcs",[dce]:"fire-gcs-compat",[hce]:"fire-fst",[fce]:"fire-fst-compat",[pce]:"fire-vertex","fire-js":"fire-js",[mce]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=new Map,yce=new Map,Z0=new Map;function KO(t,e){try{t.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Og(t){const e=t.name;if(Z0.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;Z0.set(e,t);for(const n of Rg.values())KO(n,t);for(const n of yce.values())KO(n,t);return!0}function vce(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new XN("app","Firebase",Cce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dce{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Eh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xce=gce;function nz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Y0,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Fo.create("bad-app-name",{appName:String(s)});if(n||(n=QN()),!n)throw Fo.create("no-options");const r=Rg.get(s);if(r){if(U0(n,r.options)&&U0(i,r.config))return r;throw Fo.create("duplicate-app",{appName:s})}const o=new Tle(s);for(const l of Z0.values())o.addComponent(l);const a=new Dce(n,i,o);return Rg.set(s,a),a}function wce(t=Y0){const e=Rg.get(t);if(!e&&t===Y0&&QN())return nz();if(!e)throw Fo.create("no-app",{appName:t});return e}function Vc(t,e,n){var i;let s=(i=_ce[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}Og(new Eh(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sce="firebase-heartbeat-database",bce=1,Th="firebase-heartbeat-store";let wC=null;function iz(){return wC||(wC=Hle(Sce,bce,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Th)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fo.create("idb-open",{originalErrorMessage:t.message})})),wC}async function Ece(t){try{const n=(await iz()).transaction(Th),i=await n.objectStore(Th).get(sz(t));return await n.done,i}catch(e){if(e instanceof mu)qr.warn(e.message);else{const n=Fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(n.message)}}}async function jO(t,e){try{const i=(await iz()).transaction(Th,"readwrite");await i.objectStore(Th).put(e,sz(t)),await i.done}catch(n){if(n instanceof mu)qr.warn(n.message);else{const i=Fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qr.warn(i.message)}}}function sz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tce=1024,Ice=30*24*60*60*1e3;class Ace{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rce(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Ice}),this._storage.overwrite(this._heartbeatsCache))}catch(i){qr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qO(),{heartbeatsToSend:i,unsentEntries:s}=kce(this._heartbeatsCache.heartbeats),r=kg(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return qr.warn(n),""}}}function qO(){return new Date().toISOString().substring(0,10)}function kce(t,e=Tce){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),YO(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),YO(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Rce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vle()?Cle().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ece(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function YO(t){return kg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oce(t){Og(new Eh("platform-logger",e=>new Wle(e),"PRIVATE")),Og(new Eh("heartbeat",e=>new Ace(e),"PRIVATE")),Vc(q0,UO,t),Vc(q0,UO,"esm2017"),Vc("fire-js","")}Oce("");var ZO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qa,rz;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function A(){}A.prototype=w.prototype,I.D=w.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(k,P,$){for(var R=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)R[Ae-2]=arguments[Ae];return w.prototype[P].apply(k,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,w,A){A||(A=0);var k=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)k[P]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(P=0;16>P;++P)k[P]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=I.g[0],A=I.g[1],P=I.g[2];var $=I.g[3],R=w+($^A&(P^$))+k[0]+3614090360&4294967295;w=A+(R<<7&4294967295|R>>>25),R=$+(P^w&(A^P))+k[1]+3905402710&4294967295,$=w+(R<<12&4294967295|R>>>20),R=P+(A^$&(w^A))+k[2]+606105819&4294967295,P=$+(R<<17&4294967295|R>>>15),R=A+(w^P&($^w))+k[3]+3250441966&4294967295,A=P+(R<<22&4294967295|R>>>10),R=w+($^A&(P^$))+k[4]+4118548399&4294967295,w=A+(R<<7&4294967295|R>>>25),R=$+(P^w&(A^P))+k[5]+1200080426&4294967295,$=w+(R<<12&4294967295|R>>>20),R=P+(A^$&(w^A))+k[6]+2821735955&4294967295,P=$+(R<<17&4294967295|R>>>15),R=A+(w^P&($^w))+k[7]+4249261313&4294967295,A=P+(R<<22&4294967295|R>>>10),R=w+($^A&(P^$))+k[8]+1770035416&4294967295,w=A+(R<<7&4294967295|R>>>25),R=$+(P^w&(A^P))+k[9]+2336552879&4294967295,$=w+(R<<12&4294967295|R>>>20),R=P+(A^$&(w^A))+k[10]+4294925233&4294967295,P=$+(R<<17&4294967295|R>>>15),R=A+(w^P&($^w))+k[11]+2304563134&4294967295,A=P+(R<<22&4294967295|R>>>10),R=w+($^A&(P^$))+k[12]+1804603682&4294967295,w=A+(R<<7&4294967295|R>>>25),R=$+(P^w&(A^P))+k[13]+4254626195&4294967295,$=w+(R<<12&4294967295|R>>>20),R=P+(A^$&(w^A))+k[14]+2792965006&4294967295,P=$+(R<<17&4294967295|R>>>15),R=A+(w^P&($^w))+k[15]+1236535329&4294967295,A=P+(R<<22&4294967295|R>>>10),R=w+(P^$&(A^P))+k[1]+4129170786&4294967295,w=A+(R<<5&4294967295|R>>>27),R=$+(A^P&(w^A))+k[6]+3225465664&4294967295,$=w+(R<<9&4294967295|R>>>23),R=P+(w^A&($^w))+k[11]+643717713&4294967295,P=$+(R<<14&4294967295|R>>>18),R=A+($^w&(P^$))+k[0]+3921069994&4294967295,A=P+(R<<20&4294967295|R>>>12),R=w+(P^$&(A^P))+k[5]+3593408605&4294967295,w=A+(R<<5&4294967295|R>>>27),R=$+(A^P&(w^A))+k[10]+38016083&4294967295,$=w+(R<<9&4294967295|R>>>23),R=P+(w^A&($^w))+k[15]+3634488961&4294967295,P=$+(R<<14&4294967295|R>>>18),R=A+($^w&(P^$))+k[4]+3889429448&4294967295,A=P+(R<<20&4294967295|R>>>12),R=w+(P^$&(A^P))+k[9]+568446438&4294967295,w=A+(R<<5&4294967295|R>>>27),R=$+(A^P&(w^A))+k[14]+3275163606&4294967295,$=w+(R<<9&4294967295|R>>>23),R=P+(w^A&($^w))+k[3]+4107603335&4294967295,P=$+(R<<14&4294967295|R>>>18),R=A+($^w&(P^$))+k[8]+1163531501&4294967295,A=P+(R<<20&4294967295|R>>>12),R=w+(P^$&(A^P))+k[13]+2850285829&4294967295,w=A+(R<<5&4294967295|R>>>27),R=$+(A^P&(w^A))+k[2]+4243563512&4294967295,$=w+(R<<9&4294967295|R>>>23),R=P+(w^A&($^w))+k[7]+1735328473&4294967295,P=$+(R<<14&4294967295|R>>>18),R=A+($^w&(P^$))+k[12]+2368359562&4294967295,A=P+(R<<20&4294967295|R>>>12),R=w+(A^P^$)+k[5]+4294588738&4294967295,w=A+(R<<4&4294967295|R>>>28),R=$+(w^A^P)+k[8]+2272392833&4294967295,$=w+(R<<11&4294967295|R>>>21),R=P+($^w^A)+k[11]+1839030562&4294967295,P=$+(R<<16&4294967295|R>>>16),R=A+(P^$^w)+k[14]+4259657740&4294967295,A=P+(R<<23&4294967295|R>>>9),R=w+(A^P^$)+k[1]+2763975236&4294967295,w=A+(R<<4&4294967295|R>>>28),R=$+(w^A^P)+k[4]+1272893353&4294967295,$=w+(R<<11&4294967295|R>>>21),R=P+($^w^A)+k[7]+4139469664&4294967295,P=$+(R<<16&4294967295|R>>>16),R=A+(P^$^w)+k[10]+3200236656&4294967295,A=P+(R<<23&4294967295|R>>>9),R=w+(A^P^$)+k[13]+681279174&4294967295,w=A+(R<<4&4294967295|R>>>28),R=$+(w^A^P)+k[0]+3936430074&4294967295,$=w+(R<<11&4294967295|R>>>21),R=P+($^w^A)+k[3]+3572445317&4294967295,P=$+(R<<16&4294967295|R>>>16),R=A+(P^$^w)+k[6]+76029189&4294967295,A=P+(R<<23&4294967295|R>>>9),R=w+(A^P^$)+k[9]+3654602809&4294967295,w=A+(R<<4&4294967295|R>>>28),R=$+(w^A^P)+k[12]+3873151461&4294967295,$=w+(R<<11&4294967295|R>>>21),R=P+($^w^A)+k[15]+530742520&4294967295,P=$+(R<<16&4294967295|R>>>16),R=A+(P^$^w)+k[2]+3299628645&4294967295,A=P+(R<<23&4294967295|R>>>9),R=w+(P^(A|~$))+k[0]+4096336452&4294967295,w=A+(R<<6&4294967295|R>>>26),R=$+(A^(w|~P))+k[7]+1126891415&4294967295,$=w+(R<<10&4294967295|R>>>22),R=P+(w^($|~A))+k[14]+2878612391&4294967295,P=$+(R<<15&4294967295|R>>>17),R=A+($^(P|~w))+k[5]+4237533241&4294967295,A=P+(R<<21&4294967295|R>>>11),R=w+(P^(A|~$))+k[12]+1700485571&4294967295,w=A+(R<<6&4294967295|R>>>26),R=$+(A^(w|~P))+k[3]+2399980690&4294967295,$=w+(R<<10&4294967295|R>>>22),R=P+(w^($|~A))+k[10]+4293915773&4294967295,P=$+(R<<15&4294967295|R>>>17),R=A+($^(P|~w))+k[1]+2240044497&4294967295,A=P+(R<<21&4294967295|R>>>11),R=w+(P^(A|~$))+k[8]+1873313359&4294967295,w=A+(R<<6&4294967295|R>>>26),R=$+(A^(w|~P))+k[15]+4264355552&4294967295,$=w+(R<<10&4294967295|R>>>22),R=P+(w^($|~A))+k[6]+2734768916&4294967295,P=$+(R<<15&4294967295|R>>>17),R=A+($^(P|~w))+k[13]+1309151649&4294967295,A=P+(R<<21&4294967295|R>>>11),R=w+(P^(A|~$))+k[4]+4149444226&4294967295,w=A+(R<<6&4294967295|R>>>26),R=$+(A^(w|~P))+k[11]+3174756917&4294967295,$=w+(R<<10&4294967295|R>>>22),R=P+(w^($|~A))+k[2]+718787259&4294967295,P=$+(R<<15&4294967295|R>>>17),R=A+($^(P|~w))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+$&4294967295}i.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var A=w-this.blockSize,k=this.B,P=this.h,$=0;$<w;){if(P==0)for(;$<=A;)s(this,I,$),$+=this.blockSize;if(typeof I=="string"){for(;$<w;)if(k[P++]=I.charCodeAt($++),P==this.blockSize){s(this,k),P=0;break}}else for(;$<w;)if(k[P++]=I[$++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=w},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var A=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=A&255,A/=256;for(this.u(I),I=Array(16),w=A=0;4>w;++w)for(var k=0;32>k;k+=8)I[A++]=this.g[w]>>>k&255;return I};function r(I,w){var A=a;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=w(I)}function o(I,w){this.h=w;for(var A=[],k=!0,P=I.length-1;0<=P;P--){var $=I[P]|0;k&&$==w||(A[P]=$,k=!1)}this.g=A}var a={};function l(I){return-128<=I&&128>I?r(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return v(c(-I));for(var w=[],A=1,k=0;I>=A;k++)w[k]=I/A|0,A*=4294967296;return new o(w,0)}function u(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return v(u(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(w,8)),k=d,P=0;P<I.length;P+=8){var $=Math.min(8,I.length-P),R=parseInt(I.substring(P,P+$),w);8>$?($=c(Math.pow(w,$)),k=k.j($).add(c(R))):(k=k.j(A),k=k.add(c(R)))}return k}var d=l(0),p=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-v(this).m();for(var I=0,w=1,A=0;A<this.g.length;A++){var k=this.i(A);I+=(0<=k?k:4294967296+k)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(g(this))return"0";if(y(this))return"-"+v(this).toString(I);for(var w=c(Math.pow(I,6)),A=this,k="";;){var P=O(A,w).g;A=C(A,P.j(w));var $=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=P,g(A))return $+k;for(;6>$.length;)$="0"+$;k=$+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function g(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function y(I){return I.h==-1}t.l=function(I){return I=C(this,I),y(I)?-1:g(I)?0:1};function v(I){for(var w=I.g.length,A=[],k=0;k<w;k++)A[k]=~I.g[k];return new o(A,~I.h).add(p)}t.abs=function(){return y(this)?v(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],k=0,P=0;P<=w;P++){var $=k+(this.i(P)&65535)+(I.i(P)&65535),R=($>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);k=R>>>16,$&=65535,R&=65535,A[P]=R<<16|$}return new o(A,A[A.length-1]&-2147483648?-1:0)};function C(I,w){return I.add(v(w))}t.j=function(I){if(g(this)||g(I))return d;if(y(this))return y(I)?v(this).j(v(I)):v(v(this).j(I));if(y(I))return v(this.j(v(I)));if(0>this.l(f)&&0>I.l(f))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,A=[],k=0;k<2*w;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<I.g.length;P++){var $=this.i(k)>>>16,R=this.i(k)&65535,Ae=I.i(P)>>>16,vt=I.i(P)&65535;A[2*k+2*P]+=R*vt,x(A,2*k+2*P),A[2*k+2*P+1]+=$*vt,x(A,2*k+2*P+1),A[2*k+2*P+1]+=R*Ae,x(A,2*k+2*P+1),A[2*k+2*P+2]+=$*Ae,x(A,2*k+2*P+2)}for(k=0;k<w;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=w;k<2*w;k++)A[k]=0;return new o(A,0)};function x(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function S(I,w){this.g=I,this.h=w}function O(I,w){if(g(w))throw Error("division by zero");if(g(I))return new S(d,d);if(y(I))return w=O(v(I),w),new S(v(w.g),v(w.h));if(y(w))return w=O(I,v(w)),new S(v(w.g),w.h);if(30<I.g.length){if(y(I)||y(w))throw Error("slowDivide_ only works with positive integers.");for(var A=p,k=w;0>=k.l(I);)A=H(A),k=H(k);var P=F(A,1),$=F(k,1);for(k=F(k,2),A=F(A,2);!g(k);){var R=$.add(k);0>=R.l(I)&&(P=P.add(A),$=R),k=F(k,1),A=F(A,1)}return w=C(I,P.j(w)),new S(P,w)}for(P=d;0<=I.l(w);){for(A=Math.max(1,Math.floor(I.m()/w.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),$=c(A),R=$.j(w);y(R)||0<R.l(I);)A-=k,$=c(A),R=$.j(w);g($)&&($=p),P=P.add($),I=C(I,R)}return new S(P,I)}t.A=function(I){return O(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],k=0;k<w;k++)A[k]=this.i(k)&I.i(k);return new o(A,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],k=0;k<w;k++)A[k]=this.i(k)|I.i(k);return new o(A,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],k=0;k<w;k++)A[k]=this.i(k)^I.i(k);return new o(A,this.h^I.h)};function H(I){for(var w=I.g.length+1,A=[],k=0;k<w;k++)A[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(A,I.h)}function F(I,w){var A=w>>5;w%=32;for(var k=I.g.length-A,P=[],$=0;$<k;$++)P[$]=0<w?I.i($+A)>>>w|I.i($+A+1)<<32-w:I.i($+A);return new o(P,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rz=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Qa=o}).apply(typeof ZO<"u"?ZO:typeof self<"u"?self:typeof window<"u"?window:{});var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oz,az,pd,lz,ym,Q0,cz,uz,dz;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,D){return h==Array.prototype||h==Object.prototype||(h[_]=D.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vf=="object"&&Vf];for(var _=0;_<h.length;++_){var D=h[_];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=n(this);function s(h,_){if(_)e:{var D=i;h=h.split(".");for(var E=0;E<h.length-1;E++){var z=h[E];if(!(z in D))break e;D=D[z]}h=h[h.length-1],E=D[h],_=_(E),_!=E&&_!=null&&e(D,h,{configurable:!0,writable:!0,value:_})}}function r(h,_){h instanceof String&&(h+="");var D=0,E=!1,z={next:function(){if(!E&&D<h.length){var U=D++;return{value:_(U,h[U]),done:!1}}return E=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(h){return h||function(){return r(this,function(_,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function c(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function u(h,_,D){return h.call.apply(h.bind,arguments)}function d(h,_,D){if(!h)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,E),h.apply(_,z)}}return function(){return h.apply(_,arguments)}}function p(h,_,D){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,p.apply(null,arguments)}function f(h,_){var D=Array.prototype.slice.call(arguments,1);return function(){var E=D.slice();return E.push.apply(E,arguments),h.apply(this,E)}}function g(h,_){function D(){}D.prototype=_.prototype,h.aa=_.prototype,h.prototype=new D,h.prototype.constructor=h,h.Qb=function(E,z,U){for(var J=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)J[mt-2]=arguments[mt];return _.prototype[z].apply(E,J)}}function y(h){const _=h.length;if(0<_){const D=Array(_);for(let E=0;E<_;E++)D[E]=h[E];return D}return[]}function v(h,_){for(let D=1;D<arguments.length;D++){const E=arguments[D];if(l(E)){const z=h.length||0,U=E.length||0;h.length=z+U;for(let J=0;J<U;J++)h[z+J]=E[J]}else h.push(E)}}class C{constructor(_,D){this.i=_,this.j=D,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function x(h){return/^[\s\xa0]*$/.test(h)}function S(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function O(h){return O[" "](h),h}O[" "]=function(){};var H=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(h,_,D){for(const E in h)_.call(D,h[E],E,h)}function I(h,_){for(const D in h)_.call(void 0,h[D],D,h)}function w(h){const _={};for(const D in h)_[D]=h[D];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,_){let D,E;for(let z=1;z<arguments.length;z++){E=arguments[z];for(D in E)h[D]=E[D];for(let U=0;U<A.length;U++)D=A[U],Object.prototype.hasOwnProperty.call(E,D)&&(h[D]=E[D])}}function P(h){var _=1;h=h.split(":");const D=[];for(;0<_&&h.length;)D.push(h.shift()),_--;return h.length&&D.push(h.join(":")),D}function $(h){a.setTimeout(()=>{throw h},0)}function R(){var h=_e;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Ae{constructor(){this.h=this.g=null}add(_,D){const E=vt.get();E.set(_,D),this.h?this.h.next=E:this.g=E,this.h=E}}var vt=new C(()=>new Qt,h=>h.reset());class Qt{constructor(){this.next=this.g=this.h=null}set(_,D){this.h=_,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let an,ne=!1,_e=new Ae,we=()=>{const h=a.Promise.resolve(void 0);an=()=>{h.then(ft)}};var ft=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(D){$(D)}var _=vt;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}ne=!1};function Je(){this.s=this.s,this.C=this.C}Je.prototype.s=!1,Je.prototype.ma=function(){this.s||(this.s=!0,this.N())},Je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var wi=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const D=()=>{};a.addEventListener("test",D,_),a.removeEventListener("test",D,_)}catch{}return h}();function Si(h,_){if(pt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var D=this.type=h.type,E=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(H){e:{try{O(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else D=="mouseover"?_=h.fromElement:D=="mouseout"&&(_=h.toElement);this.relatedTarget=_,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:be[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Si.aa.h.call(this)}}g(Si,pt);var be={2:"touch",3:"pen",4:"mouse"};Si.prototype.h=function(){Si.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Nt=0;function Zn(h,_,D,E,z){this.listener=h,this.proxy=null,this.src=_,this.type=D,this.capture=!!E,this.ha=z,this.key=++Nt,this.da=this.fa=!1}function li(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Os(h){this.src=h,this.g={},this.h=0}Os.prototype.add=function(h,_,D,E,z){var U=h.toString();h=this.g[U],h||(h=this.g[U]=[],this.h++);var J=da(h,_,E,z);return-1<J?(_=h[J],D||(_.fa=!1)):(_=new Zn(_,this.src,U,!!E,z),_.fa=D,h.push(_)),_};function zi(h,_){var D=_.type;if(D in h.g){var E=h.g[D],z=Array.prototype.indexOf.call(E,_,void 0),U;(U=0<=z)&&Array.prototype.splice.call(E,z,1),U&&(li(_),h.g[D].length==0&&(delete h.g[D],h.h--))}}function da(h,_,D,E){for(var z=0;z<h.length;++z){var U=h[z];if(!U.da&&U.listener==_&&U.capture==!!D&&U.ha==E)return z}return-1}var yy="closure_lm_"+(1e6*Math.random()|0),vy={};function eE(h,_,D,E,z){if(Array.isArray(_)){for(var U=0;U<_.length;U++)eE(h,_[U],D,E,z);return null}return D=iE(D),h&&h[Oe]?h.K(_,D,c(E)?!!E.capture:!!E,z):IW(h,_,D,!1,E,z)}function IW(h,_,D,E,z,U){if(!_)throw Error("Invalid event type");var J=c(z)?!!z.capture:!!z,mt=Dy(h);if(mt||(h[yy]=mt=new Os(h)),D=mt.add(_,D,E,J,U),D.proxy)return D;if(E=AW(),D.proxy=E,E.src=h,E.listener=D,h.addEventListener)wi||(z=J),z===void 0&&(z=!1),h.addEventListener(_.toString(),E,z);else if(h.attachEvent)h.attachEvent(nE(_.toString()),E);else if(h.addListener&&h.removeListener)h.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return D}function AW(){function h(D){return _.call(h.src,h.listener,D)}const _=kW;return h}function tE(h,_,D,E,z){if(Array.isArray(_))for(var U=0;U<_.length;U++)tE(h,_[U],D,E,z);else E=c(E)?!!E.capture:!!E,D=iE(D),h&&h[Oe]?(h=h.i,_=String(_).toString(),_ in h.g&&(U=h.g[_],D=da(U,D,E,z),-1<D&&(li(U[D]),Array.prototype.splice.call(U,D,1),U.length==0&&(delete h.g[_],h.h--)))):h&&(h=Dy(h))&&(_=h.g[_.toString()],h=-1,_&&(h=da(_,D,E,z)),(D=-1<h?_[h]:null)&&Cy(D))}function Cy(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Oe])zi(_.i,h);else{var D=h.type,E=h.proxy;_.removeEventListener?_.removeEventListener(D,E,h.capture):_.detachEvent?_.detachEvent(nE(D),E):_.addListener&&_.removeListener&&_.removeListener(E),(D=Dy(_))?(zi(D,h),D.h==0&&(D.src=null,_[yy]=null)):li(h)}}}function nE(h){return h in vy?vy[h]:vy[h]="on"+h}function kW(h,_){if(h.da)h=!0;else{_=new Si(_,this);var D=h.listener,E=h.ha||h.src;h.fa&&Cy(h),h=D.call(E,_)}return h}function Dy(h){return h=h[yy],h instanceof Os?h:null}var xy="__closure_events_fn_"+(1e9*Math.random()>>>0);function iE(h){return typeof h=="function"?h:(h[xy]||(h[xy]=function(_){return h.handleEvent(_)}),h[xy])}function kn(){Je.call(this),this.i=new Os(this),this.M=this,this.F=null}g(kn,Je),kn.prototype[Oe]=!0,kn.prototype.removeEventListener=function(h,_,D,E){tE(this,h,_,D,E)};function Qn(h,_){var D,E=h.F;if(E)for(D=[];E;E=E.F)D.push(E);if(h=h.M,E=_.type||_,typeof _=="string")_=new pt(_,h);else if(_ instanceof pt)_.target=_.target||h;else{var z=_;_=new pt(E,h),k(_,z)}if(z=!0,D)for(var U=D.length-1;0<=U;U--){var J=_.g=D[U];z=xp(J,E,!0,_)&&z}if(J=_.g=h,z=xp(J,E,!0,_)&&z,z=xp(J,E,!1,_)&&z,D)for(U=0;U<D.length;U++)J=_.g=D[U],z=xp(J,E,!1,_)&&z}kn.prototype.N=function(){if(kn.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var D=h.g[_],E=0;E<D.length;E++)li(D[E]);delete h.g[_],h.h--}}this.F=null},kn.prototype.K=function(h,_,D,E){return this.i.add(String(h),_,!1,D,E)},kn.prototype.L=function(h,_,D,E){return this.i.add(String(h),_,!0,D,E)};function xp(h,_,D,E){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var z=!0,U=0;U<_.length;++U){var J=_[U];if(J&&!J.da&&J.capture==D){var mt=J.listener,yn=J.ha||J.src;J.fa&&zi(h.i,J),z=mt.call(yn,E)!==!1&&z}}return z&&!E.defaultPrevented}function sE(h,_,D){if(typeof h=="function")D&&(h=p(h,D));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function rE(h){h.g=sE(()=>{h.g=null,h.i&&(h.i=!1,rE(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class RW extends Je{constructor(_,D){super(),this.m=_,this.l=D,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:rE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(h){Je.call(this),this.h=h,this.g={}}g(vu,Je);var oE=[];function aE(h){F(h.g,function(_,D){this.g.hasOwnProperty(D)&&Cy(_)},h),h.g={}}vu.prototype.N=function(){vu.aa.N.call(this),aE(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wy=a.JSON.stringify,OW=a.JSON.parse,PW=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Sy(){}Sy.prototype.h=null;function lE(h){return h.h||(h.h=h.i())}function cE(){}var Cu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function by(){pt.call(this,"d")}g(by,pt);function Ey(){pt.call(this,"c")}g(Ey,pt);var ha={},uE=null;function wp(){return uE=uE||new kn}ha.La="serverreachability";function dE(h){pt.call(this,ha.La,h)}g(dE,pt);function Du(h){const _=wp();Qn(_,new dE(_))}ha.STAT_EVENT="statevent";function hE(h,_){pt.call(this,ha.STAT_EVENT,h),this.stat=_}g(hE,pt);function Xn(h){const _=wp();Qn(_,new hE(_,h))}ha.Ma="timingevent";function pE(h,_){pt.call(this,ha.Ma,h),this.size=_}g(pE,pt);function xu(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function wu(){this.g=!0}wu.prototype.xa=function(){this.g=!1};function MW(h,_,D,E,z,U){h.info(function(){if(h.g)if(U)for(var J="",mt=U.split("&"),yn=0;yn<mt.length;yn++){var qe=mt[yn].split("=");if(1<qe.length){var Rn=qe[0];qe=qe[1];var On=Rn.split("_");J=2<=On.length&&On[1]=="type"?J+(Rn+"="+qe+"&"):J+(Rn+"=redacted&")}}else J=null;else J=U;return"XMLHTTP REQ ("+E+") [attempt "+z+"]: "+_+`
`+D+`
`+J})}function VW(h,_,D,E,z,U,J){h.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+z+"]: "+_+`
`+D+`
`+U+" "+J})}function kl(h,_,D,E){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+LW(h,D)+(E?" "+E:"")})}function BW(h,_){h.info(function(){return"TIMEOUT: "+_})}wu.prototype.info=function(){};function LW(h,_){if(!h.g)return _;if(!_)return null;try{var D=JSON.parse(_);if(D){for(h=0;h<D.length;h++)if(Array.isArray(D[h])){var E=D[h];if(!(2>E.length)){var z=E[1];if(Array.isArray(z)&&!(1>z.length)){var U=z[0];if(U!="noop"&&U!="stop"&&U!="close")for(var J=1;J<z.length;J++)z[J]=""}}}}return wy(D)}catch{return _}}var Sp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ty;function bp(){}g(bp,Sy),bp.prototype.g=function(){return new XMLHttpRequest},bp.prototype.i=function(){return{}},Ty=new bp;function no(h,_,D,E){this.j=h,this.i=_,this.l=D,this.R=E||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mE}function mE(){this.i=null,this.g="",this.h=!1}var gE={},Iy={};function Ay(h,_,D){h.L=1,h.v=Ap(cr(_)),h.m=D,h.P=!0,_E(h,null)}function _E(h,_){h.F=Date.now(),Ep(h),h.A=cr(h.v);var D=h.A,E=h.R;Array.isArray(E)||(E=[String(E)]),RE(D.i,"t",E),h.C=0,D=h.j.J,h.h=new mE,h.g=YE(h.j,D?_:null,!h.m),0<h.O&&(h.M=new RW(p(h.Y,h,h.g),h.O)),_=h.U,D=h.g,E=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(oE[0]=z.toString()),z=oE);for(var U=0;U<z.length;U++){var J=eE(D,z[U],E||_.handleEvent,!1,_.h||_);if(!J)break;_.g[J.key]=J}_=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Du(),MW(h.i,h.u,h.A,h.l,h.R,h.m)}no.prototype.ca=function(h){h=h.target;const _=this.M;_&&ur(h)==3?_.j():this.Y(h)},no.prototype.Y=function(h){try{if(h==this.g)e:{const On=ur(this.g);var _=this.g.Ba();const Pl=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||$E(this.g)))){this.J||On!=4||_==7||(_==8||0>=Pl?Du(3):Du(2)),ky(this);var D=this.g.Z();this.X=D;t:if(yE(this)){var E=$E(this.g);h="";var z=E.length,U=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pa(this),Su(this);var J="";break t}this.h.i=new a.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,h+=this.h.i.decode(E[_],{stream:!(U&&_==z-1)});E.length=0,this.h.g+=h,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=D==200,VW(this.i,this.u,this.A,this.l,this.R,On,D),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,yn=this.g;if((mt=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(mt)){var qe=mt;break t}}qe=null}if(D=qe)kl(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ry(this,D);else{this.o=!1,this.s=3,Xn(12),pa(this),Su(this);break e}}if(this.P){D=!0;let ps;for(;!this.J&&this.C<J.length;)if(ps=$W(this,J),ps==Iy){On==4&&(this.s=4,Xn(14),D=!1),kl(this.i,this.l,null,"[Incomplete Response]");break}else if(ps==gE){this.s=4,Xn(15),kl(this.i,this.l,J,"[Invalid Chunk]"),D=!1;break}else kl(this.i,this.l,ps,null),Ry(this,ps);if(yE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||J.length!=0||this.h.h||(this.s=1,Xn(16),D=!1),this.o=this.o&&D,!D)kl(this.i,this.l,J,"[Invalid Chunked Response]"),pa(this),Su(this);else if(0<J.length&&!this.W){this.W=!0;var Rn=this.j;Rn.g==this&&Rn.ba&&!Rn.M&&(Rn.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Ly(Rn),Rn.M=!0,Xn(11))}}else kl(this.i,this.l,J,null),Ry(this,J);On==4&&pa(this),this.o&&!this.J&&(On==4?UE(this.j,this):(this.o=!1,Ep(this)))}else tG(this.g),D==400&&0<J.indexOf("Unknown SID")?(this.s=3,Xn(12)):(this.s=0,Xn(13)),pa(this),Su(this)}}}catch{}finally{}};function yE(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function $W(h,_){var D=h.C,E=_.indexOf(`
`,D);return E==-1?Iy:(D=Number(_.substring(D,E)),isNaN(D)?gE:(E+=1,E+D>_.length?Iy:(_=_.slice(E,E+D),h.C=E+D,_)))}no.prototype.cancel=function(){this.J=!0,pa(this)};function Ep(h){h.S=Date.now()+h.I,vE(h,h.I)}function vE(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=xu(p(h.ba,h),_)}function ky(h){h.B&&(a.clearTimeout(h.B),h.B=null)}no.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(BW(this.i,this.A),this.L!=2&&(Du(),Xn(17)),pa(this),this.s=2,Su(this)):vE(this,this.S-h)};function Su(h){h.j.G==0||h.J||UE(h.j,h)}function pa(h){ky(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,aE(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Ry(h,_){try{var D=h.j;if(D.G!=0&&(D.g==h||Oy(D.h,h))){if(!h.K&&Oy(D.h,h)&&D.G==3){try{var E=D.Da.g.parse(_)}catch{E=null}if(Array.isArray(E)&&E.length==3){var z=E;if(z[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<h.F)Mp(D),Op(D);else break e;By(D),Xn(18)}}else D.za=z[1],0<D.za-D.T&&37500>z[2]&&D.F&&D.v==0&&!D.C&&(D.C=xu(p(D.Za,D),6e3));if(1>=xE(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else ma(D,11)}else if((h.K||D.g==h)&&Mp(D),!x(_))for(z=D.Da.g.parse(_),_=0;_<z.length;_++){let qe=z[_];if(D.T=qe[0],qe=qe[1],D.G==2)if(qe[0]=="c"){D.K=qe[1],D.ia=qe[2];const Rn=qe[3];Rn!=null&&(D.la=Rn,D.j.info("VER="+D.la));const On=qe[4];On!=null&&(D.Aa=On,D.j.info("SVER="+D.Aa));const Pl=qe[5];Pl!=null&&typeof Pl=="number"&&0<Pl&&(E=1.5*Pl,D.L=E,D.j.info("backChannelRequestTimeoutMs_="+E)),E=D;const ps=h.g;if(ps){const Bp=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bp){var U=E.h;U.g||Bp.indexOf("spdy")==-1&&Bp.indexOf("quic")==-1&&Bp.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Py(U,U.h),U.h=null))}if(E.D){const $y=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;$y&&(E.ya=$y,xt(E.I,E.D,$y))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-h.F,D.j.info("Handshake RTT: "+D.R+"ms")),E=D;var J=h;if(E.qa=qE(E,E.J?E.ia:null,E.W),J.K){wE(E.h,J);var mt=J,yn=E.L;yn&&(mt.I=yn),mt.B&&(ky(mt),Ep(mt)),E.g=J}else WE(E);0<D.i.length&&Pp(D)}else qe[0]!="stop"&&qe[0]!="close"||ma(D,7);else D.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?ma(D,7):Vy(D):qe[0]!="noop"&&D.l&&D.l.ta(qe),D.v=0)}}Du(4)}catch{}}var FW=class{constructor(h,_){this.g=h,this.map=_}};function CE(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function DE(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function xE(h){return h.h?1:h.g?h.g.size:0}function Oy(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Py(h,_){h.g?h.g.add(_):h.h=_}function wE(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}CE.prototype.cancel=function(){if(this.i=SE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function SE(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const D of h.g.values())_=_.concat(D.D);return _}return y(h.i)}function HW(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var _=[],D=h.length,E=0;E<D;E++)_.push(h[E]);return _}_=[],D=0;for(E in h)_[D++]=h[E];return _}function NW(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var _=[];h=h.length;for(var D=0;D<h;D++)_.push(D);return _}_=[],D=0;for(const E in h)_[D++]=E;return _}}}function bE(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var D=NW(h),E=HW(h),z=E.length,U=0;U<z;U++)_.call(void 0,E[U],D&&D[U],h)}var EE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zW(h,_){if(h){h=h.split("&");for(var D=0;D<h.length;D++){var E=h[D].indexOf("="),z=null;if(0<=E){var U=h[D].substring(0,E);z=h[D].substring(E+1)}else U=h[D];_(U,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function fa(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof fa){this.h=h.h,Tp(this,h.j),this.o=h.o,this.g=h.g,Ip(this,h.s),this.l=h.l;var _=h.i,D=new Tu;D.i=_.i,_.g&&(D.g=new Map(_.g),D.h=_.h),TE(this,D),this.m=h.m}else h&&(_=String(h).match(EE))?(this.h=!1,Tp(this,_[1]||"",!0),this.o=bu(_[2]||""),this.g=bu(_[3]||"",!0),Ip(this,_[4]),this.l=bu(_[5]||"",!0),TE(this,_[6]||"",!0),this.m=bu(_[7]||"")):(this.h=!1,this.i=new Tu(null,this.h))}fa.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Eu(_,IE,!0),":");var D=this.g;return(D||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Eu(_,IE,!0),"@"),h.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&h.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&h.push("/"),h.push(Eu(D,D.charAt(0)=="/"?UW:GW,!0))),(D=this.i.toString())&&h.push("?",D),(D=this.m)&&h.push("#",Eu(D,jW)),h.join("")};function cr(h){return new fa(h)}function Tp(h,_,D){h.j=D?bu(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Ip(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function TE(h,_,D){_ instanceof Tu?(h.i=_,qW(h.i,h.h)):(D||(_=Eu(_,KW)),h.i=new Tu(_,h.h))}function xt(h,_,D){h.i.set(_,D)}function Ap(h){return xt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function bu(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Eu(h,_,D){return typeof h=="string"?(h=encodeURI(h).replace(_,WW),D&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function WW(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var IE=/[#\/\?@]/g,GW=/[#\?:]/g,UW=/[#\?]/g,KW=/[#\?@]/g,jW=/#/g;function Tu(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function io(h){h.g||(h.g=new Map,h.h=0,h.i&&zW(h.i,function(_,D){h.add(decodeURIComponent(_.replace(/\+/g," ")),D)}))}t=Tu.prototype,t.add=function(h,_){io(this),this.i=null,h=Rl(this,h);var D=this.g.get(h);return D||this.g.set(h,D=[]),D.push(_),this.h+=1,this};function AE(h,_){io(h),_=Rl(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function kE(h,_){return io(h),_=Rl(h,_),h.g.has(_)}t.forEach=function(h,_){io(this),this.g.forEach(function(D,E){D.forEach(function(z){h.call(_,z,E,this)},this)},this)},t.na=function(){io(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),D=[];for(let E=0;E<_.length;E++){const z=h[E];for(let U=0;U<z.length;U++)D.push(_[E])}return D},t.V=function(h){io(this);let _=[];if(typeof h=="string")kE(this,h)&&(_=_.concat(this.g.get(Rl(this,h))));else{h=Array.from(this.g.values());for(let D=0;D<h.length;D++)_=_.concat(h[D])}return _},t.set=function(h,_){return io(this),this.i=null,h=Rl(this,h),kE(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function RE(h,_,D){AE(h,_),0<D.length&&(h.i=null,h.g.set(Rl(h,_),y(D)),h.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var D=0;D<_.length;D++){var E=_[D];const U=encodeURIComponent(String(E)),J=this.V(E);for(E=0;E<J.length;E++){var z=U;J[E]!==""&&(z+="="+encodeURIComponent(String(J[E]))),h.push(z)}}return this.i=h.join("&")};function Rl(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function qW(h,_){_&&!h.j&&(io(h),h.i=null,h.g.forEach(function(D,E){var z=E.toLowerCase();E!=z&&(AE(this,E),RE(this,z,D))},h)),h.j=_}function YW(h,_){const D=new wu;if(a.Image){const E=new Image;E.onload=f(so,D,"TestLoadImage: loaded",!0,_,E),E.onerror=f(so,D,"TestLoadImage: error",!1,_,E),E.onabort=f(so,D,"TestLoadImage: abort",!1,_,E),E.ontimeout=f(so,D,"TestLoadImage: timeout",!1,_,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=h}else _(!1)}function ZW(h,_){const D=new wu,E=new AbortController,z=setTimeout(()=>{E.abort(),so(D,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:E.signal}).then(U=>{clearTimeout(z),U.ok?so(D,"TestPingServer: ok",!0,_):so(D,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),so(D,"TestPingServer: error",!1,_)})}function so(h,_,D,E,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),E(D)}catch{}}function QW(){this.g=new PW}function XW(h,_,D){const E=D||"";try{bE(h,function(z,U){let J=z;c(z)&&(J=wy(z)),_.push(E+U+"="+encodeURIComponent(J))})}catch(z){throw _.push(E+"type="+encodeURIComponent("_badmap")),z}}function Iu(h){this.l=h.Ub||null,this.j=h.eb||!1}g(Iu,Sy),Iu.prototype.g=function(){return new kp(this.l,this.j)},Iu.prototype.i=function(h){return function(){return h}}({});function kp(h,_){kn.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(kp,kn),t=kp.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ku(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Au(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ku(this)),this.g&&(this.readyState=3,ku(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;OE(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function OE(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Au(this):ku(this),this.readyState==3&&OE(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Au(this))},t.Qa=function(h){this.g&&(this.response=h,Au(this))},t.ga=function(){this.g&&Au(this)};function Au(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ku(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var D=_.next();!D.done;)D=D.value,h.push(D[0]+": "+D[1]),D=_.next();return h.join(`\r
`)};function ku(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(kp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function PE(h){let _="";return F(h,function(D,E){_+=E,_+=":",_+=D,_+=`\r
`}),_}function My(h,_,D){e:{for(E in D){var E=!1;break e}E=!0}E||(D=PE(D),typeof h=="string"?D!=null&&encodeURIComponent(String(D)):xt(h,_,D))}function Bt(h){kn.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Bt,kn);var JW=/^https?$/i,eG=["POST","PUT"];t=Bt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,D,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ty.g(),this.v=this.o?lE(this.o):lE(Ty),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(U){ME(this,U);return}if(h=D||"",D=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var z in E)D.set(z,E[z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())D.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(D.keys()).find(U=>U.toLowerCase()=="content-type"),z=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eG,_,void 0))||E||z||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of D)this.g.setRequestHeader(U,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{LE(this),this.u=!0,this.g.send(h),this.u=!1}catch(U){ME(this,U)}};function ME(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,VE(h),Rp(h)}function VE(h){h.A||(h.A=!0,Qn(h,"complete"),Qn(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Qn(this,"complete"),Qn(this,"abort"),Rp(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rp(this,!0)),Bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?BE(this):this.bb())},t.bb=function(){BE(this)};function BE(h){if(h.h&&typeof o<"u"&&(!h.v[1]||ur(h)!=4||h.Z()!=2)){if(h.u&&ur(h)==4)sE(h.Ea,0,h);else if(Qn(h,"readystatechange"),ur(h)==4){h.h=!1;try{const J=h.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var D;if(!(D=_)){var E;if(E=J===0){var z=String(h.D).match(EE)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),E=!JW.test(z?z.toLowerCase():"")}D=E}if(D)Qn(h,"complete"),Qn(h,"success");else{h.m=6;try{var U=2<ur(h)?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.Z()+"]",VE(h)}}finally{Rp(h)}}}}function Rp(h,_){if(h.g){LE(h);const D=h.g,E=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Qn(h,"ready");try{D.onreadystatechange=E}catch{}}}function LE(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function ur(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),OW(_)}};function $E(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function tG(h){const _={};h=(h.g&&2<=ur(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<h.length;E++){if(x(h[E]))continue;var D=P(h[E]);const z=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const U=_[z]||[];_[z]=U,U.push(D)}I(_,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ru(h,_,D){return D&&D.internalChannelParams&&D.internalChannelParams[h]||_}function FE(h){this.Aa=0,this.i=[],this.j=new wu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ru("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ru("baseRetryDelayMs",5e3,h),this.cb=Ru("retryDelaySeedMs",1e4,h),this.Wa=Ru("forwardChannelMaxRetries",2,h),this.wa=Ru("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new CE(h&&h.concurrentRequestLimit),this.Da=new QW,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=FE.prototype,t.la=8,t.G=1,t.connect=function(h,_,D,E){Xn(0),this.W=h,this.H=_||{},D&&E!==void 0&&(this.H.OSID=D,this.H.OAID=E),this.F=this.X,this.I=qE(this,null,this.W),Pp(this)};function Vy(h){if(HE(h),h.G==3){var _=h.U++,D=cr(h.I);if(xt(D,"SID",h.K),xt(D,"RID",_),xt(D,"TYPE","terminate"),Ou(h,D),_=new no(h,h.j,_),_.L=2,_.v=Ap(cr(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!D&&a.Image&&(new Image().src=_.v,D=!0),D||(_.g=YE(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ep(_)}jE(h)}function Op(h){h.g&&(Ly(h),h.g.cancel(),h.g=null)}function HE(h){Op(h),h.u&&(a.clearTimeout(h.u),h.u=null),Mp(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Pp(h){if(!DE(h.h)&&!h.s){h.s=!0;var _=h.Ga;an||we(),ne||(an(),ne=!0),_e.add(_,h),h.B=0}}function nG(h,_){return xE(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=xu(p(h.Ga,h,_),KE(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new no(this,this.j,h);let U=this.o;if(this.S&&(U?(U=w(U),k(U,this.S)):U=this.S),this.m!==null||this.O||(z.H=U,U=null),this.P)e:{for(var _=0,D=0;D<this.i.length;D++){t:{var E=this.i[D];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(_+=E,4096<_){_=D;break e}if(_===4096||D===this.i.length-1){_=D+1;break e}}_=1e3}else _=1e3;_=zE(this,z,_),D=cr(this.I),xt(D,"RID",h),xt(D,"CVER",22),this.D&&xt(D,"X-HTTP-Session-Id",this.D),Ou(this,D),U&&(this.O?_="headers="+encodeURIComponent(String(PE(U)))+"&"+_:this.m&&My(D,this.m,U)),Py(this.h,z),this.Ua&&xt(D,"TYPE","init"),this.P?(xt(D,"$req",_),xt(D,"SID","null"),z.T=!0,Ay(z,D,null)):Ay(z,D,_),this.G=2}}else this.G==3&&(h?NE(this,h):this.i.length==0||DE(this.h)||NE(this))};function NE(h,_){var D;_?D=_.l:D=h.U++;const E=cr(h.I);xt(E,"SID",h.K),xt(E,"RID",D),xt(E,"AID",h.T),Ou(h,E),h.m&&h.o&&My(E,h.m,h.o),D=new no(h,h.j,D,h.B+1),h.m===null&&(D.H=h.o),_&&(h.i=_.D.concat(h.i)),_=zE(h,D,1e3),D.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Py(h.h,D),Ay(D,E,_)}function Ou(h,_){h.H&&F(h.H,function(D,E){xt(_,E,D)}),h.l&&bE({},function(D,E){xt(_,E,D)})}function zE(h,_,D){D=Math.min(h.i.length,D);var E=h.l?p(h.l.Na,h.l,h):null;e:{var z=h.i;let U=-1;for(;;){const J=["count="+D];U==-1?0<D?(U=z[0].g,J.push("ofs="+U)):U=0:J.push("ofs="+U);let mt=!0;for(let yn=0;yn<D;yn++){let qe=z[yn].g;const Rn=z[yn].map;if(qe-=U,0>qe)U=Math.max(0,z[yn].g-100),mt=!1;else try{XW(Rn,J,"req"+qe+"_")}catch{E&&E(Rn)}}if(mt){E=J.join("&");break e}}}return h=h.i.splice(0,D),_.D=h,E}function WE(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;an||we(),ne||(an(),ne=!0),_e.add(_,h),h.v=0}}function By(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=xu(p(h.Fa,h),KE(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,GE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=xu(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xn(10),Op(this),GE(this))};function Ly(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function GE(h){h.g=new no(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=cr(h.qa);xt(_,"RID","rpc"),xt(_,"SID",h.K),xt(_,"AID",h.T),xt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&xt(_,"TO",h.ja),xt(_,"TYPE","xmlhttp"),Ou(h,_),h.m&&h.o&&My(_,h.m,h.o),h.L&&(h.g.I=h.L);var D=h.g;h=h.ia,D.L=1,D.v=Ap(cr(_)),D.m=null,D.P=!0,_E(D,h)}t.Za=function(){this.C!=null&&(this.C=null,Op(this),By(this),Xn(19))};function Mp(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function UE(h,_){var D=null;if(h.g==_){Mp(h),Ly(h),h.g=null;var E=2}else if(Oy(h.h,_))D=_.D,wE(h.h,_),E=1;else return;if(h.G!=0){if(_.o)if(E==1){D=_.m?_.m.length:0,_=Date.now()-_.F;var z=h.B;E=wp(),Qn(E,new pE(E,D)),Pp(h)}else WE(h);else if(z=_.s,z==3||z==0&&0<_.X||!(E==1&&nG(h,_)||E==2&&By(h)))switch(D&&0<D.length&&(_=h.h,_.i=_.i.concat(D)),z){case 1:ma(h,5);break;case 4:ma(h,10);break;case 3:ma(h,6);break;default:ma(h,2)}}}function KE(h,_){let D=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(D*=2),D*_}function ma(h,_){if(h.j.info("Error code "+_),_==2){var D=p(h.fb,h),E=h.Xa;const z=!E;E=new fa(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tp(E,"https"),Ap(E),z?YW(E.toString(),D):ZW(E.toString(),D)}else Xn(2);h.G=0,h.l&&h.l.sa(_),jE(h),HE(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Xn(2)):(this.j.info("Failed to ping google.com"),Xn(1))};function jE(h){if(h.G=0,h.ka=[],h.l){const _=SE(h.h);(_.length!=0||h.i.length!=0)&&(v(h.ka,_),v(h.ka,h.i),h.h.i.length=0,y(h.i),h.i.length=0),h.l.ra()}}function qE(h,_,D){var E=D instanceof fa?cr(D):new fa(D);if(E.g!="")_&&(E.g=_+"."+E.g),Ip(E,E.s);else{var z=a.location;E=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var U=new fa(null);E&&Tp(U,E),_&&(U.g=_),z&&Ip(U,z),D&&(U.l=D),E=U}return D=h.D,_=h.ya,D&&_&&xt(E,D,_),xt(E,"VER",h.la),Ou(h,E),E}function YE(h,_,D){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Bt(new Iu({eb:D})):new Bt(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZE(){}t=ZE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vp(){}Vp.prototype.g=function(h,_){return new bi(h,_)};function bi(h,_){kn.call(this),this.g=new FE(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!x(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ol(this)}g(bi,kn),bi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bi.prototype.close=function(){Vy(this.g)},bi.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var D={};D.__data__=h,h=D}else this.u&&(D={},D.__data__=wy(h),h=D);_.i.push(new FW(_.Ya++,h)),_.G==3&&Pp(_)},bi.prototype.N=function(){this.g.l=null,delete this.j,Vy(this.g),delete this.g,bi.aa.N.call(this)};function QE(h){by.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const D in _){h=D;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}g(QE,by);function XE(){Ey.call(this),this.status=1}g(XE,Ey);function Ol(h){this.g=h}g(Ol,ZE),Ol.prototype.ua=function(){Qn(this.g,"a")},Ol.prototype.ta=function(h){Qn(this.g,new QE(h))},Ol.prototype.sa=function(h){Qn(this.g,new XE)},Ol.prototype.ra=function(){Qn(this.g,"b")},Vp.prototype.createWebChannel=Vp.prototype.g,bi.prototype.send=bi.prototype.o,bi.prototype.open=bi.prototype.m,bi.prototype.close=bi.prototype.close,dz=function(){return new Vp},uz=function(){return wp()},cz=ha,Q0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sp.NO_ERROR=0,Sp.TIMEOUT=8,Sp.HTTP_ERROR=6,ym=Sp,fE.COMPLETE="complete",lz=fE,cE.EventType=Cu,Cu.OPEN="a",Cu.CLOSE="b",Cu.ERROR="c",Cu.MESSAGE="d",kn.prototype.listen=kn.prototype.K,pd=cE,az=Iu,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,oz=Bt}).apply(typeof Vf<"u"?Vf:typeof self<"u"?self:typeof window<"u"?window:{});const QO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new JN("@firebase/firestore");function sd(){return ll.logLevel}function le(t,...e){if(ll.logLevel<=Ue.DEBUG){const n=e.map(xb);ll.debug(`Firestore (${gu}): ${t}`,...n)}}function Yr(t,...e){if(ll.logLevel<=Ue.ERROR){const n=e.map(xb);ll.error(`Firestore (${gu}): ${t}`,...n)}}function Jc(t,...e){if(ll.logLevel<=Ue.WARN){const n=e.map(xb);ll.warn(`Firestore (${gu}): ${t}`,...n)}}function xb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t="Unexpected state"){const e=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: `+t;throw Yr(e),new Error(e)}function yt(t,e){t||xe()}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends mu{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Pce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Fn.UNAUTHENTICATED))}shutdown(){}}class Mce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vce{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new Ho;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ho,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ho)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string"),new hz(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string"),new Fn(e)}}class Bce{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Lce{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Bce(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $ce{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fce{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=r=>{r.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(yt(typeof n.token=="string"),this.R=n.token,new $ce(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=Hce(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%e.length))}return i}}function Ze(t,e){return t<e?-1:t>e?1:0}function eu(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new on(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new on(0,0))}static max(){return new Ee(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,i){n===void 0?n=0:n>e.length&&xe(),i===void 0?i=e.length-n:i>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ih.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ih?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=e.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class kt extends Ih{construct(e,n,i){return new kt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new kt(n)}static emptyPath(){return new kt([])}}const Nce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends Ih{construct(e,n,i){return new Sn(e,n,i)}static isValidIdentifier(e){return Nce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Sn(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(n)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(kt.fromString(e))}static fromName(e){return new ge(kt.fromString(e).popFirst(5))}static empty(){return new ge(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new kt(e.slice()))}}function zce(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(i===1e9?new on(n+1,0):new on(n,i));return new jo(s,ge.empty(),e)}function Wce(t){return new jo(t.readTime,t.key,-1)}class jo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new jo(Ee.min(),ge.empty(),-1)}static max(){return new jo(Ee.max(),ge.empty(),-1)}}function Gce(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mp(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==Uce)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,i)=>{n(e)})}static reject(e){return new Y((n,i)=>{i(e)})}static waitFor(e){return new Y((n,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(e){let n=Y.resolve(!1);for(const i of e)n=n.next(s=>s?Y.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new Y((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(e,n){return new Y((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function jce(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wb.oe=-1;function ny(t){return t==null}function Pg(t){return t===0&&1/t==-1/0}function qce(t){return typeof t=="number"&&Number.isInteger(t)&&!Pg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Il(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bf(this.root,e,this.comparator,!0)}}class Bf{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??xn.RED,this.left=s??xn.EMPTY,this.right=r??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new xn(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,i,s,r){return this}insert(e,n,i){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new JO(this.data.getIterator())}getIteratorFrom(e){return new JO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tn(this.comparator);return n.data=e,n}}class JO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new Oi([])}unionWith(e){let n=new Tn(Sn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new mz("Invalid base64 string: "+r):r}}(e);return new An(n)}static fromUint8Array(e){const n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new An(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const Yce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(t){if(yt(!!t),typeof t=="string"){let e=0;const n=Yce.exec(t);if(yt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cl(t){return typeof t=="string"?An.fromBase64String(t):An.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bb(t){const e=t.mapValue.fields.__previous_value__;return Sb(e)?bb(e):e}function Ah(t){const e=qo(t.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(e,n,i,s,r,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class kh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new kh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof kh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sb(t)?4:Xce(t)?9007199254740991:Qce(t)?10:11:xe()}function sr(t,e){if(t===e)return!0;const n=ul(t);if(n!==ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ah(t).isEqual(Ah(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=qo(s.timestampValue),a=qo(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return cl(s.bytesValue).isEqual(cl(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Gt(s.geoPointValue.latitude)===Gt(r.geoPointValue.latitude)&&Gt(s.geoPointValue.longitude)===Gt(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Gt(s.integerValue)===Gt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Gt(s.doubleValue),a=Gt(r.doubleValue);return o===a?Pg(o)===Pg(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return eu(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(XO(o)!==XO(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!sr(o[l],a[l])))return!1;return!0}(t,e);default:return xe()}}function Rh(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function tu(t,e){if(t===e)return 0;const n=ul(t),i=ul(e);if(n!==i)return Ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Gt(r.integerValue||r.doubleValue),l=Gt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return eP(t.timestampValue,e.timestampValue);case 4:return eP(Ah(t),Ah(e));case 5:return Ze(t.stringValue,e.stringValue);case 6:return function(r,o){const a=cl(r),l=cl(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ze(a[c],l[c]);if(u!==0)return u}return Ze(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Ze(Gt(r.latitude),Gt(o.latitude));return a!==0?a:Ze(Gt(r.longitude),Gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tP(t.arrayValue,e.arrayValue);case 10:return function(r,o){var a,l,c,u;const d=r.fields||{},p=o.fields||{},f=(a=d.value)===null||a===void 0?void 0:a.arrayValue,g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,y=Ze(((c=f==null?void 0:f.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:tP(f,g)}(t.mapValue,e.mapValue);case 11:return function(r,o){if(r===Lf.mapValue&&o===Lf.mapValue)return 0;if(r===Lf.mapValue)return 1;if(o===Lf.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const p=Ze(l[d],u[d]);if(p!==0)return p;const f=tu(a[l[d]],c[u[d]]);if(f!==0)return f}return Ze(l.length,u.length)}(t.mapValue,e.mapValue);default:throw xe()}}function eP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=qo(t),i=qo(e),s=Ze(n.seconds,i.seconds);return s!==0?s:Ze(n.nanos,i.nanos)}function tP(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=tu(n[s],i[s]);if(r)return r}return Ze(n.length,i.length)}function nu(t){return X0(t)}function X0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=qo(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=X0(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${X0(n.fields[o])}`;return s+"}"}(t.mapValue):xe()}function J0(t){return!!t&&"integerValue"in t}function Eb(t){return!!t&&"arrayValue"in t}function nP(t){return!!t&&"nullValue"in t}function iP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vm(t){return!!t&&"mapValue"in t}function Qce(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Md(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Il(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Md(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Md(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Xce(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Md(n)}setAll(e){let n=Sn.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=Md(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());vm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];vm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Il(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new hi(Md(this.value))}}function gz(t){const e=[];return Il(t.fields,(n,i)=>{const s=new Sn([n]);if(vm(i)){const r=gz(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new Oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n,i,s,r,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new zn(e,0,Ee.min(),Ee.min(),Ee.min(),hi.empty(),0)}static newFoundDocument(e,n,i,s){return new zn(e,1,n,Ee.min(),i,s,0)}static newNoDocument(e,n){return new zn(e,2,n,Ee.min(),Ee.min(),hi.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,Ee.min(),Ee.min(),hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.position=e,this.inclusive=n}}function sP(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(r.field.isKeyField()?i=ge.comparator(ge.fromName(o.referenceValue),n.key):i=tu(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function rP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n="asc"){this.field=e,this.dir=n}}function Jce(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{}class Jt extends _z{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new tue(e,n,i):n==="array-contains"?new sue(e,i):n==="in"?new rue(e,i):n==="not-in"?new oue(e,i):n==="array-contains-any"?new aue(e,i):new Jt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new nue(e,i):new iue(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(tu(n,this.value)):n!==null&&ul(this.value)===ul(n)&&this.matchesComparison(tu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends _z{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rr(e,n)}matches(e){return yz(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yz(t){return t.op==="and"}function vz(t){return eue(t)&&yz(t)}function eue(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function ex(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+nu(t.value);if(vz(t))return t.filters.map(e=>ex(e)).join(",");{const e=t.filters.map(n=>ex(n)).join(",");return`${t.op}(${e})`}}function Cz(t,e){return t instanceof Jt?function(i,s){return s instanceof Jt&&i.op===s.op&&i.field.isEqual(s.field)&&sr(i.value,s.value)}(t,e):t instanceof rr?function(i,s){return s instanceof rr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&Cz(o,s.filters[a]),!0):!1}(t,e):void xe()}function Dz(t){return t instanceof Jt?function(n){return`${n.field.canonicalString()} ${n.op} ${nu(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(Dz).join(" ,")+"}"}(t):"Filter"}class tue extends Jt{constructor(e,n,i){super(e,n,i),this.key=ge.fromName(i.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class nue extends Jt{constructor(e,n){super(e,"in",n),this.keys=xz("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iue extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=xz("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xz(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ge.fromName(i.referenceValue))}class sue extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eb(n)&&Rh(n.arrayValue,this.value)}}class rue extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rh(this.value.arrayValue,n)}}class oue extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Rh(this.value.arrayValue,n)}}class aue extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Rh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lue{constructor(e,n=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.ue=null}}function oP(t,e=null,n=[],i=[],s=null,r=null,o=null){return new lue(t,e,n,i,s,r,o)}function Tb(t){const e=Ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ex(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ny(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>nu(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>nu(i)).join(",")),e.ue=n}return e.ue}function Ib(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Jce(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Cz(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rP(t.startAt,e.startAt)&&rP(t.endAt,e.endAt)}function tx(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cue(t,e,n,i,s,r,o,a){return new iy(t,e,n,i,s,r,o,a)}function wz(t){return new iy(t)}function aP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uue(t){return t.collectionGroup!==null}function Vd(t){const e=Ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const r of e.explicitOrderBy)e.ce.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tn(Sn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.ce.push(new Vg(r,i))}),n.has(Sn.keyField().canonicalString())||e.ce.push(new Vg(Sn.keyField(),i))}return e.ce}function Xs(t){const e=Ie(t);return e.le||(e.le=due(e,Vd(t))),e.le}function due(t,e){if(t.limitType==="F")return oP(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Vg(s.field,r)});const n=t.endAt?new Mg(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Mg(t.startAt.position,t.startAt.inclusive):null;return oP(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function nx(t,e,n){return new iy(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sy(t,e){return Ib(Xs(t),Xs(e))&&t.limitType===e.limitType}function Sz(t){return`${Tb(Xs(t))}|lt:${t.limitType}`}function tc(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Dz(s)).join(", ")}]`),ny(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>nu(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>nu(s)).join(",")),`Target(${i})`}(Xs(t))}; limitType=${t.limitType})`}function ry(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):ge.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of Vd(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,a,l){const c=sP(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Vd(i),s)||i.endAt&&!function(o,a,l){const c=sP(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Vd(i),s))}(t,e)}function hue(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bz(t){return(e,n)=>{let i=!1;for(const s of Vd(t)){const r=pue(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function pue(t,e,n){const i=t.field.isKeyField()?ge.comparator(e.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?tu(l,c):xe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Il(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return fz(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fue=new Vt(ge.comparator);function Zr(){return fue}const Ez=new Vt(ge.comparator);function fd(...t){let e=Ez;for(const n of t)e=e.insert(n.key,n);return e}function Tz(t){let e=Ez;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Fa(){return Bd()}function Iz(){return Bd()}function Bd(){return new _u(t=>t.toString(),(t,e)=>t.isEqual(e))}const mue=new Vt(ge.comparator),gue=new Tn(ge.comparator);function He(...t){let e=gue;for(const n of t)e=e.add(n);return e}const _ue=new Tn(Ze);function yue(){return _ue}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pg(e)?"-0":e}}function Az(t){return{integerValue:""+t}}function vue(t,e){return qce(e)?Az(e):Ab(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this._=void 0}}function Cue(t,e,n){return t instanceof Bg?function(s,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Sb(r)&&(r=bb(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof Oh?Rz(t,e):t instanceof Ph?Oz(t,e):function(s,r){const o=kz(s,r),a=lP(o)+lP(s.Pe);return J0(o)&&J0(s.Pe)?Az(a):Ab(s.serializer,a)}(t,e)}function Due(t,e,n){return t instanceof Oh?Rz(t,e):t instanceof Ph?Oz(t,e):n}function kz(t,e){return t instanceof Lg?function(i){return J0(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Bg extends oy{}class Oh extends oy{constructor(e){super(),this.elements=e}}function Rz(t,e){const n=Pz(e);for(const i of t.elements)n.some(s=>sr(s,i))||n.push(i);return{arrayValue:{values:n}}}class Ph extends oy{constructor(e){super(),this.elements=e}}function Oz(t,e){let n=Pz(e);for(const i of t.elements)n=n.filter(s=>!sr(s,i));return{arrayValue:{values:n}}}class Lg extends oy{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function lP(t){return Gt(t.integerValue||t.doubleValue)}function Pz(t){return Eb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xue(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Oh&&s instanceof Oh||i instanceof Ph&&s instanceof Ph?eu(i.elements,s.elements,sr):i instanceof Lg&&s instanceof Lg?sr(i.Pe,s.Pe):i instanceof Bg&&s instanceof Bg}(t.transform,e.transform)}class wue{constructor(e,n){this.version=e,this.transformResults=n}}class Es{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Es}static exists(e){return new Es(void 0,e)}static updateTime(e){return new Es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ay{}function Mz(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kb(t.key,Es.none()):new _p(t.key,t.data,Es.none());{const n=t.data,i=hi.empty();let s=new Tn(Sn.comparator);for(let r of e.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new ua(t.key,i,new Oi(s.toArray()),Es.none())}}function Sue(t,e,n){t instanceof _p?function(s,r,o){const a=s.value.clone(),l=uP(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ua?function(s,r,o){if(!Cm(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=uP(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(Vz(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ld(t,e,n,i){return t instanceof _p?function(r,o,a,l){if(!Cm(r.precondition,o))return a;const c=r.value.clone(),u=dP(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof ua?function(r,o,a,l){if(!Cm(r.precondition,o))return a;const c=dP(r.fieldTransforms,l,o),u=o.data;return u.setAll(Vz(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(r,o,a){return Cm(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function bue(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=kz(i.transform,s||null);r!=null&&(n===null&&(n=hi.empty()),n.set(i.field,r))}return n||null}function cP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&eu(i,s,(r,o)=>xue(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _p extends ay{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ua extends ay{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Vz(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function uP(t,e,n){const i=new Map;yt(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,Due(o,a,n[s]))}return i}function dP(t,e,n){const i=new Map;for(const s of t){const r=s.transform,o=n.data.field(s.field);i.set(s.field,Cue(r,o,e))}return i}class kb extends ay{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Eue extends ay{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&Sue(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ld(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ld(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Iz();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=Mz(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(n,i)=>cP(n,i))&&eu(this.baseMutations,e.baseMutations,(n,i)=>cP(n,i))}}class Rb{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){yt(e.mutations.length===i.length);let s=function(){return mue}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new Rb(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iue{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,We;function kue(t){switch(t){default:return xe();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Bz(t){if(t===void 0)return Yr("GRPC error has no .code"),Z.UNKNOWN;switch(t){case qt.OK:return Z.OK;case qt.CANCELLED:return Z.CANCELLED;case qt.UNKNOWN:return Z.UNKNOWN;case qt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case qt.INTERNAL:return Z.INTERNAL;case qt.UNAVAILABLE:return Z.UNAVAILABLE;case qt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case qt.NOT_FOUND:return Z.NOT_FOUND;case qt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case qt.ABORTED:return Z.ABORTED;case qt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case qt.DATA_LOSS:return Z.DATA_LOSS;default:return xe()}}(We=qt||(qt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rue(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oue=new Qa([4294967295,4294967295],0);function hP(t){const e=Rue().encode(t),n=new rz;return n.update(e),new Uint8Array(n.digest())}function pP(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Qa([n,i],0),new Qa([s,r],0)]}class Ob{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new md(`Invalid padding: ${n}`);if(i<0)throw new md(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new md(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new md(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qa.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(Qa.fromNumber(i)));return s.compare(Oue)===1&&(s=new Qa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=hP(e),[i,s]=pP(n);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);if(!this.de(o))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new Ob(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=hP(e),[i,s]=pP(n);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class md extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,yp.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ly(Ee.min(),s,new Vt(Ze),Zr(),He())}}class yp{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new yp(i,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class Lz{constructor(e,n){this.targetId=e,this.me=n}}class $z{constructor(e,n,i=An.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class fP{constructor(){this.fe=0,this.ge=gP(),this.pe=An.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=He(),n=He(),i=He();return this.ge.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:xe()}}),new yp(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=gP()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,yt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Pue{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zr(),this.qe=mP(),this.Qe=new Vt(Ze)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const r=s.target;if(tx(r))if(i===0){const o=new ge(r.path);this.Ue(n,o,zn.newNoDocument(o,Ee.min()))}else yt(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let o,a;try{o=cl(i).toUint8Array()}catch(l){if(l instanceof mz)return Jc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ob(o,s,r)}catch(l){return Jc(l instanceof md?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,r,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((r,o)=>{const a=this.Je(o);if(a){if(r.current&&tx(a.target)){const l=new ge(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,zn.newNoDocument(l,e))}r.be&&(n.set(o,r.ve()),r.Ce())}});let i=He();this.qe.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.ke.forEach((r,o)=>o.setReadTime(e));const s=new ly(e,n,this.Qe,this.ke,i);return this.ke=Zr(),this.qe=mP(),this.Qe=new Vt(Ze),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new fP,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tn(Ze),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fP),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function mP(){return new Vt(ge.comparator)}function gP(){return new Vt(ge.comparator)}const Mue={asc:"ASCENDING",desc:"DESCENDING"},Vue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bue={and:"AND",or:"OR"};class Lue{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ix(t,e){return t.useProto3Json||ny(e)?e:{value:e}}function $g(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $ue(t,e){return $g(t,e.toTimestamp())}function Js(t){return yt(!!t),Ee.fromTimestamp(function(n){const i=qo(n);return new on(i.seconds,i.nanos)}(t))}function Pb(t,e){return sx(t,e).canonicalString()}function sx(t,e){const n=function(s){return new kt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hz(t){const e=kt.fromString(t);return yt(Uz(e)),e}function rx(t,e){return Pb(t.databaseId,e.path)}function SC(t,e){const n=Hz(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(zz(n))}function Nz(t,e){return Pb(t.databaseId,e)}function Fue(t){const e=Hz(t);return e.length===4?kt.emptyPath():zz(e)}function ox(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zz(t){return yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _P(t,e,n){return{name:rx(t,e),fields:n.value.mapValue.fields}}function Hue(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(yt(u===void 0||typeof u=="string"),An.fromBase64String(u||"")):(yt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),An.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Z.UNKNOWN:Bz(c.code);return new de(u,c.message||"")}(o);n=new $z(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=SC(t,i.document.name),r=Js(i.document.updateTime),o=i.document.createTime?Js(i.document.createTime):Ee.min(),a=new hi({mapValue:{fields:i.document.fields}}),l=zn.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Dm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=SC(t,i.document),r=i.readTime?Js(i.readTime):Ee.min(),o=zn.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Dm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=SC(t,i.document),r=i.removedTargetIds||[];n=new Dm([],r,s,null)}else{if(!("filter"in e))return xe();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new Aue(s,r),a=i.targetId;n=new Lz(a,o)}}return n}function Nue(t,e){let n;if(e instanceof _p)n={update:_P(t,e.key,e.value)};else if(e instanceof kb)n={delete:rx(t,e.key)};else if(e instanceof ua)n={update:_P(t,e.key,e.data),updateMask:Zue(e.fieldMask)};else{if(!(e instanceof Eue))return xe();n={verify:rx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof Bg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lg)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw xe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:$ue(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:xe()}(t,e.precondition)),n}function zue(t,e){return t&&t.length>0?(yt(e!==void 0),t.map(n=>function(s,r){let o=s.updateTime?Js(s.updateTime):Js(r);return o.isEqual(Ee.min())&&(o=Js(r)),new wue(o,s.transformResults||[])}(n,e))):[]}function Wue(t,e){return{documents:[Nz(t,e.path)]}}function Gue(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Nz(t,s);const r=function(c){if(c.length!==0)return Gz(rr.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:nc(p.field),direction:jue(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ix(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function Uue(t){let e=Fue(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){yt(i===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=function(d){const p=Wz(d);return p instanceof rr&&vz(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(g){return new Vg(ic(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,ny(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,f=d.values||[];return new Mg(f,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,f=d.values||[];return new Mg(f,p)}(n.endAt)),cue(e,s,o,r,a,"F",l,c)}function Kue(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wz(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ic(n.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ic(n.unaryFilter.field);return Jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ic(n.unaryFilter.field);return Jt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ic(n.unaryFilter.field);return Jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(t):t.fieldFilter!==void 0?function(n){return Jt.create(ic(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(i=>Wz(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(t):xe()}function jue(t){return Mue[t]}function que(t){return Vue[t]}function Yue(t){return Bue[t]}function nc(t){return{fieldPath:t.canonicalString()}}function ic(t){return Sn.fromServerFormat(t.fieldPath)}function Gz(t){return t instanceof Jt?function(n){if(n.op==="=="){if(iP(n.value))return{unaryFilter:{field:nc(n.field),op:"IS_NAN"}};if(nP(n.value))return{unaryFilter:{field:nc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iP(n.value))return{unaryFilter:{field:nc(n.field),op:"IS_NOT_NAN"}};if(nP(n.value))return{unaryFilter:{field:nc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nc(n.field),op:que(n.op),value:n.value}}}(t):t instanceof rr?function(n){const i=n.getFilters().map(s=>Gz(s));return i.length===1?i[0]:{compositeFilter:{op:Yue(n.op),filters:i}}}(t):xe()}function Zue(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Uz(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n,i,s,r=Ee.min(),o=Ee.min(),a=An.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Que{constructor(e){this.ct=e}}function Xue(t){const e=Uue({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(){this.un=new ede}addToCollectionParentIndex(e,n){return this.un.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(jo.min())}updateCollectionGroup(e,n,i){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class ede{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Tn(kt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Tn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new iu(0)}static kn(){return new iu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tde{constructor(){this.changes=new _u(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Y.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ide{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Ld(i.mutation,s,Oi.empty(),on.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,He()).next(()=>i))}getLocalViewOfDocuments(e,n,i=He()){const s=Fa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let o=fd();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Fa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,He()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,s){let r=Zr();const o=Bd(),a=function(){return Bd()}();return n.forEach((l,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof ua)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ld(u.mutation,c,u.mutation.getFieldMask(),on.now())):o.set(c.key,Oi.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new nde(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Bd();let s=new Vt((o,a)=>o-a),r=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Oi.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(s.get(a.batchId)||He()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Iz();u.forEach(p=>{if(!r.has(p)){const f=Mz(n.get(p),i.get(p));f!==null&&d.set(p,f),r=r.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Y.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uue(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):Y.resolve(Fa());let a=-1,l=r;return o.next(c=>Y.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(u)?Y.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,He())).next(u=>({batchId:a,changes:Tz(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(i=>{let s=fd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let o=fd();return this.indexManager.getCollectionParents(e,r).next(a=>Y.forEach(a,l=>{const c=function(d,p){return new iy(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(u=>{u.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,zn.newInvalidDocument(u)))});let a=fd();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&Ld(u.mutation,c,Oi.empty(),on.now()),ry(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Y.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Js(s.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Xue(s.bundledQuery),readTime:Js(s.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rde{constructor(){this.overlays=new Vt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Fa();return Y.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.ht(e,n,r)}),Y.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Ir.delete(i)),Y.resolve()}getOverlaysForCollection(e,n,i){const s=Fa(),r=n.length+1,o=new ge(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return Y.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Vt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=Fa(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Fa(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return Y.resolve(a)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Iue(n,i));let r=this.Ir.get(n);r===void 0&&(r=He(),this.Ir.set(n,r)),this.Ir.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ode{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.Tr=new Tn(un.Er),this.dr=new Tn(un.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new un(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new un(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ge(new kt([])),i=new un(n,e),s=new un(n,e+1),r=[];return this.dr.forEachInRange([i,s],o=>{this.Vr(o),r.push(o.key)}),r}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new kt([])),i=new un(n,e),s=new un(n,e+1);let r=He();return this.dr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new un(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class un{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||Ze(e.wr,n.wr)}static Ar(e,n){return Ze(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tn(un.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Tue(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new un(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,n){return Y.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),r=s<0?0:s;return Y.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new un(n,0),s=new un(n,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([i,s],o=>{const a=this.Dr(o.wr);r.push(a)}),Y.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Tn(Ze);return n.forEach(s=>{const r=new un(s,0),o=new un(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([r,o],a=>{i=i.add(a.wr)})}),Y.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;ge.isDocumentKey(r)||(r=r.child(""));const o=new un(new ge(r),0);let a=new Tn(Ze);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),Y.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){yt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Y.forEach(n.mutations,s=>{const r=new un(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new un(n,0),s=this.br.firstAfterOrEqual(i);return Y.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{constructor(e){this.Mr=e,this.docs=function(){return new Vt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Y.resolve(i?i.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let i=Zr();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():zn.newInvalidDocument(s))}),Y.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Zr();const o=n.path,a=new ge(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Gce(Wce(u),i)<=0||(s.has(u.key)||ry(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return Y.resolve(r)}getAllFromCollectionGroup(e,n,i,s){xe()}Or(e,n){return Y.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new cde(this)}getSize(e){return Y.resolve(this.size)}}class cde extends tde{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),Y.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ude{constructor(e){this.persistence=e,this.Nr=new _u(n=>Tb(n),Ib),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mb,this.targetCount=0,this.kr=iu.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new iu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Kn(n),Y.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Y.waitFor(r).next(()=>s)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Y.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Y.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),Y.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Y.resolve(i)}containsKey(e,n){return Y.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dde{constructor(e,n){this.qr={},this.overlays={},this.Qr=new wb(0),this.Kr=!1,this.Kr=!0,this.$r=new ode,this.referenceDelegate=e(this),this.Ur=new ude(this),this.indexManager=new Jue,this.remoteDocumentCache=function(s){return new lde(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Que(n),this.Gr=new sde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new ade(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){le("MemoryPersistence","Starting transaction:",e);const s=new hde(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(r=>this.referenceDelegate.jr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Hr(e,n){return Y.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class hde extends Kce{constructor(e){super(),this.currentSequenceNumber=e}}class Vb{constructor(e){this.persistence=e,this.Jr=new Mb,this.Yr=null}static Zr(e){return new Vb(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Y.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.Xr.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,i=>{const s=ge.fromPath(i);return this.ei(e,s).next(r=>{r||n.removeEntry(s,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Y.or([()=>Y.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=He(),s=He();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Bb(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pde{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fde{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yle()?8:jce(gle())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.Yi(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Zi(e,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new pde;return this.Xi(e,n,o).next(a=>{if(r.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>r.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(sd()<=Ue.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",tc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(sd()<=Ue.DEBUG&&le("QueryEngine","Query:",tc(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(sd()<=Ue.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",tc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(n))):Y.resolve())}Yi(e,n){if(aP(n))return Y.resolve(null);let i=Xs(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nx(n,null,"F"),i=Xs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=He(...r);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,nx(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,s){return aP(n)||s.isEqual(Ee.min())?Y.resolve(null):this.Ji.getDocuments(e,i).next(r=>{const o=this.ts(n,r);return this.ns(n,o,i,s)?Y.resolve(null):(sd()<=Ue.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tc(n)),this.rs(e,o,n,zce(s,-1)).next(a=>a))})}ts(e,n){let i=new Tn(bz(e));return n.forEach((s,r)=>{ry(e,r)&&(i=i.add(r))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Xi(e,n,i){return sd()<=Ue.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",tc(n)),this.Ji.getDocumentsMatchingQuery(e,n,jo.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mde{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Vt(Ze),this._s=new _u(r=>Tb(r),Ib),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ide(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gde(t,e,n,i){return new mde(t,e,n,i)}async function Kz(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=He();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function _de(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,p=d.keys();let f=Y.resolve();return p.forEach(g=>{f=f.next(()=>u.getEntry(l,g)).next(y=>{const v=c.docVersions.get(g);yt(v!==null),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=He();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function jz(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function yde(t,e){const n=Ie(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const p=s.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(r,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(r,u.addedDocuments,d)));let f=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(An.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),s=s.insert(d,f),function(y,v,C){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(p,f,u)&&a.push(n.Ur.updateTargetData(r,f))});let l=Zr(),c=He();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(vde(r,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!i.isEqual(Ee.min())){const u=n.Ur.getLastRemoteSnapshotVersion(r).next(d=>n.Ur.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return Y.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.os=s,r))}function vde(t,e,n){let i=He(),s=He();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let o=Zr();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function Cde(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Dde(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(r=>r?(s=r,Y.resolve(s)):n.Ur.allocateTargetId(i).next(o=>(s=new So(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ax(t,e,n){const i=Ie(t),s=i.os.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!gp(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function yP(t,e,n){const i=Ie(t);let s=Ee.min(),r=He();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Ie(l),p=d._s.get(u);return p!==void 0?Y.resolve(d.os.get(p)):d.Ur.getTargetData(c,u)}(i,o,Xs(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?s:Ee.min(),n?r:He())).next(a=>(xde(i,hue(e),a),{documents:a,Ts:r})))}function xde(t,e,n){let i=t.us.get(e)||Ee.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.us.set(e,i)}class vP{constructor(){this.activeTargetIds=yue()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wde{constructor(){this.so=new vP,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vP,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sde{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f=null;function bC(){return $f===null?$f=function(){return 268435456+Math.round(2147483648*Math.random())}():$f++,"0x"+$f.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ede{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="WebChannelConnection";class Tde extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Fo(){return!1}Mo(n,i,s,r,o){const a=bC(),l=this.xo(n,i.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,r,o),this.No(n,l,c,s).then(u=>(le("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Jc("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(n,i,s,r,o,a){return this.Mo(n,i,s,r,o)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,o)=>n[o]=r),s&&s.headers.forEach((r,o)=>n[o]=r)}xo(n,i){const s=bde[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const r=bC();return new Promise((o,a)=>{const l=new oz;l.setWithCredentials(!0),l.listenOnce(lz.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ym.NO_ERROR:const u=l.getResponseJson();le(Vn,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case ym.TIMEOUT:le(Vn,`RPC '${e}' ${r} timed out`),a(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case ym.HTTP_ERROR:const d=l.getStatus();if(le(Vn,`RPC '${e}' ${r} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const f=p==null?void 0:p.error;if(f&&f.status&&f.message){const g=function(v){const C=v.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(C)>=0?C:Z.UNKNOWN}(f.status);a(new de(g,f.message))}else a(new de(Z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new de(Z.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{le(Vn,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(s);le(Vn,`RPC '${e}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const s=bC(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dz(),a=uz(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new az({})),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=r.join("");le(Vn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let p=!1,f=!1;const g=new Ede({Io:v=>{f?le(Vn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(p||(le(Vn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),le(Vn,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},To:()=>d.close()}),y=(v,C,x)=>{v.listen(C,S=>{try{x(S)}catch(O){setTimeout(()=>{throw O},0)}})};return y(d,pd.EventType.OPEN,()=>{f||(le(Vn,`RPC '${e}' stream ${s} transport opened.`),g.yo())}),y(d,pd.EventType.CLOSE,()=>{f||(f=!0,le(Vn,`RPC '${e}' stream ${s} transport closed`),g.So())}),y(d,pd.EventType.ERROR,v=>{f||(f=!0,Jc(Vn,`RPC '${e}' stream ${s} transport errored:`,v),g.So(new de(Z.UNAVAILABLE,"The operation could not be completed")))}),y(d,pd.EventType.MESSAGE,v=>{var C;if(!f){const x=v.data[0];yt(!!x);const S=x,O=S.error||((C=S[0])===null||C===void 0?void 0:C.error);if(O){le(Vn,`RPC '${e}' stream ${s} received error:`,O);const H=O.status;let F=function(A){const k=qt[A];if(k!==void 0)return Bz(k)}(H),I=O.message;F===void 0&&(F=Z.INTERNAL,I="Unknown error status: "+H+" with message "+O.message),f=!0,g.So(new de(F,I)),d.close()}else le(Vn,`RPC '${e}' stream ${s} received:`,x),g.bo(x)}}),y(a,cz.STAT_EVENT,v=>{v.stat===Q0.PROXY?le(Vn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Q0.NOPROXY&&le(Vn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function EC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){return new Lue(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,n,i=1e3,s=1.5,r=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n,i,s,r,o,a,l){this.ui=e,this.Ho=i,this.Jo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qz(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Yr(n.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new de(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ide extends Yz{constructor(e,n,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Hue(this.serializer,e),i=function(r){if(!("targetChange"in r))return Ee.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Js(o.readTime):Ee.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=ox(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=tx(l)?{documents:Wue(r,l)}:{query:Gue(r,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Fz(r,o.resumeToken);const c=ix(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=$g(r,o.snapshotVersion.toTimestamp());const c=ix(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=Kue(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=ox(this.serializer),n.removeTarget=e,this.a_(n)}}class Ade extends Yz{constructor(e,n,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return yt(!!e.streamToken),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=zue(e.writeResults,e.commitTime),i=Js(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=ox(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Nue(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kde extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Mo(e,sx(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new de(Z.UNKNOWN,r.toString())})}Lo(e,n,i,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,sx(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Rde{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yr(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ode{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(o=>{i.enqueueAndForget(async()=>{Al(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ie(l);c.L_.add(4),await vp(c),c.q_.set("Unknown"),c.L_.delete(4),await uy(c)}(this))})}),this.q_=new Rde(i,s)}}async function uy(t){if(Al(t))for(const e of t.B_)await e(!0)}async function vp(t){for(const e of t.B_)await e(!1)}function Zz(t,e){const n=Ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Hb(n)?Fb(n):yu(n).r_()&&$b(n,e))}function Lb(t,e){const n=Ie(t),i=yu(n);n.N_.delete(e),i.r_()&&Qz(n,e),n.N_.size===0&&(i.r_()?i.o_():Al(n)&&n.q_.set("Unknown"))}function $b(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yu(t).A_(e)}function Qz(t,e){t.Q_.xe(e),yu(t).R_(e)}function Fb(t){t.Q_=new Pue({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yu(t).start(),t.q_.v_()}function Hb(t){return Al(t)&&!yu(t).n_()&&t.N_.size>0}function Al(t){return Ie(t).L_.size===0}function Xz(t){t.Q_=void 0}async function Pde(t){t.q_.set("Online")}async function Mde(t){t.N_.forEach((e,n)=>{$b(t,e)})}async function Vde(t,e){Xz(t),Hb(t)?(t.q_.M_(e),Fb(t)):t.q_.set("Unknown")}async function Bde(t,e,n){if(t.q_.set("Online"),e instanceof $z&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(i){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fg(t,i)}else if(e instanceof Dm?t.Q_.Ke(e):e instanceof Lz?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const i=await jz(t.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.N_.get(c);u&&r.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.N_.get(l);if(!u)return;r.N_.set(l,u.withResumeToken(An.EMPTY_BYTE_STRING,u.snapshotVersion)),Qz(r,l);const d=new So(u.target,l,c,u.sequenceNumber);$b(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){le("RemoteStore","Failed to raise snapshot:",i),await Fg(t,i)}}async function Fg(t,e,n){if(!gp(e))throw e;t.L_.add(1),await vp(t),t.q_.set("Offline"),n||(n=()=>jz(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await uy(t)})}function Jz(t,e){return e().catch(n=>Fg(t,n,e))}async function dy(t){const e=Ie(t),n=Yo(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lde(e);)try{const s=await Cde(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,$de(e,s)}catch(s){await Fg(e,s)}eW(e)&&tW(e)}function Lde(t){return Al(t)&&t.O_.length<10}function $de(t,e){t.O_.push(e);const n=Yo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function eW(t){return Al(t)&&!Yo(t).n_()&&t.O_.length>0}function tW(t){Yo(t).start()}async function Fde(t){Yo(t).p_()}async function Hde(t){const e=Yo(t);for(const n of t.O_)e.m_(n.mutations)}async function Nde(t,e,n){const i=t.O_.shift(),s=Rb.from(i,e,n);await Jz(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await dy(t)}async function zde(t,e){e&&Yo(t).V_&&await async function(i,s){if(function(o){return kue(o)&&o!==Z.ABORTED}(s.code)){const r=i.O_.shift();Yo(i).s_(),await Jz(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await dy(i)}}(t,e),eW(t)&&tW(t)}async function DP(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const i=Al(n);n.L_.add(3),await vp(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await uy(n)}async function Wde(t,e){const n=Ie(t);e?(n.L_.delete(2),await uy(n)):e||(n.L_.add(2),await vp(n),n.q_.set("Unknown"))}function yu(t){return t.K_||(t.K_=function(n,i,s){const r=Ie(n);return r.w_(),new Ide(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Pde.bind(null,t),Ro:Mde.bind(null,t),mo:Vde.bind(null,t),d_:Bde.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Hb(t)?Fb(t):t.q_.set("Unknown")):(await t.K_.stop(),Xz(t))})),t.K_}function Yo(t){return t.U_||(t.U_=function(n,i,s){const r=Ie(n);return r.w_(),new Ade(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Fde.bind(null,t),mo:zde.bind(null,t),f_:Hde.bind(null,t),g_:Nde.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await dy(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const o=Date.now()+i,a=new Nb(e,n,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zb(t,e){if(Yr("AsyncQueue",`${e}: ${t}`),gp(t))return new de(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ge.comparator(n.key,i.key):(n,i)=>ge.comparator(n.key,i.key),this.keyedMap=fd(),this.sortedSet=new Vt(this.comparator)}static emptySet(e){return new Bc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Bc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.W_=new Vt(ge.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class su{constructor(e,n,i,s,r,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new su(e,n,Bc.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gde{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ude{constructor(){this.queries=wP(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=Ie(n),r=s.queries;s.queries=wP(),r.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function wP(){return new _u(t=>Sz(t),sy)}async function Kde(t,e){const n=Ie(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.H_()&&e.J_()&&(i=2):(r=new Gde,i=e.J_()?0:1);try{switch(i){case 0:r.z_=await n.onListen(s,!0);break;case 1:r.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=zb(o,`Initialization of query '${tc(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.j_.push(e),e.Z_(n.onlineState),r.z_&&e.X_(r.z_)&&Wb(n)}async function jde(t,e){const n=Ie(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const o=r.j_.indexOf(e);o>=0&&(r.j_.splice(o,1),r.j_.length===0?s=e.J_()?0:1:!r.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qde(t,e){const n=Ie(t);let i=!1;for(const s of e){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.j_)a.X_(s)&&(i=!0);o.z_=s}}i&&Wb(n)}function Yde(t,e,n){const i=Ie(t),s=i.queries.get(e);if(s)for(const r of s.j_)r.onError(n);i.queries.delete(e)}function Wb(t){t.Y_.forEach(e=>{e.next()})}var lx,SP;(SP=lx||(lx={})).ea="default",SP.Cache="cache";class Zde{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new su(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e){this.key=e}}class iW{constructor(e){this.key=e}}class Qde{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=He(),this.mutatedKeys=He(),this.Aa=bz(e),this.Ra=new Bc(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new xP,s=n?n.Ra:this.Ra;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const p=s.get(u),f=ry(this.query,d)?d:null,g=!!p&&this.mutatedKeys.has(p.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;p&&f?p.data.isEqual(f.data)?g!==y&&(i.track({type:3,doc:f}),v=!0):this.ga(p,f)||(i.track({type:2,doc:f}),v=!0,(l&&this.Aa(f,l)>0||c&&this.Aa(f,c)<0)&&(a=!0)):!p&&f?(i.track({type:0,doc:f}),v=!0):p&&!f&&(i.track({type:1,doc:p}),v=!0,(l||c)&&(a=!0)),v&&(f?(o=o.add(f),r=y?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Ra:o,fa:i,ns:a,mutatedKeys:r}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(f,g){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return y(f)-y(g)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(i),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new su(this.query,e.Ra,r,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xP,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=He(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new iW(i))}),this.da.forEach(i=>{e.has(i)||n.push(new nW(i))}),n}ba(e){this.Ta=e.Ts,this.da=He();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return su.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Xde{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Jde{constructor(e){this.key=e,this.va=!1}}class ehe{constructor(e,n,i,s,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new _u(a=>Sz(a),sy),this.Ma=new Map,this.xa=new Set,this.Oa=new Vt(ge.comparator),this.Na=new Map,this.La=new Mb,this.Ba={},this.ka=new Map,this.qa=iu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function the(t,e,n=!0){const i=cW(t);let s;const r=i.Fa.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Da()):s=await sW(i,e,n,!0),s}async function nhe(t,e){const n=cW(t);await sW(n,e,!0,!1)}async function sW(t,e,n,i){const s=await Dde(t.localStore,Xs(e)),r=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(r):"not-current";let a;return i&&(a=await ihe(t,e,r,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Zz(t.remoteStore,s),a}async function ihe(t,e,n,i,s){t.Ka=(d,p,f)=>async function(y,v,C,x){let S=v.view.ma(C);S.ns&&(S=await yP(y.localStore,v.query,!1).then(({documents:I})=>v.view.ma(I,S)));const O=x&&x.targetChanges.get(v.targetId),H=x&&x.targetMismatches.get(v.targetId)!=null,F=v.view.applyChanges(S,y.isPrimaryClient,O,H);return EP(y,v.targetId,F.wa),F.snapshot}(t,d,p,f);const r=await yP(t.localStore,e,!0),o=new Qde(e,r.Ts),a=o.ma(r.documents),l=yp.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);EP(t,n,c.wa);const u=new Xde(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function she(t,e,n){const i=Ie(t),s=i.Fa.get(e),r=i.Ma.get(s.targetId);if(r.length>1)return i.Ma.set(s.targetId,r.filter(o=>!sy(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await ax(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Lb(i.remoteStore,s.targetId),cx(i,s.targetId)}).catch(mp)):(cx(i,s.targetId),await ax(i.localStore,s.targetId,!0))}async function rhe(t,e){const n=Ie(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Lb(n.remoteStore,i.targetId))}async function ohe(t,e,n){const i=phe(t);try{const s=await function(o,a){const l=Ie(o),c=on.now(),u=a.reduce((f,g)=>f.add(g.key),He());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Zr(),y=He();return l.cs.getEntries(f,u).next(v=>{g=v,g.forEach((C,x)=>{x.isValidDocument()||(y=y.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,g)).next(v=>{d=v;const C=[];for(const x of a){const S=bue(x,d.get(x.key).overlayedDocument);S!=null&&C.push(new ua(x.key,S,gz(S.value.mapValue),Es.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,C,a)}).next(v=>{p=v;const C=v.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(f,v.batchId,C)})}).then(()=>({batchId:p.batchId,changes:Tz(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Vt(Ze)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,s.batchId,n),await Cp(i,s.changes),await dy(i.remoteStore)}catch(s){const r=zb(s,"Failed to persist write");n.reject(r)}}async function rW(t,e){const n=Ie(t);try{const i=await yde(n.localStore,e);e.targetChanges.forEach((s,r)=>{const o=n.Na.get(r);o&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?yt(o.va):s.removedDocuments.size>0&&(yt(o.va),o.va=!1))}),await Cp(n,i,e)}catch(i){await mp(i)}}function bP(t,e,n){const i=Ie(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((r,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&Wb(l)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ahe(t,e,n){const i=Ie(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),r=s&&s.key;if(r){let o=new Vt(ge.comparator);o=o.insert(r,zn.newNoDocument(r,Ee.min()));const a=He().add(r),l=new ly(Ee.min(),new Map,new Vt(Ze),o,a);await rW(i,l),i.Oa=i.Oa.remove(r),i.Na.delete(e),Gb(i)}else await ax(i.localStore,e,!1).then(()=>cx(i,e,n)).catch(mp)}async function lhe(t,e){const n=Ie(t),i=e.batch.batchId;try{const s=await _de(n.localStore,e);aW(n,i,null),oW(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Cp(n,s)}catch(s){await mp(s)}}async function che(t,e,n){const i=Ie(t);try{const s=await function(o,a){const l=Ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(yt(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);aW(i,e,n),oW(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Cp(i,s)}catch(s){await mp(s)}}function oW(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function aW(t,e,n){const i=Ie(t);let s=i.Ba[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function cx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||lW(t,i)})}function lW(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Lb(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gb(t))}function EP(t,e,n){for(const i of n)i instanceof nW?(t.La.addReference(i.key,e),uhe(t,i)):i instanceof iW?(le("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||lW(t,i.key)):xe()}function uhe(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(i),Gb(t))}function Gb(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(kt.fromString(e)),i=t.qa.next();t.Na.set(i,new Jde(n)),t.Oa=t.Oa.insert(n,i),Zz(t.remoteStore,new So(Xs(wz(n.path)),i,"TargetPurposeLimboResolution",wb.oe))}}async function Cp(t,e,n){const i=Ie(t),s=[],r=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Bb.Wi(l.targetId,c);r.push(d)}}))}),await Promise.all(o),i.Ca.d_(s),await async function(l,c){const u=Ie(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Y.forEach(c,p=>Y.forEach(p.$i,f=>u.persistence.referenceDelegate.addReference(d,p.targetId,f)).next(()=>Y.forEach(p.Ui,f=>u.persistence.referenceDelegate.removeReference(d,p.targetId,f)))))}catch(d){if(!gp(d))throw d;le("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const f=u.os.get(p),g=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(p,y)}}}(i.localStore,r))}async function dhe(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const i=await Kz(n.localStore,e);n.currentUser=e,function(r,o){r.ka.forEach(a=>{a.forEach(l=>{l.reject(new de(Z.CANCELLED,o))})}),r.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cp(n,i.hs)}}function hhe(t,e){const n=Ie(t),i=n.Na.get(e);if(i&&i.va)return He().add(i.key);{let s=He();const r=n.Ma.get(e);if(!r)return s;for(const o of r){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function cW(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ahe.bind(null,e),e.Ca.d_=qde.bind(null,e.eventManager),e.Ca.$a=Yde.bind(null,e.eventManager),e}function phe(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=che.bind(null,e),e}class TP{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cy(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return gde(this.persistence,new fde,e.initialUser,this.serializer)}createPersistence(e){return new dde(Vb.Zr,this.serializer)}createSharedClientState(e){return new wde}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fhe{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dhe.bind(null,this.syncEngine),await Wde(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ude}()}createDatastore(e){const n=cy(e.databaseInfo.databaseId),i=function(r){return new Tde(r)}(e.databaseInfo);return function(r,o,a,l){return new kde(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,o,a){return new Ode(i,s,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bP(this.syncEngine,n,0),function(){return CP.D()?new CP:new Sde}())}createSyncEngine(e,n){return function(s,r,o,a,l,c,u){const d=new ehe(s,r,o,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=Ie(s);le("RemoteStore","RemoteStore shutting down."),r.L_.add(5),await vp(r),r.k_.shutdown(),r.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mhe{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ghe{constructor(e,n,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Fn.UNAUTHENTICATED,this.clientId=pz.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{le("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(le("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=zb(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function TC(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Kz(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function IP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yhe(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>DP(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>DP(e.remoteStore,s)),t._onlineComponents=e}function _he(t){return t.name==="FirebaseError"?t.code===Z.FAILED_PRECONDITION||t.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function yhe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await TC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!_he(n))throw n;Jc("Error using user provided cache. Falling back to memory cache: "+n),await TC(t,new TP)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await TC(t,new TP);return t._offlineComponents}async function uW(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await IP(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await IP(t,new fhe))),t._onlineComponents}function vhe(t){return uW(t).then(e=>e.syncEngine)}async function Che(t){const e=await uW(t),n=e.eventManager;return n.onListen=the.bind(null,e.syncEngine),n.onUnlisten=she.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nhe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rhe.bind(null,e.syncEngine),n}function Dhe(t,e,n={}){const i=new Ho;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new mhe({next:p=>{o.enqueueAndForget(()=>jde(r,d)),p.fromCache&&l.source==="server"?c.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Zde(a,u,{includeMetadataChanges:!0,_a:!0});return Kde(r,d)}(await Che(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(t,e,n){if(!n)throw new de(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xhe(t,e,n,i){if(e===!0&&i===!0)throw new de(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kP(t){if(!ge.isDocumentKey(t))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RP(t){if(ge.isDocumentKey(t))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ub(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe()}function dl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ub(t);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xhe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dW((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hy{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OP(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Pce;switch(i.type){case"firstParty":return new Lce(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=AP.get(n);i&&(le("ComponentProvider","Removing Datastore"),AP.delete(n),i.terminate())}(this),Promise.resolve()}}function whe(t,e,n,i={}){var s;const r=(t=dl(t,hy))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&Jc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Fn.MOCK_USER;else{a=mle(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Fn(c)}t._authCredentials=new Mce(new hz(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new py(this.firestore,e,this._query)}}class ss{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ss(this.firestore,e,this._key)}}class No extends py{constructor(e,n,i){super(e,n,wz(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ss(this.firestore,null,new ge(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function She(t,e,...n){if(t=Ko(t),hW("collection","path",e),t instanceof hy){const i=kt.fromString(e,...n);return RP(i),new No(t,null,i)}{if(!(t instanceof ss||t instanceof No))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(kt.fromString(e,...n));return RP(i),new No(t.firestore,null,i)}}function Kb(t,e,...n){if(t=Ko(t),arguments.length===1&&(e=pz.newId()),hW("doc","path",e),t instanceof hy){const i=kt.fromString(e,...n);return kP(i),new ss(t,null,new ge(i))}{if(!(t instanceof ss||t instanceof No))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(kt.fromString(e,...n));return kP(i),new ss(t.firestore,t instanceof No?t.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bhe{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new qz(this,"async_queue_retry"),this.Eu=()=>{const n=EC();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=EC();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=EC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Ho;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!gp(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Yr("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Pu=!1,i))));return this.au=n,n}enqueueAfterDelay(e,n,i){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=Nb.createAndSchedule(this,e,n,i,r=>this.Vu(r));return this.lu.push(s),s}du(){this.hu&&xe()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Dp extends hy{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=function(){return new bhe}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fW(this),this._firestoreClient.terminate()}}function Ehe(t,e){const n=wce(),i="(default)",s=vce(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=ple("firestore");r&&whe(s,...r)}return s}function pW(t){return t._firestoreClient||fW(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fW(t){var e,n,i;const s=t._freezeSettings(),r=function(a,l,c,u){return new Zce(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,dW(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new ghe(t._authCredentials,t._appCheckCredentials,t._queue,r),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ru(An.fromBase64String(e))}catch(n){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ru(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const The=/^__.*__$/;class Ihe{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new _p(e,this.data,n,this.fieldTransforms)}}class mW{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ua(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gW(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class Zb{constructor(e,n,i,s,r,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.yu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Zb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:i,Du:!1});return s.vu(e),s}Cu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:i,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Hg(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(gW(this.wu)&&The.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class Ahe{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||cy(e)}Nu(e,n,i,s=!1){return new Zb({wu:e,methodName:n,Ou:i,path:Sn.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _W(t){const e=t._freezeSettings(),n=cy(t._databaseId);return new Ahe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function khe(t,e,n,i,s,r={}){const o=t.Nu(r.merge||r.mergeFields?2:0,e,n,s);Qb("Data must be an object, but it was:",o,i);const a=yW(i,o);let l,c;if(r.merge)l=new Oi(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const d of r.mergeFields){const p=ux(e,d,n);if(!o.contains(p))throw new de(Z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);CW(u,p)||u.push(p)}l=new Oi(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Ihe(new hi(a),l,c)}class my extends jb{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof my}}function Rhe(t,e,n,i){const s=t.Nu(1,e,n);Qb("Data must be an object, but it was:",s,i);const r=[],o=hi.empty();Il(i,(l,c)=>{const u=Xb(e,l,n);c=Ko(c);const d=s.Cu(u);if(c instanceof my)r.push(u);else{const p=gy(c,d);p!=null&&(r.push(u),o.set(u,p))}});const a=new Oi(r);return new mW(o,a,s.fieldTransforms)}function Ohe(t,e,n,i,s,r){const o=t.Nu(1,e,n),a=[ux(e,i,n)],l=[s];if(r.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)a.push(ux(e,r[p])),l.push(r[p+1]);const c=[],u=hi.empty();for(let p=a.length-1;p>=0;--p)if(!CW(c,a[p])){const f=a[p];let g=l[p];g=Ko(g);const y=o.Cu(f);if(g instanceof my)c.push(f);else{const v=gy(g,y);v!=null&&(c.push(f),u.set(f,v))}}const d=new Oi(c);return new mW(u,d,o.fieldTransforms)}function gy(t,e){if(vW(t=Ko(t)))return Qb("Unsupported field value:",e,t),yW(t,e);if(t instanceof jb)return function(i,s){if(!gW(s.wu))throw s.Mu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=gy(a,s.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=Ko(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vue(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=on.fromDate(i);return{timestampValue:$g(s.serializer,r)}}if(i instanceof on){const r=new on(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$g(s.serializer,r)}}if(i instanceof qb)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ru)return{bytesValue:Fz(s.serializer,i._byteString)};if(i instanceof ss){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Pb(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Yb)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return Ab(a.serializer,l)})}}}}}}(i,s);throw s.Mu(`Unsupported field value: ${Ub(i)}`)}(t,e)}function yW(t,e){const n={};return fz(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Il(t,(i,s)=>{const r=gy(s,e.bu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function vW(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof on||t instanceof qb||t instanceof ru||t instanceof ss||t instanceof jb||t instanceof Yb)}function Qb(t,e,n){if(!vW(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Ub(n);throw i==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+i)}}function ux(t,e,n){if((e=Ko(e))instanceof fy)return e._internalPath;if(typeof e=="string")return Xb(t,e);throw Hg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Phe=new RegExp("[~\\*/\\[\\]]");function Xb(t,e,n){if(e.search(Phe)>=0)throw Hg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fy(...e.split("."))._internalPath}catch{throw Hg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hg(t,e,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new de(Z.INVALID_ARGUMENT,a+t+l)}function CW(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xW("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Mhe extends DW{data(){return super.data()}}function xW(t,e){return typeof e=="string"?Xb(t,e):e instanceof fy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vhe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bhe{convertValue(e,n="none"){switch(ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Il(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>Gt(o.doubleValue));return new Yb(r)}convertGeoPoint(e){return new qb(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=bb(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ah(e));default:return null}}convertTimestamp(e){const n=qo(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=kt.fromString(e);yt(Uz(i));const s=new kh(i.get(1),i.get(3)),r=new ge(i.popFirst(5));return s.isEqual(n)||Yr(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lhe(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $he extends DW{constructor(e,n,i,s,r,o){super(e,n,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(xW("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class xm extends $he{data(e={}){return super.data(e)}}class Fhe{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ff(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new xm(this._firestore,this._userDataWriter,i.key,i,new Ff(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new xm(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ff(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new xm(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ff(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Hhe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Hhe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}class Nhe extends Bhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new ru(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,n)}}function zhe(t){t=dl(t,py);const e=dl(t.firestore,Dp),n=pW(e),i=new Nhe(e);return Vhe(t._query),Dhe(n,t._query).then(s=>new Fhe(e,i,t,s))}function Whe(t,e,n,...i){t=dl(t,ss);const s=dl(t.firestore,Dp),r=_W(s);let o;return o=typeof(e=Ko(e))=="string"||e instanceof fy?Ohe(r,"updateDoc",t._key,e,n,i):Rhe(r,"updateDoc",t._key,e),Jb(s,[o.toMutation(t._key,Es.exists(!0))])}function Ghe(t){return Jb(dl(t.firestore,Dp),[new kb(t._key,Es.none())])}function Uhe(t,e){const n=dl(t.firestore,Dp),i=Kb(t),s=Lhe(t.converter,e);return Jb(n,[khe(_W(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Es.exists(!1))]).then(()=>i)}function Jb(t,e){return function(i,s){const r=new Ho;return i.asyncQueue.enqueueAndForget(async()=>ohe(await vhe(i),s,r)),r.promise}(pW(t),e)}(function(e,n=!0){(function(s){gu=s})(xce),Og(new Eh("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new Dp(new Vce(i.getProvider("auth-internal")),new Fce(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kh(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Vc(QO,"4.7.1",e),Vc(QO,"4.7.1","esm2017")})();var Khe="firebase",jhe="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vc(Khe,jhe,"app");const qhe={apiKey:"AIzaSyBcgnjRc3faIZlq-_AoNu-eVyOf1Y38A98",authDomain:"react-scheduler-base.firebaseapp.com",projectId:"react-scheduler-base",storageBucket:"react-scheduler-base.appspot.com",messagingSenderId:"853166815089",appId:"1:853166815089:web:64b77264665e4cddb2a8d0"};nz(qhe);const Yhe=Ehe(),_y=She(Yhe,"data"),Zhe=()=>{const[t,e]=G.useState([]),[n,i]=G.useState([]),s=G.useRef(!1);return G.useEffect(()=>{s.current||zhe(_y).then(r=>{r.docs.forEach(o=>{e(a=>[...a,{...o.data(),endDate:new Date(o.data().endDate.seconds*1e3+o.data().endDate.nanoseconds),startDate:new Date(o.data().startDate.seconds*1e3+o.data().startDate.nanoseconds),id:o.id}])})}).catch(r=>{i(r)}),s.current=!0},[]),{dbData:t,error:n}},Qhe=t=>{Uhe(_y,{...t})},Xhe=t=>{const e=Kb(_y,t);Ghe(e)},Jhe=(t,e)=>{const n=Kb(_y,e);Whe(n,{...t})};ele("pl");tle(ile);const epe=new Date,tpe=["day","week","workWeek","month"],npe=()=>{const{error:t,dbData:e}=Zhe();return ka.jsxs(ka.Fragment,{children:[t&&ka.jsx("p",{children:t}),ka.jsx(qae,{timeZone:"Europe/Warsaw",dataSource:e,views:tpe,defaultCurrentView:"week",defaultCurrentDate:epe,height:600,cellDuration:60,firstDayOfWeek:1,startDayHour:8,endDayHour:20,onAppointmentDeleting:n=>Xhe(n.appointmentData.id),onAppointmentAdding:n=>Qhe(n.appointmentData),onAppointmentUpdated:n=>Jhe(n.appointmentData,n.appointmentData.id)})]})};/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ng(){return Ng=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ng.apply(this,arguments)}var Ha;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ha||(Ha={}));const PP="popstate";function ipe(t){t===void 0&&(t={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return dx("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:SW(s)}return rpe(e,n,null,t)}function wW(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function spe(){return Math.random().toString(36).substr(2,8)}function MP(t,e){return{usr:t.state,key:t.key,idx:e}}function dx(t,e,n,i){return n===void 0&&(n=null),Ng({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bW(e):e,{state:n,key:e&&e.key||i||spe()})}function SW(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function bW(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function rpe(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=Ha.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ng({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ha.Pop;let v=u(),C=v==null?null:v-c;c=v,l&&l({action:a,location:y.location,delta:C})}function p(v,C){a=Ha.Push;let x=dx(y.location,v,C);c=u()+1;let S=MP(x,c),O=y.createHref(x);try{o.pushState(S,"",O)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(O)}r&&l&&l({action:a,location:y.location,delta:1})}function f(v,C){a=Ha.Replace;let x=dx(y.location,v,C);c=u();let S=MP(x,c),O=y.createHref(x);o.replaceState(S,"",O),r&&l&&l({action:a,location:y.location,delta:0})}function g(v){let C=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:SW(v);return x=x.replace(/ $/,"%20"),wW(C,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,C)}let y={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(PP,d),l=v,()=>{s.removeEventListener(PP,d),l=null}},createHref(v){return e(s,v)},createURL:g,encodeLocation(v){let C=g(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:f,go(v){return o.go(v)}};return y}var VP;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(VP||(VP={}));function ope(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const EW=["post","put","patch","delete"];new Set(EW);const ape=["get",...EW];new Set(ape);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hx.apply(this,arguments)}const lpe=G.createContext(null),TW=G.createContext(null);function cpe(){return G.useContext(TW)!=null}function upe(t){let{basename:e="/",children:n=null,location:i,navigationType:s=Ha.Pop,navigator:r,static:o=!1,future:a}=t;cpe()&&wW(!1);let l=e.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:l,navigator:r,static:o,future:hx({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=bW(i));let{pathname:u="/",search:d="",hash:p="",state:f=null,key:g="default"}=i,y=G.useMemo(()=>{let v=ope(u,l);return v==null?null:{location:{pathname:v,search:d,hash:p,state:f,key:g},navigationType:s}},[l,u,d,p,f,g,s]);return y==null?null:G.createElement(lpe.Provider,{value:c},G.createElement(TW.Provider,{children:n,value:y}))}new Promise(()=>{});/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dpe="6";try{window.__reactRouterVersion=dpe}catch{}const hpe="startTransition",BP=DG[hpe];function ppe(t){let{basename:e,children:n,future:i,window:s}=t,r=G.useRef();r.current==null&&(r.current=ipe({window:s,v5Compat:!0}));let o=r.current,[a,l]=G.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=G.useCallback(d=>{c&&BP?BP(()=>l(d)):l(d)},[l,c]);return G.useLayoutEffect(()=>o.listen(u),[o,u]),G.createElement(upe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}var LP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(LP||(LP={}));var $P;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($P||($P={}));Q1(document.getElementById("root")).render(ka.jsx(G.StrictMode,{children:ka.jsx(ppe,{basename:"/react-scheduler/",children:ka.jsx(npe,{})})}));
